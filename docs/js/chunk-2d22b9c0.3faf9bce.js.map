{"version":3,"sources":["webpack://CustomApplicationmain-application/./story/pages/normal/upload.vue","webpack://CustomApplicationmain-application/./story/pages/normal/upload.vue?e638"],"names":["class","title","multiple","data","uploadData","headers","uploadHeaders","val","singleValue","action","filename","handleRemove","handlePreview","accept","validator","chooseFileValidator","draggable","autoUpload","disabled","customUpload","handleUpload","default","item","index","name","file","businessType","button","popper","label","icon","width","level","orgCode","Authorization","console","log","0","id","1","status","percent","files","Promise","all","map","upload","$notice","error","methods","calcSize","slice","lastIndexOf","length","this","warn","time","render"],"mappings":"sMACSA,MAAM,e,EAiCH,eAAmC,UAA/B,8BAA0B,G,EAQ9B,eAA0B,UAAtB,qBAAiB,G,EAWrB,eAAe,UAAX,UAAM,G,EAQV,eAAe,UAAX,UAAM,G,EA+BV,eAAc,UAAV,SAAK,G,EAWT,eAAc,UAAV,SAAK,G,EAWT,eAAc,UAAV,SAAK,G,EAWT,eAAc,UAAV,SAAK,G,EAQT,eAAc,UAAV,SAAK,G,EAYT,eAAc,UAAV,SAAK,G,qRAhJjB,eAgLM,MAhLN,EAgLM,CA/KF,eAUW,GAVDC,MAAM,SAAO,C,wBACnB,iBAQE,CARF,eAQE,GAPOC,UAAU,EACVC,KAAM,EAAAC,WACNC,QAAS,EAAAC,c,WACD,EAAAC,IAAIC,Y,qDAAJ,EAAAD,IAAIC,YAAW,IACxBC,OAAO,iDACPC,SAAS,OACRC,aAAc,EAAAA,c,iEAI3B,eAOW,GAPDV,MAAM,SAAO,C,wBACnB,iBAKE,CALF,eAKE,G,WAJe,EAAAM,IAAG,G,qDAAH,EAAAA,IAAG,OACZE,OAAO,kDACPC,SAAS,OACRC,aAAc,EAAAA,c,gDAI3B,eAQW,GARDV,MAAM,QAAM,C,wBAClB,iBAME,CANF,eAME,G,WALe,EAAAM,IAAG,G,qDAAH,EAAAA,IAAG,OACZE,OAAO,kDACPC,SAAS,OACRC,aAAc,EAAAA,aACdC,cAAe,EAAAA,e,gEAI5B,eAiBW,GAjBDX,MAAM,aAAW,C,wBACvB,iBAAmC,CAAnC,EACA,eAME,GALMY,OAAO,Q,WACE,EAAAN,IAAG,G,qDAAH,EAAAA,IAAG,OACZE,OAAO,kDACPC,SAAS,OACRC,aAAc,EAAAA,c,sCAEvB,EACA,eAME,GALME,OAAO,Y,WACE,EAAAN,IAAG,G,qDAAH,EAAAA,IAAG,OACZE,OAAO,kDACPC,SAAS,OACRC,aAAc,EAAAA,c,gDAI3B,eAkBW,GAlBDV,MAAM,gBAAc,C,wBAC1B,iBAAe,CAAf,EACA,eAME,G,WALe,EAAAM,IAAG,G,qDAAH,EAAAA,IAAG,OACZE,OAAO,kDACPC,SAAS,OACRC,aAAc,EAAAA,aACdG,UAAW,EAAAC,qB,kDAEpB,EACA,eAOE,GANMC,UAAA,G,WACS,EAAAT,IAAG,G,qDAAH,EAAAA,IAAG,OACZE,OAAO,kDACPC,SAAS,OACRC,aAAc,EAAAA,aACdG,UAAW,EAAAC,qB,4DAKxB,eAMW,GANDd,MAAM,QAAM,C,wBAClB,iBAIE,CAJF,eAIE,G,WAJkB,EAAAM,IAAG,G,qDAAH,EAAAA,IAAG,OACZE,OAAO,kDACPC,SAAS,OACRC,aAAc,EAAAA,c,gDAI9B,eAQW,GARDV,MAAM,QAAM,C,wBAClB,iBAME,CANF,eAME,G,WALe,EAAAM,IAAG,G,qDAAH,EAAAA,IAAG,OACZS,UAAA,GACAP,OAAO,kDACPC,SAAS,OACRC,aAAc,EAAAA,c,gDAI3B,eAoBW,GApBDV,MAAM,QAAM,C,wBAClB,iBAAc,CAAd,EACA,eASE,GAROgB,YAAY,EACZf,UAAU,EACVC,KAAM,EAAAC,WACNC,QAAS,EAAAC,c,WACD,EAAAC,IAAIC,Y,uDAAJ,EAAAD,IAAIC,YAAW,IACxBC,OAAO,iDACPC,SAAS,OACRC,aAAc,EAAAA,c,uDAEvB,EACA,eAME,GALOM,YAAY,E,WACJ,EAAAV,IAAG,G,uDAAH,EAAAA,IAAG,OACZE,OAAO,kDACPC,SAAS,OACRC,aAAc,EAAAA,c,gDAI3B,eA6BW,GA7BDV,MAAM,QAAM,C,wBAClB,iBAAc,CAAd,EACA,eASE,GARMiB,SAAA,GACChB,UAAU,EACVC,KAAM,EAAAC,WACNC,QAAS,EAAAC,c,WACD,EAAAC,IAAIC,Y,uDAAJ,EAAAD,IAAIC,YAAW,IACxBC,OAAO,iDACPC,SAAS,OACRC,aAAc,EAAAA,c,uDAEvB,EACA,eAME,GALMO,SAAA,G,WACS,EAAAX,IAAG,G,uDAAH,EAAAA,IAAG,OACZE,OAAO,kDACPC,SAAS,OACRC,aAAc,EAAAA,c,sCAEvB,EACA,eAOE,GANMK,UAAA,GACAE,SAAA,G,WACS,EAAAX,IAAG,G,uDAAH,EAAAA,IAAG,OACZE,OAAO,kDACPC,SAAS,OACRC,aAAc,EAAAA,c,gDAI3B,eA+BW,GA/BDV,MAAM,mCAAiC,C,wBAC7C,iBAAc,CAAd,EACA,eA4BY,GA3BHgB,YAAY,E,WACJ,EAAAE,aAAaZ,I,uDAAb,EAAAY,aAAaZ,IAAG,IACzBE,OAAO,kDACPC,SAAS,OACRC,aAAc,EAAAQ,aAAaR,aAC3BS,aAAc,EAAAD,aAAaC,aAC3BN,UAAW,EAAAK,aAAaL,W,CAGlBO,QAAO,gBACd,gBADiBC,EACjB,EADiBA,KAAKC,EACtB,EADsBA,MACtB,MAD2B,C,8BACzBA,EAAK,GAAI,IAAC,eAAED,EAAKE,MAAM,MAAG,eAAEF,EAAKG,KAAKtB,KAAKuB,cAAc,KAC/D,OACWC,OAAM,gBACb,iBAYc,CAZd,eAYc,QAPCC,OAAM,gBACb,iBAImB,CAJnB,eAImB,Q,wBAHf,iBAAgG,CAAhG,eAAgG,GAA5EC,MAAM,KAAM,QAAK,iCAAE,EAAAV,aAAaO,aAAY,OAASI,KAAK,mBAC9E,eAA8F,GAA1ED,MAAM,KAAM,QAAK,iCAAE,EAAAV,aAAaO,aAAY,OAASI,KAAK,iBAC9E,eAAuG,GAAnFD,MAAM,KAAM,QAAK,iCAAE,EAAAV,aAAaO,aAAY,OAASI,KAAK,8B,kCARtF,iBAGY,CAHZ,eAGY,GAHDC,MAAM,OAAK,C,wBAClB,iBAAoD,CAApD,eAAoD,YAA9C,QAAK,eAAE,EAAAZ,aAAaO,cAAY,QACtC,eAAoC,GAA3BI,KAAK,2B,mMAoBvB,GACXN,KAAM,SACNrB,KAFW,WAEJ,WACH,MAAO,CACHC,WAAY,CACR4B,MAAO,MACPC,QAAS,WAEb3B,cAAe,CACX4B,cAAe,oBAEnBvB,aAAc,SAACc,GACXU,QAAQC,IAAI,cAAeX,IAE/Bb,cAXG,SAWWa,GACVU,QAAQC,IAAIX,IAEhBlB,IAAK,CACD8B,EAAG,CACC,CAACC,GAAI,MAAOd,KAAM,YAClB,CAACc,GAAI,MAAOd,KAAM,YAClB,CAACc,GAAI,MAAOd,KAAM,eAEtBe,EAAG,CACC,CAACD,GAAI,MAAOd,KAAM,WAClB,CAACc,GAAI,MAAOd,KAAM,WAAYgB,OAAQ,WACtC,CAACF,GAAI,MAAOd,KAAM,WAAYgB,OAAQ,SACtC,CAACF,GAAI,MAAOd,KAAM,WAAYgB,OAAQ,SACtC,CAACF,GAAI,MAAOd,KAAM,WAAYgB,OAAQ,YAAaC,QAAS,IAC5D,CAACH,GAAI,MAAOd,KAAM,UAAWgB,OAAQ,YAI7CrB,aAAc,CACVZ,IAAK,GACLmB,aAAc,KACdf,aAAc,WACVwB,QAAQC,IAAI,eAEhBhB,aAAc,WAAF,8CAAE,WAAOsB,GAAP,iGACJC,QAAQC,IAAIF,EAAMG,KAAI,SAAApB,GAAG,OAAK,OAAOqB,OAAO,CAC9CrC,OAAQ,iDACRC,SAAU,OACVe,KAAMA,EAAKA,KACXtB,KAAMsB,EAAKA,KAAKtB,WALV,2CAAF,sDAAE,GAQdW,UAAW,SAACW,GAAS,IACVC,EAAgB,EAAKP,aAArBO,aACP,OAAKA,GAILD,EAAKtB,KAAO,CAACuB,iBACN,IAJH,EAAKqB,QAAQC,MAAM,cACZ,OAQ3BC,QAAS,CACLlC,oBADK,SACeU,GAAM,IACfD,EAAkBC,EAAlBD,KAAM0B,EAAYzB,EAAZyB,SACPxC,EAAWc,EAAK2B,MAAM,EAAG3B,EAAK4B,YAAY,MAChD,OAAI1C,EAAS2C,OAAS,GAClBC,KAAKP,QAAQQ,KAAb,aAAwB/B,EAAxB,qBAAiD,CAACgC,KAAM,OACjD,GAEPN,EAAW,IACXI,KAAKP,QAAQQ,KAAb,aAAwB/B,EAAxB,uBAAmD,CAACgC,KAAM,OACnD,QAFX,KCvPhB,EAAOC,OAASA,EAED","file":"js/chunk-2d22b9c0.3faf9bce.js","sourcesContent":["<template>\r\n    <div class=\"demo-upload\">\r\n        <demo-row title=\"单文件上传\">\r\n            <pl-upload\r\n                    :multiple=\"false\"\r\n                    :data=\"uploadData\"\r\n                    :headers=\"uploadHeaders\"\r\n                    v-model=\"val.singleValue\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFile\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n            />\r\n        </demo-row>\r\n\r\n        <demo-row title=\"多文件上传\">\r\n            <pl-upload\r\n                    v-model=\"val[0]\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFiles\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n            />\r\n        </demo-row>\r\n\r\n        <demo-row title=\"文件预览\">\r\n            <pl-upload\r\n                    v-model=\"val[0]\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFiles\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n                    :handlePreview=\"handlePreview\"\r\n            />\r\n        </demo-row>\r\n\r\n        <demo-row title=\"选择特定类型的文件\">\r\n            <h4>内置的accept：excel（另一个是image）</h4>\r\n            <pl-upload\r\n                    accept=\"excel\"\r\n                    v-model=\"val[0]\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFiles\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n            />\r\n            <h4>自定义accept，选择png文件</h4>\r\n            <pl-upload\r\n                    accept=\"image/png\"\r\n                    v-model=\"val[0]\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFiles\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n            />\r\n        </demo-row>\r\n\r\n        <demo-row title=\"选择文件的时候，校验文件\">\r\n            <h4>点击选择文件</h4>\r\n            <pl-upload\r\n                    v-model=\"val[0]\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFiles\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n                    :validator=\"chooseFileValidator\"\r\n            />\r\n            <h4>拖拽接收文件</h4>\r\n            <pl-upload\r\n                    draggable\r\n                    v-model=\"val[0]\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFiles\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n                    :validator=\"chooseFileValidator\"\r\n            />\r\n        </demo-row>\r\n\r\n\r\n        <demo-row title=\"文件状态\">\r\n            <pl-upload v-model=\"val[1]\"\r\n                       action=\"http://193.112.75.134/server/upload/uploadFiles\"\r\n                       filename=\"file\"\r\n                       :handleRemove=\"handleRemove\"\r\n            />\r\n        </demo-row>\r\n\r\n        <demo-row title=\"拖拽上传\">\r\n            <pl-upload\r\n                    v-model=\"val[0]\"\r\n                    draggable\r\n                    action=\"http://193.112.75.134/server/upload/uploadFiles\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n            />\r\n        </demo-row>\r\n\r\n        <demo-row title=\"手动上传\">\r\n            <h4>单文件上传</h4>\r\n            <pl-upload\r\n                    :autoUpload=\"false\"\r\n                    :multiple=\"false\"\r\n                    :data=\"uploadData\"\r\n                    :headers=\"uploadHeaders\"\r\n                    v-model=\"val.singleValue\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFile\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n            />\r\n            <h4>多文件上传</h4>\r\n            <pl-upload\r\n                    :autoUpload=\"false\"\r\n                    v-model=\"val[0]\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFiles\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n            />\r\n        </demo-row>\r\n\r\n        <demo-row title=\"禁用上传\">\r\n            <h4>单文件上传</h4>\r\n            <pl-upload\r\n                    disabled\r\n                    :multiple=\"false\"\r\n                    :data=\"uploadData\"\r\n                    :headers=\"uploadHeaders\"\r\n                    v-model=\"val.singleValue\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFile\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n            />\r\n            <h4>多文件上传</h4>\r\n            <pl-upload\r\n                    disabled\r\n                    v-model=\"val[0]\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFiles\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n            />\r\n            <h4>多文件上传</h4>\r\n            <pl-upload\r\n                    draggable\r\n                    disabled\r\n                    v-model=\"val[0]\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFiles\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"handleRemove\"\r\n            />\r\n        </demo-row>\r\n\r\n        <demo-row title=\"自定义上传：将多个文件分开上传，并且每一个文件需要选择一个类型\">\r\n            <h4>多文件上传</h4>\r\n            <pl-upload\r\n                    :autoUpload=\"false\"\r\n                    v-model=\"customUpload.val\"\r\n                    action=\"http://193.112.75.134/server/upload/uploadFiles\"\r\n                    filename=\"file\"\r\n                    :handleRemove=\"customUpload.handleRemove\"\r\n                    :handleUpload=\"customUpload.handleUpload\"\r\n                    :validator=\"customUpload.validator\"\r\n\r\n            >\r\n                <template #default=\"{item,index}\">\r\n                    {{index+1}}、{{item.name}}--[{{item.file.data.businessType}}]\r\n                </template>\r\n                <template #button>\r\n                    <pl-dropdown>\r\n                        <pl-button width=\"188\">\r\n                            <span>业务类型：{{customUpload.businessType||'无'}}</span>\r\n                            <pl-icon icon=\"el-icon-arrow-down\"/>\r\n                        </pl-button>\r\n                        <template #popper>\r\n                            <pl-dropdown-menu>\r\n                                <pl-dropdown-option label=\"搜索\" @click=\"customUpload.businessType = '搜索'\" icon=\"el-icon-search\"/>\r\n                                <pl-dropdown-option label=\"排序\" @click=\"customUpload.businessType = '排序'\" icon=\"el-icon-sort\"/>\r\n                                <pl-dropdown-option label=\"删除\" @click=\"customUpload.businessType = '删除'\" icon=\"el-icon-folder-delete\"/>\r\n                            </pl-dropdown-menu>\r\n                        </template>\r\n                    </pl-dropdown>\r\n                </template>\r\n            </pl-upload>\r\n        </demo-row>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {$$file} from \"../../../src/packages/file-service/file-service\";\r\n\r\n    export default {\r\n        name: \"upload\",\r\n        data() {\r\n            return {\r\n                uploadData: {\r\n                    level: '123',\r\n                    orgCode: '001-123',\r\n                },\r\n                uploadHeaders: {\r\n                    Authorization: '2781368215742187',\r\n                },\r\n                handleRemove: (file) => {\r\n                    console.log('remove file', file)\r\n                },\r\n                handlePreview(file) {\r\n                    console.log(file)\r\n                },\r\n                val: {\r\n                    0: [\r\n                        {id: '001', name: 'logo.jpg',},\r\n                        {id: '002', name: 'home.jpg',},\r\n                        {id: '003', name: 'sketch.png',},\r\n                    ],\r\n                    1: [\r\n                        {id: '000', name: '已完成.jpg',},\r\n                        {id: '001', name: '上传成功.jpg', status: 'success'},\r\n                        {id: '002', name: '准备就绪.jpg', status: 'ready'},\r\n                        {id: '003', name: '上传失败.jpg', status: 'error'},\r\n                        {id: '004', name: '正在上传.jpg', status: 'uploading', percent: 78},\r\n                        {id: '005', name: '已删除.jpg', status: 'remove'},\r\n                    ],\r\n                },\r\n\r\n                customUpload: {\r\n                    val: [],\r\n                    businessType: null,\r\n                    handleRemove: () => {\r\n                        console.log('调用接口删除后端文件')\r\n                    },\r\n                    handleUpload: async (files) => {\r\n                        await Promise.all(files.map(file => $$file.upload({\r\n                            action: 'http://193.112.75.134/server/upload/uploadFile',\r\n                            filename: 'file',\r\n                            file: file.file,\r\n                            data: file.file.data,\r\n                        })))\r\n                    },\r\n                    validator: (file) => {\r\n                        const {businessType} = this.customUpload\r\n                        if (!businessType) {\r\n                            this.$notice.error('请先选择业务类型！')\r\n                            return false\r\n                        }\r\n                        file.data = {businessType}\r\n                        return true\r\n                    },\r\n                },\r\n            }\r\n        },\r\n        methods: {\r\n            chooseFileValidator(file) {\r\n                const {name, calcSize} = file\r\n                const filename = name.slice(0, name.lastIndexOf('.'))\r\n                if (filename.length > 3) {\r\n                    this.$notice.warn(`文件【${name}】校验不通过，文件名最大三个字符。`, {time: 5000})\r\n                    return false\r\n                }\r\n                if (calcSize > 0.1) {\r\n                    this.$notice.warn(`文件【${name}】校验不通过，文件大小超出 0.1 M`, {time: 5000})\r\n                    return false\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n</style>","import { render } from \"./upload.vue?vue&type=template&id=3aa7840e\"\nimport script from \"./upload.vue?vue&type=script&lang=js\"\nexport * from \"./upload.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}