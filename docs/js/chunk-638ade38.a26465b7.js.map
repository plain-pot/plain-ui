{"version":3,"sources":["webpack:///./story/pages/table/table-columns.vue","webpack:///./story/pages/table/table-columns.vue?8e21"],"names":["class","logSelected","label","clearSelected","addSelected","removeSelected","virtualFlag","disabled","editNodes","length","saveEdit","cancelEdit","data","virtual","onDblClickRow","keyField","ref","field","title","required","name","methods","tableNode","e","console","log","edit","enableEdit","this","push","Promise","all","map","node","validate","validates","filter","Boolean","validateMessage","index","$message","error","forEach","closeEdit","selected","$refs","check","getSelected","item","join","render"],"mappings":"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","file":"js/chunk-638ade38.a26465b7.js","sourcesContent":["<template>\r\n    <div class=\"table-columns\">\r\n        <pl-form>\r\n            <pl-button-group>\r\n                <pl-button @click=\"logSelected\" label=\"获取选中行\"/>\r\n                <pl-button @click=\"clearSelected\" label=\"清除选中行\"/>\r\n                <pl-button @click=\"addSelected\" label=\"设置选中第二第三行\"/>\r\n                <pl-button @click=\"removeSelected\" label=\"取消选中第二第三行\"/>\r\n            </pl-button-group>\r\n\r\n            <pl-form-item label=\"是否开启虚拟滚动\">\r\n                <pl-toggle v-model=\"virtualFlag\"/>\r\n            </pl-form-item>\r\n            <pl-form-item>\r\n                <pl-button-group :disabled=\"editNodes.length === 0\">\r\n                    <pl-button @click=\"saveEdit\">保存编辑</pl-button>\r\n                    <pl-button @click=\"cancelEdit\">取消编辑</pl-button>\r\n                </pl-button-group>\r\n            </pl-form-item>\r\n        </pl-form>\r\n        <pl-table\r\n                :data=\"data\"\r\n                :virtual=\"virtualFlag\"\r\n                @dblclick-cell=\"onDblClickRow\"\r\n                keyField=\"id\">\r\n            <plc-index/>\r\n            <plc-check ref=\"check\"/>\r\n            <plc field=\"id\" title=\"编号\"/>\r\n            <plc field=\"name\" title=\"普通文本列\"/>\r\n            <plc-input field=\"name\" title=\"文本框\" required/>\r\n            <plc-number field=\"size\" title=\"数字框\"/>\r\n            <plc-date field=\"date\" title=\"日期\" required/>\r\n            <plc-color-picker field=\"color\" title=\"颜色\"/>\r\n            <plc-rate field=\"star\" title=\"评分\"/>\r\n            <plc-toggle field=\"flag\" title=\"开关\"/>\r\n        </pl-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import data from \"../data/data-1.json\";\r\n\r\n    export default {\r\n        name: \"table-columns\",\r\n        data() {\r\n            return {\r\n                data,\r\n                editNodes: [],\r\n                virtualFlag: false,\r\n            }\r\n        },\r\n        methods: {\r\n            onDblClickRow(tableNode, e) {\r\n                console.log('tableNode', tableNode)\r\n                /*if (!this.$plain.utils.hasClass(e.target, 'plt-body-cell')) {\r\n                    return\r\n                }*/\r\n\r\n                if (!tableNode.edit) {\r\n                    tableNode.enableEdit()\r\n                    this.editNodes.push(tableNode)\r\n                }\r\n            },\r\n            async saveEdit() {\r\n                const validates = (await Promise.all(this.editNodes.map(node => node.validate()))).filter(Boolean)\r\n                if (validates.length > 0) {\r\n                    console.log(validates)\r\n                    const {validateMessage, node: {index}} = validates[0]\r\n                    this.$message.error(`第${index + 1}条记录校验不通过，${validateMessage}`)\r\n                    return\r\n                }\r\n                // todo 网络保存逻辑\r\n                this.editNodes.forEach(tableNode => tableNode.saveEdit())\r\n                this.editNodes.forEach(tableNode => tableNode.closeEdit())\r\n                this.editNodes = []\r\n            },\r\n            cancelEdit() {\r\n                this.editNodes.forEach(tableNode => {\r\n                    tableNode.cancelEdit()\r\n                })\r\n                this.editNodes = []\r\n            },\r\n\r\n            async logSelected() {\r\n                const selected = this.$refs.check.getSelected()\r\n                console.log(selected)\r\n                this.$message(selected.map(item => item.data.name).join(','))\r\n            },\r\n            async clearSelected() {\r\n                this.$refs.check.clearSelected()\r\n            },\r\n            async addSelected() {\r\n                this.$refs.check.addSelected([1, 2])\r\n            },\r\n            async removeSelected() {\r\n                this.$refs.check.removeSelected([1, 2])\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n</style>","import { render } from \"./table-columns.vue?vue&type=template&id=546696cd\"\nimport script from \"./table-columns.vue?vue&type=script&lang=js\"\nexport * from \"./table-columns.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}