{"version":3,"sources":["webpack://CustomApplicationmain-application/./story/pages/form/form-validate.vue","webpack://CustomApplicationmain-application/./story/pages/form/form-validate.vue?4243"],"names":["class","title","ref","form1","formData","labelWidth","contentWidth","rules","formRules","associateFields","disabled","label","field","required","field1","field20","field21","suffix","icon","field2","inputProps","field3","field4","field5","itemWidth","val","dynamicRequired","field5_1","field6","levelData","item","levelName","code","key","field7","field8","customValidator","field9","field10","saveValidate","mode","$refs","form","clearValidate","vertical","asyncHandler","asyncSaveValidate","autoLoading","customHandleError","name","props","data","trigger","min","max","methods","validate","autoAlert","$message","success","$notice","error","message","rule","value","row","console","log","delay","Math","random","this","length","render"],"mappings":"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","file":"js/chunk-2d0ccc03.d26cd603.js","sourcesContent":["<template>\r\n    <div class=\"form-validate\">\r\n        <demo-row title=\"基本用法\">\r\n            <pl-form ref=\"form\"\r\n                     v-model=\"form1.formData\"\r\n                     labelWidth=\"150px\"\r\n                     contentWidth=\"400px\"\r\n\r\n                     :rules=\"form1.formRules\"\r\n                     :associateFields=\"form1.associateFields\"\r\n                     :disabled=\"disabled\"\r\n            >\r\n                <pl-form-item label=\"必填校验\" field=\"field1\" required>\r\n                    <pl-input v-model=\"form1.formData.field1\"/>\r\n                </pl-form-item>\r\n\r\n                <pl-form-item label=\"多字段校验\" :field=\"['field20','field21']\" required :rules=\"[\r\n                        {field:'field20',min:3,message:'第一个输入框最少3个字符'},\r\n                        {field:'field21',min:5,message:'第二个输入框最少5个字符'},\r\n                    ]\">\r\n                    <pl-input v-model=\"form1.formData.field20\"/>\r\n                    &nbsp;至&nbsp;\r\n                    <pl-input v-model=\"form1.formData.field21\"/>\r\n                </pl-form-item>\r\n\r\n                <pl-form-item label=\"必填校验(失去焦点)\" field=\"field2\">\r\n                    <pl-number v-model=\"form1.formData.field2\" :inputProps=\"{block:true}\"/>\r\n                    <template #suffix>\r\n                        <pl-icon icon=\"el-icon-question\" v-tooltip=\"'提示'\"/>\r\n                    </template>\r\n                </pl-form-item>\r\n\r\n                <pl-form-item label=\"字符长度校验 3-5\" field=\"field3\">\r\n                    <pl-input v-model=\"form1.formData.field3\"/>\r\n                </pl-form-item>\r\n\r\n                <pl-form-item label=\"form-item 设置校验规则\" field=\"field4\" :rules=\"{required:true,trigger:'blur'}\">\r\n                    <pl-input v-model=\"form1.formData.field4\"/>\r\n                </pl-form-item>\r\n\r\n                <pl-form-item label=\"数组，1-2个选项\" field=\"field5\" :rules=\"{type:'array', min:1,max:2}\" required>\r\n                    <pl-checkbox-group v-model=\"form1.formData.field5\" itemWidth=\"50%\">\r\n                        <pl-checkbox label=\"大客户\" val=\"large\"/>\r\n                        <pl-checkbox label=\"潜在客户\" val=\"potential\"/>\r\n                        <pl-checkbox label=\"长久客户\" val=\"long\"/>\r\n                        <pl-checkbox label=\"赢单客户\" val=\"order\"/>\r\n                    </pl-checkbox-group>\r\n                </pl-form-item>\r\n\r\n                <pl-form-item label=\"当复选框选项少于2个必填\" field=\"field5_1\" :rules=\"{validator:dynamicRequired}\">\r\n                    <pl-input v-model=\"form1.formData.field5_1\"/>\r\n                </pl-form-item>\r\n\r\n                <pl-form-item label=\"选项校验：确定值\" field=\"field6\" :rules=\"{required:true,message:'只能选择二级', options:'2'}\">\r\n                    <pl-select v-model=\"form1.formData.field6\">\r\n                        <pl-select-option v-for=\"item in levelData\" :label=\"item.levelName\" :val=\"item.code\" :key=\"item.code\"/>\r\n                    </pl-select>\r\n                </pl-form-item>\r\n                <pl-form-item label=\"选项校验：数组\" field=\"field7\" :rules=\"{required:true,message:'只能选择二级，三级', options:['2','3']}\">\r\n                    <pl-select v-model=\"form1.formData.field7\">\r\n                        <pl-select-option v-for=\"item in levelData\" :label=\"item.levelName\" :val=\"item.code\" :key=\"item.code\"/>\r\n                    </pl-select>\r\n                </pl-form-item>\r\n                <pl-form-item label=\"父属性\">\r\n                    <pl-select v-model=\"form1.formData.field8\">\r\n                        <pl-select-option v-for=\"item in levelData\" :label=\"item.levelName\" :val=\"item.code\" :key=\"item.code\"/>\r\n                    </pl-select>\r\n                </pl-form-item>\r\n                <pl-form-item label=\"自定义(异步2s)校验\" field=\"field9\" :rules=\"{validator:customValidator}\">\r\n                    <pl-radio-group v-model=\"form1.formData.field9\" itemWidth=\"33%\">\r\n                        <pl-radio label=\"是\" val=\"Y\"/>\r\n                        <pl-radio label=\"否\" val=\"N\"/>\r\n                        <pl-radio label=\"未知\" val=\"NO\"/>\r\n                    </pl-radio-group>\r\n                </pl-form-item>\r\n                <pl-form-item label=\"开启智能加速\" field=\"field10\" :rules=\"{message:'当前无法开启智能加速',options:false,trigger:'blur'}\">\r\n                    <pl-toggle v-model=\"form1.formData.field10\"/>\r\n                </pl-form-item>\r\n\r\n                <pl-form-item>\r\n                    <pl-button-group>\r\n                        <pl-button label=\"校验\" @click=\"saveValidate\"/>\r\n                        <pl-button label=\"取消校验\" mode=\"stroke\" @click=\"$refs.form.clearValidate()\"/>\r\n                    </pl-button-group>\r\n                </pl-form-item>\r\n                <pl-form-item>\r\n                    <pl-button-group vertical>\r\n                        <pl-button label=\"校验，不开启遮罩，自动loading按钮\" :asyncHandler=\"asyncSaveValidate\" autoLoading/>\r\n                        <pl-button label=\"校验，自定义处理错误信息\" @click=\"customHandleError\"/>\r\n                    </pl-button-group>\r\n                </pl-form-item>\r\n\r\n                <pl-form-item>\r\n                    <pl-button :label=\"disabled?'启用':'禁用'\" @click=\"disabled=!disabled\" :disabled=\"false\"/>\r\n                </pl-form-item>\r\n            </pl-form>\r\n        </demo-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {delay} from \"plain-utils/utils/delay\";\r\n\r\n    export default {\r\n        name: \"form-validate\",\r\n        props: {},\r\n        data() {\r\n            return {\r\n                form1: {\r\n                    formData: {},\r\n\r\n                    // 每一个field的规则可以是一个规则对象，也可以是规则对象数组\r\n                    formRules: {\r\n                        field2: {required: true, trigger: 'blur'},\r\n                        field3: {required: true, min: 3, max: 5, trigger: 'change'},\r\n                    },\r\n                    associateFields: {\r\n                        field5: ['field5_1'],\r\n                        field20: 'field21',\r\n                        field21: 'field20',\r\n                    }\r\n                },\r\n\r\n                levelData: [\r\n                    {levelName: '一级', code: '1'},\r\n                    {levelName: '二级', code: '2'},\r\n                    {levelName: '三级', code: '3'},\r\n                ],\r\n                disabled: false,\r\n            }\r\n        },\r\n        methods: {\r\n            async customHandleError() {\r\n                try {\r\n                    await this.$refs.form.validate({autoAlert: false})\r\n                    this.$message.success('校验通过')\r\n                } catch (e) {\r\n                    // this.$refs.form.methods.showError(e)\r\n                    this.$notice.error(e.message)\r\n                }\r\n            },\r\n            async saveValidate() {\r\n                await this.$refs.form.validate()\r\n                this.$message.success('校验通过')\r\n            },\r\n            async asyncSaveValidate() {\r\n                try {\r\n                    await this.$refs.form.validate({autoLoading: false})\r\n                    this.$message.success('校验通过')\r\n                } catch (e) {\r\n                    this.$message.error('请检查填写是否正确')\r\n                }\r\n            },\r\n            async customValidator(rule, value, row) {\r\n                console.log({\r\n                    rule, value, row\r\n                })\r\n                await delay(Math.random() * 500 + 500)\r\n                if (!row.field8) {\r\n                    return '请先选择[父属性]'\r\n                }\r\n                if (row.field8 === '1' && row.field9 !== 'N') {\r\n                    return '[父属性]为一级的时候只能选择否'\r\n                }\r\n                return null\r\n            },\r\n\r\n            dynamicRequired() {\r\n                if (!this.form1.formData.field5 || this.form1.formData.field5.length < 2) {\r\n                    if (!this.form1.formData.field5_1) {\r\n                        return '当复选框选项少于5个时，field5_1必填'\r\n                    }\r\n                }\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>","import { render } from \"./form-validate.vue?vue&type=template&id=2b7592f5\"\nimport script from \"./form-validate.vue?vue&type=script&lang=js\"\nexport * from \"./form-validate.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}