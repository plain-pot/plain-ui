{"version":3,"sources":["webpack://CustomApplicationmain-application/./src/utils/PlainDate.ts","webpack://CustomApplicationmain-application/./src/packages/time/servce/time-service.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/refershPopperReference.tsx","webpack://CustomApplicationmain-application/./src/packages/button/index.ts","webpack://CustomApplicationmain-application/./src/packages/cascade/service/cascade-service.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/sub/color-hue-slider.tsx","webpack://CustomApplicationmain-application/./src/use/useStyle.ts","webpack://CustomApplicationmain-application/./src/use/useEdit.ts","webpack://CustomApplicationmain-application/./src/utils/createEventListener.ts","webpack://CustomApplicationmain-application/./src/utils/nextIndex.ts","webpack://CustomApplicationmain-application/./src/use/useModel.ts","webpack://CustomApplicationmain-application/./src/packages/notice-service/notice.tsx","webpack://CustomApplicationmain-application/./src/packages/notice-service/notice-container.tsx","webpack://CustomApplicationmain-application/./src/packages/notice-service/index.ts","webpack://CustomApplicationmain-application/./src/packages/notice-service/notice-manager.tsx","webpack://CustomApplicationmain-application/./src/utils/createFlagManager.ts","webpack://CustomApplicationmain-application/./src/packages/cascade/utils/CascadMark.ts","webpack://CustomApplicationmain-application/./src/packages/file-service/file-service.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/edit/createPopperServiceComponent.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/edit/createAgentGetter.tsx","webpack://CustomApplicationmain-application/./src/utils/installPlugin.ts","webpack://CustomApplicationmain-application/./src/packages/button/button.tsx","webpack://CustomApplicationmain-application/./src/packages/icon/index.ts","webpack://CustomApplicationmain-application/./src/utils/createKeyHandler.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/utils/Color.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/color-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/icon/icon.tsx","webpack://CustomApplicationmain-application/./src/packages/button-group/button-group.tsx","webpack://CustomApplicationmain-application/./src/utils/getServiceWithoutContext.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/sub/opacity.png","webpack://CustomApplicationmain-application/./src/use/useRefs.ts","webpack://CustomApplicationmain-application/./src/packages/list/index.ts","webpack://CustomApplicationmain-application/./src/use/useFunctionWrapper.ts","webpack://CustomApplicationmain-application/./src/utils/getSlotExists.ts","webpack://CustomApplicationmain-application/./src/packages/root/createDefaultManager.tsx","webpack://CustomApplicationmain-application/./src/plugins/Event.ts","webpack://CustomApplicationmain-application/./src/use/useEvent.ts","webpack://CustomApplicationmain-application/./src/utils/renderNothing.ts","webpack://CustomApplicationmain-application/./src/use/designComponent.ts","webpack://CustomApplicationmain-application/./src/packages/item/index.ts","webpack://CustomApplicationmain-application/./src/packages/root/root.tsx","webpack://CustomApplicationmain-application/./src/packages/root/index.ts","webpack://CustomApplicationmain-application/./src/utils/constant.ts","webpack://CustomApplicationmain-application/./src/use/useSlots.ts","webpack://CustomApplicationmain-application/./src/packages/keyboard/index.ts","webpack://CustomApplicationmain-application/./src/utils/createComponentPlugin.ts","webpack://CustomApplicationmain-application/./src/packages/root/createDefaultService.tsx","webpack://CustomApplicationmain-application/./src/packages/cascade/utils/CascadeNode.ts","webpack://CustomApplicationmain-application/./src/utils/createCounter.ts","webpack://CustomApplicationmain-application/./src/packages/cascade/panel/cascade-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/loading/index.ts","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-panel.utils.ts","webpack://CustomApplicationmain-application/./src/use/useCollect.ts","webpack://CustomApplicationmain-application/./src/packages/popper/index.ts","webpack://CustomApplicationmain-application/./src/packages/input/input.tsx","webpack://CustomApplicationmain-application/./src/utils/createError.ts","webpack://CustomApplicationmain-application/./src/use/useRefList.ts","webpack://CustomApplicationmain-application/./src/packages/loading/loading.tsx","webpack://CustomApplicationmain-application/./src/utils/getElement.ts","webpack://CustomApplicationmain-application/./src/packages/popper/trigger/BaseTrigger.ts","webpack://CustomApplicationmain-application/./src/packages/popper/trigger/PopperTrigger.ts","webpack://CustomApplicationmain-application/./src/packages/popper/popper.tsx","webpack://CustomApplicationmain-application/./src/utils/defer.ts","webpack://CustomApplicationmain-application/./src/use/useProps.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/sub/color-sv-panel.tsx","webpack://CustomApplicationmain-application/./src/plugins/ResizeDetector.ts","webpack://CustomApplicationmain-application/./src/packages/scroll/vertical-scrollbar.tsx","webpack://CustomApplicationmain-application/./src/packages/scroll/horizontal-scrollbar.tsx","webpack://CustomApplicationmain-application/./src/packages/scroll/scroll.tsx","webpack://CustomApplicationmain-application/./src/packages/message/message.tsx","webpack://CustomApplicationmain-application/./src/packages/message/message-container.tsx","webpack://CustomApplicationmain-application/./src/packages/message/index.ts","webpack://CustomApplicationmain-application/./src/packages/message/message-manager.tsx","webpack://CustomApplicationmain-application/./src/use/useStyles.ts","webpack://CustomApplicationmain-application/./src/utils/toArray.ts","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-range-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/nav/nav-page.tsx","webpack://CustomApplicationmain-application/./src/packages/nav/nav-stack.tsx","webpack://CustomApplicationmain-application/./src/packages/input/index.ts","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-base-column.tsx","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-base-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/root/registryRootService.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/utils/ColorUtils.ts","webpack://CustomApplicationmain-application/./src/use/useMounted.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/service/color-picker.service.tsx","webpack://CustomApplicationmain-application/./src/packages/list/list.tsx","webpack://CustomApplicationmain-application/./src/packages/icon/icons lazy ^\\.\\/.*\\.json$ namespace object","webpack://CustomApplicationmain-application/./src/packages/color-picker/sub/color-alpha-slider.tsx","webpack://CustomApplicationmain-application/./src/packages/item/item.tsx","webpack://CustomApplicationmain-application/./src/packages/click-wave/click-wave-directive.tsx","webpack://CustomApplicationmain-application/./src/use/useScopedSlots.ts","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/nav/nav.tsx","webpack://CustomApplicationmain-application/./src/use/useClasses.ts","webpack://CustomApplicationmain-application/./src/packages/button-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/input/input-inner-tags.tsx","webpack://CustomApplicationmain-application/./src/packages/input-inner-tags/index.ts","webpack://CustomApplicationmain-application/./src/packages/loading-mask/loading-mask.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-mask/index.tsx","webpack://CustomApplicationmain-application/./src/packages/checkbox-group/checkbox-group.tsx","webpack://CustomApplicationmain-application/./src/packages/checkbox-inner/checkbox-inner.tsx","webpack://CustomApplicationmain-application/./src/packages/checkbox/checkbox.tsx","webpack://CustomApplicationmain-application/./src/packages/grid/row.tsx","webpack://CustomApplicationmain-application/./src/packages/checkbox/index.ts","webpack://CustomApplicationmain-application/./src/packages/checkbox-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/checkbox-inner/index.ts","webpack://CustomApplicationmain-application/./src/packages/grid/index.ts","webpack://CustomApplicationmain-application/./src/packages/row/index.ts","webpack://CustomApplicationmain-application/./src/packages/grid/col.tsx","webpack://CustomApplicationmain-application/./src/packages/col/index.ts","webpack://CustomApplicationmain-application/./src/packages/radio-group/radio-group.tsx","webpack://CustomApplicationmain-application/./src/packages/radio-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/radio-inner/radio-inner.tsx","webpack://CustomApplicationmain-application/./src/packages/radio/radio.tsx","webpack://CustomApplicationmain-application/./src/packages/radio/index.ts","webpack://CustomApplicationmain-application/./src/packages/radio-inner/index.ts","webpack://CustomApplicationmain-application/./src/packages/dialog/dialog.tsx","webpack://CustomApplicationmain-application/./src/packages/dialog-service/index.ts","webpack://CustomApplicationmain-application/./src/packages/dialog/index.ts","webpack://CustomApplicationmain-application/./src/packages/dialog-service/dialog-service.tsx","webpack://CustomApplicationmain-application/./src/packages/scroll/index.ts","webpack://CustomApplicationmain-application/./src/utils/newInstance.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-service/mask/loading-mask-directive.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-service/bar/index.ts","webpack://CustomApplicationmain-application/./src/packages/loading-service/mask/loading-mask-service.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-service/mask/index.ts","webpack://CustomApplicationmain-application/./src/packages/loading-service/bar/loading-bar-service.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-service/index.ts","webpack://CustomApplicationmain-application/./src/packages/number/number.tsx","webpack://CustomApplicationmain-application/./src/packages/number/index.ts","webpack://CustomApplicationmain-application/./src/packages/toggle/toggle.tsx","webpack://CustomApplicationmain-application/./src/packages/toggle/index.ts","webpack://CustomApplicationmain-application/./src/packages/slider/slider.tsx","webpack://CustomApplicationmain-application/./src/packages/slider/index.ts","webpack://CustomApplicationmain-application/./src/packages/tag/tag.tsx","webpack://CustomApplicationmain-application/./src/packages/tag/index.ts","webpack://CustomApplicationmain-application/./src/packages/tag-input/tag-input.tsx","webpack://CustomApplicationmain-application/./src/packages/tag-input/index.ts","webpack://CustomApplicationmain-application/./src/packages/rate/rate.tsx","webpack://CustomApplicationmain-application/./src/packages/rate/index.ts","webpack://CustomApplicationmain-application/./src/packages/virtual-list/useVirtualList.tsx","webpack://CustomApplicationmain-application/./src/packages/virtual-list/virtual-list.tsx","webpack://CustomApplicationmain-application/./src/packages/virtual-list/index.ts","webpack://CustomApplicationmain-application/./src/packages/progress/progress.utils.ts","webpack://CustomApplicationmain-application/./src/packages/progress/progress-bar.tsx","webpack://CustomApplicationmain-application/./src/packages/progress/index.ts","webpack://CustomApplicationmain-application/./src/packages/progress-bar/index.ts","webpack://CustomApplicationmain-application/./src/utils/createAnimate.ts","webpack://CustomApplicationmain-application/./src/packages/progress/progress-circle.tsx","webpack://CustomApplicationmain-application/./src/packages/progress-circle/index.tsx","webpack://CustomApplicationmain-application/./src/packages/progress/progress-mini.tsx","webpack://CustomApplicationmain-application/./src/packages/progress-mini/index.ts","webpack://CustomApplicationmain-application/./src/use/useNumber.ts","webpack://CustomApplicationmain-application/./src/packages/select/select-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/select/select-group.tsx","webpack://CustomApplicationmain-application/./src/packages/select/select-option.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/edit/useEditPopperAgent.tsx","webpack://CustomApplicationmain-application/./src/packages/select/select-service.tsx","webpack://CustomApplicationmain-application/./src/packages/select/select.tsx","webpack://CustomApplicationmain-application/./src/packages/pagination/pagination.tsx","webpack://CustomApplicationmain-application/./src/packages/step/step.utils.ts","webpack://CustomApplicationmain-application/./src/packages/pagination/index.ts","webpack://CustomApplicationmain-application/./src/packages/badge/badge.tsx","webpack://CustomApplicationmain-application/./src/packages/badge/index.ts","webpack://CustomApplicationmain-application/./src/packages/step/step/step-group.tsx","webpack://CustomApplicationmain-application/./src/packages/step/step/step.tsx","webpack://CustomApplicationmain-application/./src/packages/step/index.ts","webpack://CustomApplicationmain-application/./src/packages/step-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/step/arrow-step/arrow-step-group.tsx","webpack://CustomApplicationmain-application/./src/packages/triangle/triangle.tsx","webpack://CustomApplicationmain-application/./src/packages/step/arrow-step/arrow-step.tsx","webpack://CustomApplicationmain-application/./src/packages/arrow-step/index.ts","webpack://CustomApplicationmain-application/./src/packages/arrow-step-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/dropdown/dropdown.tsx","webpack://CustomApplicationmain-application/./src/packages/dropdown/index.ts","webpack://CustomApplicationmain-application/./src/packages/dropdown/dropdown-group.tsx","webpack://CustomApplicationmain-application/./src/packages/dropdown-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/dropdown/dropdown-menu.tsx","webpack://CustomApplicationmain-application/./src/packages/dropdown-menu/index.ts","webpack://CustomApplicationmain-application/./src/packages/dropdown/dropdown-option.tsx","webpack://CustomApplicationmain-application/./src/packages/dropdown-option/index.ts","webpack://CustomApplicationmain-application/./src/packages/tooltip/tooltip.tsx","webpack://CustomApplicationmain-application/./src/packages/tooltip/tooltip-directive.tsx","webpack://CustomApplicationmain-application/./src/packages/tooltip/index.ts","webpack://CustomApplicationmain-application/./src/packages/collapse/collapse-transition.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/color-picker.tsx","webpack://CustomApplicationmain-application/./src/packages/alert/alert.tsx","webpack://CustomApplicationmain-application/./src/packages/alert/index.ts","webpack://CustomApplicationmain-application/./src/packages/collapse/collapse-group.tsx","webpack://CustomApplicationmain-application/./src/packages/collapse/collapse.tsx","webpack://CustomApplicationmain-application/./src/packages/collapse/index.ts","webpack://CustomApplicationmain-application/./src/packages/collapse-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/collapse-transition/index.ts","webpack://CustomApplicationmain-application/./src/packages/card/card.tsx","webpack://CustomApplicationmain-application/./src/packages/card/index.ts","webpack://CustomApplicationmain-application/./src/packages/carousel/carousel-item.tsx","webpack://CustomApplicationmain-application/./src/packages/carousel/carousel.tsx","webpack://CustomApplicationmain-application/./src/packages/carousel/index.ts","webpack://CustomApplicationmain-application/./src/packages/carousel-item/index.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/color-button.tsx","webpack://CustomApplicationmain-application/./src/packages/tree/utils/tree-constant.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/index.ts","webpack://CustomApplicationmain-application/./src/packages/color-button/index.ts","webpack://CustomApplicationmain-application/./src/packages/cascade/cascade.tsx","webpack://CustomApplicationmain-application/./src/packages/cascade/index.ts","webpack://CustomApplicationmain-application/./src/packages/tree/core/useTreeNode.ts","webpack://CustomApplicationmain-application/./src/packages/tree/core/useTree.ts","webpack://CustomApplicationmain-application/./src/packages/tree/utils/props.ts","webpack://CustomApplicationmain-application/./src/packages/tree/utils/tree.utils.ts","webpack://CustomApplicationmain-application/./src/use/useAutoScroll.ts","webpack://CustomApplicationmain-application/./src/utils/getRowEl.ts","webpack://CustomApplicationmain-application/./src/utils/getScrollParent.ts","webpack://CustomApplicationmain-application/./src/packages/tree/core/useTreeDraggier.ts","webpack://CustomApplicationmain-application/./src/packages/tree/tree.tsx","webpack://CustomApplicationmain-application/./src/packages/tree/index.ts","webpack://CustomApplicationmain-application/./src/packages/select/index.ts","webpack://CustomApplicationmain-application/./src/packages/select-option/index.ts","webpack://CustomApplicationmain-application/./src/packages/select-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/date-time-input/date-time-input.tsx","webpack://CustomApplicationmain-application/./src/packages/date-time-input/index.ts","webpack://CustomApplicationmain-application/./src/packages/date-time-input/useDateTime.ts","webpack://CustomApplicationmain-application/./src/packages/time/time.tsx","webpack://CustomApplicationmain-application/./src/packages/date/date.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/time/index.ts","webpack://CustomApplicationmain-application/./src/utils/prefix.ts","webpack://CustomApplicationmain-application/./src/packages/date/plainDate.ts","webpack://CustomApplicationmain-application/./src/packages/date/useDate.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-year.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-month.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-date.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-range.tsx","webpack://CustomApplicationmain-application/./src/packages/date/useDateWeek.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-week.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-quarter.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/date/date.service.tsx","webpack://CustomApplicationmain-application/./src/packages/date/date.tsx","webpack://CustomApplicationmain-application/./src/packages/form/form.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/form/form.validate.tsx","webpack://CustomApplicationmain-application/./src/packages/date/index.ts","webpack://CustomApplicationmain-application/./src/packages/form/form-item.tsx","webpack://CustomApplicationmain-application/./src/packages/form/form.tsx","webpack://CustomApplicationmain-application/./src/packages/form/index.ts","webpack://CustomApplicationmain-application/./src/packages/form-item/index.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/plc-collector.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/renderColgroup.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/head/useHeadCellResize.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/render.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/head/useColDraggier.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/head/head-cell.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/table.utils.ts","webpack://CustomApplicationmain-application/./src/packages/table/core/head/head.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/body/cell.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/utils/iteratePlcList.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/body/row.tsx","webpack://CustomApplicationmain-application/./src/packages/table/virtual-table.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/body/body.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/plc.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/copyPlcList.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processStateConfigAndProps.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processPlcSort.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processHeadPlcList.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processPlcFixed.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/getPltCellClass.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processPlcClassAndStyle.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/formatPlcList.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/usePlcList.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/useBindScroll.ts","webpack://CustomApplicationmain-application/./src/packages/table/core/useTableNode.ts","webpack://CustomApplicationmain-application/./src/packages/table/core/useTableGetScroll.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/useFixedShadow.ts","webpack://CustomApplicationmain-application/./src/packages/table/table.tsx","webpack://CustomApplicationmain-application/./src/packages/table/index.ts","webpack://CustomApplicationmain-application/./src/packages/virtual-table/index.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/plc.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/designPlc.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-input.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-number.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-date.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-color-picker.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-toggle.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-rate.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/plc-index.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/plc-expand.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/plc-check.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/core/utils.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/core/use-list-draggier.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/core/use-list-draggier.virtual.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/core/index.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/plc-draggier.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/tree/plc-tree.draggier.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/tree/plc-tree.tsx","webpack://CustomApplicationmain-application/./src/packages/upload/upload.tsx","webpack://CustomApplicationmain-application/./src/packages/plc/index.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/plc-group.tsx","webpack://CustomApplicationmain-application/./src/packages/plc-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/upload/index.ts","webpack://CustomApplicationmain-application/./src/packages/nav/index.ts","webpack://CustomApplicationmain-application/./src/packages/file-service/index.ts","webpack://CustomApplicationmain-application/./src/packages/image/service/image.service.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/image/service/index.tsx","webpack://CustomApplicationmain-application/./src/packages/image/image.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/image/image.tsx","webpack://CustomApplicationmain-application/./src/packages/image/image-uploader.tsx","webpack://CustomApplicationmain-application/./src/packages/image/index.ts","webpack://CustomApplicationmain-application/./src/packages/image-uploader/index.ts","webpack://CustomApplicationmain-application/./src/packages/contextmenu/contextmenu-service.tsx","webpack://CustomApplicationmain-application/./src/packages/tab/tabs.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/contextmenu/index.ts","webpack://CustomApplicationmain-application/./src/packages/tab/tab.tsx","webpack://CustomApplicationmain-application/./src/packages/tab/tabs-header.tsx","webpack://CustomApplicationmain-application/./src/packages/tab/inner-tab.tsx","webpack://CustomApplicationmain-application/./src/packages/tab/tabs.tsx","webpack://CustomApplicationmain-application/./src/packages/tabs/index.ts","webpack://CustomApplicationmain-application/./src/packages/tab/index.ts","webpack://CustomApplicationmain-application/./src/index.ts"],"names":["CompareMode","WrapDate","value","displayFormat","valueFormat","dateObject","this","setValue","parse","String","year","isNull","defaultDate","setFullYear","month","date","setMonth","hour","setHours","minute","setMinutes","second","setSeconds","time","setTime","setHour","setMinute","setSecond","pd","setYear","Y","setMonthDate","format","displayString","valueString","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","getTime","Number","dateString","timeString","Date","formatString","today","PlainDate","TimeServiceGetter","name","render","attrs","defaultPopperAttrs","transition","REFRESH_POPPER_REFERENCE","refreshPopperReference","provide","refresh","inject","defaultValue","freshPopperReference","CascadeServiceGetter","defaultRenderAttrs","onChange","renderAttrs","state","option","serviceOption","selectBranch","hide","PlColorHueSlider","props","modelValue","type","default","size","thumbSize","emits","onUpdateModelValue","val","setup","emit","event","el","HTMLDivElement","refs","NUMBER","propsState","left","tempLeft","startX","styles","width","thumbStyles","methods","setLeft","Math","max","min","emitValue","toFixed","handler","mousedown","e","document","body","addEventListener","mousemove","mouseup","target","offsetX","clientX","durX","removeEventListener","then","immediate","StyleMode","StyleShape","StyleSize","StyleStatus","StyleProps","shape","status","USE_STYLE_PROVIDER","useStyle","ctx","parent","defaultData","Object","assign","fillet","normal","styleComputed","parentData","data","adjust","EDIT_PROVIDER","EditProps","disabled","Boolean","readonly","loading","placeholder","customReadonly","useEdit","parentEditComputed","editState","editComputed","editable","_event","onBlur","on","off","createEventListener","config","nextIndex","index","useModel","getter","emitter","autoWatch","autoEmit","designComponent","required","onClose","classes","zIndex","close","onClick","onClickCloseIcon","onMouseenter","closeTimer","clearTimeout","onMouseleave","setTimeout","icon","renderHead","title","noClose","renderContent","message","renderFoot","NoticeServiceDirection","horizontal","vertical","duration","options","useRefList","padding","utils","i","splice","refer","getNotice","push","messages","filter","length","start","map","id","proxy","containers","end","getContainer","ref","container","formatOption","idCount","getNoticeService","registryRootService","getManager","service","o","fo","manager","reduce","prev","$$notice","getServiceWithoutContext","install","app","mixin","beforeCreate","defineProperty","get","createFlagManager","key","set","getActiveKeys","keys","generator","createKeyHandler","ctxState","selfGetter","node","level","parentRef","keyField","CascadeNode","getList","list","item","loaded","FileServiceDefaultAccept","image","split","join","excel","createFileService","chooseFile","input","getInput","multiple","setAttribute","removeAttribute","accept","defaultInputAccept","dfd","__change","targetFiles","files","file","calcSize","validator","error","resolve","click","promise","chooseImage","readAsDataURL","fr","FileReader","onloadend","result","onerror","reject","upload","uploadConfig","xhr","window","XMLHttpRequest","Window","ActiveXObject","open","action","percent","total","onProgress","withCredentials","headers","entries","forEach","setRequestHeader","onError","onload","getError","onSuccess","getResponseBody","formData","FormData","append","Array","isArray","f","filename","send","createElement","style","display","appendChild","console","log","response","responseText","Error","method","url","JSON","$$file","counter","createCounter","mergeAttrs","LISTENER_MATCH_REG","agent","defaultAttrs","test","args","apply","createPopperServiceComponent","createDefaultService","isShow","isOpen","renderKey","newKey","getService","getRefer","undefined","show","popperAttrs","defaultOption","onClickBody","hideOnClickBody","noContentPadding","trigger","reference","popper","createAgentGetter","scope","root","create","ins","popperServiceGetter","createDefaultManager","toggle","destroy","cacheMap","WeakMap","cacheKey","$root","installMap","installPlugin","plugins","installedPlugins","plugin","indexOf","use","PlButton","directives","ClickWave","mode","label","active","noPadding","block","throttleClick","asyncHandler","Function","nativeAttrs","slots","PROMISE","buttonGroup","otherComputed","handleClick","handleClickInner","stopPropagation","trailing","prefix","count","obj","ColorFormat","enableAlpha","red","green","blue","hue","saturation","alpha","hex","updateByString","needInitializedEnableAlpha","_value","parts","replace","parseFloat","parseInt","floor","setRgb","trim","substring","setHex","r","g","b","h","s","v","currentColor","setHsv","rgbColor","getDefaultColor","PlColorPanel","onBblclickSvPanel","useRefs","defaultColor","color","reset","svChange","updateByHsv","hueChange","alphaChange","updateByAlpha","confirm","dblclickSvPanel","inputChange","formatVal","model","inputBlur","warn","inputEnter","updateByHex","updateByRgb","mini","registry","icons","unshift","module","PlIcon","getIconVNode","iconName","registryIcon","Icon","BUTTON_GROUP_PROVIDER","ButtonModeProvider","PlButtonGroup","fill","parentGroup","getIns","mount","serviceGetter","exports","refName","useFunctionWrapper","func","_use","getSlotExist","prevState","slotNames","slotName","managerName","serviceComponent","isItemAvailable","ServiceComponent","opt","createPlainEvent","getListenMap","events","Map","hasListener","listenName","fn","listenMap","once","listeners","listener","clear","getComponentEmit","emitObject","match","kebabCaseName","kebabCase","updateName","toLowerCase","useEvent","renderNothing","createError","expose","provideRefer","leftOptions","class","setupContext","duplicateKey","find","PlRoot","useSlots","managers","getManagerInstance","managerComponent","managerInstance","$attrs","attrName","attrComponent","Component","RenderComponent","rootRef","initRoot","createComponentPlugin","CheckboxStatus","DEFAULT_STATUS","primary","STATUS","white","black","success","info","names","makeReactive","exist","vnode","slot","isExist","KEY","KeyBoardMap","16","17","18","8","9","13","27","32","46","37","38","39","40","189","187","48","49","50","51","52","53","54","55","56","57","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","112","113","114","115","116","117","118","119","120","121","122","123","getKey","keyCode","KeyboardService","listen","unbindListener","cancelActiveElement","activeElement","blur","_onkeydown","currentTarget","metaKey","ctrlKey","shiftKey","altKey","compositionKeyName","flag","preventDefault","handleKeyboard","component","exposeComponents","wrapExposeComponents","next","componentList","values","comp","components","markRef","children","childrenField","labelField","childrenData","child","isLeaf","expandKeys","selfExpandKeys","toString","nodeDisabled","filterData","filterText","filterMethod","some","prefixString","CascadePanelProps","hoverDebounce","emptyText","lazy","getChildren","PlCascadePanel","expandNodes","onClickItem","onGetChildren","onUpdateData","scopedSlots","cascadeMark","formatData","cascadeData","checkProps","iterateAll","nodes","iterateChildren","getChildrenAsync","Promise","initLazy","isPassFilter","mouseenterItem","expand","clickItem","isExpand","isLoaded","setChildren","empty","filterList","cascadeList","listIndex","nodeIndex","isLoading","isEmpty","TimePublicProps","layout","custom","checkDisabled","useCollectInParentInner","indexMap","items","addItem","sort","from","parentNode","childNodes","nodeName","a","removeItem","useCollect","parentName","provideString","injectDefaultValue","PlInput","placeValue","minHeight","maxHeight","textarea","suffixIcon","prefixIcon","clearIcon","clearHandler","autoHeight","isFocus","inputReadonly","throttleEnter","inputInnerTabindex","onFocus","onKeydown","onEnter","onEsc","onClickInput","onClickPrefixIcon","onClickSuffixIcon","onClickClearIcon","HTMLInputElement","hiddenInput","HTMLTextAreaElement","FUNCTION","handlerEnter","handleEnterInner","enter","clickPrefixIcon","clickSuffixIcon","clickClearIcon","clearValue","height","publicProps","onInput","esc","focus","resetTextAreaHeight","scrollHeight","onMousedown","hidden","prepend","tag","msg","isLog","reactive","PlLoading","HTMLElement","innerHTML","outerHTML","getElement","$el","nodeType","nextElementSibling","getBaseTrigger","triggerName","openModel","hoverOpenDelay","hoverCloseDelay","PopperTriggerType","hover","getHoverTrigger","getClickTrigger","getFocusTrigger","manual","getManualTrigger","openTimer","onEnterReference","leave","onLeaveReference","onEnterPopper","onLeavePopper","onClickReference","oldTabIndex","onReferenceFocus","onReferenceBlur","getAttribute","init","getPopperTrigger","cb","onClickPopper","PlPopper","popperClass","offset","Element","placement","arrow","boundary","sizeEqual","scrollAttrs","onUpdateOpen","onInit","onDestroy","onOpen","onShow","onHide","onMousedownPopper","comment","content","useProps","referenceEl","onTransitionend","referenceVNode","direction","popperClasses","popperStyles","useStyles","sizeStyles","offsetWidth","offsetHeight","fitHostWidth","onPopperContentTransitionend","contains","bindEvents","unbindEvents","initPopper","arrowSize","shouldUpdate","shouldEmit","delay","refreshReference","setPlacement","popperConfigChangeHandler","debounce","isUnmounted","Comment","ReferenceVNode","defer","FormatPropType","usePropsFormatter","types","formatTypes","lastIndexOf","usePropsInner","configKeys","formatConfig","configKey","PlColorSvPanel","onDblclick","startY","tempSaturation","tempValue","backgroundColor","transform","updatePosition","x","y","isMouseDown","durY","offsetY","clientY","dblclick","callback","detect","scrollWidth","ret","oldWidth","oldHeight","runCallback","observer","MutationObserver","observe","childList","subtree","ceil","disconnect","ResizeDetectorDirective","mounted","binding","__resizedetextor__","beforeUnmount","VerticalScrollbar","tooltip","scroll","PlScroll","dragState","top","scrollTop","contentHeight","hostHeight","targetScrollbarSize","scrollbarColor","onScroll","freezeState","isDragging","onMousemove","onMouseup","disabledUserSelect","deltaY","scrollAfterDragEnd","wrapper","enableUserSelect","TooltipDirective","PLAIN_SCROLL_VERTICAL_POSITION","HorizontalScrollbar","scrollLeft","contentWidth","hostWidth","deltaX","resize","refreshState","scrollbarSize","scrollX","scrollY","hideScrollbar","alwaysShowScrollbar","fitContentWidth","fitContentHeight","fitHostHeight","topThreshold","bottomThreshold","autoScrollSpeed","disableListTransition","horizontalScrollbarTooltip","verticalScrollbarTooltip","onVerticalScrollTop","onVerticalScrollBottom","onVerticalScrollCenter","host","useMounted","verticalPosition","cancelAnimate","wrapperScrollTop","wrapperScrollLeft","emitScroll","_isDragging","hostStyles","wrapperStyles","contentStyles","overflowX","overflowY","width1","height1","contentResize","width2","height2","hostResize","point","configOrTime","noEmitScroll","done","cancelAnimationFrame","ny","nx","ky","kx","startTime","now","run","nowTime","delta","requestAnimationFrame","scrollEnd","autoScrollTop","autoScrollBottom","autoScrollLeft","autoScrollRight","stopAutoScroll","disabledQueueAnimation","windowResize","throttle","popperOpen","popperShow","wrapperMousewheel","wrapperScroll","center","bottom","onMousewheel","MessageServiceDirection","closeMessage","getMessage","getMessageService","charAt","$$message","toArray","TimeRangePanelType","PlTimeRangePanel","onUpdateStart","onUpdateEnd","onMousedownStartPanel","onMousedownEndPanel","onStartChange","endPd","startPd","Hms","onEndChange","publicBinding","disableChangeOnScroll","NavPage","page","isLast","PageComponent","renderEl","unmountHandler","nav","getAppLoader","pageConfig","loader","getPage","mountData","unmount","PROVIDE_NAV_CONSTANT","provideNavPage","stack","$nav","tabMethods","pageMethods","back","redirect","getCurrentPage","useNav","NavStack","provideNav","pages","TimePanelLayout","PlTimeBaseColumn","liList","resetPosition","zeroize","findOne","offsetTop","PlTimeBasePanel","maxmin","maxpd","minpd","vpd","Infinity","num","columnChange","RootServiceScope","RootController","getRoot","createService","mapKey","createRootService","context","INT_HEX_MAP","10","11","12","14","15","hexOne","round","high","low","rgb2hex","isNaN","isOnePointZero","n","isPercentage","bound01","processPercent","abs","rgb2hsv","d","hsv2rgb","p","q","t","mod","HEX_INT_MAP","A","B","C","D","E","F","parseHexChannel","toUpperCase","isEffectiveColorString","isMounted","ColorPickerServiceGetter","PlList","webpackAsyncContext","req","__webpack_require__","code","ids","bg","PlColorAlphaSlider","tempTop","backgroundImage","shadowStyles","background","setTop","PlItem","Tag","ClickWaveData","wavingTimer","updateOption","updated","unbind","useScopedSlots","TimePanelProps","range","PlTimePanel","foot","onMousedownBasePanel","onBaseChange","onRangeChange","base","stacks","useClass","PlInputInnerTags","collapseTags","slice","PlLoadingMask","loadingType","unlock","fixedPosition","inDirective","resetParentPosition","getComputedStyle","position","PlCheckboxGroup","itemWidth","formItem","CheckboxGroupCollector","activeChildren","innerState","checkboxForAll","allKeys","checkStatus","hasCheck","hasUncheck","check","uncheck","minus","getCheckStatus","checkbox","exceed","changeValue","add","delete","clickCheckbox","PlCheckbox","PlCheckboxInner","GridAlign","GridJustify","trueValue","falseValue","checkboxGroup","checked","targetWidth","unit","clickEl","PlRow","align","justify","gutter","marginLeft","marginRight","PlCol","span","order","pull","className","xs","sm","md","lg","row","classList","sizeProps","paddingLeft","paddingRight","PlRadioGroup","onClickRadio","PlRadioInner","PlRadio","group","keydown","space","DialogServiceEditType","PlDialog","minWidth","maxWidth","fullHeight","fullWidth","wrapperPadding","contentPadding","showHead","fullscreen","mask","dialogClass","serviceClass","cancelOnClickMask","showClose","beforeClose","destroyOnClose","confirmButton","cancelButton","closeOnConfirm","closeOnCancel","confirmButtonText","cancelButtonText","confirmOnEnter","cancelOnEsc","disabledCancel","disabledConfirm","onConfirm","onCancel","alignItems","justifyContent","wrapperClasses","bodyClasses","hasHead","hasFoot","contentStyle","keyboardEventOption","cancel","clickWrapper","clickClose","Wrapper","head","large","OptionKeys","editValue","targetOption","editType","editReadonly","getDialogService","$$dialog","newInstance","LoadingBarStatus","Mask","update","directive","loadingMask","inactive","LoadingMaskDirective","getLoadingMaskService","wait","interval","autoLoadingStep","startDelayer","process","doneColor","fail","failColor","opacity","startAutoLoading","setInterval","stopAutoLoading","clearInterval","autoProcess","complete","autoStart","getLoadingBarService","bar","NAN","PlNumber","step","stepStrictly","precision","hideButton","inputProps","getValue","getEffectiveValue","formatModelValue","formatValue","checkValue","intervalAdd","intervalMinus","up","down","PlToggle","isActive","isChecked","alignEnd","full","showSteps","tooltipFormatter","dragStart","touching","tempStart","tempEnd","totalLength","transferValueToLength","transferLengthToValue","setStart","setEnd","startPosition","endPosition","progressStyles","startTooltip","endTooltip","steps","stepItemStyles","removeUnit","dragstart","temp","dur","stepLength","divisor","PlTag","PlTagInput","beforeAdd","beforeRemove","noInput","isEditing","inputValue","clickWindow","clickEditButton","tagClose","PlRate","activeIcon","inactiveIcon","totalWidth","elLeft","activeStyles","getBoundingClientRect","half","useVirtualList","current","pageIndex","pageSize","offsetData","startPageIndex","getPageIndex","strutStyles","dynamicSize","getIndex","middle","middleBottom","scrollIndex","resetData","elNodes","vid","prevNode","prevHeight","deltaHeight","j","virtual","PlVirtualList","require","virtualIndex","PROGRESS_DEFAULT_PROPS","outerColor","innerColor","speed","successColor","errorColor","PlProgressBar","inlineText","iconColor","outerStyles","borderRadius","innerStyles","createAnimate","initValue","k","deltaTime","stop","PlProgressCircle","lineSize","startAngle","antiClockwise","animate","radius","pathD","degrees","PI","sin","cos","pathStroke","circleStroke","pathStyles","PlProgressMini","toNumber","useNumber","numberState","PlSelectPanel","multipleMaxLimit","multipleMinLimit","noMatchText","noDataText","showDebug","SelectPanelCollector","showOptions","isSelected","optionProps","clickOption","newValue","highlightPrev","highlightNext","selectHighlight","inner","PlSelectOption","PlSelectGroup","SelectGroupCollector","panel","SelectCollector","useEditPopperAgent","focusCounter","inputHandler","SelectServiceGetter","Props","filterable","PlSelect","onSpace","onUp","onDown","agentState","popperHeight","onServiceChange","displayValue","strings","placeholderValue","inputBinding","onInputClear","onInputChange","onInputKeydown","multipleTags","ie","onClickItemCloseIcon","StepStatus","SizesWidth","PlPagination","totalPage","pagerCount","currentPage","pageSizes","prevText","nextText","jumperNumberWidth","onJump","onPrev","onNext","onCurrentChange","onSizeChange","jumperValue","totalPageData","pageInfo","midPagerCount","showPrevMore","showNextMore","pagers","array","startPage","getPagerButtonClass","changeCurrent","sizes","jumper","pager","blank","part","PlBadge","dot","contentClass","showValue","badge","StepUtils","getCurrentIndex","getStepStatus","currentStatus","currentIndex","finish","PlStepGroup","titleAlignBottom","dotIcon","StepCollector","isTitleAlignBottom","PlStep","stepGroup","PlArrowStepGroup","ArrowStepCollector","PlArrowStep","DirectionMap","right","uppercaseFirstLetter","PlTriangle","targetStyles","border","hideIndex","isFirst","PlDropdown","disabledHideOnClickOption","clickDropdownOption","PlDropdownGroup","PlDropdownMenu","onClickOption","dropdown","PlDropdownOption","menu","PlTooltip","showWidth","theme","HTMLSpanElement","oldOption","deepEqual","Tooltip","DEFAULT_OPTION","unmounted","ColorPickerType","PlCollapseTransition","onAfterLeave","beforeEnter","addClass","dataset","oldPaddingTop","paddingTop","oldPaddingBottom","paddingBottom","oldOverflow","overflow","afterEnter","removeClass","beforeLeave","transitionProperty","afterLeave","onBeforeEnter","onAfterEnter","onBeforeLeave","onLeave","PlAlert","desc","isClosed","onClickClosed","PlCollapseGroup","limit","clickCollapseTitle","valCounter","PlCollapse","detail","noArrow","selfVal","isDisabled","onClickTitle","PlCard","shadow","poster","operator","PlCarouselItem","carousel","CarouselCollector","itemVal","getItemStyles","isAnimating","PlCarousel","autoplay","disabledOperator","disabledIndicator","indicatorTrigger","card","cardScale","indicator","autoplayTimer","prevActiveIndex","vals","activeVal","activeIndex","sortVals","valArray","shift","pop","sortIndex","activeSortIndex","resetAutoplayTimer","leading","onIndicator","cover","opacityBg","PlColorButton","TreeDropType","TreeNodeCheckStatus","PlColorPicker","button","scopedSlotsOnClick","variable","PlCascade","showLast","separator","showFormat","inputAttrs","cacheData","sourceKey","iteratorTreeData","useTreeNode","keyManager","getTreeNodeByDataAdjust","dataModel","showCheckbox","iterate","iterateChildrenFirst","checkStrictly","every","getTreeNodeByData","selfRef","isCheckable","filterNodeMethod","isVisible","nodeMap","iterator","Node","dataEffectTrigger","stopWatchEffect","getReactiveChildrenData","removeSelf","parentChildrenData","previousSibling","self","nextSibling","unshiftChild","treeNodeUtils","treeNodeMethods","currentKey","onUpdateCurrentKey","handleKeyOrNode","keyOrNode","baseMethods","getNode","all","results","getParents","parents","defaultExpandAll","expandMethods","expandAll","checkNodes","checkKeys","setChildrenData","setCurrent","getCurrent","according","collapse","onExpand","onExpandChange","autoExpandParent","onCollapse","toggleExpand","collapseAll","checkMethods","onCheck","onCheckChange","onUncheck","toggleCheck","checkAll","uncheckAll","getCheckedData","refreshCheckStatus","reverse","onClickExpandIcon","onClickCheckbox","onClickCell","onClickNode","expandOnClickNode","checkOnClickNode","useTree","createProps","createEvent","TreeProps","nodeIcon","nodeHeight","intent","draggable","allowDrag","allowDrop","folderCollapseIcon","folderExpandIcon","leafIcon","basePadding","TreeUtils","getPaddingLeft","getTreeNodeStyles","getTreeNodeClasses","createIndicator","hostEl","indicatorSize","publicStyles","bottomIndicatorTop","rightIndicatorLeft","useAutoScroll","getScroll","showHover","enterStart","enterEnd","hideHover","removeChild","getRowEl","rowClass","rowEl","hasClass","getScrollParent","useTreeDraggier","dragClass","flatList","startNode","moveNode","startScrollTop","moveScrollTop","startClientY","moveClientY","rowHeight","scrollParent","scrollParentRect","dragNodeBaseLeft","dropType","droppable","autoScroll","allowRowDraggable","allowRowDroppable","getIndicatorStyles","targetIndex","external","dragNode","querySelector","pointerEvents","PlTree","treeNode","exposeMethods","draggier","emptyNode","PlDateTimeInput","regexp","RegExp","useDateTime","valueInput","startInput","endInput","plInput","clickInput","customInputFocus","customInputBlur","DateView","DatePanel","SlideTransitionDirection","DateEmitRangeType","PlTime","startModel","endModel","serviceHandler","customHandler","change","valuePd","parseDisplayString","setDisplayValue","DefaultDateFormatString","datetime","week","quarter","getDefaultDateFormatter","getDefaultDateValueFormat","getDefaultDateDisplayFormat","DateViewSeq","DatePublicProps","firstWeekDay","defaultTime","defaultStartTime","defaultEndTime","showQuarter","isQuarterActive","view","selectDate","DatePublicEmits","rangeType","onUpdateView","DatePanelWrapper","bodyAttrs","DatePanelItemWrapper","clickable","len","char","wrapDate","initialValue","dj","dateObj","toDate","day","YM","YMD","YMDHms","getDayJs","getDisplay","useValue","useDisplay","useYear","useMonthDate","useHour","useMinute","useSecond","useTime","useHms","useYMD","parseDisplay","parseValue","clone","locale","extend","UseDateJudgementView","str","plainDate","DayJs","DATE_PANEL_PROVIDER","useDate","jdView","getSlide","processPd","customStatus","defaultFormat","createPlainDate","slide","useDateData","setSelectDate","spd","epd","viewModel","topState","isRange","did","existIndex","findIndex","mid","condition","getStatus","PlDatePanelYear","selectYear","prevYearList","nextYearList","PlDatePanelMonth","onMouseleaveList","months","prevYear","nextYear","monthList","quarterList","listClasses","externalHandler","onSelectYearChange","Month","PlDatePanelDate","onSelectTime","onSelectDateChange","onMouseleaveDateList","showTimePd","weekList","weeks","concat","dateList","currentMonthFirstDate","weekDayDuration","offsetDay","firstDateTime","externals","isSelectMonth","monthAttrs","onSelectMonthChange","defaultTimePd","timeAttrs","timePd","maxPd","minPd","prevMonth","nextMonth","changeView","oldSeq","newSeq","DefaultTime","PlDatePanelRange","argSpd","argEpd","startSelectDate","endSelectDate","useDateWeek","getDateData","dateData","externalState","PlDatePanelWeek","dateAttrs","PlDatePanelQuarter","PlDatePanel","DateServiceGetter","FormLabelAlign","FormContentAlign","FormValidateMode","FormValidateTrigger","FormValueType","PlDate","vpds","isDates","isValid","FormValidateUtils","getValueByField","field","fields","getMaxMessage","getMinMessage","getListValue","checkRule","rule","fieldToLabel","pattern","validList","invalidValues","optionList","validateResultList","formatFormRules","formComponentRules","formItems","resultRules","rules","formItemRules","formComponentRulesList","validateField","formValidateResultMap","associateFields","matchField","validateResult","validate","validateResultMap","validateMessage","fieldToRequired","PlFormItem","labelWidth","column","colon","labelAlign","contentAlign","form","FormCollector","invalidate","onEditChange","validateHandler","onEditBlur","onBlurChange","disabledFields","readonlyFields","staticWidth","hasLabel","childState","isRequired","hideRequiredAsterisk","hideValidateMessage","isBlock","inline","col","columnGutter","labelStyles","bodyStyles","formItemComponentRules","formValidate","invalidField","suffix","PlForm","validateMode","validateOnRulesChange","centerWhenSingleColumn","onFieldValueChange","newVal","oldVal","maxLabelWidth","validateMethods","autoLoading","autoAlert","clearValidate","showError","oldFormData","onFieldChange","onFormDataChange","newFormData","deep","TablePlcCollector","ProvideString","useParent","parentElement","remove","useChild","renderColgroup","flatPlcList","plc","useHeadCellResize","table","indicatorEl","endX","tableEl","cell","durWidth","setDurWidth","resizeHandler","renderHeadCell","renderBodyCell","getEditable","getBodyCell","edit","renderScope","isSummary","summary","editRow","HoverPart","getHorizontalScrollParent","iteratePlc","plcList","getBroPlcList","broPlcList","itarPlc","getPlcWidth","getIndicatorHeight","plcData","maxLevel","headRowHeight","rowspan","getLowestPlcList","getDragData","broList","broLowestList","allLowestList","broData","useColDraggier","scrollRefer","isDraggable","colDraggable","tdAttrs","autoScroller","startClientX","moveClientX","startScrollLeft","moveScrollLeft","currentRect","scrollRect","dragData","refreshData","dd","indicatorLeft","indicatorHeight","startPlc","endPlc","startIndex","endIndex","fixed","TablePlcAlign","TablePlcFixedType","TableHoverPart","PltHeadCell","PlainTable","tablePlc","headCls","headCellClassFunc","headCellStyleFunc","colspan","TableProps","summaryData","spanMethod","stripe","hideHeader","disabledStickyCompatible","bodyRowHeight","showRows","rowClassFunc","cellClassFunc","cellStyleFunc","PltHead","headPlcListArray","tableStyles","targetTableWidth","bindScroll","scrollRef","cellspacing","cellpadding","plcKeyString","arrayIndex","useCellFormItemValidate","IteratePlcHandleType","PltCell","bodyCls","PltRow","onClickRow","onDblclickRow","plcListHasRenderAfterRow","renderAfterRow","PlVirtualTable","summaryTableStyles","colgroup","PltBody","onVnodeMounted","onVirtualMounted","flatNodes","summaryNodes","disabledVirtual","PlcGroupProps","autoFixedLeft","autoFixedRight","PlcProps","fit","notFitVirtual","addEditPadding","PlcPublicAttrs","isLastFixedLeft","isFirstFixedRight","copyPlcList","newPlc","deepcopy","iteratePlcList","onPlc","onGroup","handleType","handleTablePlc","configData","configPlc","processStateConfigAndProps","configState","fixedLeft","fixedRight","nothing","getPlcOrder","processPlcSort","tableWidth","insertSort","totalPlcWidth","fitPlc","processHeadPlcList","calculateLevel","calculateSpan","calculateHeadColumns","setFixedFlag","lastFixedLeft","firstFixedRight","setLastFixedLeft","setFirstFixedRight","processPlcFixed","collect","element","prevWidth","prevValue","getPlcFixedStyle","isFixedLeft","getPltCellClass","processPlcClassAndStyle","formatPlcList","usePlcList","collector","useBindScroll","hoverPart","updateLeft","onScrollLeft","useTableNode","getValidate","openEdit","closeEdit","enableEdit","cancelEdit","saveEdit","newRow","useTableGetScroll","useFixedShadow","showFixedLeft","showFixedRight","freeState","fixedShadowClass","PlTable","onDblclickCell","square","exposeHandler","injectPlainTable","usePlc","formatProps","designPlc","standardProps","externalProps","OptionProps","externalRefer","summaryText","totalSpan","toggleOnClickRow","summaryExpand","selected","selectedKeys","isCheck","getSelected","clearAll","availableSelectItems","addSelected","removeSelected","getRowElList","querySelectorAll","dragEl","dragHeight","dragOffsetTop","dragStartScrollTop","dragScrollTop","rowList","movedown","refreshDragElPosition","parentScroll","dragElHeight","startDragIndex","endDragIndex","startDragOffsetTop","startDragHeight","startScrollTopOfScrollParent","scrollTopOfScrollParent","scrollParentBoundingRect","usePlcTreeDraggier","flatDataList","levelPadding","UploadStatus","rowDraggable","maxShowLevel","getExpanderAttrs","unmountListener","tableProps","PlcIndex","PlcExpand","PlcCheck","PlcDraggier","PlcTree","PlcInput","PlcNumber","PlcDate","PlcColorPicker","PlcToggle","PlcRate","itemDurWidth","nextFileId","PlUpload","autoUpload","removeConfirm","beforeUpload","handleRemove","handleUpload","handlePreview","updateModelValue","singleModel","multipleModel","renderIcon","ready","uploading","singleEmptyFile","getItemClass","onSelectFile","selectFiles","addFiles","dropHandler","onDragover","onDragLeave","onDrop","dataTransfer","extension","baseType","acceptedType","removeFile","uploadFile","uploadFiles","renderItem","singleRender","multipleRender","globalProperties","urlToImage","Image","src","canvasToFile","canvas","quality","toBlob","blob","File","fileToDataURL","imageCompress","compressByMeasure","getContext","drawImage","compressByMaxSize","maxSize","rate","clearRect","ImageStatus","ImageFit","Service","scale","rotate","imgStyles","resetAdjust","isMultipleImages","urls","buttons","dragImg","startTop","startLeft","onDblclickImg","onClickMask","onDragstart","btn","getImageService","preview","choose","compress","$image","ImageUploaderStatus","PlImageProps","alt","PlImage","previewOnClick","pending","objectFit","objectPosition","tip","PlImageUploader","previewImage","handleDelete","onLoadSuccess","onLoadError","onUploadSuccess","resp","onUploadProgress","onUploadFail","chooseBase64","onClickImage","onClickDelete","getReferencePosition","TabHeadType","TabHeadPosition","hideTimer","onTransitionEnd","onMousedownWindow","getContextmenuService","newPos","available","oldPos","PlTab","destroyOnHide","TabCollector","PlTabsHeader","tabs","onClickTabHead","tab","refreshTimer","listLeft","refreshOffsetData","offsetLeft","listStyles","indicatorStyle","PlInnerTab","PlTabs","headType","text","headPosition","closeable","onClickTabHeader"],"mappings":"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uB,CACtB,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,+BAAgC,CAC/B,QACA,kBAED,sBAAuB,CACtB,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,kCAAmC,CAClC,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,gCAAiC,CAChC,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sCAAuC,CACtC,OACA,kBAED,kCAAmC,CAClC,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,2BAA4B,CAC3B,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,gCAAiC,CAChC,QACA,kBAED,wBAAyB,CACxB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,2BAA4B,CAC3B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,2BAA4B,CAC3B,OACA,kBAED,qBAAsB,CACrB,OACA,kBAED,qCAAsC,CACrC,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,2BAA4B,CAC3B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,4BAA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","file":"js/chunk-common.f878c02b.js","sourcesContent":["import fecha from 'fecha'\r\nimport {zeroize} from \"plain-utils/string/zeroize\";\r\n\r\nenum CompareMode {\r\n    time = 'time',\r\n    date = 'date',\r\n    datetime = 'datetime',\r\n    yearmonth = 'yearmonth',\r\n}\r\n\r\ntype Pub = {\r\n    displayFormat: string\r\n    valueFormat: string\r\n\r\n    setValue(value: string | undefined): void,\r\n    setDisplayValue(value: string): void,\r\n    setYear(year: number): void,\r\n    setMonthDate(month: number, date: number): void,\r\n    setHour(hour: number): void,\r\n    setMinute(minute: number): void,\r\n    setSecond(second: number): void,\r\n    setTime(time: number): void,\r\n    setHms(hour: number | PlainDateType, minute?: number, second?: number): void,\r\n    setYMD(year: number | PlainDateType, month?: number, date?: number): void,\r\n\r\n    format(dateObject: Date | null): string | null,\r\n    parseDisplayString(displayString: string | null): Date | null,\r\n    parseValueString(valueString: string | null): Date | null,\r\n    copy(): PlainDateType,\r\n}\r\n\r\ntype Diff =\r\n    {\r\n        dateObject: Date\r\n        isNull: false\r\n        year: number\r\n        month: number\r\n        date: number\r\n        hour: number\r\n        minute: number\r\n        second: number\r\n        day: number\r\n        time: number\r\n        displayString: string\r\n        valueString: string\r\n        timeString: string\r\n        dateString: string\r\n        Y: number\r\n        YM: number\r\n        YMD: number\r\n        YMDHms: number\r\n        Hms: number\r\n    } |\r\n    {\r\n        dateObject: null\r\n        isNull: true\r\n        year: null\r\n        month: null\r\n        date: null\r\n        hour: null\r\n        minute: null\r\n        second: null\r\n        day: null\r\n        time: null\r\n        displayString: null\r\n        valueString: null\r\n        timeString: null\r\n        dateString: null\r\n        Y: null\r\n        YM: null\r\n        YMD: null\r\n        YMDHms: null\r\n        Hms: null\r\n    };\r\n\r\nexport type PlainDateType = Diff & Pub\r\n\r\nclass WrapDate {\r\n\r\n    displayFormat: string                                                       // 显示值格式字符串\r\n    valueFormat: string                                                         // 实际值格式字符串\r\n    dateObject: Date | null = null                                              // 日期对象\r\n\r\n    constructor(value: string | undefined | null, displayFormat: string, valueFormat: string) {\r\n        this.displayFormat = displayFormat\r\n        this.valueFormat = valueFormat\r\n\r\n        if (value != null) {\r\n            this.setValue(value)\r\n        }\r\n    }\r\n\r\n    /*---------------------------------------attrs-------------------------------------------*/\r\n\r\n    get isNull(): boolean {return !this.dateObject}\r\n\r\n    get year() {return this.isNull ? null : this.dateObject!.getFullYear()}\r\n\r\n    get month() {return this.isNull ? null : this.dateObject!.getMonth()}\r\n\r\n    get date() {return this.isNull ? null : this.dateObject!.getDate()}\r\n\r\n    get hour() {return this.isNull ? null : this.dateObject!.getHours()}\r\n\r\n    get minute() {return this.isNull ? null : this.dateObject!.getMinutes()}\r\n\r\n    get second() {return this.isNull ? null : this.dateObject!.getSeconds()}\r\n\r\n    get day() {return this.isNull ? null : this.dateObject!.getDay()}\r\n\r\n    get time() {return this.isNull ? null : this.dateObject!.getTime()}\r\n\r\n    get displayString() {return this.isNull ? null : fecha.format(this.dateObject!, this.displayFormat)}\r\n\r\n    get valueString() {return this.isNull ? null : fecha.format(this.dateObject!, this.valueFormat)}\r\n\r\n    get timeString() {return this.isNull ? null : `${zeroize(this.hour!)}${zeroize(this.minute!)}${zeroize(this.second!)}`}\r\n\r\n    get dateString() {return this.isNull ? null : `${zeroize(this.year!)}${zeroize(this.month! + 1)}${zeroize(this.date!)}`}\r\n\r\n    get Y() {return this.isNull ? null : this.year}\r\n\r\n    get YM() {return this.isNull ? null : Number(`${this.year}${zeroize(this.month! + 1)}`)}\r\n\r\n    get YMD() {return this.isNull ? null : Number(this.dateString)}\r\n\r\n    get YMDHms() {return this.isNull ? null : Number(this.dateString! + this.timeString!)}\r\n\r\n    get Hms() {return this.isNull ? null : Number(this.timeString)}\r\n\r\n    /*---------------------------------------methods-------------------------------------------*/\r\n\r\n    setValue(value: string | undefined) {this.dateObject = !value ? null : WrapDate.parse(String(value), this.valueFormat)}\r\n\r\n    setDisplayValue(value: string) {this.dateObject = !value ? null : this.dateObject = WrapDate.parse(String(value), this.displayFormat)}\r\n\r\n    setYear(year: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setFullYear(year)\r\n    }\r\n\r\n    setMonthDate(month: number, date: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setMonth(month, date)\r\n    }\r\n\r\n    setHour(hour: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setHours(hour)\r\n    }\r\n\r\n    setMinute(minute: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setMinutes(minute)\r\n    }\r\n\r\n    setSecond(second: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setSeconds(second)\r\n    }\r\n\r\n    setTime(time: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setTime(time)\r\n    }\r\n\r\n    setHms(hour: number | WrapDate, minute?: number, second?: number): void {\r\n        if (typeof hour === \"number\") {\r\n            this.setHour(hour)\r\n            if (minute != null) this.setMinute(minute)\r\n            if (second != null) this.setSecond(second)\r\n        } else {\r\n            const pd = hour as WrapDate\r\n            this.setHour(pd.hour!)\r\n            this.setMinute(pd.minute!)\r\n            this.setSecond(pd.second!)\r\n        }\r\n    }\r\n\r\n    setYMD(year: number | WrapDate, month?: number, date?: number) {\r\n        if (typeof year == \"object\") {\r\n            this.setYear(year.Y!)\r\n            this.setMonthDate(year.month!, year.date!)\r\n        } else {\r\n            this.setYear(year)\r\n            if (month != null && date != null) this.setMonthDate(month, date)\r\n        }\r\n    }\r\n\r\n    format(dateObject: Date | null): string | null {\r\n        if (!dateObject) return null\r\n        return WrapDate.format(dateObject, this.displayFormat)\r\n    }\r\n\r\n    parseDisplayString(displayString: string | null): Date | null {\r\n        if (!displayString) return null\r\n        return WrapDate.parse(displayString, this.displayFormat)\r\n    }\r\n\r\n    parseValueString(valueString: string | null): Date | null {\r\n        if (!valueString) return null\r\n        return WrapDate.parse(valueString, this.valueFormat)\r\n    }\r\n\r\n    copy(): WrapDate {\r\n        return new WrapDate(this.valueString, this.displayFormat, this.valueFormat)\r\n    }\r\n\r\n    /*---------------------------------------static-------------------------------------------*/\r\n\r\n    static defaultDate(): Date {\r\n        const date = new Date()\r\n        date.setMonth(0, 1)\r\n        date.setHours(0, 0, 0)\r\n        return date\r\n    }\r\n\r\n    static format(dateObject: Date, formatString: string) {\r\n        if (!dateObject) return null\r\n        return fecha.format(dateObject, formatString)\r\n    }\r\n\r\n    static parse(dateString: string, formatString: string) {\r\n        if (!dateString) return null\r\n        return fecha.parse(dateString, formatString)\r\n    }\r\n\r\n    static today(displayFormat: string, valueFormat: string): PlainDateType {\r\n        let today = new WrapDate(null, displayFormat, valueFormat)\r\n        today.setTime(new Date().getTime())\r\n        return today as PlainDateType\r\n    }\r\n\r\n    static CompareMode = CompareMode\r\n}\r\n\r\nexport const PlainDate = WrapDate as any as (new(...args: ConstructorParameters<typeof WrapDate>) => PlainDateType) & {\r\n    defaultDate(): Date,\r\n    format(dateObject: Date, formatString: string): string,\r\n    parse(dateString: string, formatString: string): Date | null,\r\n    today(displayFormat: string, valueFormat: string): PlainDateType,\r\n    CompareMode: typeof CompareMode,\r\n}\r\n","import {createAgentGetter} from \"../../popper/edit/createAgentGetter\";\r\nimport {PlTimePanel} from \"../panel/time-panel\";\r\n\r\nexport const TimeServiceGetter = createAgentGetter({\r\n    name: 'time',\r\n    render: (attrs) => <PlTimePanel {...attrs}/>,\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n    },\r\n})","import {provide, inject} from 'vue'\r\nimport {SimpleFunction} from \"../../shims\";\r\n\r\nconst REFRESH_POPPER_REFERENCE = '@@REFRESH_POPPER_REFERENCE'\r\n\r\n/**\r\n * 因为 Popper 是无根节点，所以比较难检测到reference节点变化的情况。为了优化这一块的内容\r\n * 有两种方式，一种是在使用Popper组件的时候，reference包裹一层不变的节点，缺点是会破坏无根\r\n * 节点的结构。另一种是，提供一个 refreshPopperReference 函数，子组件可以注入这个函数，当子组件\r\n * 知道自己的reference节点变化之后调用这个函数通知Popper重新reference。\r\n *\r\n * @author  韦胜健\r\n * @date    2020/11/19 11:00\r\n */\r\nexport const refreshPopperReference = {\r\n    provide: (refresh: () => void) => {\r\n        provide(REFRESH_POPPER_REFERENCE, refresh)\r\n    },\r\n    inject: (defaultValue = null) => {\r\n        const refresh = inject(REFRESH_POPPER_REFERENCE, defaultValue) as null | SimpleFunction\r\n        return {\r\n            freshPopperReference: () => !!refresh && refresh()\r\n        }\r\n    },\r\n}","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlButton} from \"./button\";\r\n\r\nexport default createComponentPlugin(PlButton)","import {createAgentGetter} from \"../../popper/edit/createAgentGetter\";\r\nimport './cascade-service.scss'\r\nimport {App} from 'vue';\r\nimport {delay} from 'plain-utils/utils/delay';\r\nimport {PlCascadePanel} from \"../panel/cascade-panel\";\r\n\r\nexport const CascadeServiceGetter = createAgentGetter({\r\n    name: 'cascade',\r\n    render(attrs) {\r\n        return <PlCascadePanel {...attrs}/>\r\n    },\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n    },\r\n    defaultRenderAttrs: {\r\n        async onChange() {\r\n            let renderAttrs: any = this.state.option.serviceOption.renderAttrs\r\n            if (typeof renderAttrs === \"function\") renderAttrs = renderAttrs()\r\n            if (!renderAttrs.selectBranch) {\r\n                // 因为change之后，会引发 cascade panels 重新渲染没有宽度以及高度，导致过度动画失效，这里再change之后延迟再关闭\r\n                await delay(120)\r\n                this.hide()\r\n            }\r\n        },\r\n    },\r\n})\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            beforeCreate(): void {\r\n                Object.defineProperty(this, '$cascade', {\r\n                    get() {\r\n                        const service = CascadeServiceGetter(this)\r\n                        return service\r\n                    },\r\n                })\r\n            }\r\n        })\r\n    },\r\n}","import './color-hue-slider.scss'\r\nimport {designComponent} from \"../../../use/designComponent\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport {useProps} from \"../../../use/useProps\";\r\nimport {computed, nextTick, reactive, watch} from 'vue';\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\n\r\nexport const PlColorHueSlider = designComponent({\r\n    name: 'pl-color-hue-slider',\r\n    props: {\r\n        modelValue: {type: Number, default: 0},                          // 当前色相\r\n        size: {type: [String, Number]},                             // 宽度\r\n        thumbSize: {type: [String, Number], default: 10},           // 指示器宽度\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n        const {propsState} = useProps(props, {\r\n            size: useProps.NUMBER,\r\n            thumbSize: useProps.NUMBER,\r\n        })\r\n\r\n        const state = reactive({\r\n            left: 0,                                                // 指示器左偏移位置\r\n            tempLeft: 0,                                            // 拖拽的时候，指示器的缓存左偏移位置\r\n            startX: null as null | number,                          // 拖拽的时候起始位置\r\n        })\r\n\r\n        const styles = computed(() => ({\r\n            width: unit(propsState.size)\r\n        }))\r\n\r\n        const thumbStyles = computed(() => ({\r\n            left: `${state.left}px`,\r\n            width: unit(propsState.thumbSize)\r\n        }))\r\n\r\n        const width = computed(() => (propsState.size as number) - (propsState.thumbSize as number))\r\n\r\n        const methods = {\r\n            setLeft: (left: number) => {\r\n                state.left = Math.max(0, Math.min(width.value, left))\r\n            },\r\n            emitValue: () => {\r\n                emit.onUpdateModelValue(Number((state.left / width.value * 360).toFixed(0)))\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                document.body.addEventListener('mousemove', handler.mousemove)\r\n                document.body.addEventListener('mouseup', handler.mouseup)\r\n                if (e.target === refs.el) {\r\n                    methods.setLeft(e.offsetX - (propsState.thumbSize as number) / 2)\r\n                    methods.emitValue()\r\n                }\r\n                disabledUserSelect()\r\n                state.startX = e.clientX\r\n                state.tempLeft = state.left\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                const durX = e.clientX - state.startX!\r\n                methods.setLeft(state.tempLeft + durX)\r\n                methods.emitValue()\r\n            },\r\n            mouseup: () => {\r\n                document.body.removeEventListener('mousemove', handler.mousemove)\r\n                document.body.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            nextTick().then(() => methods.setLeft(val / 360 * width.value))\r\n        }, {immediate: true})\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-hue-slider\" onMousedown={handler.mousedown} style={styles.value as any} ref=\"el\">\r\n                    <div class=\"pl-color-hue-slider-thumb\" style={thumbStyles.value as any}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {useFunctionWrapper} from \"./useFunctionWrapper\";\r\nimport {computed, inject, PropType, provide} from 'vue';\r\n\r\nexport enum StyleMode {\r\n    fill = 'fill',\r\n    stroke = 'stroke',\r\n    text = 'text',\r\n}\r\n\r\nexport enum StyleShape {\r\n    fillet = 'fillet',\r\n    round = 'round',\r\n    square = 'square',\r\n}\r\n\r\nexport enum StyleSize {\r\n    normal = 'normal',\r\n    large = 'large',\r\n    mini = 'mini',\r\n}\r\n\r\nexport enum StyleStatus {\r\n    primary = 'primary',\r\n    success = 'success',\r\n    error = 'error',\r\n    warn = 'warn',\r\n    info = 'info',\r\n}\r\n\r\nexport const StyleProps = {\r\n    shape: {type: String as PropType<StyleShape>},                      // fillet,round,square\r\n    size: {type: String as PropType<StyleSize>},                       // normal,large,mini\r\n    status: {type: String as PropType<StyleStatus>},                     // primary,success,error,warn,info\r\n}\r\n\r\ninterface UseStyleProvideData {\r\n    shape: StyleShape,\r\n    size: StyleSize,\r\n    status?: StyleStatus,\r\n}\r\n\r\ninterface UseStyleOption {\r\n    shape?: StyleShape,\r\n    size?: StyleSize,\r\n    status?: StyleStatus,\r\n    adjust?: (data: UseStyleProvideData) => void | UseStyleProvideData\r\n}\r\n\r\nconst USE_STYLE_PROVIDER = '@@USE_STYLE_PROVIDER'\r\n\r\nexport const useStyle = useFunctionWrapper('style', (ctx, option: UseStyleOption = {}): { styleComputed: { value: UseStyleProvideData } } => {\r\n\r\n    const parent = inject(USE_STYLE_PROVIDER, null) as null | { value: UseStyleProvideData }\r\n    const defaultData = Object.assign({shape: StyleShape.fillet, size: StyleSize.normal}, option)\r\n\r\n    const styleComputed = computed(() => {\r\n        const {shape, size, status} = ctx.props\r\n        const parentData = !!parent ? parent.value : {} as any\r\n        let data: UseStyleProvideData = {\r\n            shape: shape || parentData.shape || defaultData.shape,\r\n            size: size || parentData.size || defaultData.size,\r\n            status: status || parentData.status || defaultData.status,\r\n        }\r\n        if (!!defaultData.adjust) {\r\n            data = defaultData.adjust(data) || data\r\n        }\r\n        (data as any).ctx = ctx;\r\n        (data as any).parent = parent\r\n        return data\r\n    })\r\n\r\n    provide(USE_STYLE_PROVIDER, styleComputed)\r\n\r\n    return {styleComputed}\r\n})","import {useFunctionWrapper} from \"./useFunctionWrapper\";\r\nimport {computed, inject, onBeforeUnmount, provide, reactive} from 'vue';\r\nimport {ComponentEvent} from \"./useEvent\";\r\n\r\nexport const EDIT_PROVIDER = '@@EDIT_PROVIDER'\r\n\r\nexport const EditProps = {\r\n    disabled: {type: Boolean, default: null},\r\n    readonly: {type: Boolean, default: null},\r\n    loading: {type: Boolean, default: null},\r\n    placeholder: {type: String, default: null},\r\n    customReadonly: {type: Boolean, default: null},\r\n}\r\n\r\ninterface EditProvideData {\r\n    disabled: boolean | null,\r\n    readonly: boolean | null,\r\n    loading: boolean | null,\r\n    placeholder: string | null,\r\n\r\n    onBlur?: (...args: any[]) => void,\r\n    onChange?: (...args: any[]) => void,\r\n}\r\n\r\nexport const useEdit = useFunctionWrapper(\r\n    'edit',\r\n    (ctx, option: { adjust?: (data: EditProvideData) => void | EditProvideData } = {}) => {\r\n\r\n        const parentEditComputed = inject(EDIT_PROVIDER, null) as null | { value: EditProvideData }\r\n\r\n        const editState = reactive({loading: null as null | boolean})\r\n\r\n        const editComputed = computed(() => {\r\n            const {\r\n                disabled,\r\n                readonly,\r\n                loading,\r\n                placeholder\r\n            } = ctx.props as any as EditProvideData\r\n\r\n            let data = {disabled, readonly, loading, placeholder}\r\n\r\n            if (data.disabled == null) data.disabled = !!parentEditComputed ? parentEditComputed.value.disabled : false\r\n            if (data.readonly == null) data.readonly = !!parentEditComputed ? parentEditComputed.value.readonly : false\r\n            if (data.placeholder == null) data.placeholder = !!parentEditComputed ? parentEditComputed.value.placeholder : null\r\n            if (editState.loading == null) {\r\n                data.loading = data.loading != null ? data.loading : (!!parentEditComputed ? parentEditComputed.value.loading : false)\r\n            } else {\r\n                data.loading = editState.loading\r\n            }\r\n\r\n            if (!!option.adjust) data = option.adjust(data) || data\r\n\r\n            return {\r\n                ...data,\r\n                editable: !data.disabled && !data.readonly && !data.loading\r\n            }\r\n        });\r\n\r\n        provide(EDIT_PROVIDER, editComputed)\r\n\r\n        const event = (ctx as any)._event as ComponentEvent<any> | undefined\r\n\r\n        if (!!parentEditComputed) {\r\n            if (!!parentEditComputed.value.onBlur && !!event && !!event.on.onBlur) {\r\n                event.on.onBlur(parentEditComputed.value.onBlur)\r\n                onBeforeUnmount(() => event.off.onBlur(parentEditComputed.value.onBlur!))\r\n            }\r\n            if (!!parentEditComputed.value.onChange && !!event && !!event.on.onChange) {\r\n                event.on.onChange(parentEditComputed.value.onChange)\r\n                onBeforeUnmount(() => event.off.onChange(parentEditComputed.value.onChange!))\r\n            }\r\n        }\r\n\r\n        return {\r\n            editState,\r\n            editComputed,\r\n        }\r\n    })","import {Events} from 'vue'\r\n\r\n/**\r\n * 方便创建监听原生事件的监听函数\r\n * @author  韦胜健\r\n * @date    2020/12/14 17:47\r\n */\r\nexport function createEventListener<Config extends Partial<{ [k in keyof Events]: (e: Events[k]) => void }>>(config: Config): Config {\r\n    return config\r\n}","export const nextIndex = (() => {\r\n    let index = 1500\r\n    return () => index++\r\n})()","import {ref, watch} from 'vue';\r\n\r\nexport type UseModelConfig<T = any> = {\r\n    autoEmit?: boolean | undefined,\r\n    autoWatch?: boolean | undefined,\r\n    onChange?: (newVal: T, oldVal: T) => void,\r\n}\r\n\r\n/**\r\n * 双向绑定组合函数\r\n * @author  韦胜健\r\n * @date    2020/10/19 9:21\r\n */\r\nexport function useModel<T>(\r\n    getter: () => T,\r\n    emitter: (val: T) => void,\r\n    config?: UseModelConfig<T>\r\n) {\r\n\r\n    const state = ref(getter()) as { value: T }\r\n    config = config || {}\r\n\r\n    if (config.autoWatch !== false) {\r\n        watch(getter, (val: T) => {\r\n            if (val != state.value) {\r\n                if (config!.onChange) {\r\n                    config!.onChange(val, state.value)\r\n                }\r\n                state.value = val\r\n            }\r\n        })\r\n    }\r\n\r\n    return {\r\n        get value() {\r\n            return state.value\r\n        },\r\n        set value(val: T) {\r\n            state.value = val\r\n            if (config!.autoEmit !== false) {\r\n                emitter((val))\r\n            }\r\n        }\r\n    }\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {NoticeServiceFormatOption} from \"./index\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport './notice-service.scss'\r\nimport {PropType} from 'vue';\r\nimport Icon from '../icon'\r\nimport Button from '../button'\r\n\r\nexport default designComponent({\r\n    name: 'pl-notice',\r\n    props: {\r\n        option: {type: Object as PropType<NoticeServiceFormatOption>, required: true}\r\n    },\r\n    emits: {\r\n        onClose: () => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const classes = useClass(() => [\r\n            'pl-notice',\r\n            `pl-notice-status-${props.option.status}`\r\n        ])\r\n        const styles = {zIndex: nextIndex()}\r\n        const close = () => {\r\n            emit.onClose()\r\n            !!props.option.onClose && props.option.onClose()\r\n        }\r\n        props.option.close = close\r\n        const handler = {\r\n            onClick: (e: MouseEvent) => {\r\n                !!props.option.onClick && props.option.onClick(e)\r\n            },\r\n            onClickCloseIcon: (e: MouseEvent) => {\r\n                close()\r\n            },\r\n            onMouseenter: () => {\r\n                if (!!closeTimer) {\r\n                    clearTimeout(closeTimer)\r\n                }\r\n            },\r\n            onMouseleave: () => {\r\n                !!props.option.time && (closeTimer = setTimeout(close, props.option.time))\r\n            }\r\n        }\r\n        let closeTimer: number | null = null\r\n        !!props.option.time && (closeTimer = setTimeout(close, props.option.time))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}\r\n                     style={styles}\r\n                     onMouseenter={handler.onMouseenter}\r\n                     onMouseleave={handler.onMouseleave}\r\n                     onClick={handler.onClick}>\r\n                    <div class=\"pl-notice-head\">\r\n                        {!!props.option.icon && <Icon class=\"pl-notice-head-icon\" icon={props.option.icon}/>}\r\n                        {(!!props.option.renderHead || !!props.option.title) && (\r\n                            <div class=\"pl-notice-title\">\r\n                                {!!props.option.renderHead ? props.option.renderHead() : props.option.title}\r\n                            </div>\r\n                        )}\r\n                        {!props.option.noClose && (\r\n                            <Button mode=\"text\" icon=\"el-icon-close\" class=\"pl-notice-close\" onClick={handler.onClickCloseIcon}/>\r\n                        )}\r\n                    </div>\r\n                    {(!!props.option.renderContent || !!props.option.message) && (\r\n                        <div class=\"pl-notice-content\">\r\n                            {!!props.option.renderContent ? props.option.renderContent() : props.option.message}\r\n                        </div>\r\n                    )}\r\n                    {!!props.option.renderFoot && (\r\n                        <div class=\"pl-notice-foot\">\r\n                            {props.option.renderFoot()}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {NoticeServiceDirection, NoticeServiceFormatOption} from \"./index\";\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport {nextTick, reactive} from 'vue';\r\nimport Notice from \"./notice\";\r\nimport List from '../list'\r\nimport Item from '../item'\r\n\r\nexport default designComponent({\r\n    name: 'pl-notice-container',\r\n    props: {\r\n        horizontal: {type: String, required: true},\r\n        vertical: {type: String, required: true},\r\n        duration: {type: String, default: \"30px\"},\r\n    },\r\n    setup({props}) {\r\n        const classes = useClass(() => [\r\n            'pl-notice-container',\r\n            `pl-notice-container-${props.horizontal}-${props.vertical}`\r\n        ])\r\n        const state = reactive({\r\n            options: [] as NoticeServiceFormatOption[]\r\n        })\r\n        const refs = useRefList<{ option: NoticeServiceFormatOption }>()\r\n        const styles = {padding: props.duration}\r\n        const utils = {\r\n            close: (i: number) => {\r\n                state.options.splice(i, 1)\r\n            }\r\n        }\r\n        return {\r\n            refer: {\r\n                props,\r\n                getNotice: async (option: NoticeServiceFormatOption) => {\r\n                    state.options.push(option)\r\n                    await nextTick()\r\n                    const messages = refs.filter(Boolean)\r\n                    for (let i = 0; i < messages.length; i++) {\r\n                        const message = messages[i];\r\n                        if (message.option === option) {\r\n                            return message\r\n                        }\r\n                    }\r\n                    return null\r\n                },\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles}>\r\n                    <List direction={props.horizontal === NoticeServiceDirection.start ? 'left' : 'right'}>\r\n                        <Item key=\"placeholder\"/>\r\n                        {state.options.map((option, index) =>\r\n                            <Item key={option.id}>\r\n                                <Notice option={option}\r\n                                        ref={(proxy: any) => refs[index] = proxy}\r\n                                        onClose={() => utils.close(index)}\r\n                                />\r\n                            </Item>\r\n                        )}\r\n                    </List>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {StyleStatus} from \"../../use/useStyle\";\r\nimport {registryRootService} from \"../root/registryRootService\";\r\nimport {RequireFormat, SimpleFunction, VNodeChild} from \"../../shims\";\r\nimport ManagerComponent from './notice-manager'\r\nimport {App} from 'vue';\r\nimport {STATUS} from \"../../utils/constant\";\r\nimport {getServiceWithoutContext} from \"../../utils/getServiceWithoutContext\";\r\n\r\nexport enum NoticeServiceDirection {\r\n    start = 'start',\r\n    end = 'end',\r\n}\r\n\r\nexport interface NoticeServiceOption {\r\n    title?: string | null,                              // 标题\r\n    message?: string,                                   // 通知消息\r\n    time?: number | null,                               // 停留时间\r\n    status?: StyleStatus,                               // 状态\r\n    icon?: string,                                      // 显示图标\r\n    noClose?: boolean,                                  // 不显示关闭按钮\r\n    renderHead?: () => VNodeChild,                      // 自定义头部内容\r\n    renderContent?: () => VNodeChild,                   // 自定义内容\r\n    renderFoot?: () => VNodeChild,                      // 自定义底部内容\r\n    onClick?: SimpleFunction,                           // 点击事件处理函数\r\n    onClose?: SimpleFunction,                           // 关闭处理函数\r\n    vertical?: NoticeServiceDirection,                  // 纵向位置\r\n    horizontal?: NoticeServiceDirection,                // 横向位置\r\n}\r\n\r\nexport type NoticeServiceFormatOption = RequireFormat<NoticeServiceOption, 'time' | 'status' | 'vertical' | 'horizontal'> & {\r\n    id: string,\r\n    close: () => void,\r\n}\r\n\r\n/**\r\n * 格式化消息配置参数\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:21\r\n */\r\nconst formatOption = (() => {\r\n    let idCount = 0\r\n    return (option: NoticeServiceOption): NoticeServiceFormatOption => {\r\n\r\n        const status = option.status === null ? null : (option.status || 'primary')\r\n\r\n        return Object.assign(option as NoticeServiceFormatOption, {\r\n            title: option.title === null ? null : (option.title || '消息提示'),\r\n            id: `message_${idCount++}`,\r\n            time: option.time === null ? null : (option.time || 3 * 1000),\r\n            status,\r\n            icon: option.icon || (!status ? null : STATUS[status].icon),\r\n            horizontal: option.horizontal || NoticeServiceDirection.end,\r\n            vertical: option.vertical || NoticeServiceDirection.start,\r\n            close: () => undefined,\r\n        })\r\n    }\r\n})()\r\n\r\nexport interface NoticeServiceFunction {\r\n    (message: string | NoticeServiceOption, option?: NoticeServiceOption): void\r\n}\r\n\r\nexport type NoticeService = NoticeServiceFunction & { [k in 'primary' | 'success' | 'warn' | 'error' | 'info']: NoticeServiceFunction }\r\n\r\nconst getNoticeService = registryRootService(\r\n    'notice',\r\n    ManagerComponent,\r\n    (getManager) => {\r\n        const service: NoticeServiceFunction = (message: string | NoticeServiceOption, option?: NoticeServiceOption): NoticeServiceFormatOption => {\r\n            let o = typeof message === \"object\" ? message : {message}\r\n            if (!!option) {\r\n                Object.assign(o, option)\r\n            }\r\n            const fo = formatOption(o);\r\n            getManager().then(manager => manager.getContainer(fo).then(container => container.getNotice(fo)))\r\n            return fo\r\n        };\r\n\r\n        return Object.assign(service, [\r\n            'lite',\r\n            'dark',\r\n            'primary',\r\n            'success',\r\n            'warn',\r\n            'error',\r\n            'info',\r\n        ].reduce((prev: any, status: any) => {\r\n            prev[status] = function (message: string | NoticeServiceOption, option?: NoticeServiceOption) {\r\n                const o = typeof message === \"object\" ? message : {message}\r\n                if (!!option) {\r\n                    Object.assign(o, option)\r\n                }\r\n                o.status = status\r\n                return service(o)\r\n            }\r\n            return prev\r\n        }, {})) as NoticeService\r\n    }\r\n)\r\n\r\nexport const $$notice = getServiceWithoutContext(getNoticeService)\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            beforeCreate(): void {\r\n                Object.defineProperty(this, '$notice', {\r\n                    get() {\r\n                        return getNoticeService(this)\r\n                    },\r\n                })\r\n            }\r\n        })\r\n    },\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {NoticeServiceDirection} from \"./index\";\r\nimport {nextTick, reactive} from 'vue';\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport Container from \"./notice-container\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-notice-manager',\r\n    setup() {\r\n\r\n        const state = reactive({\r\n            containers: [\r\n                {\r\n                    horizontal: NoticeServiceDirection.end,\r\n                    vertical: NoticeServiceDirection.start,\r\n                }] as { horizontal: NoticeServiceDirection, vertical: NoticeServiceDirection }[]\r\n        })\r\n\r\n        const refs = useRefList<typeof Container.use.class>()\r\n\r\n        const getContainer = async (config: { horizontal: NoticeServiceDirection, vertical: NoticeServiceDirection }): Promise<typeof Container.use.class> => {\r\n            for (let i = 0; i < refs.length; i++) {\r\n                const ref = refs[i];\r\n                if (ref.props.horizontal === config.horizontal && ref.props.vertical === config.vertical) {\r\n                    return ref\r\n                }\r\n            }\r\n            state.containers.push(config);\r\n            await nextTick()\r\n            return getContainer(config)\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                name: 'I am notice controller',\r\n                getContainer,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-notice-manager\">\r\n                    {state.containers.map((container, index) =>\r\n                        <Container horizontal={container.horizontal}\r\n                                   vertical={container.vertical}\r\n                                   ref={(proxy: any) => refs[index] = proxy}/>)}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {reactive, UnwrapRef} from 'vue'\r\n\r\n/**\r\n * 给mark对象使用，用来创建管理flag的对象\r\n * @author  韦胜健\r\n * @date    2020/11/27 11:38\r\n */\r\nexport function createFlagManager<T = boolean>() {\r\n    return {\r\n        state: reactive({\r\n            map: {} as { [k: string]: T }\r\n        }),\r\n        get(key: string) {\r\n            return this.state.map[key]\r\n        },\r\n        set(key: string, val: UnwrapRef<T>) {\r\n            /*if (this.state.map.hasOwnProperty(key)) {\r\n                this.state.map[key] = val\r\n            } else {\r\n                set(this.state.map, key, val)\r\n            }*/\r\n            this.state.map[key] = val\r\n        },\r\n        getActiveKeys(): string[] {\r\n            const keys: string[] = []\r\n            for (let key in this.state.map) {\r\n                if (!!this.state.map[key]) {\r\n                    keys.push(key)\r\n                }\r\n            }\r\n            return keys\r\n        }\r\n    }\r\n}","import {CascadeNode} from \"./CascadeNode\";\r\nimport {reactive} from \"vue\";\r\nimport {createKeyHandler} from \"../../../utils/createKeyHandler\";\r\nimport {createFlagManager} from \"../../../utils/createFlagManager\";\r\n\r\nconst generator = createKeyHandler('cascade_node')\r\n\r\nexport interface CascadeConfig {\r\n    nodeDisabled?: (node: CascadeNode) => boolean,\r\n    isLeaf?: (node: CascadeNode) => boolean,\r\n    lazy?: boolean,\r\n    getChildren?: (node: CascadeNode, cb: (...args: any[]) => void) => void,\r\n    filterMethod?: (filterData: CascadeNode[], filterText: string) => boolean\r\n\r\n    labelField: string,\r\n    keyField: string,\r\n    childrenField: string,\r\n}\r\n\r\nexport class CascadeMark {\r\n\r\n    constructor(public config: () => CascadeConfig, public ctxState: () => {\r\n        expandKeys: string[],\r\n        filterText: string | undefined,\r\n    }) {}\r\n\r\n    selfGetter = () => this;\r\n\r\n    node = {\r\n        state: reactive({\r\n            map: {} as { [k: string]: CascadeNode }\r\n        }),\r\n        get: (\r\n            data: any,\r\n            level: number,\r\n            parentRef: () => (CascadeNode | null),\r\n        ): CascadeNode => {\r\n            const key = generator(data, this.config().keyField)\r\n            let node: CascadeNode = this.node.state.map[key]\r\n            if (!!node) {\r\n                if (node.data != data) {\r\n                    node.data = data\r\n                }\r\n                node.level = level\r\n                node.parentRef = parentRef\r\n            } else {\r\n                node = new CascadeNode(\r\n                    key,\r\n                    data,\r\n                    level,\r\n                    this.config,\r\n                    parentRef,\r\n                    this.selfGetter,\r\n                    this.ctxState,\r\n                )\r\n                this.node.state.map[key] = node\r\n            }\r\n            return node\r\n        },\r\n        getList: (list: any[] | undefined, level: number, parentRef: () => (CascadeNode | null)): CascadeNode[] => {\r\n            if (!list) return []\r\n            return list.map(item => this.node.get(item, level, parentRef))\r\n        }\r\n    }\r\n\r\n    loading = createFlagManager()\r\n    loaded = createFlagManager()\r\n\r\n}","import {defer} from \"../../utils/defer\";\r\nimport {$$message} from \"../message\";\r\n\r\nexport type FileServiceSingleFile = File & { calcSize: number }\r\nexport type FileServiceValidator = (file: FileServiceSingleFile) => boolean\r\n\r\nexport type FileServiceChooseFileConfig = {\r\n    multiple?: boolean,                 // 是否多选\r\n    accept?: string,                    // 选择的文件类型， input组件的accept属性值\r\n    validator?: FileServiceValidator,   // 自定义校验函数\r\n    max?: number,                       // 最大文件大小\r\n}\r\n\r\nexport type FileServiceUploadErrorEvent = Error & {\r\n    status: number,\r\n    method: string,\r\n    url: string,\r\n    config: FileServiceUploadConfig,\r\n}\r\n\r\nexport type FileServiceUploadConfig = {\r\n    action: string,                             // 上传地址\r\n    file: File | File[],                        // 上传的文件\r\n    filename: string,                           // 上传文件接收的文件名\r\n    data?: Record<string, string>,               // 上传的额外数据\r\n    headers?: Record<string, string>,           // 请求头\r\n    withCredentials?: boolean,                  // 是否带cookies凭证\r\n    onProgress?: (percent: number, e: ProgressEvent) => void,\r\n    onSuccess?: (data: string | Record<string, string>) => void,\r\n    onError?: (e: FileServiceUploadErrorEvent | ProgressEvent) => void,\r\n}\r\n\r\nexport const FileServiceDefaultAccept = {\r\n    // image: 'image/gif, image/jpeg, image/png, image/jpg',\r\n    image: 'bmp,jpg,jpeg,png,tif,gif,pcx,tga,exif,fpx,svg,psd,cdr,pcd,dxf,ufo,eps,ai,raw,WMF,webp,avif'.split(',').map(i => `image/${i}`).join(', '),\r\n    excel: 'application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\r\n} as Record<string, string>\r\n\r\nexport function createFileService() {\r\n\r\n    /**\r\n     * 选择文件\r\n     * @author  韦胜健\r\n     * @date    2021/1/1 17:03\r\n     */\r\n    const chooseFile = (config?: FileServiceChooseFileConfig) => {\r\n        config = config || {}\r\n        const input = getInput()\r\n\r\n        /*multiple*/\r\n        if (config.multiple) {\r\n            input.setAttribute('multiple', 'multiple')\r\n        } else {\r\n            input.removeAttribute('multiple')\r\n        }\r\n        /*accept*/\r\n        if (!!config.accept) {\r\n            const defaultInputAccept = FileServiceDefaultAccept[config.accept]\r\n            input.setAttribute('accept', defaultInputAccept || config.accept)\r\n        } else {\r\n            input.removeAttribute('accept')\r\n        }\r\n        const dfd = defer<FileServiceSingleFile | FileServiceSingleFile[]>()\r\n\r\n        if (!!input.__change) {\r\n            input.value = null as any\r\n            input.removeEventListener('change', input.__change)\r\n        }\r\n        input.__change = (e) => {\r\n            const targetFiles = (e as any).target.files as FileServiceSingleFile[]\r\n            const files = []\r\n            for (let i = 0; i < targetFiles.length; i++) {\r\n                const file = targetFiles[i];\r\n                file.calcSize = Number((file.size / (1024 * 1024)).toFixed(2))\r\n                if (!!config!.validator && !config!.validator(file)) return\r\n                if (!!config!.max && file.calcSize > config!.max) {\r\n                    return $$message.error(`[${file.name}]大小为${file.calcSize}MB，超过最大限制${config!.max}MB`, {time: 5000})\r\n                }\r\n                files.push(file)\r\n            }\r\n            dfd.resolve(config!.multiple ? files : files[0])\r\n        }\r\n        input.addEventListener('change', input.__change)\r\n        input.click()\r\n\r\n        return dfd.promise\r\n    }\r\n\r\n    /**\r\n     * 选择tupiuan\r\n     * @author  韦胜健\r\n     * @date    2021/1/1 17:03\r\n     */\r\n    const chooseImage = (multiple?: boolean) => {\r\n        const config: FileServiceChooseFileConfig = {accept: \"image\", multiple}\r\n        return chooseFile(config)\r\n    }\r\n\r\n    /**\r\n     * 读取文件为base64字符串\r\n     * @author  韦胜健\r\n     * @date    2021/1/1 17:04\r\n     */\r\n    const readAsDataURL = (file: File) => {\r\n        const dfd = defer<string | ArrayBuffer | null>()\r\n        let fr = new FileReader()\r\n        fr.onloadend = e => dfd.resolve(e.target!.result)\r\n        fr.onerror = () => dfd.reject()\r\n        fr.readAsDataURL(file)\r\n        return dfd.promise\r\n    }\r\n\r\n    /**\r\n     * 上传文件\r\n     * @author  韦胜健\r\n     * @date    2021/1/1 17:07\r\n     */\r\n    const upload = (uploadConfig: FileServiceUploadConfig) => {\r\n        const xhr = ('XMLHttpRequest' in window ? new XMLHttpRequest() : new (Window as any).ActiveXObject('Microsoft.XMLHTTP')) as XMLHttpRequest\r\n        xhr.open('post', uploadConfig.action, true)\r\n\r\n        if (!!xhr.upload) {\r\n            xhr.upload.addEventListener('progress', (e) => {\r\n                const percent = Number((e.loaded / e.total * 100).toFixed(2))\r\n                !!uploadConfig.onProgress && uploadConfig.onProgress(percent, e)\r\n            })\r\n        }\r\n\r\n        if (uploadConfig.withCredentials != null && 'withCredentials' in xhr) {\r\n            xhr.withCredentials = uploadConfig.withCredentials\r\n        }\r\n\r\n        if (!!uploadConfig.headers)\r\n            Object.entries(uploadConfig.headers)\r\n                .forEach(([key, value]) => xhr.setRequestHeader(key, value))\r\n\r\n        xhr.onerror = (e) => !!uploadConfig.onError && uploadConfig.onError(e)\r\n        xhr.onload = () => {\r\n            if (xhr.status < 200 || xhr.status > 300) {\r\n                !!uploadConfig.onError && uploadConfig.onError(getError(uploadConfig, xhr))\r\n            } else {\r\n                !!uploadConfig.onSuccess && uploadConfig.onSuccess(getResponseBody(xhr))\r\n            }\r\n        }\r\n        const formData = new FormData()\r\n        if (!!uploadConfig.data) Object.entries(uploadConfig.data).forEach(([key, value]) => formData.append(key, value))\r\n        if (Array.isArray(uploadConfig.file)) {\r\n            uploadConfig.file.forEach(f => formData.append(uploadConfig.filename, f))\r\n        } else {\r\n            formData.append(uploadConfig.filename, uploadConfig.file);\r\n        }\r\n        xhr.send(formData)\r\n        return xhr\r\n    }\r\n\r\n    return {\r\n        chooseFile,\r\n        chooseImage,\r\n        readAsDataURL,\r\n        upload,\r\n    }\r\n}\r\n\r\nconst getInput = (() => {\r\n    let input: HTMLInputElement & { __change?: (e: Event) => void };\r\n    return () => {\r\n        if (!input) {\r\n            input = document.createElement('input')\r\n            input.setAttribute('type', 'file')\r\n            input.style.display = 'none'\r\n            document.body.appendChild(input)\r\n        }\r\n        return input\r\n    }\r\n})();\r\n\r\nfunction getError(config: FileServiceUploadConfig, xhr: XMLHttpRequest) {\r\n    let message: string\r\n    console.log(xhr)\r\n    if (!!xhr.response) {\r\n        message = xhr.response.error || xhr.response\r\n    } else if (!!xhr.responseText) {\r\n        message = xhr.responseText\r\n    } else {\r\n        message = `file to post ${config.action} ${xhr.status}`\r\n    }\r\n\r\n    const error = new Error(message) as FileServiceUploadErrorEvent\r\n    error.status = xhr.status\r\n    error.method = 'post'\r\n    error.url = config.action\r\n    error.config = config\r\n\r\n    return error\r\n}\r\n\r\nfunction getResponseBody(xhr: XMLHttpRequest) {\r\n    let result = xhr.responseText || xhr.response\r\n    if (!result) return result\r\n    try {\r\n        return JSON.parse(result)\r\n    } catch (e) {\r\n        return result\r\n    }\r\n}\r\n\r\nexport const $$file = createFileService()","import {createDefaultService} from \"../../root/createDefaultService\";\r\nimport {nextTick, reactive, ref, computed} from 'vue';\r\nimport {PopperServiceComponentOption} from \"./utils\";\r\nimport {createCounter} from \"../../../utils/createCounter\";\r\nimport {PlPopper} from \"../popper\";\r\n\r\n/**\r\n * 生成id的计数器，每次show的时候获取一个新的计数器，一遍令render重新渲染\r\n * @author  韦胜健\r\n * @date    2020/11/27 9:31\r\n */\r\nconst counter = createCounter('popper-service-component')\r\n\r\n/**\r\n * 合并attrs\r\n * @author  韦胜健\r\n * @date    2020/11/27 9:31\r\n */\r\nconst mergeAttrs = (() => {\r\n    const LISTENER_MATCH_REG = /on[A-Z]/\r\n    return (config: { attrs: any, defaultAttrs: any, agent: any }) => {\r\n        const {agent} = config\r\n        let attrs = config.attrs || {}\r\n        let defaultAttrs = config.defaultAttrs || {}\r\n        if (typeof attrs === \"function\") {attrs = attrs()}\r\n        if (typeof defaultAttrs === \"function\") {defaultAttrs = defaultAttrs()}\r\n\r\n        const result = {} as any\r\n        Object.keys({...attrs, ...defaultAttrs}).forEach(key => {\r\n            if (LISTENER_MATCH_REG.test(key)) {\r\n                result[key] = (...args: any[]) => {\r\n                    !!(attrs as any)[key] && (attrs as any)[key].apply(agent, args);\r\n                    !!(defaultAttrs as any)[key] && (defaultAttrs as any)[key].apply(agent, args);\r\n                }\r\n            } else {\r\n                if (key in attrs) {\r\n                    result[key] = attrs[key]\r\n                } else {\r\n                    result[key] = defaultAttrs[key]\r\n                }\r\n            }\r\n        })\r\n        return result\r\n    }\r\n})();\r\n\r\n/**\r\n * 创建一个基于 pl-popper 的service 组件\r\n * @author  韦胜健\r\n * @date    2020/11/27 9:31\r\n */\r\nexport function createPopperServiceComponent(name: string) {\r\n    return createDefaultService({\r\n        name,\r\n        setup(option: PopperServiceComponentOption) {\r\n\r\n            /*当前是否显示/隐藏*/\r\n            const isShow = ref(false)\r\n            /*当前是否已经显示/隐藏*/\r\n            const isOpen = ref(false)\r\n\r\n            const state = reactive({\r\n                option,                                 // 当前服务的option\r\n                renderKey: counter(),                   // 用于刷新render的key\r\n            })\r\n\r\n            /**\r\n             * 开始服务\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:32\r\n             */\r\n            async function service(option: PopperServiceComponentOption) {\r\n                let newKey = true\r\n                if (!option.getService || option.getService !== getRefer) {\r\n                    /*clear*/\r\n                    state.option.getService = undefined\r\n                    /*init*/\r\n                    state.option = option\r\n                    state.option.getService = getRefer\r\n                    state.renderKey = counter()\r\n                    newKey = false\r\n                    await nextTick()\r\n                }\r\n                await show(newKey)\r\n            }\r\n\r\n            /**\r\n             * 显示服务\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:33\r\n             * @param   newKey          默认情况下每次show之前都应该重新初始化内容，避免不必要的bug\r\n             */\r\n            async function show(newKey = true) {\r\n                if (newKey) {\r\n                    state.renderKey = counter()\r\n                    await nextTick()\r\n                }\r\n                isShow.value = true\r\n            }\r\n\r\n            /**\r\n             * 隐藏服务\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:33\r\n             */\r\n            function hide() {isShow.value = false}\r\n\r\n            /**\r\n             * service本身暴露的对象\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:39\r\n             */\r\n            const refer = {state, isShow, isOpen, service, show, hide,}\r\n\r\n            /**\r\n             * service本身暴露对象的引用，保存在option.getService中，用于标记service与option的绑定关系\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:39\r\n             */\r\n            const getRefer = () => refer\r\n\r\n            /**\r\n             * 合并后的popper属性\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:40\r\n             */\r\n            const popperAttrs = computed(() => {\r\n                let {defaultOption: {defaultPopperAttrs}, serviceOption: {popperAttrs}} = state.option\r\n                return mergeAttrs({agent: refer, attrs: popperAttrs, defaultAttrs: defaultPopperAttrs,})\r\n            })\r\n\r\n            /**\r\n             * 合并之后的render属性\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:40\r\n             */\r\n            const renderAttrs = computed(() => {\r\n                let {defaultOption: {defaultRenderAttrs}, serviceOption: {renderAttrs}} = state.option\r\n                return {\r\n                    ...mergeAttrs({agent: refer, attrs: renderAttrs, defaultAttrs: defaultRenderAttrs,}),\r\n                    key: state.renderKey,\r\n                }\r\n            })\r\n\r\n            const handler = {\r\n                onClickBody: () => {\r\n                    if (state.option.serviceOption.hideOnClickBody !== false) {\r\n                        refer.hide()\r\n                    }\r\n                },\r\n            }\r\n\r\n            return {\r\n                refer,\r\n                render: () => (\r\n                    <PlPopper\r\n                        v-model={isShow.value}\r\n                        onClickBody={handler.onClickBody}\r\n                        popperAttrs={{['service-name']: name}}\r\n                        {...{\r\n                            transition: 'pl-transition-scale',\r\n                            noContentPadding: true,\r\n                            trigger: 'manual',\r\n                            reference: state.option.serviceOption.reference,\r\n                            'onUpdate:open': (val: boolean) => isOpen.value = val,\r\n                            ...popperAttrs.value,\r\n                        }}\r\n                        v-slots={{\r\n                            popper: () => state.option.defaultOption.render(renderAttrs.value),\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        },\r\n    })\r\n}","import {ComponentPublicInstance, computed, reactive} from 'vue';\r\nimport {registryRootService, RootServiceScope} from \"../../root/registryRootService\";\r\nimport {createDefaultManager} from \"../../root/createDefaultManager\";\r\nimport {createPopperServiceComponent} from \"./createPopperServiceComponent\";\r\nimport {CreateAgentGetterOption, PopperAgent, PopperServiceComponentOption, SpecificPopperServiceOption} from './utils';\r\n\r\n/**\r\n * 创建一个获取popper agent的函数\r\n * @author  韦胜健\r\n * @date    2020/11/26 21:15\r\n */\r\nexport function createAgentGetter(defaultOption: CreateAgentGetterOption, scope = RootServiceScope.root) {\r\n\r\n    /**\r\n     * 创建一个生成service的函数\r\n     * @author  韦胜健\r\n     * @date    2020/11/27 9:30\r\n     */\r\n    function create(ins: ComponentPublicInstance) {\r\n        const name = defaultOption.name\r\n        /*---------------------------------------Specific Popper Service-------------------------------------------*/\r\n        const popperServiceGetter = registryRootService(\r\n            name,\r\n            createDefaultManager(\r\n                `pl-popper-service-${name}-manager`,\r\n                createPopperServiceComponent(`pl-popper-service-${name}`)\r\n            ),\r\n            (getManager) => {\r\n                return (serviceOption: SpecificPopperServiceOption): PopperAgent => {\r\n\r\n                    const option: PopperServiceComponentOption = {\r\n                        defaultOption,\r\n                        serviceOption,\r\n                        getService: undefined,\r\n                    }\r\n\r\n                    /*---------------------------------------create popper agent-------------------------------------------*/\r\n                    const state = reactive({option})\r\n                    const service = computed(() => !state.option.getService ? null : state.option.getService())\r\n                    const isShow = computed(() => !!service.value && service.value.isShow.value)\r\n                    const isOpen = computed(() => !!service.value && service.value.isShow.value)\r\n                    const agent = reactive({\r\n                        state,\r\n                        isShow,\r\n                        isOpen,\r\n                        service,\r\n                        show: () => {!!agent.service ? agent.service.show() : getManager().then(manager => manager.service(option))},\r\n                        hide: () => {!!agent.service && agent.service.hide()},\r\n                        toggle: () => isShow.value ? agent.hide() : agent.show(),\r\n                        destroy: () => {\r\n                            agent.hide()\r\n                            state.option.getService = undefined\r\n                        }\r\n                    })\r\n                    return agent\r\n                }\r\n            },\r\n        )\r\n\r\n        return popperServiceGetter(ins)\r\n    }\r\n\r\n    /*缓存 service，scope为缓存的作用域*/\r\n    const cacheMap = new WeakMap<ComponentPublicInstance, ReturnType<typeof create>>()\r\n\r\n    return (ins: ComponentPublicInstance) => {\r\n        const cacheKey = scope === RootServiceScope.ins ? ins : ins.$root!\r\n        let service = cacheMap.get(cacheKey)\r\n        if (!!service) {\r\n            return service\r\n        }\r\n        service = create(ins)\r\n        cacheMap.set(cacheKey, service)\r\n        return service\r\n    }\r\n}","import {ComponentPlugin} from \"../shims\";\r\nimport {App} from 'vue';\r\n\r\nconst installMap = new WeakMap<App, ComponentPlugin[]>()\r\n\r\nexport function installPlugin(app: App, plugins: ComponentPlugin | ComponentPlugin[]) {\r\n    /*已经安装过的插件*/\r\n    let installedPlugins = installMap.get(app)\r\n    if (!installedPlugins) {\r\n        /*这个app第一次注册*/\r\n        installedPlugins = []\r\n        installMap.set(app, installedPlugins)\r\n    }\r\n    (Array.isArray(plugins) ? plugins : [plugins]).forEach(plugin => {\r\n        if (installedPlugins!.indexOf(plugin) === -1) {\r\n            installedPlugins!.push(plugin)// 这句代码一定要在app.use面前\r\n            app.use(plugin)\r\n        }\r\n    });\r\n}","import {computed, PropType, reactive, watch} from \"vue\";\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport './button.scss'\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {ButtonModeProvider} from \"../button-group/button-group\";\r\nimport {SimpleFunction} from \"../../shims\";\r\nimport {throttle} from 'plain-utils/utils/throttle'\r\nimport {unit} from 'plain-utils/string/unit'\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport Icon from '../icon'\r\nimport Loading from '../loading'\r\n\r\nconsole.log('load button component')\r\n\r\nexport const PlButton = designComponent({\r\n    name: 'pl-button',\r\n    directives: {ClickWave},\r\n    props: {\r\n        mode: {type: String, default: 'fill'},                  // fill,stroke,text\r\n        label: {type: [String, Object]},                        // 按钮文本\r\n        width: {type: [String, Number]},                        // 按钮宽度\r\n        icon: {type: String},                                   // 按钮图标\r\n        active: {type: Boolean},                                // 按钮是否高亮\r\n        noPadding: {type: Boolean},                             // 按钮是否无边距\r\n        block: {type: Boolean},                                 // 块级元素\r\n        throttleClick: {type: [Boolean, Number]},               // click节流\r\n        asyncHandler: {type: Function as PropType<(e: MouseEvent) => void>},    // 异步处理函数，会自动开启关闭loading状态\r\n\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        /*native*/\r\n        type: {type: String, default: 'button'},\r\n        nativeAttrs: {type: Object},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n        const {propsState} = useProps(props, {\r\n            width: useProps.NUMBER,\r\n            label: useProps.PROMISE,\r\n        })\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        const {editState, editComputed} = useEdit()\r\n        const buttonGroup = ButtonModeProvider.inject()\r\n        const otherComputed = computed(() => ({\r\n            mode: !!buttonGroup ? buttonGroup.value.mode : props.mode\r\n        }))\r\n        const state = reactive({\r\n            handleClick: null as SimpleFunction | null,\r\n            handleClickInner: async (e: MouseEvent) => {\r\n                e.stopPropagation()\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                if (!props.asyncHandler) {\r\n                    return emit.onClick(e)\r\n                }\r\n                editState.loading = true\r\n                try {\r\n                    await props.asyncHandler(e)\r\n                } catch (e) {\r\n                    console.error(e)\r\n                } finally {\r\n                    editState.loading = null\r\n                }\r\n            },\r\n        })\r\n\r\n        watch(\r\n            () => props.throttleClick,\r\n            (val) => {\r\n                if (!val) {\r\n                    return state.handleClick = state.handleClickInner\r\n                }\r\n                if (val === true) {\r\n                    val = 1000\r\n                }\r\n                state.handleClick = throttle(state.handleClickInner, val, {trailing: false})\r\n            },\r\n            {immediate: true}\r\n        )\r\n\r\n        const classes = computed(() => ([\r\n            'pl-button',\r\n            'plain-click-node',\r\n\r\n            `pl-button-mode-${otherComputed.value.mode}`,\r\n            `pl-button-status-${styleComputed.value.status}`,\r\n            `pl-button-shape-${styleComputed.value.shape}`,\r\n            `pl-button-size-${styleComputed.value.size}`,\r\n\r\n            {\r\n                'pl-button-icon': !!props.icon,\r\n                'pl-button-active': !!props.active,\r\n                'pl-button-noPadding': !!props.noPadding,\r\n\r\n                'pl-button-loading': !!editComputed.value.loading,\r\n                'pl-button-has-icon': !!props.icon,\r\n                'pl-button-block': !!props.block,\r\n                'pl-button-disabled': !!editComputed.value.disabled,\r\n                'pl-button-icon-only': !!props.icon && !propsState.label,\r\n            },\r\n        ]))\r\n\r\n        const styles = useStyles(style => {\r\n            style.width = unit(propsState.width)\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <button\r\n                        style={styles.value}\r\n                        class={classes.value}\r\n                        type={props.type as any}\r\n                        disabled={editComputed.value.disabled!}\r\n                        v-click-wave={\"large\"}\r\n                        {...{\r\n                            ...(props.nativeAttrs || {}),\r\n                            onClick: state.handleClick!,\r\n                        }}\r\n                    >\r\n                        {!!editComputed.value.loading && <Loading type=\"gamma\"/>}\r\n                        {\r\n                            slots.default(<>\r\n                                {(!!props.icon && !editComputed.value.loading) ? <Icon icon={props.icon}/> : null}\r\n                                {propsState.label ? <span>{propsState.label}</span> : null}\r\n                            </>)\r\n                        }\r\n                    </button>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {PlIcon} from './icon'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlIcon)","/**\r\n * 创建一个用来管理key的对象\r\n * @author  韦胜健\r\n * @date    2020/11/27 11:38\r\n */\r\nexport function createKeyHandler(prefix: string) {\r\n    const map = new WeakMap<any, string>()\r\n    let count = 1\r\n    return (obj: any, keyField?: string | null): string => {\r\n        if (!!keyField) {\r\n            return obj[keyField]\r\n        }\r\n        let key = map.get(obj)\r\n        if (!key) {\r\n            key = `${prefix}_${count++}`\r\n            map.set(obj, key)\r\n        }\r\n        return String(key)\r\n    }\r\n}","import {hsv2rgb, parseHexChannel, rgb2hex, rgb2hsv} from \"./ColorUtils\";\r\n\r\nexport enum ColorFormat {\r\n    hex = 'hex',\r\n    rgb = 'rgb'\r\n}\r\n\r\nexport class Color {\r\n\r\n    red = 0                                             // 红\r\n    green = 0                                           // 绿\r\n    blue = 0                                            // 蓝\r\n\r\n    hue = 0                                             // 色相\r\n    saturation = 0                                      // 饱和度\r\n    val = 0                                             // 明亮度\r\n\r\n    alpha = 0                                           // 透明度\r\n    hex = ''                                            // 十六进制值\r\n    enableAlpha = false                                 // 是否启用透明度\r\n    format: ColorFormat = ColorFormat.hex               // 格式\r\n\r\n    _value?: string;                                    // 当前值，hex或者rgb字符串\r\n\r\n    /*当前rgb颜色值，如果启用透明度，则为rgba*/\r\n    get rgbColor(): string | undefined {\r\n        if (!this.red && !this.green && !this.blue) {\r\n            return undefined\r\n        }\r\n        return `rgb${this.enableAlpha ? 'a' : ''}(${this.red},${this.green},${this.blue}${this.enableAlpha ? ',' + (this.alpha / 100).toFixed(2) : ''})`\r\n    }\r\n\r\n    /*当前颜色，可能是rgb，也可能是hex*/\r\n    get currentColor(): string | undefined {\r\n        /*如果是带透明度的，强制使用rgb格式*/\r\n        return this.enableAlpha || this.format === 'rgb' ? this.rgbColor : this.hex\r\n    }\r\n\r\n    /*当前颜色值*/\r\n    get color(): string | undefined {\r\n        if (this._value == null) return undefined\r\n        return this.currentColor\r\n    }\r\n\r\n    constructor(value: string, enableAlpha: boolean, format: ColorFormat) {\r\n        if (format != null) {\r\n            this.format = format\r\n        }\r\n        if (enableAlpha != null) {\r\n            this.enableAlpha = enableAlpha\r\n        }\r\n\r\n        this.updateByString(value, true, enableAlpha)\r\n    }\r\n\r\n    /**\r\n     * 根据值更新color信息\r\n     * @author  韦胜健\r\n     * @date    2020/4/4 21:57\r\n     */\r\n    public setValue(value: string): void {\r\n        this.updateByString(value, false)\r\n    }\r\n\r\n    /**\r\n     * 根据新值更新当前color信息\r\n     * @author  韦胜健\r\n     * @date    2020/4/4 12:10\r\n     */\r\n    public updateByString(value: string, needInitializedEnableAlpha = false, enableAlpha?: boolean): void {\r\n        this._value = value\r\n        if (value == null) {\r\n            this.hue = 0\r\n            this.saturation = 0\r\n            this.val = 100\r\n            this.alpha = 100\r\n            return\r\n        }\r\n        /*如果输入值是rgb格式*/\r\n        if (value.indexOf('rgb') !== -1) {\r\n            const parts = value.replace(/rgba|rgb|\\(|\\)/gm, '').split(/\\s|,/g).filter((val) => val !== '').map((val, index) => index > 2 ? parseFloat(val) : parseInt(val, 10));\r\n            if (parts.length === 4) {\r\n                this.alpha = Math.floor(parseFloat(`${parts[3]}`) * 100);\r\n                needInitializedEnableAlpha && (enableAlpha == null) && (this.enableAlpha = true)\r\n            } else if (parts.length === 3) {\r\n                this.alpha = 100;\r\n                needInitializedEnableAlpha && (enableAlpha == null) && (this.enableAlpha = false)\r\n            }\r\n            if (parts.length >= 3) {\r\n                this.setRgb(parts[0], parts[1], parts[2])\r\n            }\r\n            return\r\n        }\r\n\r\n        /*如果是16进制格式*/\r\n        if (value.indexOf('#') !== -1) {\r\n            const hex = value.replace('#', '').trim();\r\n            if (hex.length === 8) {\r\n                this.alpha = Math.floor(parseHexChannel(hex.substring(6)) / 255 * 100);\r\n                needInitializedEnableAlpha && (enableAlpha == null) && (this.enableAlpha = true)\r\n            } else if (hex.length === 3 || hex.length === 6) {\r\n                this.alpha = 100;\r\n                needInitializedEnableAlpha && (enableAlpha == null) && (this.enableAlpha = false)\r\n            }\r\n            this.setHex(value)\r\n        }\r\n    }\r\n\r\n    /*\r\n   *  通过rgb设置当前颜色\r\n   *  @author     martsforever\r\n   *  @datetime   2019/2/17 19:49\r\n   */\r\n    setRgb(r: number, g: number, b: number): void {\r\n        this.red = r\r\n        this.green = g\r\n        this.blue = b\r\n\r\n        /*设置hsv*/\r\n        const {h, s, v} = rgb2hsv(r, g, b)\r\n        this.hue = h\r\n        this.saturation = s\r\n        this.val = v\r\n\r\n        /*设置hex*/\r\n        this.hex = rgb2hex(r, g, b)\r\n\r\n        this._value = this.currentColor\r\n    }\r\n\r\n    /*\r\n     *  根据当前rgb更新颜色\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:51\r\n     */\r\n    updateByRgb(): void {\r\n        this.setRgb(this.red, this.green, this.blue)\r\n    }\r\n\r\n    /*\r\n     *  通过十六进制色改变当前颜色\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:13\r\n     */\r\n    setHex(hex: string): void {\r\n        this.hex = hex\r\n\r\n        /*设置rgb*/\r\n        hex = hex.replace('#', '').trim();\r\n        if (hex.length === 3) {\r\n            this.red = parseHexChannel(hex[0] + hex[0]);\r\n            this.green = parseHexChannel(hex[1] + hex[1]);\r\n            this.blue = parseHexChannel(hex[2] + hex[2]);\r\n        } else if (hex.length === 6 || hex.length === 8) {\r\n            this.red = parseHexChannel(hex.substring(0, 2));\r\n            this.green = parseHexChannel(hex.substring(2, 4));\r\n            this.blue = parseHexChannel(hex.substring(4, 6));\r\n        }\r\n        if (hex.length === 8) {\r\n            this.alpha = Math.floor(parseHexChannel(hex.substring(6)) / 255 * 100);\r\n        } else if (hex.length === 3 || hex.length === 6) {\r\n            this.alpha = 100;\r\n        }\r\n\r\n        /*设置hsv*/\r\n        const {h, s, v} = rgb2hsv(this.red, this.green, this.blue)\r\n        this.hue = h\r\n        this.saturation = s\r\n        this.val = v\r\n\r\n        this._value = this.currentColor\r\n    }\r\n\r\n    /*\r\n     *  根据当前hex更新rgb以及hsv\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:23\r\n     */\r\n    updateByHex() {\r\n        this.setHex(this.hex)\r\n    }\r\n\r\n    /*\r\n     *  通过设置Hsv改变当前颜色\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:14\r\n     */\r\n    setHsv(hue: number, saturation: number, val: number) {\r\n        this.hue = hue\r\n        this.saturation = saturation\r\n        this.val = val\r\n\r\n        /*设置rgb*/\r\n        const {r, g, b} = hsv2rgb(hue, saturation, val)\r\n        this.red = r\r\n        this.green = g\r\n        this.blue = b\r\n\r\n        /*设置hex*/\r\n        this.hex = rgb2hex(r, g, b)\r\n\r\n        this._value = this.currentColor\r\n    }\r\n\r\n    /*\r\n     *  根据hsv更新当前rgbyijihex\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:23\r\n     */\r\n    updateByHsv() {\r\n        this.setHsv(this.hue, this.saturation, this.val)\r\n    }\r\n\r\n    updateByAlpha() {\r\n        this._value = this.currentColor\r\n    }\r\n}","import './color-panel.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {Color, ColorFormat} from \"./utils/Color\";\r\nimport {nextTick, reactive, watch} from 'vue';\r\nimport {isEffectiveColorString} from \"./utils/ColorUtils\";\r\nimport Input from '../input'\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {$$notice} from \"../notice-service\";\r\nimport {PlColorSvPanel} from \"./sub/color-sv-panel\";\r\nimport {PlColorAlphaSlider} from \"./sub/color-alpha-slider\";\r\nimport {PlColorHueSlider} from \"./sub/color-hue-slider\";\r\nimport {PlInput} from \"../input/input\";\r\nimport {StyleSize} from \"../../use/useStyle\";\r\nimport {PlButtonGroup} from \"../button-group/button-group\";\r\nimport {PlButton} from \"../button/button\";\r\n\r\nfunction getDefaultColor(format: ColorFormat, enableAlpha: boolean) {\r\n    if (format === ColorFormat.hex) {\r\n        return '#12b4a5'\r\n    } else {\r\n        if (enableAlpha) {\r\n            return 'rgba(18,180,165,0.5)'\r\n        } else {\r\n            return 'rgb(18,180,165)'\r\n        }\r\n    }\r\n}\r\n\r\nexport const PlColorPanel = designComponent({\r\n    name: 'pl-color-panel',\r\n    props: {\r\n        modelValue: {type: String},                      // 当前颜色值\r\n        enableAlpha: {type: Boolean},               // 是否启用透明度\r\n        format: {type: String},                     // 格式类型：hex、rgb\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onBblclickSvPanel: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n        })\r\n\r\n        const defaultColor = () => getDefaultColor(props.format as ColorFormat, props.enableAlpha as boolean)\r\n\r\n        const state = reactive({\r\n            val: props.modelValue,\r\n            color: new Color(\r\n                props.modelValue || defaultColor(),\r\n                props.enableAlpha as boolean,\r\n                props.format as ColorFormat\r\n            ),\r\n        })\r\n\r\n        const methods = {\r\n            reset: () => {\r\n                state.val = props.modelValue\r\n                state.color.setValue(props.modelValue || defaultColor())\r\n            },\r\n        }\r\n        const handler = {\r\n            svChange: ({value, saturation}: { value: number, saturation: number }) => {\r\n                state.color.val = value\r\n                state.color.saturation = saturation\r\n                state.color.updateByHsv()\r\n                state.val = state.color.color\r\n            },\r\n            hueChange: (hue: number) => {\r\n                state.color.hue = hue\r\n                state.color.updateByHsv()\r\n                state.val = state.color.color\r\n            },\r\n            alphaChange: (alpha: number) => {\r\n                state.color.alpha = alpha\r\n                state.color.updateByAlpha()\r\n                state.val = state.color.color\r\n            },\r\n            confirm: () => {\r\n                emit.onUpdateModelValue(state.val)\r\n            },\r\n            dblclickSvPanel: (e: MouseEvent) => {\r\n                handler.confirm()\r\n                emit.onBblclickSvPanel(e)\r\n            },\r\n            inputChange: (val: string) => {\r\n                if (!val) {\r\n                    state.color.setValue(val)\r\n                    state.val = state.color.color\r\n                    return\r\n                }\r\n                let formatVal = val.replace(/\\s/g, '')\r\n                if (!isEffectiveColorString(formatVal)) {\r\n                    return;\r\n                } else {\r\n                    state.color.setValue(formatVal)\r\n                    if (val !== formatVal) {\r\n                        refs.input!.model.value = formatVal\r\n                    }\r\n                    state.val = state.color.color\r\n                }\r\n            },\r\n            inputBlur: () => {\r\n                if (!!refs.input!.model.value && refs.input!.model.value !== state.color.color) {\r\n                    $$notice.warn('请输入正确的颜色值！')\r\n                    refs.input!.model.value = state.color.color\r\n                }\r\n            },\r\n            inputEnter: async () => {\r\n                await nextTick()\r\n                if (!!refs.input!.model.value && refs.input!.model.value !== state.color.color) {\r\n                    $$notice('请输入正确的颜色值！')\r\n                    refs.input!.model.value = state.color.color\r\n                } else {\r\n                    handler.confirm()\r\n                }\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------watch-------------------------------------------*/\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            state.color.setValue(val || defaultColor())\r\n            state.val = state.color.color\r\n        })\r\n\r\n        watch(() => props.enableAlpha, (val) => {\r\n            state.color.enableAlpha = val as boolean\r\n            state.color.updateByAlpha()\r\n        })\r\n\r\n        watch(() => props.format, (val) => {\r\n            state.color.format = val as ColorFormat || ColorFormat.hex\r\n            state.color.format === ColorFormat.hex ? state.color.updateByHex() : state.color.updateByRgb()\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-panel\">\r\n                    <div>\r\n                        <PlColorSvPanel height=\"180\"\r\n                                        width=\"240\"\r\n                                        hue={state.color.hue}\r\n                                        modelValue={state.color.val}\r\n                                        saturation={state.color.saturation}\r\n                                        onChange={handler.svChange} onDblclick={handler.dblclickSvPanel}/>\r\n\r\n                        {state.color.enableAlpha && (\r\n                            <PlColorAlphaSlider\r\n                                size=\"180\"\r\n                                color={state.color.hex}\r\n                                modelValue={state.color.alpha}\r\n                                {...{onChange: handler.alphaChange}}\r\n                            />\r\n                        )}\r\n                    </div>\r\n\r\n\r\n                    <PlColorHueSlider size=\"240\"\r\n                                      v-model={state.color.hue}\r\n                                      {...{onChange: handler.hueChange}}/>\r\n                    <div class=\"pl-color-panel-input-group\">\r\n                        <PlInput ref=\"input\"\r\n                                 size={StyleSize.mini}\r\n                                 modelValue={state.val}\r\n                                 width={props.enableAlpha ? 204 : 186}\r\n                                 {...{onChange: handler.inputChange}}\r\n                                 onBlur={handler.inputBlur}\r\n                                 onEnter={handler.inputEnter}/>\r\n                        <PlButtonGroup size={StyleSize.mini}>\r\n                            <PlButton icon=\"el-icon-close-bold\" onClick={methods.reset}/>\r\n                            <PlButton icon=\"el-icon-check-bold\" onClick={handler.confirm}/>\r\n                        </PlButtonGroup>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {markRaw, ref, watch, computed} from 'vue';\r\nimport './icon.scss'\r\nimport {VNodeChild} from \"../../shims\";\r\nimport {refreshPopperReference} from \"../popper/refershPopperReference\";\r\n\r\ninterface IconGetter {\r\n    (icon: string): VNodeChild | Promise<VNodeChild>\r\n}\r\n\r\n/**\r\n * prefix必须为全小写，可以有横杠下划线\r\n * @author  韦胜健\r\n * @date    2020/11/1 12:59\r\n */\r\nconst registry = (() => {\r\n    const icons: { prefix: string, getter: IconGetter }[] = []\r\n    return Object.assign((prefix: string, getter: IconGetter) => {\r\n        icons.unshift({prefix, getter})\r\n    }, {\r\n        icons,\r\n    })\r\n})()\r\n\r\nregistry('el-icon-', async (icon) => {\r\n    try {\r\n        const module = await import('./icons/' + icon + '.json')\r\n        // console.log(module)\r\n        return (\r\n            <svg\r\n                class={`el-svg-icon ${icon}`}\r\n                viewBox=\"0 0 1024 1024\"\r\n                version=\"1.1\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                innerHTML={module.default[0]}\r\n            />\r\n        )\r\n    } catch (e) {\r\n        console.error(e)\r\n        throw e\r\n    }\r\n})\r\n\r\nexport const PlIcon = designComponent({\r\n    name: 'pl-icon',\r\n    props: {\r\n        icon: {type: String},                       // 图标名称\r\n        status: {type: String},                     // 图标状态\r\n    },\r\n    setup({props}) {\r\n\r\n        const {freshPopperReference} = refreshPopperReference.inject()\r\n\r\n        const icon = ref(null as any)\r\n\r\n        const classes = computed(() => [\r\n            'pl-icon',\r\n            {\r\n                [`pl-icon-status-${props.status}`]: !!props.status\r\n            }\r\n        ])\r\n\r\n        const utils = {\r\n            getIconVNode: async (iconName: string) => {\r\n                for (let i = 0; i < registry.icons.length; i++) {\r\n                    const registryIcon = registry.icons[i];\r\n                    if (iconName.indexOf(registryIcon.prefix) === 0) {\r\n                        return await registryIcon.getter(iconName)\r\n                    }\r\n                }\r\n                return null\r\n            },\r\n            reset: async (iconName: string) => {\r\n                const Icon = await utils.getIconVNode(iconName)\r\n                icon.value = !!Icon ? markRaw(Icon) : null\r\n                freshPopperReference()\r\n            }\r\n        }\r\n\r\n        watch(() => props.icon, val => !!val && utils.reset(val), {immediate: true})\r\n\r\n        return {\r\n            render: () => {\r\n                const {value: Icon} = icon\r\n                return !!Icon ? <Icon class={classes.value}/> : <i class=\"PlIcon\"/>\r\n            }\r\n        }\r\n    },\r\n}, {registry})","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleMode, StyleProps, StyleStatus, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {computed, provide, inject} from 'vue';\r\nimport './button-group.scss'\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\n\r\ninterface ButtonModeProviderValue {\r\n    value: { mode: string }\r\n}\r\n\r\nexport const BUTTON_GROUP_PROVIDER = '@@BUTTON_GROUP_PROVIDER'\r\n\r\nexport const ButtonModeProvider = (() => {\r\n    return {\r\n        provide: (data: ButtonModeProviderValue) => {\r\n            provide(BUTTON_GROUP_PROVIDER, data)\r\n        },\r\n        inject: () => {\r\n            return inject(BUTTON_GROUP_PROVIDER, null) as ButtonModeProviderValue | null\r\n        }\r\n    }\r\n})()\r\n\r\nexport const PlButtonGroup = designComponent({\r\n    name: 'pl-button-group',\r\n    props: {\r\n        mode: {type: String, default: StyleMode.fill},                  // fill,stroke,text\r\n        vertical: {type: Boolean},                                      // 是否为纵向按钮组\r\n\r\n        ...EditProps,\r\n        ...StyleProps,\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        const {editComputed} = useEdit()\r\n\r\n        const parentGroup = ButtonModeProvider.inject()\r\n        const otherComputed = computed(() => ({mode: !!parentGroup ? parentGroup.value.mode : props.mode}))\r\n        ButtonModeProvider.provide(otherComputed)\r\n\r\n        const classes = computed(() => ([\r\n            `pl-button-group`,\r\n            `pl-button-group-status-${styleComputed.value.status}`,\r\n            `pl-button-group-mode-${otherComputed.value.mode}`,\r\n            `pl-button-group-shape-${styleComputed.value.shape}`,\r\n            `pl-button-group-size-${styleComputed.value.size}`,\r\n            `pl-button-group-direction-${props.vertical ? 'vertical' : 'horizontal'}`,\r\n            {\r\n                'pl-button-group-disabled': !!editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {ComponentPublicInstance, createApp} from 'vue';\r\nimport Root from '../packages/root'\r\nimport {installPlugin} from \"./installPlugin\";\r\nimport {addClass} from \"plain-utils/dom/addClass\";\r\n\r\nconst getIns = (() => {\r\n    let ins: ComponentPublicInstance | undefined;\r\n    return () => {\r\n        if (!ins) {\r\n            const container = document.createElement('div')\r\n            addClass(container, 'service-without-context')\r\n            document.body.appendChild(container)\r\n            const app = createApp({render() {return <pl-root/>}})\r\n            installPlugin(app, Root)\r\n            ins = app.mount(container)\r\n        }\r\n        return ins\r\n    }\r\n})();\r\n\r\nexport function getServiceWithoutContext<Service>(serviceGetter: (ins: ComponentPublicInstance) => Service) {\r\n    return serviceGetter(getIns())\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAWElEQVRIiWM8fubkfwYygKWJOSM5+mCAhRLNoxaPWjxq8ajFoxbTyeL/DAfJ0Xjs3Cl7Siwmu4Yht1aDgZEYx6MWj1o8avGoxaMWD3qLya5X//4nqx6HAQC7RBGFzolqTAAAAABJRU5ErkJggg==\"","import {getCurrentInstance} from 'vue';\r\n\r\nexport function useRefs<T extends { [k: string]: any }>(config: T): {\r\n    refs: {\r\n        [k in keyof T]: T[k] extends { use: { ref: (refName: string) => { value: infer Refer } } } ? Refer :\r\n            T[k] extends new (...args: any[]) => infer Refer ? Refer : T\r\n    }\r\n} {\r\n    const ctx = getCurrentInstance() as any\r\n    return {\r\n        refs: Object.keys(config).reduce((prev, refName) => {\r\n            Object.defineProperty(prev, refName, {\r\n                get(): any {\r\n                    return ctx.refs[refName]\r\n                }\r\n            })\r\n            return prev\r\n        }, {} as any)\r\n    }\r\n}\r\n","import {PlList} from './list'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlList)","import {getCurrentInstance, ComponentInternalInstance} from 'vue'\r\n\r\nexport function useFunctionWrapper<P extends any[],\r\n    T extends (ctx: ComponentInternalInstance, ...args: P) => any>(\r\n    key: string,\r\n    func: T,\r\n): (...args: P) => ReturnType<T> {\r\n    return (...args) => {\r\n        const ctx = getCurrentInstance() as any\r\n        if (!ctx._use) ctx._use = {}\r\n\r\n        if (!!ctx._use[key]) {\r\n            throw new Error(`use ${key} can only be executed once!`)\r\n        }\r\n\r\n        return (ctx._use[key] = func(ctx, ...args))\r\n    }\r\n}\r\n\r\n/*const func = useFunctionWrapper('', (ctx, name: string, age: number) => {\r\n    return {\r\n        sayHello: () => {},\r\n    }\r\n})\r\n\r\nconst data = func('111', 111)\r\ndata.sayHello()*/\r\n\r\n","import {ComponentInternalInstance} from \"vue\"\r\n\r\nexport function getSlotExist(prevState: { [k: string]: boolean } | null, slotNames: string[], ctx: ComponentInternalInstance) {\r\n    if (!prevState) {\r\n        prevState = {}\r\n    }\r\n    slotNames.forEach((slotName) => {\r\n        prevState![slotName] = !!ctx.slots[slotName]\r\n    })\r\n    return prevState\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {nextTick, ref} from 'vue';\r\nimport {useRefList} from \"../../use/useRefList\";\r\n\r\n/**\r\n * 创建一个默认的 root service manager组件\r\n * @author  韦胜健\r\n * @date    2020/11/26 9:20\r\n */\r\nexport function createDefaultManager<Option>(\r\n    managerName: string,\r\n    serviceComponent: {\r\n        use: {\r\n            class: {\r\n                isShow: { value: boolean },\r\n                isOpen: { value: boolean },\r\n                service: (option: Option) => any,\r\n            }\r\n        }\r\n    },\r\n    isItemAvailable?: (refs: typeof serviceComponent.use.class[], opt: Option) => null | typeof serviceComponent.use.class,\r\n) {\r\n    return designComponent({\r\n        name: managerName,\r\n        setup() {\r\n\r\n            const options = ref([] as Option[])\r\n            const refs = useRefList<typeof serviceComponent[\"use\"][\"class\"]>()\r\n\r\n            /**\r\n             * 获取一个 非show以及open的 service提供服务，如果存在\r\n             * 符合这个条件的service，直接调用service函数，否则创建\r\n             * 一个service，这个service在setup末尾需要调用一次service\r\n             * 函数；\r\n             * @author  韦胜健\r\n             * @date    2020/11/26 9:23\r\n             */\r\n            const service = async (option: Option): Promise<void> => {\r\n                if (isItemAvailable) {\r\n                    const item = isItemAvailable(refs, option)\r\n                    if (!!item) {\r\n                        return item.service(option)\r\n                    }\r\n                } else {\r\n                    for (let i = 0; i < refs.length; i++) {\r\n                        const item = refs[i];\r\n                        const {isShow, isOpen} = item\r\n                        if (!isShow.value && !isOpen.value) {\r\n                            return item.service(option)\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // 没有合适的item，创建新的item提供服务\r\n                options.value.push(option as any)\r\n                await nextTick()\r\n            }\r\n\r\n            return {\r\n                refer: {\r\n                    managerName,\r\n                    service,\r\n                },\r\n                render: () => {\r\n                    const ServiceComponent = serviceComponent as any\r\n                    return (\r\n                        <div class={managerName}>\r\n                            {options.value.map((opt, i) => <ServiceComponent\r\n                                key={i}\r\n                                option={opt}\r\n                                ref={(proxy: any) => refs[i] = proxy}\r\n                            />)}\r\n                        </div>\r\n                    )\r\n                }\r\n            }\r\n        },\r\n    })\r\n}","import {SimpleFunction} from \"../shims\";\r\n\r\ntype Listener = (SimpleFunction & { fn?: any })\r\ntype ListenName = string | symbol\r\nexport type PlainEvent = ReturnType<typeof createPlainEvent>\r\n\r\nexport function createPlainEvent() {\r\n\r\n    /**\r\n     * 第一次调用getEvents的时候才创建map对象\r\n     * @author  韦胜健\r\n     * @date    2020/10/17 11:27\r\n     */\r\n    const getListenMap = (() => {\r\n        let events: Map<ListenName, Listener[]>;\r\n        return () => {\r\n            if (!events) {\r\n                events = new Map<ListenName, Listener[]>()\r\n            }\r\n            return events\r\n        }\r\n    })()\r\n\r\n    let hasListener = false\r\n\r\n    const event = {\r\n        on: (listenName: ListenName, fn: SimpleFunction) => {\r\n\r\n            hasListener = true\r\n\r\n            const listenMap = getListenMap()\r\n            const map = listenMap.get(listenName)\r\n            if (!!map) {\r\n                map.push(fn)\r\n            } else {\r\n                listenMap.set(listenName, [fn])\r\n            }\r\n            return () => event.off(listenName, fn)\r\n        },\r\n        once: (listenName: ListenName, fn: SimpleFunction) => {\r\n\r\n            hasListener = true\r\n\r\n            const on: Listener = (...args: any[]) => {\r\n                event.off(listenName, fn)\r\n                fn(...args)\r\n            }\r\n            on.fn = fn\r\n            event.on(listenName, on)\r\n            return () => event.off(listenName, on)\r\n        },\r\n        off: (listenName: ListenName, fn?: SimpleFunction) => {\r\n            const listenMap = getListenMap()\r\n\r\n            const listeners = listenMap.get(listenName)\r\n            if (!listeners) {\r\n                return;\r\n            }\r\n\r\n            /*移除listenName的所有监听器*/\r\n            if (!fn) {\r\n                listenMap.set(listenName, [])\r\n                return\r\n            }\r\n\r\n            for (let i = 0; i < listeners.length; i++) {\r\n                const listener = listeners[i];\r\n                if (fn === listener || (!!listener.fn && fn === listener.fn)) {\r\n                    listeners.splice(i, 1)\r\n                    break\r\n                }\r\n            }\r\n        },\r\n        emit: (listenName: ListenName, ...args: any[]) => {\r\n            const listeners = getListenMap().get(listenName)\r\n            if (!!listeners) {\r\n                listeners.forEach(listener => listener(...args))\r\n            }\r\n        },\r\n        clear: () => {\r\n            if (hasListener) {\r\n                getListenMap().clear()\r\n            }\r\n        }\r\n    }\r\n\r\n    return event\r\n}","import {getCurrentInstance, onBeforeUnmount} from 'vue'\r\nimport {createPlainEvent, PlainEvent} from \"../plugins/Event\";\r\nimport {SimpleFunction} from \"../shims\";\r\nimport {kebabCase} from 'plain-utils/string/kebabCase'\r\n\r\ntype EventListener<EmitsValue> = EmitsValue extends (...args: any[]) => any ? Parameters<EmitsValue> : never\r\n\r\nexport type ComponentEvent<Emit> = {\r\n    emit: { [key in keyof Emit]: (...args: EventListener<Emit[key]>) => void },\r\n    on: { [key in keyof Emit]: (cb: (...args: EventListener<Emit[key]>) => void) => void },\r\n    once: { [key in keyof Emit]: (cb: (...args: EventListener<Emit[key]>) => void) => void },\r\n    off: { [key in keyof Emit]: (cb: (...args: EventListener<Emit[key]>) => void) => void },\r\n}\r\n\r\nexport function getComponentEmit<T>(emitObject: T): T {\r\n    return Object.keys(emitObject || {}).reduce((prev, key) => {\r\n        const emitter = (emitObject as any)[key];\r\n        const match = key.match(/onUpdate([A-Z])(.*)/)\r\n        const kebabCaseName = kebabCase(key).replace('on-', '')\r\n        if (!!match) {\r\n            const updateName = `update:${match[1].toLowerCase()}${match[2]}`\r\n            prev[updateName] = emitter\r\n            if (key === 'onUpdateModelValue') {\r\n                prev['change'] = emitter\r\n            }\r\n        }\r\n        prev[kebabCaseName] = emitter\r\n        return prev\r\n    }, {} as any)\r\n}\r\n\r\nexport function useEvent<T>(emitObject: T): ComponentEvent<T> {\r\n\r\n    const ctx = getCurrentInstance()!\r\n    const event = createPlainEvent()\r\n\r\n    const emit = {} as any;\r\n    const on = {} as any;\r\n    const once = {} as any;\r\n    const off = {} as any;\r\n\r\n    const keys = Object.keys(emitObject || {})\r\n    if (!!emitObject && !!(emitObject as any).onUpdateModelValue) {keys.push('onChange')}\r\n\r\n    keys.forEach(key => {\r\n        /*派发事件名称，横杠命名*/\r\n        const match = key.match(/onUpdate([A-Z])(.*)/)\r\n        const kebabCaseName = kebabCase(key).replace('on-', '')\r\n        if (!!match) {\r\n            const updateName = `update:${match[1].toLowerCase()}${match[2]}`\r\n            emit[key] = (...args: any[]) => {\r\n                ctx.emit(kebabCaseName, ...args)\r\n                event.emit(kebabCaseName, ...args)\r\n                ctx.emit(updateName, ...args)\r\n                event.emit(updateName, ...args)\r\n                if (key === 'onUpdateModelValue') {\r\n                    ctx.emit('change', ...args)\r\n                    event.emit('change', ...args)\r\n                }\r\n            }\r\n        } else {\r\n            emit[key] = (...args: any[]) => {\r\n                ctx.emit(kebabCaseName, ...args)\r\n                event.emit(kebabCaseName, ...args)\r\n            }\r\n        }\r\n        on[key] = (fn: SimpleFunction) => event.on(kebabCaseName, fn)\r\n        once[key] = (fn: SimpleFunction) => event.once(kebabCaseName, fn)\r\n        off[key] = (fn: SimpleFunction) => event.off(kebabCaseName, fn)\r\n    })\r\n\r\n    onBeforeUnmount(event.clear)\r\n\r\n    return {\r\n        emit, on, once, off,\r\n    }\r\n}","export const renderNothing = () => null","import {Component, ComponentInternalInstance, ComponentOptionsMixin, ComponentPropsOptions, ComputedOptions, defineComponent, DefineComponent, Directive, EmitsOptions, ExtractPropTypes, getCurrentInstance, inject, MethodOptions, PropType, provide, Ref, ref, SetupContext,} from 'vue'\r\nimport {ComponentEvent, getComponentEmit, useEvent} from \"./useEvent\";\r\nimport {createError} from \"../utils/createError\";\r\nimport {renderNothing} from \"../utils/renderNothing\";\r\n\r\nconst error = createError('designComponent')\r\n\r\ninterface RefValue<T> {\r\n    (): Ref<null | T>\r\n\r\n    (refName?: string): Readonly<{ value: null | T }>\r\n}\r\n\r\ninterface InjectValue<Refer> {\r\n    (): Refer,\r\n\r\n    <DefaultValue>(defaultValue?: DefaultValue): Refer | DefaultValue\r\n}\r\n\r\ninterface UseType<Refer, Props> {\r\n    ref: RefValue<Refer>,\r\n    inject: InjectValue<Refer>\r\n    class: Refer,\r\n    props: Props,\r\n}\r\n\r\ntype EmitToProp<E extends Record<string, any>> = {\r\n    [k in keyof E]: { type: PropType<E[k] extends ((...args: any[]) => any) ? (...args: Parameters<E[k]>) => void : E[k]>, }\r\n}\r\n\r\nexport function designComponent<RawBindings,\r\n    D,\r\n    Refer,\r\n    Expose extends object,\r\n    Props extends Readonly<ExtractPropTypes<PropsOptions>>,\r\n    PropsOptions extends Readonly<ComponentPropsOptions> = {},\r\n    C extends ComputedOptions = {},\r\n    M extends MethodOptions = {},\r\n    Mixin extends ComponentOptionsMixin = ComponentOptionsMixin,\r\n    Extends extends ComponentOptionsMixin = ComponentOptionsMixin,\r\n    E extends EmitsOptions = {},\r\n    EE extends string = string,\r\n    >(\r\n    options: {\r\n        provideRefer?: boolean,\r\n        emits?: E,\r\n        setup?: (parameter: { props: Props, event: ComponentEvent<E>, setupContext: SetupContext<E>, ctx: ComponentInternalInstance }) => {\r\n            refer?: Refer\r\n            render: () => any,\r\n        },\r\n\r\n        name?: string,\r\n        props?: PropsOptions,\r\n        mixins?: any[],\r\n        components?: Record<string, Component>;\r\n        directives?: Record<string, Directive>;\r\n    },\r\n    expose?: Expose,\r\n): DefineComponent<PropsOptions & EmitToProp<E>, RawBindings, D, C, M, Mixin, Extends, E, EE> & {\r\n    use: UseType<Refer, Props>\r\n} & Expose {\r\n\r\n    const {provideRefer, emits, setup, ...leftOptions} = options\r\n\r\n    const use: UseType<Refer, Props> = {\r\n        inject: (defaultValue?: any) => {\r\n            return inject(`@@${options.name}`, defaultValue) as Refer\r\n        },\r\n        class: Object as any as Refer,\r\n        ref: (refName?: string) => {\r\n            if (!!refName) {\r\n                const ctx = getCurrentInstance()!\r\n                return {\r\n                    get value() {\r\n                        return ctx.refs[refName!]\r\n                    }\r\n                } as any\r\n            } else {\r\n                return ref(null)\r\n            }\r\n        },\r\n        props: Object as any as Props,\r\n    }\r\n\r\n    /*if (leftOptions.name === 'pl-popper') {\r\n        console.log(leftOptions.name, getComponentEmit(emits), emits)\r\n    }*/\r\n\r\n    return Object.assign(\r\n        defineComponent({\r\n            ...(leftOptions as any || {}),\r\n            props: leftOptions.props as PropsOptions,\r\n            emits: getComponentEmit(emits),\r\n            setup(props: any, setupContext: any) {\r\n                if (!setup) {\r\n                    error('setup is necessary!')\r\n                    return renderNothing\r\n                }\r\n                const ctx = getCurrentInstance()!\r\n                const event = useEvent<E>(emits!);\r\n                (ctx as any)._event = event;\r\n\r\n                const {refer, render} = setup({\r\n                    ctx,\r\n                    props,\r\n                    event,\r\n                    setupContext,\r\n                })\r\n\r\n                if (!!refer) {\r\n                    const duplicateKey = Object.keys(refer || {}).find(i => i in ctx.proxy!)\r\n                    if (!!duplicateKey) {\r\n                        console.error(`designComponent:${leftOptions.name} key '${duplicateKey}' in refer is not allow here!`)\r\n                    } else {\r\n                        Object.assign(ctx.proxy, refer)\r\n                    }\r\n                }\r\n\r\n                if (provideRefer) {\r\n                    if (!options.name) {\r\n                        error('component name is necessary when provideRefer is true!')\r\n                    } else {\r\n                        provide(`@@${options.name}`, refer)\r\n                    }\r\n                }\r\n                return render\r\n            },\r\n        }),\r\n        {use, ...(expose || {})}\r\n    ) as any\r\n}","import {PlItem} from './item'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlItem)","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {ComponentPublicInstance, getCurrentInstance, markRaw, nextTick, reactive, Teleport} from 'vue';\r\nimport {RootController} from \"./registryRootService\";\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport './root.scss'\r\n\r\nexport const PlRoot =  designComponent({\r\n    name: 'pl-root',\r\n    props: {\r\n        ...StyleProps,\r\n    },\r\n    setup() {\r\n\r\n        /*全局样式定义*/\r\n        useStyle()\r\n        /*默认插槽*/\r\n        const {slots} = useSlots()\r\n        /*controller代理对象引用*/\r\n        let refs = useRefList<ComponentPublicInstance>()\r\n        /*当前状态*/\r\n        const state = reactive({\r\n            managers: [] as {\r\n                name: string,\r\n                Component: { use: { class: any } },\r\n                RenderComponent: any,\r\n            }[],\r\n        })\r\n\r\n        /**\r\n         * 获取一个Controller实例\r\n         * @author  韦胜健\r\n         * @date    2020/11/5 10:19\r\n         */\r\n        async function getManagerInstance<ManagerComponent extends { use: { class: any } }>(\r\n            name: string,\r\n            managerComponent: ManagerComponent\r\n        ): Promise<ManagerComponent[\"use\"][\"class\"]> {\r\n            if (!!refs) {\r\n                for (let i = 0; i < refs.length; i++) {\r\n                    const managerInstance = refs[i];\r\n                    if (!!managerInstance) {\r\n                        const {name: attrName, Component: attrComponent} = managerInstance.$attrs\r\n                        if (name === attrName && managerComponent === attrComponent) {\r\n                            return managerInstance as any\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            /*当前引用中没有该实例，手动创建一个*/\r\n            state.managers.push({\r\n                name,\r\n                Component: managerComponent,\r\n                RenderComponent: markRaw(managerComponent),\r\n            })\r\n            await nextTick()\r\n            return getManagerInstance(name, managerComponent)\r\n        }\r\n\r\n        const ctx = getCurrentInstance()!\r\n        const refer = {\r\n            rootRef: () => ctx.proxy!.$root!,\r\n            getManagerInstance,\r\n        }\r\n        RootController.initRoot(refer)\r\n\r\n        return {\r\n            refer,\r\n            render: () => [\r\n                slots.default(),\r\n                <Teleport to=\"body\">\r\n                    <div class=\"pl-root-service-container\">\r\n                        {state.managers.map(({name, Component, RenderComponent}, index) => (\r\n                            <RenderComponent key={index} {...{name, Component}} ref={proxy => refs[index] = proxy as any}/>\r\n                        ))}\r\n                    </div>\r\n                </Teleport>\r\n            ]\r\n        }\r\n    },\r\n})","import {PlRoot} from './root'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlRoot)","import {StyleStatus} from \"../use/useStyle\";\r\n\r\nexport enum CheckboxStatus {\r\n    uncheck = 'uncheck',\r\n    check = 'check',\r\n    minus = 'minus',\r\n}\r\n\r\nexport const DEFAULT_STATUS = StyleStatus.primary\r\n\r\nexport const STATUS = {\r\n    white: {icon: 'el-icon-info', status: 'white'},\r\n    black: {icon: 'el-icon-info', status: 'black'},\r\n    primary: {icon: 'el-icon-info', status: 'primary'},\r\n    success: {icon: 'el-icon-success', status: 'success'},\r\n    warn: {icon: 'el-icon-warning', status: 'warn'},\r\n    error: {icon: 'el-icon-error', status: 'error'},\r\n    info: {icon: 'el-icon-info', status: 'info'},\r\n} as { [k: string]: { icon: string, status: string } }","import {getCurrentInstance, onBeforeUpdate, reactive} from 'vue'\r\nimport {VNodeChild} from \"../shims\";\r\nimport {getSlotExist} from \"../utils/getSlotExists\";\r\n\r\ntype SlotFunction = ((vnode?: VNodeChild) => VNodeChild)\r\ntype SlotObject = { isExist: () => boolean }\r\n\r\ninterface UseSlots {\r\n    <T extends string>(names?: T[]): {\r\n        slots: { default: SlotFunction } & { [k in T]: SlotFunction }\r\n    }\r\n\r\n    <T extends string>(names?: T[], makeReactive?: boolean): {\r\n        slots: { default: SlotFunction & SlotObject } & { [k in T]: SlotFunction & SlotObject }\r\n    }\r\n}\r\n\r\n/**\r\n * 规范插槽用法\r\n * @author  韦胜健\r\n * @date    2020/11/18 17:48\r\n * @param   names                   插槽名称\r\n * @param   makeReactive            是否需要 isExist具备响应式的能力，以便在computed、watch以及render中判断\r\n */\r\nexport const useSlots: UseSlots = (names?: string[], makeReactive?: boolean) => {\r\n\r\n    const ctx = getCurrentInstance()!\r\n    const slotNames = [...(names || []), 'default']\r\n\r\n    /**\r\n     * 因为ctx.slots,ctx.ctx.$slots都不是响应式属性，无法触发computed以及watch中的变化，这里做一个手动更新处理\r\n     * 每次beforeUpdate打补丁之前，先更新ctxSlots响应式变量，render函数只会触发一次；\r\n     * @author  韦胜健\r\n     * @date    2020/10/19 11:36\r\n     */\r\n    const state = reactive({exist: getSlotExist(null, slotNames, ctx)})\r\n\r\n    /*如果需要响应式，则需要设置 makeReactive，会自动在updated之后更新slots的isExist值*/\r\n    if (makeReactive) {\r\n        onBeforeUpdate(() => {\r\n            getSlotExist(state.exist, slotNames, ctx)\r\n        })\r\n    }\r\n\r\n    /*slots.***是一个函数，参数是插槽后备内容。当插槽不存在时，渲染后备内容，否则渲染插槽内容*/\r\n    let slots = slotNames.reduce((prev: any, slotName: string) => {\r\n        prev[slotName] = Object.assign((vnode: VNodeChild) => {\r\n            const slot = ctx.slots[slotName]\r\n            return !!slot ? slot() : vnode\r\n        }, {\r\n            isExist() {\r\n                return state.exist[slotName]\r\n            }\r\n        })\r\n        return prev\r\n    }, {} as any)\r\n\r\n    return {\r\n        slots,\r\n    }\r\n}","import {App} from 'vue'\r\n\r\nexport enum KEY {\r\n    'shift' = 'shift',\r\n    'ctrl' = 'ctrl',\r\n    'alt' = 'alt',\r\n    'backspace' = 'backspace',\r\n    'tab' = 'tab',\r\n    'enter' = 'enter',\r\n    'esc' = 'esc',\r\n    'space' = 'space',\r\n    'del' = 'del',\r\n    'left' = 'left',\r\n    'up' = 'up',\r\n    'right' = 'right',\r\n    'down' = 'down',\r\n    'minus' = 'minus',\r\n    'equal' = 'equal',\r\n    'num_0' = 'num_0',\r\n    'num_1' = 'num_1',\r\n    'num_2' = 'num_2',\r\n    'num_3' = 'num_3',\r\n    'num_4' = 'num_4',\r\n    'num_5' = 'num_5',\r\n    'num_6' = 'num_6',\r\n    'num_7' = 'num_7',\r\n    'num_8' = 'num_8',\r\n    'num_9' = 'num_9',\r\n    'a' = 'a',\r\n    'b' = 'b',\r\n    'c' = 'c',\r\n    'd' = 'd',\r\n    'e' = 'e',\r\n    'f' = 'f',\r\n    'g' = 'g',\r\n    'h' = 'h',\r\n    'i' = 'i',\r\n    'j' = 'j',\r\n    'k' = 'k',\r\n    'l' = 'l',\r\n    'm' = 'm',\r\n    'n' = 'n',\r\n    'o' = 'o',\r\n    'p' = 'p',\r\n    'q' = 'q',\r\n    'r' = 'r',\r\n    's' = 's',\r\n    't' = 't',\r\n    'u' = 'u',\r\n    'v' = 'v',\r\n    'w' = 'w',\r\n    'x' = 'x',\r\n    'y' = 'y',\r\n    'z' = 'z',\r\n    'F1' = 'F1',\r\n    'F2' = 'F2',\r\n    'F3' = 'F3',\r\n    'F4' = 'F4',\r\n    'F5' = 'F5',\r\n    'F6' = 'F6',\r\n    'F7' = 'F7',\r\n    'F8' = 'F8',\r\n    'F9' = 'F9',\r\n    'F10' = 'F10',\r\n    'F11' = 'F11',\r\n    'F12' = 'F12',\r\n}\r\n\r\nexport const KeyBoardMap = {\r\n    16: 'shift',\r\n    17: 'ctrl',\r\n    18: 'alt',\r\n\r\n    8: 'backspace',\r\n    9: 'tab',\r\n    13: 'enter',\r\n    27: 'esc',\r\n    32: 'space',\r\n    46: 'del',\r\n\r\n    37: 'left',\r\n    38: 'up',\r\n    39: 'right',\r\n    40: 'down',\r\n\r\n    189: 'minus',\r\n    187: 'equal',\r\n\r\n    48: 'num_0',\r\n    49: 'num_1',\r\n    50: 'num_2',\r\n    51: 'num_3',\r\n    52: 'num_4',\r\n    53: 'num_5',\r\n    54: 'num_6',\r\n    55: 'num_7',\r\n    56: 'num_8',\r\n    57: 'num_9',\r\n\r\n    65: 'a',\r\n    66: 'b',\r\n    67: 'c',\r\n    68: 'd',\r\n    69: 'e',\r\n    70: 'f',\r\n    71: 'g',\r\n    72: 'h',\r\n    73: 'i',\r\n    74: 'j',\r\n    75: 'k',\r\n\r\n    76: 'l',\r\n    77: 'm',\r\n    78: 'n',\r\n    79: 'o',\r\n    80: 'p',\r\n    81: 'q',\r\n    82: 'r',\r\n    83: 's',\r\n    84: 't',\r\n    85: 'u',\r\n    86: 'v',\r\n    87: 'w',\r\n    88: 'x',\r\n    89: 'y',\r\n    90: 'z',\r\n\r\n    112: 'F1',\r\n    113: 'F2',\r\n    114: 'F3',\r\n    115: 'F4',\r\n    116: 'F5',\r\n    117: 'F6',\r\n    118: 'F7',\r\n    119: 'F8',\r\n    120: 'F9',\r\n    121: 'F10',\r\n    122: 'F11',\r\n    123: 'F12',\r\n}\r\n\r\nexport function getKey(e: KeyboardEvent): KEY | null {\r\n    // @ts-ignore\r\n    let key = KeyBoardMap[e.keyCode] as KEY\r\n    if (!!KEY[key]) {\r\n        return KEY[key]\r\n    } else {\r\n        /*if (e.keyCode !== 229) {\r\n            console.warn(`Can't recognise key`, e)\r\n        }*/\r\n        return null\r\n    }\r\n}\r\n\r\nexport class KeyboardServiceOption {\r\n    [key: string]: (e?: KeyboardEvent) => (void | undefined | boolean)\r\n}\r\n\r\nexport const KeyboardService = {\r\n    options: [] as KeyboardServiceOption[],\r\n    /*订阅点击事件*/\r\n    listen(option: KeyboardServiceOption) {\r\n        if (!option) return\r\n        this.options.push(option)\r\n    },\r\n    /*取消订阅事件*/\r\n    unbindListener(option: KeyboardServiceOption) {\r\n        let index = this.options.indexOf(option)\r\n        if (index > -1) {\r\n            this.options.splice(index, 1)\r\n        }\r\n    },\r\n    /*取消当前激活的元素*/\r\n    cancelActiveElement() {\r\n        const activeElement = document.activeElement as HTMLElement\r\n        if (!!activeElement) activeElement.blur()\r\n        return activeElement\r\n    },\r\n    /*处理window的点击事件*/\r\n    _onkeydown(e: KeyboardEvent) {\r\n        if (e.currentTarget !== e.target) return\r\n        const names = [] as string[];\r\n        (e.metaKey || e.ctrlKey) && names.push('ctrl')\r\n        e.shiftKey && names.push('shift')\r\n        e.altKey && names.push('alt')\r\n        // @ts-ignore\r\n        names.push(KeyBoardMap[e.keyCode])\r\n        const compositionKeyName = names.join('+')\r\n\r\n        const option = this.options[this.options.length - 1]\r\n        if (!!option && !!option[compositionKeyName]) {\r\n            const flag = option[compositionKeyName](e)\r\n            /*默认阻止事件冒泡*/\r\n            if (flag !== false) {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n            }\r\n        }\r\n    },\r\n}\r\n\r\nexport function handleKeyboard(option: { [key in KEY]?: (e: KeyboardEvent) => any }) {\r\n    return (e: KeyboardEvent) => {\r\n        const key = getKey(e)\r\n        if (!!key && !!option[key]) {\r\n            return option[key]!(e)\r\n        }\r\n    }\r\n}\r\n\r\ndocument.body.addEventListener('keydown', e => KeyboardService._onkeydown(e))\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.config.globalProperties.$keyboard = KeyboardService\r\n    },\r\n}","import {App} from 'vue'\r\nimport {ComponentPlugin} from \"../shims\";\r\nimport {installPlugin} from \"./installPlugin\";\r\nimport Root from '../packages/root'\r\n\r\ninterface InstallComponent {\r\n    name: string\r\n}\r\n\r\nexport function createComponentPlugin<Component extends InstallComponent,\r\n    Expose extends Record<string, any>,\r\n    ExposeComponents extends { [k: string]: InstallComponent },\r\n    >(\r\n    component: Component,                               // 导出的主组件\r\n    option?: {\r\n        exposeComponents?: ExposeComponents,            // 额外需要安装的组件（一并导出挂载的component组件上）\r\n        plugins?: ComponentPlugin[],                    // 依赖的其他插件\r\n        expose?: Expose                                 // 需要导出的额外内容\r\n    },\r\n) {\r\n    const {exposeComponents, plugins, expose} = option || {}\r\n    const wrapExposeComponents: { [k in keyof ExposeComponents]: ExposeComponents[k] & ComponentPlugin } = !exposeComponents ?\r\n        {} :\r\n        Object.keys(exposeComponents || {})\r\n            .reduce((prev, next) => {\r\n                prev[next] = createComponentPlugin(exposeComponents[next])\r\n                return prev\r\n            }, {} as any)\r\n\r\n    return Object.assign(component, {\r\n        install(app: App) {\r\n            installPlugin(app, Root)\r\n            const componentList = [component] as InstallComponent[]\r\n            if (!!exposeComponents) {componentList.push(...Object.values(exposeComponents))}\r\n            componentList.forEach(comp => app.component(comp.name, comp))\r\n            !!plugins && (installPlugin(app, plugins))\r\n        },\r\n        ...wrapExposeComponents,\r\n        ...expose,\r\n    })\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {VNodeChild} from \"../../shims\";\r\n\r\n/**\r\n * 创建一个默认的root service组件\r\n * 这个组件最后返回的refer，必须含有isShow、isOpen、service三个属性。\r\n * isShow：当前是否已经显示，因为存在过渡动画，所以如果值为true，但是此时在页面可能没有完全显示。值为false，可能在页面上没有完全隐藏；\r\n * isOpen：当前是否已经在页面上完全打开或者消失。值为true，表示当前已经完全显示，但是此时isShow可能为false。因为隐藏过渡动画没有结束的时候就是这种情况、同理isOpen为true的时候也是这样。\r\n * 只有当isShow以及isOpen都是false的情况下，这个service才是处于闲置可以服用的状态。\r\n *\r\n * @author  韦胜健\r\n * @date    2020/11/26 9:24\r\n */\r\nexport function createDefaultService<Option extends object, Refer extends {\r\n    isShow: { value: boolean },\r\n    isOpen: { value: boolean },\r\n    service: (optoin: Option) => void\r\n}>\r\n(\r\n    {\r\n        name,\r\n        setup,\r\n        components,\r\n    }: {\r\n        name: string,\r\n        setup: (option: Option) => {\r\n            refer: Refer,\r\n            render: () => VNodeChild,\r\n        },\r\n        components?: any,\r\n    }\r\n) {\r\n    return designComponent({\r\n        name: `pl-${name}-service`,\r\n        components,\r\n        props: {\r\n            option: {type: Object, required: true}\r\n        },\r\n        setup({props}) {\r\n            const option = props.option as Option\r\n            const {render, refer} = setup(option)\r\n            refer.service(option)\r\n            return {\r\n                render, refer\r\n            }\r\n        },\r\n    })\r\n}","import {CascadeConfig, CascadeMark} from \"./CascadMark\";\r\nimport {reactive} from 'vue';\r\n\r\nexport class CascadeNode {\r\n\r\n    state: {\r\n        data: Record<string, any>\r\n    }\r\n\r\n    constructor(\r\n        public key: string,\r\n        data: Record<string, any>,\r\n        public level: number,\r\n        public config: () => CascadeConfig,\r\n        public parentRef: () => (CascadeNode | null),\r\n        public markRef: () => CascadeMark,\r\n        public ctxState: () => {\r\n            expandKeys: string[],\r\n            filterText: string | undefined,\r\n        }\r\n    ) {\r\n        this.state = reactive({\r\n            data\r\n        })\r\n    }\r\n\r\n    selfGetter = () => this;\r\n\r\n    /*---------------------------------------prop-------------------------------------------*/\r\n\r\n    get data() {return this.state.data}\r\n\r\n    set data(val) {this.state.data = val}\r\n\r\n    /*节点显示文本*/\r\n    get label(): string {return this.data[this.config().labelField]}\r\n\r\n    /*节点子数据*/\r\n    get childrenData(): object[] | undefined {\r\n        const data = this.data[this.config().childrenField]\r\n        return typeof data === \"function\" ? data() : data\r\n    }\r\n\r\n    /*子节点*/\r\n    get children(): CascadeNode[] | undefined {\r\n        if (!this.childrenData) return undefined\r\n        return this.childrenData.map(child => this.markRef().node.get(\r\n            child,\r\n            this.level + 1,\r\n            this.selfGetter,\r\n        ))\r\n    }\r\n\r\n    /*是否为叶子节点（无子节点）*/\r\n    get isLeaf(): boolean {\r\n        const {isLeaf} = this.config()\r\n        if (!!isLeaf) {\r\n            return isLeaf(this)\r\n        } else {\r\n            return !this.children || this.children.length === 0\r\n        }\r\n    }\r\n\r\n    /*当前节点展开时包含的keys*/\r\n    get expandKeys(): string[] {\r\n        let expandKeys = [this.key]\r\n        let parent = this.parentRef()\r\n        while (!!parent && !!parent.key) {\r\n            expandKeys.unshift(parent.key)\r\n            parent = parent.parentRef()\r\n        }\r\n        return expandKeys\r\n    }\r\n\r\n    /*当前节点是否已经展开*/\r\n    get isExpand() {\r\n        let expandKeys = this.ctxState().expandKeys\r\n        let selfExpandKeys = this.expandKeys\r\n        return expandKeys.toString() === selfExpandKeys.toString()\r\n    }\r\n\r\n    /*当前是否处于加载状态*/\r\n    get isLoading(): boolean {\r\n        return this.markRef().loading.get(this.key)\r\n    }\r\n\r\n    get isLoaded(): boolean {\r\n        return this.markRef().loaded.get(this.key)\r\n    }\r\n\r\n    /*当前节点是否禁用*/\r\n    get nodeDisabled(): boolean {\r\n        const nodeDisabled = this.config().nodeDisabled\r\n        return !!nodeDisabled && nodeDisabled(this)\r\n    }\r\n\r\n    /*当有过滤文本时，显示的文本*/\r\n    get filterData(): CascadeNode[] {\r\n        let filterData: CascadeNode[] = [this]\r\n        let parent = this.parentRef()\r\n        while (!!parent && !!parent.key) {\r\n            filterData.unshift(parent)\r\n            parent = parent.parentRef()\r\n        }\r\n        return filterData\r\n    }\r\n\r\n    /*是否通过筛选，当子节点通过筛选时，当前节点也算通过筛选*/\r\n    get isPassFilter(): boolean {\r\n        const {filterText} = this.ctxState()\r\n        if (!filterText) return false\r\n\r\n        const {filterMethod} = this.config()\r\n        let filterData = this.filterData\r\n        if (!!filterMethod) {\r\n            return filterMethod(filterData, filterText)\r\n        }\r\n        return filterData.some(item => item.label.indexOf(filterText!) > -1)\r\n    }\r\n\r\n    /*---------------------------------------action-------------------------------------------*/\r\n\r\n    /*设置子节点数据*/\r\n    setChildren(children: object[]) {\r\n        // set(this.data, this.config().childrenField, children)\r\n        this.data[this.config().childrenField] = children\r\n    }\r\n\r\n    loading(val: boolean) {\r\n        this.markRef().loading.set(this.key, val)\r\n    }\r\n\r\n    loaded(val: boolean) {\r\n        this.markRef().loaded.set(this.key, val)\r\n    }\r\n}","export function createCounter(prefixString?: string) {\r\n    let count = 0\r\n    return () => (!!prefixString ? `${prefixString}_` : '') + count++\r\n}","import {designComponent} from \"../../../use/designComponent\";\r\nimport {CascadeNode} from \"../utils/CascadeNode\";\r\nimport {VNodeChild} from \"../../../shims\";\r\nimport {useScopedSlots} from \"../../../use/useScopedSlots\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {CascadeMark} from \"../utils/CascadMark\";\r\nimport {computed, PropType, reactive, ref} from 'vue';\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\nimport './cascade-panel.scss'\r\nimport {PlItem} from \"../../item/item\";\r\nimport {PlIcon} from \"../../icon/icon\";\r\nimport {PlScroll} from \"../../scroll/scroll\";\r\nimport {PlList} from \"../../list/list\";\r\nimport {PlLoading} from \"../../loading/loading\";\r\n\r\nexport const CascadePanelProps = {\r\n    modelValue: {type: Array},                                          // 数组，双向绑定值\r\n    data: {type: Array},                                                // 选择的数据\r\n    trigger: {type: String, default: 'click'},                           // 展开触发类型：click，hover\r\n    hoverDebounce: {type: Number, default: 150},                        // 触发器为hover的时候，防抖时间间隔\r\n    emptyText: {type: String, default: '暂无数据'},                      // 没有子节点时展示的文本\r\n    nodeDisabled: {type: Function as PropType<(node: CascadeNode) => boolean>},// 是否禁用判断函数\r\n    renderContent: {type: Function as PropType<(data: { node: CascadeNode, index: number }) => VNodeChild>},// 渲染内容的渲染函数\r\n    selectBranch: {type: Boolean},                                      // 点击分支的时候也能够触发 change 事件\r\n    /*---------------------------------------separator-------------------------------------------*/\r\n    isLeaf: {type: Function as PropType<(node: CascadeNode) => boolean>},// 函数，用来判断是否为叶子节点，默认根据节点是否存在子节点来判断是否为叶子节点，懒加载模式下，改属性为必需属性\r\n    lazy: {type: Boolean},                                              // 数据是否为懒加载\r\n    getChildren: {type: Function as PropType<(node: CascadeNode | null, cb: (...args: any[]) => void) => any>},// 懒加载数据函数\r\n    /*---------------------------------------separator-------------------------------------------*/\r\n    labelField: {type: String, required: true},                         // 记录显示文本的字段名\r\n    keyField: {type: String, required: true},                           // 记录值的字段名\r\n    childrenField: {type: String, required: true},                      // 记录的子节点数据的字段名\r\n    /*---------------------------------------separator-------------------------------------------*/\r\n    filterText: {type: String},                                         // 筛选文本\r\n    filterMethod: {type: Function as PropType<(nodes: CascadeNode[], filterText: string) => boolean>},// 自定义筛选函数/\r\n}\r\n\r\nexport const PlCascadePanel = designComponent({\r\n    name: 'pl-cascade-panel',\r\n    props: CascadePanelProps,\r\n    emits: {\r\n        onUpdateModelValue: (val: any, expandNodes?: CascadeNode[]) => true,\r\n        onClickItem: (data: { node: CascadeNode, index: number }) => true,\r\n        onGetChildren: (...args: any[]) => true,\r\n        onUpdateData: (val: any) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {node: CascadeNode, index: Number}\r\n        })\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoEmit: false})\r\n        const data = useModel(() => props.data, emit.onUpdateData)\r\n        const expandKeys = ref([] as string[])\r\n        const state = reactive({\r\n            loading: false,\r\n            expandKeys,\r\n            cascadeMark: new CascadeMark(\r\n                () => ({\r\n                    nodeDisabled: props.nodeDisabled,\r\n                    isLeaf: props.isLeaf,\r\n                    lazy: props.lazy,\r\n                    getChildren: props.getChildren,\r\n                    filterMethod: props.filterMethod,\r\n\r\n                    labelField: props.labelField!,\r\n                    keyField: props.keyField!,\r\n                    childrenField: props.childrenField!,\r\n                }),\r\n                () => ({\r\n                    expandKeys: expandKeys.value,\r\n                    filterText: props.filterText,\r\n                })\r\n            )\r\n        })\r\n\r\n        const formatData = computed(() => state.cascadeMark.node.getList(data.value, 1, () => null))\r\n        const cascadeData = computed(() => {\r\n            const data = formatData.value || []\r\n            if (data.length === 0) return []\r\n            let expandKeys: string[] = []\r\n            if (!!state.expandKeys && state.expandKeys.length > 0) {\r\n                expandKeys = state.expandKeys\r\n            } else if (!!model.value && model.value.length > 0 && !props.lazy) {\r\n                expandKeys = model.value as string[]\r\n            }\r\n\r\n            let children = data as CascadeNode[]\r\n            let cascadeData: CascadeNode[][] = []\r\n\r\n            cascadeData.push(children)\r\n\r\n            expandKeys.forEach((key: string) => {\r\n                for (let i = 0; i < children.length; i++) {\r\n                    const child = children[i];\r\n                    if (child.key === key && !child.isLeaf) {\r\n                        children = child.children || []\r\n                        cascadeData.push(children)\r\n                        break\r\n                    }\r\n                }\r\n            })\r\n            return cascadeData\r\n        })\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            /**\r\n             * 检查props是否合法\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 18:48\r\n             */\r\n            checkProps() {\r\n                if (!props.data) return true\r\n                if (!props.keyField) {\r\n                    console.error('pl-cascade 的 keyField属性不能为空，每一条记录必须要有一个key标识')\r\n                    return false\r\n                }\r\n                if (!props.childrenField) {\r\n                    console.error('pl-cascade 的 childrenKey不能为空')\r\n                    return false\r\n                }\r\n                return true\r\n            },\r\n            iterateAll: (nodes: CascadeNode[], fn: Function, iterateChildren?: Function) => {\r\n                if (!nodes) return\r\n                nodes.forEach(node => {\r\n                    fn(node)\r\n                    if (!!node.children && (!iterateChildren || iterateChildren(node))) {\r\n                        utils.iterateAll(node.children, fn, iterateChildren)\r\n                    }\r\n                })\r\n            },\r\n            getChildrenAsync(node: CascadeNode | null): Promise<CascadeNode[]> {\r\n                return new Promise((resolve) => {\r\n                    if (!node) {\r\n                        state.loading = true\r\n                    } else {\r\n                        node.loading(true)\r\n                    }\r\n                    props.getChildren!(node, (...results: any[]) => {\r\n                        if (!node) {\r\n                            state.loading = false\r\n                        } else {\r\n                            node.loading(false)\r\n                            node.loaded(true)\r\n                        }\r\n                        emit.onGetChildren(...results)\r\n                        resolve(...results)\r\n                    })\r\n                })\r\n            },\r\n            async initLazy() {\r\n                if (!props.lazy) {\r\n                    return\r\n                }\r\n                data.value = await utils.getChildrenAsync(null)\r\n            },\r\n        }\r\n\r\n        const filterData = computed(() => {\r\n            let filterData: CascadeNode[][] = []\r\n            utils.iterateAll((formatData.value || []) as CascadeNode[], (node: CascadeNode) => {\r\n                if (node.isPassFilter && (node.isLeaf || props.selectBranch)) {\r\n                    filterData.push(node.filterData)\r\n                }\r\n            })\r\n            return filterData\r\n        })\r\n\r\n        const expandNodes = computed(() => {\r\n            if (!state.expandKeys) return []\r\n            let result: CascadeNode[] = []\r\n            let nodes = formatData.value || []\r\n\r\n            state.expandKeys.forEach((key: string) => {\r\n                for (let i = 0; i < nodes.length; i++) {\r\n                    const child = nodes[i];\r\n                    if (child.key === key) {\r\n                        result.push(child)\r\n                        if (!child.children || child.children.length === 0) {\r\n                            break\r\n                        } else {\r\n                            nodes = child.children\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            return result\r\n        })\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            mouseenterItem: debounce((node: CascadeNode) => {\r\n                if (props.trigger === 'hover') {\r\n                    methods.expand(node)\r\n                }\r\n            }, props.hoverDebounce),\r\n            clickItem: async (node: CascadeNode, index: number) => {\r\n                if (props.trigger === 'click') {\r\n                    await methods.expand(node)\r\n                }\r\n\r\n                if (node.nodeDisabled) return\r\n                if (node.isLeaf || props.selectBranch) {\r\n                    model.value = state.expandKeys\r\n                    emit.onUpdateModelValue(model.value as string[], expandNodes.value as CascadeNode[])\r\n                }\r\n                emit.onClickItem({node, index})\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            expand: async (node: CascadeNode) => {\r\n                if (!node.isExpand) {\r\n                    state.expandKeys = node.expandKeys\r\n\r\n                    if (\r\n                        props.lazy &&                                               // 懒加载模式\r\n                        !node.isLoaded &&                                           // 未曾加载过子节点数据\r\n                        !node.isLeaf                                                // 节点不是叶子节点\r\n                    ) {\r\n                        const children = await utils.getChildrenAsync(node)\r\n                        node.setChildren(children || [])\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        utils.initLazy()\r\n\r\n        return {\r\n            refer: {\r\n                ...methods,\r\n            },\r\n            render: () => {\r\n                const empty = (\r\n                    <PlItem class=\"pl-cascade-item pl-cascade-empty\" key=\"empty\" block>\r\n                        <PlIcon icon=\"el-icon-nodata\"/>\r\n                        {props.emptyText}\r\n                    </PlItem>\r\n                )\r\n\r\n                const filterList = (\r\n                    <PlItem class=\"pl-cascade-list pl-cascade-filter-list\" key={0}>\r\n                        <PlScroll>\r\n                            <PlList>\r\n                                {(!filterData.value || filterData.value.length === 0) && empty}\r\n                                {filterData.value.map((nodes) => (\r\n                                    <PlItem block\r\n                                            class={[\r\n                                                'pl-cascade-item',\r\n                                                {\r\n                                                    'pl-cascade-item-active': !!model.value && model.value.toString() === nodes.map(node => node.key).toString(),\r\n                                                    'pl-cascade-item-disabled': nodes.some(node => node.nodeDisabled),\r\n                                                }\r\n                                            ]}\r\n                                            key={nodes.map(node => node.key).join(' ')}\r\n                                            {...{\r\n                                                onClick: () => {\r\n                                                    handler.clickItem(nodes[nodes.length - 1], -1)\r\n                                                },\r\n                                            }}>\r\n                                        <div class=\"pl-cascade-content\">\r\n                                            {nodes.map(node => node.label).join(' / ')}\r\n                                        </div>\r\n                                    </PlItem>\r\n                                ))}\r\n                            </PlList>\r\n                        </PlScroll>\r\n                    </PlItem>\r\n                )\r\n\r\n                const cascadeList = cascadeData.value.map((list, listIndex) => (\r\n                    <PlItem class=\"pl-cascade-list\" key={listIndex} v-loading={listIndex > 0 && state.cascadeMark.loading.get(state.expandKeys[listIndex - 1])}>\r\n                        <PlScroll>\r\n                            <PlList>\r\n                                {list.map((node, nodeIndex) => (\r\n                                    <PlItem block\r\n                                            class={[\r\n                                                'pl-cascade-item',\r\n                                                {\r\n                                                    'pl-cascade-item-expand': node.key === state.expandKeys[listIndex],\r\n                                                    'pl-cascade-item-active': !!model.value && model.value[listIndex] === node.key,\r\n                                                    'pl-cascade-item-disabled': node.nodeDisabled,\r\n                                                }\r\n                                            ]}\r\n                                            key={node.key}\r\n\r\n                                            {...{\r\n                                                onClick: () => handler.clickItem(node, nodeIndex),\r\n                                                ...(props.trigger === 'hover' ? {\r\n                                                    onMouseenter: () => handler.mouseenterItem(node),\r\n                                                } : {})\r\n                                            }}>\r\n                                        <div class=\"pl-cascade-content\">\r\n                                            {scopedSlots.default({node, index: nodeIndex}, (\r\n                                                !!props.renderContent ? props.renderContent({node, index: nodeIndex}) : node.label\r\n                                            ))}\r\n                                            {!node.isLeaf && (\r\n                                                <div class=\"pl-cascade-arrow\">\r\n                                                    {node.isLoading ? <PlLoading type=\"gamma\" status=\"primary\"/> : <PlIcon icon=\"el-icon-arrow-right\"/>}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    </PlItem>\r\n                                ))}\r\n                                {list.length === 0 && (\r\n                                    <PlItem class=\"pl-cascade-item pl-cascade-empty\" key=\"empty\" block>\r\n                                        <PlIcon icon=\"el-icon-nodata\"/>\r\n                                        {props.emptyText}\r\n                                    </PlItem>\r\n                                )}\r\n                            </PlList>\r\n                        </PlScroll>\r\n                    </PlItem>\r\n                ))\r\n\r\n                const isEmpty = !!props.filterText ? (filterData.value.length === 0) : (cascadeData.value.length === 0)\r\n\r\n                return (\r\n                    <div class=\"pl-cascade-panel\" v-loading={state.loading}>\r\n                        {!!props.filterText ? filterList : (\r\n                            <PlList>\r\n                                {isEmpty ? (\r\n                                    <div class=\"pl-cascade-list\" key=\"empty\">\r\n                                        {empty}\r\n                                    </div>\r\n                                ) : cascadeList}\r\n                            </PlList>\r\n                        )}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {PlLoading} from './loading'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlLoading)","export const TimePublicProps = {\r\n    displayFormat: {type: String, default: 'HH:mm:ss'},\r\n    valueFormat: {type: String, default: 'HH:mm:ss'},\r\n    max: {type: String},\r\n    min: {type: String},\r\n    layout: {type: Array, default: () => (['h', 'm', 's'])},\r\n    custom: Function,\r\n    checkDisabled: Function,\r\n}","import {ref, getCurrentInstance, provide, inject, onMounted, onBeforeUnmount, markRaw, Ref} from 'vue';\r\nimport {createCounter} from \"../utils/createCounter\";\r\n\r\ntype UseCollectComponent = { name?: string, use: { class: any } }\r\ntype UseCollectSort = (() => HTMLElement) | number\r\n\r\nconst counter = createCounter('use_collector')\r\n\r\nfunction useCollectInParentInner() {\r\n\r\n    const indexMap = new WeakMap<any, number>()\r\n\r\n    const items = ref([] as any[])\r\n    const utils = {\r\n        addItem: (item: any, sort?: UseCollectSort) => {\r\n            if (!!sort) {\r\n                if (typeof sort !== \"number\") {\r\n                    const el = sort()\r\n                    sort = Array\r\n                        .from(el!.parentNode!.childNodes)\r\n                        .filter((item: any) => item.nodeName !== '#comment' && (!item.style || item.style.display !== 'none'))\r\n                        .indexOf(el)\r\n                    // console.log(el, sort)\r\n                }\r\n                indexMap.set(item, sort as number)\r\n\r\n                items.value.splice(\r\n                    0,\r\n                    items.value.length,\r\n                    ...[...items.value, item]\r\n                        .sort((a, b) => indexMap.get(a)! - indexMap.get(b)!))\r\n            } else {\r\n                items.value.push(item)\r\n            }\r\n        },\r\n        removeItem: (item: any) => {\r\n            const index = items.value.indexOf(item)\r\n            if (index > -1) items.value.splice(index, 1)\r\n        }\r\n    }\r\n    return {\r\n        parent: {} as any,  // 类型提示，实际上无用处\r\n        items,\r\n        utils,\r\n    }\r\n}\r\n\r\nexport function useCollect<Parent extends UseCollectComponent, Child extends UseCollectComponent>\r\n(config: () => {\r\n    parent: Parent,\r\n    child: Child,\r\n}) {\r\n\r\n    const {parent} = config()\r\n    const parentName = parent.name || counter()\r\n    const provideString = `@@Collector_${parentName}`\r\n\r\n    return {\r\n        parent: (): (Child['use']['class'])[] => {\r\n            const ctx = getCurrentInstance()!\r\n            const {items, utils} = useCollectInParentInner()\r\n            const data: ReturnType<typeof useCollectInParentInner> = {\r\n                items,\r\n                utils,\r\n                parent: ctx.proxy,\r\n            }\r\n            provide(provideString, data)\r\n            return items.value\r\n        },\r\n        child: (\r\n            {\r\n                injectDefaultValue,\r\n                sort,\r\n            }: {\r\n                injectDefaultValue?: any,\r\n                sort?: UseCollectSort,\r\n            } = {}): Parent['use']['class'] => {\r\n            const data = inject(provideString, injectDefaultValue) as ReturnType<typeof useCollectInParentInner>\r\n            if (!!data) {\r\n                const ctx = getCurrentInstance()!\r\n                const child = markRaw(ctx.proxy as any)\r\n                onMounted(() => data.utils.addItem(child, sort))\r\n                onBeforeUnmount(() => data.utils.removeItem(child))\r\n                return data.parent\r\n            } else {\r\n                return null\r\n            }\r\n        }\r\n    }\r\n}","import {PlPopper} from './popper'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlPopper)","import {computed, onMounted, reactive, watch, PropType} from 'vue';\r\nimport './input.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {SimpleFunction, StyleProperties} from \"../../shims\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport {throttle} from 'plain-utils/utils/throttle';\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {createEventListener} from \"../../utils/createEventListener\";\r\nimport {PlLoading} from \"../loading/loading\";\r\n\r\nconsole.log('load input component')\r\n\r\nexport const PlInput = designComponent({\r\n    name: 'pl-input',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: [String, Number]},\r\n        placeValue: {type: [String, Number]},\r\n\r\n        width: {type: [Number, String, Object, Function] as PropType<string | number>, default: null,},        // 输入框默认宽度\r\n        minHeight: {type: [Number, String], default: 100},      // 文本域最小高度\r\n        maxHeight: {type: [Number, String], default: 156},      // 文本域最大高度\r\n        block: {type: Boolean},                                 // 块级元素\r\n        textarea: {type: Boolean},                              // 当前是否为文本域输入框\r\n        suffixIcon: {type: [String, Function]},                 // 右侧图标\r\n        prefixIcon: {type: String},                             // 左侧图标\r\n        clearIcon: {type: Boolean},                             // 清除图标\r\n        clearHandler: Function,                         // 点击清除图标处理逻辑\r\n\r\n        autoHeight: {type: Boolean},                            // 自适应高度\r\n        isFocus: {type: Boolean},                               // 当前是否处于激活状态\r\n        inputReadonly: {type: Boolean},                         // 输入框只读\r\n        throttleEnter: {type: [Boolean, Number]},               // enter按键事件节流\r\n        asyncHandler: {type: Function},                         // 异步处理函数，会自动开启关闭loading状态\r\n\r\n        /*---------------------------------------原生属性-------------------------------------------*/\r\n        inputInnerTabindex: {type: Number, default: 0},\r\n        type: {type: String, default: 'text'},\r\n        placeholder: {type: String},\r\n        nativeAttrs: {type: Object, default: () => ({})},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onFocus: (e: FocusEvent) => true,\r\n        onBlur: (e: Event) => true,\r\n        onKeydown: (e: KeyboardEvent) => true,\r\n        onEnter: (e: KeyboardEvent) => true,\r\n        onEsc: (e: KeyboardEvent) => true,\r\n\r\n        onClickInput: (e: MouseEvent) => true,\r\n        onClickPrefixIcon: (e: MouseEvent) => true,\r\n        onClickSuffixIcon: (e: MouseEvent) => true,\r\n        onClickClearIcon: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots([\r\n            'prepend', 'append', 'hidden'\r\n        ], true)\r\n        const {refs} = useRefs({\r\n            input: HTMLInputElement,\r\n            hiddenInput: HTMLTextAreaElement,\r\n        })\r\n        const {propsState} = useProps(props, {\r\n            width: [useProps.NUMBER, useProps.PROMISE, useProps.FUNCTION],\r\n            minHeight: useProps.NUMBER,\r\n            maxHeight: useProps.NUMBER,\r\n        })\r\n        const {styleComputed} = useStyle({status: undefined})\r\n        const {editComputed, editState} = useEdit()\r\n        const state = reactive({\r\n            autoHeight: null as null | number,\r\n            handlerEnter: null as null | Function,\r\n            handleEnterInner: async (e: KeyboardEvent) => {\r\n                if (editComputed.value.editable) {\r\n                    if (!!props.asyncHandler) {\r\n                        editState.loading = true\r\n                        try {\r\n                            await props.asyncHandler()\r\n                        } catch (e) {\r\n                            console.error(e)\r\n                        } finally {\r\n                            editState.loading = null\r\n                        }\r\n                    } else {\r\n                        emit.onEnter(e)\r\n                    }\r\n                }\r\n            },\r\n        })\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            input: (e: Event) => {\r\n                model.value = (e.target as HTMLInputElement).value\r\n            },\r\n            enter: (e: KeyboardEvent) => {\r\n                state.handlerEnter!(e)\r\n            },\r\n            clickPrefixIcon: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                emit.onClickPrefixIcon(e)\r\n            },\r\n            clickSuffixIcon: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                emit.onClickSuffixIcon(e)\r\n            },\r\n            clickClearIcon: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                emit.onClickClearIcon(e)\r\n                if (!!props.clearHandler) {\r\n                    props.clearHandler(e)\r\n                } else {\r\n                    methods.clearValue()\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        const classes = useClass(() => [\r\n            `pl-input-shape-${styleComputed.value.shape}`,\r\n            `pl-input-size-${styleComputed.value.size}`,\r\n            {\r\n                [`pl-input-status-${styleComputed.value.status}`]: !!styleComputed.value.status,\r\n                'pl-input-block': props.block,\r\n                'pl-input-disabled': !!editComputed.value.disabled,\r\n                'pl-input-prefix-padding': !!props.prefixIcon,\r\n                'pl-input-suffix-padding': !!props.suffixIcon || !!props.clearIcon || editComputed.value.loading,\r\n                'pl-input-prefix': !!props.prefixIcon,\r\n                'pl-input-suffix': !!props.suffixIcon || editComputed.value.loading,\r\n                'pl-input-clear': !!props.clearIcon,\r\n                'pl-input-empty': !model.value && !props.placeValue,\r\n                'pl-input-focus': props.isFocus,\r\n                'pl-input-not-editable': !editComputed.value.editable,\r\n            }\r\n        ])\r\n\r\n        const styles = computed(() => {\r\n            const styles: StyleProperties = {}\r\n            /*没有前置以及后置插槽以及非块级元素的情况下，设置宽度*/\r\n            if (propsState.width !== null && !props.block) {\r\n                styles.width = unit(propsState.width)\r\n            }\r\n            /*textarea自动高度的时候，取最大高度最小高度以及滚动高度*/\r\n            if (!!props.textarea) {\r\n                if (!props.autoHeight || state.autoHeight == null) {\r\n                    styles.height = unit(state.autoHeight)\r\n                } else {\r\n                    if (propsState.maxHeight != null && state.autoHeight > propsState.maxHeight) {\r\n                        styles.height = unit(propsState.maxHeight)\r\n                    } else if (state.autoHeight < propsState.minHeight) {\r\n                        styles.height = unit(propsState.minHeight)\r\n                    } else {\r\n                        styles.height = unit(state.autoHeight)\r\n                    }\r\n                }\r\n            }\r\n            return styles\r\n        })\r\n\r\n        const publicProps = computed(() => ({\r\n            style: styles.value,\r\n            disabled: editComputed.value.disabled,\r\n            readonly: props.inputReadonly || editComputed.value.readonly || editComputed.value.loading,\r\n            value: model.value,\r\n            placeholder: props.placeholder,\r\n            ...(props.nativeAttrs || {}),\r\n\r\n            // 发现一个非常奇怪的现象，div.pl-input-inner 里面的input、派发的input事件，居然也能够在 div.pl-input-inner这个div节点上监听到。神奇\r\n            ...(!slots.default.isExist() ? {\r\n                onInput: (e: Event) => {\r\n                    /*ie 下不知道为什么页面初始化的之后这里默认就执行了一次，这里判断绕过这个问题*/\r\n                    if (e.target === document.activeElement) {\r\n                        handler.input(e)\r\n                    }\r\n                },\r\n            } : {}),\r\n\r\n            onClick: emit.onClickInput,\r\n            onFocus: emit.onFocus,\r\n            onBlur: emit.onBlur,\r\n            onKeydown: (e: KeyboardEvent) => {\r\n                emit.onKeydown(e)\r\n                switch (getKey(e)) {\r\n                    case KEY.enter:\r\n                        return handler.enter(e)\r\n                    case KEY.esc:\r\n                        return emit.onEsc(e)\r\n                }\r\n            },\r\n            ref: \"input\",\r\n        } as any))\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            clearValue: () => {\r\n                model.value = undefined\r\n            },\r\n            focus: () => {\r\n                if (!!refs.input && !!refs.input.focus) {\r\n                    refs.input.focus()\r\n                }\r\n            },\r\n            blur: () => {\r\n                if (!!refs.input && !!refs.input.blur) {\r\n                    refs.input.blur()\r\n                }\r\n            },\r\n            /*重置文本域高度*/\r\n            resetTextAreaHeight: throttle(() => {\r\n                if (!!props.autoHeight && !!props.textarea) {\r\n                    setTimeout(() => state.autoHeight = refs.hiddenInput!.scrollHeight + 12, 0)\r\n                }\r\n            }, 300),\r\n        }\r\n\r\n        /*---------------------------------------watcher-------------------------------------------*/\r\n\r\n        watch(() => model.value, () => {\r\n            methods.resetTextAreaHeight()\r\n        })\r\n        watch(() => props.throttleEnter, (val) => {\r\n            if (!val) {\r\n                state.handlerEnter = state.handleEnterInner\r\n            }\r\n            if (val === true) {\r\n                val = 1000\r\n            }\r\n            state.handlerEnter = throttle(state.handleEnterInner, val as number, {trailing: true})\r\n        }, {immediate: true})\r\n\r\n        onMounted(() => {\r\n            if (props.textarea) {\r\n                methods.resetTextAreaHeight()\r\n            }\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                refs,\r\n                state,\r\n                propsState,\r\n                methods,\r\n                model,\r\n            },\r\n            render: () => {\r\n\r\n                if (props.textarea) {\r\n                    /*渲染文本域*/\r\n                    return (\r\n                        <div class={['pl-textarea', classes.value]}>\r\n                            <textarea class=\"pl-textarea-inner\" {...publicProps.value}/>\r\n                            <textarea class=\"pl-textarea-inner pl-textarea-hidden\" ref=\"hiddenInput\" value={model.value}/>\r\n                        </div>\r\n                    )\r\n                } else {\r\n                    /*普通输入框*/\r\n                    const input = (\r\n                        <div class={['pl-input', classes.value]}>\r\n                            {!!props.prefixIcon && <span class=\"pl-input-prefix-icon\" onClick={handler.clickPrefixIcon}><PlIcon icon={props.prefixIcon}/></span>}\r\n\r\n                            {slots.default.isExist() ?\r\n                                <div tabIndex={props.inputInnerTabindex} class=\"pl-input-inner\" {...publicProps.value}>\r\n                                    {slots.default()}\r\n                                </div>\r\n                                :\r\n                                <input class=\"pl-input-inner\" {...publicProps.value}/>}\r\n\r\n                            {!!props.suffixIcon && <span class=\"pl-input-suffix-icon\">\r\n                                {typeof props.suffixIcon === 'function' ? (props.suffixIcon as any)() : <PlIcon {...createEventListener({onMousedown: handler.clickSuffixIcon})} icon={props.suffixIcon}/>}\r\n                            </span>}\r\n                            {!!props.clearIcon && (<span class=\"pl-input-suffix-icon pl-input-clear-icon\"><PlIcon {...createEventListener({onMousedown: handler.clickClearIcon})} icon=\"el-icon-error\"/></span>)}\r\n                            {!!editComputed.value.loading && <PlLoading class=\"pl-input-suffix-icon\"/>}\r\n                            {slots.hidden.isExist() && <div class=\"pl-input-inner-hidden\">{slots.hidden()}</div>}\r\n                        </div>\r\n                    )\r\n\r\n                    if (!slots.prepend.isExist() && !slots.append.isExist()) {\r\n                        return input\r\n                    } else {\r\n                        /*输入框组*/\r\n                        return (\r\n                            <div class=\"pl-input-group\">\r\n                                {slots.prepend.isExist() && <div class=\"pl-input-prepend\">{slots.prepend()}</div>}\r\n                                {input}\r\n                                {slots.append.isExist() && <div class=\"pl-input-append\">{slots.append()}</div>}\r\n                            </div>\r\n                        )\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n})","/**\r\n * 创建一个报错对象\r\n * @author  韦胜健\r\n * @date    2020/10/15 10:33\r\n */\r\nexport function createError(tag: string) {\r\n    return (msg: string, isLog?: boolean) => {\r\n        const message = `${tag}:${msg}`\r\n        const log = isLog == null ? true : isLog\r\n        if (log) {\r\n            console.error(message)\r\n        } else {\r\n            throw new Error(message)\r\n        }\r\n    }\r\n}","import {ref, onBeforeUpdate, Ref} from 'vue';\r\n\r\ninterface UseRefList {\r\n    <T = any>(reactive: true): Ref<T[]>\r\n\r\n    <T = any>(): T[]\r\n}\r\n\r\nexport const useRefList: UseRefList = <T>(reactive?: boolean) => {\r\n    if (reactive) {\r\n        const refs = ref([] as T[])\r\n        onBeforeUpdate(() => refs.value = [])\r\n        return refs\r\n    } else {\r\n        const refs = [] as any\r\n        onBeforeUpdate(() => refs.splice(0, refs.length))\r\n        return refs\r\n    }\r\n}\r\n","import {PlainLoading} from 'plain-loading/src/index'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {computed, watch} from 'vue';\r\nimport './loading.scss'\r\nimport {delay} from \"plain-utils/utils/delay\";\r\n\r\nexport const PlLoading = designComponent({\r\n    name: 'pl-loading',\r\n    props: {\r\n        type: {type: String, default: 'alpha'},\r\n        status: {type: String, default: null},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLElement,\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-loading',\r\n            !!props.status ? `pl-loading-status-${props.status}` : null,\r\n        ])\r\n\r\n        watch(() => props.type, async val => {\r\n            if (!val) {\r\n                return refs.el.innerHTML = ''\r\n            }\r\n            await delay(23)\r\n            if (!(PlainLoading as any)[val]) {\r\n                throw new Error(`pl-loading: un recognise type:${val}`)\r\n            }\r\n            !!refs.el && (refs.el.innerHTML = (PlainLoading as any)[val]().outerHTML)\r\n        }, {immediate: true})\r\n\r\n        return {\r\n            render: () => {\r\n                return <i class={classes.value} ref=\"el\"/>\r\n            }\r\n        }\r\n    },\r\n})","export function getElement(ref: any): HTMLElement | null {\r\n\r\n    if (!ref) {\r\n        return null\r\n    }\r\n\r\n    if (!!ref.$el) {\r\n        return getElement(ref.$el)\r\n    }\r\n\r\n    if (ref.nodeType !== 3) {\r\n        return ref\r\n    }\r\n\r\n    return !!ref.data ? ref : ref.nextElementSibling\r\n\r\n}","import {PopperTrigger, PopperTriggerType} from \"./PopperTrigger\";\r\nimport {SimpleFunction} from \"../../../shims\";\r\n\r\nexport function getBaseTrigger(\r\n    triggerName: PopperTriggerType,\r\n    {\r\n        model,\r\n        openModel,\r\n\r\n        show,\r\n        hide,\r\n\r\n        hoverOpenDelay,\r\n        hoverCloseDelay,\r\n        reference,\r\n\r\n        on,\r\n        off,\r\n        emit,\r\n    }: {\r\n        model: { value: boolean | undefined },\r\n        openModel: { value: boolean | undefined },\r\n\r\n        show: SimpleFunction,\r\n        hide: SimpleFunction,\r\n\r\n        hoverOpenDelay: number,\r\n        hoverCloseDelay: number,\r\n        reference: HTMLElement,\r\n\r\n        on: {\r\n            onEnterReference: SimpleFunction,\r\n            onLeaveReference: SimpleFunction,\r\n\r\n            onEnterPopper: SimpleFunction,\r\n            onLeavePopper: SimpleFunction,\r\n\r\n            onReferenceFocus: SimpleFunction,\r\n            onReferenceBlur: SimpleFunction,\r\n\r\n            onClickReference: SimpleFunction,\r\n            onClickBody: SimpleFunction,\r\n            onClickPopper: SimpleFunction,\r\n        },\r\n        off: {\r\n            onEnterReference: SimpleFunction,\r\n            onLeaveReference: SimpleFunction,\r\n\r\n            onEnterPopper: SimpleFunction,\r\n            onLeavePopper: SimpleFunction,\r\n\r\n            onReferenceFocus: SimpleFunction,\r\n            onReferenceBlur: SimpleFunction,\r\n\r\n            onClickReference: SimpleFunction,\r\n            onClickBody: SimpleFunction,\r\n            onClickPopper: SimpleFunction,\r\n        },\r\n        emit: {\r\n            onReferenceFocus: SimpleFunction,\r\n            onReferenceBlur: SimpleFunction,\r\n\r\n            onEnterReference: SimpleFunction,\r\n            onLeaveReference: SimpleFunction,\r\n\r\n            onEnterPopper: SimpleFunction,\r\n            onLeavePopper: SimpleFunction,\r\n        },\r\n    },\r\n) {\r\n    switch (triggerName) {\r\n        case PopperTriggerType.hover:\r\n            return getHoverTrigger({\r\n                model,\r\n                show,\r\n                hide,\r\n                hoverOpenDelay,\r\n                hoverCloseDelay,\r\n                on,\r\n                off,\r\n                emit,\r\n            })\r\n        case PopperTriggerType.click:\r\n            return getClickTrigger({\r\n                model,\r\n                show,\r\n                hide,\r\n                openModel,\r\n                on,\r\n                off,\r\n            })\r\n        case PopperTriggerType.focus:\r\n            return getFocusTrigger({\r\n                show,\r\n                hide,\r\n                reference,\r\n                on,\r\n                off,\r\n                emit,\r\n            })\r\n        case PopperTriggerType.manual:\r\n            return getManualTrigger()\r\n    }\r\n}\r\n\r\nfunction getHoverTrigger({\r\n                             model,\r\n                             show,\r\n                             hide,\r\n                             hoverOpenDelay,\r\n                             hoverCloseDelay,\r\n\r\n                             on,\r\n                             off,\r\n                             emit,\r\n                         }: {\r\n    model: { value: boolean | undefined },\r\n    show: Function,\r\n    hide: Function,\r\n    hoverOpenDelay: number,\r\n    hoverCloseDelay: number,\r\n\r\n    on: {\r\n        onEnterReference: Function,\r\n        onLeaveReference: Function,\r\n\r\n        onEnterPopper: Function,\r\n        onLeavePopper: Function,\r\n\r\n        onReferenceFocus: Function,\r\n        onReferenceBlur: Function,\r\n\r\n        onClickReference: Function,\r\n        onClickPopper: Function,\r\n    },\r\n    off: {\r\n        onEnterReference: Function,\r\n        onLeaveReference: Function,\r\n\r\n        onEnterPopper: Function,\r\n        onLeavePopper: Function,\r\n\r\n        onReferenceFocus: Function,\r\n        onReferenceBlur: Function,\r\n\r\n        onClickReference: Function,\r\n        onClickPopper: Function,\r\n    },\r\n    emit: {\r\n        onReferenceFocus: Function,\r\n        onReferenceBlur: Function,\r\n\r\n        onEnterReference: Function,\r\n        onLeaveReference: Function,\r\n\r\n        onEnterPopper: Function,\r\n        onLeavePopper: Function,\r\n    },\r\n}) {\r\n    let closeTimer: number | undefined;\r\n    let openTimer: number | undefined;\r\n\r\n    const handler = {\r\n        reference: {\r\n            enter: () => {\r\n                if (!!closeTimer) {\r\n                    clearTimeout(closeTimer)\r\n                    closeTimer = undefined\r\n                }\r\n                openTimer = setTimeout(() => {\r\n                    show()\r\n                    openTimer = undefined\r\n                    emit.onEnterReference(model.value)\r\n                }, hoverOpenDelay)\r\n            },\r\n            leave: () => {\r\n                if (!!openTimer) {\r\n                    clearTimeout(openTimer)\r\n                    openTimer = undefined\r\n                }\r\n                closeTimer = setTimeout(() => {\r\n                    hide()\r\n                    closeTimer = undefined\r\n                    emit.onLeaveReference(model.value)\r\n                }, hoverCloseDelay)\r\n            },\r\n        },\r\n        popper: {\r\n            enter: () => {\r\n                if (!!closeTimer) {\r\n                    clearTimeout(closeTimer)\r\n                    closeTimer = undefined\r\n                }\r\n                openTimer = setTimeout(() => {\r\n                    show()\r\n                    openTimer = undefined\r\n                    emit.onEnterPopper(model.value)\r\n                }, hoverOpenDelay)\r\n            },\r\n            leave: () => {\r\n                if (!!openTimer) {\r\n                    clearTimeout(openTimer)\r\n                    openTimer = undefined\r\n                }\r\n                closeTimer = setTimeout(() => {\r\n                    hide()\r\n                    closeTimer = undefined\r\n                    emit.onLeavePopper(model.value)\r\n                }, hoverCloseDelay)\r\n            },\r\n        },\r\n    }\r\n\r\n    return new PopperTrigger(\r\n        PopperTriggerType.hover,\r\n        () => {\r\n            on.onEnterReference(handler.reference.enter)\r\n            on.onLeaveReference(handler.reference.leave)\r\n\r\n            on.onEnterPopper(handler.popper.enter)\r\n            on.onLeavePopper(handler.popper.leave)\r\n        },\r\n        () => {\r\n            off.onEnterReference(handler.reference.enter)\r\n            off.onLeaveReference(handler.reference.leave)\r\n\r\n            off.onEnterPopper(handler.popper.enter)\r\n            off.onLeavePopper(handler.popper.leave)\r\n        }\r\n    )\r\n}\r\n\r\nfunction getClickTrigger({\r\n                             model,\r\n                             show,\r\n                             hide,\r\n                             openModel,\r\n                             on,\r\n                             off,\r\n                         }: {\r\n    model: { value: boolean | undefined },\r\n    show: Function,\r\n    hide: Function,\r\n    openModel: { value: boolean | undefined },\r\n\r\n    on: {\r\n        onClickReference: Function,\r\n        onClickBody: Function,\r\n    },\r\n    off: {\r\n        onClickReference: Function,\r\n        onClickBody: Function,\r\n    },\r\n\r\n}) {\r\n\r\n    const handler = {\r\n        onClickReference: () => {\r\n            if (model.value) {\r\n                hide()\r\n            } else {\r\n                show()\r\n            }\r\n        },\r\n        onClickBody: () => {\r\n            if (openModel.value) {\r\n                hide()\r\n            }\r\n        },\r\n    }\r\n\r\n    return new PopperTrigger(\r\n        PopperTriggerType.click,\r\n        () => {\r\n            on.onClickReference(handler.onClickReference)\r\n            on.onClickBody(handler.onClickBody)\r\n        },\r\n        () => {\r\n            off.onClickReference(handler.onClickReference)\r\n            off.onClickBody(handler.onClickBody)\r\n        },\r\n    )\r\n}\r\n\r\nfunction getFocusTrigger(\r\n    {\r\n        show,\r\n        hide,\r\n        reference,\r\n        on,\r\n        off,\r\n        emit,\r\n    }: {\r\n        show: Function,\r\n        hide: Function,\r\n        reference: HTMLElement,\r\n\r\n        on: {\r\n            onReferenceFocus: Function,\r\n            onReferenceBlur: Function,\r\n        },\r\n        off: {\r\n            onReferenceFocus: Function,\r\n            onReferenceBlur: Function,\r\n        },\r\n        emit: {\r\n            onReferenceFocus: Function,\r\n            onReferenceBlur: Function,\r\n        },\r\n    }\r\n) {\r\n\r\n    let oldTabIndex: string | null;\r\n    const handler = {\r\n        focus: (e: FocusEvent) => {\r\n            emit.onReferenceFocus(e)\r\n            show()\r\n        },\r\n        blur: (e: Event) => {\r\n            emit.onReferenceBlur(e)\r\n            hide()\r\n        },\r\n    }\r\n\r\n    return new PopperTrigger(PopperTriggerType.focus,\r\n        () => {\r\n            oldTabIndex = reference.getAttribute('tabindex')\r\n            if (oldTabIndex == null) {\r\n                reference.setAttribute('tabindex', '0')\r\n            }\r\n            on.onReferenceFocus(handler.focus)\r\n            on.onReferenceBlur(handler.blur)\r\n        },\r\n        () => {\r\n            if (oldTabIndex == null) {\r\n                reference.removeAttribute('tabindex')\r\n            } else {\r\n                reference.setAttribute('tabindex', oldTabIndex)\r\n            }\r\n            off.onReferenceFocus(handler.focus)\r\n            off.onReferenceBlur(handler.blur)\r\n        },\r\n    )\r\n}\r\n\r\nfunction getManualTrigger() {\r\n    return new PopperTrigger(PopperTriggerType.manual,\r\n        () => undefined,\r\n        () => undefined,\r\n    )\r\n}","import {getBaseTrigger} from \"./BaseTrigger\";\r\nimport {SimpleFunction} from \"../../../shims\";\r\n\r\nexport class PopperTrigger {\r\n    data: any\r\n\r\n    constructor(\r\n        public name: PopperTriggerType,     // 触发器名称\r\n        public init: Function,              // 触发器初始化的时候执行函数\r\n        public destroy: Function            // 触发器销毁的时候执行函数\r\n    ) {\r\n    }\r\n}\r\n\r\nexport enum PopperTriggerType {\r\n    hover = 'hover',\r\n    click = 'click',\r\n    focus = 'focus',\r\n    manual = 'manual'\r\n}\r\n\r\nexport function getPopperTrigger(triggerName: PopperTriggerType, {\r\n    model,\r\n    openModel,\r\n\r\n    show,\r\n    hide,\r\n\r\n    hoverOpenDelay,\r\n    hoverCloseDelay,\r\n    reference,\r\n\r\n    on,\r\n    off,\r\n    emit,\r\n}: {\r\n    model: { value: boolean | undefined },\r\n    openModel: { value: boolean | undefined },\r\n\r\n    show: SimpleFunction,\r\n    hide: SimpleFunction,\r\n\r\n    hoverOpenDelay: number,\r\n    hoverCloseDelay: number,\r\n    reference: HTMLElement,\r\n\r\n    on: {\r\n        onClickReference: SimpleFunction,\r\n        onClickBody: SimpleFunction,\r\n        onClickPopper: SimpleFunction,\r\n        onEnterPopper: SimpleFunction,\r\n        onLeavePopper: SimpleFunction,\r\n    },\r\n    off: {\r\n        onClickReference: SimpleFunction,\r\n        onClickBody: SimpleFunction,\r\n        onClickPopper: SimpleFunction,\r\n        onEnterPopper: SimpleFunction,\r\n        onLeavePopper: SimpleFunction,\r\n    },\r\n    emit: {\r\n        onReferenceFocus: SimpleFunction,\r\n        onReferenceBlur: SimpleFunction,\r\n        onEnterReference: SimpleFunction,\r\n        onLeaveReference: SimpleFunction,\r\n        onEnterPopper: SimpleFunction,\r\n        onLeavePopper: SimpleFunction,\r\n    },\r\n\r\n}) {\r\n    return getBaseTrigger(triggerName, {\r\n        model,\r\n        openModel,\r\n        show,\r\n        hide,\r\n\r\n        hoverOpenDelay,\r\n        hoverCloseDelay,\r\n        reference,\r\n\r\n        on: {\r\n            onEnterReference: (cb) => reference.addEventListener('mouseenter', cb),\r\n            onLeaveReference: (cb) => reference.addEventListener('mouseleave', cb),\r\n            onReferenceFocus: (cb) => reference.addEventListener('focus', cb),\r\n            onReferenceBlur: (cb) => reference.addEventListener('blur', cb),\r\n\r\n            onEnterPopper: on.onEnterPopper,\r\n            onLeavePopper: on.onLeavePopper,\r\n            onClickReference: on.onClickReference,\r\n            onClickBody: on.onClickBody,\r\n            onClickPopper: on.onClickPopper,\r\n        },\r\n        off: {\r\n            onEnterReference: (cb) => reference.removeEventListener('mouseenter', cb),\r\n            onLeaveReference: (cb) => reference.removeEventListener('mouseleave', cb),\r\n            onReferenceFocus: (cb) => reference.removeEventListener('focus', cb),\r\n            onReferenceBlur: (cb) => reference.removeEventListener('blur', cb),\r\n\r\n            onEnterPopper: off.onEnterPopper,\r\n            onLeavePopper: off.onLeavePopper,\r\n            onClickReference: off.onClickReference,\r\n            onClickBody: off.onClickBody,\r\n            onClickPopper: off.onClickPopper,\r\n        },\r\n        emit: emit,\r\n    })\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {computed, onMounted, createCommentVNode, Teleport, reactive, markRaw, nextTick, watch, getCurrentInstance, onBeforeUnmount, PropType} from 'vue';\r\nimport {createError} from \"../../utils/createError\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {getElement} from \"../../utils/getElement\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {PlainPopper} from 'plain-popper'\r\nimport {SimpleFunction} from \"../../shims\";\r\nimport {getPopperTrigger, PopperTrigger, PopperTriggerType} from \"./trigger/PopperTrigger\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\nimport './popper.scss'\r\nimport {refreshPopperReference} from \"./refershPopperReference\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {PlScroll} from '../scroll/scroll';\r\n\r\nconst error = createError('pl-popper')\r\n\r\nexport const PlPopper = designComponent({\r\n    name: 'pl-popper',\r\n    props: {\r\n        modelValue: {type: Boolean},                                // 双向绑定值，当前是否打开\r\n        open: {type: Boolean},                                      // 双向绑定值，当前是否已经打开\r\n        trigger: {type: String, default: 'hover'},                  // 触发动作， hover,click,focus,manual,always\r\n\r\n        title: {type: String},                                      // 标题文本\r\n        message: {type: String},                                    // 内容文本\r\n        disabled: {type: Boolean},                                  // 禁用\r\n        transition: {type: String, default: 'pl-transition-fade'},  // 动画名称：pl-transition-fade, pl-transition-scale, pl-transition-scale-y, pl-transition-popper-drop\r\n        popperClass: {type: [String, Array, Object]},               // popper容器节点样式\r\n        offset: {type: [Number, String]},                           // 偏移量\r\n        width: {type: [Number, String]},                            // 宽度\r\n        height: {type: [Number, String]},                           // 高度\r\n        hoverOpenDelay: {type: [Number, String], default: 0},       // hover触发条件下，打开延迟时间\r\n        hoverCloseDelay: {type: [Number, String], default: 200},    // hover触发条件下，关闭延迟时间\r\n        noContentPadding: {type: Boolean},                          // 去掉默认内容内边距\r\n\r\n        reference: {type: [Function, Element] as PropType<HTMLElement | (() => HTMLElement)>},// 目标dom元素\r\n        placement: {type: String, default: 'bottom-start'},         // 位置\r\n        arrow: {type: Boolean, default: true},                      // 是否需要箭头\r\n\r\n        boundary: {default: 'window'},                              // 边界元素\r\n        sizeEqual: {type: Boolean},                                 // 与reference在方向上大小相等\r\n        scrollAttrs: {type: Object},                                // pl-scroll 属性配置\r\n        popperAttrs: {type: Object},                                // 给popper dom节点传递的属性\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true,\r\n        onUpdateOpen: (val: boolean) => true,\r\n        onInit: () => true,\r\n        onDestroy: () => true,\r\n        onOpen: () => true,\r\n        onClose: () => true,\r\n        onShow: () => true,\r\n        onHide: () => true,\r\n\r\n        onClickReference: (e: MouseEvent) => true,\r\n        onClickPopper: (e: MouseEvent) => true,\r\n        onClickBody: (e: MouseEvent) => true,\r\n        onMousedownPopper: (e: MouseEvent) => true,\r\n\r\n        onEnterReference: (e: MouseEvent) => true,\r\n        onLeaveReference: (e: MouseEvent) => true,\r\n        onEnterPopper: (e: MouseEvent) => true,\r\n        onLeavePopper: (e: MouseEvent) => true,\r\n        onReferenceFocus: (e: FocusEvent) => true,\r\n        onReferenceBlur: (e: Event) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {emit, on, off} = event\r\n\r\n        const {slots} = useSlots([\r\n            'popper',\r\n            'title',\r\n        ], true)\r\n\r\n        const {refs} = useRefs({\r\n            comment: HTMLElement,                                               // 注释节点，用来查找reference的第一个节点\r\n            popper: HTMLDivElement,                                             // popper div 节点\r\n            content: HTMLDivElement,                                            // popper content 节点\r\n        });\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const {propsState} = useProps(props, {\r\n            hoverOpenDelay: useProps.NUMBER,\r\n            hoverCloseDelay: useProps.NUMBER,\r\n            offset: useProps.NUMBER,\r\n            width: useProps.NUMBER,\r\n            height: useProps.NUMBER,\r\n        })\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoEmit: false, autoWatch: false})\r\n        const openModel = useModel(() => props.open, emit.onUpdateOpen, {autoEmit: false, autoWatch: false})\r\n\r\n        const state = reactive({\r\n            el: {\r\n                popper: null as null | HTMLElement,                             // popper 节点\r\n                comment: null as null | HTMLElement,                            // comment 节点\r\n                reference: null as null | HTMLElement,                          // comment.nextElementSibling，也就是 reference 的第一个节点\r\n            },\r\n            referenceEl: null as null | HTMLElement,                            // 真正的 reference 对象获取方法\r\n            zIndex: nextIndex(),                                                // popper zIndex值\r\n            onTransitionend: null as null | ((e: Event) => void),               // 当show或者hide，需要监听一次 transitionend事件，所以这里有可能是null\r\n            init: false,                                                        // 当前是否已经初始化popper content及其Popper对象\r\n            popper: null as null | PlainPopper,                                 // PlainPopper 对象\r\n            trigger: null as null | PopperTrigger,                              // 触发类型\r\n        })\r\n\r\n        /**\r\n         * 检查默认插槽中是否存在多个节点，如果是则发出警告\r\n         * @author  韦胜健\r\n         * @date    2020/11/17 9:45\r\n         */\r\n        const referenceVNode = computed(() => {\r\n            const slot = slots.default() as any\r\n            if (!slot) {\r\n                return null\r\n            }\r\n            if (slot.length > 1) {\r\n                error('allows only one child node!')\r\n            }\r\n            return slot[0]\r\n        })\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        /**\r\n         * 当前方向，用来配置sizeEqual使用\r\n         * @author  韦胜健\r\n         * @date    2020/11/17 10:49\r\n         */\r\n        const direction = computed(() => {\r\n            const [direction] = props.placement.split('-')\r\n            return direction as 'top' | 'bottom' | 'left' | 'right'\r\n        })\r\n\r\n        const popperClasses = computed(() => [\r\n            'pl-popper',\r\n            'plain-popper',\r\n            props.transition,\r\n            props.popperClass,\r\n            {\r\n                'pl-popper-show': model.value,\r\n                'pl-popper-open': openModel.value,\r\n                // 'pl-popper-ready': state.ready,\r\n                'pl-popper-show-arrow': props.arrow,\r\n                'pl-popper-no-content-padding': props.noContentPadding,\r\n            }\r\n        ])\r\n\r\n        const popperStyles = useStyles(style => {\r\n            style.zIndex = state.zIndex\r\n        })\r\n\r\n        const sizeStyles = useStyles(styles => {\r\n            propsState.height != null && (styles.height = `${propsState.height}px`);\r\n            propsState.width != null && (styles.width = `${propsState.width}px`);\r\n            if (!!props.sizeEqual && !!state.referenceEl) {\r\n                if (['top', 'bottom'].indexOf(direction.value) > -1) {\r\n                    styles.width = (state.referenceEl as HTMLElement).offsetWidth + 'px'\r\n                } else if (['left', 'right'].indexOf(direction.value) > -1) {\r\n                    styles.height = (state.referenceEl as HTMLElement).offsetHeight + 'px'\r\n                }\r\n            }\r\n            return styles\r\n        })\r\n\r\n        const scrollAttrs = computed(() => {\r\n            if (!propsState.height) {\r\n                return null\r\n            } else {\r\n                return Object.assign({\r\n                    fitHostWidth: true,\r\n                }, props.scrollAttrs)\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            onPopperContentTransitionend: (e: Event) => !!state.onTransitionend && state.onTransitionend(e),\r\n            onClickReference: (e: MouseEvent) => {\r\n                emit.onClickReference(e)\r\n            },\r\n            onClickPopper: (e: MouseEvent) => {\r\n                emit.onClickPopper(e)\r\n            },\r\n            onClickBody: (e: MouseEvent) => {\r\n                if (!model.value && !openModel.value) {\r\n                    return;\r\n                }\r\n                if (state.referenceEl!.contains(e.target as Node)) {\r\n                    /*点击了reference*/\r\n                    return\r\n                }\r\n                if (!!refs.content && refs.content!.contains(e.target as Node)) {\r\n                    /*点击了content*/\r\n                    return\r\n                }\r\n                emit.onClickBody(e)\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            init: (): boolean => {\r\n                let {comment, reference} = state.el\r\n                if (!!comment && !!reference) {\r\n                    state.referenceEl = reference\r\n                } else if (!!props.reference) {\r\n                    state.referenceEl = getElement(typeof props.reference === \"function\" ? (props.reference as SimpleFunction)() : props.reference)\r\n                } else {\r\n                    /*没有reference，等待reference初始化在初始化popper*/\r\n                    return false\r\n                }\r\n                utils.bindEvents()\r\n\r\n                state.trigger = getPopperTrigger(props.trigger as PopperTriggerType, {\r\n                    model,\r\n                    openModel: openModel,\r\n                    show: methods.show,\r\n                    hide: methods.hide,\r\n\r\n                    hoverOpenDelay: propsState.hoverOpenDelay as number,\r\n                    hoverCloseDelay: propsState.hoverCloseDelay as number,\r\n\r\n                    reference: state.referenceEl as HTMLElement,\r\n\r\n                    on,\r\n                    off,\r\n                    emit,\r\n                })\r\n\r\n                state.trigger.init()\r\n                emit.onInit()\r\n\r\n                return true\r\n            },\r\n            destroy: () => {\r\n                utils.unbindEvents()\r\n                if (!!state.trigger) {\r\n                    state.trigger.destroy()\r\n                }\r\n                if (!!state.popper) {\r\n                    state.popper.destroy()\r\n                }\r\n                emit.onDestroy()\r\n            },\r\n            bindEvents: () => {\r\n                if (!!state.referenceEl) {\r\n                    state.referenceEl.addEventListener('click', handler.onClickReference)\r\n                }\r\n                document.body.addEventListener('click', handler.onClickBody, true)\r\n            },\r\n            unbindEvents: () => {\r\n                if (!!state.referenceEl) {\r\n                    state.referenceEl.removeEventListener('click', handler.onClickReference)\r\n                }\r\n                document.body.removeEventListener('click', handler.onClickBody, true)\r\n            },\r\n            initPopper: () => {\r\n                state.popper = new PlainPopper({\r\n                    popper: refs.popper,\r\n                    reference: state.referenceEl!,\r\n                    padding: 50,\r\n                    placement: props.placement as any,\r\n                    offset: Number(props.offset || (!!props.arrow ? 0 : 2)),\r\n                    boundary: props.boundary,\r\n                    arrowSize: !props.arrow ? 0 : undefined,\r\n                    shouldUpdate: () => !!model.value\r\n                })\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            show: async (shouldEmit = true) => {\r\n                if (props.disabled) {\r\n                    return\r\n                }\r\n                if (!state.init) {\r\n                    state.init = true\r\n                    await nextTick()\r\n                    await utils.initPopper()\r\n                }\r\n                state.popper!.refresh()\r\n\r\n                /*这里要有一定的延迟，否则popper的属性 direction以及align更新没有结束，导致动画的方向不对*/\r\n                await nextTick()\r\n                await delay(50)\r\n\r\n                state.zIndex = nextIndex()\r\n                model.value = true\r\n                emit.onShow()\r\n                if (shouldEmit) {\r\n                    emit.onUpdateModelValue(model.value)\r\n                }\r\n                state.onTransitionend = () => {\r\n                    openModel.value = true\r\n                    state.onTransitionend = null\r\n                }\r\n            },\r\n            hide: (shouldEmit = true) => {\r\n                model.value = false\r\n                emit.onHide()\r\n                if (shouldEmit) {\r\n                    emit.onUpdateModelValue(model.value)\r\n                }\r\n                state.onTransitionend = () => {\r\n                    openModel.value = false\r\n                    state.onTransitionend = null\r\n                }\r\n            },\r\n            toggle: async () => {\r\n                model.value ? await methods.hide() : await methods.show()\r\n            },\r\n            refresh: () => {\r\n                if (!state.referenceEl) return\r\n                state.popper!.refresh()\r\n            },\r\n            refreshReference: async () => {\r\n                await nextTick()\r\n                const comment = getElement(refs.comment)\r\n                const reference = !!comment ? comment!.nextElementSibling as HTMLElement : null\r\n                // console.log(reference, state.el.reference)\r\n                if (!!reference && reference !== state.el.reference) {\r\n                    await utils.destroy()\r\n                    state.el.reference = markRaw(reference)\r\n                    await utils.init()\r\n                }\r\n            }\r\n        }\r\n\r\n        onMounted(async () => {\r\n\r\n            const popper = getElement(refs.popper)\r\n            const comment = getElement(refs.comment)\r\n            const reference = !!comment ? comment!.nextElementSibling as HTMLElement : null\r\n            // console.log({popper, comment, reference})\r\n\r\n            state.el = markRaw({popper, comment, reference})\r\n\r\n            await utils.init()\r\n            if (model.value) {\r\n                await methods.show(false)\r\n            }\r\n        })\r\n\r\n        onBeforeUnmount(() => utils.destroy())\r\n        refreshPopperReference.provide(methods.refreshReference)\r\n\r\n        /*---------------------------------------watch-------------------------------------------*/\r\n        watch(() => props.modelValue, (val) => {\r\n            if (val === model.value) {\r\n                return\r\n            }\r\n            if (val) {\r\n                methods.show(false)\r\n            } else {\r\n                methods.hide(false)\r\n            }\r\n        })\r\n        // watch(() => model.value, (val) => {})\r\n        watch(() => openModel.value, (val) => {\r\n            if (!!val) {\r\n                emit.onUpdateOpen(true)\r\n                emit.onOpen()\r\n            } else {\r\n                emit.onUpdateOpen(false)\r\n                emit.onClose()\r\n            }\r\n        })\r\n        watch(() => props.placement, (val) => {\r\n            if (!!state.popper) {\r\n                state.popper.setPlacement(val as any)\r\n            }\r\n        })\r\n\r\n        const ctx = getCurrentInstance()!\r\n        const popperConfigChangeHandler = debounce(async () => {\r\n            // console.log('popperConfigChangeHandler')\r\n            await nextTick()\r\n            if (ctx.isUnmounted) {\r\n                return\r\n            }\r\n            await utils.destroy()\r\n            await utils.init()\r\n            if (!state.referenceEl) {\r\n                if (!!state.popper) {\r\n                    state.popper.destroy()\r\n                    state.popper = null\r\n                }\r\n                return\r\n            }\r\n            if (!!state.popper) {\r\n                await utils.initPopper()\r\n            }\r\n        }, 50)\r\n        watch(() => props.reference, popperConfigChangeHandler)\r\n        watch(() => props.arrow, popperConfigChangeHandler)\r\n        watch(() => props.trigger, popperConfigChangeHandler)\r\n\r\n        /*---------------------------------------render-------------------------------------------*/\r\n\r\n        const Comment = createCommentVNode('') as any\r\n\r\n        return {\r\n            refer: {\r\n                event,\r\n                state,\r\n                ...methods,\r\n            },\r\n            render: () => {\r\n                const {value: ReferenceVNode} = referenceVNode\r\n                return (\r\n                    <>\r\n                        {/*如果没有reference，则不渲染comment节点*/}\r\n                        {!!ReferenceVNode && <>\r\n                            <Comment ref=\"comment\"/>\r\n                            <ReferenceVNode/>\r\n                        </>}\r\n\r\n                        {state.init && <Teleport to=\".pl-root-service-container\">\r\n                            <div class={popperClasses.value}\r\n                                 style={popperStyles.value}\r\n                                 {...(props.popperAttrs || {})}\r\n                                 ref=\"popper\">\r\n                                <div class=\"plain-popper-content\"\r\n                                     ref=\"content\"\r\n\r\n                                     onClick={emit.onClickPopper}\r\n                                     onTransitionend={handler.onPopperContentTransitionend}\r\n                                     onMousedown={emit.onMousedownPopper}\r\n                                     {...(props.trigger === 'hover' ? {\r\n                                         onMouseenter: emit.onEnterPopper,\r\n                                         onMouseleave: emit.onLeavePopper,\r\n                                     } : {})}\r\n                                >\r\n                                    <div class=\"plain-popper-arrow\"/>\r\n                                    {(props.title || slots.title.isExist()) && <div class=\"pl-popper-title\">\r\n                                        {props.title || slots.title()}\r\n                                    </div>}\r\n                                    {(props.message || slots.popper.isExist()) && <div class=\"pl-popper-content-inner\" style={sizeStyles.value}>\r\n                                        {!!scrollAttrs.value ? (\r\n                                            <PlScroll {...scrollAttrs.value}>\r\n                                                {props.message || slots.popper()}\r\n                                            </PlScroll>\r\n                                        ) : (props.message || slots.popper())}\r\n                                    </div>}\r\n                                </div>\r\n                            </div>\r\n                        </Teleport>}\r\n                    </>\r\n                )\r\n            }\r\n        }\r\n    },\r\n}, {\r\n    refreshPopperReference,\r\n})","interface Defer {\r\n    (): {\r\n        resolve: () => void,\r\n        reject: (...args: any[]) => void,\r\n        promise: Promise<void>\r\n    },\r\n\r\n    <T>(): {\r\n        resolve: (val: T) => void,\r\n        reject: (...args: any[]) => void,\r\n        promise: Promise<T>\r\n    },\r\n}\r\n\r\nexport const defer: Defer = () => {\r\n    const dfd = {} as any\r\n    dfd.promise = new Promise((resolve, reject) => {\r\n        dfd.resolve = resolve as any\r\n        dfd.reject = reject\r\n    })\r\n    return dfd\r\n}","import {reactive, watch} from 'vue'\r\nimport {toArray} from \"../utils/toArray\";\r\n\r\nexport enum FormatPropType {\r\n    PROMISE = 'PROMISE',\r\n    FUNCTION = 'FUNCTION',\r\n    NUMBER = 'NUMBER',\r\n}\r\n\r\n/**\r\n * ignorePromise:第一次获取值的时候，忽略Promise格式化，而是通过 watch immediate 来实现赋值\r\n * @author  韦胜健\r\n * @date    2020/10/30 15:29\r\n */\r\nasync function usePropsFormatter(state: any, key: string, val: any, types: FormatPropType | FormatPropType[]): Promise<void> {\r\n\r\n    if (val == null) {\r\n        state[key] = val\r\n        return\r\n    }\r\n\r\n    const formatTypes = toArray(types)\r\n\r\n    if (formatTypes.indexOf(FormatPropType.PROMISE) > -1 && !!val.then && typeof val.then === 'function') {\r\n        val = await val\r\n    }\r\n\r\n    if (formatTypes.indexOf(FormatPropType.FUNCTION) > -1 && typeof val === \"function\") {\r\n        val = val()\r\n    }\r\n\r\n    if (formatTypes.indexOf(FormatPropType.NUMBER) > -1 && typeof val === \"string\") {\r\n        if (/^[\\d]+$/.test(val)) {\r\n            val = Number(val)\r\n        } else {\r\n            if (val.lastIndexOf('px') === val.length - 2) {\r\n                val = Number(val.replace('px', ''))\r\n            }\r\n        }\r\n    }\r\n\r\n    state[key] = val\r\n}\r\n\r\nfunction usePropsInner<Props extends { [k: string]: any },\r\n    Config extends Partial<{ [k in keyof Props]: FormatPropType | FormatPropType[] }>>\r\n(\r\n    props: Props,\r\n    config: Config\r\n) {\r\n\r\n    const configKeys = Object.keys(config)\r\n\r\n    const formatConfig: { [k in keyof Props]: FormatPropType[] } = configKeys.reduce((prev, key) => {\r\n        prev[key] = toArray(config[key])\r\n        return prev\r\n    }, {} as any)\r\n\r\n    const state = reactive((() =>\r\n        configKeys.reduce((prev: any, configKey) => {\r\n            prev[configKey] = null\r\n            const formatTypes = formatConfig[configKey]\r\n            /**\r\n             * 如果是Promise，则跳过处理，在watch immediate中初始化\r\n             * @author  韦胜健\r\n             * @date    2020/11/3 20:10\r\n             */\r\n            if (formatTypes.indexOf(FormatPropType.PROMISE) === -1) {\r\n                usePropsFormatter(prev, configKey, props[configKey], formatTypes)\r\n            }\r\n            return prev\r\n        }, {}) as { [k in Exclude<keyof Props, Exclude<keyof Props, keyof Config>>]: Props[k] })\r\n    ())\r\n\r\n    configKeys.forEach(configKey => {\r\n        watch(() => props[configKey], val => {\r\n            // @ts-ignore\r\n            usePropsFormatter(state, configKey, val, config[configKey])\r\n        }, {immediate: formatConfig[configKey].indexOf(FormatPropType.PROMISE) > -1})\r\n    })\r\n\r\n    return {\r\n        propsState: state,\r\n    }\r\n}\r\n\r\nexport const useProps = Object.assign(usePropsInner, FormatPropType)","import './color-sv-panel.scss'\r\nimport {designComponent} from \"../../../use/designComponent\";\r\nimport {useProps} from \"../../../use/useProps\";\r\nimport {computed, nextTick, reactive, watch} from 'vue';\r\nimport {hsv2rgb} from \"../utils/ColorUtils\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\n\r\nexport const PlColorSvPanel = designComponent({\r\n    name: 'pl-color-sv-panel',\r\n    props: {\r\n        hue: {type: Number, default: 360},                      // 色相\r\n        saturation: {type: Number},                             // 饱和度\r\n        modelValue: {type: Number},                             // 亮度\r\n\r\n        height: {type: [String, Number], default: 180},         // 面板高度\r\n        width: {type: [String, Number], default: 240},          // 面板宽度\r\n    },\r\n    emits: {\r\n        onChange: (val: any) => true,\r\n        onDblclick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {propsState} = useProps(props, {\r\n            height: useProps.NUMBER,\r\n            width: useProps.NUMBER,\r\n        })\r\n\r\n        const state = reactive({\r\n            val: props.modelValue == null ? null : 100 - Number(props.modelValue),\r\n            saturation: props.saturation,\r\n\r\n            startX: 0,\r\n            startY: 0,\r\n            tempSaturation: 0,\r\n            tempValue: 0,\r\n        })\r\n\r\n        const styles = computed(() => {\r\n            const color = hsv2rgb(props.hue, 100, 100)\r\n            return {\r\n                width: unit(propsState.width),\r\n                height: unit(propsState.height),\r\n                backgroundColor: `rgb(${color.r},${color.g},${color.b})`,\r\n            }\r\n        })\r\n\r\n        const thumbStyles = computed(() => {\r\n            let {val, saturation} = state\r\n            val = val == null ? 50 : val\r\n            saturation = saturation == null ? 50 : saturation\r\n\r\n            return {\r\n                transform: `translate3d(${saturation * (propsState.width as number) / 100}px,${val * (propsState.height as number) / 100}px,0)`,\r\n            }\r\n        })\r\n\r\n        const methods = {\r\n            updatePosition: (x: number, y: number, isMouseDown = true): void => {\r\n                const durX = Number((x / (propsState.width as number) * 100).toFixed(0));\r\n                const durY = Number((y / (propsState.height as number) * 100).toFixed(0));\r\n\r\n                state.saturation = (isMouseDown ? 0 : state.tempSaturation) + durX\r\n                state.val = (isMouseDown ? 0 : state.tempValue) + durY\r\n                state.saturation = Math.max(0, Math.min(100, state.saturation))\r\n                state.val = Math.max(0, Math.min(100, state.val))\r\n\r\n                emit.onChange({hue: props.hue, saturation: state.saturation, value: 100 - state.val})\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                document.body.addEventListener('mousemove', handler.mousemove)\r\n                document.body.addEventListener('mouseup', handler.mouseup)\r\n                disabledUserSelect()\r\n                methods.updatePosition(e.offsetX, e.offsetY)\r\n                state.startX = e.clientX\r\n                state.startY = e.clientY\r\n                state.tempSaturation = state.saturation as number\r\n                state.tempValue = state.val as number\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                methods.updatePosition(e.clientX - state.startX, e.clientY - state.startY, false)\r\n            },\r\n            mouseup: () => {\r\n                document.body.removeEventListener('mousemove', handler.mousemove)\r\n                document.body.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            },\r\n            dblclick: async (e: MouseEvent) => {\r\n                nextTick().then(() => emit.onDblclick(e))\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            if (val == null) {\r\n                state.val = null\r\n                return\r\n            }\r\n            if (state.val !== 100 - val) state.val = 100 - val\r\n        })\r\n        watch(() => props.saturation, (val) => {\r\n            if (val == null) {\r\n                state.saturation = undefined\r\n                return\r\n            }\r\n            if (state.saturation !== val) state.saturation = val\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-sv-panel\" style={styles.value as any} onMousedown={handler.mousedown} onDblclick={handler.dblclick}>\r\n                    <span class=\"pl-color-sv-thumb\" style={thumbStyles.value}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {Directive} from 'vue'\r\n\r\nexport interface ResizeDetectFuncParam {\r\n    width?: number\r\n    height?: number\r\n    oldWidth?: number\r\n    oldHeight?: number\r\n    el?: HTMLElement\r\n\r\n    [key: string]: any\r\n}\r\n\r\nexport interface ResizeDetectFunc {\r\n    (option: ResizeDetectFuncParam): void\r\n}\r\n\r\nexport default class ResizeDetector {\r\n\r\n    observer?: MutationObserver\r\n    width?: number\r\n    height?: number\r\n\r\n    constructor(public el: HTMLElement, public callback: ResizeDetectFunc) {\r\n\r\n        if (!el) {\r\n            console.error(`el is ${typeof el}`)\r\n            return\r\n        }\r\n\r\n        this.observer = new MutationObserver(this.detect)\r\n\r\n        this.observer.observe(el, {\r\n            childList: true,\r\n            subtree: true\r\n        })\r\n\r\n        // const {width, height} = el.getBoundingClientRect()\r\n        const {scrollHeight: height, scrollWidth: width} = el\r\n        this.width = width\r\n        this.height = height\r\n        this.runCallback({\r\n            width,\r\n            height,\r\n            el\r\n        })\r\n    }\r\n\r\n    detect = () => {\r\n        // const {width, height} = this.el.getBoundingClientRect()\r\n        const {scrollHeight: height, scrollWidth: width} = this.el\r\n        if (width === this.width && height === this.height) return\r\n        const ret = {} as ResizeDetectFuncParam\r\n        if (width !== this.width) {\r\n            ret.width = width\r\n            ret.oldWidth = this.width\r\n            this.width = width\r\n        }\r\n        if (height !== this.height) {\r\n            ret.height = height\r\n            ret.oldHeight = this.height\r\n            this.height = height\r\n        }\r\n        this.runCallback(ret)\r\n    }\r\n\r\n    runCallback(data: ResizeDetectFuncParam) {\r\n        Object.keys(data).forEach(key => {\r\n            if (data[key] != null && typeof data[key] === 'number') data[key] = Math.ceil(data[key])\r\n        })\r\n        this.callback(data)\r\n    }\r\n\r\n    destroy() {\r\n        if (!!this.observer) {\r\n            this.observer.disconnect();\r\n            this.observer = undefined\r\n        }\r\n    }\r\n}\r\n\r\nexport const ResizeDetectorDirective: Directive = {\r\n    mounted(el: any, binding: any, vnode: any) {\r\n        el.__resizedetextor__ = new ResizeDetector(el, (data) => binding.value(data))\r\n    },\r\n    beforeUnmount(el: any) {\r\n        (el.__resizedetextor__ as ResizeDetector).destroy()\r\n        delete el.__resizedetextor__\r\n    },\r\n}\r\n\r\n","import {designComponent} from \"../../use/designComponent\";\r\nimport {PlScroll} from './scroll'\r\nimport {computed, reactive, resolveDirective, withDirectives} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\n\r\nexport const VerticalScrollbar = designComponent({\r\n    props: {\r\n        tooltip: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const scroll = PlScroll.use.inject()\r\n\r\n        const dragState = {\r\n            top: 0,\r\n            clientY: 0,\r\n        }\r\n\r\n        const state = reactive({\r\n            scrollTop: 0,\r\n        })\r\n\r\n        const height = computed(() => {\r\n            return scroll.state.contentHeight > scroll.state.hostHeight ?\r\n                (scroll.state.hostHeight * scroll.state.hostHeight / scroll.state.contentHeight)\r\n                : 0\r\n        })\r\n        const top = computed(() => {\r\n            return (scroll.state.hostHeight - height.value) * state.scrollTop / (scroll.state.contentHeight - scroll.state.hostHeight)\r\n        })\r\n\r\n        const styles = useStyles(() => {\r\n            return {\r\n                height: `${height.value}px`,\r\n                width: `${scroll.targetScrollbarSize.value}px`,\r\n                top: `${top.value}px`,\r\n                backgroundColor: scroll.props.scrollbarColor,\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            onScroll: (e: Event) => {\r\n                state.scrollTop = (e.target as HTMLElement).scrollTop\r\n            },\r\n            onMousedown: (e: MouseEvent) => {\r\n                scroll.freezeState.isDragging = true\r\n                dragState.top = top.value\r\n                dragState.clientY = e.clientY\r\n                document.addEventListener('mousemove', handler.onMousemove)\r\n                document.addEventListener('mouseup', handler.onMouseup)\r\n                disabledUserSelect()\r\n            },\r\n            onMousemove: (e: MouseEvent) => {\r\n                let deltaY = e.clientY - dragState.clientY\r\n                let top = dragState.top + deltaY\r\n                let scrollTop = top * (scroll.state.contentHeight - scroll.state.hostHeight) / (scroll.state.hostHeight - height.value)\r\n                scrollTop = Math.max(0, Math.min(scrollTop, scroll.state.contentHeight - scroll.state.hostHeight))\r\n                if (!scroll.props.scrollAfterDragEnd) {\r\n                    scroll.refs.wrapper.scrollTop = scrollTop\r\n                } else {\r\n                    /*滚动条发生位移，但是内容scrollTop暂时不变*/\r\n                    state.scrollTop = scrollTop\r\n                }\r\n            },\r\n            onMouseup: (e: MouseEvent) => {\r\n                scroll.freezeState.isDragging = false\r\n                document.removeEventListener('mousemove', handler.onMousemove)\r\n                document.removeEventListener('mouseup', handler.onMouseup)\r\n                enableUserSelect()\r\n\r\n                if (scroll.props.scrollAfterDragEnd) {\r\n                    let deltaY = e.clientY - dragState.clientY\r\n                    let top = dragState.top + deltaY\r\n                    scroll.refs.wrapper.scrollTop = top * (scroll.state.contentHeight - scroll.state.hostHeight) / (scroll.state.hostHeight - height.value)\r\n                }\r\n            },\r\n        }\r\n\r\n        scroll.on.onScroll(handler.onScroll)\r\n\r\n        return {\r\n            render: () => {\r\n\r\n                let content = <div class=\"pl-vertical-scrollbar\" style={styles.value} onMousedown={handler.onMousedown}/> as any\r\n                if (!!props.tooltip) {\r\n                    const TooltipDirective = resolveDirective('tooltip')\r\n                    if (!!TooltipDirective) {\r\n                        content = withDirectives(content, [[TooltipDirective, props.tooltip]])\r\n                    }\r\n                }\r\n\r\n                return (\r\n                    <div class=\"pl-vertical-scrollbar-wrapper\">\r\n                        {content}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {reactive, computed, withDirectives, resolveDirective} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport {PlScroll} from \"./scroll\";\r\n\r\nexport const HorizontalScrollbar = designComponent({\r\n    props: {\r\n        tooltip: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const dragState = {\r\n            left: 0,\r\n            clientX: 0,\r\n        }\r\n\r\n        const scroll = PlScroll.use.inject()\r\n\r\n        const state = reactive({\r\n            scrollLeft: 0,\r\n        })\r\n\r\n        const width = computed(() => {\r\n            return scroll.state.contentWidth > scroll.state.hostWidth ? (scroll.state.hostWidth * scroll.state.hostWidth) / scroll.state.contentWidth : 0\r\n        })\r\n        const left = computed(() => {\r\n            return (scroll.state.hostWidth - width.value) * state.scrollLeft / (scroll.state.contentWidth - scroll.state.hostWidth)\r\n        })\r\n        const styles = useStyles(() => ({\r\n            height: `${scroll.targetScrollbarSize.value}px`,\r\n            width: `${width.value}px`,\r\n            left: `${left.value}px`,\r\n            backgroundColor: scroll.props.scrollbarColor,\r\n        }))\r\n\r\n        const handler = {\r\n            onScroll: (e: Event) => {\r\n                state.scrollLeft = (e.target as HTMLElement).scrollLeft\r\n            },\r\n            onMousedown: (e: MouseEvent) => {\r\n                scroll.freezeState.isDragging = true\r\n                dragState.left = left.value\r\n                dragState.clientX = e.clientX\r\n                document.addEventListener('mousemove', handler.onMousemove)\r\n                document.addEventListener('mouseup', handler.onMouseup)\r\n                disabledUserSelect()\r\n            },\r\n            onMousemove: (e: MouseEvent) => {\r\n                let deltaX = e.clientX - dragState.clientX\r\n                const left = dragState.left + deltaX\r\n                let scrollLeft = left * (scroll.state.contentWidth - scroll.state.hostWidth) / (scroll.state.hostWidth - width.value)\r\n                scrollLeft = Math.max(0, Math.min(scrollLeft, scroll.state.contentWidth - scroll.state.hostWidth))\r\n                if (!scroll.props.scrollAfterDragEnd) {\r\n                    scroll.refs.wrapper.scrollLeft = scrollLeft\r\n                } else {\r\n                    state.scrollLeft = scrollLeft\r\n                }\r\n            },\r\n            onMouseup: (e: MouseEvent) => {\r\n                scroll.freezeState.isDragging = false\r\n                document.removeEventListener('mousemove', handler.onMousemove)\r\n                document.removeEventListener('mouseup', handler.onMouseup)\r\n                enableUserSelect()\r\n\r\n                if (scroll.props.scrollAfterDragEnd) {\r\n                    let deltaX = e.clientX - dragState.clientX\r\n                    const left = dragState.left + deltaX\r\n                    scroll.refs.wrapper.scrollLeft = left * (scroll.state.contentWidth - scroll.state.hostWidth) / (scroll.state.hostWidth - width.value)\r\n                }\r\n            },\r\n        }\r\n\r\n        scroll.on.onScroll(handler.onScroll)\r\n\r\n        return {\r\n            render: () => {\r\n                let content = <div class=\"pl-horizontal-scrollbar\" style={styles.value} onMousedown={handler.onMousedown}/> as any\r\n                if (!!props.tooltip) {\r\n                    const TooltipDirective = resolveDirective('tooltip')\r\n                    if (!!TooltipDirective) {\r\n                        content = withDirectives(content, [[TooltipDirective, props.tooltip]])\r\n                    }\r\n                }\r\n                return (\r\n                    <div class=\"pl-horizontal-scrollbar-wrapper\">\r\n                        {content}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useMounted} from \"../../use/useMounted\";\r\nimport {computed, nextTick, onBeforeUnmount, onMounted, reactive, watch} from 'vue';\r\nimport {throttle} from 'plain-utils/utils/throttle';\r\nimport {ResizeDetectFuncParam, ResizeDetectorDirective} from \"../../plugins/ResizeDetector\";\r\nimport Popper from '../popper'\r\nimport './scroll.scss'\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {VerticalScrollbar} from \"./vertical-scrollbar\";\r\nimport {HorizontalScrollbar} from \"./horizontal-scrollbar\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\n\r\nexport const enum PLAIN_SCROLL_VERTICAL_POSITION {\r\n    top = 'top',\r\n    center = 'center',\r\n    bottom = 'bottom'\r\n}\r\n\r\nexport const PlScroll = designComponent({\r\n    name: 'pl-scroll',\r\n    directives: {resize: ResizeDetectorDirective},\r\n    props: {\r\n        refreshState: {},                                                                               // 监听改属性，以便自动执行refresh刷新\r\n        scrollbarSize: {type: Number},                                                                  // 滚动条大小\r\n        scrollbarColor: {type: String, default: 'rgba(144,147,153,.3)'},                                // 滚动条颜色\r\n        scrollX: {type: Boolean},                                                                       // 可以横向滚动\r\n        scrollY: {type: Boolean, default: true},                                                        // 可以纵向滚动\r\n        hideScrollbar: {type: Boolean},                                                                 // 隐藏滚动条\r\n        alwaysShowScrollbar: {type: Boolean},                                                           // 一直显示滚动条\r\n        fitContentWidth: {type: Boolean},                                                               // 适配内容宽度\r\n        fitContentHeight: {type: Boolean},                                                              // 适配内容高度\r\n        fitHostWidth: {type: Boolean},                                                                  // 适配容器宽度\r\n        fitHostHeight: {type: Boolean},                                                                 // 适配容器高度\r\n        topThreshold: {type: Number, default: 20},                                                      // 距离顶部多少距离派发滚动到顶部事件\r\n        bottomThreshold: {type: Number, default: 20},                                                   // 距离底部多少距离派发滚动到底部事件\r\n        autoScrollSpeed: {type: Number, default: 400},                                                  // 自动滚动的时候的速度，每秒钟滚动的距离\r\n        scrollAfterDragEnd: {type: Boolean,},                                                           // 是否拖拽结束后才刷新滚动位置\r\n        disableListTransition: {type: Boolean,},                                                        // 是否股弄懂的时候禁用pl-list的队列动画\r\n        horizontalScrollbarTooltip: {type: String},                                                     // 横向滚动条tooltip显示文本\r\n        verticalScrollbarTooltip: {type: String},                                                       // 纵向滚动条tooltip显示文本\r\n    },\r\n    emits: {\r\n        onScroll: (e: Event) => true,\r\n        onVerticalScrollTop: (e: Event) => true,\r\n        onVerticalScrollBottom: (e: Event) => true,\r\n        onVerticalScrollCenter: (e: Event) => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit, on, off}}) {\r\n\r\n        const {slots} = useSlots(['content'])\r\n\r\n        /*---------------------------------------ref-------------------------------------------*/\r\n\r\n        const {refs} = useRefs({\r\n            host: HTMLDivElement,\r\n            wrapper: HTMLDivElement,\r\n            content: HTMLDivElement,\r\n        })\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const mounted = useMounted()\r\n        const popper = Popper.use.inject(null)\r\n        /*非响应式状态*/\r\n        const freezeState = {\r\n            verticalPosition: PLAIN_SCROLL_VERTICAL_POSITION.top,               // 当前滚动纵向位置，top，center，right\r\n            cancelAnimate: null as null | number,                               // 自动滚动动画计时器\r\n            wrapperScrollTop: 0,                                                // 容器 scrollTop\r\n            wrapperScrollLeft: 0,                                               // 容器 scrollLeft\r\n            emitScroll: true,                                                   // 当前是否派发scroll事件\r\n\r\n            _isDragging: false,\r\n            get isDragging() {\r\n                return this._isDragging\r\n            },\r\n            set isDragging(val: boolean) {\r\n                this._isDragging = val\r\n                if (val) {\r\n                    refs.host.setAttribute('is-dragging', '')\r\n                } else {\r\n                    refs.host.removeAttribute('is-dragging')\r\n                }\r\n            },\r\n        }\r\n        const state = reactive({\r\n            contentWidth: 0,                                                    // 内容宽度\r\n            contentHeight: 0,                                                   // 内容高度\r\n            hostWidth: 0,                                                       // 容器宽度\r\n            hostHeight: 0,                                                      // 容器高度\r\n        })\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        const targetScrollbarSize = computed(() => {\r\n            if (!props.scrollX) {\r\n                return props.scrollbarSize || 6\r\n            } else {\r\n                return props.scrollbarSize || 9\r\n            }\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            `pl-scroll`,\r\n            {\r\n                'pl-scroll-always-show-scroll-bar': props.alwaysShowScrollbar,\r\n            }\r\n        ])\r\n\r\n        const hostStyles = useStyles(style => {\r\n            if (!mounted.value) return style\r\n            if (props.fitContentHeight) {\r\n                style.height = `${state.contentHeight}px`\r\n            }\r\n            return style\r\n        })\r\n\r\n        const wrapperStyles = useStyles(style => {\r\n            if (!mounted.value) return style\r\n            if (props.fitContentHeight) {\r\n                style.height = `${state.contentHeight + 17}px`\r\n            }\r\n            return style\r\n        })\r\n\r\n        const contentStyles = useStyles(style => {\r\n            if (!mounted.value) return style\r\n            if (!props.scrollX) {\r\n                style.width = props.fitContentWidth && state.contentWidth > 0 ? `${state.contentWidth}px` : `100%`;\r\n                style.overflowX = 'hidden'\r\n            }\r\n\r\n            if (!props.scrollY) {\r\n                style.height = props.fitContentHeight && state.contentHeight > 0 ? `${state.contentHeight}px` : `100%`;\r\n                style.overflowY = 'hidden'\r\n            }\r\n\r\n            if (props.fitHostHeight) {\r\n                style.height = '100%'\r\n            }\r\n            if (props.fitHostWidth) {\r\n                style.width = '100%'\r\n            }\r\n            if (props.fitContentWidth) {\r\n                style.width = `${state.contentWidth}px`\r\n            }\r\n            if (props.fitContentHeight) {\r\n                style.height = `${state.contentHeight}px`\r\n            }\r\n\r\n            return style\r\n        })\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n\r\n        const methods = {\r\n            refresh: async () => {\r\n                await nextTick()\r\n\r\n                const {scrollWidth: width1, scrollHeight: height1} = refs.content\r\n                handler.contentResize({\r\n                    width: Math.ceil(width1),\r\n                    height: Math.ceil(height1),\r\n                })\r\n\r\n                const {scrollWidth: width2, scrollHeight: height2} = refs.host\r\n                handler.hostResize({\r\n                    width: Math.ceil(width2),\r\n                    height: Math.ceil(height2),\r\n                })\r\n            },\r\n            /**\r\n             * 滚动到指定位置\r\n             * @author  韦胜健\r\n             * @date    2020/12/7 12:20\r\n             * @param   point\r\n             * @param   point.x             // 滚动scrollLeft值\r\n             * @param   point.y             // 滚动scrollTop值\r\n             * @param   configOrTime        // number|{ time?: number, noEmitScroll?: boolean }\r\n             * @param   configOrTime.time   // 滚动的时间\r\n             * @param   configOrTime.noEmitScroll //滚动期间不派发scroll事件\r\n             */\r\n            async scroll(point: { x?: number, y?: number }, configOrTime?: number | { time?: number, noEmitScroll?: boolean }) {\r\n\r\n                if (!refs.wrapper) return\r\n\r\n                const config = typeof configOrTime === \"number\" ? {time: configOrTime} : configOrTime\r\n                const {time, noEmitScroll} = (config || {})\r\n\r\n                // if (point.x != null) this.wrapper!.scrollLeft = point.x\r\n                // if (point.y != null) this.wrapper!.scrollTop = point.y\r\n\r\n                if (noEmitScroll) {\r\n                    freezeState.emitScroll = false\r\n                }\r\n                const done = () => noEmitScroll && (freezeState.emitScroll = true)\r\n\r\n                if (!time) {\r\n                    if (point.x != null) refs.wrapper!.scrollLeft = point.x\r\n                    if (point.y != null) refs.wrapper!.scrollTop = point.y\r\n                    await delay(23)\r\n                    done()\r\n                } else {\r\n\r\n                    if (!!freezeState.cancelAnimate) {\r\n                        cancelAnimationFrame(freezeState.cancelAnimate)\r\n                        freezeState.cancelAnimate = null\r\n                    }\r\n\r\n                    let ny = refs.wrapper!.scrollTop\r\n                    let nx = refs.wrapper!.scrollLeft\r\n\r\n                    let ky = (point.y! - ny) / time\r\n                    let kx = (point.x! - nx) / time\r\n\r\n                    let startTime = Date.now()\r\n                    const run = async () => {\r\n                        let nowTime = Date.now()\r\n                        let delta = nowTime - startTime\r\n                        let top;\r\n                        let left;\r\n\r\n                        if (delta >= time) {\r\n                            freezeState.cancelAnimate = null\r\n                            top = time * ky + ny\r\n                            left = time * kx + nx\r\n\r\n                            if (!!refs.wrapper) {\r\n                                refs.wrapper.scrollTop = top\r\n                                refs.wrapper.scrollLeft = left\r\n                                await delay(23)\r\n                                done()\r\n                            }\r\n                        } else {\r\n                            top = delta * ky + ny\r\n                            left = delta * kx + nx\r\n\r\n                            if (!!refs.wrapper) {\r\n                                refs.wrapper.scrollTop = top\r\n                                refs.wrapper.scrollLeft = left\r\n                            }\r\n                            freezeState.cancelAnimate = requestAnimationFrame(run)\r\n                        }\r\n                    }\r\n                    run()\r\n                }\r\n            },\r\n            scrollTop(scrollTop: number, time?: number) {\r\n                methods.scroll({y: scrollTop}, {time})\r\n            },\r\n            scrollLeft(scrollLeft: number, time?: number) {\r\n                methods.scroll({x: scrollLeft}, {time})\r\n            },\r\n            scrollEnd(point: { x: boolean, y?: boolean } = {x: true, y: true}) {\r\n                methods.scroll({\r\n                    x: point.x ? refs.wrapper!.scrollWidth : undefined,\r\n                    y: point.y ? refs.wrapper!.scrollHeight : undefined,\r\n                })\r\n            },\r\n            autoScrollTop() {\r\n                const {hostHeight, contentHeight} = state\r\n                const {wrapperScrollTop} = freezeState\r\n                const scrollHeight = contentHeight - hostHeight\r\n                if (scrollHeight <= 0) {\r\n                    return\r\n                }\r\n                const height = wrapperScrollTop\r\n                if (height <= 0) {\r\n                    return\r\n                }\r\n                const duration = (height / props.autoScrollSpeed) * 1000\r\n                methods.scrollTop(0, duration)\r\n            },\r\n            autoScrollBottom() {\r\n                const {hostHeight, contentHeight} = state\r\n                const {wrapperScrollTop} = freezeState\r\n                const scrollHeight = contentHeight - hostHeight\r\n                if (scrollHeight <= 0) {\r\n                    return\r\n                }\r\n                const height = scrollHeight - wrapperScrollTop\r\n                if (height <= 0) {\r\n                    return\r\n                }\r\n                const duration = (height / props.autoScrollSpeed) * 1000\r\n                methods.scrollTop(scrollHeight, duration)\r\n            },\r\n            autoScrollLeft() {\r\n                const {hostWidth, contentWidth} = state\r\n                const {wrapperScrollLeft} = freezeState\r\n                const scrollWidth = contentWidth - hostWidth\r\n                if (scrollWidth <= 0) {\r\n                    return\r\n                }\r\n                const width = wrapperScrollLeft\r\n                if (width <= 0) {\r\n                    return\r\n                }\r\n                const duration = (width / props.autoScrollSpeed) * 1000\r\n                methods.scrollLeft(0, duration)\r\n            },\r\n            autoScrollRight() {\r\n                const {hostWidth, contentWidth} = state\r\n                const {wrapperScrollLeft} = freezeState\r\n                const scrollWidth = contentWidth - hostWidth\r\n                if (scrollWidth <= 0) {\r\n                    return\r\n                }\r\n                const width = scrollWidth - wrapperScrollLeft\r\n                if (width <= 0) {\r\n                    return\r\n                }\r\n                const duration = (width / props.autoScrollSpeed) * 1000\r\n                methods.scrollLeft(scrollWidth, duration)\r\n            },\r\n            stopAutoScroll() {\r\n                if (!!freezeState.cancelAnimate) {\r\n                    cancelAnimationFrame(freezeState.cancelAnimate)\r\n                    freezeState.cancelAnimate = null\r\n                }\r\n            },\r\n            /**\r\n             * 禁用pl-list的队列动画，300ms后恢复正常\r\n             * @author  韦胜健\r\n             * @date    2020/12/15 10:16\r\n             */\r\n            disableListTransition: (() => {\r\n                const disabledQueueAnimation = debounce(() => refs.host.removeAttribute('virtual-scrolling'), 300, true)\r\n                return () => {\r\n                    refs.host.setAttribute('virtual-scrolling', '')\r\n                    disabledQueueAnimation();\r\n                }\r\n            })(),\r\n        }\r\n\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            windowResize: throttle(() => methods.refresh(), 500),\r\n            popperOpen: () => methods.refresh(),\r\n            popperShow: async () => {\r\n                await nextTick()\r\n                methods.scroll({y: 0})\r\n            },\r\n            contentResize: (data: ResizeDetectFuncParam) => {\r\n                if (data.width != null) state.contentWidth = data.width\r\n                if (data.height != null) state.contentHeight = data.height\r\n            },\r\n            hostResize: (data: ResizeDetectFuncParam) => {\r\n                if (data.width != null) state.hostWidth = data.width - 16\r\n                if (data.height != null) state.hostHeight = data.height - 16\r\n            },\r\n            wrapperMousewheel: (e: WheelEvent) => {\r\n                if (!!freezeState.cancelAnimate) {\r\n                    cancelAnimationFrame(freezeState.cancelAnimate)\r\n                    freezeState.cancelAnimate = null\r\n                }\r\n            },\r\n            wrapperScroll: (e: Event) => {\r\n                const target = e.target as HTMLElement\r\n                freezeState.wrapperScrollTop = target.scrollTop\r\n                freezeState.wrapperScrollLeft = target.scrollLeft\r\n\r\n                if (freezeState.emitScroll) {\r\n                    emit.onScroll(e)\r\n                }\r\n\r\n                if (freezeState.verticalPosition === PLAIN_SCROLL_VERTICAL_POSITION.top && freezeState.wrapperScrollTop > props.topThreshold!) {\r\n                    /*进入center*/\r\n                    emit.onVerticalScrollCenter(e)\r\n                    freezeState.verticalPosition = PLAIN_SCROLL_VERTICAL_POSITION.center\r\n                } else if (freezeState.verticalPosition === PLAIN_SCROLL_VERTICAL_POSITION.center) {\r\n                    // console.log(this.contentHeight - this.hostHeight - this.contentWrapperScrollTop, this.bottomScrollDuration)\r\n                    if (freezeState.wrapperScrollTop < props.topThreshold!) {\r\n                        /*进入top*/\r\n                        emit.onVerticalScrollTop(e)\r\n                        freezeState.verticalPosition = PLAIN_SCROLL_VERTICAL_POSITION.top\r\n                    } else if (state.contentHeight - state.hostHeight - freezeState.wrapperScrollTop < props.bottomThreshold!) {\r\n                        /*进入bottom*/\r\n                        emit.onVerticalScrollBottom(e)\r\n                        freezeState.verticalPosition = PLAIN_SCROLL_VERTICAL_POSITION.bottom\r\n                    }\r\n\r\n                } else if (freezeState.verticalPosition === PLAIN_SCROLL_VERTICAL_POSITION.bottom) {\r\n                    if (state.contentHeight - state.hostHeight - freezeState.wrapperScrollTop > props.bottomThreshold!) {\r\n                        /*进入center*/\r\n                        emit.onVerticalScrollCenter(e)\r\n                        freezeState.verticalPosition = PLAIN_SCROLL_VERTICAL_POSITION.center\r\n                    }\r\n                }\r\n\r\n                if (props.disableListTransition) {\r\n                    methods.disableListTransition()\r\n                }\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------lifecycle-------------------------------------------*/\r\n\r\n        onMounted(() => {\r\n            window.addEventListener('resize', handler.windowResize)\r\n            if (!!popper) {\r\n                popper.event.on.onOpen(handler.popperOpen)\r\n                popper.event.on.onShow(handler.popperShow)\r\n            }\r\n        })\r\n\r\n        onBeforeUnmount(() => {\r\n            window.removeEventListener('resize', handler.windowResize)\r\n            if (!!popper) {\r\n                popper.event.off.onOpen(handler.popperOpen)\r\n                popper.event.off.onShow(handler.popperShow)\r\n            }\r\n        })\r\n\r\n        watch(() => props.refreshState, methods.refresh)\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n                on, off,\r\n                targetScrollbarSize,\r\n                refs,\r\n                slots,\r\n                handler,\r\n                methods,\r\n                state,\r\n                freezeState,\r\n            },\r\n            render: () => (\r\n                <div ref=\"host\"\r\n                     class={classes.value}\r\n                     v-resize={handler.hostResize}\r\n                     style={hostStyles.value as any}>\r\n                    <div ref=\"wrapper\"\r\n                         class=\"pl-scroll-wrapper\"\r\n                         style={wrapperStyles.value as any}\r\n                         onScroll={handler.wrapperScroll}\r\n                         {...{onMousewheel: handler.wrapperMousewheel}}>\r\n                        <div ref=\"content\"\r\n                             class=\"pl-scroll-content\"\r\n                             style={contentStyles.value as any}\r\n                             v-resize={handler.contentResize}>\r\n                            {slots.default()}\r\n                        </div>\r\n                        {slots.content()}\r\n                    </div>\r\n\r\n                    {\r\n                        !props.hideScrollbar && props.scrollY && (\r\n                            <div class=\"pl-vertical-scrollbar-wrapper\">\r\n                                {<VerticalScrollbar tooltip={props.verticalScrollbarTooltip}/>}\r\n                            </div>\r\n                        )\r\n                    }\r\n                    {\r\n                        !props.hideScrollbar && props.scrollX && (\r\n                            <div class=\"pl-horizontal-scrollbar-wrapper\">\r\n                                {<HorizontalScrollbar tooltip={props.horizontalScrollbarTooltip}/>}\r\n                            </div>\r\n                        )\r\n                    }\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport type PlainScroll = typeof PlScroll.use.class","import {designComponent} from \"../../use/designComponent\";\r\nimport {MessageServiceFormatOption} from \"./index\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {PropType} from 'vue';\r\nimport Icon from '../icon'\r\nimport {createEventListener} from \"../../utils/createEventListener\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-message',\r\n    props: {\r\n        option: {type: Object as PropType<MessageServiceFormatOption>, required: true}\r\n    },\r\n    emits: {\r\n        onClose: () => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const classes = useClass(() => [\r\n            'pl-message',\r\n            `pl-message-status-${props.option.status}`\r\n        ])\r\n        const styles = {zIndex: nextIndex()}\r\n\r\n        const close = () => {\r\n            emit.onClose()\r\n            !!props.option.onClose && props.option.onClose()\r\n        }\r\n\r\n        props.option.close = close\r\n\r\n        const handler = {\r\n            onClick: (e: MouseEvent) => {\r\n                !!props.option.onClick && props.option.onClick(e)\r\n            },\r\n            onClickCloseIcon: (e: MouseEvent) => {\r\n                close()\r\n            },\r\n            onMouseenter: () => {\r\n                if (!!closeTimer) {\r\n                    clearTimeout(closeTimer)\r\n                }\r\n            },\r\n            onMouseleave: () => {\r\n                !!props.option.time && (closeTimer = setTimeout(close, props.option.time))\r\n            }\r\n        }\r\n\r\n        let closeTimer: number | null = null\r\n        !!props.option.time && (closeTimer = setTimeout(close, props.option.time))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}\r\n                     style={styles}\r\n                     onMouseenter={handler.onMouseenter}\r\n                     onMouseleave={handler.onMouseleave}\r\n                     onClick={handler.onClick}>\r\n                    {!!props.option.icon && <PlIcon icon={props.option.icon}/>}\r\n                    <div class=\"pl-message-content\">{!!props.option.render ? props.option.render() : props.option.message}</div>\r\n                    <Icon icon=\"el-icon-close\" class=\"pl-message-close\" {...createEventListener({onClick: handler.onClickCloseIcon})}/>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n    ,\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {MessageServiceFormatOption} from \"./index\";\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport {nextTick, reactive} from 'vue';\r\nimport Message from \"./message\";\r\nimport List from '../list'\r\nimport Item from '../item'\r\n\r\nexport default designComponent({\r\n    name: 'pl-message-container',\r\n    props: {\r\n        horizontal: {type: String, required: true},\r\n        vertical: {type: String, required: true},\r\n        duration: {type: String, default: \"30px\"},\r\n    },\r\n    setup({props}) {\r\n        const classes = useClass(() => [\r\n            'pl-message-container',\r\n            `pl-message-container-${props.horizontal}-${props.vertical}`\r\n        ])\r\n        const state = reactive({\r\n            options: [] as MessageServiceFormatOption[]\r\n        })\r\n        const refs = useRefList<{ option: MessageServiceFormatOption }>()\r\n        const styles = {padding: props.duration}\r\n\r\n        const utils = {\r\n            closeMessage: (i: number) => {\r\n                state.options.splice(i, 1)\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n                getMessage: async (option: MessageServiceFormatOption) => {\r\n                    state.options.push(option)\r\n                    await nextTick()\r\n                    const messages = refs.filter(Boolean)\r\n                    for (let i = 0; i < messages.length; i++) {\r\n                        const message = messages[i];\r\n                        if (message.option === option) {\r\n                            return message\r\n                        }\r\n                    }\r\n                    return null\r\n                },\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles}>\r\n                    <List direction=\"top\">\r\n                        <Item key=\"placeholder\"/>\r\n                        {state.options.map((option, index) =>\r\n                            <Item key={option.id}>\r\n                                <Message option={option}\r\n                                         ref={(proxy: any) => refs[index] = proxy}\r\n                                         {...{onClose: () => utils.closeMessage(index)}}\r\n                                />\r\n                            </Item>\r\n                        )}\r\n                    </List>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {App} from \"vue\";\r\nimport {RequireFormat, VNodeChild} from \"../../shims\";\r\nimport {registryRootService} from \"../root/registryRootService\";\r\nimport ManagerComponent from './message-manager'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport './message.scss'\r\nimport Icon from '../icon'\r\nimport List from '../list'\r\nimport Item from '../item'\r\nimport {getServiceWithoutContext} from \"../../utils/getServiceWithoutContext\";\r\n\r\n/**\r\n * 消息位置\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:20\r\n */\r\nexport enum MessageServiceDirection {\r\n    start = 'start',\r\n    center = 'center',\r\n    end = 'end',\r\n}\r\n\r\n/**\r\n * 消息状态\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:20\r\n */\r\nexport type MessageServiceStatus = \"lite\" | \"dark\" | \"primary\" | \"success\" | \"warn\" | \"error\" | \"info\"\r\n\r\n/**\r\n * 消息配置对象类型\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:20\r\n */\r\nexport interface MessageServiceOption {\r\n    message?: string,                                                                               // 消息文本\r\n\r\n    horizontal?: MessageServiceDirection,                                                           // 横向位置\r\n    vertical?: MessageServiceDirection,                                                             // 纵向位置\r\n    time?: number | null,                                                                           // 显示的时间\r\n    status?: MessageServiceStatus,                                                                  // 消息状态\r\n    render?: () => VNodeChild,                                                                      // 自定义内容渲染函数\r\n    icon?: string | null,                                                                           // 显示的图标\r\n    onClick?: (e: MouseEvent) => void,                                                              // 自定义点击处理动作\r\n    onClose?: () => void,                                                                           // 处理消息关闭之后的动作\r\n}\r\n\r\n/**\r\n * 消息配置对象类型格式化后的类型\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:20\r\n */\r\nexport type MessageServiceFormatOption = RequireFormat<MessageServiceOption, 'horizontal' | 'vertical' | 'time' | 'status'> & {\r\n    id: string,\r\n    close: () => void,\r\n}\r\n\r\n/**\r\n * 格式化消息配置参数\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:21\r\n */\r\nconst formatOption = (() => {\r\n    let idCount = 0\r\n    return (option: MessageServiceOption): MessageServiceFormatOption => {\r\n        return Object.assign(option as MessageServiceFormatOption, {\r\n            id: `message_${idCount++}`,\r\n            close: () => null,\r\n            horizontal: option.horizontal || MessageServiceDirection.center,\r\n            vertical: option.vertical || MessageServiceDirection.start,\r\n            time: option.time === null ? null : (option.time || 3 * 1000),\r\n            status: option.status || 'dark'\r\n        })\r\n    }\r\n})()\r\n\r\n/**\r\n * 消息服务函数类型\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:21\r\n */\r\ninterface MessageServiceFunction {\r\n    (message: string | MessageServiceOption, option?: MessageServiceOption): void\r\n}\r\n\r\n/**\r\n * 消息服务对象类型\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:21\r\n */\r\nexport type MessageService = MessageServiceFunction & {\r\n    [k in MessageServiceStatus]: MessageServiceFunction\r\n}\r\n\r\n/**\r\n * 通过应用实例获取消息服务对象函数\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:22\r\n */\r\nconst getMessageService = registryRootService(\r\n    'message',\r\n    ManagerComponent,\r\n    (getManager) => {\r\n        const service: MessageServiceFunction = (message: string | MessageServiceOption, option?: MessageServiceOption) => {\r\n            let o = typeof message === \"object\" ? message : {message}\r\n            if (!!option) {\r\n                Object.assign(o, option)\r\n            }\r\n            const fo = formatOption(o)\r\n            fo.horizontal.charAt(0)\r\n            getManager().then(manager => manager.getContainer(fo).then(container => container.getMessage(fo)))\r\n            return fo\r\n        };\r\n\r\n        return Object.assign(service, [\r\n            'lite',\r\n            'dark',\r\n            'primary',\r\n            'success',\r\n            'warn',\r\n            'error',\r\n            'info',\r\n        ].reduce((prev: any, status: any) => {\r\n            prev[status] = function (message: string | MessageServiceOption, option?: MessageServiceOption) {\r\n                const o = typeof message === \"object\" ? message : {message}\r\n                if (!!option) {\r\n                    Object.assign(o, option)\r\n                }\r\n                o.status = status\r\n                return service(o)\r\n            }\r\n            return prev\r\n        }, {})) as MessageService\r\n    }\r\n)\r\n\r\nexport const $$message = getServiceWithoutContext(getMessageService)\r\n\r\nexport default createComponentPlugin({\r\n    ...ManagerComponent,\r\n    getMessageService,\r\n}, {\r\n    plugins: [\r\n        Icon, List, Item,\r\n        {\r\n            install: (app: App) => {\r\n                app.mixin({\r\n                    beforeCreate() {\r\n                        /*第一次调用 $message 的时候才调用 getMessageService*/\r\n                        Object.defineProperty(this, '$message', {\r\n                            get() {\r\n                                return getMessageService(this)\r\n                            },\r\n                        })\r\n                    },\r\n                })\r\n            }\r\n        }\r\n    ]\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {nextTick, reactive} from 'vue';\r\nimport {MessageServiceDirection} from \"./index\";\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport Container from './message-container'\r\n\r\nexport default designComponent({\r\n    name: 'pl-message-manager',\r\n    setup() {\r\n\r\n        const state = reactive({\r\n            containers: [\r\n                {\r\n                    horizontal: MessageServiceDirection.center,\r\n                    vertical: MessageServiceDirection.start,\r\n                }] as { horizontal: MessageServiceDirection, vertical: MessageServiceDirection }[]\r\n        })\r\n        const refs = useRefList<typeof Container.use.class>()\r\n\r\n        const getContainer = async (config: { horizontal: MessageServiceDirection, vertical: MessageServiceDirection }): Promise<typeof Container.use.class> => {\r\n            for (let i = 0; i < refs.length; i++) {\r\n                const ref = refs[i];\r\n                if (ref.props.horizontal === config.horizontal && ref.props.vertical === config.vertical) {\r\n                    return ref\r\n                }\r\n            }\r\n            state.containers.push(config);\r\n            await nextTick()\r\n            return getContainer(config)\r\n        }\r\n        return {\r\n            refer: {\r\n                name: 'I am message controller',\r\n                getContainer,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-message-manager\">\r\n                    {state.containers.map((container, index) =>\r\n                        <Container horizontal={container.horizontal}\r\n                                   vertical={container.vertical}\r\n                                   ref={(proxy: any) => refs[index] = proxy}/>)}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {StyleProperties} from '../shims';\r\nimport {computed} from 'vue';\r\n\r\nexport function useStyles(\r\n    getter: (styles: StyleProperties) => StyleProperties | void\r\n) {\r\n    return computed(() => {\r\n        const style = {}\r\n        return getter(style) || style\r\n    })\r\n}","export function toArray<T>(data: T | T[]): T[] {\r\n    return Array.isArray(data) ? data : [data]\r\n}","import {designComponent} from \"../../../use/designComponent\";\r\nimport {TimePublicProps} from \"./time-panel.utils\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {PlainDate} from \"../../../utils/PlainDate\";\r\nimport {computed} from 'vue';\r\nimport './time-range-panel.scss'\r\nimport {PlTimeBasePanel} from \"./time-base-panel\";\r\n\r\nexport enum TimeRangePanelType {\r\n    start = 'start',\r\n    end = 'end',\r\n}\r\n\r\nexport const PlTimeRangePanel= designComponent({\r\n    name: 'pl-time-range-panel',\r\n    props: {\r\n        start: {type: String},\r\n        end: {type: String},\r\n        ...TimePublicProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | undefined, type: TimeRangePanelType) => true,\r\n        onUpdateStart: (val?: string) => true,\r\n        onUpdateEnd: (val?: string) => true,\r\n        onMousedownStartPanel: (e: MouseEvent) => true,\r\n        onMousedownEndPanel: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const start = useModel(() => props.start, emit.onUpdateStart)\r\n        const end = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const formatData = computed(() => {\r\n            const {displayFormat, valueFormat} = props\r\n            return {\r\n                start: new PlainDate(start.value, displayFormat, valueFormat),\r\n                end: new PlainDate(end.value, displayFormat, valueFormat),\r\n                max: new PlainDate(props.max, displayFormat, valueFormat),\r\n                min: new PlainDate(props.min, displayFormat, valueFormat)\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            onStartChange: (value?: string) => {\r\n                start.value = value\r\n                emit.onUpdateModelValue(value, TimeRangePanelType.start)\r\n\r\n                const {end: endPd, start: startPd} = formatData.value\r\n\r\n                if (endPd.isNull || startPd.Hms! > endPd.Hms) {\r\n                    end.value = start.value\r\n                    emit.onUpdateModelValue(end.value, TimeRangePanelType.end)\r\n                }\r\n            },\r\n            onEndChange: (value?: string) => {\r\n                end.value = value\r\n                emit.onUpdateModelValue(value, TimeRangePanelType.end)\r\n                const {end: endPd, start: startPd} = formatData.value\r\n\r\n                if (startPd.isNull || endPd.Hms! < startPd.Hms) {\r\n                    start.value = end.value\r\n                    emit.onUpdateModelValue(start.value, TimeRangePanelType.start)\r\n                }\r\n            },\r\n        }\r\n\r\n        const binding = computed(() => {\r\n            const publicProps = Object.keys(TimePublicProps).reduce((ret: any, key) => {\r\n                ret[key] = (props as any)[key]\r\n                return ret\r\n            }, {})\r\n            const {max, min} = props\r\n            const publicBinding = {\r\n                ...publicProps,\r\n                max,\r\n                min,\r\n                disableChangeOnScroll: true,\r\n            }\r\n            return {\r\n                start: {\r\n                    ...publicBinding,\r\n                    modelValue: start.value,\r\n                    onChange: handler.onStartChange,\r\n                    onMousedown: emit.onMousedownStartPanel,\r\n                },\r\n                end: {\r\n                    ...publicBinding,\r\n                    modelValue: end.value,\r\n                    onChange: handler.onEndChange,\r\n                    onMousedown: emit.onMousedownEndPanel,\r\n                },\r\n            }\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-time-range-panel\">\r\n                    <PlTimeBasePanel {...binding.value.start}/>\r\n                    <PlTimeBasePanel {...binding.value.end}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {markRaw, PropType, reactive, watch, nextTick, onBeforeUnmount} from 'vue';\r\nimport {Page} from \"./NavigatorManager\";\r\nimport Nav from './nav'\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {SimpleFunction} from \"../../shims\";\r\n\r\nexport const NavPage = designComponent({\r\n    name: 'pl-nav-page',\r\n    props: {\r\n        page: {type: Object as PropType<Page>, required: true},\r\n        isLast: {type: Boolean, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement\r\n        })\r\n\r\n        const parent = Nav.use.inject()\r\n\r\n        const state = reactive({\r\n            PageComponent: null as any,\r\n            renderEl: false,\r\n        });\r\n\r\n        let unmountHandler: null | SimpleFunction = null;\r\n\r\n        (async () => {\r\n            const loader = await parent.props.nav.utils.getAppLoader(props.page.pageConfig)\r\n            if (!!loader) {\r\n                if ('getPage' in loader) {\r\n                    const Component = await loader.getPage(props.page.pageConfig)\r\n                    state.PageComponent = markRaw(Component)\r\n                } else {\r\n                    state.renderEl = true\r\n                    await nextTick()\r\n                    const mountData = await loader.mount(refs.el!, props.page.pageConfig)\r\n                    unmountHandler = () => loader.unmount(mountData)\r\n                }\r\n            }\r\n        })();\r\n\r\n        onBeforeUnmount(() => {\r\n            !!unmountHandler && unmountHandler()\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                const {PageComponent} = state\r\n                return (\r\n                    <div class=\"pl-nav-page\" v-show={props.isLast}>\r\n                        {state.renderEl && <div ref=\"el\"/>}\r\n                        {PageComponent && <PageComponent/>}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {PropType, provide, inject} from 'vue';\r\nimport {NavigatorManager, PageConfig, Stack} from \"./NavigatorManager\";\r\nimport {NavPage} from \"./nav-page\";\r\nimport Nav from \"./nav\";\r\n\r\nexport const PROVIDE_NAV_CONSTANT = '@@PROVIDE_NAV_CONSTANT'\r\n\r\nfunction provideNavPage({nav, stack}: { nav: NavigatorManager, stack: Stack }) {\r\n    const $nav = {\r\n        /*---------------------------------------tab methods-------------------------------------------*/\r\n        ...nav.tabMethods,\r\n        /*---------------------------------------path methods-------------------------------------------*/\r\n        /*push一个页面*/\r\n        push: (pageConfig: PageConfig) => {\r\n            return nav.pageMethods.push(stack, pageConfig)\r\n        },\r\n        /*pop一个页面*/\r\n        back: () => {\r\n            return nav.pageMethods.back(stack)\r\n        },\r\n        /*重定向到一个页面*/\r\n        redirect: () => {/*todo*/},\r\n        /*刷新页面*/\r\n        refresh: () => {/*todo*/},\r\n        /*开启/关闭页面的加载状态*/\r\n        loading: () => {/*todo*/},\r\n        /*获取当前页面信息*/\r\n        getCurrentPage: () => {/*todo*/},\r\n        /*监听事件*/\r\n        on: () => {/*todo*/},\r\n        /*解除监听事件*/\r\n        off: () => {/*todo*/},\r\n        /*监听一次事件*/\r\n        once: () => {/*todo*/},\r\n        /*派发事件*/\r\n        emit: () => {/*todo*/},\r\n    }\r\n    provide(PROVIDE_NAV_CONSTANT, $nav)\r\n    return $nav\r\n}\r\n\r\nexport function useNav() {\r\n    return inject(PROVIDE_NAV_CONSTANT) as ReturnType<typeof provideNavPage>\r\n}\r\n\r\nexport const NavStack = designComponent({\r\n    name: \"pl-nav-stack\",\r\n    props: {\r\n        stack: {type: Object as PropType<Stack>, required: true},\r\n    },\r\n    setup({props}) {\r\n        const parent = Nav.use.inject()\r\n        const provideNav = provideNavPage({stack: props.stack, nav: parent.props.nav})\r\n\r\n        return {\r\n            refer: {\r\n                provideNav,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-nav-stack\" v-show={props.stack.show}>\r\n                    {props.stack.pages.map((page, index) => {\r\n                        return (\r\n                            <NavPage\r\n                                key={page.id}\r\n                                page={page}\r\n                                isLast={index === props.stack.pages.length - 1}\r\n                            />\r\n                        )\r\n                    })}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlInput} from \"./input\";\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlInput)","import {designComponent} from \"../../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../../use/useEdit\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {computed, nextTick, onMounted, PropType} from 'vue';\r\nimport {zeroize} from \"plain-utils/string/zeroize\";\r\nimport {findOne} from \"plain-utils/object/findOne\";\r\nimport './time-base-column.scss'\r\nimport {useRefList} from \"../../../use/useRefList\";\r\nimport {PlScroll} from \"../../scroll/scroll\";\r\n\r\nconst size = 24;\r\n\r\nexport const PlTimeBaseColumn = designComponent({\r\n    name: 'pl-time-base-column',\r\n    props: {\r\n        ...EditProps,\r\n\r\n        layout: {type: String, default: 'h'},   // 模式，h：时，m：分，s：秒\r\n        modelValue: {required: true},// 当前值\r\n        max: {type: Number},                    // 最大值\r\n        min: {type: Number},                    // 最小值\r\n        custom: {type: Function as PropType<(layout: string) => number[]>},// 自定义选项函数\r\n        checkDisabled: Function,                // 用来判断选项是否禁用的函数\r\n        disableChangeOnScroll: {type: Boolean}, // 是否禁用在滚动的时候触发更新值动作\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number) => true,\r\n        onClickItem: (i: number) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {editComputed} = useEdit()\r\n\r\n        const {refs} = useRefs({scroll: PlScroll,})\r\n        const liList = useRefList<HTMLLIElement>()\r\n\r\n        const model = useModel(() => props.modelValue as any, event.emit.onUpdateModelValue, {onChange: () => nextTick().then(methods.resetPosition)})\r\n\r\n        const options = computed(() => {\r\n            if (!!props.custom) {\r\n                return props.custom(props.layout).map(item => zeroize(item, 2))\r\n            }\r\n            let count = props.layout === 'h' ? 24 : 60\r\n            let options: string[] = []\r\n            for (let i = 0; i < count; i++) {\r\n                options.push(zeroize(i, 2))\r\n            }\r\n            return options\r\n        })\r\n\r\n        const methods = {\r\n            resetPosition: () => {\r\n                let value = model.value || 0\r\n                let start = 0\r\n                let find = findOne(options.value, item => Number(item) == value, true) as { item: string, index: number }\r\n                if (!!find.item) {\r\n                    start = find.index\r\n                    refs.scroll!.methods.scroll({y: liList[start].offsetTop}, {noEmitScroll: true})\r\n                }\r\n            },\r\n        }\r\n\r\n        const utils = {\r\n            checkDisabled: (item: string | number) => {\r\n                item = Number(item)\r\n                if (editComputed.value.disabled) return true\r\n                if (!!props.checkDisabled && props.checkDisabled(item, props.layout)) return true\r\n\r\n                if (props.max != null && props.max < item) return true\r\n                if (props.min != null && props.min > item) return true\r\n                return false\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            clickItem: (item: string | number) => {\r\n                item = Number(item)\r\n                if (utils.checkDisabled(item)) {\r\n                    return\r\n                }\r\n                model.value = item\r\n                event.emit.onClickItem(item)\r\n                methods.resetPosition()\r\n            },\r\n            onScroll: (e: any) => {\r\n                if (props.disableChangeOnScroll) {\r\n                    return\r\n                }\r\n                let index = Math.max(0, Math.min(options.value.length - 1, Math.floor(e.target.scrollTop / size)))\r\n                const val = options.value[index] == null ? null : Number(options.value[index])\r\n                if (val != null && val !== model.value && !utils.checkDisabled(val)) {\r\n                    model.value = val\r\n                }\r\n            }\r\n        }\r\n\r\n        onMounted(methods.resetPosition)\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-time-base-column\">\r\n                    <PlScroll ref=\"scroll\" onScroll={handler.onScroll}>\r\n                        <ul class=\"pl-time-base-column-list\">\r\n                            {[1, 2, 3].map((item, index) => (\r\n                                <li\r\n                                    ref={val => liList[index] = val as any}\r\n                                    class=\"pl-time-base-column-item\"\r\n                                    key={-item}/>)\r\n                            )}\r\n\r\n                            {options.value.map((item, index) => (\r\n                                <li{...{\r\n                                    class: [\r\n                                        'pl-time-base-column-item',\r\n                                        'pl-time-base-column-option-item',\r\n                                        {\r\n                                            'pl-time-base-column-item-current': model.value != null && model.value == Number(item),\r\n                                            'pl-time-base-column-item-disabled': utils.checkDisabled(item),\r\n                                        }\r\n                                    ],\r\n                                    key: item,\r\n                                    onClick: () => handler.clickItem(item),\r\n                                    ref: val => liList[index + 3] = val as any\r\n                                }}>\r\n                                    {item}\r\n                                </li>\r\n                            ))}\r\n\r\n                            {[1, 2, 3].map(item => (<li class=\"pl-time-base-column-item\" key={-item - 3}/>))}\r\n                        </ul>\r\n                    </PlScroll>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {TimePublicProps} from './time-panel.utils';\r\nimport {computed} from 'vue';\r\nimport {PlainDate} from \"../../../utils/PlainDate\";\r\nimport './time-base-panel.scss'\r\nimport {PlTimeBaseColumn} from \"./time-base-column\";\r\n\r\nexport enum TimePanelLayout {\r\n    h = 'hour',\r\n    m = 'minute',\r\n    s = 'second',\r\n}\r\n\r\nexport const PlTimeBasePanel = designComponent({\r\n    name: 'pl-time-base-panel',\r\n    props: {\r\n        modelValue: {type: String},\r\n        disableChangeOnScroll: {type: Boolean},// 是否禁用在滚动的时候触发更新值动作\r\n        ...TimePublicProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | null) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const formatData = computed(() => {\r\n            return {\r\n                value: new PlainDate(props.modelValue, props.displayFormat, props.valueFormat),\r\n                max: new PlainDate(props.max, props.displayFormat, props.valueFormat),\r\n                min: new PlainDate(props.min, props.displayFormat, props.valueFormat),\r\n            }\r\n        })\r\n\r\n        const maxmin = computed(() => {\r\n\r\n            const max = {\r\n                hour: null as null | number,\r\n                minute: null as null | number,\r\n                second: null as null | number,\r\n            }\r\n            const min = {\r\n                hour: null as null | number,\r\n                minute: null as null | number,\r\n                second: null as null | number,\r\n            }\r\n\r\n            const {max: maxpd, min: minpd, value: vpd} = formatData.value\r\n\r\n            if (!!maxpd.hour) {\r\n                max.hour = maxpd.hour\r\n                if (vpd.hour == null) {\r\n                    // 有最大值，但是没有选择【时】的情况下，分以及秒不能选择任意选项\r\n                    max.minute = -Infinity\r\n                    max.second = -Infinity\r\n                } else {\r\n                    if (vpd.hour < max.hour) {\r\n                        // 有最大值，但是【时】没有达到最大值，此时分以及秒可以任意选择\r\n                        max.minute = null\r\n                        max.second = null\r\n                    } else {\r\n                        max.minute = maxpd.minute\r\n                        if (vpd.minute == null) {\r\n                            max.second = -Infinity\r\n                        } else {\r\n                            if (vpd.minute < max.minute!) {\r\n                                max.second = null\r\n                            } else {\r\n                                max.second = maxpd.second\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!!minpd.hour) {\r\n                min.hour = minpd.hour\r\n                if (vpd.hour == null) {\r\n                    // 有最小值，但是没有选择【时】的情况下，分以及秒不能选择任意选项\r\n                    min.minute = Infinity\r\n                    min.second = Infinity\r\n                } else {\r\n                    if (vpd.hour > min.hour) {\r\n                        // 有最小值，但是【时】没有达到最小值，此时分以及秒可以任意选择\r\n                        min.minute = null\r\n                        min.second = null\r\n                    } else {\r\n                        min.minute = minpd.minute\r\n                        if (vpd.minute == null) {\r\n                            min.second = Infinity\r\n                        } else {\r\n                            if (vpd.minute > min.minute!) {\r\n                                min.second = null\r\n                            } else {\r\n                                min.second = minpd.second\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return {\r\n                max, min,\r\n            }\r\n        })\r\n\r\n        const checkDisabled = computed(() => !props.checkDisabled ? null : (num: number, layout: TimePanelLayout) => props.checkDisabled!(num, layout, formatData.value.value))\r\n\r\n        const custom = computed(() => !props.custom ? null : (layout: TimePanelLayout) => props.custom!(layout, formatData.value.value))\r\n\r\n        const handler = {\r\n            columnChange: (value: number, type: string) => {\r\n                // console.log('columnChange', {value, type})\r\n\r\n                const {value: vpd, max: maxpd, min: minpd} = formatData.value\r\n\r\n                switch (type) {\r\n                    case 'h':\r\n                        vpd.setHour(value)\r\n                        break\r\n                    case 'm':\r\n                        vpd.setMinute(value)\r\n                        break\r\n                    case 's':\r\n                        vpd.setSecond(value)\r\n                        break\r\n                }\r\n\r\n                if (!maxpd.isNull && vpd.Hms! > maxpd.Hms) {\r\n                    vpd.setValue(maxpd.valueString!)\r\n                }\r\n\r\n                if (!minpd.isNull && vpd.Hms! < minpd.Hms) {\r\n                    vpd.setValue(minpd.valueString!)\r\n                }\r\n\r\n                event.emit.onUpdateModelValue(vpd.valueString)\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <div class=\"pl-time-base-panel\">\r\n                        {props.layout.map((layout: any) => (\r\n                            <PlTimeBaseColumn\r\n                                {...{\r\n                                    key: layout,\r\n                                    layout,\r\n                                    modelValue: (formatData as any).value.value[(TimePanelLayout as any)[layout]],\r\n                                    max: (maxmin as any).value.max[(TimePanelLayout as any)[layout]],\r\n                                    min: (maxmin as any).value.min[(TimePanelLayout as any)[layout]],\r\n                                    checkDisabled: checkDisabled.value!,\r\n                                    custom: custom.value as any,\r\n                                    onChange: (val: number) => handler.columnChange(val, layout),\r\n                                    disableChangeOnScroll: props.disableChangeOnScroll,\r\n                                }}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {ComponentPublicInstance, getCurrentInstance} from 'vue';\r\nimport {PlRoot} from \"./root\";\r\n\r\n/**\r\n * 用来注册root组件，建立 root 与 app中的 $root根实例的唯一对应关系\r\n * @author  韦胜健\r\n * @date    2020/11/26 9:32\r\n */\r\nexport const RootController = (() => {\r\n    const map = new WeakMap<ComponentPublicInstance, typeof PlRoot.use.class>()\r\n    return {\r\n        initRoot: (root: typeof PlRoot.use.class) => {\r\n            const $root = root.rootRef()\r\n            map.set($root, root)\r\n        },\r\n        getRoot: (ins: ComponentPublicInstance) => {\r\n            const root = map.get(ins.$root!)\r\n            if (!root) {\r\n                throw new Error(`pl-root is not found, you have to wrap the entire application with <pl-root/>!`)\r\n            }\r\n            return root\r\n        }\r\n    }\r\n})()\r\n\r\nexport enum RootServiceScope {\r\n    root = 'root',\r\n    ins = 'ins',\r\n}\r\n\r\n/**\r\n * 注册一个应用服务\r\n * @author  韦胜健\r\n * @date    2020/11/26 9:34\r\n * @param   name                        服务名称\r\n * @param   managerComponent            Manager组件，由root实例创建，Manager负责创建Service组件实例\r\n * @param   createService               负责通过得到的manager实例，获取service实例，调用service实例的service方法提供服务\r\n * @param   scope                       应用服务的作用范围，root表示整个应用只有一个服务，ins表示每个组件都有自己的服务。\r\n */\r\nexport function registryRootService<ManagerComponent extends { use: { class: any } },\r\n    CreateService extends (getManager: () => Promise<ManagerComponent[\"use\"][\"class\"]>, ins: ComponentPublicInstance) => any>\r\n(\r\n    name: string,\r\n    managerComponent: ManagerComponent,\r\n    createService: CreateService,\r\n    scope = RootServiceScope.root\r\n) {\r\n    let map = new WeakMap<ComponentPublicInstance, ReturnType<CreateService>>()\r\n\r\n    return (ins: ComponentPublicInstance): ReturnType<CreateService> => {\r\n        const mapKey = scope === RootServiceScope.root ? ins.$root! : ins\r\n        let service = map.get(mapKey)\r\n        /*如果在作用域范围内存在已经创建的服务，则直接返回这个服务函数*/\r\n        if (!!service) {\r\n            return service\r\n        }\r\n        /*否则调用创建服务函数，创建一个新的服务函数提供服务*/\r\n        service = createService(async () => {\r\n            const root = RootController.getRoot(mapKey)\r\n            /*获取一个 Controller 实例，没有就给我创建一个*/\r\n            return await root.getManagerInstance(name, managerComponent)\r\n        }, ins)\r\n        map.set(mapKey, service!)\r\n        return service!\r\n    }\r\n}\r\n\r\nexport function createRootService<Service>(context: ComponentPublicInstance, serviceGetter: (ins: ComponentPublicInstance) => Service): Service {\r\n    return serviceGetter(context)\r\n}\r\n\r\nexport function useRootService<Service>(serviceGetter: (ins: ComponentPublicInstance) => Service) {\r\n    const ctx = getCurrentInstance()!\r\n    return serviceGetter(ctx.proxy!)\r\n}","/*---------------------------------------rgb to hex-------------------------------------------*/\r\n\r\nconst INT_HEX_MAP = {10: 'A', 11: 'B', 12: 'C', 13: 'D', 14: 'E', 15: 'F'} as any;\r\n\r\nconst hexOne = function (value: number) {\r\n    value = Math.min(Math.round(value), 255);\r\n    const high = Math.floor(value / 16);\r\n    const low = value % 16;\r\n    return '' + (INT_HEX_MAP[high] || high) + (INT_HEX_MAP[low] || low);\r\n};\r\n\r\n/**\r\n * rgb -> hex\r\n * @author  韦胜健\r\n * @date    2020/4/4 8:58\r\n */\r\nexport const rgb2hex = function (r: number, g: number, b: number): string {\r\n    if (isNaN(r) || isNaN(g) || isNaN(b)) return '';\r\n    return '#' + hexOne(r) + hexOne(g) + hexOne(b);\r\n};\r\n\r\n/*---------------------------------------rgb to hsv-------------------------------------------*/\r\n\r\n/*是否为0.**形式的字符串*/\r\nconst isOnePointZero = function (n: string | number): boolean {\r\n    return typeof n === 'string' && n.indexOf('.') !== -1 && parseFloat(n) === 1;\r\n};\r\n\r\n/*是否为百分比字符串*/\r\nconst isPercentage = function (n: any): boolean {\r\n    return typeof n === 'string' && n.indexOf('%') !== -1;\r\n};\r\n\r\n/*将[0,n]转换为[0,1]*/\r\nconst bound01 = function (value: string | number, max: number): number {\r\n    if (isOnePointZero(value)) value = '100%';\r\n    const processPercent = isPercentage(value);\r\n    value = Math.min(max, Math.max(0, parseFloat(value as string)));\r\n    // Automatically convert percentage into number\r\n    if (processPercent) {\r\n        value = parseInt(String(value * max), 10) / 100;\r\n    }\r\n    // Handle floating point rounding errors\r\n    if ((Math.abs(value - max) < 0.000001)) {\r\n        return 1;\r\n    }\r\n    // Convert into [0, 1] range if it isn't already\r\n    return (value % max) / parseFloat(max as any as string);\r\n};\r\n\r\n/**\r\n * rgb -> hsv\r\n * @author  韦胜健\r\n * @date    2020/4/4 9:09\r\n */\r\nexport const rgb2hsv = function (r: number, g: number, b: number): { h: number, s: number, v: number } {\r\n    r = bound01(r, 255);\r\n    g = bound01(g, 255);\r\n    b = bound01(b, 255);\r\n\r\n    const max = Math.max(r, g, b);\r\n    const min = Math.min(r, g, b);\r\n    let h = 0, s = 0;\r\n    let v = max;\r\n\r\n    const d = max - min;\r\n    s = max === 0 ? 0 : d / max;\r\n\r\n    if (max === min) {\r\n        h = 0; // achromatic\r\n    } else {\r\n        switch (max) {\r\n            case r:\r\n                h = (g - b) / d + (g < b ? 6 : 0);\r\n                break;\r\n            case g:\r\n                h = (b - r) / d + 2;\r\n                break;\r\n            case b:\r\n                h = (r - g) / d + 4;\r\n                break;\r\n        }\r\n        h /= 6;\r\n    }\r\n    const ret = {h: h * 360, s: s * 100, v: v * 100} as any\r\n    Object.keys(ret).forEach(key => ret[key] = ret[key].toFixed(0) - 0)\r\n    return ret;\r\n};\r\n\r\n/*---------------------------------------hsv -> rgb-------------------------------------------*/\r\n/*\r\n *  hsv颜色值转rgb颜色值\r\n *  @author              martsforever\r\n *  @datetime           2019/2/16 22:43\r\n *  @param hue          色调，用角度度量，取值范围为0°～360°，从红色开始按逆时针方向计算，红色为0°，绿色为120°,蓝色为240°。它们的补色是：黄色为60°，青色为180°,品红为300°；\r\n *  @param saturation   饱和度，一种颜色，可以看成是某种光谱色与白色混合的结果。其中光谱色所占的比例愈大，颜色接近光谱色的程度就愈高，颜色的饱和度也就愈高。饱和度高，颜色则深而艳。光谱色的白光成分为0，饱和度达到最高。通常取值范围为0%～100%，值越大，颜色越饱和。\r\n *  @param value        明度，明度表示颜色明亮的程度，对于光源色，明度值与发光体的光亮度有关；对于物体色，此值和物体的透射比或反射比有关。通常取值范围为0%（黑）到100%（白）。\r\n */\r\nexport const hsv2rgb = function (hue: number, saturation: number, value: number): { r: number, g: number, b: number } {\r\n    hue = bound01(hue, 360) * 6;\r\n    saturation = bound01(saturation, 100);\r\n    value = bound01(value, 100);\r\n\r\n    const i = Math.floor(hue);\r\n    const f = hue - i;\r\n    const p = value * (1 - saturation);\r\n    const q = value * (1 - f * saturation);\r\n    const t = value * (1 - (1 - f) * saturation);\r\n    const mod = i % 6;\r\n    const r = [value, q, p, p, t, value][mod];\r\n    const g = [t, value, value, q, p, p][mod];\r\n    const b = [p, p, t, value, value, q][mod];\r\n\r\n    return {\r\n        r: Math.round(r * 255),\r\n        g: Math.round(g * 255),\r\n        b: Math.round(b * 255)\r\n    };\r\n};\r\n\r\n/*---------------------------------------other-------------------------------------------*/\r\n\r\nconst HEX_INT_MAP = {A: 10, B: 11, C: 12, D: 13, E: 14, F: 15} as any;\r\n\r\nexport const parseHexChannel = function (hex: string) {\r\n    if (hex.length === 2) {\r\n        return (HEX_INT_MAP[hex[0].toUpperCase()] || +hex[0]) * 16 + (HEX_INT_MAP[hex[1].toUpperCase()] || +hex[1]);\r\n    }\r\n\r\n    return HEX_INT_MAP[hex[1].toUpperCase()] || +hex[1];\r\n};\r\n\r\n/**\r\n * 判断是否为一个有效的颜色值\r\n * @author  韦胜健\r\n * @date    2020/4/7 11:32\r\n */\r\nexport function isEffectiveColorString(color: string): boolean {\r\n    if (!color) return true\r\n    if (color.indexOf('#') === 0 && /^#[0-9a-fA-F]{6}$/.test(color)) {\r\n        return true\r\n    } else if (color.indexOf('rgb') === 0 && /^rgb(\\(\\d{1,3}(,\\d{1,3}){2}|a\\(\\d{1,3}(,\\d{1,3}){2},(1\\.?0*|0\\.\\d+))\\)$/.test(color)) {\r\n        return true\r\n    }\r\n    return false\r\n}","import {ref, onMounted, onBeforeUnmount} from 'vue';\r\n\r\nexport function useMounted() {\r\n    const isMounted = ref(false)\r\n    onMounted(() => isMounted.value = true)\r\n    onBeforeUnmount(() => isMounted.value = false)\r\n    return isMounted\r\n}","import {createAgentGetter} from \"../../popper/edit/createAgentGetter\";\r\nimport {App} from 'vue';\r\nimport {PlColorPanel} from \"../color-panel\";\r\n\r\nexport const ColorPickerServiceGetter = createAgentGetter({\r\n    name: 'color-picker',\r\n    render(attrs: any) {\r\n        return <PlColorPanel {...attrs}/>\r\n    },\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n    },\r\n    defaultRenderAttrs: {\r\n        onChange() {this.hide()},\r\n    },\r\n})\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            beforeCreate(): void {\r\n                Object.defineProperty(this, '$colorPicker', {\r\n                    get() {\r\n                        const service = ColorPickerServiceGetter(this)\r\n                        return service\r\n                    },\r\n                })\r\n            }\r\n        })\r\n    },\r\n}","import './list.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {TransitionGroup} from 'vue'\r\nimport {useSlots} from \"../../use/useSlots\";\r\n\r\nexport const PlList = designComponent({\r\n    name: 'pl-list',\r\n    props: {\r\n        direction: {                            //item入场出场动画 'left', 'right', 'top', 'bottom', 'left-top', 'top-left', 'right-top', 'top-right', 'left-bottom', 'bottom-left', 'right-bottom', 'bottom-right'\r\n            type: String,\r\n            default: 'bottom-right',\r\n        },\r\n        tag: {type: String, default: 'div'},\r\n        disabled: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        return {\r\n            render: () => {\r\n                const Component = (props.disabled ? props.tag : TransitionGroup) as any\r\n                return (\r\n                    <Component {...{\r\n                        class: \"pl-list\",\r\n                        name: `pl-list-move-${props.direction}`,\r\n                        tag: props.tag,\r\n                    }}>\r\n                        {slots.default()}\r\n                    </Component>\r\n                )\r\n            }\r\n        }\r\n    }\r\n})","var map = {\n\t\"./el-icon-alarm-clock.json\": [\n\t\t\"cb35\",\n\t\t\"chunk-2d2217f7\"\n\t],\n\t\"./el-icon-arrow-down.json\": [\n\t\t\"6c41\",\n\t\t\"chunk-2d0da720\"\n\t],\n\t\"./el-icon-arrow-left.json\": [\n\t\t\"cfb7\",\n\t\t\"chunk-2d222cae\"\n\t],\n\t\"./el-icon-arrow-right.json\": [\n\t\t\"adb0\",\n\t\t\"chunk-2d213c67\"\n\t],\n\t\"./el-icon-arrow-up.json\": [\n\t\t\"94ea\",\n\t\t\"chunk-2d0e59ed\"\n\t],\n\t\"./el-icon-back.json\": [\n\t\t\"3c66\",\n\t\t\"chunk-2d0c4a46\"\n\t],\n\t\"./el-icon-bell.json\": [\n\t\t\"e25d\",\n\t\t\"chunk-2d224cf2\"\n\t],\n\t\"./el-icon-bottom-left.json\": [\n\t\t\"4a3f\",\n\t\t\"chunk-2d0cb6f6\"\n\t],\n\t\"./el-icon-bottom-right.json\": [\n\t\t\"1917\",\n\t\t\"chunk-2d0ac344\"\n\t],\n\t\"./el-icon-bottom.json\": [\n\t\t\"6976\",\n\t\t\"chunk-2d0d09d8\"\n\t],\n\t\"./el-icon-brush.json\": [\n\t\t\"5133\",\n\t\t\"chunk-2d0c76f2\"\n\t],\n\t\"./el-icon-camera-solid.json\": [\n\t\t\"b8dc\",\n\t\t\"chunk-2d210c0b\"\n\t],\n\t\"./el-icon-camera.json\": [\n\t\t\"6fe1\",\n\t\t\"chunk-2d0db852\"\n\t],\n\t\"./el-icon-caret-bottom.json\": [\n\t\t\"3442\",\n\t\t\"chunk-2d0b9995\"\n\t],\n\t\"./el-icon-caret-left.json\": [\n\t\t\"e67c\",\n\t\t\"chunk-2d225c33\"\n\t],\n\t\"./el-icon-caret-right.json\": [\n\t\t\"54bc\",\n\t\t\"chunk-2d0c8816\"\n\t],\n\t\"./el-icon-caret-top.json\": [\n\t\t\"afd3\",\n\t\t\"chunk-2d21442a\"\n\t],\n\t\"./el-icon-chat-dot-round.json\": [\n\t\t\"76c6\",\n\t\t\"chunk-2d0d7848\"\n\t],\n\t\"./el-icon-chat-dot-square.json\": [\n\t\t\"e8b52\",\n\t\t\"chunk-772aaef6\"\n\t],\n\t\"./el-icon-chat-line-round.json\": [\n\t\t\"f439\",\n\t\t\"chunk-2d22c86a\"\n\t],\n\t\"./el-icon-chat-line-square.json\": [\n\t\t\"ec88\",\n\t\t\"chunk-2d230514\"\n\t],\n\t\"./el-icon-chat-round.json\": [\n\t\t\"be43\",\n\t\t\"chunk-2d21aef8\"\n\t],\n\t\"./el-icon-chat-square.json\": [\n\t\t\"fe43\",\n\t\t\"chunk-2d238074\"\n\t],\n\t\"./el-icon-check-bold.json\": [\n\t\t\"f9a6\",\n\t\t\"chunk-2d22e0be\"\n\t],\n\t\"./el-icon-check.json\": [\n\t\t\"4e52\",\n\t\t\"chunk-2d0cc604\"\n\t],\n\t\"./el-icon-circle-check.json\": [\n\t\t\"3c3b\",\n\t\t\"chunk-2d0c4a15\"\n\t],\n\t\"./el-icon-circle-close.json\": [\n\t\t\"3728\",\n\t\t\"chunk-2d0ba4a0\"\n\t],\n\t\"./el-icon-circle-plus-outline.json\": [\n\t\t\"5b87\",\n\t\t\"chunk-2d0d2f82\"\n\t],\n\t\"./el-icon-circle-plus.json\": [\n\t\t\"2bcd\",\n\t\t\"chunk-2d0bd7c7\"\n\t],\n\t\"./el-icon-close-bold.json\": [\n\t\t\"8b35\",\n\t\t\"chunk-2d0e8c02\"\n\t],\n\t\"./el-icon-close-notification.json\": [\n\t\t\"84d2\",\n\t\t\"chunk-2d0de540\"\n\t],\n\t\"./el-icon-close.json\": [\n\t\t\"b7c2\",\n\t\t\"chunk-2d2107fa\"\n\t],\n\t\"./el-icon-cloudy.json\": [\n\t\t\"4230\",\n\t\t\"chunk-2d0c0651\"\n\t],\n\t\"./el-icon-code.json\": [\n\t\t\"711f\",\n\t\t\"chunk-2d0d5fa5\"\n\t],\n\t\"./el-icon-coffee-cup.json\": [\n\t\t\"831a\",\n\t\t\"chunk-2d0ddb81\"\n\t],\n\t\"./el-icon-collection-tag.json\": [\n\t\t\"0ff2\",\n\t\t\"chunk-2d0afe38\"\n\t],\n\t\"./el-icon-connection.json\": [\n\t\t\"6a3d\",\n\t\t\"chunk-2d0d9fb2\"\n\t],\n\t\"./el-icon-crop.json\": [\n\t\t\"94f4\",\n\t\t\"chunk-2d0e59df\"\n\t],\n\t\"./el-icon-d-arrow-left.json\": [\n\t\t\"3194\",\n\t\t\"chunk-2d0b8eef\"\n\t],\n\t\"./el-icon-d-arrow-right.json\": [\n\t\t\"56ef3\",\n\t\t\"chunk-74856f3b\"\n\t],\n\t\"./el-icon-date.json\": [\n\t\t\"ca53\",\n\t\t\"chunk-2d221472\"\n\t],\n\t\"./el-icon-debug-s.json\": [\n\t\t\"241e\",\n\t\t\"chunk-2d0b250c\"\n\t],\n\t\"./el-icon-debug.json\": [\n\t\t\"5696\",\n\t\t\"chunk-2d0c8a74\"\n\t],\n\t\"./el-icon-delete-location.json\": [\n\t\t\"e918\",\n\t\t\"chunk-2d226691\"\n\t],\n\t\"./el-icon-delete-solid.json\": [\n\t\t\"ed66\",\n\t\t\"chunk-2d230895\"\n\t],\n\t\"./el-icon-delete.json\": [\n\t\t\"4add\",\n\t\t\"chunk-2d0cbce3\"\n\t],\n\t\"./el-icon-document-add.json\": [\n\t\t\"b7c1\",\n\t\t\"chunk-2d2107f9\"\n\t],\n\t\"./el-icon-document-checked.json\": [\n\t\t\"af1c\",\n\t\t\"chunk-2d213e2d\"\n\t],\n\t\"./el-icon-document-copy.json\": [\n\t\t\"764e\",\n\t\t\"chunk-2d0d72c6\"\n\t],\n\t\"./el-icon-document-delete.json\": [\n\t\t\"a8d2\",\n\t\t\"chunk-2d20977b\"\n\t],\n\t\"./el-icon-document-remove.json\": [\n\t\t\"dd28\",\n\t\t\"chunk-2d2293bc\"\n\t],\n\t\"./el-icon-document.json\": [\n\t\t\"2b65\",\n\t\t\"chunk-2d0bd225\"\n\t],\n\t\"./el-icon-download.json\": [\n\t\t\"9065\",\n\t\t\"chunk-2d0e450c\"\n\t],\n\t\"./el-icon-edit-outline.json\": [\n\t\t\"f8e0\",\n\t\t\"chunk-2d22dd73\"\n\t],\n\t\"./el-icon-edit.json\": [\n\t\t\"0caa\",\n\t\t\"chunk-2d0af289\"\n\t],\n\t\"./el-icon-error.json\": [\n\t\t\"16c6\",\n\t\t\"chunk-2d0abe0e\"\n\t],\n\t\"./el-icon-female.json\": [\n\t\t\"9937\",\n\t\t\"chunk-2d0e667a\"\n\t],\n\t\"./el-icon-first-aid-kit.json\": [\n\t\t\"9a63\",\n\t\t\"chunk-2d0efcfb\"\n\t],\n\t\"./el-icon-folder-add.json\": [\n\t\t\"e0c3\",\n\t\t\"chunk-2d224ad1\"\n\t],\n\t\"./el-icon-folder-checked.json\": [\n\t\t\"6eb2\",\n\t\t\"chunk-2d0db435\"\n\t],\n\t\"./el-icon-folder-delete.json\": [\n\t\t\"5ca1\",\n\t\t\"chunk-2d0d3834\"\n\t],\n\t\"./el-icon-folder-opened.json\": [\n\t\t\"08b5\",\n\t\t\"chunk-2d0a5111\"\n\t],\n\t\"./el-icon-folder-remove.json\": [\n\t\t\"dcfa\",\n\t\t\"chunk-2d229670\"\n\t],\n\t\"./el-icon-folder-s.json\": [\n\t\t\"59d9\",\n\t\t\"chunk-2d0c9aef\"\n\t],\n\t\"./el-icon-folder.json\": [\n\t\t\"f98f\",\n\t\t\"chunk-2d22dbf7\"\n\t],\n\t\"./el-icon-full-screen.json\": [\n\t\t\"5d5a\",\n\t\t\"chunk-2d0d36d1\"\n\t],\n\t\"./el-icon-info.json\": [\n\t\t\"36b6\",\n\t\t\"chunk-2d0ba6ad\"\n\t],\n\t\"./el-icon-jiahao.json\": [\n\t\t\"da7d\",\n\t\t\"chunk-2d228940\"\n\t],\n\t\"./el-icon-link.json\": [\n\t\t\"90ff\",\n\t\t\"chunk-2d0e4b0d\"\n\t],\n\t\"./el-icon-list.json\": [\n\t\t\"66d9\",\n\t\t\"chunk-2d0d040b\"\n\t],\n\t\"./el-icon-location-information.json\": [\n\t\t\"e752\",\n\t\t\"chunk-2d225f85\"\n\t],\n\t\"./el-icon-location-outline.json\": [\n\t\t\"e518\",\n\t\t\"chunk-2d22578d\"\n\t],\n\t\"./el-icon-location.json\": [\n\t\t\"c034\",\n\t\t\"chunk-2d215c44\"\n\t],\n\t\"./el-icon-lock.json\": [\n\t\t\"4e03\",\n\t\t\"chunk-2d0cc56a\"\n\t],\n\t\"./el-icon-male.json\": [\n\t\t\"469c\",\n\t\t\"chunk-2d0c1642\"\n\t],\n\t\"./el-icon-menu.json\": [\n\t\t\"0a5a\",\n\t\t\"chunk-2d0ae5b3\"\n\t],\n\t\"./el-icon-message-solid.json\": [\n\t\t\"b1c9\",\n\t\t\"chunk-2d20f17b\"\n\t],\n\t\"./el-icon-message.json\": [\n\t\t\"d4ee\",\n\t\t\"chunk-2d21e5e6\"\n\t],\n\t\"./el-icon-microphone.json\": [\n\t\t\"1722\",\n\t\t\"chunk-2d0abbdc\"\n\t],\n\t\"./el-icon-minus.json\": [\n\t\t\"a53c\",\n\t\t\"chunk-2d20867a\"\n\t],\n\t\"./el-icon-more.json\": [\n\t\t\"af8e\",\n\t\t\"chunk-2d213f08\"\n\t],\n\t\"./el-icon-nodata.json\": [\n\t\t\"1e28\",\n\t\t\"chunk-2d0b6890\"\n\t],\n\t\"./el-icon-paperclip.json\": [\n\t\t\"011a\",\n\t\t\"chunk-2d0a3107\"\n\t],\n\t\"./el-icon-picture-outline.json\": [\n\t\t\"9618\",\n\t\t\"chunk-2d0e5afa\"\n\t],\n\t\"./el-icon-picture.json\": [\n\t\t\"dbd7\",\n\t\t\"chunk-2d229247\"\n\t],\n\t\"./el-icon-place.json\": [\n\t\t\"f20d\",\n\t\t\"chunk-2d22c0b6\"\n\t],\n\t\"./el-icon-plus.json\": [\n\t\t\"26b6\",\n\t\t\"chunk-2d0b324e\"\n\t],\n\t\"./el-icon-position.json\": [\n\t\t\"0bbe\",\n\t\t\"chunk-2d0aeeeb\"\n\t],\n\t\"./el-icon-question.json\": [\n\t\t\"84cd\",\n\t\t\"chunk-2d0de553\"\n\t],\n\t\"./el-icon-rank.json\": [\n\t\t\"8661\",\n\t\t\"chunk-2d0de72f\"\n\t],\n\t\"./el-icon-redo.json\": [\n\t\t\"01af\",\n\t\t\"chunk-2d0a36dc\"\n\t],\n\t\"./el-icon-refresh-right.json\": [\n\t\t\"ed12\",\n\t\t\"chunk-2d2307f6\"\n\t],\n\t\"./el-icon-refresh.json\": [\n\t\t\"33ab\",\n\t\t\"chunk-2d0b9b77\"\n\t],\n\t\"./el-icon-remove-outline.json\": [\n\t\t\"c6b69\",\n\t\t\"chunk-770d975c\"\n\t],\n\t\"./el-icon-remove.json\": [\n\t\t\"0103\",\n\t\t\"chunk-2d0a30ba\"\n\t],\n\t\"./el-icon-right.json\": [\n\t\t\"6be0\",\n\t\t\"chunk-2d0da94d\"\n\t],\n\t\"./el-icon-rotate-left.json\": [\n\t\t\"94b8\",\n\t\t\"chunk-2d0e5967\"\n\t],\n\t\"./el-icon-rotate-right.json\": [\n\t\t\"30b7\",\n\t\t\"chunk-2d0b9028\"\n\t],\n\t\"./el-icon-s-comment.json\": [\n\t\t\"849a\",\n\t\t\"chunk-2d0de03a\"\n\t],\n\t\"./el-icon-s-custom.json\": [\n\t\t\"4001\",\n\t\t\"chunk-2d0bfe73\"\n\t],\n\t\"./el-icon-s-fold.json\": [\n\t\t\"01f3\",\n\t\t\"chunk-2d0a3744\"\n\t],\n\t\"./el-icon-s-grid.json\": [\n\t\t\"8efd\",\n\t\t\"chunk-2d0e9da1\"\n\t],\n\t\"./el-icon-s-opportunity.json\": [\n\t\t\"acd7\",\n\t\t\"chunk-2d2138eb\"\n\t],\n\t\"./el-icon-s-order.json\": [\n\t\t\"b5e1\",\n\t\t\"chunk-2d2100b5\"\n\t],\n\t\"./el-icon-s-promotion.json\": [\n\t\t\"8e1e\",\n\t\t\"chunk-2d0e9737\"\n\t],\n\t\"./el-icon-s-shop.json\": [\n\t\t\"a48f\",\n\t\t\"chunk-2d208357\"\n\t],\n\t\"./el-icon-s-ticket.json\": [\n\t\t\"471a\",\n\t\t\"chunk-2d0c1909\"\n\t],\n\t\"./el-icon-s-tools.json\": [\n\t\t\"49e0\",\n\t\t\"chunk-2d0c26a6\"\n\t],\n\t\"./el-icon-s-unfold.json\": [\n\t\t\"2d66\",\n\t\t\"chunk-2d0bd9a8\"\n\t],\n\t\"./el-icon-search.json\": [\n\t\t\"37aa\",\n\t\t\"chunk-2d0baa7a\"\n\t],\n\t\"./el-icon-setting.json\": [\n\t\t\"70db\",\n\t\t\"chunk-2d0d620d\"\n\t],\n\t\"./el-icon-share.json\": [\n\t\t\"75e3\",\n\t\t\"chunk-2d0d74c2\"\n\t],\n\t\"./el-icon-sort.json\": [\n\t\t\"e450\",\n\t\t\"chunk-2d225440\"\n\t],\n\t\"./el-icon-star-off.json\": [\n\t\t\"c7d3\",\n\t\t\"chunk-2d217c79\"\n\t],\n\t\"./el-icon-star-on.json\": [\n\t\t\"ce5c\",\n\t\t\"chunk-2d2223a6\"\n\t],\n\t\"./el-icon-success.json\": [\n\t\t\"b819\",\n\t\t\"chunk-2d2105b4\"\n\t],\n\t\"./el-icon-switch-button.json\": [\n\t\t\"e677\",\n\t\t\"chunk-2d225c07\"\n\t],\n\t\"./el-icon-thumb.json\": [\n\t\t\"681e\",\n\t\t\"chunk-2d0d058c\"\n\t],\n\t\"./el-icon-time.json\": [\n\t\t\"d831\",\n\t\t\"chunk-2d21eea8\"\n\t],\n\t\"./el-icon-tools.json\": [\n\t\t\"3f79\",\n\t\t\"chunk-2d0c55ab\"\n\t],\n\t\"./el-icon-top-left.json\": [\n\t\t\"d8d8\",\n\t\t\"chunk-2d21f49e\"\n\t],\n\t\"./el-icon-top-right.json\": [\n\t\t\"ddd4\",\n\t\t\"chunk-2d2299c6\"\n\t],\n\t\"./el-icon-top.json\": [\n\t\t\"aca8\",\n\t\t\"chunk-2d21388f\"\n\t],\n\t\"./el-icon-turn-off-microphone.json\": [\n\t\t\"0bd6\",\n\t\t\"chunk-2d0aeefa\"\n\t],\n\t\"./el-icon-undo.json\": [\n\t\t\"9ff1\",\n\t\t\"chunk-2d0f158e\"\n\t],\n\t\"./el-icon-unlock.json\": [\n\t\t\"f7ea\",\n\t\t\"chunk-2d22d9e3\"\n\t],\n\t\"./el-icon-upload.json\": [\n\t\t\"0bce\",\n\t\t\"chunk-2d0aef0a\"\n\t],\n\t\"./el-icon-upload1.json\": [\n\t\t\"d889\",\n\t\t\"chunk-2d21ef4b\"\n\t],\n\t\"./el-icon-video-pause.json\": [\n\t\t\"c6a5\",\n\t\t\"chunk-2d21785d\"\n\t],\n\t\"./el-icon-video-play.json\": [\n\t\t\"4016\",\n\t\t\"chunk-2d0bfe97\"\n\t],\n\t\"./el-icon-view-not-s.json\": [\n\t\t\"f49d\",\n\t\t\"chunk-2d22c94f\"\n\t],\n\t\"./el-icon-view.json\": [\n\t\t\"c3a4\",\n\t\t\"chunk-2d216d19\"\n\t],\n\t\"./el-icon-warning-outline.json\": [\n\t\t\"93f8\",\n\t\t\"chunk-2d0e5622\"\n\t],\n\t\"./el-icon-warning.json\": [\n\t\t\"80f1\",\n\t\t\"chunk-2d0dd679\"\n\t],\n\t\"./el-icon-zoom-full.json\": [\n\t\t\"450c\",\n\t\t\"chunk-2d0c116a\"\n\t],\n\t\"./el-icon-zoom-in.json\": [\n\t\t\"2731\",\n\t\t\"chunk-2d0b3059\"\n\t],\n\t\"./el-icon-zoom-out.json\": [\n\t\t\"1141\",\n\t\t\"chunk-2d0aa593\"\n\t],\n\t\"./el-icon-zoom-scale.json\": [\n\t\t\"616d\",\n\t\t\"chunk-2d0cebdf\"\n\t],\n\t\"./index.json\": [\n\t\t\"9aae\",\n\t\t\"chunk-2d0f0262\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"e51c\";\nmodule.exports = webpackAsyncContext;","import {designComponent} from \"../../../use/designComponent\";\r\nimport {EditProps} from \"../../../use/useEdit\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport {useProps} from \"../../../use/useProps\";\r\nimport {computed, nextTick, reactive, watch} from 'vue';\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport './color-alpha-slider.scss'\r\n\r\nconst bg = require('./opacity.png')\r\n\r\nexport const PlColorAlphaSlider = designComponent({\r\n    name: 'pl-color-alpha-slider',\r\n    props: {\r\n        ...EditProps,\r\n\r\n        color: {type: String},                                      // 当前颜色\r\n        modelValue: {type: Number, default: 0},                     // 透明度\r\n        size: {type: [String, Number]},                             // 大小\r\n        thumbSize: {type: [String, Number], default: 10},           // 指示器宽度\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        const {propsState} = useProps(props, {\r\n            size: useProps.NUMBER,\r\n            thumbSize: useProps.NUMBER,\r\n        })\r\n\r\n        const state = reactive({\r\n            top: 0,\r\n            tempTop: 0,\r\n            startY: null as null | number,\r\n        })\r\n\r\n        const styles = computed(() => ({\r\n            height: unit(propsState.size),\r\n            backgroundImage: `url(${bg})`,\r\n        }))\r\n\r\n        const shadowStyles = computed(() => ({\r\n            background: `linear-gradient(to top, ${props.color}, rgba(255,255,255,0))`,\r\n        }))\r\n\r\n        const thumbStyles = computed(() => ({\r\n            top: `${state.top}px`,\r\n            width: unit(propsState.thumbSize)\r\n        }))\r\n\r\n        const height = computed(() => (propsState.size as number) - (propsState.thumbSize as number))\r\n\r\n        const methods = {\r\n            setTop: (top: number) => {\r\n                state.top = Math.max(0, Math.min(height.value, top))\r\n            },\r\n            emitValue: () => {\r\n                emit.onUpdateModelValue(Number((state.top / height.value * 100).toFixed(0)))\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                document.body.addEventListener('mousemove', handler.mousemove)\r\n                document.body.addEventListener('mouseup', handler.mouseup)\r\n                if (e.target === refs.el) {\r\n                    methods.setTop(e.offsetY - (propsState.thumbSize as number) / 2)\r\n                    methods.emitValue()\r\n                }\r\n                disabledUserSelect()\r\n                state.startY = e.clientY\r\n                state.tempTop = state.top\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                const durY = e.clientY - state.startY!\r\n                methods.setTop(state.tempTop + durY)\r\n                methods.emitValue()\r\n            },\r\n            mouseup: (e: MouseEvent) => {\r\n                document.body.removeEventListener('mousemove', handler.mousemove)\r\n                document.body.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            nextTick().then(() => methods.setTop(val / 100 * height.value))\r\n        }, {immediate: true})\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-alpha-slider\" style={styles.value as any} onMousedown={handler.mousedown} ref=\"el\">\r\n                    <div class=\"pl-color-alpha-shadow\" style={shadowStyles.value}/>\r\n                    <span class=\"pl-color-alpha-thumb\" style={thumbStyles.value as any}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\n\r\nexport const PlItem = designComponent({\r\n    name: 'pl-item',\r\n    props: {\r\n        block: {type: Boolean},\r\n        tag: {type: String, default: 'div'},\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        return {\r\n            render: () => {\r\n                const {tag: Tag} = props as any\r\n                return (\r\n                    <Tag {...{class: `pl-item ${!!props.block ? 'pl-item-block' : ''}`}}>\r\n                        {slots.default()}\r\n                    </Tag>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {Directive} from 'vue'\r\nimport './click-wave.scss'\r\n\r\nconst map = new WeakMap()\r\n\r\nclass ClickWaveData {\r\n\r\n    option: any\r\n    on: () => void\r\n    wavingTimer: number | null = null\r\n    el: HTMLElement\r\n    updateOption: (option: any) => void\r\n\r\n    constructor(el: HTMLElement, option: any) {\r\n        this.option = {}\r\n        this.on = () => {\r\n            // console.log(this.option,this.option.disabled === true)\r\n            if (this.option.disabled === true) return;\r\n            if (!!this.wavingTimer) return\r\n\r\n            this.el.setAttribute('plain-click-node-waving', 'active')\r\n            this.wavingTimer = setTimeout(() => {\r\n                this.el.removeAttribute('plain-click-node-waving')\r\n                this.wavingTimer = null\r\n            }, 500) as any as number\r\n        }\r\n        this.updateOption = (option) => {\r\n            option = option || {}\r\n            if (typeof option === \"string\") {\r\n                option = {\r\n                    size: option\r\n                }\r\n            }\r\n            option.size = option.size || 'normal'\r\n            this.option = option\r\n        }\r\n        this.updateOption(option)\r\n        this.el = el\r\n        this.el.setAttribute(`plain-click-node-${this.option.size}`, 'active')\r\n\r\n        el.addEventListener('click', this.on, true)\r\n    }\r\n\r\n    unbind() {\r\n        this.el.removeEventListener('click', this.on, true)\r\n    }\r\n}\r\n\r\nexport const ClickWave: Directive = {\r\n    mounted(el, binding) {\r\n        map.set(el, new ClickWaveData(el, binding.value))\r\n    },\r\n    updated(el, binding) {\r\n        const data = map.get(el)\r\n        if (!!data) {\r\n            data.updateOption(binding.value)\r\n        }\r\n    },\r\n    beforeUnmount(el) {\r\n        const data = map.get(el)\r\n        if (!!data) {\r\n            data.unbind()\r\n        }\r\n    },\r\n}","import {VNodeChild} from \"../shims\";\r\nimport {getCurrentInstance, onBeforeUpdate, reactive} from 'vue';\r\nimport {getSlotExist} from \"../utils/getSlotExists\";\r\n\r\ntype ScopedSlotsOptionType = { [SlotName: string]: { [ScopeKey: string]: any } }\r\n\r\ntype ExtractScopedSlotsDataValue<ScopeValue> = ScopeValue extends new (...args: any[]) => infer R ? R : ScopeValue;\r\n\r\ntype ExtractScopedSlotsData<Scope extends { [ScopeKey: string]: any }> = {\r\n    [k in keyof Scope]: ExtractScopedSlotsDataValue<Scope[k]>\r\n}\r\n\r\ninterface UseScopedSlots {\r\n    <T extends ScopedSlotsOptionType>(options: T): {\r\n        scopedSlots: {\r\n            [k in keyof T]: ((scope: ExtractScopedSlotsData<T[k]>, vnode: VNodeChild) => void)\r\n        }\r\n    }\r\n\r\n    <T extends ScopedSlotsOptionType>(options: T, makeReactive?: boolean): {\r\n        scopedSlots: {\r\n            [k in keyof T]: ((scope: ExtractScopedSlotsData<T[k]>, vnode: VNodeChild) => void) & { isExist: () => boolean }\r\n        }\r\n    }\r\n}\r\n\r\nexport const useScopedSlots: UseScopedSlots = <T extends ScopedSlotsOptionType>(options: T, makeReactive?: boolean) => {\r\n\r\n    const ctx = getCurrentInstance()!\r\n    const slotNames = Object.keys(options)\r\n\r\n    const state = reactive({exist: getSlotExist(null, slotNames, ctx)})\r\n    /*如果需要响应式，则需要设置 makeReactive，会自动在updated之后更新slots的isExist值*/\r\n    if (makeReactive) {\r\n        onBeforeUpdate(() => {\r\n            getSlotExist(state.exist, slotNames, ctx)\r\n        })\r\n    }\r\n\r\n    const scopedSlots = slotNames.reduce((prev: any, slotName: string) => {\r\n        prev[slotName] = Object.assign((scope: any, vnode: VNodeChild) => {\r\n            const slot = ctx.slots[slotName]\r\n            return !!slot ? slot(scope) : vnode\r\n        }, {\r\n            isExist() {\r\n                return state.exist[slotName]\r\n            },\r\n        })\r\n        return prev\r\n    }, {} as any)\r\n\r\n    return {\r\n        scopedSlots,\r\n    }\r\n}\r\n","import {designComponent} from \"../../../use/designComponent\";\r\nimport {TimePublicProps} from \"./time-panel.utils\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {nextTick, computed, PropType} from 'vue';\r\nimport {PlTimeRangePanel, TimeRangePanelType} from \"./time-range-panel\";\r\nimport {PlTimeBasePanel} from \"./time-base-panel\";\r\nimport {VNodeChild} from \"../../../shims\";\r\n\r\nexport const TimePanelProps = {\r\n    modelValue: {type: String},\r\n    start: {type: String},\r\n    end: {type: String},\r\n    range: {type: Boolean},\r\n    ...TimePublicProps,\r\n}\r\n\r\nexport const PlTimePanel = designComponent({\r\n    name: 'pl-time-panel',\r\n    props: {\r\n        ...TimePanelProps,\r\n        foot: {type: Function as PropType<() => VNodeChild>},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | undefined, type: TimeRangePanelType) => true,\r\n        onUpdateStart: (val?: string) => true,\r\n        onUpdateEnd: (val?: string) => true,\r\n\r\n        onMousedownBasePanel: (e: MouseEvent) => true,\r\n        onMousedownStartPanel: (e: MouseEvent) => true,\r\n        onMousedownEndPanel: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue as any)\r\n        const start = useModel(() => props.start, emit.onUpdateStart)\r\n        const end = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const handler = {\r\n            onBaseChange: async (val?: string) => {\r\n                await nextTick()\r\n                model.value = val\r\n            },\r\n            onRangeChange: async (val: string | undefined, type: TimeRangePanelType) => {\r\n                await nextTick()\r\n                if (type === TimeRangePanelType.start) {\r\n                    start.value = val\r\n                } else if (type === TimeRangePanelType.end) {\r\n                    end.value = val\r\n                }\r\n                emit.onUpdateModelValue(val, type)\r\n            },\r\n        }\r\n\r\n        const binding = computed(() => {\r\n\r\n            const publicProps = Object.keys(TimePublicProps).reduce((ret: any, key) => {\r\n                ret[key] = (props as any)[key]\r\n                return ret\r\n            }, {})\r\n\r\n            return {\r\n                base: {\r\n                    ...publicProps,\r\n                    modelValue: model.value,\r\n                    onChange: handler.onBaseChange,\r\n                    onMousedown: emit.onMousedownBasePanel,\r\n                },\r\n                range: {\r\n                    ...publicProps,\r\n                    start: start.value,\r\n                    end: end.value,\r\n                    onChange: handler.onRangeChange,\r\n                    onMousedownStartPanel: emit.onMousedownStartPanel,\r\n                    onMousedownEndPanel: emit.onMousedownEndPanel,\r\n                },\r\n            }\r\n        })\r\n\r\n        return {\r\n            render: () => <>\r\n                {!props.range ?\r\n                    <PlTimeBasePanel class=\"pl-time-panel\" {...binding.value.base} key=\"base\"/> :\r\n                    <PlTimeRangePanel class=\"pl-time-panel\" {...binding.value.range} key=\"range\"/>}\r\n                {!!props.foot && <div class=\"pl-time-panel-foot\" onMousedown={emit.onMousedownBasePanel}>\r\n                    {props.foot()}\r\n                </div>}\r\n            </>\r\n        }\r\n\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {PropType} from 'vue';\r\nimport {NavigatorManager} from \"./NavigatorManager\";\r\nimport './nav.scss'\r\nimport {NavStack} from \"./nav-stack\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-nav',\r\n    provideRefer: true,\r\n    props: {\r\n        nav: {type: Object as PropType<NavigatorManager>, required: true},\r\n        height: {default: '100vh'},\r\n        width: {default: '100vw'},\r\n    },\r\n    setup({props}) {\r\n        return {\r\n            refer: {\r\n                props,\r\n            },\r\n            render: () => {\r\n                return (\r\n                    <div class=\"pl-nav\" style={{width: props.width, height: props.height}}>\r\n                        {props.nav.state.stacks\r\n                            .map(stack => (<NavStack stack={stack} key={stack.id}/>))}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {computed} from 'vue'\r\n\r\nexport type SingleClass = null | undefined | string | { [k: string]: boolean | null | undefined }\r\nexport type MultipleClass = SingleClass | SingleClass[]\r\n\r\nexport function useClass<T extends () => MultipleClass>(fn: T) {\r\n    return computed(fn)\r\n}","import {PlButtonGroup} from './button-group'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlButtonGroup)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\n\r\nexport const PlInputInnerTags = designComponent({\r\n    name: 'pl-input-inner-tags',\r\n    props: {\r\n        data: {type: Array},\r\n        collapseTags: {type: Boolean, default: true},\r\n    },\r\n    setup({props}) {\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {item: Object, index: Number},\r\n        })\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-input-inner-tags\">\r\n                    <span class=\"pl-input-inner-tag-item pl-input-inner-tag-item-takeover\">&nbsp;</span>\r\n                    {\r\n                        (props.collapseTags ? props.data!.slice(0, 3) : props.data!).map((item: any, index) => (\r\n                            <span key={index} class=\"pl-input-inner-tag-item\">\r\n                            {scopedSlots.default({item, index}, null)}\r\n                        </span>\r\n                        ))\r\n                    }\r\n                    {props.collapseTags && props.data!.length > 3 && <span class=\"pl-input-inner-tag-item\">+{props.data!.length - 3}</span>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlInputInnerTags} from \"../input/input-inner-tags\";\r\n\r\nexport default createComponentPlugin(PlInputInnerTags)","import './loading-mask.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {computed, nextTick, reactive, watch, Transition, onMounted} from 'vue';\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Loading from '../loading'\r\n\r\nexport const PlLoadingMask =  designComponent({\r\n    name: 'pl-loading-mask',\r\n    props: {\r\n        modelValue: {type: Boolean},                                    // 是否打开loading遮罩\r\n        message: {type: String},                                        // 提示信息\r\n        loadingType: {type: String, default: 'delta'},                  // loading类型\r\n        background: {type: String, default: 'rgba(255,255,255,0.85)'},  // 遮罩背景色\r\n        unlock: {type: Boolean},                                        // 取消阻止点击事件\r\n        fixedPosition: {type: Boolean},                                 // 是否为根节点的加载遮罩\r\n        inDirective: {type: Boolean},                                   // 是否为遮罩指令服务的实例\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean | undefined) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLElement\r\n        })\r\n\r\n        const modelValue = useModel(() => props.modelValue, event.emit.onUpdateModelValue)\r\n\r\n        const state = reactive({\r\n            isMounted: false,\r\n            zIndex: nextIndex() + (!props.fixedPosition ? -1500 : 0) + 1,\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-loading-mask',\r\n            {\r\n                'pl-loading-mask-unlock': props.unlock,\r\n                'pl-loading-mask-fixed-position': props.fixedPosition\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            style.background = props.background\r\n            style.zIndex = state.zIndex\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 检查父节点的position是否为 absolute，relative或者fixed，不是的话，设置为 relative\r\n             * @author  韦胜健\r\n             * @date    2020/11/3 16:42\r\n             */\r\n            resetParentPosition: async () => {\r\n                if (props.fixedPosition) {\r\n                    return\r\n                }\r\n                await nextTick()\r\n                const el = refs.el\r\n                if (el) {\r\n                    let parentNode = el.parentNode as HTMLElement\r\n                    if (props.inDirective) {\r\n                        parentNode = parentNode.parentNode as HTMLElement\r\n                    }\r\n                    if (!!parentNode) {\r\n                        const styles = window.getComputedStyle(parentNode)\r\n                        const position = styles.position\r\n                        if (['absolute', 'relative', 'fixed'].indexOf(position) === -1) {\r\n                            parentNode.style.position = 'relative'\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        watch(() => modelValue.value && state.isMounted, async val => {\r\n            !!val && (state.zIndex = nextIndex() + (!props.fixedPosition ? -1500 : 0) + 1);\r\n            await utils.resetParentPosition()\r\n        })\r\n\r\n        onMounted(() => {\r\n            utils.resetParentPosition()\r\n            setTimeout(() => {\r\n                state.isMounted = true\r\n            }, 23)\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <Transition name=\"pl-transition-loading-mask\">\r\n                    {!!modelValue.value && state.isMounted && (\r\n                        <div style={styles.value} class={classes.value} ref=\"el\">\r\n                            <Loading type={props.loadingType}/>\r\n                            {!!props.message && <span>{props.message}</span>}\r\n                        </div>\r\n                    )}\r\n                </Transition>\r\n            )\r\n        }\r\n    },\r\n})","import {PlLoadingMask} from './loading-mask'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlLoadingMask)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from '../../use/useEdit';\r\nimport {StyleProps, useStyle} from '../../use/useStyle';\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {CheckboxStatus, DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {computed, inject, PropType} from 'vue';\r\nimport {$$notice} from \"../notice-service\";\r\nimport {PlCheckbox} from \"../checkbox/checkbox\";\r\n\r\nexport const PlCheckboxGroup = designComponent({\r\n    name: 'pl-checkbox-group',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: Array as PropType<(string | number)[]>},\r\n\r\n        min: {type: Number},                                        // 最大勾选个数\r\n        max: {type: Number},                                        // 最小勾选个数\r\n        itemWidth: {type: [String, Number]},                        // 文本宽度\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: (string | number)[] | undefined) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const formItem = inject('@@pl-form-item', null)\r\n\r\n        /*插槽*/\r\n        const {slots} = useSlots()\r\n        /*可编辑控制*/\r\n        const {editComputed} = useEdit()\r\n        /*样式控制*/\r\n        useStyle({status: DEFAULT_STATUS})\r\n        /*格式化属性*/\r\n        const {propsState} = useProps(props, {\r\n            min: useProps.NUMBER,\r\n            max: useProps.NUMBER,\r\n            itemWidth: useProps.NUMBER,\r\n        })\r\n        /*绑定值*/\r\n        const modelValue = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        /*子组件Checkbox*/\r\n        const children = CheckboxGroupCollector.parent()\r\n        /*可用子组件*/\r\n        const activeChildren = computed(() => children.filter(({innerState: {props: {checkboxForAll, customReadonly}}}) => !checkboxForAll && !customReadonly))\r\n\r\n        /*可用子组件keys*/\r\n        const allKeys = computed((() => activeChildren.value.map(({innerState: {props: {val}}}) => val)))\r\n\r\n        /*当前选择状态*/\r\n        const checkStatus = computed(() => {\r\n            let hasCheck = false\r\n            let hasUncheck = false\r\n            if (!modelValue.value) {\r\n                return CheckboxStatus.uncheck\r\n            }\r\n            activeChildren\r\n                .value\r\n                .forEach(child => modelValue.value!\r\n                    .indexOf(child.innerState.props.val!) > -1 ? hasCheck = true : hasUncheck = true)\r\n\r\n            if (hasCheck && !hasUncheck) {\r\n                return CheckboxStatus.check\r\n            }\r\n            if (!hasCheck && hasUncheck) {\r\n                return CheckboxStatus.uncheck\r\n            }\r\n            return CheckboxStatus.minus\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 子组件用来获取状态工具函数\r\n             * @author  韦胜健\r\n             * @date    2020/11/4 11:26\r\n             */\r\n            getCheckStatus: (checkbox: typeof PlCheckbox.use.class): CheckboxStatus => {\r\n                const {innerState: {props: {checkboxForAll, val}}} = checkbox\r\n                if (checkboxForAll) {\r\n                    return checkStatus.value\r\n                } else {\r\n                    return !!modelValue.value && modelValue.value.indexOf(val!) > -1 ? CheckboxStatus.check : CheckboxStatus.uncheck\r\n                }\r\n            },\r\n            exceed: {\r\n                /**\r\n                 * 是否已经超出了max\r\n                 * @author  韦胜健\r\n                 * @date    2020/11/4 11:26\r\n                 */\r\n                max: (val: (string | number)[] | undefined) => {\r\n                    if (propsState.max == null) {\r\n                        return false\r\n                    }\r\n                    return !!val && val.length > propsState.max\r\n                },\r\n                /**\r\n                 * 是否已经超出了min\r\n                 * @author  韦胜健\r\n                 * @date    2020/11/4 11:26\r\n                 */\r\n                min: (val: (string | number)[] | undefined) => {\r\n                    if (propsState.min == null) {\r\n                        return false\r\n                    }\r\n                    return !val || val.length < propsState.min\r\n                }\r\n            },\r\n            changeValue: {\r\n                /**\r\n                 * 添加选项赋值\r\n                 * @author  韦胜健\r\n                 * @date    2020/11/4 11:26\r\n                 */\r\n                add: (val: (string | number)[]) => {\r\n                    if (utils.exceed.max(val)) {\r\n                        $$notice.warn(`最多可选 ${propsState.max} 个选项！`)\r\n                    } else {\r\n                        modelValue.value = val\r\n                    }\r\n                },\r\n                /**\r\n                 * 删除选项赋值\r\n                 * @author  韦胜健\r\n                 * @date    2020/11/4 11:26\r\n                 */\r\n                delete: (val: (string | number)[]) => {\r\n                    if (utils.exceed.min(val)) {\r\n                        $$notice.warn(`最少选择 ${propsState.min} 个选项！`)\r\n                    } else {\r\n                        modelValue.value = val\r\n                    }\r\n                }\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            /**\r\n             * 处理点击按钮事件\r\n             * @author  韦胜健\r\n             * @date    2020/11/4 11:27\r\n             */\r\n            clickCheckbox: (checkbox: typeof PlCheckbox.use.class) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                const {innerState: {props: {val, checkboxForAll}}} = checkbox\r\n\r\n                /*全选按钮*/\r\n                if (checkboxForAll) {\r\n                    if (checkStatus.value !== CheckboxStatus.check) {\r\n                        /*全选*/\r\n                        utils.changeValue.add([...allKeys.value as string[]])\r\n                    } else {\r\n                        /*取消全选*/\r\n                        utils.changeValue.delete([])\r\n                    }\r\n                    return\r\n                }\r\n\r\n                /*单个按钮*/\r\n                if (!val) {\r\n                    throw new Error('Checkbox: val is necessary when Checkbox in CheckboxGroup')\r\n                }\r\n                if (!modelValue.value) {\r\n                    return utils.changeValue.add([val])\r\n                }\r\n                const value = [...modelValue.value]\r\n                const index = value.indexOf(val)\r\n                if (index > -1) {\r\n                    /*删除*/\r\n                    value.splice(index, 1)\r\n                    utils.changeValue.delete(value)\r\n                } else {\r\n                    /*添加*/\r\n                    utils.changeValue.add([...value, val])\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                utils,\r\n                handler,\r\n                propsState,\r\n            },\r\n            render: () => !formItem ? slots.default() : (\r\n                <div class=\"pl-checkbox-group\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const CheckboxGroupCollector = useCollect(() => ({\r\n    parent: PlCheckboxGroup,\r\n    child: PlCheckbox,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport './checkbox-inner.scss'\r\nimport {CheckboxStatus} from \"../../utils/constant\";\r\n\r\nexport const PlCheckboxInner = designComponent({\r\n    name: 'pl-checkbox-inner',\r\n    props: {\r\n        disabled: {type: Boolean},\r\n        checkStatus: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const classes = useClass(() => [\r\n            'pl-checkbox-inner',\r\n            `pl-checkbox-inner-status-${props.checkStatus}`,\r\n            {\r\n                'pl-checkbox-inner-disabled': props.disabled,\r\n            }\r\n        ])\r\n\r\n        return {\r\n            render: () => (\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" class={classes.value}>\r\n                    {props.checkStatus === CheckboxStatus.check && <polyline points=\"22,50 45,75 75,25\" class=\"pl-checkbox-inner-check-polyline\"/>}\r\n                    {props.checkStatus === CheckboxStatus.minus && <rect x=\"15\" y=\"15\" width=\"70\" height=\"70\" class=\"pl-checkbox-inner-minus-polyline\"/>}\r\n                </svg>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {computed, Transition} from 'vue';\r\nimport {CheckboxStatus, DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {CheckboxGroupCollector} from \"../checkbox-group/checkbox-group\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {PlCheckboxInner} from \"../checkbox-inner/checkbox-inner\";\r\n\r\nexport const PlCheckbox = designComponent({\r\n    name: 'pl-checkbox',\r\n    directives: {ClickWave},\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {},\r\n        val: {type: [String, Number]},                              // 多选时选中值\r\n        label: {type: String},                                      // 显示文本\r\n        width: {type: [String, Number]},                            // 宽度\r\n        trueValue: {default: true},                                 // 选中实际值\r\n        falseValue: {default: false},                               // 非选中值\r\n\r\n        checkboxForAll: {type: Boolean},                            // 是否为 checkbox 全选按钮\r\n        checkStatus: {type: String},                                // checkbox 自定义状态\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onClick: (e?: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        /*group父组件*/\r\n        const checkboxGroup = CheckboxGroupCollector.child({injectDefaultValue: null})\r\n        /*绑定值*/\r\n        const modelValue = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        /*格式化属性值*/\r\n        const {propsState} = useProps(props, {\r\n            label: useProps.PROMISE,\r\n            width: useProps.NUMBER,\r\n        })\r\n        /*插槽*/\r\n        const {slots} = useSlots(['label'])\r\n        /*作用域插槽*/\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {checked: Boolean, status: String, click: Function},\r\n        })\r\n        /*可编辑控制*/\r\n        const {editComputed} = useEdit()\r\n        /*样式控制*/\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        /*当前组件内部变量引用*/\r\n        const refer = {innerState: {props, editComputed}}\r\n        /*当前选中状态*/\r\n        const checkStatus = computed((): CheckboxStatus => {\r\n            if (!!props.checkStatus) {\r\n                return props.checkStatus as CheckboxStatus\r\n            }\r\n            if (!!checkboxGroup) {\r\n                return checkboxGroup.utils.getCheckStatus(refer)\r\n            } else {\r\n                return modelValue.value === props.trueValue ? CheckboxStatus.check : CheckboxStatus.uncheck\r\n            }\r\n        })\r\n\r\n        const classes = useClass(() => [\r\n            'pl-checkbox',\r\n            `pl-checkbox-status-${styleComputed.value.status}`,\r\n            `pl-checkbox-size-${styleComputed.value.size}`,\r\n            `pl-checkbox-check-status-${checkStatus.value}`,\r\n            {'pl-checkbox-disabled': editComputed.value.disabled},\r\n        ])\r\n\r\n        /*当前选项宽度*/\r\n        const targetWidth = computed(() => {\r\n            if (!!propsState.width) return propsState.width\r\n            if (!!checkboxGroup && !!checkboxGroup.propsState.itemWidth) return checkboxGroup.propsState.itemWidth\r\n            return null\r\n        })\r\n\r\n        const styles = useStyles(style => {\r\n            style.width = unit(targetWidth.value)\r\n        })\r\n\r\n        const handler = {\r\n            clickEl: (e?: MouseEvent) => {\r\n                if (!!e) {\r\n                    e.stopPropagation()\r\n                }\r\n                emit.onClick(e)\r\n                if (!editComputed.value.editable || props.customReadonly) {\r\n                    return\r\n                }\r\n                if (!!checkboxGroup) {\r\n                    return checkboxGroup.handler.clickCheckbox(refer)\r\n                }\r\n                modelValue.value = checkStatus.value === CheckboxStatus.check ? props.falseValue : props.trueValue\r\n\r\n                if (!!e) {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer,\r\n            render: () => scopedSlots.default(\r\n                {\r\n                    checked: checkStatus.value === CheckboxStatus.check,\r\n                    status: checkStatus.value,\r\n                    click: handler.clickEl,\r\n                },\r\n                (\r\n                    <div class={classes.value}\r\n                         style={styles.value}\r\n                         onClick={handler.clickEl}\r\n                         v-click-wave={{disabled: !editComputed.value.editable}}>\r\n                        <span class=\"plain-click-node\">\r\n                            <Transition name=\"pl-transition-scale\" mode=\"out-in\">\r\n                                <PlCheckboxInner\r\n                                    checkStatus={checkStatus.value}\r\n                                    key={checkStatus.value}\r\n                                    disabled={editComputed.value.disabled!}/>\r\n                            </Transition>\r\n                        </span>\r\n                        {slots.label(!!propsState.label ? <span class=\"pl-checkbox-label\">{propsState.label}</span> : null)}\r\n                    </div>\r\n                ))\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport './grid.scss'\r\nimport {PropType} from 'vue';\r\n\r\nexport enum GridAlign {\r\n    left = 'left',\r\n    center = 'center',\r\n    right = 'right',\r\n}\r\n\r\nexport enum GridJustify {\r\n    start = \"start\",\r\n    end = \"start\",\r\n    center = \"start\",\r\n    'space-around' = \"space-around\",\r\n    'space-between' = \"space-between\",\r\n}\r\n\r\nexport const PlRow = designComponent({\r\n    name: 'pl-row',\r\n    props: {\r\n        type: {type: String as PropType<undefined | null | string>},        //类型,type\r\n        align: {type: String as PropType<GridAlign>},                       //对其方式,left|center|right\r\n        justify: {type: String as PropType<GridJustify>},                   //内容弹性布局方式,start,end,center,space-around,space-between\r\n        gutter: {type: [Number, String], default: 0},                       //间隔\r\n    },\r\n    provideRefer: true,\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots()\r\n        const classes = useClass(() => [\r\n            'pl-row',\r\n            {\r\n                [`pl-row-${props.type}`]: !!props.type,\r\n                [`pl-row-${props.type}-${props.align}`]: !!props.align,\r\n                [`pl-row-${props.type}-${props.justify}`]: !!props.justify,\r\n            }\r\n        ])\r\n        const styles = useStyles(style => {\r\n            const gutter = Number(props.gutter)\r\n            if (gutter !== 0) {\r\n                style = {\r\n                    marginLeft: unit(gutter / -2),\r\n                    marginRight: unit(gutter / -2)\r\n                };\r\n            }\r\n            return style\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlCheckbox} from './checkbox'\r\nimport './checkbox.scss'\r\n\r\nexport default createComponentPlugin(PlCheckbox)","import {PlCheckboxGroup} from './checkbox-group'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlCheckboxGroup)","import {PlCheckboxInner} from './checkbox-inner'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlCheckboxInner)","import {PlRow} from \"./row\";\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlRow)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlRow} from \"../grid/row\";\r\n\r\nexport default createComponentPlugin(PlRow)","import {designComponent} from \"../../use/designComponent\";\r\nimport {SingleClass, useClass} from \"../../use/useClasses\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {PropType} from 'vue';\r\nimport {PlRow} from \"./row\";\r\n\r\nexport type GridColSize = number | {\r\n    span: number,\r\n    offset: number,\r\n}\r\n\r\nexport const PlCol = designComponent({\r\n    name: 'pl-col',\r\n    props: {\r\n        span: {type: [Number, String] as PropType<string | number>},\r\n        order: {type: [Number, String] as PropType<string | number>},\r\n        offset: {type: [Number, String] as PropType<string | number>},\r\n        push: {type: [Number, String] as PropType<string | number>},\r\n        pull: {type: [Number, String] as PropType<string | number>},\r\n        className: String,\r\n        xs: {type: [Number, Object] as PropType<GridColSize>},\r\n        sm: {type: [Number, Object] as PropType<GridColSize>},\r\n        md: {type: [Number, Object] as PropType<GridColSize>},\r\n        lg: {type: [Number, Object] as PropType<GridColSize>},\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        const row = PlRow.use.inject()\r\n        const classes = useClass(() => {\r\n            let classList = [\r\n                'pl-col',\r\n                {\r\n                    [`pl-col-span-${props.span}`]: props.span,\r\n                    [`pl-col-order-${props.order}`]: props.order,\r\n                    [`pl-col-offset-${props.offset}`]: props.offset,\r\n                    [`pl-col-push-${props.push}`]: props.push,\r\n                    [`pl-col-pull-${props.pull}`]: props.pull,\r\n                    [`${props.className}`]: !!props.className\r\n                }\r\n            ] as SingleClass[];\r\n\r\n            const sizeProps = props;\r\n            (['xs', 'sm', 'md', 'lg'] as ['xs', 'sm', 'md', 'lg']).forEach(size => {\r\n                if (typeof sizeProps[size] === 'number') {\r\n                    classList.push(`pl-col-${size}-${sizeProps[size]}`);\r\n                } else if (typeof sizeProps[size] === 'object') {\r\n                    let obj = sizeProps[size];\r\n                    !!obj && Object.entries(obj).forEach(([key, val]) => classList.push(key !== 'span' ? `pl-col-${size}-${key}-${val}` : `pl-col-span-${size}-${val}`))\r\n                }\r\n            });\r\n            return classList;\r\n        })\r\n        const styles = useStyles(style => {\r\n            if ((Number(row.props.gutter)) !== 0) {\r\n                style = {\r\n                    paddingLeft: (Number(row.props.gutter)) / 2 + 'px',\r\n                    paddingRight: (Number(row.props.gutter)) / 2 + 'px'\r\n                };\r\n            }\r\n            return style;\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlCol} from \"../grid/col\";\r\n\r\nexport default createComponentPlugin(PlCol)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {CheckboxStatus, DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {inject} from 'vue';\r\n\r\nexport const PlRadioGroup = designComponent({\r\n    name: 'pl-radio-group',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {},\r\n        itemWidth: {type: [String, Number]},                       // 每一个单选框的宽度\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit}}) {\r\n\r\n        const formItem = inject('@@pl-form-item', null)\r\n\r\n        const {slots} = useSlots()\r\n        useEdit()\r\n        useStyle({status: DEFAULT_STATUS})\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const {propsState} = useProps(props, {\r\n            itemWidth: useProps.NUMBER,\r\n        })\r\n\r\n        const handler = {\r\n            onClickRadio: (val: any) => {\r\n                model.value = val\r\n            },\r\n        }\r\n        const utils = {\r\n            getCheckStatus: (val: any) => {\r\n                return val === model.value ? CheckboxStatus.check : CheckboxStatus.uncheck\r\n            }\r\n        }\r\n        return {\r\n            refer: {\r\n                propsState,\r\n                handler,\r\n                utils,\r\n            },\r\n            render: () => !formItem ? slots.default() : (\r\n                <div class=\"pl-radio-group\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlRadioGroup} from './radio-group'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlRadioGroup)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport './radio-inner.scss'\r\n\r\nexport const PlRadioInner = designComponent({\r\n    name: 'pl-radio-inner',\r\n    props: {\r\n        checkStatus: {type: String},                // check,uncheck\r\n    },\r\n    setup({props}) {\r\n\r\n        const classes = useClass(() => [\r\n            'pl-radio-inner',\r\n            `pl-radio-inner-${props.checkStatus}`,\r\n        ])\r\n\r\n        return {\r\n            render: () => (\r\n                <svg class={classes.value} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\">\r\n                    {props.checkStatus === 'check' && <circle cx=\"50\" cy=\"50\" r=\"30\"/>}\r\n                </svg>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {computed, Transition} from 'vue';\r\nimport {CheckboxStatus, DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport './radio.scss'\r\nimport Group from '../radio-group'\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {PlRadioInner} from \"../radio-inner/radio-inner\";\r\n\r\nexport const PlRadio = designComponent({\r\n    name: 'pl-radio',\r\n    directives: {ClickWave},\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {},                                             // 双向绑定值\r\n        val: {type: [String, Number]},                              // 在group中的唯一标识\r\n        label: {type: String},                                      // 显示文本\r\n        width: {type: [String, Number]},                            // 宽度\r\n        trueValue: {default: true},                                 // 真值\r\n        falseValue: {default: false},                               // 假值\r\n        checkStatus: {type: String},                                // 自定义选中状态\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onClick: (e?: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const group = Group.use.inject(null)\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {checked: Boolean, status: String, click: Function},\r\n        })\r\n        const {slots} = useSlots(['label'])\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        const {propsState} = useProps(props, {\r\n            width: useProps.NUMBER,\r\n        })\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const checkStatus = computed(() => {\r\n            if (!!props.checkStatus) {\r\n                return props.checkStatus as CheckboxStatus\r\n            }\r\n            if (!!group) {\r\n                return group.utils.getCheckStatus(props.val)\r\n            } else {\r\n                return model.value === props.trueValue ? CheckboxStatus.check : CheckboxStatus.uncheck\r\n            }\r\n        })\r\n\r\n        const classes = useClass(() => [\r\n            'pl-radio',\r\n            `pl-radio-status-${styleComputed.value.status}`,\r\n            `pl-radio-size-${styleComputed.value.size}`,\r\n            {\r\n                'pl-radio-checked': checkStatus.value === CheckboxStatus.check,\r\n                'pl-radio-disabled': editComputed.value.disabled,\r\n            },\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            let width: number | null = null;\r\n            if (!!propsState.width) {\r\n                width = propsState.width as number\r\n            }\r\n            if (!!group && !!group.propsState.itemWidth) {\r\n                width = group.propsState.itemWidth as number\r\n            }\r\n            if (width != null) {\r\n                style.width = unit(width)\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            click: (e?: MouseEvent) => {\r\n                if (!!e) {\r\n                    e.stopPropagation()\r\n                }\r\n                emit.onClick(e)\r\n                if (!editComputed.value.editable || props.customReadonly) {\r\n                    return\r\n                }\r\n                if (!!group) {\r\n                    group.handler.onClickRadio(props.val)\r\n                } else {\r\n                    model.value = checkStatus.value === CheckboxStatus.check ? props.falseValue : props.trueValue\r\n                }\r\n\r\n                if (!!e) {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                }\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n                if (getKey(e) === KEY.space) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    handler.click(e as any)\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                return scopedSlots.default({\r\n                    checked: checkStatus.value === CheckboxStatus.check,\r\n                    status: checkStatus.value,\r\n                    click: handler.click,\r\n                }, (\r\n                    <div\r\n                        class={classes.value}\r\n                        style={styles.value}\r\n                        tabindex={0}\r\n                        v-click-wave={{disabled: !editComputed.value.editable}}\r\n                        onClick={handler.click}\r\n                        onKeydown={handler.keydown}\r\n                    >\r\n                        <span class=\"plain-click-node\">\r\n                            <Transition name=\"pl-transition-fade\" mode=\"out-in\">\r\n                                <PlRadioInner checkStatus={checkStatus.value} key={checkStatus.value}/>\r\n                            </Transition>\r\n                        </span>\r\n                        {slots.label(<span class=\"pl-radio-label\">{props.label}</span>)}\r\n                    </div>\r\n                ))\r\n            }\r\n        }\r\n    },\r\n})","import {PlRadio} from './radio'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlRadio)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlRadioInner} from './radio-inner'\r\n\r\nexport default createComponentPlugin(PlRadioInner)","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, StyleShape, StyleSize, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {computed, onBeforeUnmount, reactive, ref, Teleport, Transition, watch} from 'vue';\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {KeyboardService, KeyboardServiceOption} from \"../keyboard\";\r\nimport './dialog.scss'\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport Button from '../button'\r\nimport LoadingMask from '../loading-mask'\r\n\r\nexport const PlDialog =  designComponent({\r\n    name: 'pl-dialog',\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n\r\n        modelValue: {type: Boolean},                                            // model绑定是否打开对话框\r\n\r\n        height: {type: [String, Number]},                                       // 对话框高度\r\n        width: {type: [String, Number]},                                        // 对话框宽度\r\n        minHeight: {type: [String, Number]},                                    // 最小高度\r\n        minWidth: {type: [String, Number]},                                     // 最小宽度\r\n        maxHeight: {type: [String, Number]},                                    // 最大高度\r\n        maxWidth: {type: [String, Number]},                                     // 最大宽度\r\n        fullHeight: {type: Boolean},                                            // 撑满高度\r\n        fullWidth: {type: Boolean},                                             // 撑满宽度\r\n\r\n        wrapperPadding: {type: [String, Boolean], default: '15vh 5vw'},         // body的内边距\r\n        contentPadding: {type: Boolean, default: true},                         // 内容内边距\r\n        showHead: {type: Boolean, default: true},                               // 是否展示对话框标题栏\r\n        transition: {type: String, default: 'pl-transition-dialog'},            // 弹框动画, pl-transition-dialog，pl-transition-dialog-top,pl-transition-dialog-left,pl-transition-dialog-right,pl-transition-dialog-bottom\r\n\r\n        title: {type: [String, Object], default: '提示'},                        // 对话框标题\r\n        fullscreen: {type: Boolean},                                            // 是否全屏\r\n        mask: {type: Boolean, default: true},                                   // 是否需要遮罩\r\n        dialogClass: {type: String},                                            // 对话框内容自定义类名\r\n        serviceClass: {type: String},                                           // 对话框服务内容自定义类名\r\n        cancelOnClickMask: {type: Boolean, default: true},                      // 是否在点击遮罩的时候关闭对话框\r\n        showClose: {type: Boolean, default: true},                              // 是否展示关闭按钮\r\n        beforeClose: Function,                                                  // 关闭之前的回调\r\n        center: {type: Boolean},                                                // 是否纵向居中对其\r\n        destroyOnClose: {type: Boolean, default: true},                         // 关闭的时候是否销毁内容\r\n\r\n        confirmButton: {type: Boolean},                                         // 是否显示确认按钮\r\n        cancelButton: {type: Boolean},                                          // 是否显示取消按钮\r\n        closeOnConfirm: {type: Boolean, default: true},                         // 是否点击确认按钮之后自动关闭\r\n        closeOnCancel: {type: Boolean, default: true},                          // 是否点击取消按钮之后自动关闭\r\n        confirmButtonText: {type: [String, Object], default: '确认'},            // 确认按钮文本\r\n        cancelButtonText: {type: [String, Object], default: '取消'},             // 取消按钮文本\r\n        confirmOnEnter: {type: Boolean, default: true},                         // 是否在点击 enter 按键的时候触发 confirm 事件\r\n        cancelOnEsc: {type: Boolean, default: true},                            // 是否在点击 esc 按键的时候出发 cancel事件\r\n        disabledCancel: {type: Boolean},                                        // 禁用cancel，当任何动作触发cancel时，不做任何处理，适用于开发者完全控制对话框的情况，对话框内置的按钮以及键盘事件不做任何处理\r\n        disabledConfirm: {type: Boolean},                                       // 禁用confirm，当任何动作触发confirm时，不做任何处理,适用于开发者完全控制对话框的情况,对话框内置的按钮以及键盘事件不做任何处理\r\n\r\n        vertical: {type: String, default: 'start'},                             // 纵向对其方式：start,center,end\r\n        horizontal: {type: String, default: 'center'},                          // 横向对其方式：start,center,end\r\n        loading: {type: Boolean},                                               // 弹出框添加 加载中的遮罩\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true,\r\n        onConfirm: () => true,\r\n        onCancel: () => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {slots} = useSlots(['head', 'foot'], true)\r\n        const {refs} = useRefs({\r\n            body: HTMLDivElement,\r\n        })\r\n        const state = reactive({\r\n            zIndex: nextIndex(),\r\n            loading: false,\r\n        })\r\n        const isLoading = computed(() => state.loading || props.loading)\r\n        const {styleComputed} = useStyle({status: undefined})\r\n        const model = ref(false)\r\n        const {propsState} = useProps(props, {\r\n            height: useProps.NUMBER,\r\n            width: useProps.NUMBER,\r\n            minHeight: useProps.NUMBER,\r\n            minWidth: useProps.NUMBER,\r\n            maxHeight: useProps.NUMBER,\r\n            maxWidth: useProps.NUMBER,\r\n            title: useProps.PROMISE,\r\n        }) as {\r\n            propsState: {\r\n                height: number,\r\n                width: number,\r\n                minHeight: number,\r\n                minWidth: number,\r\n                maxHeight: number,\r\n                maxWidth: number,\r\n                title: string,\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n        const wrapperStyles = computed(() => ({\r\n            alignItems: props.center ? null : `flex-${props.vertical}`.replace('flex-center', 'center'),\r\n            justifyContent: `flex-${props.horizontal}`.replace('flex-center', 'center'),\r\n            zIndex: state.zIndex,\r\n            padding: !!props.center ? null : props.wrapperPadding,\r\n        }))\r\n\r\n        const wrapperClasses = useClass(() => [\r\n            'pl-dialog',\r\n            props.transition,\r\n            props.dialogClass,\r\n            props.serviceClass,\r\n            {\r\n                'pl-dialog-fullscreen': props.fullscreen,\r\n                'pl-dialog-no-mask': !props.mask,\r\n                'pl-dialog-vertical-center': props.center,\r\n                'pl-dialog-no-content-padding': !props.contentPadding,\r\n            }\r\n        ])\r\n\r\n        const bodyClasses = computed(() => [\r\n            'pl-dialog-body',\r\n            `pl-dialog-body-shape-${styleComputed.value.shape}`,\r\n        ])\r\n\r\n        const hasHead = computed(() => {\r\n            return props.showHead\r\n        })\r\n        const hasFoot = computed(() => {\r\n            return slots.foot.isExist() || props.confirmButton || props.cancelButton\r\n        })\r\n\r\n        const contentStyle = computed(() => {\r\n            let height = props.fullHeight ? `calc(100vh - ${(!!hasHead.value ? 40 : 0) + (hasFoot.value ? 60 : 0)}px)` : propsState.height\r\n            let width = props.fullWidth ? '100vw' : propsState.width\r\n\r\n            let minHeight = propsState.minHeight !== undefined ? propsState.minHeight : height !== undefined ? null : '15vh'\r\n            let minWidth = propsState.minWidth !== undefined ? propsState.minWidth : width !== undefined ? null : '30vw'\r\n            let maxHeight = propsState.maxHeight !== undefined ? propsState.maxHeight : height !== undefined ? null : '80vh'\r\n            let maxWidth = propsState.maxWidth !== undefined ? propsState.maxWidth : width !== undefined ? null : '60vw'\r\n\r\n            return {\r\n                height: unit(height),\r\n                width: unit(width),\r\n                minHeight: unit(minHeight),\r\n                minWidth: unit(minWidth),\r\n                maxHeight: unit(maxHeight),\r\n                maxWidth: unit(maxWidth),\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n        const handler = {\r\n            keyboardEventOption: {\r\n                \"enter\": () => {\r\n                    if (isLoading.value) return\r\n                    if (!!props.confirmOnEnter) {\r\n                        methods.confirm()\r\n                    }\r\n                },\r\n                \"esc\": () => {\r\n                    if (isLoading.value) return\r\n                    if (!!props.cancelOnEsc) {\r\n                        methods.cancel()\r\n                    }\r\n                }\r\n            } as KeyboardServiceOption,\r\n            clickWrapper: (e: MouseEvent) => {\r\n                if (isLoading.value) {\r\n                    return\r\n                }\r\n                if (!!props.cancelOnClickMask) {\r\n                    if (!!refs.body && !refs.body.contains(e.target as HTMLElement)) {\r\n                        methods.cancel()\r\n                    }\r\n                }\r\n            },\r\n            clickClose: () => {\r\n                if (isLoading.value) {\r\n                    return\r\n                }\r\n                methods.cancel()\r\n            }\r\n        }\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n        const methods = {\r\n            show: async () => {\r\n                if (model.value) return\r\n                KeyboardService.listen(handler.keyboardEventOption)\r\n                KeyboardService.cancelActiveElement()\r\n                state.zIndex = nextIndex()\r\n                await methods.open()\r\n            },\r\n            async hide() {\r\n                if (!model.value) return\r\n                KeyboardService.unbindListener(handler.keyboardEventOption)\r\n                await this.close()\r\n            },\r\n            confirm() {\r\n                if (props.disabledConfirm) {\r\n                    return\r\n                }\r\n                if (props.closeOnConfirm) {\r\n                    methods.hide()\r\n                }\r\n                emit.onConfirm()\r\n            },\r\n            cancel() {\r\n                if (props.disabledCancel) {\r\n                    return\r\n                }\r\n                if (props.closeOnCancel) {\r\n                    methods.hide()\r\n                }\r\n                emit.onCancel()\r\n            },\r\n            open() {\r\n                model.value = true\r\n                emit.onUpdateModelValue(model.value)\r\n            },\r\n            async close() {\r\n                try {\r\n                    if (!!props.beforeClose) {\r\n                        state.loading = true\r\n                        let flag = await props.beforeClose!()\r\n                        if (flag === false) return\r\n                    }\r\n                    model.value = false\r\n                    emit.onUpdateModelValue(model.value)\r\n                } catch (e) {\r\n                    console.error(e)\r\n                } finally {\r\n                    state.loading = false\r\n                }\r\n            },\r\n        }\r\n        /*---------------------------------------watch-------------------------------------------*/\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            val ? setTimeout(methods.show, 100) : methods.hide()\r\n        }, {immediate: true})\r\n\r\n        onBeforeUnmount(() => {\r\n            KeyboardService.unbindListener(handler.keyboardEventOption)\r\n            if (model.value) {\r\n                methods.hide()\r\n            }\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n\r\n                const Wrapper: any = props.destroyOnClose ? <div/> : <div v-show={model.value}/>\r\n\r\n                return (\r\n                    <Teleport to=\".pl-root-service-container\">\r\n                        <Transition name={props.transition}>\r\n                            {(!props.destroyOnClose ? true : model.value) && <Wrapper onClick={handler.clickWrapper} style={wrapperStyles.value as any} class={wrapperClasses.value}>\r\n                                <div class={bodyClasses.value} ref=\"body\">\r\n                                    {hasHead.value && <div class=\"pl-dialog-head\">\r\n                                        {slots.head(<span class=\"pl-dialog-head-title\">{propsState.title}</span>)}\r\n                                        {!!props.showClose && (\r\n                                            <div class=\"pl-dialog-head-close\">\r\n                                                <Button icon=\"el-icon-close\"\r\n                                                        shape={StyleShape.round}\r\n                                                        mode=\"text\"\r\n                                                        size={StyleSize.large}\r\n                                                        onClick={handler.clickClose}/>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>}\r\n                                    <div class=\"pl-dialog-content\" style={contentStyle.value as any}>\r\n                                        {slots.default()}\r\n                                    </div>\r\n                                    {hasFoot.value && <div class=\"pl-dialog-foot\">\r\n                                        {slots.foot()}\r\n\r\n                                        {!!props.cancelButton && <Button label={props.cancelButtonText} mode=\"stroke\" onClick={methods.cancel}/>}\r\n                                        {!!props.confirmButton && <Button label={props.confirmButtonText} onClick={methods.confirm}/>}\r\n                                    </div>}\r\n                                    <LoadingMask v-model={isLoading.value}/>\r\n                                </div>\r\n                            </Wrapper>}\r\n                        </Transition>\r\n                    </Teleport>\r\n                )\r\n            }\r\n        }\r\n    }\r\n})","import {StyleStatus} from \"../../use/useStyle\";\r\nimport {RequireFormat, VNodeChild} from \"../../shims\";\r\nimport Dialog from '../dialog'\r\nimport {registryRootService} from \"../root/registryRootService\";\r\nimport {createDefaultManager} from \"../root/createDefaultManager\";\r\nimport Service from './dialog-service'\r\nimport {App} from 'vue';\r\nimport {DialogService} from \"../../index\";\r\nimport {installPlugin} from \"../../utils/installPlugin\";\r\nimport {defer} from \"../../utils/defer\";\r\nimport {getServiceWithoutContext} from \"../../utils/getServiceWithoutContext\";\r\n\r\nexport enum DialogServiceEditType {\r\n    input = 'input',\r\n    textarea = 'textarea'\r\n}\r\n\r\nexport interface DialogServiceOption {\r\n    title?: string,                                                 // 标题\r\n    message?: string,                                               // 提示的消息\r\n    editType?: DialogServiceEditType,                               // 输入类型\r\n    editValue?: string | number,                                    // 输入初始内容\r\n    editReadonly?: boolean,                                         // 输入框只读\r\n    status?: StyleStatus | null,                                    // 对话框状态\r\n    render?: () => VNodeChild,                                      // 自定义对话框内容\r\n    renderHead?: () => VNodeChild,                                  // 自定义对话框标题内容\r\n    renderFoot?: () => VNodeChild,                                  // 自定义对话框底部内容\r\n    confirmButton?: boolean,                                        // 是否显示确认按钮\r\n    confirmButtonText?: string,                                     // 确认按钮文本\r\n    onConfirm?: (editValue?: string) => void | Promise<void>,       // 确认按钮处理函数\r\n    cancelButton?: boolean,                                         // 是否显示删除按钮\r\n    cancelButtonText?: string,                                      // 删除按钮文本\r\n    onCancel?: () => void | Promise<void>,                          // 删除按钮文本\r\n    dialogProps?: Partial<typeof Dialog.use.props>,                 // 对话框属性\r\n}\r\n\r\nexport type DialogServiceFormatOption = RequireFormat<DialogServiceOption, 'status'> & {\r\n    close: () => void\r\n}\r\n\r\ntype DialogServiceFunction = (message: string | DialogServiceOption, option?: DialogServiceOption) => void\r\ntype DialogService = DialogServiceFunction & { [k in StyleStatus]: DialogServiceFunction } & { confirm: DialogServiceFunction }\r\n\r\nfunction formatOption(o: DialogServiceOption): DialogServiceFormatOption {\r\n    return Object.assign(o, {\r\n        status: o.status === null ? null : (o.status || 'primary'),\r\n    }) as DialogServiceFormatOption\r\n}\r\n\r\nconst getDialogService = registryRootService(\r\n    'dialog',\r\n    createDefaultManager('pl-dialog-manager', Service),\r\n    (getManager) => {\r\n        const service = (message: string | DialogServiceOption, option?: DialogServiceOption) => {\r\n            const o: DialogServiceOption = typeof message === \"string\" ? {message} : message\r\n            if (!!option) {\r\n                Object.assign(o, option)\r\n            }\r\n            const fo = formatOption(o)\r\n            getManager().then(manager => manager.service(fo))\r\n            return fo\r\n        }\r\n\r\n        return Object.assign(\r\n            service,\r\n            Object.keys(StyleStatus).reduce((prev: any, status: any) => {\r\n                prev[status] = function (message: string | DialogServiceOption, option?: DialogServiceOption) {\r\n                    const o = typeof message === \"object\" ? message : {message}\r\n                    if (!!option) {\r\n                        Object.assign(o, option)\r\n                    }\r\n                    o.status = status\r\n                    return service(o)\r\n                }\r\n                return prev\r\n            }, {\r\n                confirm: (message: string | DialogServiceOption, option?: DialogServiceOption) => {\r\n                    const dfd = defer()\r\n                    const o = typeof message === \"object\" ? message : {message}\r\n                    if (!!option) {\r\n                        Object.assign(o, option)\r\n                    }\r\n                    o.status = o.status || StyleStatus.info\r\n                    o.confirmButton = true\r\n                    o.cancelButton = true\r\n                    const {onConfirm} = o\r\n                    o.onConfirm = () => {\r\n                        dfd.resolve();\r\n                        onConfirm && onConfirm()\r\n                    }\r\n                    service(o)\r\n                    return dfd.promise\r\n                }\r\n            })\r\n        ) as DialogService\r\n    }\r\n)\r\n\r\nexport const $$dialog = getServiceWithoutContext(getDialogService)\r\n\r\nexport default {\r\n    install(app: App) {\r\n        installPlugin(app, Dialog)\r\n        app.mixin({\r\n            beforeCreate() {\r\n                Object.defineProperty(this, '$dialog', {\r\n                    get() {\r\n                        return getDialogService(this)\r\n                    },\r\n                })\r\n            },\r\n        })\r\n    },\r\n}","import {PlDialog} from './dialog'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlDialog)","import {computed, reactive, ref} from 'vue';\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {DialogServiceFormatOption} from \"./index\";\r\nimport Input from '../input'\r\nimport Dialog from '../dialog'\r\nimport Icon from '../icon'\r\nimport {STATUS} from \"../../utils/constant\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport './dialog-service.scss'\r\nimport {VNodeChild} from \"../../shims\";\r\nimport {createDefaultService} from \"../root/createDefaultService\";\r\n\r\n/**\r\n * 用来区分 DialogServiceOption中的选项与pl-dialog组件的属性\r\n * @author  韦胜健\r\n * @date    2020/11/7 20:04\r\n */\r\nconst OptionKeys = [\r\n    'title',\r\n    'message',\r\n    'editType',\r\n    'editValue',\r\n    'editReadonly',\r\n    'status',\r\n    'render',\r\n    'onConfirm',\r\n    'onCancel',\r\n    'close',\r\n]\r\n\r\nexport default createDefaultService({\r\n    name: 'pl-dialog-service',\r\n    setup(option: DialogServiceFormatOption) {\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n        })\r\n\r\n        const isShow = ref(false)\r\n\r\n        const state = reactive({\r\n            key: 0,\r\n            option,\r\n            editValue: null as null | string,\r\n        })\r\n\r\n        const targetOption = computed(() => {\r\n            let option = {} as DialogServiceFormatOption\r\n            let binding = {} as Partial<typeof Dialog.use.props>\r\n\r\n            Object.keys(state.option).forEach((key) => {\r\n                if (OptionKeys.indexOf(key) > -1) {\r\n                    (option as any)[key] = (state.option as any)[key]\r\n                } else {\r\n                    (binding as any)[key] = (state.option as any)[key]\r\n                }\r\n            })\r\n\r\n            return {\r\n                option,\r\n                binding,\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            confirm: () => {\r\n                if (!!targetOption.value.option.onConfirm) {\r\n                    targetOption.value.option.onConfirm(!targetOption.value.option.editType ? undefined : state.editValue as string)\r\n                }\r\n            },\r\n            cancel: () => {\r\n                if (!!targetOption.value.option.onCancel) {\r\n                    targetOption.value.option.onCancel()\r\n                }\r\n            },\r\n        }\r\n\r\n        async function service(option: DialogServiceFormatOption) {\r\n            option.close = hide\r\n            state.option = option\r\n            state.key++\r\n            isShow.value = true\r\n            if (!!option.editType) {\r\n                state.editValue = option.editValue as string\r\n                await delay(300)\r\n                refs.input!.methods.focus()\r\n            }\r\n            return hide\r\n        }\r\n\r\n        function hide() {\r\n            isShow.value = false\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                service,\r\n                hide,\r\n                isShow,\r\n                isOpen: isShow,\r\n            },\r\n            render: () => {\r\n                let {option, binding} = targetOption.value\r\n                let status = option.status\r\n                let serviceClass = 'pl-dialog-service';\r\n\r\n                if (!!status) {\r\n                    serviceClass += ` pl-dialog-service-status-${status}`\r\n                }\r\n\r\n                /*---------------------------------------head-------------------------------------------*/\r\n                let head = <div class=\"pl-dialog-service-head\">\r\n                    {!!status && STATUS[status] && <Icon class=\"pl-dialog-service-status-icon\" icon={STATUS[status].icon}/>}\r\n                    {!!option.renderHead ? option.renderHead() : (option.title || '提示')}\r\n                </div>\r\n                /*---------------------------------------content-------------------------------------------*/\r\n                let content: VNodeChild;\r\n                if (!!option.editType) {\r\n                    binding = {...binding}\r\n                    if (option.editType !== 'input') {\r\n                        (binding as any).height = binding.height || '500px'\r\n                    } else {\r\n                        (binding as any).minHeight = null\r\n                    }\r\n                    serviceClass += ` pl-dialog-service-edit`\r\n                    content = <Input ref=\"input\"\r\n                                     block\r\n                                     minHeight={null as any}\r\n                                     maxHeight={null as any}\r\n                                     autoHeight={false}\r\n                                     v-model={state.editValue}\r\n                                     readonly={option.editReadonly}\r\n                                     textarea={option.editType === 'textarea'}/>\r\n                } else if (!!option.message) {\r\n                    content = (\r\n                        <div class=\"pl-dialog-service-item-message\">\r\n                            {option.message}\r\n                        </div>\r\n                    )\r\n                } else if (!!option.render) {\r\n                    content = option.render()\r\n                }\r\n                /*---------------------------------------foot-------------------------------------------*/\r\n                let foot = !option.renderFoot ? null : option.renderFoot()\r\n\r\n                return (\r\n                    <Dialog\r\n                        serviceClass={serviceClass}\r\n                        v-model={isShow.value}\r\n                        key={state.key}\r\n\r\n                        onConfirm={handler.confirm}\r\n                        onCancel={handler.cancel}\r\n\r\n                        {...binding}\r\n                        v-slots={{\r\n                            default: !!content ? () => content : null,\r\n                            head: !!head ? () => head : null,\r\n                            foot: !!foot ? () => foot : null,\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n","import {PlScroll} from './scroll'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlScroll)","import {createApp} from 'vue'\r\nimport {ComponentPlugin} from \"../shims\";\r\nimport {installPlugin} from \"./installPlugin\";\r\n\r\nexport function newInstance<Component>(component: Component, config: {\r\n    el?: HTMLElement,\r\n    parentNode?: HTMLElement,\r\n    plugins?: ComponentPlugin[],\r\n} = {}) {\r\n    let {el, parentNode} = config\r\n    if (!el) {\r\n        el = document.createElement('div')\r\n        if (!!parentNode) {\r\n            parentNode.appendChild(el)\r\n        } else {\r\n            document.body.appendChild(el)\r\n        }\r\n    }\r\n    const app = createApp(component)\r\n    if (!!config.plugins) {\r\n        config.plugins.forEach(plugin => installPlugin(app, plugin))\r\n    }\r\n    const ins = app.mount(el) as Component extends { use: { class: infer C } } ? C : any\r\n    return {\r\n        app,\r\n        ins,\r\n        el,\r\n    }\r\n}","import {Directive, reactive, App} from 'vue';\r\nimport {designComponent} from \"../../../use/designComponent\";\r\nimport {newInstance} from \"../../../utils/newInstance\";\r\nimport LoadingMaskPlugin from '../../loading-mask'\r\nimport LoadingPlugin from '../../loading'\r\nimport {PlLoadingMask} from \"../../loading-mask/loading-mask\";\r\n\r\ntype LoadingMaskBinding = boolean | {\r\n    modelValue?: boolean,\r\n    message?: string,\r\n    loadingType?: 'alpha' | 'beta' | 'gamma' | 'delta',\r\n    background?: string,\r\n    unlock?: boolean,\r\n}\r\n\r\nconst Mask = designComponent({\r\n    setup() {\r\n        const state = reactive({\r\n            option: null as null | LoadingMaskBinding & { modelValue?: boolean }\r\n        })\r\n        return {\r\n            refer: {\r\n                update: (option: LoadingMaskBinding) => {\r\n                    state.option = typeof option === \"object\" ?\r\n                        {\r\n                            ...option,\r\n                            modelValue: option.modelValue === undefined ? true : option.modelValue\r\n                        }\r\n                        : {modelValue: option}\r\n                }\r\n            },\r\n            render: () => (\r\n                !!state.option ? <PlLoadingMask {...state.option} inDirective/> : null\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nclass LoadingMask {\r\n\r\n    mask?: {\r\n        app: App,\r\n        ins: typeof Mask.use.class,\r\n        el: HTMLElement\r\n    }\r\n\r\n    constructor(private el: HTMLElement) {}\r\n\r\n    update(binding: LoadingMaskBinding) {\r\n        const flag = typeof binding === \"object\" ? true : binding\r\n        flag ? this.show(binding) : this.hide()\r\n    }\r\n\r\n    show(binding: LoadingMaskBinding) {\r\n        if (!this.mask) {\r\n            this.mask = newInstance(Mask, {\r\n                parentNode: this.el,\r\n                plugins: [\r\n                    LoadingPlugin,\r\n                    LoadingMaskPlugin\r\n                ]\r\n            })\r\n        }\r\n        this.mask.ins.update(binding)\r\n    }\r\n\r\n    hide() {\r\n        if (!!this.mask) {\r\n            this.mask.ins.update(false)\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        if (!!this.mask) {\r\n            this.mask.app.unmount(this.mask.el)\r\n        }\r\n    }\r\n}\r\n\r\nconst directive = (() => {\r\n    let map = new WeakMap<HTMLElement, LoadingMask>()\r\n    return {\r\n        active: (el: HTMLElement, binding: { value: LoadingMaskBinding }) => {\r\n            // console.log('active', binding.value);\r\n            const flag = typeof binding.value === \"object\" ? true : binding.value\r\n            let loadingMask = map.get(el)\r\n            if (flag) {\r\n                /*第一次显示的时候才创建实例*/\r\n                if (!loadingMask) {\r\n                    loadingMask = new LoadingMask(el)\r\n                    map.set(el, loadingMask)\r\n                }\r\n                loadingMask.update(binding.value)\r\n            } else {\r\n                if (!!loadingMask) {\r\n                    loadingMask.update(binding.value)\r\n                }\r\n            }\r\n        },\r\n        inactive: (el: HTMLElement) => {\r\n            // console.log('inactive');\r\n            const loadingMask = map.get(el)\r\n            if (!!loadingMask) {\r\n                loadingMask.destroy()\r\n            }\r\n        }\r\n    }\r\n})()\r\n\r\nexport const LoadingMaskDirective: Directive = {\r\n    mounted: directive.active,\r\n    updated: directive.active,\r\n    beforeUnmount: directive.inactive,\r\n}","import Service from './loading-bar-service'\r\nimport {createDefaultManager} from \"../../root/createDefaultManager\";\r\nimport {registryRootService} from \"../../root/registryRootService\";\r\nimport {RequireFormat} from \"../../../shims\";\r\n\r\nexport interface LoadingBarOption {\r\n    color?: string,\r\n    doneColor?: string,\r\n    failColor?: string,\r\n    height?: number,\r\n    percent?: number,\r\n    autoStart?: boolean,\r\n    autoProcess?: boolean,\r\n}\r\n\r\nexport type LoadingBarFormatOption = RequireFormat<LoadingBarOption,\r\n    \"color\" | \"doneColor\" | \"failColor\" | \"height\" | \"percent\" | \"autoStart\" | \"autoProcess\">\r\n\r\nexport interface LoadingBarHandler {\r\n    init: (option: LoadingBarOption) => void,\r\n    update: (option: LoadingBarOption) => void,\r\n    start: () => void,\r\n    done: () => void,\r\n    fail: () => void,\r\n}\r\n\r\nexport enum LoadingBarStatus {\r\n    wait = 'wait',\r\n    process = 'process',\r\n    done = 'done',\r\n    fail = 'fail',\r\n}\r\n\r\nfunction formatOption(option: LoadingBarOption): LoadingBarFormatOption {\r\n    return Object.assign(option, {\r\n        color: option.color || 'primary',\r\n        doneColor: option.doneColor || 'primary',\r\n        failColor: option.failColor || 'error',\r\n        percent: option.percent || 0,\r\n        height: option.height || 4,\r\n        autoStart: option.autoStart == null ? true : option.autoStart,\r\n        autoProcess: option.autoProcess == null ? true : option.autoProcess,\r\n    }) as LoadingBarFormatOption\r\n}\r\n\r\nexport const getLoadingBarService = registryRootService(\r\n    'loading-bar',\r\n    createDefaultManager('pl-loading-bar-manager', Service),\r\n    getManager => {\r\n        return (option?: LoadingBarOption): LoadingBarFormatOption & LoadingBarHandler => {\r\n            const fo = formatOption(option || {})\r\n            getManager().then(manager => manager.service(fo))\r\n            return fo as any\r\n        }\r\n    }\r\n)","import {LoadingMaskServiceFormatOption} from \"./index\";\r\nimport {reactive, ref} from 'vue';\r\nimport {createDefaultService} from \"../../root/createDefaultService\";\r\nimport PlLoadingMask from \"../../loading-mask\";\r\n\r\nexport default createDefaultService({\r\n    name: 'loading-mask-service',\r\n    setup: (option: LoadingMaskServiceFormatOption) => {\r\n        const isShow = ref(false)\r\n\r\n        const state = reactive({\r\n            option,\r\n            key: 0,\r\n        })\r\n\r\n        const hide = () => isShow.value = false\r\n\r\n        const service = (option: LoadingMaskServiceFormatOption) => {\r\n            option.close = hide\r\n            state.option = option\r\n            state.key++\r\n            isShow.value = true\r\n            return hide\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                isShow,\r\n                isOpen: isShow,\r\n                service,\r\n            },\r\n            render: () => {\r\n                return (\r\n                    <PlLoadingMask\r\n                        key={state.key}\r\n                        v-model={isShow.value}\r\n                        message={state.option.message}\r\n                        loadingType={state.option.loadingType}\r\n                        background={state.option.background}\r\n                        unlock={state.option.unlock}\r\n                        fixedPosition\r\n                    />\r\n                )\r\n            }\r\n        }\r\n    }\r\n})","import Service from './loading-mask-service'\r\nimport {registryRootService} from \"../../root/registryRootService\";\r\nimport {createDefaultManager} from \"../../root/createDefaultManager\";\r\n\r\nexport interface LoadingMaskServiceOption {\r\n    message?: string,\r\n    loadingType?: string,\r\n    background?: string,\r\n    unlock?: boolean,\r\n}\r\n\r\nexport interface LoadingMaskServiceFormatOption extends LoadingMaskServiceOption {\r\n    close: () => void\r\n}\r\n\r\nexport const getLoadingMaskService = registryRootService(\r\n    'loading',\r\n    createDefaultManager('pl-loading-mask-manager', Service),\r\n    (getManager) => {\r\n        return (option: LoadingMaskServiceOption): LoadingMaskServiceFormatOption => {\r\n            option = option || {};\r\n            getManager().then(manager => manager.service(option as LoadingMaskServiceFormatOption));\r\n            return option as LoadingMaskServiceFormatOption\r\n        }\r\n    }\r\n)","import {createDefaultService} from \"../../root/createDefaultService\";\r\nimport {computed, reactive, ref} from 'vue';\r\nimport {LoadingBarFormatOption, LoadingBarStatus} from \"./index\";\r\nimport {StyleProperties} from \"../../../shims\";\r\nimport {nextIndex} from \"../../../utils/nextIndex\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\n\r\nexport default createDefaultService({\r\n    name: 'pl-loading-bar-service',\r\n    setup(option: LoadingBarFormatOption) {\r\n\r\n        const isShow = ref(false)\r\n\r\n        const state = reactive({\r\n            status: LoadingBarStatus.wait,\r\n            option: option as LoadingBarFormatOption | null,\r\n            zIndex: 0,\r\n            interval: null as null | number,\r\n            autoLoadingStep: 5,\r\n            startDelayer: null as null | number,\r\n        })\r\n\r\n        const color = computed(() => {\r\n            switch (state.status) {\r\n                case LoadingBarStatus.wait:\r\n                    return null\r\n                case LoadingBarStatus.process:\r\n                    return state.option!.color\r\n                case LoadingBarStatus.done:\r\n                    return state.option!.doneColor\r\n                case LoadingBarStatus.fail:\r\n                    return state.option!.failColor\r\n            }\r\n            return LoadingBarStatus.process\r\n        })\r\n\r\n        const status = ['primary', 'success', 'warn', 'error', 'info']\r\n\r\n        const classes = computed(() => [\r\n            'pl-loading-bar-service',\r\n            {\r\n                [`pl-loading-bar-service-status-${color.value}`]: !!color.value && status.indexOf(color.value) > -1\r\n            }\r\n        ])\r\n\r\n        const styles = computed(() => {\r\n            if (!state.option) return {} as StyleProperties\r\n            return {\r\n                height: `${state.option.height}px`,\r\n                width: `${state.option!.percent}%`,\r\n                backgroundColor: (!!color.value && status.indexOf(color.value) === -1) ? color.value : '',\r\n                opacity: state.status === LoadingBarStatus.wait ? '0' : '1',\r\n                zIndex: String(state.zIndex),\r\n            } as StyleProperties\r\n        })\r\n\r\n        const methods = {\r\n            /**\r\n             * 开始自动播放进度\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            startAutoLoading: () => {\r\n                state.autoLoadingStep = 10\r\n                state.interval = setInterval(() => {\r\n                    if (!!state.option) {\r\n                        if (state.option.percent == null) {\r\n                            state.option.percent = 0\r\n                        }\r\n                        state.option.percent += state.autoLoadingStep\r\n                        state.autoLoadingStep -= 0.5\r\n                        if (state.option.percent + 20 > 100 || state.autoLoadingStep < 0) {\r\n                            methods.stopAutoLoading()\r\n                        }\r\n                    } else {\r\n                        methods.stopAutoLoading()\r\n                    }\r\n                }, 250)\r\n            },\r\n            /**\r\n             * 停止自动播放进度\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            stopAutoLoading: () => {\r\n                if (!!state.interval) {\r\n                    clearInterval(state.interval)\r\n                    state.interval = null\r\n                }\r\n            },\r\n            /**\r\n             * 初始化option\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            init: (option: LoadingBarFormatOption) => {\r\n                state.option = option\r\n                Object.assign(option, methods)\r\n                return methods\r\n            },\r\n            /**\r\n             * 更新option\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            update: (option: LoadingBarFormatOption) => {\r\n                if (!!state.option) {\r\n                    Object.assign(state.option, option)\r\n                }\r\n                methods.stopAutoLoading()\r\n            },\r\n            /**\r\n             * 开始loading\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            start: async () => {\r\n                state.startDelayer = setTimeout(async () => {\r\n                    if (!state.option) {\r\n                        return\r\n                    }\r\n\r\n                    const percent = state.option.percent\r\n                    isShow.value = true\r\n                    state.option.percent = 0\r\n\r\n                    state.status = LoadingBarStatus.process\r\n                    state.zIndex = nextIndex()\r\n\r\n                    await delay(23)\r\n                    state.option.percent = percent\r\n\r\n                    if (state.option!.autoProcess) {\r\n                        methods.startAutoLoading()\r\n                    }\r\n                }, 100)\r\n            },\r\n            /**\r\n             * 加载完成\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            done: async () => {\r\n                state.status = LoadingBarStatus.done\r\n                await methods.complete()\r\n            },\r\n            /**\r\n             * 加载失败\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            fail: async () => {\r\n                state.status = LoadingBarStatus.fail\r\n                await methods.complete()\r\n            },\r\n            complete: async () => {\r\n                if (!state.option) {\r\n                    return\r\n                }\r\n                if (state.startDelayer != null) {\r\n                    clearTimeout(state.startDelayer)\r\n                    state.startDelayer = null\r\n                }\r\n                methods.stopAutoLoading()\r\n                state.option!.percent = 100\r\n                await delay(300)\r\n                state.status = LoadingBarStatus.wait\r\n                await delay(300)\r\n                isShow.value = false\r\n                state.option = null\r\n            },\r\n        };\r\n\r\n\r\n        const service = (option: LoadingBarFormatOption) => {\r\n            methods.init(option)\r\n            if (!!option.autoStart) {\r\n                methods.start()\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                isShow,\r\n                isOpen: isShow,\r\n                service,\r\n            },\r\n            render: () => isShow.value && (\r\n                <div class={classes.value} style={styles.value as any}/>\r\n            )\r\n        }\r\n    },\r\n})","import Loading from '../loading'\r\nimport LoadingMask from '../loading-mask'\r\nimport {App} from 'vue';\r\nimport {installPlugin} from \"../../utils/installPlugin\";\r\nimport {LoadingMaskDirective} from \"./mask/loading-mask-directive\";\r\nimport {getLoadingMaskService} from \"./mask\";\r\nimport {getLoadingBarService} from \"./bar\";\r\nimport './loading-service.scss'\r\n\r\nexport default {\r\n    install(app: App) {\r\n        installPlugin(app, Loading)\r\n        installPlugin(app, LoadingMask)\r\n        app.directive('loading', LoadingMaskDirective)\r\n        app.mixin({\r\n            beforeCreate() {\r\n                Object.defineProperty(this, '$loading', {\r\n                    get() {\r\n                        return {\r\n                            mask: getLoadingMaskService(this),\r\n                            bar: getLoadingBarService(this),\r\n                        }\r\n                    },\r\n                })\r\n            },\r\n        })\r\n    },\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive, computed} from 'vue';\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {HTMLInputEvent} from \"../../shims\";\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport './number.scss'\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlInput} from \"../input/input\";\r\n\r\nconst NAN = 'NAN'\r\n\r\nexport const PlNumber = designComponent({\r\n    name: 'pl-number',\r\n    directives: {\r\n        ClickWave,\r\n    },\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n\r\n        modelValue: {type: [String, Number]},                       // 双向绑定值\r\n        min: {type: [String, Number]},                              // 最小值\r\n        max: {type: [String, Number]},                              // 最大值\r\n        step: {type: [String, Number], default: 1},                 // 计数器步长\r\n        stepStrictly: {type: Boolean},                              // 是否只能输入 step 的倍数\r\n        precision: {type: [Number, String]},                        // 数值精度\r\n        hideButton: {type: Boolean},                                // 隐藏操作按钮\r\n\r\n        /*---------------------------------------input-------------------------------------------*/\r\n        inputProps: {type: Object},                                 // pl-input属性配置对象\r\n    },\r\n    emits: {\r\n        onFocus: (e: Event) => true,\r\n        onBlur: (e: Event) => true,\r\n        onUpdateModelValue: (val: string | number | undefined) => true,\r\n        onEnter: (e: KeyboardEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoEmit: false})\r\n        useStyle({status: undefined})\r\n        const {editComputed} = useEdit()\r\n        const state = reactive({\r\n            isFocus: false,                                         // 当前是否获取焦点\r\n            interval: null as null | number,                        // 进步器长摁定时器\r\n        })\r\n\r\n        const {propsState} = useProps(props, {\r\n            min: useProps.NUMBER,\r\n            max: useProps.NUMBER,\r\n            step: useProps.NUMBER,\r\n            precision: useProps.NUMBER,\r\n        }) as {\r\n            propsState: {\r\n                min: number | null,\r\n                max: number | null,\r\n                step: number,\r\n                precision: number | null,\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            getValue: (val: any): undefined | number | 'NAN' => {\r\n                if (val == null) return undefined\r\n                val = String(val).trim()\r\n                if (val === '') return undefined\r\n                val = Number(val)\r\n                if (isNaN(val)) {\r\n                    return NAN\r\n                } else {\r\n                    return val\r\n                }\r\n            },\r\n            getEffectiveValue: (): number | undefined => {\r\n                let value = formatModelValue.value\r\n                if (value === NAN) {\r\n                    value = formatValue.value\r\n                    if (value === NAN) {\r\n                        if (propsState.min != null) return propsState.min\r\n                        else if (propsState.max != null) return propsState.max\r\n                        else if (props.stepStrictly) return propsState.step\r\n                        else return 0\r\n                    }\r\n                }\r\n                return value\r\n            },\r\n            checkValue: (value: number | undefined): number | undefined => {\r\n                if (value != null) {\r\n                    // min\r\n                    if (propsState.min != null && value < propsState.min) {\r\n                        value = propsState.min\r\n                    }\r\n                    // max\r\n                    if (propsState.max != null && value! > propsState.max) {\r\n                        value = propsState.max\r\n                    }\r\n                    // stepStrictly\r\n                    if (props.stepStrictly && value! % propsState.step! !== 0) {\r\n                        // console.log('props.value', props.modelValue)\r\n                        value = props.modelValue == undefined ? undefined : Number(props.modelValue)\r\n                    }\r\n                    // precision\r\n                    if (propsState.precision != null) {\r\n                        value = Number(value!.toFixed(propsState.precision))\r\n                    }\r\n                }\r\n                return value\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const classes = computed(() => ([\r\n            `pl-number`,\r\n            {\r\n                'pl-number-hide-button': props.hideButton,\r\n                'pl-number-disabled': editComputed.value.disabled,\r\n            }\r\n        ]))\r\n        const formatModelValue = computed(() => utils.getValue(model.value))\r\n        const formatValue = computed(() => utils.getValue(props.modelValue))\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            add: () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                let value = utils.getEffectiveValue()\r\n                if (value == null) {\r\n                    value = 0\r\n                }\r\n                value += propsState.step\r\n                value = utils.checkValue(value)\r\n                model.value = value\r\n                emit.onUpdateModelValue(model.value)\r\n            },\r\n            minus: () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                let value = utils.getEffectiveValue()\r\n                if (value == null) {\r\n                    value = 0\r\n                }\r\n                value -= propsState.step\r\n                value = utils.checkValue(value)\r\n                model.value = value\r\n                emit.onUpdateModelValue(model.value)\r\n            },\r\n            clearInterval: () => {              // 清除定时器\r\n                if (state.interval != null) {\r\n                    clearInterval(state.interval)\r\n                }\r\n                window.removeEventListener('mouseup', methods.clearInterval)\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            focus: (e: Event) => {\r\n                state.isFocus = true\r\n                emit.onFocus(e)\r\n            },\r\n            blur: (e: Event) => {\r\n                model.value = utils.checkValue(utils.getEffectiveValue())\r\n                emit.onUpdateModelValue(model.value)\r\n                state.isFocus = false\r\n                emit.onBlur(e)\r\n            },\r\n            input: (e: HTMLInputEvent) => {\r\n                model.value = e.target.value\r\n            },\r\n            enter: (e: KeyboardEvent) => {\r\n                model.value = utils.checkValue(utils.getEffectiveValue())\r\n                emit.onUpdateModelValue(model.value)\r\n                emit.onEnter(e)\r\n            },\r\n            intervalAdd: () => {\r\n                methods.add()\r\n                state.interval = setInterval(methods.add, 100)\r\n                window.addEventListener('mouseup', methods.clearInterval)\r\n            },\r\n            intervalMinus: () => {\r\n                methods.minus()\r\n                state.interval = setInterval(() => methods.minus(), 100)\r\n                window.addEventListener('mouseup', methods.clearInterval)\r\n            },\r\n            clearHandler: () => {\r\n                model.value = undefined\r\n                emit.onUpdateModelValue(model.value)\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n                const key = getKey(e)\r\n                switch (key) {\r\n                    case KEY.up:\r\n                        e.preventDefault()\r\n                        e.stopPropagation()\r\n                        methods.add()\r\n                        break\r\n                    case KEY.down:\r\n                        e.preventDefault()\r\n                        e.stopPropagation()\r\n                        methods.minus()\r\n                        break\r\n                    case KEY.enter:\r\n                        handler.enter(e)\r\n                        break\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                ...methods,\r\n            },\r\n            render: () => (\r\n                <PlInput class={classes.value}\r\n                         isFocus={state.isFocus}\r\n                         inputInnerTabindex={null as any}\r\n                         {...(props.inputProps || {})}\r\n                >\r\n                    {!props.hideButton && (\r\n                        <div class=\"pl-number-prepend-button plain-click-node\" onMousedown={handler.intervalMinus} v-click-wave>\r\n                            <PlIcon icon=\"el-icon-minus\"/>\r\n                        </div>\r\n                    )}\r\n                    <input type=\"text\"\r\n                           value={model.value}\r\n                           disabled={editComputed.value.disabled!}\r\n                           readonly={editComputed.value.readonly!}\r\n                           onFocus={handler.focus}\r\n                           onBlur={handler.blur}\r\n                           onInput={handler.input as any}\r\n                           onKeydown={handler.keydown}/>\r\n                    {!props.hideButton && (\r\n                        <div class=\"pl-number-append-button plain-click-node\" onMousedown={handler.intervalAdd} v-click-wave>\r\n                            <PlIcon icon=\"el-icon-plus\"/>\r\n                        </div>\r\n                    )}\r\n                </PlInput>\r\n            )\r\n        }\r\n    },\r\n})","import {PlNumber} from './number'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlNumber)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive, computed} from 'vue';\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport './toggle.scss'\r\n\r\nexport const PlToggle = designComponent({\r\n    name: 'pl-toggle',\r\n    directives: {ClickWave},\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {},                                                              // 双向绑定值\r\n        trueValue: {default: true as any},                                           // 选中时绑定的值\r\n        falseValue: {default: false as any},                                         // 未选中时绑定的值\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onMousedown: (e: MouseEvent) => true,\r\n        onMouseup: (e: MouseEvent) => true,\r\n        onClick: (e: MouseEvent) => true,\r\n        onFocus: (e: Event) => true,\r\n        onBlur: (e: Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const state = reactive({\r\n            isActive: false,\r\n        })\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const isChecked = computed(() => model.value === props.trueValue)\r\n\r\n        const classes = computed(() => ([\r\n            `pl-toggle`,\r\n            `plain-click-node`,\r\n            `pl-toggle-status-${styleComputed.value.status}`,\r\n            `pl-toggle-size-${styleComputed.value.size}`,\r\n            {\r\n                'pl-toggle-on': isChecked.value,\r\n                'pl-toggle-active': state.isActive,\r\n                'pl-toggle-disabled': editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                state.isActive = true\r\n                window.addEventListener('mouseup', handler.mouseup)\r\n                emit.onMousedown(e)\r\n            },\r\n            mouseup: (e: MouseEvent) => {\r\n                state.isActive = false\r\n                window.removeEventListener('mouseup', handler.mouseup)\r\n                emit.onMouseup(e)\r\n            },\r\n            click: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                model.value = isChecked.value ? props.falseValue : props.trueValue\r\n                emit.onClick(e)\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n                const key = getKey(e)\r\n                if (key === KEY.space || key === KEY.enter) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    handler.click(e as any)\r\n                }\r\n            },\r\n            focus: emit.onFocus,\r\n            blur: emit.onBlur,\r\n        }\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}\r\n                     tabindex={0}\r\n                     onMousedown={handler.mousedown}\r\n                     onClick={handler.click}\r\n                     onKeydown={handler.keydown}\r\n                     onFocus={handler.focus}\r\n                     onBlur={handler.blur}\r\n                     v-click-wave={'large'}\r\n                >\r\n                    <div class=\"pl-toggle-inner\"/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlToggle} from './toggle'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlToggle)","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useMounted} from \"../../use/useMounted\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive, computed} from 'vue';\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {removeUnit} from \"plain-utils/string/removeUnit\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport './slider.scss'\r\n\r\nexport default designComponent({\r\n    name: 'pl-slider',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: Number, default: 0},                          //非范围选择时，双向绑定值\r\n        start: {type: Number, default: 0},                          //范围选择时，起始绑定值\r\n        end: {type: Number, default: 0},                            //范围选择时，末尾绑定值\r\n        total: {type: Number, default: 100},                        //总数，value,start以及end不应该超过total\r\n        alignEnd: {type: Boolean},                                  //是否末尾对其\r\n        full: {type: Boolean},                                      //是否占满父元素大小\r\n        length: {type: [Number, String], default: '156px'},         //滑动条长度\r\n        size: {type: [Number, String], default: '6px'},             //滑动条宽度\r\n        vertical: {type: Boolean},                                  //是否纵向\r\n        step: {type: Number, default: 1},                           //滑条分块的个数，默认是不分块\r\n        min: {type: Number},                                        //最小值\r\n        max: {type: Number},                                        //最大值\r\n\r\n        showSteps: {type: Boolean, default: true},                  //是否显示步骤点\r\n        tooltip: {type: Boolean, default: true},                    //是否tooltip显示值\r\n        tooltipFormatter: Function,                                 //tooltip显示格式化函数\r\n        range: {type: Boolean},                                     //是否为范围选择\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number) => true,\r\n        onUpdateStart: (val: number) => true,\r\n        onUpdateEnd: (val: number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const start = useModel(() => props.start, emit.onUpdateStart)\r\n        const end = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const isMounted = useMounted()\r\n\r\n        const state = reactive({\r\n            dragStart: null as null | boolean,\r\n            touching: false,\r\n            tempStart: null as null | number,\r\n            tempEnd: null as null | number,\r\n            startX: null as null | number,\r\n            startY: null as null | number,\r\n            totalLength: null as null | number,\r\n            position: {\r\n                'vertical-start': 'bottom',\r\n                'vertical-end': 'top',\r\n                'horizontal-start': 'right',\r\n                'horizontal-end': 'left',\r\n            },\r\n        })\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            transferValueToLength(value: number) {\r\n                return totalLength.value * value / props.total\r\n            },\r\n            transferLengthToValue(length: number) {\r\n                return props.total * length / totalLength.value\r\n            },\r\n            setValue(val: number) {\r\n                model.value = val\r\n            },\r\n            setStart(val: number) {\r\n                start.value = val\r\n            },\r\n            setEnd(val: number) {\r\n                end.value = val\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const styles = computed(() => ({\r\n            [props.vertical ? 'height' : 'width']: !!props.full ? '100%' : unit(props.length),\r\n            [props.vertical ? 'width' : 'height']: unit(props.size),\r\n        }))\r\n\r\n        const classes = computed(() => ([\r\n            'pl-slider',\r\n            {\r\n                'pl-slider-full': !!props.full,\r\n                'pl-slider-touching': state.touching,\r\n                'pl-slider-range': props.range,\r\n                'pl-slider-place-end': start.value === end.value && start.value === props.total\r\n            },\r\n            `pl-slider-${!!props.vertical ? 'vertical' : 'horizontal'}`,\r\n            `pl-slider-align-${!!props.alignEnd ? 'end' : 'start'}`,\r\n            `pl-slider-status-${!!editComputed.value.disabled ? 'info' : (styleComputed.value.status)}`,\r\n        ]))\r\n\r\n        const totalLength = computed(() => {\r\n            if (!isMounted.value) return 0\r\n            if (state.totalLength == null) state.totalLength = refs.el![!!props.vertical ? 'offsetHeight' : 'offsetWidth']\r\n            return state.totalLength\r\n        })\r\n\r\n        const startPosition = computed(() => {\r\n            return !!props.range ? utils.transferValueToLength(start.value) : props.alignEnd ? (totalLength.value - utils.transferValueToLength(model.value)) : 0\r\n        })\r\n\r\n        const endPosition = computed(() => {\r\n            return !!props.range ? totalLength.value - utils.transferValueToLength(end.value) : props.alignEnd ? 0 : (totalLength.value - utils.transferValueToLength(model.value))\r\n        })\r\n\r\n        const progressStyles = computed(() => {\r\n            const ret = {} as any\r\n            ret[props.vertical ? 'top' : 'left'] = `${startPosition.value}px`\r\n            ret[props.vertical ? 'bottom' : 'right'] = `${endPosition.value}px`\r\n            return ret\r\n        })\r\n\r\n        const startTooltip = computed(() => {\r\n            let ret = !!props.range ? start.value : model.value\r\n            return !!props.tooltipFormatter ? props.tooltipFormatter(ret) : ret\r\n        })\r\n\r\n        const endTooltip = computed(() => {\r\n            let ret = !!props.range ? end.value : model.value\r\n            return !!props.tooltipFormatter ? props.tooltipFormatter(ret) : ret\r\n        })\r\n\r\n        const steps = computed(() => {\r\n            const ret: number[] = []\r\n            let i = 0\r\n            while (i < props.step - 1) {\r\n                ret.push(i)\r\n                i++\r\n            }\r\n            return ret\r\n        })\r\n\r\n        const stepItemStyles = computed(() => {\r\n            return {\r\n                ['height']: unit(removeUnit(props.size) as any / 2),\r\n                ['width']: unit(removeUnit(props.size) as any / 2),\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            dragstart: (e: MouseEvent, dragStart: boolean) => {\r\n                if ((!!props.alignEnd !== dragStart && !props.range) || !editComputed.value.editable) return\r\n                document.addEventListener('mousemove', handler.mousemove)\r\n                document.addEventListener('mouseup', handler.mouseup)\r\n                state.dragStart = dragStart\r\n                state.touching = true\r\n                state.startX = e.clientX\r\n                state.startY = e.clientY\r\n                state.tempStart = startPosition.value\r\n                state.tempEnd = endPosition.value\r\n                disabledUserSelect()\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                if (!state.touching) return\r\n                const durX = e.clientX - state.startX!\r\n                const durY = e.clientY - state.startY!\r\n                let temp = !!state.dragStart ? state.tempStart : state.tempEnd\r\n                let dur = (!!props.vertical ? durY : durX) * (!!state.dragStart ? 1 : -1)\r\n                let ret = Math.min(Math.max(temp! + dur, 0), totalLength.value)\r\n\r\n                if (props.step > 1) {\r\n                    const stepLength = totalLength.value / props.step\r\n                    const divisor = Number((ret / stepLength).toFixed(0)) + 1\r\n                    if (ret > stepLength * divisor) ret = stepLength * divisor\r\n                    else ret = stepLength * (divisor - 1)\r\n                }\r\n\r\n                if (!!state.dragStart) {\r\n                    start.value = utils.transferLengthToValue(ret)\r\n                } else {\r\n                    end.value = utils.transferLengthToValue(ret)\r\n                }\r\n\r\n                if (!props.range) {\r\n                    ret = Number(utils.transferLengthToValue(totalLength.value - ret).toFixed(2))\r\n                    props.max != null && ret > props.max && (ret = props.max)\r\n                    props.min != null && ret < props.min && (ret = props.min)\r\n                    utils.setValue(ret)\r\n                } else {\r\n                    ret = Number(utils.transferLengthToValue(state.dragStart ? ret : totalLength.value - ret).toFixed(2))\r\n                    props.max != null && ret > props.max && (ret = props.max)\r\n                    props.min != null && ret < props.min && (ret = props.min)\r\n                    if (!!state.dragStart) {\r\n                        if (ret > end.value) ret = end.value\r\n                    } else {\r\n                        if (ret < start.value) ret = start.value\r\n                    }\r\n                    state.dragStart ? utils.setStart(ret) : utils.setEnd(ret)\r\n                }\r\n            },\r\n            mouseup: (e: MouseEvent) => {\r\n                if (!state.touching) return\r\n                state.touching = false\r\n                document.removeEventListener('mousemove', handler.mousemove)\r\n                document.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value} ref={'el'}>\r\n                    {\r\n                        props.showSteps && props.step > 1 && (\r\n                            <div class=\"pl-slider-step\">\r\n                                {\r\n                                    steps.value.map((item) => (\r\n                                        <span class=\"pl-slider-step-item-wrapper\" key={item}>\r\n                                        <div class=\"pl-slider-step-item\" style={stepItemStyles.value as any}/>\r\n                                    </span>\r\n                                    ))\r\n                                }\r\n                            </div>\r\n                        )\r\n                    }\r\n                    <div class=\"pl-slider-progress\" style={progressStyles.value}>\r\n                <span class=\"pl-slider-dot-wrapper pl-slider-dot-wrapper-start\" onMousedown={(e: MouseEvent) => handler.dragstart(e, true)}><span class=\"pl-slider-dot\"><span class=\"pl-slider-dot-inner\">\r\n                    {!!props.tooltip && <span class=\"pl-slider-dot-tooltip\">{startTooltip.value}</span>}\r\n                </span></span></span>\r\n                        <span class=\"pl-slider-dot-wrapper pl-slider-dot-wrapper-end\" onMousedown={e => handler.dragstart(e, false)}><span class=\"pl-slider-dot\"><span class=\"pl-slider-dot-inner\">\r\n                    {!!props.tooltip && <span class=\"pl-slider-dot-tooltip\">{endTooltip.value}</span>}\r\n                </span></span></span>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import Slider from './slider'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Slider)","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {computed} from 'vue';\r\nimport './tag.scss'\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {createEventListener} from \"../../utils/createEventListener\";\r\n\r\nexport const PlTag = designComponent({\r\n    name: 'pl-tag',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n        mode: {type: String, default: 'stroke'},\r\n        label: {type: String},\r\n        close: {type: Boolean},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n        onClose: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {slots} = useSlots()\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        const classes = computed(() => ([\r\n            `pl-tag`,\r\n            `pl-tag-mode-${props.mode}`,\r\n            `pl-tag-status-${styleComputed.value.status}`,\r\n            `pl-tag-shape-${styleComputed.value.shape}`,\r\n            `pl-tag-size-${styleComputed.value.size}`,\r\n            {\r\n                'pl-tag-disabled': !!editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n        const handler = {\r\n            click: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                emit.onClick(e)\r\n            },\r\n            clickClose: (e: MouseEvent) => {\r\n                e.stopPropagation()\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                emit.onClose(e)\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} onClick={handler.click}>\r\n                    {slots.default(props.label)}\r\n                    {!!props.close && <PlIcon icon=\"el-icon-close\" class=\"pl-tag-close\" {...createEventListener({onClick: handler.clickClose})}/>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlTag} from './tag'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlTag)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport Input from '../input'\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {computed, nextTick, onBeforeUnmount, reactive} from 'vue';\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport './tag-input.scss'\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlTag} from \"../tag/tag\";\r\nimport {PlInput} from \"../input/input\";\r\n\r\nexport const PlTagInput = designComponent({\r\n    name: 'pl-tag-input',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: Array},                                              // 数组，双向绑定值\r\n        close: {type: Boolean, default: true},                                  // 是否可删除\r\n        beforeAdd: Function,                                                    // 添加前校验\r\n        beforeRemove: Function,                                                 // 删除前校验\r\n        formatValue: Function,                                                  // 格式化输入值，返回一个值，或者对象\r\n        noInput: Function,                                                      // 是否显示输入框\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any[] | undefined) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {item: String, index: Number}\r\n        })\r\n\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n        })\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n\r\n        const state = reactive({\r\n            isEditing: false,\r\n            inputValue: null as string | null,\r\n        })\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle()\r\n\r\n        const classes = computed(() => ([\r\n            'pl-tag-input',\r\n            `pl-tag-input-status-${styleComputed.value.status}`,\r\n            {\r\n                'pl-tag-input-disabled': editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n\r\n        onBeforeUnmount(() => {\r\n            window.removeEventListener('click', handler.clickWindow, true)\r\n        })\r\n\r\n        const handler = {\r\n            clickWindow: (e: MouseEvent) => {\r\n                if (!refs.input!.refs.input.contains(e.target as Node)) {\r\n                    state.isEditing = false\r\n                    window.removeEventListener('click', handler.clickWindow, true)\r\n                }\r\n            },\r\n            clickEditButton: async () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                state.isEditing = true\r\n                await nextTick()\r\n                refs.input!.methods.focus()\r\n\r\n                // 点击其他元素的时候关闭输入状态\r\n                await delay(0)\r\n                window.addEventListener('click', handler.clickWindow, true)\r\n            },\r\n            inputEnter: async () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n\r\n                let inputValue = state.inputValue\r\n\r\n                if (inputValue != '0' && !inputValue) {\r\n                    return\r\n                }\r\n\r\n                if (!!props.beforeAdd) {\r\n                    await props.beforeAdd(inputValue)\r\n                }\r\n                if (!!props.formatValue) {\r\n                    inputValue = await props.formatValue(inputValue)\r\n                }\r\n\r\n                let value = [...(model.value || [])]\r\n                value.push(inputValue)\r\n                model.value = value\r\n                state.inputValue = null\r\n            },\r\n            tagClose: async (item: any, index: number) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                if (!!props.beforeRemove) {\r\n                    await props.beforeRemove(item, index)\r\n                }\r\n                model.value!.splice(index, 1)\r\n                model.value = [...model.value!]\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n                if (getKey(e) === KEY.enter) {\r\n                    handler.inputEnter()\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}>\r\n                    {\r\n                        (model.value || []).map((item: any, index) => (\r\n                            scopedSlots.default({item, index}, (\r\n                                <PlTag key={index} label={item} close={editComputed.value.editable && props.close} onClose={() => handler.tagClose(item, index)}/>\r\n                            ))\r\n                        ))\r\n                    }\r\n                    {!props.noInput && (\r\n                        <PlInput v-model={state.inputValue}\r\n                                 ref=\"input\"\r\n                                 key={state.isEditing ? 1 : 2}\r\n                                 onKeydown={handler.keydown}\r\n                                 v-slots={!state.isEditing ? {\r\n                                     default: () => (\r\n                                         <div class=\"pl-tag-input-not-edit\"\r\n                                              onClick={handler.clickEditButton}>\r\n                                             <PlIcon icon=\"el-icon-plus\"/>\r\n                                             <span>添加</span>\r\n                                         </div>\r\n                                     )\r\n                                 } : null}\r\n                        />\r\n                    )}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlTagInput} from './tag-input'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlTagInput)","import './rate.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive, computed} from 'vue';\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {useMounted} from \"../../use/useMounted\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlRate = designComponent({\r\n    name: 'pl-rate',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: Number, default: 0},                         //vModel双向绑定值\r\n        total: {type: Number, default: 5},                              //总分\r\n        count: {type: Number, default: 5},                              //显示图标的个数\r\n        mode: {type: String, default: 'normal'},                        //模式，normal，all整个图标为单位，half：半个图标为单位\r\n        status: {type: String,},                                        //标准颜色\r\n        activeIcon: {type: String},                                     //激活的时候的图标\r\n        inactiveIcon: {type: String},                                   //未激活的时候的图标\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const state = reactive({\r\n            totalWidth: null as null | number,\r\n            elLeft: null as null | number,\r\n        })\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n\r\n        const mounted = useMounted()\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const classes = computed(() => ([\r\n            `pl-rate`,\r\n            `pl-rate-status-${styleComputed.value.status}`,\r\n            `pl-rate-size-${styleComputed.value.size}`,\r\n            {\r\n                'pl-rate-disabled': editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n        const data = computed(() => {\r\n            let i = 0\r\n            let ret: number[] = []\r\n            while (i < props.count) {\r\n                ret.push(i)\r\n                i++\r\n            }\r\n            return ret\r\n        })\r\n\r\n        const activeStyles = computed(() => ({\r\n            width: (model.value / props.total) * 100 + '%'\r\n        }))\r\n\r\n        const totalWidth = computed(() => {\r\n            if (!mounted.value) return 0\r\n            if (!state.totalWidth) state.totalWidth = refs.el.offsetWidth\r\n            return state.totalWidth\r\n        })\r\n\r\n        const elLeft = computed(() => {\r\n            if (!state.elLeft) state.elLeft = refs.el.getBoundingClientRect().left\r\n            return state.elLeft\r\n        })\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n\r\n        const methods = {\r\n            reset: (e: MouseEvent) => {\r\n                let dur = e.clientX - (elLeft.value || 0)\r\n                let start = 0\r\n                let end = totalWidth.value\r\n                let step = end / props.count\r\n                switch (props.mode) {\r\n                    case 'all':\r\n                        for (; start < end; start += step) {\r\n                            if (start < dur && dur < start + step) {\r\n                                dur = start + step\r\n                                break\r\n                            }\r\n                        }\r\n                        break\r\n                    case 'half':\r\n                        for (; start < end; start += step) {\r\n                            let half = (start + start + step) / 2\r\n                            if (start < dur && dur < half) {\r\n                                dur = half\r\n                                break\r\n                            }\r\n                            if (half < dur && dur < start + step) {\r\n                                dur = start + step\r\n                                break\r\n                            }\r\n                        }\r\n                        break\r\n                }\r\n\r\n                model.value = Number((Math.max(0, Math.min((dur) / totalWidth.value, 1)) * props.total).toFixed(2))\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) return\r\n                window.document.addEventListener('mousemove', handler.mousemove)\r\n                window.document.addEventListener('mouseup', handler.mouseup)\r\n                disabledUserSelect()\r\n                methods.reset(e)\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                methods.reset(e)\r\n            },\r\n            mouseup: (e: MouseEvent) => {\r\n                window.document.removeEventListener('mousemove', handler.mousemove)\r\n                window.document.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} onMousedown={handler.mousedown} ref=\"el\">\r\n                    <div class=\"pl-rate-active\" style={activeStyles.value}>\r\n                        {data.value.map(i => <PlIcon icon={props.activeIcon || 'el-icon-star-on'} key={i}/>)}\r\n                    </div>\r\n                    <div class=\"pl-rate-inactive\">\r\n                        {data.value.map(i => <PlIcon icon={props.inactiveIcon || 'el-icon-star-off'} key={i}/>)}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlRate} from './rate'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlRate)","import {computed, reactive, nextTick, watch, onMounted, onUpdated} from 'vue'\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {PlScroll} from \"../scroll/scroll\";\r\n\r\ninterface DataNode {\r\n    top: number\r\n    bottom: number\r\n    height: number\r\n\r\n    data: any\r\n    index: number\r\n}\r\n\r\nexport function useVirtualList(\r\n    {\r\n        props,\r\n        refs,\r\n        emit,\r\n        transform,\r\n    }: {\r\n        props: {\r\n            data: any[],\r\n            size: number,\r\n            disabled?: boolean,\r\n            dynamicSize?: boolean,\r\n        },\r\n        refs: {\r\n            scroll: typeof PlScroll.use.class | null,\r\n            content: HTMLDivElement,\r\n        },\r\n        emit: {\r\n            onScroll: (e: Event) => void\r\n        },\r\n        transform?: boolean,\r\n    }\r\n) {\r\n\r\n    /*非响应式属性*/\r\n    const freezeState = {\r\n        scrollTop: 0,                               // 实时的scrollTop值\r\n        current: {                                  // 当前的页面信息\r\n            pageIndex: 0,\r\n            start: 0,\r\n            end: 0,\r\n        },\r\n    }\r\n    /*响应式属性*/\r\n    const state = reactive({\r\n        nodes: [] as DataNode[],                    // 格式化的data数组数据\r\n        scrollTop: 0,                               // 当前滚动scrollTop（非实时的）\r\n        pageSize: 0,                                // 页大小\r\n    })\r\n\r\n    /**\r\n     * 计算得到的在虚拟列表当前要渲染的数组数据\r\n     * @author  韦胜健\r\n     * @date    2020/11/15 9:28\r\n     */\r\n    const offsetData = computed((): { list: { item: any, index: number }[], startPageIndex: number, start: number } => {\r\n        const {pageSize, scrollTop} = state\r\n        const data = props.data || []\r\n        if (!pageSize) {\r\n            return {list: [], startPageIndex: 0, start: 0}\r\n        }\r\n        if (props.disabled) {\r\n            return {\r\n                list: data.map((item, index) => ({item, index})),\r\n                start: 0,\r\n                startPageIndex: 0,\r\n            }\r\n        }\r\n        const {start, end, pageIndex} = utils.getPageIndex(scrollTop, pageSize)\r\n        return {\r\n            list: data.map((item, index) => ({item, index})).slice(start, end),\r\n            startPageIndex: pageIndex,\r\n            start,\r\n        }\r\n    })\r\n\r\n    /*---------------------------------------style-------------------------------------------*/\r\n\r\n    /**\r\n     * 跟节点Scroll的class\r\n     * @author  韦胜健\r\n     * @date    2020/12/16 10:48\r\n     */\r\n    const classes = useClass(() => [\r\n        'pl-virtual-list',\r\n        {\r\n            'pl-virtual-list-disabled': props.disabled,\r\n        }\r\n    ])\r\n\r\n    /**\r\n     * 占位节点strut的样式\r\n     * @author  韦胜健\r\n     * @date    2020/12/16 10:48\r\n     */\r\n    const strutStyles = useStyles(style => {\r\n        if (!state.pageSize) {\r\n            return\r\n        }\r\n        if (props.disabled) {\r\n            return;\r\n        }\r\n        if (!props.dynamicSize) {\r\n            style.height = `${(props.data || []).length * props.size}px`\r\n        } else {\r\n            style.height = `${state.nodes[state.nodes.length - 1].bottom}px`\r\n        }\r\n    })\r\n\r\n    /**\r\n     * 内容（位移）节点的样式\r\n     * @author  韦胜健\r\n     * @date    2020/12/16 10:48\r\n     */\r\n    const contentStyles = useStyles(style => {\r\n\r\n        if (!state.pageSize) {\r\n            return\r\n        }\r\n        if (props.disabled) {\r\n            return;\r\n        }\r\n\r\n        const {start} = offsetData.value\r\n\r\n        let top = 0\r\n        if (!props.dynamicSize) {\r\n            top = start * props.size\r\n        } else {\r\n            top = state.nodes[start].top\r\n        }\r\n\r\n        if (transform !== false) {\r\n            /*transform定位*/\r\n            style.transform = `translateY(${top}px)`\r\n        } else {\r\n            /*top定位*/\r\n            style.top = `${top}px`\r\n        }\r\n    })\r\n\r\n    /*---------------------------------------utils-------------------------------------------*/\r\n\r\n    const utils = {\r\n        /**\r\n         * 根据top值，对比DataNodes中节点的top以及bottom得到在data nodes中的位置索引\r\n         * @author  韦胜健\r\n         * @date    2020/11/15 9:29\r\n         */\r\n        getIndex: (top: number) => {\r\n            if (!props.dynamicSize) {\r\n                // console.log('not dynamic》》》getIndex', top / props.size)\r\n                return Math.floor(top / props.size)\r\n            } else {\r\n                const {nodes} = state\r\n                let start = 0;\r\n                let end = nodes.length - 1\r\n                let temp = 0;\r\n                while (start <= end) {\r\n                    let middle = Math.floor((start + end) / 2)\r\n                    let middleBottom = nodes[middle].bottom\r\n                    if (middleBottom === top) {\r\n                        return middle + 1\r\n                    } else if (middleBottom < top) {\r\n                        start = middle + 1\r\n                    } else if (middleBottom > top) {\r\n                        if (!temp || temp > middle) {\r\n                            temp = middle\r\n                        }\r\n                        end = middle - 1\r\n                    }\r\n                }\r\n                // console.log('is dynamic》》》getIndex', temp)\r\n                return temp\r\n            }\r\n        },\r\n        /**\r\n         * 根据scrollTop以及pageSize获取当前的pageIndex\r\n         * @author  韦胜健\r\n         * @date    2020/12/14 22:44\r\n         */\r\n        getPageIndex: (scrollTop: number, pageSize: number) => {\r\n            const data = props.data || []\r\n            /*当前scrollTop对应的数据中数据的索引*/\r\n            let scrollIndex = utils.getIndex(scrollTop)\r\n            let pageIndex = Math.floor(scrollIndex / pageSize)\r\n            let start = pageIndex === 0 ? 0 : (pageIndex - 1) * pageSize\r\n            let end = start + pageSize * 3\r\n            /*console.log({\r\n                scrollIndex,\r\n                pageIndex,\r\n                start,\r\n                end,\r\n            })*/\r\n            const exceed = end - data.length\r\n            if (exceed > 0) {\r\n                end = data.length\r\n                start -= exceed\r\n                if (start < 0) {\r\n                    start = 0\r\n                }\r\n            }\r\n            pageIndex = Math.floor(start / pageSize)\r\n            return {\r\n                data,\r\n                start,\r\n                end,\r\n                pageIndex,\r\n            }\r\n        },\r\n        /**\r\n         * 格式化props.data为 DataNode数组\r\n         * @author  韦胜健\r\n         * @date    2020/11/15 9:29\r\n         */\r\n        resetData: (data: any[]) => {\r\n            // console.log('resetData')\r\n            state.nodes = data.map((item, index) => ({\r\n                data: item,\r\n                index,\r\n                top: props.size * index,\r\n                height: props.size,\r\n                bottom: props.size * (index + 1),\r\n            }))\r\n        }\r\n    }\r\n\r\n    /*---------------------------------------handler-------------------------------------------*/\r\n\r\n    const handler = {\r\n        onScroll: (e: Event) => {\r\n            emit.onScroll(e)\r\n            if (props.disabled) {\r\n                return\r\n            }\r\n            freezeState.scrollTop = (e.target as HTMLDivElement).scrollTop\r\n            const current = utils.getPageIndex((e.target as HTMLDivElement).scrollTop, state.pageSize)\r\n            if (freezeState.current.pageIndex != current.pageIndex || freezeState.current.start != current.start) {\r\n                state.scrollTop = (e.target as HTMLDivElement).scrollTop\r\n                freezeState.current = current\r\n            }\r\n        }\r\n    }\r\n\r\n    watch(() => props.data, (data: any[]) => {\r\n        if (props.disabled) {\r\n            return\r\n        }\r\n        if (!props.dynamicSize) {\r\n            return;\r\n        }\r\n        !!refs.scroll && refs.scroll.methods.scrollTop(0, 0);\r\n        /*如果是动态高度，则刷state.nodes*/\r\n        utils.resetData(data)\r\n    })\r\n\r\n    onMounted(() => {\r\n        const hostHeight = refs.scroll!.refs.host.offsetHeight\r\n        state.pageSize = Math.ceil(hostHeight / props.size)\r\n        if (props.dynamicSize && !props.disabled) {\r\n            utils.resetData(props.data)\r\n        }\r\n    })\r\n\r\n    onUpdated(async () => {\r\n        if (props.disabled) {\r\n            return\r\n        }\r\n        if (!props.dynamicSize) {\r\n            return;\r\n        }\r\n        await nextTick()\r\n        // console.log('dynamic scan height')\r\n        const elNodes = (Array.from(refs.content.childNodes || []) as HTMLElement[]).filter(node => node.nodeType !== 3)\r\n        for (let i = 0; i < elNodes.length; i++) {\r\n            const el = elNodes[i];\r\n            const {offsetHeight: height} = el\r\n            let vid = el.getAttribute('vid') as null | number | string\r\n            if (vid == null) {\r\n                throw new Error('Each item of the virtual-list must have an attribute named \"vid\", please set :vid=\"index\"')\r\n            }\r\n            vid = Number(vid)\r\n            const prevNode = state.nodes[vid]\r\n            const prevHeight = prevNode.height\r\n            let deltaHeight = prevHeight - height\r\n            if (deltaHeight !== 0) {\r\n                prevNode.height = height\r\n                prevNode.bottom = prevNode.bottom - deltaHeight\r\n                for (let j = vid + 1; j < state.nodes!.length; j++) {\r\n                    state.nodes![j].top = state.nodes![j - 1].bottom\r\n                    state.nodes![j].bottom = state.nodes![j].bottom - deltaHeight\r\n                }\r\n            }\r\n        }\r\n    })\r\n\r\n    return {\r\n        virtual: {\r\n            offsetData,\r\n            classes,\r\n            strutStyles,\r\n            contentStyles,\r\n            handler,\r\n        }\r\n    }\r\n}","import './virtual-list.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useVirtualList} from \"./useVirtualList\";\r\nimport {PlScroll} from \"../scroll/scroll\";\r\n\r\nexport const PlVirtualList =  designComponent({\r\n    name: 'pl-virtual-list',\r\n    props: {\r\n        data: {type: Array, require: true, default: []},            // 要渲染的长数据\r\n        size: {type: Number, require: true, default: 40},           // 每一行高度\r\n        dynamicSize: {type: Boolean},                               // 标识列表中的每一行高度不是固定的，但是还是需要提供 size 属性，而且size属性不能与每一行的高度差距太多；\r\n        disabled: {type: Boolean},                                  // 禁用虚拟滚动\r\n    },\r\n    emits: {\r\n        onScroll: (e: Event) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {item: Object, index: Number, virtualIndex: Number},\r\n            content: {data: Array},\r\n        })\r\n\r\n        const {refs} = useRefs({\r\n            scroll: PlScroll,\r\n            content: HTMLDivElement,\r\n        })\r\n\r\n        const {virtual} = useVirtualList({\r\n            refs,\r\n            props,\r\n            emit,\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                refs,\r\n            },\r\n            render: () => {\r\n                const {list} = virtual.offsetData.value\r\n                return (\r\n                    <PlScroll onScroll={virtual.handler.onScroll} ref=\"scroll\" class={virtual.classes.value} disableListTransition>\r\n                        <div class=\"pl-virtual-list-strut\" style={virtual.strutStyles.value}>\r\n                            <div class=\"pl-virtual-list-content\" style={virtual.contentStyles.value} ref=\"content\">\r\n                                {scopedSlots.content({data: list}, list.map((node, virtualIndex) =>\r\n                                    scopedSlots.default({item: node.item, index: node.index, virtualIndex})\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </PlScroll>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {PlVirtualList} from './virtual-list'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlVirtualList)","export const PROGRESS_DEFAULT_PROPS = {\r\n    modelValue: {type: Number, default: 100},                           // 进度百分比，双向绑定值\r\n    outerColor: {type: String, default: '#f2f2f2'},                     // 外层未激活颜色\r\n    innerColor: {type: String, default: '#12b4a5'},                     // 内层已经激活颜色\r\n    speed: {type: Number, default: 3},                                  // 动画速度\r\n    status: {type: String, default: 'normal'},                          // 状态\r\n    successColor: {type: String, default: '#42E67F'},                   // 成功状态颜色\r\n    errorColor: {type: String, default: '#FF6235'},                     // 失败状态颜色\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {PROGRESS_DEFAULT_PROPS} from \"./progress.utils\";\r\nimport {computed} from 'vue';\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlProgressBar = designComponent({\r\n    name: 'pl-progress-bar',\r\n    props: {\r\n        ...PROGRESS_DEFAULT_PROPS,\r\n\r\n        width: {type: String, default: '300px'},\r\n        height: {type: String, default: '6px'},\r\n        inlineText: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n        const iconColor = computed(() => {\r\n            switch (props.status) {\r\n                case 'success':\r\n                    return props.successColor\r\n                case 'error':\r\n                    return props.errorColor\r\n                default:\r\n                    return null\r\n            }\r\n        })\r\n\r\n        const outerStyles = computed(() => ({\r\n            height: !!props.inlineText ? '16px' : props.height,\r\n            width: props.width,\r\n            backgroundColor: props.outerColor,\r\n            borderRadius: props.width,\r\n        }))\r\n\r\n        const innerStyles = computed(() => ({\r\n            width: `${props.modelValue}%`,\r\n            backgroundColor: iconColor.value || props.innerColor,\r\n            borderRadius: props.width,\r\n        }))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-progress-bar\">\r\n                    <div class=\"pl-progress-bar-outer\" style={outerStyles.value}>\r\n                        <div class=\"pl-progress-bar-inner\" style={innerStyles.value}>\r\n                            {props.inlineText && props.modelValue > 20 && (\r\n                                <div>\r\n                                    <div class=\"pl-progress-bar-content\">\r\n                                        {props.status === 'success' && <PlIcon icon=\"el-icon-check-bold\" class=\"pl-progress-bar-icon-success\" style={{color: 'white'}}/>}\r\n                                        {props.status === 'error' && <PlIcon icon=\"el-icon-close-bold\" class=\"pl-progress-bar-icon-error\" style={{color: 'white'}}/>}\r\n                                        {props.status !== 'success' && props.status !== 'error' && <span>{props.modelValue}%</span>}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        {props.inlineText && props.modelValue < 20 && (\r\n                            <div>\r\n                                <div class=\"pl-progress-bar-content\">\r\n                                    {props.status === 'success' && <PlIcon icon=\"el-icon-check-bold\" class=\"pl-progress-bar-icon-success\" style={{color: props.successColor}}/>}\r\n                                    {props.status === 'error' && <PlIcon icon=\"el-icon-close-bold\" class=\"pl-progress-bar-icon-error\" style={{color: props.errorColor}}/>}\r\n                                    {props.status !== 'success' && props.status !== 'error' && <span>{props.modelValue}%</span>}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    {\r\n                        !props.inlineText && (\r\n                            <div class=\"pl-progress-bar-content\">\r\n                                {props.status === 'success' && <PlIcon icon=\"el-icon-success\" class=\"pl-progress-bar-icon-success\" style={{color: props.successColor}}/>}\r\n                                {props.status === 'error' && <PlIcon icon=\"el-icon-error\" class=\"pl-progress-bar-icon-error\" style={{color: props.errorColor}}/>}\r\n                                {props.status !== 'success' && props.status !== 'error' && <span>{props.modelValue}%</span>}\r\n                            </div>\r\n                        )\r\n                    }\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlProgressBar} from './progress-bar'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport './progress.scss'\r\n\r\nexport default createComponentPlugin(PlProgressBar)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlProgressBar} from \"../progress/progress-bar\";\r\n\r\nexport default createComponentPlugin(PlProgressBar)","export function createAnimate(\r\n    {\r\n        initValue,\r\n        time,\r\n        action,\r\n    }: {\r\n        initValue: () => number,\r\n        time: number,\r\n        action: (val: number) => void,\r\n    }) {\r\n\r\n    let cancel = null as null | number\r\n\r\n    return {\r\n        start: (percent: number, done?: () => void) => {\r\n            if (cancel != null) {\r\n                cancelAnimationFrame(cancel)\r\n            }\r\n            let startTime = Date.now()\r\n\r\n            let n = initValue()\r\n            let k = (percent - n) / time\r\n\r\n            const run = () => {\r\n                let nowTime = Date.now()\r\n                let deltaTime = nowTime - startTime\r\n\r\n                if (deltaTime > time) {\r\n                    cancel = null\r\n                    action(percent)\r\n                    !!done && done()\r\n                    return\r\n                }\r\n                action(Number((deltaTime * k + n).toFixed(2)))\r\n                cancel = requestAnimationFrame(run)\r\n            }\r\n            run()\r\n        },\r\n        stop: () => {\r\n            if (cancel != null) {\r\n                cancelAnimationFrame(cancel)\r\n            }\r\n        }\r\n    }\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {PROGRESS_DEFAULT_PROPS} from \"./progress.utils\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {computed, reactive, watch} from 'vue';\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {createAnimate} from \"../../utils/createAnimate\";\r\nimport {PlIcon} from '../icon/icon';\r\n\r\n/*\r\n\r\nSVG path 指令\r\n\r\nM x,y 在这里x和y是绝对坐标，分别代表水平坐标和垂直坐标\r\nm dx,dy 在这里dx和dy是相对于当前点的距离，分别是向右和向下的距离。\r\nA 绘制圆弧\r\n\r\nSVG提供了一个范围广泛stroke 属性\r\n\r\n- stroke: 定义一条线，文本或元素轮廓颜色\r\n- stroke-width: 定义了一条线，文本或元素轮廓厚度\r\n- stroke-linecap: 不同类型的开放路径的终结(开头和结尾是方形还是带圆角的)\r\n- stroke-dasharray: 虚线\r\n- stroke-dashoffset: dash模式到路径开始的距离,使用了一个 <百分比> 值， 那么这个值就代表了当前viewport的一个百分比，值可以取为负值\r\n\r\nSVG Path标签 A 参数\r\n\r\nA rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n\r\n- rx：x轴半径\r\n- ry：y轴半径\r\n- x-axis-rotation：指椭圆的X轴与水平方向顺时针方向夹角，可以想像成一个水平的椭圆绕中心点顺时针旋转的角度（一般都是0，不知道有什么用，如果希望旋转一定的夹角的话，可以用transform rotate实现）\r\n- large-arc-flag：1表示大角度弧线，0为小角度弧线（如果数值大于50%，则这个应该是1，否则是0）。\r\n- sweep-flag：1为顺时针方向，0为逆时针方向。\r\n- x：结束点x坐标\r\n- y：结束点y坐标\r\n\r\n*/\r\nexport const PlProgressCircle = designComponent({\r\n    name: 'pl-progress-circle',\r\n    props: {\r\n        ...PROGRESS_DEFAULT_PROPS,\r\n\r\n        size: {type: Number, default: 100},                                                     // 大小尺寸\r\n        lineSize: {type: Number, default: 6},                                                   // 线条尺寸\r\n        startAngle: {type: Number, default: 0},                                                 // 起始角度\r\n\r\n        antiClockwise: {type: Boolean},                                                         // 逆时针\r\n        loading: {type: Boolean},                                                               // 加载动画\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: number) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {slots} = useSlots()\r\n\r\n        const model = useModel(() => 0, event.emit.onUpdateModelValue, {autoWatch: false})\r\n\r\n        const animate = createAnimate({\r\n            time: props.loading ? 1500 : 900,\r\n            initValue: () => model.value != null ? model.value : (props.loading ? loading.min : 0),\r\n            action: val => model.value = val,\r\n        })\r\n\r\n        const loading = (() => {\r\n            return reactive({\r\n                isLoading: false,\r\n                max: 75,\r\n                min: 15,\r\n                start: () => {\r\n                    const run = () => {\r\n                        if (model.value == null) {\r\n                            model.value = loading.min\r\n                        }\r\n                        animate.start(model.value <= loading.min ? loading.max : loading.min, run)\r\n                    }\r\n                    animate.start(loading.max, run)\r\n                    loading.isLoading = true\r\n                },\r\n                end: () => {\r\n                    animate.stop()\r\n                    loading.isLoading = false\r\n                },\r\n            })\r\n        })();\r\n\r\n        const styles = useStyles(style => {\r\n            style.width = unit(props.size)\r\n            style.height = unit(props.size)\r\n        })\r\n\r\n        const percent = computed(() => model.value == null ? 0 : model.value / 100)\r\n\r\n        const radius = computed(() => 50 - props.lineSize / 2)\r\n\r\n        const pathD = computed(() => {\r\n            let d = [`M 50 ${props.lineSize / 2}`] as (string | number)[]\r\n            const r = radius.value\r\n            const p = percent.value /*小于1的百分比数字*/\r\n\r\n            const degrees = Math.PI * 2 * p\r\n\r\n            d.push(`A ${r} ${r} 0`)\r\n            d.push(p > 0.5 ? 1 : 0)\r\n            d.push(props.antiClockwise ? 0 : 1)\r\n            d.push(`${50 + r * Math.sin(degrees) * (props.antiClockwise ? -1 : 1)} ${50 - r * Math.cos(degrees)}`)\r\n\r\n            return d.join(' ')\r\n        })\r\n\r\n\r\n        const pathStroke = computed(() => {\r\n            switch (props.status) {\r\n                case 'success':\r\n                    return props.successColor\r\n                case 'error':\r\n                    return props.errorColor\r\n                default:\r\n                    return props.innerColor\r\n            }\r\n        })\r\n\r\n        const circleStroke = computed(() => {\r\n            if (percent.value === 1) {\r\n                return pathStroke.value\r\n            }\r\n            return props.outerColor\r\n        })\r\n\r\n        const pathStyles = useStyles(style => {\r\n            style.transform = `rotate(${props.startAngle}deg)`\r\n        })\r\n\r\n        watch(() => props.loading, val => val ? loading.start() : loading.end(), {immediate: true})\r\n\r\n        watch(() => props.modelValue, val => !props.loading && animate.start(val), {immediate: true})\r\n\r\n        return {\r\n            refer: {\r\n                animate,\r\n            },\r\n            render: () => (\r\n                <div class={`pl-progress-circle ${loading.isLoading ? 'pl-progress-circle-loading' : ''}`} style={styles.value}>\r\n                    <svg viewBox=\"0 0 100 100\">\r\n\r\n                        <circle\r\n                            cx=\"50\"\r\n                            cy=\"50\"\r\n                            r={radius.value}\r\n                            stroke={circleStroke.value}\r\n                            stroke-width={props.lineSize}\r\n                            fill=\"none\"/>\r\n\r\n                        {percent.value !== 1 && <path\r\n                            d={pathD.value}\r\n                            stroke={pathStroke.value}\r\n                            stroke-width={props.lineSize}\r\n                            fill=\"none\"\r\n                            stroke-linecap=\"round\"\r\n                            style={pathStyles.value}\r\n                        />}\r\n\r\n                    </svg>\r\n\r\n                    <div class=\"pl-progress-circle-label\">\r\n                        {props.loading ? slots.default() : <>\r\n                            {props.status === 'normal' && slots.default(`${model.value}%`)}\r\n                            {props.status === 'success' && <PlIcon icon=\"el-icon-check-bold\" class=\"pl-progress-bar-icon-success\" style={{color: props.successColor}}/>}\r\n                            {props.status === 'error' && <PlIcon icon=\"el-icon-close-bold\" class=\"pl-progress-bar-icon-error\" style={{color: props.errorColor}}/>}\r\n                        </>}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlProgressCircle} from \"../progress/progress-circle\";\r\n\r\nexport default createComponentPlugin(PlProgressCircle)","import {designComponent} from \"../../use/designComponent\";\r\nimport {PROGRESS_DEFAULT_PROPS} from \"./progress.utils\";\r\nimport {computed, watch} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {createAnimate} from \"../../utils/createAnimate\";\r\nimport {useModel} from \"../../use/useModel\";\r\n\r\nexport const PlProgressMini = designComponent({\r\n    name: 'pl-progress-mini',\r\n    props: {\r\n        size: {default: 28},\r\n        ...PROGRESS_DEFAULT_PROPS,\r\n        innerColor: {type: String, default: 'rgba(0,0,0,0.25)'},\r\n        round: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n\r\n        const model = useModel(() => 0, () => undefined, {autoWatch: false})\r\n\r\n        const animate = createAnimate({\r\n            time: 300,\r\n            initValue: () => model.value || 0,\r\n            action: val => model.value = val,\r\n        })\r\n\r\n        const styles = useStyles(style => {\r\n            style.height = unit(props.size)\r\n            style.width = unit(props.size)\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-progress-mini',\r\n            {\r\n                [`pl-progress-mini-status-${props.status}`]: !!props.status,\r\n                [`pl-progress-mini-round`]: props.round,\r\n            },\r\n        ])\r\n\r\n        const percent = computed(() => 1 - (model.value == null ? 0 : model.value / 100))\r\n\r\n        const radius = computed(() => 50 - 2 / 2)\r\n\r\n        const pathD = computed(() => {\r\n            let d = [`M 50 1`] as (string | number)[]\r\n            const r = radius.value\r\n            const p = percent.value /*小于1的百分比数字*/\r\n\r\n            const degrees = Math.PI * 2 * p\r\n\r\n            d.push(`A ${r} ${r} 0`)\r\n            d.push(p > 0.5 ? 1 : 0)\r\n            d.push(0)\r\n            d.push(`${50 - r * Math.sin(degrees)} ${50 - r * Math.cos(degrees)}`)\r\n\r\n            d.push(`L 50 50 L 50 1`)\r\n\r\n            return d.join(' ')\r\n        })\r\n\r\n\r\n        const pathStroke = computed(() => {\r\n            switch (props.status) {\r\n                case 'success':\r\n                    return props.successColor\r\n                case 'error':\r\n                    return props.errorColor\r\n                default:\r\n                    return props.innerColor\r\n            }\r\n        })\r\n\r\n        watch(() => props.modelValue, val => animate.start(val), {immediate: true})\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    <svg viewBox=\"0 0 100 100\">\r\n                        {model.value == 0 ? (\r\n                            <circle cx=\"50\" cy=\"50\" r={radius.value} fill={pathStroke.value}/>\r\n                        ) : (\r\n                            <path\r\n                                d={pathD.value}\r\n                                stroke=\"none\"\r\n                                fill={pathStroke.value}\r\n                            />\r\n                        )}\r\n                    </svg>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlProgressMini} from \"../progress/progress-mini\";\r\n\r\nexport default createComponentPlugin(PlProgressMini)","import {reactive, watch} from 'vue'\r\n\r\nfunction toNumber(val: null | string | number) {\r\n    if (val == null) {\r\n        return\r\n    }\r\n    if (typeof val === \"string\") {\r\n        return Number(val.replace('px', ''))\r\n    }\r\n    return val\r\n}\r\n\r\nexport function useNumber<Props extends { [k: string]: any },\r\n    K extends string,\r\n    >(\r\n    props: Props,\r\n    keys: K[]\r\n): { numberState: { [k in K]: Exclude<Props[k], string> } } {\r\n\r\n    const state = reactive((() => {\r\n        const ret = {} as Record<string, number | undefined>\r\n        keys.forEach(key => {\r\n            ret[key] = toNumber(props[key])\r\n        })\r\n        return ret\r\n    })())\r\n\r\n    keys.forEach(key => {\r\n        watch(() => props[key], val => state[key] = toNumber(val))\r\n    })\r\n\r\n    return {\r\n        numberState: state as any,\r\n    }\r\n}\r\n\r\n/*const {numberState} = useNumber({\r\n    noField: 11,\r\n    level: 1,\r\n    age: 2 as number | undefined,\r\n    limit: '2' as string | number | undefined,\r\n}, [\r\n    'level',\r\n    'age',\r\n    'limit',\r\n])\r\n\r\nnumberState.level.toFixed(0)\r\nnumberState.age.toFixed(0)\r\nnumberState.limit.toFixed(0)*/\r\n\r\n\r\n","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {computed, PropType, ref} from 'vue';\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {$$notice} from \"../notice-service\";\r\nimport {PlSelectOption, SelectOption} from \"./select-option\";\r\nimport {PlScroll} from \"../scroll/scroll\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlSelectPanel = designComponent({\r\n    name: 'pl-select-panel',\r\n    props: {\r\n        modelValue: {type: [String, Number, Array]},                     // 双向绑定值\r\n\r\n        multiple: {type: Boolean},                                      // 是否多选\r\n        multipleMaxLimit: {type: [Number, String]},                     // 多选最多选择个数\r\n        multipleMinLimit: {type: [Number, String]},                     // 多选最少选择个数\r\n\r\n        noMatchText: {type: String, default: '暂无匹配数据'},             // 筛选无数据时展示的文本\r\n        noDataText: {type: String, default: '暂无数据'},                 // 无数据时显示的文本\r\n        filterMethod: {type: Function as PropType<(option: { val: string | number, label: string | number, disabled?: boolean }) => boolean>},// 筛选过滤函数\r\n        content: {type: [Object, Function]},                            // 内容虚拟dom或者渲染函数\r\n        height: {type: Number},                                         // 面板高度，超过会显示自定义滚动条\r\n\r\n        showDebug: {type: Boolean},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number | string | string[]) => true,\r\n        onClick: (option: SelectOption) => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {propsState} = useProps(props, {\r\n            multipleMaxLimit: useProps.NUMBER,\r\n            multipleMinLimit: useProps.NUMBER,\r\n        })\r\n\r\n        /*插槽*/\r\n        const {slots} = useSlots()\r\n        /*组件引用*/\r\n        const {refs} = useRefs({scroll: PlScroll})\r\n        /*收集的 select-option 子组件*/\r\n        const items = SelectPanelCollector.parent()\r\n        /*筛选的出有效的 select-option 子组件*/\r\n        const options = computed(() => items.filter(i => !i.props.group))\r\n        /*当前显示的select-option*/\r\n        const showOptions = computed(() => options.value.filter(o => utils.isShow(o.props)))\r\n        /*当前高亮的option.props.val*/\r\n        const current = ref(null as null | SelectOption)\r\n        /*双向绑定值*/\r\n        const model = useModel(() => props.modelValue as number | string | string[], emit.onUpdateModelValue)\r\n\r\n        const classes = computed(() => [\r\n            'pl-select-panel',\r\n            {\r\n                'pl-select-panel-multiple': props.multiple,\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {!!props.height && (style.height = unit(props.height))})\r\n\r\n        const utils = {\r\n            /**\r\n             * 用于option判断当前是否已经被选中\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:23\r\n             */\r\n            isSelected: (optionProps: { label: string | number, val: string | number, disabled?: boolean }) => {\r\n                if (!model.value) return false\r\n                if (!props.multiple) {\r\n                    return (model.value as string) == optionProps.val\r\n                } else {\r\n                    return (model.value as string[]).indexOf(optionProps.val! as string) > -1\r\n                }\r\n            },\r\n            isShow: (optionProps: { label: string | number, val: string | number, disabled?: boolean }) => {\r\n                return !props.filterMethod || props.filterMethod(optionProps)\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            /**\r\n             * 处理点击option的动作\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:24\r\n             */\r\n            clickOption: (option: SelectOption) => {\r\n\r\n                if (option.props.disabled) return\r\n\r\n                emit.onClick(option)\r\n\r\n                if (!props.multiple) {\r\n                    model.value = option.props.val\r\n                } else {\r\n                    const newValue: any[] = [...((model.value as string[]) || [])]\r\n                    const index = newValue.indexOf(option.props.val!)\r\n                    if (index > -1) {\r\n                        if (!!propsState.multipleMinLimit && newValue.length <= propsState.multipleMinLimit) {\r\n                            return $$notice.warn(`最少选择 ${propsState.multipleMinLimit} 个选项`)\r\n                        }\r\n                        newValue.splice(index, 1)\r\n                    } else {\r\n                        if (!!propsState.multipleMaxLimit && newValue.length >= propsState.multipleMaxLimit) {\r\n                            return $$notice.warn(`最多选择 ${propsState.multipleMaxLimit} 个选项`)\r\n                        }\r\n                        newValue.push(option.props.val!)\r\n                    }\r\n                    model.value = [...newValue]\r\n                }\r\n            },\r\n        }\r\n\r\n        const methods = {\r\n            /**\r\n             * 高亮上一个元素\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:18\r\n             */\r\n            highlightPrev: () => {\r\n                if (showOptions.value.length === 0) {\r\n                    return\r\n                }\r\n                if (!current.value) {\r\n                    current.value = showOptions.value[showOptions.value.length - 1]\r\n\r\n                    // 滚动到高亮的选项\r\n                    if (!!refs.scroll) {\r\n                        const el = (current.value as any).$el\r\n                        refs.scroll.methods.scrollTop(el.offsetTop, 200)\r\n                    }\r\n                } else {\r\n                    let index = showOptions.value.indexOf(current.value)\r\n                    if (index === 0) {\r\n                        index = showOptions.value.length - 1\r\n                        current.value = showOptions.value[index]\r\n\r\n                        // 滚动到高亮的选项\r\n                        if (!!refs.scroll) {\r\n                            const el = (current.value as any).$el\r\n                            refs.scroll.methods.scrollTop(el.offsetTop, 200)\r\n                        }\r\n                    } else {\r\n                        index--\r\n                        current.value = showOptions.value[index]\r\n\r\n                        // 滚动到高亮的选项\r\n                        if (!!refs.scroll) {\r\n                            const el = (current.value as any).$el\r\n                            const {wrapperScrollTop} = refs.scroll.freezeState\r\n                            if (wrapperScrollTop > el.offsetTop) {\r\n                                refs.scroll.methods.scrollTop(el.offsetTop, 200)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * 高亮下一个元素\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:18\r\n             */\r\n            highlightNext: () => {\r\n                if (showOptions.value.length === 0) {\r\n                    return\r\n                }\r\n                if (!current.value) {\r\n                    current.value = showOptions.value[0]\r\n                } else {\r\n                    let index = showOptions.value.indexOf(current.value)\r\n                    if (index === showOptions.value.length - 1) {\r\n                        index = 0\r\n                        current.value = showOptions.value[index]\r\n\r\n                        // 滚动到高亮的选项\r\n                        if (!!refs.scroll) {\r\n                            refs.scroll.methods.scrollTop(0, 200)\r\n                        }\r\n                    } else {\r\n                        index++\r\n                        current.value = showOptions.value[index]\r\n\r\n                        // 滚动到高亮的选项\r\n                        if (!!refs.scroll) {\r\n                            const el = (current.value as any).$el\r\n                            const {state: {hostHeight}, freezeState: {wrapperScrollTop}} = refs.scroll\r\n                            const scrollTop = el.offsetTop + el.offsetHeight - hostHeight\r\n                            if (scrollTop > 0 && scrollTop > wrapperScrollTop) {\r\n                                refs.scroll.methods.scrollTop(scrollTop, 200)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n            },\r\n            /**\r\n             * 选中当前高亮的元素\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:18\r\n             */\r\n            selectHighlight: () => {\r\n                if (showOptions.value.length === 0) {\r\n                    return\r\n                }\r\n                if (!current.value) {\r\n                    methods.highlightNext()\r\n                }\r\n                if (!!current.value) {\r\n                    handler.clickOption(current.value)\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n                handler,\r\n                methods,\r\n                utils,\r\n                current,\r\n            },\r\n            render: () => {\r\n\r\n                const inner = [\r\n                    (options.value.length === 0 || showOptions.value.length === 0) ? (\r\n                        <div class=\"pl-select-panel-empty-text\">\r\n                            <PlIcon icon=\"el-icon-nodata\"/>\r\n                            {options.value.length === 0 ? props.noDataText : props.noMatchText}\r\n                        </div>\r\n                    ) : null,\r\n                    slots.default(),\r\n                    !!props.content ? ((typeof props.content === \"function\" ? props.content() : props.content)) : null,\r\n                    !!props.showDebug ? (\r\n                        <div class=\"pl-select-panel-debug\">\r\n                            {options.value.map(option => <div>{option.props.label}__{option.props.val}__{option.props.disabled}</div>)}\r\n                        </div>\r\n                    ) : null,\r\n                ].filter(Boolean)\r\n\r\n                const content: any = !!props.height ? (\r\n                    <PlScroll fitHostWidth ref=\"scroll\">\r\n                        {inner}\r\n                    </PlScroll>\r\n                ) : inner\r\n\r\n                return (\r\n                    <div class={classes.value} style={styles.value}>\r\n                        {content}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport const SelectPanelCollector = useCollect(() => ({\r\n    parent: PlSelectPanel,\r\n    child: PlSelectOption,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {PlSelectOption, SelectOption} from './select-option'\r\nimport {computed} from 'vue';\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlSelectPanel} from \"./select-panel\";\r\n\r\nexport const PlSelectGroup = designComponent({\r\n    name: 'pl-select-group',\r\n    props: {\r\n        label: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots(['label'], true)\r\n        const options = (SelectGroupCollector as any).parent() as SelectOption[]\r\n        const panel = PlSelectPanel.use.inject(null)\r\n        const isShow = computed(() => !panel || options.filter((option) => !option.props.group).filter(o => panel.utils.isShow(o.props)).length > 0)\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <>\r\n                        {isShow.value && (slots.label.isExist() || !!props.label) && (\r\n                            <PlSelectOption class=\"pl-select-group\" group label=\"\" val=\"\">\r\n                                <PlIcon icon=\"el-icon-list\"/>\r\n                                {slots.label(props.label)}\r\n                            </PlSelectOption>\r\n                        )}\r\n                        {slots.default()}\r\n                    </>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport const SelectGroupCollector = useCollect(() => ({\r\n    parent: PlSelectGroup,\r\n    child: PlSelectOption,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {SelectPanelCollector} from \"./select-panel\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {computed} from 'vue';\r\nimport {SelectGroupCollector} from \"./select-group\";\r\nimport {SelectCollector} from \"./select\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlCheckbox} from \"../checkbox/checkbox\";\r\n\r\nexport const PlSelectOption = designComponent({\r\n    name: 'pl-select-option',\r\n    props: {\r\n        label: {type: [String, Number], required: true},\r\n        val: {type: [String, Number], required: true},\r\n        icon: {type: String},\r\n        disabled: {type: Boolean},\r\n\r\n        group: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots()\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        SelectCollector.child({injectDefaultValue: null, sort: () => refs.el})\r\n        const group = SelectGroupCollector.child({injectDefaultValue: null})\r\n        const panel = SelectPanelCollector.child({injectDefaultValue: null, sort: () => refs.el})\r\n        const isShow = computed(() => (props.group || !panel || panel.utils.isShow(props)))\r\n        const isSelected = computed(() => !!panel && panel.utils.isSelected(props))\r\n\r\n        const refer = {\r\n            props,\r\n            refs,\r\n        }\r\n\r\n        const classes = useClass(() => [\r\n            'pl-select-option',\r\n            {\r\n                'pl-select-option-disabled': props.disabled,\r\n                'pl-select-option-show': isShow.value,\r\n                'pl-select-option-selected': isSelected.value,\r\n                'pl-select-option-highlight': !!panel && !!panel.current.value && panel.current.value.props === props,\r\n                'pl-select-option-group-child': !!group && !props.group,\r\n            }\r\n        ])\r\n\r\n        const handler = {\r\n            click: () => {\r\n                if (props.group) return\r\n                !!panel && panel.handler.clickOption(refer)\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer,\r\n            render: () => {\r\n                return (\r\n                    <div\r\n                        {...{\r\n                            ref: \"el\",\r\n                            label: props.label,\r\n                            val: props.val,\r\n                            icon: props.icon,\r\n                            class: classes.value,\r\n                            onClick: handler.click,\r\n                        }}>\r\n                        {!!panel && isShow.value && <>\r\n                            {!!panel.props.multiple && !props.group ? <PlCheckbox customReadonly modelValue={isSelected.value} class=\"pl-select-option-checkbox\"/> : null}\r\n                            {!!props.icon && <PlIcon icon={props.icon} class=\"pl-select-option-icon\"/>}\r\n                            {slots.default(props.label)}\r\n                        </>}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport type SelectOption = typeof PlSelectOption.use.class","import {reactive, computed, onBeforeUnmount, ComponentPublicInstance, getCurrentInstance} from 'vue';\r\nimport {useEdit} from \"../../../use/useEdit\";\r\nimport {PopperAgent, SpecificPopperServiceOption} from \"./utils\";\r\n\r\nexport type EditPopperAgent = ReturnType<typeof useEditPopperAgent>\r\n\r\nexport function useEditPopperAgent(\r\n    {\r\n        event: {emit},\r\n        serviceGetter,\r\n        option,\r\n    }: {\r\n        event: { emit: { onBlur: (e: Event) => void, onFocus: (e: Event) => void } },\r\n        serviceGetter: (ins: ComponentPublicInstance) => ((o: SpecificPopperServiceOption) => PopperAgent),\r\n        option: SpecificPopperServiceOption,\r\n    }) {\r\n\r\n    const ctx = getCurrentInstance()!\r\n    const {editComputed} = useEdit()\r\n\r\n    const state = reactive({\r\n        agent: null as null | PopperAgent,\r\n        focusCounter: 0,\r\n    })\r\n\r\n    const isShow = computed(() => !!state.agent && state.agent.isShow)\r\n    const isOpen = computed(() => !!state.agent && state.agent.isOpen)\r\n\r\n    const methods = {\r\n        show: async () => {\r\n            if (!editComputed.value.editable) return\r\n            if (isShow.value) return;\r\n            if (!state.agent) {\r\n                state.agent = await serviceGetter(ctx.proxy!)(option)\r\n            }\r\n            await state.agent.show()\r\n        },\r\n        hide: async () => {\r\n            if (!isShow.value) return\r\n            await state.agent!.hide()\r\n        },\r\n        toggle: async () => {\r\n            isShow.value ? methods.hide() : methods.show()\r\n        }\r\n    }\r\n\r\n    const inputHandler = {\r\n        onClickInput: async () => await methods.toggle(),\r\n        onBlur: async (e: Event) => {\r\n            state.focusCounter--\r\n            if (state.focusCounter === 0) {\r\n                emit.onBlur(e)\r\n                await methods.hide()\r\n            }\r\n        },\r\n        onFocus: (e: Event) => {\r\n            if (state.focusCounter === 0) {\r\n                emit.onFocus(e)\r\n            }\r\n            state.focusCounter = 1\r\n        },\r\n        onEsc: async () => {\r\n            await methods.hide()\r\n        },\r\n        onEnter: async (e: KeyboardEvent) => {\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n            await methods.show()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 当前组件示例销毁的时候，解除与service的绑定关系\r\n     * @author  韦胜健\r\n     * @date    2020/11/27 10:12\r\n     */\r\n    onBeforeUnmount(() => {\r\n        if (!!state.agent) {\r\n            state.agent.destroy()\r\n        }\r\n    })\r\n\r\n    return {\r\n        methods,\r\n        inputHandler,\r\n        state,\r\n        isShow,\r\n        isOpen,\r\n        editComputed,\r\n    }\r\n\r\n}","import {createAgentGetter} from \"../popper/edit/createAgentGetter\";\r\nimport {App} from 'vue';\r\nimport {PlSelectPanel} from \"./select-panel\";\r\n\r\nexport const SelectServiceGetter = createAgentGetter({\r\n    name: 'select',\r\n    render: (attrs) => {\r\n        return <PlSelectPanel {...attrs}/>\r\n    },\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n        sizeEqual: true,\r\n        arrow: false,\r\n    },\r\n    defaultRenderAttrs: {\r\n        async onChange() {\r\n            let renderAttrs: any = this.state.option.serviceOption.renderAttrs\r\n            if (typeof renderAttrs === \"function\") renderAttrs = renderAttrs()\r\n            /*非多选的情况下，默认点击关闭下拉框*/\r\n            if (!renderAttrs.multiple) {\r\n                this.hide()\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            beforeCreate(): void {\r\n                Object.defineProperty(this, '$select', {\r\n                    get() {\r\n                        const service = SelectServiceGetter(this)\r\n                        return service\r\n                    },\r\n                })\r\n            }\r\n        })\r\n    },\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport './select.scss'\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Input from '../input'\r\nimport {PlSelectOption, SelectOption} from \"./select-option\";\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {SelectServiceGetter} from \"./select-service\";\r\nimport {computed, ref} from 'vue';\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {ie} from \"plain-utils/utils/ie\";\r\nimport {handleKeyboard} from \"../keyboard\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {createEventListener} from \"../../utils/createEventListener\";\r\nimport {PlSelectPanel} from \"./select-panel\";\r\nimport {PlInput} from \"../input/input\";\r\nimport {PlInputInnerTags} from \"../input/input-inner-tags\";\r\n\r\nconst Props = {\r\n    ...EditProps,\r\n    ...StyleProps,\r\n\r\n    modelValue: {type: [String, Number, Array]},\r\n    filterable: {type: Boolean, default: true},                     // 是否可以输入筛选\r\n    inputProps: {type: Object},                                     // input组件绑定属性对象\r\n\r\n    multiple: {type: Boolean},                                      // 是否多选\r\n    multipleMaxLimit: {type: Number},                               // 多选最多选择个数\r\n    multipleMinLimit: {type: Number},                               // 多选最少选择个数\r\n    collapseTags: {type: Boolean, default: true},                   // 多选模式下，超过三个选项，其他的将省略显示\r\n\r\n    noMatchText: {type: String, default: '暂无匹配数据'},            // 筛选无数据时展示的文本\r\n    noDataText: {type: String, default: '暂无数据'},                // 无数据时显示的文本\r\n    filterMethod: Function,                                         // 筛选过滤函数\r\n}\r\n\r\nexport const PlSelect = designComponent({\r\n    name: 'pl-select',\r\n    props: {\r\n        ...Props,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: number | string | string[]) => true,\r\n        onClick: (option: SelectOption) => true,\r\n\r\n        onSpace: (e: KeyboardEvent) => true,\r\n        onEnter: (e: KeyboardEvent) => true,\r\n        onUp: (e: KeyboardEvent) => true,\r\n        onDown: (e: KeyboardEvent) => true,\r\n        onEsc: (e: KeyboardEvent) => true,\r\n\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        useStyle()\r\n        const {slots} = useSlots()\r\n        const {refs} = useRefs({input: Input,})\r\n\r\n        /*对 pl-select-panel 的引用*/\r\n        let panel = null as typeof PlSelectPanel.use.class | null\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const model = useModel(() => props.modelValue as number | string | string[] | undefined, event.emit.onUpdateModelValue)\r\n        const filterText = ref(null as string | null)\r\n        const agentState = useEditPopperAgent({\r\n            event,\r\n            serviceGetter: SelectServiceGetter,\r\n            option: {\r\n                reference: () => refs.input as any,\r\n                renderAttrs: () => ({\r\n                    ref: r => panel = r,\r\n                    ...(Object.keys(Props).reduce((ret: any, key) => {\r\n                        ret[key] = (props as any)[key]\r\n                        return ret\r\n                    }, {})),\r\n                    modelValue: model.value,\r\n                    height: popperHeight.value,\r\n                    content: slots.default,\r\n                    filterMethod: utils.filterMethod,\r\n                    onChange: handler.onServiceChange,\r\n                    onClick: event.emit.onClick,\r\n                }),\r\n                popperAttrs: ({\r\n                    onMousedownPopper: () => agentState.state.focusCounter++,\r\n                    onClickPopper: () => refs.input!.methods.focus(),\r\n                    onHide: () => filterText.value = null,\r\n                }),\r\n            },\r\n        })\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            filterMethod: (option: { label?: string, val: string, disabled: boolean }) => {\r\n                if (!!props.filterMethod) return props.filterMethod(filterText.value, option)\r\n                return !!filterText.value && !!filterText.value.trim() ? (!!option.label && option.label.indexOf(filterText.value) > -1) : true\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        /**\r\n         * 收集的option实例\r\n         * @author  韦胜健\r\n         * @date    2020/6/8 11:16\r\n         */\r\n        const items = SelectCollector.parent()\r\n        /**\r\n         * 有效的 pl-select-option\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 10:06\r\n         */\r\n        const formatData = computed(() => items.filter(i => !i.props.group))\r\n        /**\r\n         * popper应该的高度\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 10:06\r\n         */\r\n        const popperHeight = computed(() => formatData.value.length > 6 ? 256 : null)\r\n        /**\r\n         * 显示值\r\n         * @author  韦胜健\r\n         * @date    2020/6/8 11:16\r\n         */\r\n        const displayValue = computed(() => {\r\n            if (!props.multiple) {\r\n                for (let i = 0; i < formatData.value.length; i++) {\r\n                    const item = formatData.value[i];\r\n                    if (item.props.val === model.value) {\r\n                        return item.props.label\r\n                    }\r\n                }\r\n                return model.value\r\n            } else {\r\n                let strings: string[] = []\r\n                if (!!model.value && Array.isArray(model.value)) {\r\n                    for (let i = 0; i < formatData.value.length; i++) {\r\n                        const item = formatData.value[i];\r\n                        if (model.value.indexOf(item.props.val! as string) > -1) {\r\n                            strings.push(item.props.label! as string)\r\n                        }\r\n                    }\r\n                }\r\n                return strings.join('').trim()\r\n            }\r\n        })\r\n\r\n        /**\r\n         * 给input组件传递的属性\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 11:21\r\n         */\r\n        const inputProps = computed(() => Object.assign({}, props.inputProps || {}))\r\n\r\n        /**\r\n         * 当前显示的空值占位符\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 11:21\r\n         */\r\n        const placeholderValue = computed(() => (agentState.isShow.value ? displayValue.value || inputProps.value.placeholder : inputProps.value.placeholder) || '')\r\n\r\n        /**\r\n         * 给input组件绑定的目标对象\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 11:21\r\n         */\r\n        const inputBinding = computed(() => {\r\n            /*onEnter不要了，只要剩余的时间监听器*/\r\n            const {onEnter, ...inputHandler} = agentState.inputHandler\r\n\r\n            return {\r\n                ref: 'input',\r\n                class: [\r\n                    'pl-select',\r\n                    {\r\n                        'pl-input-tags': !!props.multiple,\r\n                        'pl-select-input-show': agentState.isShow.value,\r\n                    }\r\n                ],\r\n\r\n                modelValue: (props.filterable && agentState.isShow.value) ? filterText.value! : displayValue.value as string,\r\n                placeValue: displayValue.value as string,\r\n                inputReadonly: !props.filterable,\r\n                placeholder: placeholderValue.value,\r\n                suffixIcon: 'el-icon-arrow-down',\r\n                clearIcon: true,\r\n                isFocus: agentState.state.focusCounter > 0,\r\n                clearHandler: handler.onInputClear,\r\n\r\n                ...inputHandler,\r\n                onChange: handler.onInputChange,\r\n                onKeydown: handler.onInputKeydown,\r\n\r\n                ...inputProps.value,\r\n            }\r\n        })\r\n\r\n        const multipleTags = computed(() => {\r\n            if (!model.value) {\r\n                return []\r\n            }\r\n            if (!Array.isArray(model.value)) {\r\n                console.error('The value of multiple select should be array')\r\n                return []\r\n            }\r\n            if (!formatData.value || formatData.value.length === 0) return []\r\n            return formatData.value.filter(option => (model.value as any[]).indexOf(option.props.val!) > -1)\r\n        })\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            onInputKeydown: handleKeyboard({\r\n                space: (e) => {\r\n                    if (props.multiple && agentState.isShow.value) {\r\n                        e.stopPropagation()\r\n                        e.preventDefault()\r\n                        panel!.methods.selectHighlight()\r\n                    }\r\n                    event.emit.onSpace(e)\r\n                },\r\n                enter: (e) => {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                    if (agentState.isShow.value) {\r\n                        panel!.methods.selectHighlight()\r\n                    } else {\r\n                        agentState.methods.show()\r\n                    }\r\n                },\r\n                up: (e) => {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                    if (!!agentState.isShow.value) {\r\n                        panel!.methods.highlightPrev()\r\n                    }\r\n                },\r\n                down: (e) => {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                    if (!!agentState.isShow.value) {\r\n                        panel!.methods.highlightNext()\r\n                    }\r\n                },\r\n                esc: (e) => {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                    if (!!agentState.isShow.value) {\r\n                        agentState.methods.hide()\r\n                    }\r\n                },\r\n            }),\r\n            onServiceChange: (val: any) => model.value = val,\r\n            onInputClear: () => model.value = undefined,\r\n            onInputChange: (val: string | null) => {\r\n                filterText.value = val\r\n                if (!agentState.isShow.value && ie) {\r\n                    agentState.methods.show()\r\n                }\r\n            },\r\n            onClickItemCloseIcon: (item: SelectOption, index: number) => {\r\n                index = (model.value as any[]).indexOf(item.props.val!)\r\n                if (index > -1) {\r\n                    const value = [...(model.value as any[])]\r\n                    value.splice(index, 1)\r\n                    model.value = [...value]\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <PlInput {...inputBinding.value} v-slots={{\r\n                    hidden: slots.default,\r\n                    default: !props.multiple ? null : () => (\r\n                        <PlInputInnerTags\r\n                            data={multipleTags.value}\r\n                            collapseTags={props.collapseTags}\r\n                            v-slots={{\r\n                                default: ({item, index}: { item: SelectOption, index: number }) => [\r\n                                    <span>{item.props.label}</span>,\r\n                                    <PlIcon icon=\"el-icon-close\" {...createEventListener({onClick: () => handler.onClickItemCloseIcon(item, index)})}/>\r\n                                ]\r\n                            }}\r\n                        />\r\n                    )\r\n                }}/>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const SelectCollector = useCollect(() => ({\r\n    parent: PlSelect,\r\n    child: PlSelectOption,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {computed, nextTick, ref, watch, PropType} from 'vue';\r\nimport './pagination.scss'\r\nimport {useNumber} from \"../../use/useNumber\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlSelect} from \"../select/select\";\r\nimport {PlSelectOption} from \"../select/select-option\";\r\nimport {PlNumber} from \"../number/number\";\r\nimport {PlLoading} from \"../loading/loading\";\r\n\r\nconst SizesWidth = {\r\n    large: 120,\r\n    normal: 105,\r\n    mini: 90,\r\n}\r\n\r\nexport const PlPagination = designComponent({\r\n    name: 'pl-pagination',\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n\r\n        pageSize: {type: [Number, String], required: true},                                     // 页大小\r\n        total: {type: [Number, String]},                                                        // 总共条目数\r\n        totalPage: {type: [Number, String]},                                                    // 总页数，与 total/pageSize 作用类似，用来确定总页数；\r\n        pagerCount: {type: [Number, String], default: 7},                                       // 页码按钮数量，当总页数超过时会折叠\r\n        currentPage: {type: [Number, String]},                                                  // 当前页\r\n\r\n        layout: {type: String, default: 'sizes,jumper,prev,pager,next,loading,blank,total,slot'},// 组件布局\r\n        pageSizes: {type: Array as PropType<number[]>, default: [10, 20, 50, 100]},             // 页大小下拉选项数组\r\n        prevText: {type: String},                                                               // 上一页按钮替换文本\r\n        nextText: {type: String},                                                               // 下一页按钮替换文本\r\n\r\n        jumperNumberWidth: {type: Number},                                                      // 跳转页的数字输入框宽度\r\n    },\r\n    emits: {\r\n        onJump: (val: number) => true,\r\n        onPrev: () => true,\r\n        onNext: () => true,\r\n        onCurrentChange: (val: number) => true,\r\n        onSizeChange: (val: number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle()\r\n        const {slots} = useSlots([], true)\r\n\r\n        const jumperValue = ref(null as number | null)\r\n        watch(() => props.currentPage, (val) => jumperValue.value = val == null ? 1 : Number(val), {immediate: true})\r\n\r\n        const classes = computed(() => [\r\n            'pl-pagination',\r\n            `pl-pagination-size-${styleComputed.value.size}`,\r\n            `pl-pagination-shape-${styleComputed.value.shape}`,\r\n            {\r\n                'pl-pagination-disabled': editComputed.value.disabled,\r\n            },\r\n        ])\r\n\r\n        const {numberState} = useNumber(props, [\r\n            'pageSize',\r\n            'total',\r\n            'totalPage',\r\n            'pagerCount',\r\n            'currentPage',\r\n        ])\r\n\r\n        const jumperNumberWidth = computed(() => {\r\n            if (!!props.jumperNumberWidth) {\r\n                return props.jumperNumberWidth\r\n            } else {\r\n                return {\r\n                    large: 78,\r\n                    normal: 64,\r\n                    mini: 56,\r\n                }[styleComputed.value.size]\r\n            }\r\n        })\r\n\r\n        const totalPageData = computed(() => {\r\n            if (numberState.totalPage != null) {\r\n                return numberState.totalPage\r\n            } else if (numberState.pageSize != null && numberState.total != null) {\r\n                return Math.ceil(numberState.total / numberState.pageSize)\r\n            } else {\r\n                return 0\r\n            }\r\n        })\r\n\r\n        const pageInfo = computed(() => {\r\n            let currentPage = numberState.currentPage\r\n            let pagerCount = numberState.pagerCount\r\n            let totalPage = Number(totalPageData.value)\r\n            const midPagerCount = (pagerCount - 1) / 2                      // 从0开始计算中间索引\r\n\r\n            let showPrevMore = false\r\n            let showNextMore = false\r\n\r\n            if (totalPage > pagerCount) {\r\n                if (currentPage! > pagerCount - midPagerCount) {\r\n                    showPrevMore = true\r\n                }\r\n                if (currentPage! < totalPage - midPagerCount) {\r\n                    showNextMore = true\r\n                }\r\n            }\r\n\r\n            return {\r\n                currentPage,                // 当前页\r\n                pagerCount,                 // 页码按钮数量，包括左折叠左边的一个按钮以及右折叠右边的一个按钮\r\n                totalPage,                  // 总页数\r\n                midPagerCount,              // 中间页码按钮位置索引\r\n                showPrevMore,               // 是否显示左折叠\r\n                showNextMore,               // 是否显示右折叠\r\n            }\r\n        })\r\n\r\n        const pagers = computed(() => {\r\n            const {\r\n                currentPage,\r\n                pagerCount,\r\n                totalPage,\r\n                showPrevMore,\r\n                showNextMore\r\n            } = pageInfo.value\r\n\r\n            const array: number[] = []\r\n\r\n            if (showPrevMore && !showNextMore) {\r\n                const startPage = totalPage - (pagerCount - 2);\r\n                for (let i = startPage; i < totalPage; i++) {\r\n                    array.push(i);\r\n                }\r\n            } else if (!showPrevMore && showNextMore) {\r\n                for (let i = 2; i < pagerCount; i++) {\r\n                    array.push(i);\r\n                }\r\n            } else if (showPrevMore && showNextMore) {\r\n                const offset = Math.floor(pagerCount / 2) - 1;\r\n                for (let i = currentPage! - offset; i <= currentPage! + offset; i++) {\r\n                    array.push(i);\r\n                }\r\n            } else {\r\n                for (let i = 2; i < totalPage; i++) {\r\n                    array.push(i);\r\n                }\r\n            }\r\n\r\n            return array\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 获取页码按钮的 class\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 12:07\r\n             */\r\n            getPagerButtonClass(page: string | number) {\r\n                return [\r\n                    'pl-pagination-pager-button',\r\n                    {\r\n                        'pl-pagination-pager-button-active': page === pageInfo.value.currentPage\r\n                    },\r\n                ]\r\n            },\r\n            /**\r\n             * 跳转到指定页\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 14:02\r\n             */\r\n            changeCurrent(val: number) {\r\n                if (!editComputed.value.editable) return;\r\n                emit.onCurrentChange(val)\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            /**\r\n             * 跳转到上一页\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 14:08\r\n             */\r\n            onPrev() {\r\n                if (!editComputed.value.editable) return;\r\n                if (pageInfo.value.currentPage === 1) {\r\n                    return\r\n                }\r\n                utils.changeCurrent(pageInfo.value.currentPage! - 1)\r\n                emit.onPrev()\r\n            },\r\n            /**\r\n             * 跳转到下一页\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 14:09\r\n             */\r\n            onNext() {\r\n                if (!editComputed.value.editable) return;\r\n                if (pageInfo.value.totalPage != null && pageInfo.value.currentPage == pageInfo.value.totalPage) {\r\n                    return\r\n                }\r\n                utils.changeCurrent(pageInfo.value.currentPage! + 1)\r\n                emit.onNext()\r\n            },\r\n            /**\r\n             * 跳转到指定页\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 14:29\r\n             */\r\n            async onJump() {\r\n                if (!editComputed.value.editable) return;\r\n                await nextTick()\r\n                let val = jumperValue.value\r\n                if (!val && val !== 0) {\r\n                    val = 1\r\n                    await nextTick()\r\n                    jumperValue.value = val\r\n                }\r\n                if (val > pageInfo.value.totalPage) {\r\n                    val = pageInfo.value.totalPage\r\n                    await nextTick()\r\n                    jumperValue.value = val\r\n                }\r\n                emit.onJump(val)\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                const sizes = (\r\n                    <PlSelect\r\n                        class=\"pl-pagination-sizes\"\r\n                        modelValue={numberState.pageSize}\r\n\r\n                        loading={false}\r\n                        readonly={editComputed.value.readonly || editComputed.value.loading!}\r\n                        filterable={false}\r\n                        inputProps={{width: SizesWidth[styleComputed.value.size], clearIcon: false}}\r\n                        {...{onChange: emit.onSizeChange}}>\r\n                        {(props.pageSizes || []).map((item) => (\r\n                            <PlSelectOption label={`${item} 条/页`} val={item} key={item}/>\r\n                        ))}\r\n                    </PlSelect>\r\n                )\r\n\r\n                const jumper = (\r\n                    <div class=\"pl-pagination-jumper\">\r\n                        <span>前往</span>\r\n                        <PlNumber inputProps={{width: jumperNumberWidth.value}}\r\n                                  readonly={editComputed.value.readonly || editComputed.value.loading!}\r\n                                  hideButton\r\n                                  loading={false}\r\n                                  v-model={jumperValue.value}\r\n                                  min={0}\r\n                                  onEnter={handler.onJump}/>\r\n                        <span>页</span>\r\n                    </div>\r\n                )\r\n\r\n                const prev = (\r\n                    <div class=\"pl-pagination-prev pl-pagination-pager-button\" onClick={handler.onPrev}>\r\n                        {!!props.prevText ? props.prevText : <PlIcon icon=\"el-icon-arrow-left\"/>}\r\n                    </div>\r\n                )\r\n                const next = (\r\n                    <div class=\"pl-pagination-next pl-pagination-pager-button\" onClick={handler.onNext}>\r\n                        {!!props.nextText ? props.nextText : <PlIcon icon=\"el-icon-arrow-right\"/>}\r\n                    </div>\r\n                )\r\n\r\n                const pager = (\r\n                    <ul class=\"pl-pagination-pager\">\r\n                        {pageInfo.value.totalPage > 0 && <li key=\"first\" class={utils.getPagerButtonClass(1)} onClick={() => utils.changeCurrent(1)}>1</li>}\r\n                        {pageInfo.value.showPrevMore && <li key=\"prev-more\" class={utils.getPagerButtonClass('prev')}>\r\n                            <PlIcon icon=\"el-icon-more\"/>\r\n                        </li>}\r\n                        {pagers.value.map((page, index) => <li class={utils.getPagerButtonClass(page)} key={index} onClick={() => utils.changeCurrent(page)}>{page}</li>)}\r\n                        {pageInfo.value.showNextMore && <li key=\"prev-more\" class={utils.getPagerButtonClass('next')}>\r\n                            <PlIcon icon=\"el-icon-more\"/>\r\n                        </li>}\r\n                        {pageInfo.value.totalPage > 1 && <li key=\"last\" class={utils.getPagerButtonClass(pageInfo.value.totalPage)} onClick={() => utils.changeCurrent(pageInfo.value.totalPage)}>{pageInfo.value.totalPage}</li>}\r\n                    </ul>\r\n                )\r\n\r\n                const blank = (<div class=\"pl-pagination-blank\"></div>)\r\n                const total = props.total == null ? null : (<div class=\"pl-pagination-total\"><span>总共 {props.total} 条记录</span></div>)\r\n                const slot = !slots.default.isExist() ? null : (<div class=\"pl-pagination-slot\">{slots.default()}</div>)\r\n                const loading = !editComputed.value.loading ? null : (\r\n                    <div class=\"pl-pagination-loading\">\r\n                        <PlLoading type=\"beta\"/>\r\n                    </div>\r\n                )\r\n\r\n                let parts = {sizes, jumper, prev, pager, next, loading, blank, total, slot,}\r\n\r\n                let layout = props.layout.replace(/\\s+/g, '').split(',').reduce((ret: any[], item) => {\r\n                    let part = (parts as any)[item]\r\n                    if (!!part) {\r\n                        ret.push(part)\r\n                    }\r\n                    return ret\r\n                }, [])\r\n\r\n                return (\r\n                    <div class={classes.value}>\r\n                        {layout}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {Ref} from 'vue';\r\n\r\n/*节点状态类型*/\r\nexport enum StepStatus {\r\n    wait = 'wait',\r\n    finish = 'finish',\r\n    process = 'process',\r\n    error = 'error',\r\n}\r\n\r\nexport const StepUtils = {\r\n    getCurrentIndex: (current: any, items: any[]) => {\r\n        if (typeof current === \"number\") {\r\n            return current\r\n        } else {\r\n            for (let i = 0; i < items.length; i++) {\r\n                const item = items[i];\r\n                if (item.val === current) return i\r\n            }\r\n        }\r\n    },\r\n    getStepStatus: (\r\n        group: { currentStatus: StepStatus, currentIndex: Ref<number> },\r\n        child: { status: StepStatus, index: Ref<number> }\r\n    ): StepStatus | null => {\r\n\r\n        const {currentStatus, currentIndex} = group\r\n        const {status, index} = child\r\n\r\n        if (!!status) return status as StepStatus\r\n        if (currentIndex.value > index.value) {\r\n            return StepStatus.finish\r\n        } else if (currentIndex.value === index.value) {\r\n            if (!!currentStatus) {\r\n                return currentStatus as StepStatus\r\n            } else {\r\n                return StepStatus.process\r\n            }\r\n        } else if (currentIndex.value < index.value) {\r\n            return StepStatus.wait\r\n        } else {\r\n            return null\r\n        }\r\n    }\r\n}","import {PlPagination} from './pagination'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlPagination)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {computed} from 'vue';\r\nimport './badge.scss'\r\n\r\nexport const PlBadge = designComponent({\r\n    name: 'pl-badge',\r\n    props: {\r\n        data: {},                                       //显示的数据\r\n        bottom: {type: Boolean},                        //标记纵向是否在底部\r\n        start: {type: Boolean},                         //标记横向是否在右边\r\n        status: {type: String, default: 'error'},       //标记背景色\r\n        dot: {type: Boolean,},                          //标记是否只是一个小圆点\r\n        max: {type: Number,},                           //标记显示文本最大值\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots(['badge'])\r\n        const contentClass = computed(() => [\r\n            'pl-badge-content',\r\n            {\r\n                'pl-badge-content-dot': !!props.dot,\r\n            },\r\n            `pl-badge-content-${!!props.bottom ? 'bottom' : 'top'}`,\r\n            `pl-badge-content-${!!props.start ? 'start' : 'end'}`,\r\n            `pl-badge-content-status-${props.status}`,\r\n        ])\r\n        const showValue = computed(() => {\r\n            if (props.data == null) return null\r\n            if (props.max != null && (Number(props.data)) > props.max) return props.max + '+'\r\n            return props.data\r\n        })\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-badge\">\r\n                    {slots.default()}\r\n                    <div class={contentClass.value}>\r\n                        {slots.badge(props.data != null ? <span>{showValue.value}</span> : null)}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlBadge} from './badge'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlBadge)","import {designComponent} from \"../../../use/designComponent\";\r\nimport {useSlots} from \"../../../use/useSlots\";\r\nimport {computed} from 'vue';\r\nimport {StepUtils} from \"../step.utils\";\r\nimport {useCollect} from \"../../../use/useCollect\";\r\nimport './step.scss'\r\nimport {PlStep} from \"./step\";\r\n\r\nexport const PlStepGroup = designComponent({\r\n    name: 'pl-step-group',\r\n    props: {\r\n        current: {type: [String, Number]},                              // 双向绑定，指定当前步骤条的步骤，在step组件中，可以通过 status 属性覆盖状态\r\n        currentStatus: {type: String},                                  // 当前激活节点的状态\r\n        type: {type: String, default: 'normal'},                        // 步骤条类型，normal、navigation\r\n        vertical: {type: Boolean},                                      // 步骤条是否为纵向\r\n        titleAlignBottom: {type: Boolean},                              // 默认情况下，标题会放在图标右侧，设置该属性可以改为放在图标下面\r\n        mini: {type: Boolean, default: true},                           // 迷你步骤条\r\n        dotIcon: {type: Boolean},                                       // 图标是否采用小圆点替代\r\n    },\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots()\r\n\r\n        const items = StepCollector.parent() as any[]\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const isTitleAlignBottom = computed(() => {\r\n            return props.titleAlignBottom || props.vertical\r\n        })\r\n        const classes = computed(() => [\r\n            'pl-step-group',\r\n            `pl-step-group-${props.vertical ? 'vertical' : 'horizontal'}`,\r\n            {\r\n                'pl-step-group-title-align-bottom': isTitleAlignBottom.value,\r\n                'pl-step-group-mini': props.mini,\r\n                'pl-step-group-dot-icon': props.dotIcon,\r\n            },\r\n        ])\r\n        const currentIndex = computed(() => StepUtils.getCurrentIndex(props.current, items)) as { value: number }\r\n\r\n        return {\r\n            refer: {\r\n                items,\r\n                currentIndex,\r\n                props,\r\n                isTitleAlignBottom,\r\n            },\r\n            render: () => (\r\n                <div class={classes.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const StepCollector = useCollect(() => ({\r\n    parent: PlStepGroup,\r\n    child: PlStep,\r\n}))","import {designComponent} from \"../../../use/designComponent\";\r\nimport {useSlots} from \"../../../use/useSlots\";\r\nimport {computed, getCurrentInstance, Ref} from 'vue';\r\nimport {StepStatus, StepUtils} from \"../step.utils\";\r\nimport {StepCollector} from \"./step-group\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport {PlIcon} from \"../../icon/icon\";\r\nimport {PlLoading} from \"../../loading/loading\";\r\n\r\nexport const PlStep = designComponent({\r\n    name: 'pl-step',\r\n    props: {\r\n        icon: {type: String},\r\n        status: {type: String},\r\n        title: {type: String},\r\n        content: {type: String},\r\n        val: {type: String},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement\r\n        })\r\n        const {slots} = useSlots(['title', 'content'])\r\n        const stepGroup = StepCollector.child({sort: () => refs.el})\r\n        const ctx = getCurrentInstance()!\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const index = computed(() => stepGroup.items.indexOf(ctx.proxy))\r\n\r\n        const icon = computed(() => {\r\n            if (!!props.icon) return props.icon\r\n            return null\r\n        })\r\n\r\n        const isLast = computed(() => {\r\n            return index.value === stepGroup.items.length - 1\r\n        })\r\n\r\n        const currentStatus: Ref<StepStatus | null> = computed(() => {\r\n            return StepUtils.getStepStatus({\r\n                currentIndex: stepGroup.currentIndex as any,\r\n                currentStatus: stepGroup.props.currentStatus as any\r\n            }, {\r\n                status: props.status as any,\r\n                index\r\n            })\r\n        })\r\n\r\n\r\n        const classes = computed(() => [\r\n            'pl-step',\r\n            `pl-step-status-${currentStatus.value}`,\r\n            {\r\n                'pl-step-has-icon': !!icon.value,\r\n                'pl-step-last': isLast.value,\r\n            }\r\n        ])\r\n\r\n        return {\r\n            refer: {},\r\n            render: () => (\r\n                <div class={classes.value} onClick={emit.onClick} ref=\"el\">\r\n                    <div class=\"pl-step-head\">\r\n                        {!stepGroup.props.vertical && (stepGroup.isTitleAlignBottom.value || isLast.value) && <span class=\"pl-step-divider pl-step-divider-prev\"/>}\r\n                        <span class=\"pl-step-icon\">\r\n                        {\r\n                            !!icon.value ?\r\n                                (currentStatus.value !== 'process' ? <PlIcon icon={icon.value}/> : <PlLoading type=\"delta\"/>)\r\n                                :\r\n                                (\r\n                                    !!stepGroup.props.dotIcon ?\r\n                                        (<span class=\"pl-step-dot\"/>)\r\n                                        :\r\n                                        (\r\n                                            <span class=\"pl-step-number\">\r\n                                                {currentStatus.value === StepStatus.finish ?\r\n                                                    <PlIcon icon=\"el-icon-check\"/>\r\n                                                    :\r\n                                                    (currentStatus.value === StepStatus.error ?\r\n                                                            <PlIcon icon=\"el-icon-close\"/>\r\n                                                            :\r\n                                                            <span>{index.value + 1}</span>\r\n                                                    )\r\n                                                }\r\n                                            </span>\r\n                                        )\r\n                                )\r\n                        }\r\n                    </span>\r\n                        {!stepGroup.isTitleAlignBottom.value && (\r\n                            <span class=\"pl-step-title\">\r\n                            {slots.title(props.title)}\r\n                        </span>\r\n                        )}\r\n                        {(stepGroup.isTitleAlignBottom.value || !isLast.value) && <span class=\"pl-step-divider pl-step-divider-next\"/>}\r\n                    </div>\r\n                    <div class=\"pl-step-body\">\r\n                        {!stepGroup.isTitleAlignBottom.value ?\r\n                            <span class=\"pl-step-icon\"/>\r\n                            :\r\n                            <span class=\"pl-step-title\">\r\n                            {slots.title(props.title)}\r\n                        </span>\r\n                        }\r\n                        <span class=\"pl-step-content\">\r\n                        {slots.content(props.content)}\r\n                    </span>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlStep} from \"./step/step\";\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlStep)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlStepGroup} from \"../step/step/step-group\";\r\n\r\nexport default createComponentPlugin(PlStepGroup)","import {designComponent} from \"../../../use/designComponent\";\r\nimport {useSlots} from \"../../../use/useSlots\";\r\nimport {computed} from 'vue';\r\nimport {StepUtils} from \"../step.utils\";\r\nimport {useCollect} from \"../../../use/useCollect\";\r\nimport {PlArrowStep} from \"./arrow-step\";\r\nimport './arrow-step.scss'\r\n\r\nexport const PlArrowStepGroup = designComponent({\r\n    name: 'pl-arrow-step-group',\r\n    props: {\r\n        current: {},\r\n        currentStatus: {type: String},\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        const items = ArrowStepCollector.parent() as any[]\r\n        const currentIndex = computed(() => StepUtils.getCurrentIndex(props.current, items)) as { value: number }\r\n        return {\r\n            refer: {\r\n                props,\r\n                currentIndex,\r\n                items,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-arrow-step-group\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const ArrowStepCollector = useCollect(() => ({\r\n    parent: PlArrowStepGroup,\r\n    child: PlArrowStep,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {computed, onMounted} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport './triangle.scss'\r\n\r\nconst DirectionMap = {\r\n    top: 'bottom',\r\n    bottom: 'top',\r\n    left: 'right',\r\n    right: 'left',\r\n}\r\n\r\nfunction uppercaseFirstLetter(name: string): string {\r\n    if (!name) return name\r\n    return name.charAt(0).toUpperCase() + name.slice(1)\r\n}\r\n\r\nexport const PlTriangle = designComponent({\r\n    name: 'pl-triangle',\r\n    props: {\r\n        direction: {type: String, default: 'top'},\r\n        half: {type: String},\r\n        size: {type: [Number, String], default: 20},\r\n    },\r\n    setup({props}) {\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        const {propsState} = useProps(props, {\r\n            size: useProps.NUMBER,\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-triangle',\r\n            `pl-triangle-direction-${props.direction}`,\r\n            {\r\n                [`pl-triangle-half-${props.half}`]: !!props.half\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            if (!props.half) {\r\n                return style\r\n            }\r\n            if (props.direction === 'top' || props.direction === 'bottom') {\r\n                style.width = unit(propsState.size)\r\n            } else {\r\n                style.height = unit(propsState.size)\r\n            }\r\n            return style\r\n        })\r\n\r\n        const targetStyles = useStyles((style: any) => {\r\n\r\n            style.border = `solid transparent ${unit(propsState.size)}`\r\n            style[`border${uppercaseFirstLetter(props.direction)}Width`] = '0'\r\n            style[`border${uppercaseFirstLetter((DirectionMap as any)[props.direction])}Color`] = 'currentColor'\r\n\r\n            if (!!props.half) {\r\n                if (props.direction === 'top' || props.direction === 'bottom') {\r\n                    props.half === 'end' && (style.right = unit(propsState.size))\r\n                } else {\r\n                    props.half === 'end' && (style.bottom = unit(propsState.size))\r\n                }\r\n            }\r\n\r\n            return style\r\n        })\r\n\r\n        if (propsState.size == null) {\r\n            onMounted(() => {\r\n                propsState.size = (refs.el!.parentNode as HTMLDivElement).offsetHeight / 2\r\n            })\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                propsState.size == null ? <span ref=\"el\" style=\"display:none\"/> : (\r\n                    <div class={classes.value} style={styles.value} ref=\"el\">\r\n                        <div class=\"pl-triangle-target\" style={targetStyles.value}/>\r\n                    </div>\r\n                )\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {getCurrentInstance, computed, Ref} from 'vue';\r\nimport {useSlots} from \"../../../use/useSlots\";\r\nimport {StepStatus, StepUtils} from \"../step.utils\";\r\nimport {ArrowStepCollector} from \"./arrow-step-group\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport {PlTriangle} from \"../../triangle/triangle\";\r\n\r\nexport const PlArrowStep = designComponent({\r\n    name: 'pl-arrow-step',\r\n    props: {\r\n        status: {type: String},\r\n        title: {type: String},\r\n        val: {type: String},\r\n        hideIndex: {type: Boolean},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const ctx = getCurrentInstance()!\r\n        const {slots} = useSlots(['title'])\r\n        const {refs} = useRefs({el: HTMLDivElement})\r\n        const stepGroup = ArrowStepCollector.child({sort: () => refs.el})\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const index = computed(() => {\r\n            return stepGroup.items.indexOf(ctx.proxy)\r\n        }) as { value: number }\r\n\r\n        const isLast = computed(() => {\r\n            return index.value === stepGroup.items.length - 1\r\n        })\r\n\r\n        const isFirst = computed(() => {\r\n            return index.value === 0\r\n        })\r\n\r\n        const currentStatus: Ref<StepStatus | null> = computed(() => {\r\n            return StepUtils.getStepStatus({\r\n                currentIndex: stepGroup.currentIndex as any,\r\n                currentStatus: stepGroup.props.currentStatus as any\r\n            }, {\r\n                status: props.status as any,\r\n                index: index as any\r\n            })\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-arrow-step',\r\n            `pl-arrow-step-status-${currentStatus.value}`,\r\n        ])\r\n\r\n        return {\r\n            refer: {},\r\n            render: () => (\r\n                index.value != null ? (\r\n                    <div class={classes.value} onClick={emit.onClick} ref=\"el\">\r\n                        <div class=\"pl-arrow-step-content\">\r\n                            {!props.hideIndex && <span class=\"pl-arrow-step-sequence\">{index.value + 1}. &nbsp;</span>}\r\n                            <span>{slots.default(props.title)}</span>\r\n                        </div>\r\n                        {!isLast.value ? <PlTriangle direction=\"right\" size={null as any}/> : null}\r\n                        {!isFirst.value ? [\r\n                            <PlTriangle direction=\"bottom\" half=\"start\" size={null as any}/>,\r\n                            <PlTriangle direction=\"top\" half=\"start\" size={null as any}/>\r\n                        ] : null}\r\n                    </div>\r\n                ) : <div/>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlArrowStep} from \"../step/arrow-step/arrow-step\";\r\n\r\nexport default createComponentPlugin(PlArrowStep)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlArrowStepGroup} from \"../step/arrow-step/arrow-step-group\";\r\n\r\nexport default createComponentPlugin(PlArrowStepGroup)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive} from 'vue';\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {PlPopper} from \"../popper/popper\";\r\n\r\nexport const PlDropdown = designComponent({\r\n    name: 'pl-dropdown',\r\n    props: {\r\n        modelValue: {type: Boolean},\r\n        disabledHideOnClickOption: {type: Boolean},                     // 禁用点击 dropdown-option 之后关闭 dropdown\r\n    },\r\n    provideRefer: true,\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots([\r\n            'popper'\r\n        ])\r\n        const {scopedSlots} = useScopedSlots({\r\n            reference: {open: Boolean}\r\n        })\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n\r\n        const state = reactive({})\r\n\r\n        const handler = {\r\n            clickDropdownOption: (e: MouseEvent) => {\r\n                if (!props.disabledHideOnClickOption) {\r\n                    model.value = false\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                state,\r\n                handler,\r\n            },\r\n            render: () => (\r\n                <PlPopper\r\n                    trigger=\"click\"\r\n                    v-model={model.value}\r\n                    noContentPadding\r\n                    transition=\"pl-transition-popper-drop\"\r\n                    v-slots={{popper: slots.popper}}>\r\n                    {scopedSlots.reference(\r\n                        {open: model.value},\r\n                        slots.default()\r\n                    )}\r\n                </PlPopper>\r\n            )\r\n        }\r\n    },\r\n})","import './dropdown.scss'\r\nimport {PlDropdown} from './dropdown'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlDropdown)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlDropdownGroup = designComponent({\r\n    name: 'pl-dropdown-group',\r\n    props: {\r\n        title: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots(['title'], true)\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={[\r\n                    'pl-dropdown-group',\r\n                    {'pl-dropdown-no-title': !slots.title.isExist() && !props.title}\r\n                ]}>\r\n                    {slots.title.isExist() || props.title && (\r\n                        <div class=\"pl-dropdown-group-title\">\r\n                            <PlIcon icon=\"el-icon-list\"/>\r\n                            <span>{slots.title(props.title)}</span>\r\n                        </div>\r\n                    )}\r\n                    <div class=\"pl-dropdown-group-content\">\r\n                        {slots.default()}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlDropdownGroup} from \"../dropdown/dropdown-group\";\r\n\r\nexport default createComponentPlugin(PlDropdownGroup)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {PlDropdown} from \"./dropdown\";\r\n\r\nexport const PlDropdownMenu = designComponent({\r\n    name: 'pl-dropdown-menu',\r\n    props: {},\r\n    emits: {\r\n        onClickOption: (e: MouseEvent, val: any) => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit}}) {\r\n\r\n        const dropdown = PlDropdown.use.inject()\r\n        const {slots} = useSlots()\r\n\r\n        const handler = {\r\n            clickOption: (e: MouseEvent, val: any) => {\r\n                emit.onClickOption(e, val)\r\n                dropdown.handler.clickDropdownOption(e)\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                handler,\r\n            },\r\n            render: slots.default\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlDropdownMenu} from \"../dropdown/dropdown-menu\";\r\n\r\nexport default createComponentPlugin(PlDropdownMenu)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {PlDropdownMenu} from \"./dropdown-menu\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlDropdownOption = designComponent({\r\n    name: 'pl-dropdown-option',\r\n    props: {\r\n        label: {type: [String]},\r\n        val: {},\r\n        icon: {type: String},\r\n        disabled: {type: Boolean},\r\n        align: {type: String, default: 'left'},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n        const menu = PlDropdownMenu.use.inject()\r\n\r\n        const onClick = (e: MouseEvent) => {\r\n            if (props.disabled) {\r\n                return\r\n            }\r\n            emit.onClick(e)\r\n            menu.handler.clickOption(e, props.val)\r\n        }\r\n\r\n        const classes = useClass(() => [\r\n            'pl-dropdown-option',\r\n            `pl-dropdown-option-align-${props.align}`,\r\n            {\r\n                'pl-dropdown-option-disabled': props.disabled\r\n            }\r\n        ])\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} onClick={onClick}>\r\n                    {!!props.icon && <PlIcon icon={props.icon} class=\"pl-dropdown-option-icon\"/>}\r\n                    {slots.default(props.label)}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlDropdownOption} from \"../dropdown/dropdown-option\";\r\n\r\nexport default createComponentPlugin(PlDropdownOption)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport './tooltip.scss'\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {onUpdated, reactive, onMounted} from 'vue';\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\nimport {PlPopper} from \"../popper/popper\";\r\n\r\nexport const PlTooltip = designComponent({\r\n    name: 'pl-tooltip',\r\n    props: {\r\n        modelValue: {type: Boolean},                        // 双向绑定控制是否显示\r\n        tooltip: {type: String},                            // tooltip提示文本，可以通过 tooltip插槽替换\r\n        showWidth: {type: Number},                          // 设置宽度，当内容宽度超过这个宽度时，才会显示tooltip\r\n        theme: {type: String, default: 'dark'},             // 主题，dark以及light\r\n\r\n        placement: {type: String, default: 'top-start'},    // 位置\r\n        popperClass: {type: Object},                        // 传递给 pl-popper 的popperClass 属性\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const state = reactive({\r\n            scrollWidth: 0,\r\n            offsetWidth: 0,\r\n        })\r\n        const {refs} = useRefs({\r\n            reference: HTMLSpanElement\r\n        })\r\n        const {slots} = useSlots(['tooltip'])\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n\r\n        const popperClasses = useClass(() => [\r\n            'pl-tooltip',\r\n            `pl-tooltip-theme-${props.theme}`,\r\n            props.popperClass,\r\n        ])\r\n\r\n        const refresh = debounce(() => {\r\n            if (!refs.reference) return\r\n            const {scrollWidth, offsetWidth} = refs.reference\r\n            if (state.scrollWidth != scrollWidth) state.scrollWidth = scrollWidth\r\n            if (state.offsetWidth != offsetWidth) state.offsetWidth = offsetWidth\r\n            // console.log({...state})\r\n        }, 100)\r\n\r\n        if (props.showWidth) {\r\n            onUpdated(refresh)\r\n            onMounted(refresh)\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <PlPopper\r\n                    disabled={!!props.showWidth ? state.offsetWidth === state.scrollWidth : false}\r\n                    popperClass={popperClasses.value}\r\n                    placement={props.placement}\r\n                    v-model={model.value}\r\n                    v-slots={{\r\n                        default: () => {\r\n                            refresh()\r\n                            return !!props.showWidth ? (\r\n                                <span class=\"pl-tooltip-reference\"\r\n                                      ref=\"reference\"\r\n                                      style={{width: unit(props.showWidth)!}}>\r\n                                {slots.default(props.tooltip)}\r\n                            </span>\r\n                            ) : slots.default(props.tooltip)\r\n                        },\r\n                        popper: () => slots.tooltip(props.tooltip)\r\n                    }}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import {Directive, nextTick} from 'vue';\r\nimport {PlainTooltip} from 'plain-popper';\r\nimport {PlainTooltipConfig} from 'plain-popper/src/PlainTooltipUtils';\r\nimport {deepEqual} from \"plain-utils/object/deepEqual\";\r\n\r\ntype TooltipBinding = string | PlainTooltipConfig\r\n\r\nclass Tooltip {\r\n\r\n    static DEFAULT_OPTION = {\r\n        placement: 'top',\r\n        theme: 'dark',\r\n        animate: 'fade',\r\n        trigger: 'hover',\r\n    }\r\n\r\n    tooltip: PlainTooltip | null = null\r\n    oldOption: any = null\r\n\r\n    constructor(el: HTMLElement, option: PlainTooltipConfig | string) {\r\n        this.updateOption(el, option)\r\n    }\r\n\r\n    async updateOption(el: HTMLElement, option: PlainTooltipConfig | string) {\r\n        if (deepEqual(this.oldOption, option)) {\r\n            return\r\n        }\r\n        this.oldOption = option\r\n        await nextTick()\r\n        if (!!this.tooltip) {\r\n            this.tooltip.destroy()\r\n            this.tooltip = null\r\n        }\r\n        if (!!option) {\r\n            let config: PlainTooltipConfig = (typeof option === \"string\" ? {content: option} : option) as any\r\n            config = Object.assign({reference: el} as Partial<PlainTooltipConfig>, Tooltip.DEFAULT_OPTION, config)\r\n            this.tooltip = new PlainTooltip(config)\r\n        }\r\n    }\r\n\r\n    unbind() {\r\n        if (!!this.tooltip) {\r\n            this.tooltip.destroy()\r\n        }\r\n    }\r\n}\r\n\r\nexport const TooltipDirective = (() => {\r\n    const map = new WeakMap()\r\n    const directive: Directive = {\r\n        mounted(el: HTMLElement, binding: { value: TooltipBinding }) {\r\n            if (!!binding.value) {\r\n                let service = new Tooltip(el, binding.value)\r\n                map.set(el, service)\r\n                service.updateOption(el, binding.value)\r\n            }\r\n        },\r\n        updated(el: HTMLElement, binding: { value: TooltipBinding }) {\r\n            if (!!binding.value) {\r\n                let service = map.get(el) as Tooltip | null\r\n                if (!service) {\r\n                    service = new Tooltip(el, binding.value)\r\n                    map.set(el, service)\r\n                }\r\n                service.updateOption(el, binding.value)\r\n            } else {\r\n                let service = map.get(el) as Tooltip | null\r\n                if (!!service) {\r\n                    service.unbind()\r\n                    service = null\r\n                    map.set(el, service)\r\n                }\r\n            }\r\n        },\r\n        unmounted(el: HTMLElement) {\r\n            const service = map.get(el) as Tooltip\r\n            if (!!service) {\r\n                service.unbind()\r\n            }\r\n        },\r\n    }\r\n    return directive\r\n})()","import {PlTooltip} from './tooltip'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {App} from 'vue';\r\nimport {TooltipDirective} from \"./tooltip-directive\";\r\n\r\nexport default createComponentPlugin(PlTooltip, {\r\n    plugins: [\r\n        {\r\n            install(app: App) {\r\n                app.directive('tooltip', TooltipDirective)\r\n            },\r\n        }\r\n    ]\r\n})","import {Transition} from 'vue'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {addClass} from \"plain-utils/dom/addClass\";\r\nimport {removeClass} from \"plain-utils/dom/removeClass\";\r\n\r\nexport const PlCollapseTransition = designComponent({\r\n    name: 'pl-collapse-transition',\r\n    emits: {\r\n        onAfterLeave: () => true,\r\n    },\r\n    setup({event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n\r\n        const handler = {\r\n            beforeEnter(el: HTMLElement) {\r\n                addClass(el, 'pl-collapse-transition');\r\n                if (!el.dataset) (el as any).dataset = {};\r\n\r\n                el.dataset.oldPaddingTop = el.style.paddingTop;\r\n                el.dataset.oldPaddingBottom = el.style.paddingBottom;\r\n\r\n                el.style.height = '0';\r\n                el.style.paddingTop = '0';\r\n                el.style.paddingBottom = '0';\r\n            },\r\n            enter(el: HTMLElement) {\r\n                el.dataset.oldOverflow = el.style.overflow;\r\n                if (el.scrollHeight !== 0) {\r\n                    el.style.height = el.scrollHeight + 'px';\r\n                    el.style.paddingTop = el.dataset.oldPaddingTop as string;\r\n                    el.style.paddingBottom = el.dataset.oldPaddingBottom as string;\r\n                } else {\r\n                    el.style.height = '';\r\n                    el.style.paddingTop = el.dataset.oldPaddingTop as string;\r\n                    el.style.paddingBottom = el.dataset.oldPaddingBottom as string;\r\n                }\r\n\r\n                el.style.overflow = 'hidden';\r\n            },\r\n            afterEnter(el: HTMLElement) {\r\n                removeClass(el, 'pl-collapse-transition');\r\n                el.style.height = '';\r\n                el.style.overflow = el.dataset.oldOverflow as string;\r\n            },\r\n            beforeLeave(el: HTMLElement) {\r\n                if (!el.dataset) (el as any).dataset = {};\r\n                el.dataset.oldPaddingTop = el.style.paddingTop;\r\n                el.dataset.oldPaddingBottom = el.style.paddingBottom;\r\n                el.dataset.oldOverflow = el.style.overflow;\r\n                el.style.height = el.scrollHeight + 'px';\r\n                el.style.overflow = 'hidden';\r\n            },\r\n            leave(el: HTMLElement) {\r\n                if (el.scrollHeight != 0) {\r\n                    addClass(el, 'pl-collapse-transition');\r\n                    el.style.transitionProperty = 'height'\r\n                    el.style.height = \"0\";\r\n                    el.style.paddingTop = '0';\r\n                    el.style.paddingBottom = '0';\r\n                }\r\n            },\r\n            afterLeave(el: HTMLElement) {\r\n                removeClass(el, 'pl-collapse-transition');\r\n                el.style.height = '';\r\n                el.style.overflow = el.dataset.oldOverflow as string;\r\n                el.style.paddingTop = el.dataset.oldPaddingTop as string;\r\n                el.style.paddingBottom = el.dataset.oldPaddingBottom as string;\r\n                emit.onAfterLeave()\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <Transition\r\n                    {...{\r\n                        onBeforeEnter: handler.beforeEnter,\r\n                        onEnter: handler.enter,\r\n                        onAfterEnter: handler.afterEnter,\r\n                        onBeforeLeave: handler.beforeLeave,\r\n                        onLeave: handler.leave,\r\n                        onAfterLeave: handler.afterLeave,\r\n                    } as any}>\r\n                    {slots.default()}\r\n                </Transition>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Input from '../input'\r\nimport {reactive, watch, PropType} from 'vue';\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {ColorPickerServiceGetter} from \"./service/color-picker.service\";\r\nimport {isEffectiveColorString} from \"./utils/ColorUtils\";\r\nimport './color-picker.scss'\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {$$notice} from \"../notice-service\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {PlColorButton} from \"./color-button\";\r\nimport {PlInput} from \"../input/input\";\r\n\r\nenum ColorPickerType {\r\n    input = 'input',\r\n    button = 'button',\r\n}\r\n\r\nexport const PlColorPicker = designComponent({\r\n    name: 'pl-color-picker',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: String},                             // 当前颜色值\r\n        enableAlpha: {type: Boolean, default: true},            // 是否启用透明度\r\n        format: {type: String, default: 'hex'},                 // 颜色格式\r\n        type: {type: String as PropType<ColorPickerType>, default: ColorPickerType.input}\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | undefined) => true,\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        useStyle()\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n            button: PlColorButton,\r\n        })\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {color: String, onClick: Function as PropType<() => void>},\r\n        }, true)\r\n\r\n        const model = useModel(() => props.modelValue, event.emit.onUpdateModelValue, {autoWatch: false})\r\n        const state = reactive({\r\n            val: model.value,\r\n            inputValue: props.modelValue,\r\n        })\r\n\r\n        const agentState = useEditPopperAgent({\r\n            event,\r\n            serviceGetter: ColorPickerServiceGetter,\r\n            option: {\r\n                reference: () => refs.input as any || refs.button || scopedSlotsOnClick.el,\r\n                renderAttrs: () => ({\r\n                    modelValue: state.val,\r\n                    enableAlpha: props.enableAlpha,\r\n                    format: props.format,\r\n\r\n                    onChange(val) {\r\n                        state.inputValue = val\r\n                        methods.emitValue(val)\r\n                    },\r\n                }),\r\n                popperAttrs: () => ({\r\n                    onMousedownPopper: async () => {\r\n                        agentState.state.focusCounter++\r\n                    },\r\n                    onClickPopper: () => {\r\n                        !!refs.input && refs.input.methods.focus()\r\n                    },\r\n                }),\r\n            },\r\n        })\r\n        const scopedSlotsOnClick = (() => {\r\n            const variable = {\r\n                el: null as null | HTMLDivElement,\r\n                onClick: (e: MouseEvent) => {\r\n                    variable.el = e.target as HTMLDivElement\r\n                    agentState.inputHandler.onClickInput()\r\n                }\r\n            }\r\n            return variable\r\n        })();\r\n\r\n        const methods = {\r\n            emitValue(val: any) {\r\n                model.value = val\r\n            },\r\n        }\r\n\r\n        const suffixIcon = () => (\r\n            <PlColorButton\r\n                ref=\"button\"\r\n                color={state.val}\r\n                onClick={agentState.inputHandler.onClickInput}/>\r\n        )\r\n\r\n        const inputHandler = {\r\n            onChange: (val: string) => {\r\n                state.inputValue = val\r\n                if (isEffectiveColorString(val)) {\r\n                    methods.emitValue(val)\r\n                }\r\n            },\r\n            /*---------------------------------------override-------------------------------------------*/\r\n\r\n            onEnter: (e: KeyboardEvent) => {\r\n                if (!!state.inputValue && state.inputValue !== state.val) {\r\n                    $$notice.warn('请输入有效的颜色值')\r\n                    state.inputValue = state.val\r\n                }\r\n                agentState.inputHandler.onEnter(e)\r\n            },\r\n            onBlur: (e: Event) => {\r\n                agentState.state.focusCounter--\r\n                if (agentState.state.focusCounter === 0) {\r\n                    event.emit.onBlur(e)\r\n                    agentState.methods.hide()\r\n                    state.val = model.value\r\n                    state.inputValue = model.value\r\n                }\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            model.value = val\r\n            state.val = val\r\n            state.inputValue = val\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                return scopedSlots.default({\r\n                    color: state.val!,\r\n                    onClick: scopedSlotsOnClick.onClick,\r\n                }, (\r\n                    props.type === ColorPickerType.input ? (\r\n                        <PlInput ref=\"input\"\r\n                                 class=\"pl-color-picker\"\r\n                                 modelValue={state.inputValue}\r\n                                 suffixIcon={suffixIcon}\r\n                                 isFocus={agentState.state.focusCounter > 0}\r\n                                 {...{\r\n                                     ...agentState.inputHandler,\r\n                                     ...inputHandler,\r\n                                 }}/>\r\n                    ) : suffixIcon()\r\n                ))\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, StyleStatus, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {STATUS} from \"../../utils/constant\";\r\nimport {computed, reactive} from 'vue';\r\nimport './alert.scss'\r\nimport {PlCollapseTransition} from \"../collapse/collapse-transition\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlAlert = designComponent({\r\n    name: 'pl-alert',\r\n    props: {\r\n        ...StyleProps,\r\n\r\n        label: {type: String},                                      // 提示文本\r\n        desc: {type: String},                                       // 描述文本\r\n        align: {type: String, default: 'left'},                     // 文本对其方式\r\n        theme: {type: String, default: 'lite'},                     // 主题，lite轻色，deep深色\r\n        noClose: {type: Boolean},                                   // 禁用关闭\r\n        icon: {type: String, default: undefined},                   // 显示的图标\r\n    },\r\n    setup({props}) {\r\n\r\n        const state = reactive({\r\n            isClosed: false,\r\n        })\r\n\r\n        const {slots} = useSlots([\r\n            'desc',\r\n            'close',\r\n        ], true)\r\n\r\n        const {styleComputed} = useStyle({status: StyleStatus.info})\r\n\r\n        const icon = computed(() => {\r\n            if (props.icon === null) {\r\n                return null\r\n            }\r\n            return props.icon || STATUS[styleComputed.value.status!].icon\r\n        })\r\n        const classes = computed(() => [\r\n            'pl-alert',\r\n            `pl-alert-status-${styleComputed.value.status}`,\r\n            `pl-alert-shape-${styleComputed.value.shape}`,\r\n            `pl-alert-theme-${props.theme}`,\r\n            `pl-alert-align-${props.align}`,\r\n            {\r\n                'pl-alert-has-icon': !!icon.value,\r\n                'pl-alert-has-desc': !!props.desc || slots.desc.isExist(),\r\n                'pl-alert-has-close': !props.noClose,\r\n            }\r\n        ])\r\n\r\n        const handler = {\r\n            onClickClosed: () => {\r\n                state.isClosed = true\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <PlCollapseTransition>\r\n                    {!state.isClosed && <div class=\"pl-alert-wrapper\">\r\n                        <div class={classes.value}>\r\n                            {!!icon.value && <div class=\"pl-alert-icon\">\r\n                                <PlIcon icon={icon.value}/>\r\n                            </div>}\r\n                            {!props.noClose && <div class=\"pl-alert-close\" onClick={handler.onClickClosed}>\r\n                                {slots.close(<PlIcon icon=\"el-icon-close\"/>)}\r\n                            </div>}\r\n                            {(!!props.label || slots.default.isExist()) && (\r\n                                <div class=\"pl-alert-label\">\r\n                                    {slots.default(props.label)}\r\n                                </div>\r\n                            )}\r\n                            {(!!props.desc || slots.desc.isExist()) && (\r\n                                <div class=\"pl-alert-desc\">\r\n                                    {slots.desc(props.desc)}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>}\r\n                </PlCollapseTransition>\r\n            )\r\n        }\r\n\r\n    },\r\n})","import {PlAlert} from './alert'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlAlert)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useModel} from \"../../use/useModel\";\r\n\r\nexport const PlCollapseGroup = designComponent({\r\n    name: 'pl-collapse-group',\r\n    props: {\r\n        modelValue: {type: [String, Array]},\r\n        limit: {type: Number, default: 1},\r\n        disabled: {type: Boolean},\r\n    },\r\n    provideRefer: true,\r\n    emits: {\r\n        onUpdateModelValue: (val: string | string[] | undefined) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {slots} = useSlots()\r\n        const model = useModel(() => props.modelValue as string | string[] | undefined, emit.onUpdateModelValue)\r\n\r\n        const utils = {\r\n            isOpen: (val: string) => {\r\n                if (!model.value) {\r\n                    return\r\n                }\r\n                if (typeof model.value === \"string\") {\r\n                    return model.value == val\r\n                } else {\r\n                    return (model.value as string[]).indexOf(val) > -1\r\n                }\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            clickCollapseTitle: (val: string) => {\r\n                if (props.limit === 1) {\r\n                    model.value = val == model.value ? undefined : val\r\n                } else {\r\n                    const value = (model.value as string[] | undefined) || []\r\n                    const index = value.indexOf(val)\r\n                    if (index > -1) {\r\n                        value.splice(index, 1)\r\n                    } else {\r\n                        value.push(val)\r\n                    }\r\n                    model.value = [...value]\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                utils,\r\n                handler,\r\n                props,\r\n                model,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-collapse-group\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {computed} from 'vue';\r\nimport {createCounter} from \"../../utils/createCounter\";\r\nimport './collapse.scss'\r\nimport {PlCollapseGroup} from \"./collapse-group\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlCollapseTransition} from \"./collapse-transition\";\r\n\r\nconst valCounter = createCounter('collapse')\r\n\r\nexport const PlCollapse = designComponent({\r\n    name: 'pl-collapse',\r\n    props: {\r\n        modelValue: {type: Boolean, default: true},\r\n        title: {type: String},\r\n        detail: {type: String},\r\n        noArrow: {type: Boolean},\r\n        disabled: {type: Boolean, default: null},\r\n        val: {type: String},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const group = PlCollapseGroup.use.inject(null)\r\n\r\n        const selfVal = computed(() => props.val || valCounter())\r\n\r\n        const isOpen = computed(() => {\r\n            if (!!group) {\r\n                return group.utils.isOpen(selfVal.value)\r\n            } else {\r\n                return model.value\r\n            }\r\n        })\r\n\r\n        const {slots} = useSlots([\r\n            'title',\r\n        ], true)\r\n\r\n        const classes = useClass(() => [\r\n            'pl-collapse',\r\n            {\r\n                'pl-collapse-has-arrow': !props.noArrow,\r\n                'pl-collapse-is-open': isOpen.value,\r\n            }\r\n        ])\r\n\r\n        const isDisabled = computed(() => {\r\n            if (props.disabled != null) {\r\n                return props.disabled\r\n            }\r\n            if (!!group) {\r\n                return group.props.disabled\r\n            }\r\n            return false\r\n        })\r\n\r\n        const handler = {\r\n            onClickTitle: () => {\r\n                if (isDisabled.value) {\r\n                    return\r\n                }\r\n                if (!!group) {\r\n                    group.handler.clickCollapseTitle(selfVal.value)\r\n                } else {\r\n                    model.value = !model.value\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}>\r\n                    {(!!props.title || slots.title.isExist()) && <div class=\"pl-collapse-title\" onClick={handler.onClickTitle}>\r\n                        {slots.title(props.title)}\r\n\r\n                        {!props.noArrow && !isDisabled.value && <div class=\"pl-collapse-arrow\">\r\n                            <PlIcon icon=\"el-icon-arrow-right\"/>\r\n                        </div>}\r\n                    </div>}\r\n                    <PlCollapseTransition>\r\n                        {isOpen.value && (!!props.detail || slots.default.isExist()) && <div class=\"pl-collapse-detail\">\r\n                            {slots.default(props.detail)}\r\n                        </div>}\r\n                    </PlCollapseTransition>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlCollapse} from './collapse'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlCollapse)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlCollapseGroup} from \"../collapse/collapse-group\";\r\n\r\nexport default createComponentPlugin(PlCollapseGroup)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlCollapseTransition} from \"../collapse/collapse-transition\";\r\n\r\nexport default createComponentPlugin(PlCollapseTransition)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport './card.scss'\r\nimport {useClass} from \"../../use/useClasses\";\r\n\r\nexport const PlCard = designComponent({\r\n    name: 'pl-card',\r\n    props: {\r\n        width: {type: [String, Number], default: '300'},        // 卡片宽度\r\n        noPadding: {type: Boolean},                             // 去掉标题以及内容的内边距\r\n        mini: {type: Boolean},                                  // 小型卡片\r\n        title: {type: String},                                  // 卡片标题\r\n        desc: {type: String},                                   // 卡片标题描述\r\n        shadow: {type: String},                                 // 阴影, normal,hover\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {slots} = useSlots([\r\n            'title',                                // 卡片标题\r\n            'desc',                                 // 标题下方的描述\r\n            // 'default',                              // 卡片内容\r\n            'operator',                             // 卡片标题右侧的操作按钮\r\n            'poster',                               // 卡片海报（标题上方）\r\n            'foot',                                 // 卡片底部操作栏\r\n        ], true)\r\n\r\n        const classes = useClass(() => [\r\n            'pl-card',\r\n            {\r\n                'pl-card-mini': props.mini,\r\n                'pl-card-no-padding': props.noPadding,\r\n                [`pl-card-shadow-${props.shadow}`]: !!props.shadow,\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            !!props.width && (style.width = unit(props.width))\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {slots.poster.isExist() && <div class=\"pl-card-poster\">\r\n                        {slots.poster()}\r\n                    </div>}\r\n                    {(slots.title.isExist() || slots.desc.isExist() || slots.operator.isExist() || props.title || props.desc) && (\r\n                        <div class=\"pl-card-head\">\r\n                            <div class=\"pl-card-head-content\">\r\n                                {(slots.title.isExist() || props.title) && <div class=\"pl-card-title\">\r\n                                    {slots.title(props.title)}\r\n                                </div>}\r\n                                {(slots.desc.isExist() || props.desc) && <div class=\"pl-card-desc\">\r\n                                    {slots.desc(props.desc)}\r\n                                </div>}\r\n                            </div>\r\n                            {slots.operator.isExist() && <div class=\"pl-card-head-operator\">\r\n                                {slots.operator()}\r\n                            </div>}\r\n                        </div>\r\n                    )}\r\n                    {slots.default.isExist() && <div class=\"pl-card-content\">\r\n                        {slots.default()}\r\n                    </div>}\r\n                    {slots.foot.isExist() && <div class=\"pl-card-foot\">\r\n                        {slots.foot()}\r\n                    </div>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlCard} from './card'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlCard)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {CarouselCollector} from \"./carousel\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {computed} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {createCounter} from \"../../utils/createCounter\";\r\n\r\nconst counter = createCounter('carousel')\r\n\r\nexport const PlCarouselItem = designComponent({\r\n    name: 'pl-carousel-item',\r\n    props: {\r\n        val: {type: [String, Number]},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n        const carousel = CarouselCollector.child({sort: () => refs.el})\r\n        const {slots} = useSlots()\r\n        const itemVal = computed(() => props.val == null ? counter() : props.val)\r\n        const style = useStyles(() => carousel.utils.getItemStyles(itemVal.value) as any)\r\n\r\n        return {\r\n            refer: {\r\n                itemVal,\r\n            },\r\n            render: () => (\r\n                <div class={[\r\n                    'pl-carousel-item',\r\n                    {\r\n                        'pl-carousel-item-animating': carousel.utils.isAnimating(itemVal.value),\r\n                    }\r\n                ]}\r\n                     ref=\"el\"\r\n                     style={style.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {computed, onMounted, reactive, watch} from 'vue'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport './carousel.scss'\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {throttle} from \"plain-utils/utils/throttle\";\r\nimport {PlCarouselItem} from \"./carousel-item\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlCarousel = designComponent({\r\n    name: 'pl-carousel',\r\n    props: {\r\n        modelValue: {type: [String, Number]},                       // 双向绑定值\r\n        height: {type: [Number, String], default: 225},             // 轮播高度\r\n        autoplay: {type: Number, default: 3000},                    // 自定播放时间，为0则取消自动播放\r\n        disabledOperator: {type: Boolean},                          // 禁用前后按钮\r\n        disabledIndicator: {type: Boolean},                         // 禁用指示器\r\n        indicatorTrigger: {type: String, default: 'click'},         // 指示器激活触发器：click。hover\r\n        vertical: {type: Boolean},                                  // 轮播方向为纵向\r\n        card: {type: Boolean},                                      // 卡片形式的切换\r\n        cardScale: {type: Number, default: 0.64},                   // 卡片形式轮播的时候，缩小比例\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | number | undefined | null) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        /*子元素*/\r\n        const items = CarouselCollector.parent()\r\n        const {scopedSlots} = useScopedSlots({\r\n            indicator: {val: String, index: Number, active: Boolean}\r\n        })\r\n        const {slots} = useSlots([\r\n            'cover',\r\n        ], true)\r\n        const {propsState} = useProps(props, {\r\n            height: useProps.NUMBER,\r\n        })\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement\r\n        })\r\n        const state = reactive({\r\n            width: 0,                                                   // 容器宽度\r\n            height: 0,                                                  // 容器高度\r\n            autoplayTimer: null as null | number,                       // 自动播放定时器\r\n            prevActiveIndex: null as null | number,                     // 上一个激活的index，当元素个数为3时，需要通过这个属性优化动画\r\n        })\r\n\r\n        /*双向绑定值*/\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        /*子元素val数组*/\r\n        const vals = computed(() => items.map(item => String(item.itemVal.value)!))\r\n        /*当前激活的元素的val值*/\r\n        const activeVal = computed(() => {\r\n            if (vals.value.length === 0) {\r\n                return null\r\n            }\r\n            if (model.value != null) {\r\n                return String(model.value)\r\n            } else {\r\n                return vals.value[0]\r\n            }\r\n        })\r\n        /*当前激活的元素的val的在 数组中的索引*/\r\n        const activeIndex = computed(() => {\r\n            if (!activeVal.value) {\r\n                return 0\r\n            }\r\n            return vals.value.indexOf(activeVal.value)\r\n        })\r\n\r\n        /*实际渲染的，排序过的val数组*/\r\n        const sortVals = computed(() => {\r\n            const valArray = vals.value\r\n            let prev = valArray.slice(0, activeIndex.value)\r\n            let next = valArray.slice(activeIndex.value + 1)\r\n\r\n            if (Math.abs(prev.length - next.length) > 1) {\r\n                if (prev.length > next.length) {\r\n                    while (prev.length - next.length > 1) {\r\n                        next.push(prev.shift()!)\r\n                    }\r\n                } else {\r\n                    while (next.length - prev.length > 1) {\r\n                        prev.unshift(next.pop()!)\r\n                    }\r\n                }\r\n            }\r\n            return [...prev, activeVal.value, ...next]\r\n        })\r\n\r\n        const classes = useClass(() => [\r\n            'pl-carousel',\r\n            {\r\n                'pl-carousel-vertical': props.vertical,\r\n                'pl-carousel-card': props.card,\r\n            }\r\n        ])\r\n        const styles = useStyles(style => {\r\n            style.height = unit(propsState.height)\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 子元素的左偏移位置\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:19\r\n             */\r\n            getItemStyles: (val: any) => {\r\n                if (!state.width) {\r\n                    return null\r\n                }\r\n                /*当前val在sortVals中的索引*/\r\n                const sortIndex = sortVals.value.indexOf(String(val))\r\n                /*激活val在sortVals中的索引*/\r\n                const activeSortIndex = sortVals.value.indexOf(String(activeVal.value))\r\n\r\n                /*当前val与激活val在sortVal的间距*/\r\n                let duration = sortIndex - activeSortIndex\r\n\r\n                const style = {\r\n                    zIndex: sortVals.value.length - Math.abs(duration),\r\n                } as any\r\n\r\n                if (!props.vertical) {\r\n                    if (!props.card) {\r\n                        /*非卡片形式的轮播*/\r\n                        style.transform = `translateX(${duration * state.width}px)`\r\n                    } else {\r\n                        style.width = `${props.cardScale * 100}%`\r\n                        style.height = `${props.cardScale * 100}%`\r\n\r\n                        /*卡片轮播*/\r\n                        let left = duration * state.width * (props.cardScale) + (state.width * (1 - props.cardScale) / 2)\r\n                        left += (sortIndex > activeSortIndex ? -1 : 1) * Math.abs(sortIndex - activeSortIndex) * state.width * 0.125\r\n                        style.transform = `translateX(${left}px) translateY(${state.height * ((1 - props.cardScale) / 2)}px) scale(${sortIndex === activeSortIndex ? '1' : '0.83'})`\r\n                    }\r\n                } else {\r\n                    /*纵向非卡片形式的轮播*/\r\n                    style.transform = `translateY(${duration * state.height}px)`\r\n                }\r\n\r\n                return style\r\n            },\r\n            /**\r\n             * 重置自动播放定时器\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:19\r\n             */\r\n            resetAutoplayTimer: (autoplay: number | null) => {\r\n                /*无论怎么样都要清理掉定时器*/\r\n                if (!!state.autoplayTimer) {\r\n                    clearInterval(state.autoplayTimer)\r\n                    state.autoplayTimer = null\r\n                }\r\n                /*如果autoplay有值，重新设定一个自动播放定时器*/\r\n                if (!!autoplay) {\r\n                    state.autoplayTimer = setInterval(methods.next, autoplay)\r\n                }\r\n            },\r\n            /**\r\n             * 子元素是否需要动画（当元素为3时，只有prevActiveIndex以及activeIndex的元素需要动画，另一个需要立刻移动到对应的位置）\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:20\r\n             */\r\n            isAnimating: (val: any) => {\r\n                if (vals.value.length !== 3 && !props.card) {\r\n                    return true\r\n                }\r\n                let index = vals.value.indexOf(val)\r\n                return index === state.prevActiveIndex || index === activeIndex.value\r\n            },\r\n        }\r\n\r\n        const methods = {\r\n            /**\r\n             * 显示上一个元素\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:21\r\n             */\r\n            prev: () => {\r\n                state.prevActiveIndex = activeIndex.value\r\n                model.value = sortVals.value[sortVals.value.indexOf(activeVal.value) - 1]!\r\n            },\r\n            /**\r\n             * 显示下一个元素\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:21\r\n             */\r\n            next: () => {\r\n                state.prevActiveIndex = activeIndex.value\r\n                model.value = sortVals.value[sortVals.value.indexOf(activeVal.value) + 1]!\r\n            },\r\n            /**\r\n             * 显示特定元素\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:21\r\n             */\r\n            show: (val: any) => {\r\n                state.prevActiveIndex = activeIndex.value\r\n                model.value = val\r\n\r\n                utils.resetAutoplayTimer(props.autoplay)\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            onPrev: throttle(() => {\r\n                utils.resetAutoplayTimer(props.autoplay)\r\n                methods.prev()\r\n            }, 800, {trailing: true, leading: true}),\r\n            onNext: throttle(() => {\r\n                utils.resetAutoplayTimer(props.autoplay)\r\n                methods.next()\r\n            }, 800, {trailing: true, leading: true}),\r\n            onIndicator: (index: number) => {\r\n                methods.show(vals.value[index])\r\n            },\r\n        }\r\n\r\n        onMounted(() => {\r\n            state.width = refs.el.offsetWidth\r\n            state.height = refs.el.offsetHeight\r\n        })\r\n\r\n        watch(() => props.autoplay, utils.resetAutoplayTimer, {immediate: true})\r\n\r\n        return {\r\n            refer: {\r\n                utils,\r\n                methods,\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value} ref=\"el\">\r\n                    {slots.default()}\r\n                    {slots.cover.isExist() && <div class=\"pl-carousel-cover\">\r\n                        {slots.cover()}\r\n                    </div>}\r\n\r\n                    {!props.disabledOperator && <div class=\"pl-carousel-operator\">\r\n                        <div class=\"pl-carousel-operator-btn pl-carousel-operator-prev\" onClick={handler.onPrev}>\r\n                            <PlIcon icon=\"el-icon-arrow-left\"/>\r\n                        </div>\r\n                        <div class=\"pl-carousel-operator-btn pl-carousel-operator-next\" onClick={handler.onNext}>\r\n                            <PlIcon icon=\"el-icon-arrow-right\"/>\r\n                        </div>\r\n                    </div>}\r\n\r\n                    {!props.disabledIndicator && <div class=\"pl-carousel-indicator\">\r\n                        {items.map((item, index) => (\r\n                            scopedSlots.indicator({val: String(item.itemVal.value), index, active: index === activeIndex.value}, (\r\n                                <div\r\n                                    {...{\r\n                                        [props.indicatorTrigger === 'hover' ? 'onMouseenter' : 'onClick']: () => handler.onIndicator(index)\r\n                                    }}\r\n                                    class={[\r\n                                        'pl-carousel-indicator-item',\r\n                                        {\r\n                                            'pl-carousel-indicator-item-active': index === activeIndex.value,\r\n                                        }\r\n                                    ]} key={index}/>\r\n                            ))\r\n                        ))}\r\n                    </div>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const CarouselCollector = useCollect(() => ({\r\n    parent: PlCarousel,\r\n    child: PlCarouselItem,\r\n}))","import {PlCarousel} from './carousel'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlCarousel)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlCarouselItem} from \"../carousel/carousel-item\";\r\n\r\nexport default createComponentPlugin(PlCarouselItem)","import {designComponent} from \"../../use/designComponent\";\r\n\r\nconst opacityBg = require('./sub/opacity.png')\r\n\r\nexport const PlColorButton = designComponent({\r\n    name: 'pl-color-button',\r\n    props: {\r\n        color: {type: String}\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-button\" onClick={emit.onClick}>\r\n                    <div class=\"pl-color-button-background\" style={{backgroundImage: `url(${opacityBg})`}}>\r\n                        <div class=\"pl-color-button-color\" style={{backgroundColor: props.color}}/>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","/**\r\n * 拖拽放置的类型\r\n * @author  韦胜健\r\n * @date    2020/4/1 17:15\r\n */\r\nexport enum TreeDropType {\r\n    prev = 'prev',\r\n    inner = 'inner',\r\n    next = 'next',\r\n    null = 'null',\r\n}\r\n\r\nexport const enum TreeNodeCheckStatus {\r\n    check = 'check',\r\n    uncheck = 'uncheck',\r\n    minus = 'minus',\r\n}","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlColorPicker} from \"./color-picker\";\r\nimport {PlColorAlphaSlider} from \"./sub/color-alpha-slider\";\r\nimport {PlColorHueSlider} from \"./sub/color-hue-slider\";\r\nimport {PlColorSvPanel} from \"./sub/color-sv-panel\";\r\nimport {PlColorPanel} from \"./color-panel\";\r\n\r\nexport default createComponentPlugin(PlColorPicker, {\r\n    exposeComponents: {\r\n        PlColorAlphaSlider,\r\n        PlColorHueSlider,\r\n        PlColorSvPanel,\r\n        PlColorPanel,\r\n    }\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlColorButton} from \"../color-picker/color-button\";\r\n\r\nexport default createComponentPlugin(PlColorButton)","import {designComponent} from \"../../use/designComponent\";\r\nimport {CascadePanelProps} from \"./panel/cascade-panel\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Input from '../input'\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {CascadeNode} from \"./utils/CascadeNode\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {computed, PropType, reactive, watch} from 'vue';\r\nimport {CascadeMark} from \"./utils/CascadMark\";\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {CascadeServiceGetter} from \"./service/cascade-service\";\r\nimport {ie} from \"plain-utils/utils/ie\";\r\nimport './cascade.scss'\r\nimport {PlInput} from \"../input/input\";\r\n\r\nexport const PlCascade = designComponent({\r\n    name: 'pl-cascade',\r\n    props: {\r\n        ...CascadePanelProps,\r\n\r\n        showLast: {type: Boolean},                                          // 只显示最后一级节点文本\r\n        separator: {type: String, default: ' / '},                          // 显示值分隔符\r\n        filterable: {type: Boolean, default: true},                         // 是否可筛选\r\n        showFormat: {type: Function as PropType<(value: any[]) => string>}, // 显示值格式化函数\r\n\r\n        inputAttrs: {type: Object},                                         // 输入框属性值\r\n\r\n        ...StyleProps,\r\n        ...EditProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any, expandNodes?: CascadeNode[]) => true,\r\n        onClickItem: (data: { node: CascadeNode, index: number }) => true,\r\n        onGetChildren: (...args: any[]) => true,\r\n        onUpdateData: (val: any) => true,\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        useStyle()\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n        })\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {node: CascadeNode, index: Number}\r\n        }, true)\r\n\r\n        /*之所以不自动派发事件，是因为派发事件的时候需要多传一个nodes值*/\r\n        const model = useModel(() => props.modelValue, event.emit.onUpdateModelValue, {autoEmit: false})\r\n        const data = useModel(() => props.data, event.emit.onUpdateData)\r\n\r\n        const state = reactive({\r\n            inputValue: null as null | string,\r\n            cacheData: {} as { [key: string]: object[] },\r\n            expandKeys: [] as string[],\r\n        })\r\n\r\n        const cascadeMark = computed(() => new CascadeMark(\r\n            () => ({\r\n                nodeDisabled: props.nodeDisabled,\r\n                isLeaf: props.isLeaf,\r\n                lazy: props.lazy,\r\n                getChildren: props.getChildren,\r\n                filterMethod: props.filterMethod,\r\n\r\n                labelField: props.labelField!,\r\n                keyField: props.keyField!,\r\n                childrenField: props.childrenField!,\r\n            }),\r\n            () => ({\r\n                expandKeys: state.expandKeys,\r\n                filterText: '',\r\n            })\r\n        ))\r\n\r\n        const agentState = useEditPopperAgent({\r\n            event,\r\n            serviceGetter: CascadeServiceGetter,\r\n            option: {\r\n                reference: () => refs.input as any,\r\n                renderAttrs: () => ({\r\n                    ...props,\r\n                    modelValue: model.value,\r\n                    filterText: state.inputValue,\r\n                    getChildren: utils.getChildren,\r\n                    renderContent: utils.renderContent,\r\n\r\n                    onChange: handler.onServiceChange,\r\n                    onClickItem: event.emit.onClickItem,\r\n                    onGetChildren: event.emit.onGetChildren,\r\n                    onUpdateData: event.emit.onUpdateData,\r\n                }),\r\n                popperAttrs: {\r\n                    onMousedownPopper: () => agentState.state.focusCounter++,\r\n                    onClickPopper: () => refs.input!.methods.focus(),\r\n                    onHide: () => state.inputValue = null,\r\n                },\r\n            },\r\n        })\r\n\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            getChildren: (node: CascadeNode | null, resolve: Function) => {\r\n                let key = !!node ? node.key : 'root'\r\n                if (state.cacheData[key]) {\r\n                    resolve(state.cacheData[key])\r\n                } else {\r\n                    props.getChildren!(node, (data) => {\r\n                        state.cacheData[key] = data\r\n                        resolve(data)\r\n                    })\r\n                }\r\n            },\r\n            /**\r\n             * 检查props是否合法\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 18:48\r\n             */\r\n            checkProps() {\r\n                if (!props.data) return true\r\n                if (!props.keyField) {\r\n                    console.error('pl-cascade 的 keyField属性不能为空，每一条记录必须要有一个key标识')\r\n                    return false\r\n                }\r\n                if (!props.childrenField) {\r\n                    console.error('pl-cascade 的 childrenKey不能为空')\r\n                    return false\r\n                }\r\n                return true\r\n            },\r\n            renderContent: (scopedSlots.default.isExist() || !!props.renderContent) ? ({node, index}: { node: CascadeNode, index: number }) => {\r\n                if (scopedSlots.default.isExist()) return scopedSlots.default({node, index})\r\n                if (!!props.renderContent) return props.renderContent({node, index})\r\n            } : null\r\n        }\r\n\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const classes = computed(() => ([\r\n            'pl-cascade',\r\n            {\r\n                'pl-cascade-open': agentState.isShow.value,\r\n            }\r\n        ]))\r\n\r\n        const formatData = computed(() => cascadeMark.value.node.getList(data.value, 1, () => null))\r\n\r\n        const showValue = computed(() => {\r\n            if (!model.value) return null\r\n            if (!!props.showFormat) return props.showFormat(model.value)\r\n\r\n            let result: string[] = []\r\n            let list = formatData.value || []\r\n            for (let i = 0; i < model.value.length; i++) {\r\n                const sourceKey = model.value[i];\r\n                let flag = false\r\n                for (let j = 0; j < list.length; j++) {\r\n                    const target = list[j];\r\n                    if (sourceKey === target.key) {\r\n                        result.push(target.label)\r\n                        list = target.children || []\r\n                        flag = true\r\n                        break\r\n                    }\r\n                }\r\n                if (!flag) {\r\n                    result = [...result, ...(model.value.slice(i)) as string[]]\r\n                    break\r\n                }\r\n            }\r\n            if (props.showLast && result.length > 0) {\r\n                return result[result.length - 1]\r\n            }\r\n            return result.join(' / ')\r\n        })\r\n\r\n\r\n        const handler = {\r\n            clear: () => {\r\n                model.value = undefined\r\n                event.emit.onUpdateModelValue(model.value)\r\n\r\n                state.inputValue = null\r\n                refs.input!.methods.focus()\r\n            },\r\n            onServiceChange: (val: any, nodes: CascadeNode[]) => {\r\n                model.value = val\r\n                event.emit.onUpdateModelValue(val, nodes)\r\n            },\r\n            onInputChange: (val: string) => {\r\n                state.inputValue = val\r\n                if (!agentState.isShow.value && !ie) {\r\n                    agentState.methods.show()\r\n                }\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, () => {state.inputValue = null})\r\n\r\n        return {\r\n            render: () => (\r\n                <PlInput\r\n                    ref=\"input\"\r\n                    class={classes.value}\r\n                    clearIcon\r\n                    suffixIcon=\"el-icon-d-arrow-right\"\r\n                    modelValue={((agentState.isShow.value && props.filterable) ? state.inputValue : showValue.value) || undefined}\r\n                    placeValue={showValue.value || undefined}\r\n                    placeholder={((agentState.isShow.value && props.filterable) ? showValue.value : (!!props.inputAttrs ? props.inputAttrs!.placeholder : null)) || ''}\r\n                    clearHandler={handler.clear}\r\n                    inputReadonly={!props.filterable}\r\n                    isFocus={agentState.state.focusCounter > 0}\r\n\r\n                    {...agentState.inputHandler}\r\n                    {...{onChange: handler.onInputChange}}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import {PlCascade} from './cascade'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlCascadePanel} from \"./panel/cascade-panel\";\r\n\r\nexport default createComponentPlugin(PlCascade, {\r\n    exposeComponents: {\r\n        PlCascadePanel,\r\n    }\r\n})","import {SimpleObject} from \"../../../shims\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {TreeNodeCheckStatus} from \"../utils/tree-constant\";\r\nimport {computed, onBeforeUnmount, reactive, watchEffect} from 'vue';\r\nimport {throttle} from \"plain-utils/utils/throttle\";\r\n\r\n/**\r\n * 根据childrenField遍历data树形数据\r\n * @author  韦胜健\r\n * @date    2020/12/2 12:22\r\n */\r\nfunction iteratorTreeData({data, childrenField}: { data?: SimpleObject[], childrenField: string }) {\r\n    if (!!data) {\r\n        data.forEach(item => {\r\n            if (!!item[childrenField]) {\r\n                iteratorTreeData({data: item[childrenField], childrenField})\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport function useTreeNode<Node extends {\r\n    key: string,\r\n    data: SimpleObject,\r\n    level: number,\r\n    parentRef: () => Node | null,\r\n    selfRef: () => Node,\r\n\r\n    index: number,\r\n\r\n    readonly childrenData?: SimpleObject[]\r\n    readonly label?: string,\r\n    children?: Node[],\r\n    readonly checkStatus: TreeNodeCheckStatus,\r\n\r\n    expand: boolean,\r\n    check: boolean,\r\n    loading: boolean,\r\n    loaded: boolean,\r\n\r\n    readonly isCheckable: boolean,\r\n    readonly isLeaf: boolean,\r\n    readonly isVisible: boolean,\r\n}>(\r\n    {\r\n        props,\r\n        event,\r\n        keyManager,\r\n        getTreeNodeByDataAdjust,\r\n    }: {\r\n        props: {\r\n            data?: SimpleObject[],\r\n            labelField?: string,\r\n            keyField?: string,\r\n            childrenField?: string,\r\n            filterNodeMethod?: (node: Node) => boolean,\r\n            isLeaf?: (node: Node) => boolean,\r\n            isCheckable?: (node: Node) => boolean,\r\n            getChildren?: (node: Node, cb: (data: SimpleObject[]) => void) => void,\r\n            lazy?: boolean,\r\n            showCheckbox?: boolean,\r\n            checkStrictly?: boolean,\r\n        },\r\n        event: {\r\n            emit: { onUpdateData: (data?: SimpleObject[]) => void }\r\n        },\r\n        keyManager: (obj: any, keyField: string | undefined | null) => string,\r\n        getTreeNodeByDataAdjust?: (node: Node) => void,\r\n    }\r\n) {\r\n\r\n    /*内部data变量*/\r\n    const dataModel = useModel(() => props.data, event.emit.onUpdateData)\r\n\r\n\r\n    /**\r\n     * 因为滚动的时候会频繁获取checkStatus，而这个属性又是计算量比较大的属性，这里作为计算属性统一计算\r\n     * @author  韦胜健\r\n     * @date    2020/12/2 14:07\r\n     */\r\n    const checkStatus = computed(() => {\r\n        const map = {} as Record<string, TreeNodeCheckStatus>\r\n        if (!props.showCheckbox || !state.root) {\r\n            return map\r\n        }\r\n        utils.iterate({\r\n            nodes: state.root.children,\r\n            iterateChildrenFirst: true,\r\n            handler: node => {\r\n                if (props.checkStrictly || node.isLeaf) {\r\n                    map[node.key] = node.check ? TreeNodeCheckStatus.check : TreeNodeCheckStatus.uncheck\r\n                } else {\r\n                    if (node.check) {\r\n                        map[node.key] = TreeNodeCheckStatus.check\r\n                    } else {\r\n                        if (!!node.children && node.children.every(child => map[child.key] === TreeNodeCheckStatus.uncheck)) {\r\n                            map[node.key] = TreeNodeCheckStatus.uncheck\r\n                        } else {\r\n                            map[node.key] = TreeNodeCheckStatus.minus\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return map\r\n    })\r\n\r\n    const utils = {\r\n        /*根据data获取Node*/\r\n        getTreeNodeByData: (() => {\r\n            const map = new WeakMap<object, Node>()\r\n            const get = ({data, level, parentRef, adjust}: { data: any, level: number, parentRef: () => Node, adjust?: (node: Node) => void }): Node => {\r\n                let node: Node | undefined = map.get(data)\r\n                if (!node) {\r\n                    node = {\r\n                        index: 0,\r\n                        key: keyManager(data, props.keyField),\r\n                        data,\r\n                        level,\r\n                        parentRef,\r\n                        selfRef() {return this},\r\n                        empty: false,\r\n                        children: [],\r\n\r\n                        get label() {return !!props.labelField && !!data ? data[props.labelField] : null},\r\n                        get childrenData() {return data[props.childrenField!]},\r\n\r\n                        expand: false,\r\n                        check: false,\r\n                        loading: false,\r\n                        loaded: !props.lazy,\r\n                        /* todo 这里并不会立即执行，当渲染VNodeChild的时候这里才会执行，所以不存在checkStatus.value不存在的问题*/\r\n                        get checkStatus() {return checkStatus.value[this.key]},\r\n                        // get checkStatus() {return TreeNodeCheckStatus.uncheck},\r\n\r\n                        get isCheckable() {return !props.isCheckable || props.isCheckable(this as any)},\r\n                        get isLeaf() {return !!props.isLeaf ? props.isLeaf(this as any) : !this.childrenData},\r\n                        get isVisible() {\r\n                            return !props.filterNodeMethod ? true : (props.filterNodeMethod(this as any) || (!!this.children && this.children.some((child: Node) => child.isVisible)))\r\n                        },\r\n                    } as any\r\n                    if (!!adjust) adjust(node!)\r\n                    map.set(data, node!)\r\n                } else {\r\n                    Object.assign(node, {\r\n                        key: keyManager(data, props.keyField),\r\n                        data,\r\n                        level,\r\n                        parentRef,\r\n                    })\r\n                }\r\n                return node!\r\n            }\r\n            return get\r\n        })(),\r\n        /**\r\n         * 重置state中的data数据\r\n         * 为什么不直接把root以及nodeMap做成计算属性。\r\n         * 因为在计算root以及nodeMap的时候，会获取 label，key以及children，如果这些字段被修改了，可能会导致\r\n         * 这个计算属性频繁执行。这里只检查子节点数据，当子节点数据变化的时候才重新执行root以及nodeMap\r\n         * @author  韦胜健\r\n         * @date    2020/12/17 16:17\r\n         */\r\n        resetData: () => {\r\n            const nodeMap = {} as Record<string, Node>;\r\n            const iterator = ({data, level, parentRef}: { data: any, level: number, parentRef: () => Node }): Node => {\r\n                const node = utils.getTreeNodeByData({data, level, parentRef, adjust: getTreeNodeByDataAdjust})\r\n                nodeMap[node.key] = node\r\n                const childrenData = !props.childrenField ? null : (data[props.childrenField!] as SimpleObject[])\r\n                if (!!childrenData) {\r\n                    node.children = childrenData.map(child => iterator({data: child, level: level + 1, parentRef: () => state.nodeMap[node.key]}))\r\n                }\r\n                return node\r\n            }\r\n            const root = iterator({\r\n                data: {\r\n                    [props.keyField || 'id']: '@@$$root',\r\n                    [props.childrenField || 'children']: dataModel.value\r\n                },\r\n                level: 0,\r\n                parentRef: null as any,\r\n            })\r\n\r\n            return {\r\n                nodeMap,\r\n                root\r\n            }\r\n        },\r\n        /*遍历所有节点数据*/\r\n        iterate: ({nodes, handler, iterateChildren, iterateChildrenFirst,}: { nodes: Node[] | undefined, handler: (node: Node) => void, iterateChildren?: (node: Node) => boolean, iterateChildrenFirst?: boolean, }) => {\r\n            if (!nodes) return\r\n            nodes.forEach(Node => {\r\n                !iterateChildrenFirst && handler(Node);\r\n                if (!!Node.children && (!iterateChildren || iterateChildren(Node))) {\r\n                    utils.iterate({nodes: Node.children, handler, iterateChildren, iterateChildrenFirst,})\r\n                }\r\n                iterateChildrenFirst && handler(Node);\r\n            })\r\n        },\r\n    }\r\n\r\n    const state = reactive((() => {\r\n        const {root, nodeMap} = utils.resetData()\r\n        return {\r\n            /*虚拟跟节点*/\r\n            root,\r\n            /*节点映射node*/\r\n            nodeMap\r\n        }\r\n    })()) as { root: Node, nodeMap: Record<string, Node> };\r\n\r\n    const dataEffectTrigger = throttle(() => {\r\n        const {root, nodeMap} = utils.resetData()\r\n        state.root = root\r\n        state.nodeMap = nodeMap\r\n    }, 100)\r\n\r\n    const stopWatchEffect = watchEffect(\r\n        () => {\r\n            iteratorTreeData({data: dataModel.value || [], childrenField: props.childrenField!})\r\n            dataEffectTrigger()\r\n        },\r\n    )\r\n    onBeforeUnmount(stopWatchEffect)\r\n    const methods = {\r\n        getReactiveChildrenData(node: Node) {\r\n            let childrenData = node.childrenData\r\n            if (!childrenData) {\r\n                childrenData = []\r\n                node.data[props.childrenField!] = childrenData\r\n            }\r\n            return childrenData\r\n        },\r\n        removeSelf: (node: Node) => {\r\n            const parentChildrenData = node.parentRef()!.childrenData!\r\n            parentChildrenData.splice(parentChildrenData.indexOf(node.data), 1)\r\n        },\r\n        previousSibling: (self: Node, target: Node) => {\r\n            let parentChildrenData = methods.getReactiveChildrenData(self.parentRef()!)\r\n            target.parentRef = self.parentRef\r\n            target.level = self.level\r\n            parentChildrenData.splice(parentChildrenData.indexOf(self.data), 0, target.data)\r\n        },\r\n        nextSibling: (self: Node, target: Node) => {\r\n            let parentChildrenData = methods.getReactiveChildrenData(self.parentRef()!)\r\n            target.parentRef = self.parentRef\r\n            target.level = self.level\r\n            parentChildrenData.splice(parentChildrenData.indexOf(self.data) + 1, 0, target.data)\r\n        },\r\n        unshiftChild: (self: Node, target: Node) => {\r\n            let childrenData = methods.getReactiveChildrenData(self)\r\n            target.parentRef = () => self\r\n            target.level = self.level + 1\r\n            childrenData.unshift(target.data)\r\n        },\r\n    }\r\n\r\n    return {\r\n        dataModel,\r\n        state,\r\n        utils,\r\n        methods,\r\n    }\r\n}","import {computed, nextTick, PropType} from 'vue';\r\nimport {SimpleObject} from \"../../../shims\";\r\nimport {useTreeNode} from \"./useTreeNode\";\r\nimport {TreeNodeCheckStatus} from \"../utils/tree-constant\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\n\r\nfunction use<Node extends {\r\n    key: string,\r\n    data: SimpleObject,\r\n    level: number,\r\n    parentRef: () => Node | null,\r\n    selfRef: () => Node,\r\n\r\n    index: number,\r\n\r\n    readonly childrenData?: SimpleObject[]\r\n    readonly label?: string,\r\n    children?: Node[],\r\n    readonly checkStatus: TreeNodeCheckStatus,\r\n\r\n    expand: boolean,\r\n    check: boolean,\r\n    loading: boolean,\r\n    loaded: boolean,\r\n\r\n    readonly isCheckable: boolean,\r\n    readonly isLeaf: boolean,\r\n    readonly isVisible: boolean,\r\n}>(\r\n    {\r\n        props,\r\n        emit,\r\n        keyManager,\r\n        getTreeNodeByDataAdjust,\r\n    }: {\r\n        props: {\r\n            /*useTreeNode*/\r\n            data?: SimpleObject[],\r\n            labelField?: string,\r\n            keyField?: string,\r\n            childrenField?: string,\r\n            filterNodeMethod?: (node: Node) => boolean,\r\n            isLeaf?: (node: Node) => boolean,\r\n            isCheckable?: (node: Node) => boolean,\r\n            getChildren?: (node: Node, cb: (data: SimpleObject[]) => void) => void,\r\n            lazy?: boolean,\r\n            showCheckbox?: boolean,\r\n            checkStrictly?: boolean,\r\n\r\n            /*useTree*/\r\n            according?: boolean,\r\n            autoExpandParent?: boolean,\r\n            expandOnClickNode?: boolean,\r\n            checkOnClickNode?: boolean,\r\n            defaultExpandAll?: boolean,\r\n            currentKey?: string,\r\n        },\r\n        emit: {\r\n            onExpand: (node: Node) => void,\r\n            onExpandChange: (keys: string[]) => void,\r\n            onCollapse: (node: Node) => void,\r\n            onCheck: (node: Node) => void,\r\n            onUncheck: (node: Node) => void,\r\n            onCheckChange: (keys: string[]) => void,\r\n            onClickNode: (node: Node) => void,\r\n            onUpdateData: (data?: SimpleObject[]) => void,\r\n            onUpdateCurrentKey: (key?: string) => void,\r\n        },\r\n        keyManager: (obj: any, keyField: string | undefined | null) => string,\r\n        getTreeNodeByDataAdjust?: (node: Node) => void,\r\n    }\r\n) {\r\n\r\n    const {dataModel, state, utils: treeNodeUtils, methods: treeNodeMethods} = useTreeNode<Node>({props, event: {emit}, keyManager, getTreeNodeByDataAdjust})\r\n    const current = useModel(() => props.currentKey, emit.onUpdateCurrentKey)\r\n\r\n    const utils = {\r\n        ...treeNodeUtils,\r\n        /*遍历key或者node*/\r\n        handleKeyOrNode: async (keyOrNode: string | Node | (string | Node)[], handler: (node: Node) => void | Promise<void>): Promise<void> => {\r\n            if (!keyOrNode) {\r\n                return\r\n            }\r\n            if (!Array.isArray(keyOrNode)) {\r\n                const node = baseMethods.getNode(keyOrNode)\r\n                if (!!node) {await handler(node)}\r\n            } else {\r\n                await Promise.all(keyOrNode.map(k => utils.handleKeyOrNode(k, handler)))\r\n            }\r\n        },\r\n        /*获取子节点数据异步方法*/\r\n        getChildrenAsync: (node: Node): Promise<SimpleObject[]> => {\r\n            return new Promise((resolve) => {\r\n                if (!props.getChildren) {\r\n                    console.error('getChildren is required when using lazy mode!')\r\n                    return\r\n                }\r\n                if (node.level === 0) {\r\n                    !!state.root && (state.root.loading = true);\r\n                } else {\r\n                    node.loading = true\r\n                }\r\n                props.getChildren(node, (results) => {\r\n                    if (node.level === 0) {\r\n                        !!state.root && (state.root.loading = false)\r\n                    } else {\r\n                        node.loading = false\r\n                        node.loaded = true\r\n                    }\r\n                    resolve(results)\r\n                })\r\n            })\r\n        },\r\n        /*获取Node所有的父节点*/\r\n        getParents: (keyOrNode: Node | string): Node[] => {\r\n            let node = baseMethods.getNode(keyOrNode)\r\n            if (!node) {return []}\r\n            let parents = [] as Node[]\r\n            let parent = node.parentRef()\r\n            /*root 是没有 parentRef的*/\r\n            while (!!parent && !!parent.parentRef) {\r\n                parents.push(parent)\r\n                parent = parent.parentRef()\r\n            }\r\n            return parents\r\n        },\r\n        /*初始化逻辑*/\r\n        init: () => {\r\n            props.lazy && utils.getChildrenAsync(state.root!).then(val => {dataModel.value = val});\r\n            props.defaultExpandAll && nextTick().then(() => expandMethods.expandAll());\r\n        },\r\n    }\r\n\r\n    /*展开的节点*/\r\n    const expandNodes = computed(() => {\r\n        if (!state.root) {return []}\r\n        let nodes: Node[] = []\r\n        utils.iterate({nodes: state.root.children, handler: (node) => node.expand && nodes.push(node),})\r\n        return nodes\r\n    })\r\n    /*选中的节点*/\r\n    const checkNodes = computed(() => {\r\n        if (!state.root) {return []}\r\n        let nodes: Node[] = []\r\n        utils.iterate({nodes: state.root.children, handler: (node) => node.check && nodes.push(node)})\r\n        return nodes\r\n    })\r\n    /*展开的keys*/\r\n    const expandKeys = computed(() => expandNodes.value.map(i => i.key))\r\n    /*选中的keys*/\r\n    const checkKeys = computed(() => checkNodes.value.map(i => i.key))\r\n\r\n    const baseMethods = {\r\n        /*设置子节点数据*/\r\n        setChildrenData: (node: Node, children: any[]) => !!props.childrenField && (node.data[props.childrenField] = children),\r\n        /*通过keyOrNode获取node*/\r\n        getNode: (keyOrNode: string | Node): Node | undefined => typeof keyOrNode === \"object\" ? keyOrNode : state.nodeMap[keyOrNode],\r\n        /*设置当前选中行*/\r\n        setCurrent: (keyOrNode: string | Node) => current.value = typeof keyOrNode === \"object\" ? keyOrNode.key : keyOrNode,\r\n        /*获取当前选中行*/\r\n        getCurrent: (): Node | undefined => current.value == null ? undefined : baseMethods.getNode(current.value),\r\n    }\r\n    const expandMethods = {\r\n        /*展开节点*/\r\n        expand: async (keyOrNode: string | Node | (string | Node)[]) => {\r\n            await utils.handleKeyOrNode(keyOrNode,\r\n                async (node) => {\r\n                    const parent = node.parentRef()\r\n                    if (!node.expand) {\r\n                        if (\r\n                            props.lazy &&                           // 懒加载模式\r\n                            !node.loaded &&                         // 未曾加载过子节点数据\r\n                            !node.isLeaf                            // 节点不是叶子节点\r\n                        ) {\r\n                            const childrenData = await utils.getChildrenAsync(node)\r\n                            baseMethods.setChildrenData(node, childrenData || [])\r\n                            await nextTick()\r\n                        }\r\n\r\n                        if (props.according) {\r\n                            // 手风琴模式，展开某一个节点的时候，关闭兄弟节点\r\n                            if (!!parent && !!parent.children) {\r\n                                parent.children.forEach((child) => child.key !== node.key && expandMethods.collapse(child))\r\n                            }\r\n                        }\r\n                        node.expand = true\r\n                        await nextTick()\r\n\r\n                        emit.onExpand(node)\r\n                        emit.onExpandChange(expandKeys.value)\r\n                    }\r\n                    if (!!props.autoExpandParent && !!parent && parent.level !== 0) {\r\n                        await expandMethods.expand(parent)\r\n                    }\r\n                })\r\n        },\r\n        /*收起节点*/\r\n        collapse: async (keyOrNode: string | Node | (string | Node)[]) => {\r\n            await utils.handleKeyOrNode(keyOrNode,\r\n                async (node) => {\r\n                    await utils.iterate({\r\n                        nodes: [node, ...(node.children || [])],\r\n                        handler: (node) => {\r\n                            if (node.expand) {\r\n                                node.expand = false\r\n                                emit.onCollapse(node)\r\n                            }\r\n                        }\r\n                    })\r\n                    await nextTick()\r\n                    emit.onExpandChange(expandKeys.value)\r\n                })\r\n        },\r\n        /*展开或者收起节点*/\r\n        toggleExpand: (keyOrNode: string | Node) => {\r\n            const node = baseMethods.getNode(keyOrNode)\r\n            if (!node) {return}\r\n            node.expand ? expandMethods.collapse(keyOrNode) : expandMethods.expand(keyOrNode)\r\n        },\r\n        /*展开所有节点*/\r\n        expandAll: () => utils.iterate({nodes: state.root!.children, handler: node => node.expand = true}),\r\n        /*收起所有节点*/\r\n        collapseAll: () => expandNodes.value.forEach(node => node.expand = false),\r\n    }\r\n\r\n    const checkMethods = {\r\n        /*选中节点*/\r\n        check: async (keyOrNode: string | Node | (string | Node)[]) => {\r\n            await utils.handleKeyOrNode(keyOrNode, async (node) => {\r\n                if (node.check || !node.isCheckable) {return}\r\n                node.check = true\r\n                // 父子关联模式下，改变子节点以及父节点状态\r\n                if (!props.checkStrictly) {\r\n                    // 选中所有子节点\r\n                    utils.iterate({nodes: node.children, handler: (child) => child.check = true,})\r\n                    // 更新父节点状态，如果父节点所有的子节点都处于选中状态，则更新父节点为选中状态\r\n                    let parent = node.parentRef()\r\n                    while (!!parent && !!parent.key) {\r\n                        if (!!parent.parentRef && parent.children!.every(child => child.check)) {\r\n                            parent.check = true\r\n                            parent = !!parent.parentRef ? parent.parentRef() : null\r\n                        } else {\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n                await nextTick()\r\n                emit.onCheck(node)\r\n                emit.onCheckChange(checkKeys.value)\r\n            })\r\n        },\r\n        /*取消选中节点*/\r\n        uncheck: async (keyOrNode: string | Node | (string | Node)[]) => {\r\n            await utils.handleKeyOrNode(keyOrNode, async node => {\r\n                if (!node.check || !node.isCheckable) {return}\r\n                node.check = false\r\n                // 父子关联模式下，改变子节点以及父节点状态\r\n                if (!props.checkStrictly) {\r\n                    // 取消选中所有子节点\r\n                    utils.iterate({nodes: node.children, handler: (child) => child.check = false,})\r\n                    // 更新父节点状态，如果父节点所有的子节点都处于非选中状态，则更新父节点为非选中状态\r\n                    let parent = node.parentRef()\r\n                    while (!!parent && !!parent.key) {\r\n                        if (parent.check) {\r\n                            parent.check = false\r\n                            parent = parent.parentRef()\r\n                        } else {\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n\r\n                await nextTick()\r\n                emit.onUncheck(node)\r\n                emit.onCheckChange(checkKeys.value)\r\n            })\r\n        },\r\n        /*选中或者取消选中节点*/\r\n        toggleCheck: (keyOrNode: string | Node) => {\r\n            const node = baseMethods.getNode(keyOrNode)\r\n            if (!node) return\r\n            node.check ? checkMethods.uncheck(keyOrNode) : checkMethods.check(keyOrNode)\r\n        },\r\n        /*选中所有节点*/\r\n        checkAll: () => utils.iterate({nodes: state.root!.children, handler: node => node.isCheckable && (node.check = true)}),\r\n        /*取消选中所有节点*/\r\n        uncheckAll: () => checkNodes.value.forEach(node => node.check = false),\r\n        /*获取所有选中的节点*/\r\n        getCheckedData: () => checkNodes.value,\r\n        /*刷新所有节点的选中状态*/\r\n        refreshCheckStatus: async (keyOrNode: string | Node) => {\r\n            if (!props.showCheckbox) return\r\n            if (props.checkStrictly) return;\r\n            await delay(0)\r\n            const node = baseMethods.getNode(keyOrNode)\r\n            if (!node) {return }\r\n            const nodes = [] as Node[]\r\n            utils.iterate({\r\n                nodes: node.children,\r\n                handler: node => {nodes.unshift(node)},\r\n                iterateChildrenFirst: true,\r\n            })\r\n            nodes.unshift(node)\r\n            nodes.unshift(...utils.getParents(node).reverse())\r\n            nodes.reverse().forEach(node => {\r\n                /*刷新选中状态的前提是有子节点数据*/\r\n                if (node.isLeaf || !node.children || node.children.length === 0) return\r\n                let hasCheck = false, hasUncheck = false;\r\n                /*console.log({\r\n                    node: node.label,\r\n                    children: node.children.map(child => child.label)\r\n                })*/\r\n                node.children.forEach(child => child.check ? hasCheck = true : hasUncheck = true)\r\n                if (node.check && hasUncheck) {\r\n                    // 自身选中而子节点有非选中,取消当前节点的选中状态\r\n                    node.check = false\r\n                }\r\n                if (!node.check && hasCheck && !hasUncheck) {\r\n                    // 自身非选中而子节点全部选中，选中当前节点\r\n                    node.check = true\r\n                }\r\n            })\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        /*点击展开图标*/\r\n        onClickExpandIcon: async (e: MouseEvent, node: Node) => {\r\n            e.stopPropagation()\r\n            await expandMethods.toggleExpand(node)\r\n        },\r\n        /*点击复选框*/\r\n        onClickCheckbox: async (e?: MouseEvent, node?: Node) => {\r\n            !!e && e.stopPropagation();\r\n            !!node && await checkMethods.toggleCheck(node)\r\n        },\r\n        /*点击行*/\r\n        onClickCell: async (e: MouseEvent, node: Node) => {\r\n            emit.onClickNode(node)\r\n            baseMethods.setCurrent(node)\r\n            props.expandOnClickNode && (await expandMethods.toggleExpand(node));\r\n            props.checkOnClickNode && (await checkMethods.toggleCheck(node));\r\n        },\r\n    }\r\n\r\n    utils.init()\r\n\r\n    return {\r\n        dataModel,\r\n        state,\r\n        current,\r\n        utils,\r\n        handler,\r\n        methods: {\r\n            ...baseMethods,\r\n            expandMethods,\r\n            checkMethods,\r\n            treeNodeMethods,\r\n        },\r\n    }\r\n}\r\n\r\nexport const useTree = Object.assign(use, {\r\n    createProps: <Node>() => {\r\n        return {\r\n            /*useTreeNode*/\r\n            data: {type: Array as PropType<SimpleObject[]>},            // 树形结构数据\r\n            keyField: {type: String},                                   // 每一个树节点用来标识的唯一树形\r\n            labelField: {type: String},                                 // 树节点展示文本对应字段\r\n            childrenField: {type: String},                              // 树节点对应子节点数据对应字段\r\n\r\n            filterNodeMethod: {type: Function as PropType<(node: Node) => boolean>},// 对树节点进行筛选的方法，返回true表示可以显示，返回false表示隐藏\r\n            isLeaf: {type: Function as PropType<(node: Node) => boolean>},// 判断树节点是否为叶子节点的函数，仅在lazy模式有效\r\n            isCheckable: {type: Function as PropType<(node: Node) => boolean>},     // 当即将选中树节点时，判断是否可以选中该树节点\r\n            getChildren: {type: Function as PropType<(node: Node, cb: (data: SimpleObject[]) => void) => void>},// 加载子节点数据的函数，仅当 lazy 为true时有效\r\n            lazy: {type: Boolean},                                      // 是否懒加载子节点数据\r\n            showCheckbox: {type: Boolean},                              // 是否展示勾选框\r\n            checkStrictly: {type: Boolean},                             // 在显示复选框的情况下，是否严格遵循父子互不关联的做法，默认为false\r\n\r\n            /*useTree*/\r\n            according: {type: Boolean},                                 // 是否每次只展开一个同级的树节点\r\n            autoExpandParent: {type: Boolean, default: true},           // 是否展开节点的时候，自动展开父节点\r\n            expandOnClickNode: {type: Boolean, default: true},          // 是否点击树节点的时候展开子节点\r\n            checkOnClickNode: {type: Boolean},                          // 是否点击树节点的时候选中节点\r\n            defaultExpandAll: {type: Boolean},                          // 是否默认展开所有节点\r\n            currentKey: {type: String},                                 // 当前选中节点的key\r\n        }\r\n    },\r\n    createEvent: <Node>() => {\r\n        return {\r\n            onClickNode: (node: Node) => true,                          // 点击节点事件\r\n            onUpdateCurrentKey: (current?: string) => true,                // 当前高亮节点key变化绑定事件\r\n            onUpdateData: (data?: SimpleObject[]) => true,              // 数据变化事件（拖拽排序、数据懒加载）\r\n\r\n            onExpandChange: (expandKeys: string[]) => true,             // 展开节点变化事件\r\n            onExpand: (node: Node) => true,                             // 展开事件\r\n            onCollapse: (node: Node) => true,                           // 关闭节点事件\r\n\r\n            onCheckChange: (checkKeys: string[]) => true,               // 选中节点变化事件\r\n            onCheck: (node: Node) => true,                              // 选中节点事件\r\n            onUncheck: (node: Node) => true,                            // 取消选中节点事件\r\n        }\r\n    }\r\n})\r\n\r\n","import {TreeNode, TreePropsType} from \"./type\";\r\nimport {PropType} from 'vue';\r\nimport {useTree} from \"../core/useTree\";\r\nimport nodeIcon = TreePropsType.nodeIcon;\r\nimport renderContent = TreePropsType.renderContent;\r\nimport allDrag = TreePropsType.allowDrag;\r\nimport allDrop = TreePropsType.allowDrop;\r\n\r\nexport const TreeProps = {\r\n    ...useTree.createProps<TreeNode>(),\r\n    /*基础属性*/\r\n    loading: {type: Boolean},                                   // 当前是否处于loading状态\r\n    nodeIcon: {type: Function as PropType<nodeIcon>},           // 节点图标\r\n    nodeHeight: {type: Number, default: 40},                    // 节点高度\r\n    height: {type: String, default: '100%'},                    // 容器高度\r\n    /*普通属性*/\r\n    renderContent: {type: Function as PropType<renderContent>}, // 树节点内容渲染函数\r\n    /*展开相关属性*/\r\n    emptyText: {type: String, default: '暂无数据'},              // 没有子节点的时候展示的文本\r\n    intent: {type: Number, default: 22},                        // 相邻级节点水平缩进距离，默认16，单位px\r\n    /*拖拽属性*/\r\n    draggable: {type: Boolean},                                 // 是否可拖拽\r\n    allowDrag: {type: Function as PropType<allDrag>},           // 判断节点是否可以拖拽\r\n    allowDrop: {type: Function as PropType<allDrop>},           // 判断目标节点能够被放置\r\n\r\n    folderCollapseIcon: {type: String, default: 'el-icon-folder-s'},//节点收起时展示的图标\r\n    folderExpandIcon: {type: String, default: 'el-icon-folder-opened'},//节点展开时显示的图标\r\n    leafIcon: {type: String, default: 'el-icon-document'},      // 叶子节点显示的图标\r\n\r\n    virtual: {type: Boolean},                                   // 是否开启虚拟滚动\r\n}","import {TreeNode} from \"./type\";\r\n\r\nconst basePadding = 8\r\n\r\nexport const TreeUtils = {\r\n    getPaddingLeft: (level: number, intent: number) => {\r\n        return basePadding + (level - 1) * intent\r\n    },\r\n    /**\r\n     * 计算treeNode的样式\r\n     * @author  韦胜健\r\n     * @date    2020/11/28 9:25\r\n     */\r\n    getTreeNodeStyles: (level: number, intent: number, nodeHeight: number) => {\r\n        const basePadding = 8\r\n        return {\r\n            paddingLeft: `${TreeUtils.getPaddingLeft(level, intent)}px`,\r\n            paddingRight: `${basePadding}px`,\r\n            height: `${nodeHeight}px`,\r\n        }\r\n    },\r\n    /**\r\n     * 计算tree node的class\r\n     * @author  韦胜健\r\n     * @date    2020/11/28 10:35\r\n     */\r\n    getTreeNodeClasses: (node: TreeNode, current?: string) => {\r\n        return [\r\n            'pl-tree-node',\r\n            {\r\n                'pl-tree-node-current': node.key === current,\r\n                'pl-tree-node-not-checkable': !node.isCheckable,\r\n            }\r\n        ]\r\n    },\r\n}","import {addClass} from \"plain-utils/dom/addClass\";\r\nimport {nextIndex} from \"../utils/nextIndex\";\r\nimport {StyleProperties} from \"../shims\";\r\nimport {PlScroll} from \"../packages/scroll/scroll\";\r\n\r\nfunction createIndicator(hostEl: HTMLElement, vertical: boolean) {\r\n\r\n    const indicatorSize = 15\r\n\r\n    const {top, height, left, width} = hostEl.getBoundingClientRect()\r\n\r\n    const indicator = {\r\n        start: document.createElement('div'),\r\n        end: document.createElement('div'),\r\n    }\r\n\r\n    addClass(indicator.start, `pl-auto-scroll-indicator-start pl-auto-scroll-indicator-${vertical ? 'vertical' : 'horizontal'}`)\r\n    addClass(indicator.end, `pl-auto-scroll-indicator-end pl-auto-scroll-indicator-${vertical ? 'vertical' : 'horizontal'}`)\r\n\r\n    const publicStyles = {\r\n        position: 'fixed',\r\n        left: `${left}px`,\r\n        top: `${top}px`,\r\n\r\n        width: `${vertical ? width : indicatorSize}px`,\r\n        height: `${vertical ? indicatorSize : height}px`,\r\n        zIndex: `${nextIndex()}`,\r\n    } as StyleProperties\r\n\r\n    Object.assign(indicator.start.style, publicStyles)\r\n\r\n    if (vertical) {\r\n        let bottomIndicatorTop = top + height - indicatorSize\r\n        bottomIndicatorTop = Math.min(bottomIndicatorTop, document.body.offsetHeight - indicatorSize)\r\n\r\n        Object.assign(indicator.end.style, {\r\n            ...publicStyles,\r\n            top: `${bottomIndicatorTop}px`,\r\n        } as StyleProperties)\r\n    } else {\r\n        let rightIndicatorLeft = left + width - indicatorSize\r\n        rightIndicatorLeft = Math.min(rightIndicatorLeft, document.body.offsetWidth - indicatorSize)\r\n        Object.assign(indicator.end.style, {\r\n            ...publicStyles,\r\n            left: `${rightIndicatorLeft}px`,\r\n        } as StyleProperties)\r\n    }\r\n\r\n    document.body.appendChild(indicator.start)\r\n    document.body.appendChild(indicator.end)\r\n\r\n    return indicator\r\n}\r\n\r\nexport function useAutoScroll(config: {\r\n    getScroll: () => typeof PlScroll.use.class,\r\n    vertical: boolean,\r\n}) {\r\n\r\n    let {getScroll, vertical} = config\r\n\r\n    const state = {\r\n        indicator: null as null | ReturnType<typeof createIndicator>\r\n    }\r\n\r\n    const methods = {\r\n        showHover() {\r\n\r\n            const scroll = getScroll()\r\n            state.indicator = createIndicator(scroll.refs.host, vertical)\r\n\r\n            const handler = {\r\n                enterStart: () => {\r\n                    vertical ? scroll.methods.autoScrollTop() : scroll.methods.autoScrollLeft()\r\n                },\r\n                enterEnd: () => {\r\n                    vertical ? scroll.methods.autoScrollBottom() : scroll.methods.autoScrollRight()\r\n                },\r\n                leave: () => {\r\n                    scroll.methods.stopAutoScroll()\r\n                }\r\n            }\r\n\r\n            state.indicator.start.addEventListener('mouseenter', handler.enterStart)\r\n            state.indicator.end.addEventListener('mouseenter', handler.enterEnd)\r\n\r\n            state.indicator.start.addEventListener('mouseleave', handler.leave)\r\n            state.indicator.end.addEventListener('mouseleave', handler.leave)\r\n        },\r\n        hideHover() {\r\n            if (!!state.indicator) {\r\n                state.indicator.start.parentNode!.removeChild(state.indicator.start)\r\n                state.indicator.end.parentNode!.removeChild(state.indicator.end)\r\n            }\r\n        },\r\n    }\r\n\r\n    return methods\r\n\r\n}","/**\r\n * 获取拖拽的rowEl对象\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:55\r\n */\r\nimport {hasClass} from \"plain-utils/dom/hasClass\";\r\n\r\nexport function getRowEl(e: MouseEvent, rowClass: string): HTMLElement {\r\n    let rowEl = e.target as HTMLElement\r\n    while (!!rowEl && !hasClass(rowEl, rowClass)) {\r\n        rowEl = rowEl.parentNode as HTMLElement\r\n    }\r\n    if (!rowEl) {\r\n        console.log({e, rowClass})\r\n        throw new Error(`can't find item element!`)\r\n    }\r\n    return rowEl\r\n}","/**\r\n * 获取可以滚动的父组件\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:50\r\n */\r\nexport function getScrollParent(el: HTMLElement): HTMLElement {\r\n    while (!!el && el.scrollHeight <= el.offsetHeight) {\r\n        el = el.parentNode as HTMLElement\r\n    }\r\n    return el\r\n}","import {TreeDropType} from \"../utils/tree-constant\";\r\nimport {useAutoScroll} from \"../../../use/useAutoScroll\";\r\nimport {PlScroll} from \"../../scroll/scroll\";\r\nimport {StyleProperties} from \"../../../shims\";\r\nimport {getRowEl} from \"../../../utils/getRowEl\";\r\nimport {getScrollParent} from \"../../../utils/getScrollParent\";\r\n\r\nconst indicatorSize = 3;\r\n\r\nexport function useTreeDraggier<T extends {\r\n    key: string,\r\n    index: number,\r\n    isLeaf: boolean,\r\n    level: number,\r\n    parentRef: () => T | null,\r\n    children?: T[],\r\n    check?: boolean,\r\n    empty: boolean,\r\n}>(\r\n    {\r\n        rowClass,\r\n        dragClass,\r\n        flatList,\r\n        getScroll,\r\n        props,\r\n        methods,\r\n    }: {\r\n        rowClass: string,                                   // 行 class 标识\r\n        dragClass: string,                                  // 拖拽的节点class标识\r\n        flatList: { value: T[] },                           // 拍平的数据\r\n        getScroll: () => typeof PlScroll.use.class,           // 获取 Scroll 组件实例引\r\n        props: {\r\n            intent: number,                                 // 层级偏移距离\r\n            allowDrag?: (node: T) => boolean | undefined,   // 判断元素是否可以拖拽\r\n            allowDrop?: (start: T, move: T, dropType: TreeDropType) => boolean | undefined,// 判断元素是否可以放置\r\n        },\r\n        methods: {\r\n            expand: (node: T) => void,                      // 展开某个元素\r\n            refreshCheckStatus: () => void,                 // 刷新所有元素的选中状态\r\n            removeSelf: (node: T) => void,\r\n            previousSibling: (self: T, target: T) => void,\r\n            nextSibling: (self: T, target: T) => void,\r\n            unshiftChild: (self: T, target: T) => void,\r\n        },\r\n    }\r\n) {\r\n\r\n    const state = {\r\n\r\n        startNode: null as null | T,                    // 拖拽开始的时候节点\r\n        moveNode: null as null | T,                     // 拖拽移动过程中的节点\r\n\r\n        startScrollTop: 0,                              // 开始拖拽的时候，滚动容器的scrollTop\r\n        moveScrollTop: 0,                               // 拖拽移动过程中，滚动容器的scrollTop\r\n\r\n        startClientY: 0,                                // 开始拖拽的时候，鼠标的clientY值\r\n        moveClientY: 0,                                 // 拖拽过程中，鼠标的clientY值\r\n\r\n        rowHeight: 0,                                   // 行高（不可变，每行高度都必须一样）\r\n        scrollParent: null as null | HTMLElement,       // 滚动容器节点\r\n        rowEl: null as null | HTMLElement,              // 拖拽开始的时候，节点的行dom对象\r\n        scrollParentRect: {                             // 滚动容器的位置属性\r\n            top: 0,\r\n            left: 0,\r\n            width: 0,\r\n            height: 0,\r\n        },\r\n        indicator: null as null | HTMLElement,          // 指示器dom对象\r\n        dragNodeBaseLeft: 0,                            // dragNode(dragClass标识的拖拽元素)的left属性\r\n\r\n        dropType: TreeDropType.inner,                   // 当前拖拽移动过程中的放置类型\r\n        droppable: false,                               // 当前拖拽过程中，是否可放置\r\n    }\r\n\r\n    const autoScroll = useAutoScroll({vertical: true, getScroll,})\r\n\r\n    const utils = {\r\n        /**\r\n         * 获取目标节点所有父节点\r\n         * @author  韦胜健\r\n         * @date    2020/8/25 16:33\r\n         */\r\n        getParents: (node: T | null) => {\r\n            const parents = [] as T[]\r\n            while (!!node && node.level > 0) {\r\n                parents.push(node)\r\n                node = node.parentRef()\r\n            }\r\n            return parents\r\n        },\r\n        allowRowDraggable: (node: T) => {\r\n            return !props.allowDrag || props.allowDrag(node) !== false\r\n        },\r\n        allowRowDroppable: (startNode: T, moveNode: T, dropType: TreeDropType) => {\r\n            return !props.allowDrop || props.allowDrop(startNode, moveNode, dropType) !== false\r\n        },\r\n        getIndicatorStyles(moveNode: T, droppable: boolean, dropType: TreeDropType) {\r\n\r\n            const styles: StyleProperties = {}\r\n\r\n            let top = moveNode.index * state.rowHeight + state.scrollParentRect.top - (state.moveScrollTop)\r\n            let paddingLeft = (moveNode.level - state.startNode!.level) * props.intent\r\n\r\n            styles.top = `${dropType === TreeDropType.next ? top + state.rowHeight - indicatorSize : top}px`\r\n            styles.left = `${state.dragNodeBaseLeft + paddingLeft}px`\r\n            styles.width = `${state.scrollParentRect.width - (state.dragNodeBaseLeft - state.scrollParentRect.left) - paddingLeft}px`\r\n            styles.height = `${dropType === TreeDropType.inner ? state.rowHeight : indicatorSize}px`\r\n            styles.backgroundColor = droppable ? '#12b4a5' : '#F38585'\r\n            styles.opacity = dropType === TreeDropType.inner ? '0.15' : ''\r\n\r\n            return styles\r\n        },\r\n        refresh() {\r\n            const top = state.startClientY - state.scrollParentRect.top + (state.moveScrollTop) + (state.moveClientY - state.startClientY)\r\n            let targetIndex = top / state.rowHeight\r\n            const external = targetIndex % 1\r\n            targetIndex = Math.floor(targetIndex)\r\n            let dropType: TreeDropType = external < 0.3 ? TreeDropType.prev : external > 0.7 ? TreeDropType.next : TreeDropType.inner\r\n            const moveNode = flatList.value[targetIndex]\r\n            if (!moveNode) {\r\n                return\r\n            }\r\n\r\n            let droppable = true\r\n\r\n            state.moveNode = moveNode\r\n            if (state.moveNode.empty) {\r\n                droppable = false\r\n            } else {\r\n                const parents = utils.getParents(state.moveNode)\r\n                if (parents.map(n => n.key).indexOf(state.startNode!.key) > -1) {\r\n                    droppable = false\r\n                }\r\n                if (!utils.allowRowDroppable(state.startNode!, moveNode, dropType)) {\r\n                    droppable = false\r\n                }\r\n            }\r\n\r\n            state.dropType = dropType\r\n            state.droppable = droppable\r\n\r\n            Object.assign(state.indicator!.style, utils.getIndicatorStyles(moveNode, droppable, dropType))\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n            state.startClientY = state.moveClientY = e.clientY\r\n\r\n            state.rowEl = getRowEl(e, rowClass)\r\n            state.rowHeight = state.rowEl.offsetHeight\r\n            const vid = Number(state.rowEl.getAttribute('vid'))\r\n            state.moveNode = state.startNode = flatList.value[vid]\r\n\r\n            if (!utils.allowRowDraggable(state.startNode)) {\r\n                return\r\n            }\r\n\r\n            const dragNode = state.rowEl.querySelector(`.${dragClass}`)!\r\n            state.dragNodeBaseLeft = Math.ceil(dragNode.getBoundingClientRect()!.left)\r\n\r\n            state.scrollParent = getScrollParent(state.rowEl)\r\n            state.startScrollTop = state.moveScrollTop = state.scrollParent.scrollTop\r\n            const {top, left, height, width} = (state.scrollParent.parentNode as HTMLElement).getBoundingClientRect()\r\n            state.scrollParentRect = {top, left, height, width}\r\n\r\n            state.indicator = document.createElement('div')\r\n            state.indicator.style.position = 'fixed'\r\n            state.indicator.style.pointerEvents = 'none'\r\n            state.indicator.style.height = `${indicatorSize}px`\r\n            state.indicator.style.width = `${state.scrollParentRect.width}px`\r\n            state.indicator.style.left = `${state.scrollParentRect.left}px`\r\n            state.indicator.style.backgroundColor = '#12b4a5'\r\n            document.body.appendChild(state.indicator)\r\n\r\n            state.scrollParent.addEventListener('scroll', handler.scroll)\r\n            document.addEventListener('mousemove', handler.mousemove)\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n\r\n            utils.refresh()\r\n            autoScroll.showHover()\r\n        },\r\n        scroll() {\r\n            state.moveScrollTop = state.scrollParent!.scrollTop\r\n            utils.refresh()\r\n        },\r\n        /**\r\n         * 在dragover中判断clientX以及clientY，如果这两个值没有变化，就不往下执行，节省性能\r\n         * @author  韦胜健\r\n         * @date    2020/8/25 22:22\r\n         */\r\n        mousemove: (e: MouseEvent) => {\r\n            const {top, height} = state.scrollParentRect\r\n            if (e.clientY < top || e.clientY > top + height) {\r\n                return;\r\n            }\r\n            state.moveClientY = e.clientY\r\n            utils.refresh()\r\n        },\r\n        mouseup: () => {\r\n\r\n            autoScroll.hideHover()\r\n\r\n            const {startNode, moveNode, dropType, droppable} = state\r\n\r\n            state.scrollParent!.removeEventListener('scroll', handler.scroll)\r\n            document.removeEventListener('mousemove', handler.mousemove)\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n\r\n            state.indicator!.parentNode!.removeChild(state.indicator!)\r\n            state.startClientY = state.moveClientY = 0\r\n            state.rowEl = null\r\n            state.rowHeight = 0\r\n            state.moveNode = null\r\n            state.dragNodeBaseLeft = 0\r\n            state.scrollParent = null\r\n            state.startScrollTop = 0\r\n            state.scrollParentRect = {top: 0, left: 0, height: 0, width: 0}\r\n\r\n            if (!droppable) {\r\n                return\r\n            }\r\n\r\n            methods.removeSelf(startNode!)\r\n\r\n            switch (dropType) {\r\n                case TreeDropType.prev:\r\n                    methods.previousSibling(moveNode!, startNode!)\r\n                    break\r\n                case TreeDropType.inner:\r\n                    methods.unshiftChild(moveNode!, startNode!)\r\n                    methods.expand(moveNode!)\r\n                    break\r\n                case TreeDropType.next:\r\n                    methods.nextSibling(moveNode!, startNode!)\r\n                    break\r\n            }\r\n            methods.refreshCheckStatus()\r\n        }\r\n    }\r\n\r\n    return {\r\n        handler,\r\n        utils,\r\n    }\r\n\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {computed, PropType} from 'vue';\r\nimport './tree.scss'\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {TreeProps} from \"./utils/props\";\r\nimport {TreeUtils} from \"./utils/tree.utils\";\r\nimport {TreeNode} from \"./utils/type\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useTreeDraggier} from './core/useTreeDraggier';\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {useTree} from \"./core/useTree\";\r\nimport {createKeyHandler} from \"../../utils/createKeyHandler\";\r\nimport {PlScroll} from \"../scroll/scroll\";\r\nimport {PlVirtualList} from \"../virtual-list/virtual-list\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {createEventListener} from \"../../utils/createEventListener\";\r\nimport {PlItem} from '../item/item';\r\nimport {PlCheckbox} from \"../checkbox/checkbox\";\r\nimport {PlLoading} from \"../loading/loading\";\r\nimport {PlList} from \"../list/list\";\r\n\r\nexport const PlTree = designComponent({\r\n    name: 'pl-tree',\r\n    props: {\r\n        ...TreeProps,\r\n    },\r\n    emits: useTree.createEvent<TreeNode>(),\r\n    setup({props, event}) {\r\n\r\n        const {emit} = event\r\n        const {refs} = useRefs({list: PlVirtualList, scroll: PlScroll,})\r\n        const {scopedSlots} = useScopedSlots({default: {node: Object as PropType<TreeNode>, index: Number},})\r\n        const {state, methods, current, handler, utils} = useTree<TreeNode>({props, emit, keyManager: createKeyHandler('tree'),})\r\n\r\n        /*tree node content公共的样式*/\r\n        const contentStyles = useStyles(style => {style.height = `${props.nodeHeight}px`})\r\n        /**\r\n         * 拍-平的树形数据（不拍平无法实现虚拟滚动）\r\n         * @author  韦胜健\r\n         * @date    2020/12/2 12:16\r\n         */\r\n        const flatList = computed(() => {\r\n            let result: (TreeNode)[] = []\r\n            if (!state.root) {\r\n                return []\r\n            }\r\n            utils.iterate({\r\n                nodes: state.root.children,\r\n                iterateChildren: (treeNode) => treeNode.expand,\r\n                handler: (treeNode) => {\r\n                    result.push(treeNode)\r\n                    // console.log(treeNode.label, {'!treeNode.isLeaf': !treeNode.isLeaf, 'treeNode.loaded': treeNode.loaded, 'treeNode.isVisible': treeNode.isVisible, 'treeNode.expand': treeNode.expand, 'treeNode.children': treeNode.children,})\r\n                    if (\r\n                        !treeNode.isLeaf &&\r\n                        treeNode.loaded &&\r\n                        treeNode.isVisible &&\r\n                        treeNode.expand &&\r\n                        treeNode.children!.length === 0\r\n                    ) {\r\n                        result.push({\r\n                            key: `@@empty_${treeNode.key}`,\r\n                            parentRef: () => treeNode,\r\n                            empty: true,\r\n                            level: treeNode.level + 1,\r\n                        } as TreeNode)\r\n                    }\r\n                },\r\n            },)\r\n            result = result.filter((treeNode) => treeNode.empty ? true : !!treeNode.isVisible)\r\n            result.forEach((node, index) => node.index = index)\r\n            return result\r\n        })\r\n\r\n        const exposeMethods = {\r\n            ...methods,\r\n            ...methods.expandMethods,\r\n            ...methods.checkMethods,\r\n            ...methods.treeNodeMethods,\r\n        }\r\n\r\n        /*---------------------------------------draggier-------------------------------------------*/\r\n\r\n        const draggier = useTreeDraggier<TreeNode>({\r\n            rowClass: 'pl-tree-node',\r\n            dragClass: 'pl-tree-node-draggier',\r\n            flatList,\r\n            getScroll: () => props.virtual ? refs.list!.refs.scroll! : refs.scroll!,\r\n            props,\r\n            methods: {\r\n                ...exposeMethods,\r\n                refreshCheckStatus: async () => {\r\n                    await delay(120)\r\n                    flatList.value.forEach(methods.checkMethods.refreshCheckStatus)\r\n                },\r\n            },\r\n        })\r\n\r\n        const render = {\r\n            node: (node: TreeNode, index: number) => {\r\n                if (node.empty) {\r\n                    return render.empty(node)\r\n                }\r\n                return (\r\n                    <PlItem\r\n                        key={node.key}\r\n                        class={TreeUtils.getTreeNodeClasses(node, current.value)}\r\n                        style={TreeUtils.getTreeNodeStyles(node.level, props.intent, props.nodeHeight)}\r\n                        {...{vid: index}}>\r\n\r\n                        <div class=\"pl-tree-node-operator\">\r\n                            {!!props.showCheckbox && <PlCheckbox\r\n                                checkStatus={node.checkStatus}\r\n                                disabled={!node.isCheckable}\r\n                                {...{onClick: (e?: MouseEvent) => handler.onClickCheckbox(e, node)}}\r\n                            />}\r\n                            <div class=\"pl-tree-node-expander\">\r\n                                {node.loading ?\r\n                                    <PlLoading type=\"gamma\"/> :\r\n                                    <PlIcon icon={node.isLeaf ? props.leafIcon : node.expand ? props.folderExpandIcon : props.folderCollapseIcon}\r\n                                            {...createEventListener({onClick: (e: MouseEvent) => handler.onClickExpandIcon(e, node)})}/>\r\n                                }\r\n                            </div>\r\n                            {!!props.draggable && <PlIcon icon=\"el-icon-list\" class=\"pl-tree-node-draggier\"\r\n                                                          {...createEventListener({onMousedown: draggier.handler.mousedown})}/>}\r\n                            {!!props.nodeIcon && <PlIcon icon={props.nodeIcon(node)}/>}\r\n                        </div>\r\n                        <div class=\"pl-tree-node-content\"\r\n                             style={contentStyles.value}\r\n                             onClick={(e: MouseEvent) => handler.onClickCell(e, node)}>\r\n                            {scopedSlots.default({node, index}, !!props.renderContent ? props.renderContent({node, index}) : node.label)}\r\n                        </div>\r\n                    </PlItem>\r\n                )\r\n            },\r\n            empty: (emptyNode: TreeNode) => {\r\n                const parent = emptyNode.parentRef()!\r\n                return (\r\n                    <PlItem\r\n                        key={`${parent.key}_empty`}\r\n                        class=\"pl-tree-node pl-tree-empty-node\"\r\n                        style={TreeUtils.getTreeNodeStyles(parent.level + 1, props.intent, props.nodeHeight)}>\r\n                        <div class=\"pl-tree-node-operator\">\r\n                            <div class=\"pl-tree-node-expander\">\r\n                                <PlIcon icon=\"el-icon-close-bold\"/>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"pl-tree-node-content\" style={contentStyles.value}>\r\n                            <span>{props.emptyText}</span>\r\n                        </div>\r\n                    </PlItem>\r\n                )\r\n            },\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                ...exposeMethods,\r\n            },\r\n            render: () => {\r\n                return (\r\n                    <div class=\"pl-tree\" style={{height: props.height}} v-loading={props.loading || (!!state.root && state.root.loading)}>\r\n                        {flatList.value.length === 0 ? (\r\n                            <div class=\"pl-tree-placeholder\" key=\"placeholder\">\r\n                                <PlIcon icon=\"el-icon-folder-opened\"/>\r\n                                <span>{props.emptyText}</span>\r\n                            </div>\r\n                        ) : (\r\n                            props.virtual ?\r\n                                (<PlVirtualList\r\n                                    ref=\"list\"\r\n                                    data={flatList.value}\r\n                                    size={props.nodeHeight}\r\n                                    v-slots={{\r\n                                        // default: ({item, index}: { item: TreeNode, index: number }) => render.node(item, index),\r\n                                        content: ({data}: { data: { item: TreeNode, index: number }[] }) => (\r\n                                            <PlList direction=\"top\" class=\"pl-tree-node-list\">\r\n                                                {data.map(({item, index}) => render.node(item, index))}\r\n                                            </PlList>\r\n                                        )\r\n                                    }}\r\n                                />) : (\r\n                                    <PlScroll ref=\"scroll\">\r\n                                        <PlList direction=\"top\" class=\"pl-tree-node-list\">\r\n                                            {flatList.value.map((node, index) => render.node(node, index))}\r\n                                        </PlList>\r\n                                    </PlScroll>\r\n                                )\r\n                        )}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {PlTree} from './tree'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlTree)","import {PlSelect} from './select'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlSelectPanel} from \"./select-panel\";\r\n\r\nexport default createComponentPlugin(PlSelect, {\r\n    exposeComponents: {\r\n        PlSelectPanel,\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlSelectOption} from \"../select/select-option\";\r\n\r\nexport default createComponentPlugin(PlSelectOption)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlSelectGroup} from \"../select/select-group\";\r\n\r\nexport default createComponentPlugin(PlSelectGroup)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useNumber} from \"../../use/useNumber\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {computed} from 'vue';\r\nimport {HTMLInputEvent} from \"../../shims\";\r\n\r\nexport const PlDateTimeInput = designComponent({\r\n    name: 'pl-date-time-input',\r\n    props: {\r\n        ...EditProps,\r\n        width: {type: [String, Number], default: 138},\r\n        modelValue: {type: String},\r\n        displayFormat: {type: String},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: string) => true,\r\n        onFocus: (e: Event) => true,\r\n        onBlur: (e: Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            input: HTMLInputElement,\r\n        })\r\n\r\n        const {editComputed} = useEdit()\r\n\r\n        const {numberState} = useNumber(props, ['width'])\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoEmit: false})\r\n\r\n        const styles = useStyles(style => {style.width = unit(numberState.width)})\r\n\r\n        const regexp = computed(() => new RegExp('^' + props.displayFormat!.replace(/[a-zA-Z]/g, '\\\\d') + '$'))\r\n\r\n        const methods = {\r\n            focus: () => {\r\n                refs.input.focus()\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            input: (e: HTMLInputEvent) => {\r\n                model.value = e.target.value\r\n                if (!model.value || regexp.value.test(model.value)) {\r\n                    emit.onUpdateModelValue(model.value)\r\n                }\r\n            },\r\n            blur: (e: Event) => {\r\n                model.value = props.modelValue\r\n                emit.onBlur(e)\r\n            },\r\n            focus: (e: Event) => {\r\n                emit.onFocus(e)\r\n            },\r\n        }\r\n\r\n\r\n        return {\r\n            refer: {\r\n                refs,\r\n                methods,\r\n            },\r\n            render: () => (\r\n                <input type=\"text\"\r\n                       ref=\"input\"\r\n                       class=\"pl-date-time-inner-input pl-input-custom-inner-input\"\r\n                       style={styles.value}\r\n                       value={model.value}\r\n                       onInput={handler.input as any}\r\n                       onBlur={handler.blur}\r\n                       onFocus={handler.focus}\r\n                       disabled={editComputed.value.disabled as any}\r\n                       readonly={editComputed.value.readonly as any}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import {PlDateTimeInput} from './date-time-input'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlDateTimeInput)","import {ModelType} from \"../../shims\";\r\nimport {useStyle} from \"../../use/useStyle\";\r\nimport {useEdit} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Input from '../input'\r\nimport {computed} from 'vue';\r\nimport {EditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {handleKeyboard} from \"../keyboard\";\r\nimport {PlDateTimeInput} from \"./date-time-input\";\r\n\r\nexport function useDateTime(\r\n    {\r\n        value,\r\n        start,\r\n        end,\r\n        props,\r\n        agentState,\r\n        emit,\r\n    }: {\r\n        value: ModelType,\r\n        start: ModelType,\r\n        end: ModelType,\r\n        props: {\r\n            range?: boolean,\r\n        },\r\n        agentState: EditPopperAgent,\r\n        emit: {\r\n            onBlur: Function\r\n        },\r\n    }\r\n) {\r\n\r\n    useStyle()\r\n\r\n    const {refs} = useRefs({\r\n        valueInput: PlDateTimeInput,\r\n        startInput: PlDateTimeInput,\r\n        endInput: PlDateTimeInput,\r\n        plInput: Input,\r\n    })\r\n\r\n    const inputValue = computed(() => {\r\n        return !props.range ? value.value : ((start.value || '') + (end.value || ''))\r\n    })\r\n\r\n    const handler = {\r\n        clearHandler: () => {\r\n            if (!props.range) {\r\n                value.value = null\r\n            } else {\r\n                start.value = null\r\n                end.value = null\r\n            }\r\n        },\r\n        clickInput() {\r\n            if (!props.range) {\r\n                agentState.methods.toggle()\r\n            } else {\r\n                agentState.methods.show()\r\n            }\r\n        },\r\n        customInputFocus(e: Event) {\r\n            agentState.inputHandler.onFocus(e)\r\n        },\r\n        async customInputBlur(e: Event) {\r\n            if (!props.range) {\r\n                agentState.inputHandler.onBlur(e)\r\n            } else {\r\n                await delay(0)\r\n                if ([\r\n                    refs.startInput!.refs.input,\r\n                    refs.endInput!.refs.input,\r\n                ].indexOf(document.activeElement as any) === -1) {\r\n                    agentState.state.focusCounter--\r\n                    if (agentState.state.focusCounter === 0) {\r\n                        emit.onBlur()\r\n                        agentState.methods.hide()\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        keydown: handleKeyboard({\r\n            enter: agentState.inputHandler.onEnter,\r\n            esc: agentState.inputHandler.onEsc,\r\n        })\r\n    }\r\n\r\n    return {\r\n        refs,\r\n        inputValue,\r\n        handler,\r\n    }\r\n\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {TimePanelProps} from \"./panel/time-panel\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {computed} from 'vue';\r\nimport {PlainDate} from \"../../utils/PlainDate\";\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {TimeServiceGetter} from \"./servce/time-service\";\r\nimport {TimeRangePanelType} from \"./panel/time-range-panel\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {useDateTime} from \"../date-time-input/useDateTime\";\r\nimport './time.scss'\r\nimport {PlInput} from \"../input/input\";\r\nimport {PlDateTimeInput} from \"../date-time-input/date-time-input\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\n\r\nexport const PlTime = designComponent({\r\n    name: 'pl-time',\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n        ...TimePanelProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: string) => true,\r\n        onUpdateStart: (val?: string) => true,\r\n        onUpdateEnd: (val?: string) => true,\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots(['foot'], true)\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const startModel = useModel(() => props.start, emit.onUpdateStart)\r\n        const endModel = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const formatData = computed(() => ({\r\n            value: new PlainDate(model.value, props.displayFormat, props.valueFormat),\r\n            start: new PlainDate(startModel.value, props.displayFormat, props.valueFormat),\r\n            end: new PlainDate(endModel.value, props.displayFormat, props.valueFormat),\r\n        }))\r\n\r\n        const serviceHandler = {\r\n            onChange: (val: string | undefined, type?: TimeRangePanelType) => {\r\n                // console.log('service change', {val, type})\r\n                if (!props.range) {\r\n                    model.value = val\r\n                } else {\r\n                    if (type === TimeRangePanelType.start) {\r\n                        startModel.value = val\r\n                    } else {\r\n                        endModel.value = val\r\n                    }\r\n                }\r\n            },\r\n            onMousedownBasePanel: async () => {\r\n                agentState.state.focusCounter++\r\n                await delay(0)\r\n                refs.valueInput!.methods.focus()\r\n            },\r\n            onMousedownStartPanel: async () => {\r\n                agentState.state.focusCounter++\r\n                await delay(0)\r\n                refs.startInput!.methods.focus()\r\n            },\r\n            onMousedownEndPanel: async () => {\r\n                agentState.state.focusCounter++\r\n                await delay(0)\r\n                refs.endInput!.methods.focus()\r\n            }\r\n        }\r\n\r\n        const agentState = useEditPopperAgent({\r\n            event: {emit},\r\n            serviceGetter: TimeServiceGetter,\r\n            option: {\r\n                reference: () => refs.plInput as any,\r\n                renderAttrs: () => ({\r\n                    ...(Object.keys(TimePanelProps).reduce((ret: any, key) => {\r\n                        ret[key] = (props as any)[key]\r\n                        return ret\r\n                    }, {})),\r\n                    modelValue: model.value,\r\n                    start: startModel.value,\r\n                    end: endModel.value,\r\n                    ...serviceHandler,\r\n                    foot: slots.foot.isExist() ? slots.foot : undefined,\r\n                })\r\n            },\r\n        })\r\n\r\n        const {\r\n            refs,\r\n            handler,\r\n            inputValue,\r\n        } = useDateTime({\r\n            value: model,\r\n            start: startModel,\r\n            end: endModel,\r\n            props,\r\n            agentState,\r\n            emit,\r\n        })\r\n\r\n        const customHandler = {\r\n            change: (val: string, type: 'start' | 'end' | 'value') => {\r\n                const {value: valuePd, start: startPd, end: endPd} = formatData.value\r\n\r\n                switch (type) {\r\n                    case \"value\":\r\n                        if (!val) {\r\n                            valuePd.setValue(undefined)\r\n                            model.value = undefined\r\n                            return;\r\n                        }\r\n                        if (valuePd.format(valuePd.parseDisplayString(val)) != val) {\r\n                            return;\r\n                        }\r\n\r\n                        valuePd.setDisplayValue(val)\r\n                        model.value = valuePd.valueString!\r\n\r\n                        break\r\n                    case \"start\":\r\n                        if (!val) {\r\n                            return;\r\n                        }\r\n                        if (startPd.format(startPd.parseDisplayString(val)) != val) {\r\n                            return;\r\n                        }\r\n\r\n                        startPd.setDisplayValue(val)\r\n                        startModel.value = startPd.valueString as string\r\n\r\n                        if (endPd.isNull || startPd.Hms! > endPd.Hms) {\r\n                            endModel.value = startModel.value\r\n                        }\r\n\r\n                        break\r\n\r\n                    case \"end\":\r\n                        if (!val) {\r\n                            return;\r\n                        }\r\n                        if (endPd.format(endPd.parseDisplayString(val)) != val) {\r\n                            return;\r\n                        }\r\n\r\n                        endPd.setDisplayValue(val)\r\n                        endModel.value = endPd.valueString as string\r\n\r\n                        if (startPd.isNull || endPd.Hms! < startPd.Hms) {\r\n                            startModel.value = endModel.value\r\n                        }\r\n\r\n                        break\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <PlInput\r\n                    ref=\"plInput\"\r\n                    class=\"pl-time pl-input-custom\"\r\n                    modelValue={inputValue.value}\r\n                    suffixIcon=\"el-icon-time\"\r\n                    clearIcon\r\n                    isFocus={agentState.state.focusCounter > 0}\r\n                    width={null as any}\r\n                    inputInnerTabindex={null as any}\r\n                    clearHandler={handler.clearHandler}\r\n                    onClickInput={handler.clickInput}\r\n                    onKeydown={handler.keydown}>\r\n                    <div{...{class: 'pl-input-custom-inner', range: String(props.range)}}>\r\n                        {!props.range ? (\r\n                            <PlDateTimeInput\r\n                                ref=\"valueInput\"\r\n                                modelValue={formatData.value.value.displayString!}\r\n                                displayFormat={props.displayFormat}\r\n                                {...{onChange: (val: string) => customHandler.change(val, 'value')}}\r\n                                onFocus={handler.customInputFocus}\r\n                                onBlur={handler.customInputBlur}/>\r\n                        ) : (\r\n                            <>\r\n                                <PlDateTimeInput\r\n                                    ref=\"startInput\"\r\n                                    width=\"100\"\r\n                                    modelValue={formatData.value.start.displayString!}\r\n                                    displayFormat={props.displayFormat}\r\n                                    {...{onChange: (val: string) => customHandler.change(val, 'start')}}\r\n                                    onFocus={handler.customInputFocus}\r\n                                    onBlur={handler.customInputBlur}/>\r\n                                <span>~</span>\r\n                                <PlDateTimeInput\r\n                                    ref=\"endInput\"\r\n                                    width=\"100\"\r\n                                    modelValue={formatData.value.end.displayString!}\r\n                                    displayFormat={props.displayFormat}\r\n                                    {...{onChange: (val: string) => customHandler.change(val, 'end')}}\r\n                                    onFocus={handler.customInputFocus}\r\n                                    onBlur={handler.customInputBlur}/>\r\n                            </>)\r\n                        }\r\n                    </div>\r\n                </PlInput>\r\n            )\r\n        }\r\n    },\r\n})","import {ExtractPropTypes, PropType} from 'vue';\r\nimport {PDate} from \"./plainDate\";\r\nimport {VNodeChild} from \"../../shims\";\r\n\r\n/**\r\n * 当前面板的视图\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:43\r\n */\r\nexport enum DateView {\r\n    year = 'year',\r\n    month = 'month',\r\n    date = 'date',\r\n    time = 'time',\r\n}\r\n\r\nexport enum DatePanel {\r\n    year = 'year',\r\n    month = 'month',\r\n    date = 'date',\r\n    week = 'week',\r\n    quarter = 'quarter',\r\n}\r\n\r\n/**\r\n * 跟节点切换动画的方向\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:43\r\n */\r\nexport enum SlideTransitionDirection {\r\n    next = 'next',\r\n    prev = 'prev'\r\n}\r\n\r\n/**\r\n * 在派发modelValue时，派发的start还是end事件\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:44\r\n */\r\nexport const enum DateEmitRangeType {\r\n    start = 'start',\r\n    end = 'end',\r\n}\r\n\r\n/**\r\n * 面板的默认格式化字符串\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:46\r\n */\r\nexport const DefaultDateFormatString = {\r\n    year: 'YYYY',\r\n    month: 'YYYY-MM',\r\n    date: 'YYYY-MM-DD',\r\n    datetime: 'YYYY-MM-DD HH:mm:ss',\r\n    week: 'YYYY-MM-DD',\r\n    Hms: 'HH:mm:ss',\r\n    quarter: 'YYYY年第ww季度',\r\n}\r\n\r\nexport const getDefaultDateFormatter = (() => {\r\n    function getDefaultDateValueFormat(panel: DatePanel, datetime?: boolean) {\r\n        switch (panel) {\r\n            case DatePanel.year:\r\n                return DefaultDateFormatString.year\r\n            case DatePanel.month:\r\n                return DefaultDateFormatString.month\r\n            case DatePanel.date:\r\n                return datetime ? DefaultDateFormatString.datetime : DefaultDateFormatString.date\r\n            case DatePanel.week:\r\n                return DefaultDateFormatString.date\r\n            case DatePanel.quarter:\r\n                return DefaultDateFormatString.month\r\n        }\r\n    }\r\n\r\n    function getDefaultDateDisplayFormat(panel: DatePanel, datetime?: boolean) {\r\n        switch (panel) {\r\n            case DatePanel.year:\r\n                return DefaultDateFormatString.year\r\n            case DatePanel.month:\r\n                return DefaultDateFormatString.month\r\n            case DatePanel.date:\r\n                return datetime ? DefaultDateFormatString.datetime : DefaultDateFormatString.date\r\n            case DatePanel.week:\r\n                return 'gggg年第ww周'\r\n            case DatePanel.quarter:\r\n                return 'YYYY年第Q季度'\r\n        }\r\n    }\r\n\r\n    return (panel: DatePanel, datetime?: boolean) => ({\r\n        displayFormat: getDefaultDateDisplayFormat(panel, datetime),\r\n        valueFormat: getDefaultDateValueFormat(panel, datetime),\r\n    })\r\n})();\r\n\r\nexport const DateViewSeq = {\r\n    year: 1,\r\n    month: 2,\r\n    date: 3,\r\n    time: 4,\r\n}\r\n\r\nexport const DatePublicProps = {\r\n    modelValue: {type: [String, Array] as PropType<string | string[]>},         // 双向绑定值，单选时为单个字符串，多选时为字符串数组\r\n    start: {type: String},                                                      // 范围选择，起始值绑定值\r\n    end: {type: String},                                                        // 范围选择，截止值绑定值\r\n    displayFormat: {type: String},                                              // 显示值格式化字符串\r\n    valueFormat: {type: String},                                                // 值格式化字符串\r\n    max: {type: String},                                                        // 最大值\r\n    min: {type: String},                                                        // 最小值\r\n    range: {type: Boolean},                                                     // 是否为范围选择，与multiple多选只能二选一\r\n    multiple: {type: Boolean},                                                  // 是否为 多选，与range多选只能二选一\r\n\r\n    firstWeekDay: {type: Number, default: 1},                                   // 一周的第一个是星期几，0是星期天，1是星期一\r\n    defaultTime: {type: String},                                                // 默认时间，如果没有初始值，选择日期的时候时间会取这里的默认时间\r\n    defaultStartTime: {type: String},                                           // 日期范围选择起始选择框日期面板，默认时间，如果没有初始值，选择日期的时候时间会取这里的默认时间\r\n    defaultEndTime: {type: String},                                             // 日期范围选择截止选择框日期面板，默认时间，如果没有初始值，选择日期的时候时间会取这里的默认时间\r\n\r\n    showQuarter: {type: Boolean},                                               // 月份面板是否显示季度\r\n    isQuarterActive: {type: Function as PropType<(did: DateItemData) => boolean>},// 季度是否高亮判断函数\r\n\r\n    /*inner props*/\r\n    direction: {type: String, default: 'horizontal'},                           // 根节点在 pl-transition-slide 动画下的动画方向，是horizontal还是vertical\r\n    view: {type: String as PropType<DateView>, default: DateView.month},        // 当前视图\r\n    selectDate: {type: Object as PropType<PDate>},                              // 当前面板的年月日期对象\r\n    datetime: {type: Boolean},                                                  // 是否为日期时间视图\r\n}\r\n\r\n/**\r\n * 所有面板的公共属性对象类型\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:45\r\n */\r\nexport type DatePublicPropsType = ExtractPropTypes<typeof DatePublicProps>\r\n\r\n/**\r\n * 所有面板的公共派发事件配置对象\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:45\r\n */\r\nexport const DatePublicEmits = {\r\n    onUpdateModelValue: (val?: string | string[], rangeType?: DateEmitRangeType) => true,\r\n    onUpdateStart: (val?: string) => true,\r\n    onUpdateEnd: (val?: string) => true,\r\n    onUpdateView: (view: DateView) => true,\r\n}\r\n\r\n/**\r\n * 单个日期选项的数据类型\r\n * @author  韦胜健\r\n * @date    2021/1/18 16:04\r\n */\r\nexport interface DateItemData {\r\n    label: string | number,\r\n    active: boolean,\r\n    now: boolean,\r\n    disabled: boolean,\r\n    start: boolean,\r\n    hover: boolean,\r\n    end: boolean,\r\n    clickable: boolean,\r\n    pd: PDate,\r\n    range: boolean,\r\n    externals?: any,\r\n}\r\n\r\nexport function DatePanelWrapper(slots: {\r\n    left?: VNodeChild,\r\n    center: VNodeChild,\r\n    right?: VNodeChild,\r\n    content: VNodeChild,\r\n    bodyAttrs?: any,\r\n}) {\r\n    return (\r\n        <div class=\"pl-date-base-panel\">\r\n            <div class=\"pl-date-base-panel-header\">\r\n                <div>{slots.left}</div>\r\n                <div>{slots.center}</div>\r\n                <div>{slots.right}</div>\r\n            </div>\r\n            <div class=\"pl-date-base-panel-body\" {...(slots.bodyAttrs || {})}>\r\n                {slots.content}\r\n            </div>\r\n        </div>\r\n    ) as any\r\n}\r\n\r\nexport function DatePanelItemWrapper(\r\n    {\r\n        Node,\r\n        item,\r\n        onClick,\r\n        onMouseenter,\r\n    }: {\r\n        Node: any,                                      // 容器节点\r\n        item: DateItemData,                             // item 数据\r\n        onClick: (item: DateItemData) => void,          // 点击item事件处理句柄\r\n        onMouseenter: (item: DateItemData) => void,     // 进入item事件处理句柄\r\n    }) {\r\n\r\n    let listener = {} as any;\r\n    item.clickable && (listener.onClick = () => onClick(item));\r\n    !item.disabled && (listener.onMouseenter = () => onMouseenter(item));\r\n\r\n    return (\r\n        <Node\r\n            {...listener}\r\n            class={[\r\n                'pl-date-base-panel-item',\r\n                {\r\n                    'pl-date-base-panel-item-active': item.active,\r\n                    'pl-date-base-panel-item-now': item.now,\r\n                    'pl-date-base-panel-item-disabled': item.disabled,\r\n                    'pl-date-base-panel-item-hover-start': item.start,\r\n                    'pl-date-base-panel-item-hover': item.hover,\r\n                    'pl-date-base-panel-item-hover-end': item.end,\r\n                }\r\n            ]}>\r\n            <div>\r\n                <span>{item.label}</span>\r\n            </div>\r\n        </Node>\r\n    )\r\n}","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlTime} from \"./time\";\r\n\r\nexport default createComponentPlugin(PlTime)","export function prefix(val: string | number, config?: { char?: string, len?: number }) {\r\n    if (typeof val !== \"string\") {\r\n        val = String(val)\r\n    }\r\n    let len = val.length\r\n    if (!config) config = {}\r\n    while (len < (config.len || 2)) {\r\n        val = (config.char || '0') + val\r\n        len++\r\n    }\r\n    return val\r\n}","import DayJs from 'dayjs';\r\nimport Format from 'dayjs/plugin/customParseFormat'\r\nimport WeekYear from 'dayjs/plugin/weekYear'\r\nimport WeekOfYear from 'dayjs/plugin/weekOfYear'\r\nimport AdvanceFormat from 'dayjs/plugin/advancedFormat'\r\nimport 'dayjs/locale/de'\r\nimport {prefix} from \"../../utils/prefix\";\r\n\r\nDayJs.locale('de')\r\nDayJs.extend(Format)\r\nDayJs.extend(WeekYear)\r\nDayJs.extend(WeekOfYear)\r\nDayJs.extend(AdvanceFormat)\r\n\r\ntype InitialValue = string | DayJs.Dayjs | Date | undefined;\r\n\r\n/**\r\n * 所有use开头的函数，都会返回一个新的PDate实例，不会修改原有基础的对象\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:26\r\n */\r\nexport interface PDate {\r\n    year: number\r\n    month: number\r\n    date: number\r\n    hour: number\r\n    minute: number\r\n    second: number\r\n    time: number\r\n    day: number\r\n    timeString: string\r\n    dateString: string\r\n    displayFormat: string\r\n    valueFormat: string\r\n    Y: number\r\n    YM: number\r\n    YMD: number\r\n    YMDHms: number\r\n    Hms: number\r\n\r\n    getDayJs: () => DayJs.Dayjs,\r\n    getDate: () => Date,\r\n    getDisplay: () => string\r\n    getValue: () => string\r\n\r\n    useValue: (value: string) => PDate\r\n    useDisplay: (display: string) => PDate\r\n    useYear: (year: number) => PDate\r\n    useMonthDate: (month: number, date: number) => PDate\r\n    useHour: (hour: number) => PDate\r\n    useMinute: (minute: number) => PDate\r\n    useSecond: (second: number) => PDate\r\n    useTime: (time: number) => PDate\r\n    useHms: (data: PDate | [number, number, number]) => PDate,\r\n    useYMD: (data: PDate | [number, number, number]) => PDate,\r\n\r\n    format: (value: InitialValue) => string\r\n    parseDisplay: (display: string) => PDate\r\n    parseValue: (value: string) => PDate\r\n    clone: () => PDate,\r\n}\r\n\r\nfunction wrapDate(initialValue: InitialValue, config: { displayFormat: string, valueFormat: string }): PDate {\r\n\r\n    const dj = DayJs(initialValue, typeof initialValue === \"string\" ? config.valueFormat : undefined)\r\n    const dateObj = dj.toDate()\r\n    const year = dj.year();\r\n    const month = dj.month();\r\n    const date = dj.date();\r\n    const hour = dj.hour();\r\n    const minute = dj.minute()\r\n    const second = dj.second()\r\n    const time = dateObj.getTime()\r\n    const day = dateObj.getDay()\r\n\r\n    const timeString = prefix(hour) + prefix(minute) + prefix(second)\r\n    const dateString = prefix(year) + prefix(month + 1) + prefix(date)\r\n\r\n    const Y = year\r\n    const YM = `${Y}${prefix(month + 1)}`\r\n    const YMD = `${YM}${prefix(date)}`\r\n    const YMDHms = `${YMD}${timeString}`\r\n    // const Hms = timeString\r\n    return {\r\n        year,\r\n        month,\r\n        date,\r\n        hour,\r\n        minute,\r\n        second,\r\n        day,\r\n        time,\r\n        timeString,\r\n        dateString,\r\n        Y: Y,\r\n        YM: Number(YM),\r\n        YMD: Number(YMD),\r\n        YMDHms: Number(YMDHms),\r\n        Hms: Number(timeString),\r\n        displayFormat: config.displayFormat!,\r\n        valueFormat: config.valueFormat!,\r\n\r\n        getDate: () => dateObj,\r\n        getDayJs: () => dj,\r\n        getDisplay: () => dj.format(config.displayFormat),\r\n        getValue: () => dj.format(config.valueFormat),\r\n\r\n        /*根据值修改*/\r\n        useValue: (value: InitialValue) => wrapDate(value, config),\r\n        /*根据显示值修改*/\r\n        useDisplay: (display: string) => wrapDate(DayJs(display, config!.displayFormat), config),\r\n        /*根据年份修改*/\r\n        useYear: (year: number) => wrapDate(dj.year(year), config),\r\n        /*根据月份日期修改*/\r\n        useMonthDate: (month: number, date: number) => {\r\n            const d = new Date(dj.toDate())\r\n            d.setMonth(month, date)\r\n            return wrapDate(d, config)\r\n        },\r\n        /*根据时间修改*/\r\n        useHour: (hour: number) => wrapDate(dj.hour(hour), config),\r\n        /*根据分钟修改*/\r\n        useMinute: (minute: number) => wrapDate(dj.minute(minute), config),\r\n        /*根据秒钟修改*/\r\n        useSecond: (second: number) => wrapDate(dj.second(second), config),\r\n        /*根据时间戳修改*/\r\n        useTime: (time: number) => wrapDate(new Date(time), config),\r\n        /*根据时分秒修改*/\r\n        useHms: (val) => {\r\n            const obj = new Date(dateObj)\r\n            if (Array.isArray(val)) {\r\n                obj.setHours(val[0], val[1], val[2])\r\n            } else {\r\n                obj.setHours(val.hour, val.minute, val.second)\r\n            }\r\n            return wrapDate(obj, config)\r\n        },\r\n        /*根据年月日修改*/\r\n        useYMD: (val) => {\r\n            const obj = new Date(dateObj)\r\n            if (Array.isArray(val)) {\r\n                obj.setFullYear(val[0], val[1], val[2])\r\n            } else {\r\n                obj.setFullYear(val.year, val.month, val.date)\r\n            }\r\n            return wrapDate(obj, config)\r\n        },\r\n        /*格式化值*/\r\n        format: (value) => DayJs(value, config.valueFormat).format(config.displayFormat),\r\n        /*根据格式化字符串解析字符串*/\r\n        parseDisplay: (display: string) => wrapDate(DayJs(display, config.displayFormat), config),\r\n        /*根据值格式化字符串解析字符串*/\r\n        parseValue: (value: string) => wrapDate(DayJs(value, config.valueFormat), config),\r\n        /*克隆一个新的对象*/\r\n        clone: () => wrapDate(initialValue, config)\r\n    }\r\n}\r\n\r\n/**\r\n * 获取一个默认日期\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:29\r\n */\r\nconst defaultDate = () => {\r\n    const date = new Date()\r\n    date.setMonth(0, 1)\r\n    date.setHours(0, 0, 0)\r\n    return date\r\n}\r\n/**\r\n * 格式化日期为字符串\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:29\r\n */\r\nconst format = (date: Date | undefined | null, format: string) => {\r\n    if (!date) return ''\r\n    return DayJs(date).format(format)\r\n}\r\n/**\r\n * 解析字符串为日期对象\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:30\r\n */\r\nconst parse = (str: string | undefined | null, format: string) => {\r\n    if (!str) return null\r\n    return DayJs(str, format)\r\n}\r\n\r\n/**\r\n * 获取当天的日期信息\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:30\r\n */\r\nconst today = (displayFormat: string, valueFormat: string) => {\r\n    return wrapDate(new Date(), {displayFormat, valueFormat})\r\n}\r\n\r\nexport const plainDate = Object.assign(wrapDate, {defaultDate, format, parse, today, DayJs})","import {computed, inject, provide, reactive, watch} from 'vue';\r\nimport {DateEmitRangeType, DateItemData, DatePublicPropsType, DateView, DefaultDateFormatString, SlideTransitionDirection} from \"./date.utils\";\r\nimport {PDate, plainDate} from \"./plainDate\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {toArray} from \"../../utils/toArray\";\r\n\r\n/**\r\n * 日期子组件注入父组件提供的值的时候的唯一标识\r\n * @author  韦胜健\r\n * @date    2020/12/7 20:43\r\n */\r\nexport const DATE_PANEL_PROVIDER = '@@DATE_PANEL_PROVIDER'\r\n\r\n/**\r\n * 判断对比类型\r\n * @author  韦胜健\r\n * @date    2021/1/19 9:22\r\n */\r\nexport enum UseDateJudgementView {\r\n    'Y' = 'Y',\r\n    'YM' = 'YM',\r\n    'YMD' = 'YMD',\r\n}\r\n\r\ntype DateCustomStatus = {\r\n    active: () => PDate[],\r\n    disabled: () => { max: PDate | null, min: PDate | null },\r\n    start: () => PDate[],\r\n    end: () => PDate[],\r\n    hover: () => [PDate, PDate][],\r\n}\r\n\r\n/**\r\n * 顶层父面板向下提供的数据\r\n * @author  韦胜健\r\n * @date    2021/1/19 9:23\r\n */\r\ntype UseDateTopState = {\r\n    max: PDate | null,\r\n    min: PDate | null,\r\n    vpd: PDate | PDate[] | null,\r\n    range: {\r\n        hover: null | [PDate, PDate],\r\n        value: null | [PDate, PDate],\r\n    },\r\n    isRange: boolean,\r\n    customStatus?: DateCustomStatus,\r\n}\r\n\r\nexport type UseDateEmit = {\r\n    onUpdateModelValue: (val?: string | string[], rangeType?: DateEmitRangeType) => void,\r\n    onUpdateStart: (val?: string) => void,\r\n    onUpdateEnd: (val?: string) => void,\r\n    onUpdateView: (val: DateView) => void,\r\n}\r\n\r\n/**\r\n * useDate得到的数据对象\r\n * @author  韦胜健\r\n * @date    2021/1/19 9:23\r\n */\r\nexport type UseDateType = {\r\n    parent: UseDateType | null,\r\n    jdView: UseDateJudgementView,\r\n    today: PDate,\r\n    displayFormat: string,\r\n    valueFormat: string,\r\n\r\n    model: { value?: string | string[] },\r\n    startModel: { value?: string },\r\n    endModel: { value?: string },\r\n    viewModel: { value: DateView },\r\n\r\n    state: {\r\n        pd: {\r\n            vpd: null | PDate | PDate[],\r\n            spd: null | PDate,\r\n            epd: null | PDate,\r\n        },\r\n        selectDate: PDate,\r\n        range: {\r\n            hover: null | [PDate, PDate],\r\n            value: null | [PDate, PDate],\r\n        },\r\n        slide: SlideTransitionDirection,\r\n        topState: UseDateTopState,\r\n    },\r\n\r\n    setSelectDate: (pd: PDate) => void,\r\n    getStatus: (pd: PDate) => {\r\n        now: boolean,\r\n        disabled: boolean,\r\n        active: boolean,\r\n        start: boolean,\r\n        end: boolean,\r\n        hover: boolean,\r\n        range: boolean,\r\n        clickable: boolean,\r\n    },\r\n    handler: {\r\n        onClick: (did: DateItemData) => void,\r\n        onMouseenter: (did: DateItemData) => void,\r\n    },\r\n}\r\n\r\nexport function useDate(\r\n    {\r\n        props,\r\n        jdView,\r\n        getSlide,\r\n        processPd,\r\n        emit,\r\n        customStatus,\r\n    }: {\r\n        props: DatePublicPropsType,\r\n        jdView: UseDateJudgementView,\r\n        getSlide?: (pd: PDate) => SlideTransitionDirection,\r\n        /*process 不能处理多选的情况*/\r\n        processPd?: {\r\n            value?: (vpd: PDate) => PDate,\r\n            range?: (spd: PDate, vpd: PDate) => { spd: PDate, epd: PDate },\r\n        },\r\n        emit: UseDateEmit,\r\n        customStatus?: DateCustomStatus,\r\n    }): UseDateType {\r\n\r\n    const defaultFormat = (() => {\r\n        if (jdView === UseDateJudgementView.Y) return DefaultDateFormatString.year\r\n        if (jdView === UseDateJudgementView.YM) return DefaultDateFormatString.month\r\n        if (jdView === UseDateJudgementView.YMD) return props.datetime ? DefaultDateFormatString.datetime : DefaultDateFormatString.date\r\n    })();\r\n    const displayFormat = props.displayFormat || defaultFormat!\r\n    const valueFormat = props.valueFormat || defaultFormat!\r\n    const createPlainDate = (val: string) => plainDate(val, {displayFormat, valueFormat})\r\n\r\n    /**\r\n     * 顶层父面板\r\n     * @author  韦胜健\r\n     * @date    2020/12/7 20:48\r\n     */\r\n    const parent = inject<UseDateType | null>(DATE_PANEL_PROVIDER, null)\r\n\r\n    const today = plainDate.today(displayFormat, valueFormat)\r\n    const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {\r\n        onChange: (val) => {\r\n            if (!!props.selectDate) {return}\r\n            let pd: PDate;\r\n            if (!props.multiple) {\r\n                const value = val as string | undefined\r\n                pd = !value ? today : today.useValue(value)\r\n            } else {\r\n                const value = val as string[] | undefined\r\n                pd = !value || value.length === 0 ? today : today.useValue(value[0])\r\n            }\r\n            !!getSlide && (state.slide = getSlide(pd))\r\n            useDateData.setSelectDate(pd)\r\n        }\r\n    })\r\n    const startModel = (!props.range || !!parent) ? model as { value?: string } : useModel(() => props.start, emit.onUpdateStart, {\r\n        onChange: (val) => {\r\n            if (!!props.selectDate) {return}\r\n            const spd = !val ? null : today.useValue(val)\r\n            const epd = state.pd.epd\r\n            state.range = {\r\n                hover: null,\r\n                value: !!spd && !!epd ? [spd, epd] : null\r\n            }\r\n            !!getSlide && (state.slide = getSlide(spd || today))\r\n            useDateData.setSelectDate(spd || today)\r\n        }\r\n    })\r\n    const endModel = (!props.range || !!parent) ? model as { value?: string } : useModel(() => props.end, emit.onUpdateEnd, {\r\n        onChange: (val) => {\r\n            const spd = state.pd.spd\r\n            const epd = !val ? null : today.useValue(val)\r\n            state.range = {\r\n                hover: null,\r\n                value: !!spd && !!epd ? [spd, epd] : null\r\n            }\r\n        },\r\n    })\r\n    const viewModel = useModel(() => props.view, emit.onUpdateView)\r\n\r\n    const pd = computed(() => {\r\n        let vpd: null | PDate | PDate[];\r\n        if (!props.multiple) {\r\n            vpd = !model.value ? null : createPlainDate(model.value as string)\r\n        } else {\r\n            vpd = !model.value ? null : (model.value as string[]).map(item => createPlainDate(item))\r\n        }\r\n        return {\r\n            vpd,\r\n            spd: (!props.range || !!parent) ? null : (!startModel.value ? null : createPlainDate(startModel.value)),\r\n            epd: (!props.range || !!parent) ? null : (!endModel.value ? null : createPlainDate(endModel.value)),\r\n        }\r\n    })\r\n\r\n    const state = reactive({\r\n        pd,\r\n        selectDate: (() => {\r\n            let selectDate = props.selectDate\r\n            if (!selectDate) {\r\n                const {vpd, spd} = pd.value\r\n                if (!props.range) {\r\n                    if (!props.multiple) {\r\n                        const pd = vpd as PDate | null\r\n                        selectDate = pd || today\r\n                    } else {\r\n                        const pd = vpd as PDate[] | null\r\n                        selectDate = (!!pd && pd.length > 0) ? pd[0] : today\r\n                    }\r\n                } else {\r\n                    selectDate = spd || today\r\n                }\r\n            }\r\n            if (!!props.selectDate) {\r\n                watch(() => props.selectDate, pd => {\r\n                    if (!pd) {return}// 肯定会有值\r\n                    !!getSlide && (state.slide = getSlide(pd!))\r\n                    useDateData.setSelectDate(pd!)\r\n                })\r\n            }\r\n            return selectDate\r\n        })(),\r\n        range: (() => {\r\n            const {spd, epd} = pd.value\r\n            return {\r\n                hover: null as null | [PDate, PDate],\r\n                value: (!!spd && !!epd) ? [spd, epd] as [PDate, PDate] : null,\r\n            }\r\n        })(),\r\n        slide: SlideTransitionDirection.next,\r\n        topState: computed((): UseDateTopState => {\r\n            if (!!parent) {\r\n                return parent.state.topState\r\n            }\r\n            const {vpd} = pd.value\r\n            return {\r\n                max: !props.max ? null : createPlainDate(props.max),\r\n                min: !props.min ? null : createPlainDate(props.min),\r\n                vpd,\r\n                range: state.range,\r\n                isRange: props.range,\r\n                customStatus,\r\n            }\r\n        }),\r\n    })\r\n\r\n    const handler = {\r\n        onClick: (did: DateItemData) => {\r\n            if (!parent) {\r\n                /*\r\n                *  没有父面板，表明当前面板为顶层面板\r\n                */\r\n                if (props.multiple) {\r\n                    const display = did.pd.getDisplay()\r\n                    /*\r\n                    *  多选\r\n                    */\r\n                    let value = model.value as string[] | undefined\r\n                    if (!value || value.length === 0) {\r\n                        value = [display]\r\n                    } else {\r\n                        const existIndex = value.findIndex((item) => item === display)\r\n                        if (existIndex > -1) {\r\n                            value.splice(existIndex, 1)\r\n                        } else {\r\n                            value.unshift(display)\r\n                        }\r\n                    }\r\n                    model.value = [...value]\r\n                } else {\r\n                    /*\r\n                    *  非多选\r\n                    */\r\n                    if (!props.range) {\r\n                        /*\r\n                        *  单选\r\n                        */\r\n                        let {pd} = did\r\n                        if (!!processPd && !!processPd.value) pd = processPd.value(pd)\r\n                        model.value = pd.getDisplay()\r\n                    } else {\r\n                        /*\r\n                        *  范围选择\r\n                        */\r\n                        if (!state.range.hover) {\r\n                            const {pd} = did\r\n                            state.range = {\r\n                                hover: [pd, pd],\r\n                                value: [pd, pd],\r\n                            }\r\n                        } else {\r\n                            let [spd, epd] = state.range.hover\r\n                            if (!!processPd && !!processPd.range) {\r\n                                const data = processPd.range(spd, epd)\r\n                                spd = data.spd\r\n                                epd = data.epd\r\n                            }\r\n                            startModel.value = spd.getDisplay()\r\n                            endModel.value = epd.getDisplay()\r\n                            state.range = {\r\n                                hover: null,\r\n                                value: [spd, epd],\r\n                            }\r\n                            emit.onUpdateModelValue(startModel.value, DateEmitRangeType.start)\r\n                            emit.onUpdateModelValue(endModel.value, DateEmitRangeType.end)\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                let {pd} = did\r\n                if (!!processPd && !!processPd.value) pd = processPd.value(pd)\r\n                model.value = pd.getDisplay()\r\n            }\r\n        },\r\n        onMouseenter: (did: DateItemData) => {\r\n            if (!!parent) {\r\n                return\r\n            }\r\n            if (!!state.range.hover) {\r\n                const {pd} = did\r\n                const mid = state.range.value![0]!\r\n                state.range.hover = mid[jdView] > pd[jdView] ? [pd, mid] : [mid, pd]\r\n            }\r\n        },\r\n    }\r\n\r\n    const utils = {\r\n        active: (pd: PDate): boolean => {\r\n            const {isRange, vpd, range} = state.topState\r\n            let condition: PDate[] = []\r\n            if (!!state.topState.customStatus && state.topState.customStatus.active) {\r\n                condition = state.topState.customStatus.active()\r\n            } else {\r\n                if (!isRange) {\r\n                    if (!!vpd) {condition = toArray(vpd)}\r\n                } else {\r\n                    if (!!range.value) {condition = [range.value[0], range.value[1]]}\r\n                }\r\n            }\r\n            return !!condition.find(item => item[jdView] === pd[jdView])\r\n        },\r\n        disabled: (pd: PDate): boolean => {\r\n            const {max, min} = (!!state.topState.customStatus && !!state.topState.customStatus.disabled) ? state.topState.customStatus.disabled() : state.topState\r\n            if (!!max && max[jdView] < pd[jdView]) return true\r\n            if (!!min && min[jdView] > pd[jdView]) return true\r\n            return false\r\n        },\r\n        start: (pd: PDate) => {\r\n            const {isRange, range: {hover, value}} = state.topState\r\n            let condition: PDate[] = []\r\n            if (!!state.topState.customStatus && !!state.topState.customStatus.start) {\r\n                condition = state.topState.customStatus.start()\r\n            } else {\r\n                if (!!isRange) {\r\n                    if (!!hover) condition.push(hover[0])\r\n                    else if (!!value) condition.push(value[0])\r\n                }\r\n            }\r\n            return condition.some(item => item[jdView] === pd[jdView])\r\n        },\r\n        end: (pd: PDate) => {\r\n            const {isRange, range: {hover, value}} = state.topState\r\n            let condition: PDate[] = []\r\n            if (!!state.topState.customStatus && !!state.topState.customStatus.end) {\r\n                condition = state.topState.customStatus.end()\r\n            } else {\r\n                if (!!isRange) {\r\n                    if (!!hover) condition.push(hover[1])\r\n                    else if (!!value) condition.push(value[1])\r\n                }\r\n            }\r\n            return condition.some(item => item[jdView] === pd[jdView])\r\n        },\r\n        hover: (pd: PDate) => {\r\n            const {isRange, range: {hover, value}} = state.topState\r\n            let condition: [PDate, PDate][] = []\r\n            if (!!state.topState.customStatus && !!state.topState.customStatus.hover) {\r\n                condition = state.topState.customStatus.hover()\r\n            } else {\r\n                if (!!isRange) {\r\n                    if (!!hover || !!value) {\r\n                        condition.push((hover || value)!)\r\n                    }\r\n                }\r\n            }\r\n            return condition.some(([spd, epd]) => (spd[jdView] < pd[jdView] && epd[jdView] > pd[jdView]))\r\n        },\r\n    }\r\n\r\n    const useDateData: UseDateType = {\r\n        parent,\r\n        jdView,\r\n        state,\r\n        today,\r\n        displayFormat,\r\n        valueFormat,\r\n\r\n        model,\r\n        startModel,\r\n        endModel,\r\n        viewModel,\r\n\r\n        setSelectDate: (pd) => state.selectDate = pd || today,\r\n        getStatus: (pd) => {\r\n            const disabled = utils.disabled(pd)\r\n            return {\r\n                now: today[jdView] === pd[jdView],\r\n                active: utils.active(pd),\r\n                disabled,\r\n                start: utils.start(pd),\r\n                hover: utils.hover(pd),\r\n                end: utils.end(pd),\r\n                range: !!state.topState.range,\r\n                clickable: (!!parent && parent.jdView !== jdView) || !disabled\r\n            }\r\n        },\r\n        handler,\r\n    }\r\n\r\n    /*只有最顶层日期组件才有资格控制子组件*/\r\n    if (!parent) {\r\n        provide(DATE_PANEL_PROVIDER, useDateData)\r\n    }\r\n\r\n    return useDateData\r\n}","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateItemData, DatePanelItemWrapper, DatePanelWrapper, DatePublicEmits, DatePublicProps, DefaultDateFormatString, SlideTransitionDirection} from \"../date.utils\";\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\nimport {computed, Transition} from 'vue';\r\nimport {PlButton} from \"../../button/button\";\r\nimport {StyleSize} from \"../../../use/useStyle\";\r\n\r\nexport const PlDatePanelYear = designComponent({\r\n    name: 'pl-date-panel-year',\r\n    props: {\r\n        ...DatePublicProps,\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {\r\n            state,\r\n            setSelectDate,\r\n            today,\r\n            getStatus,\r\n            handler,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.Y,\r\n            getSlide: (pd) => pd.year > data.value.selectYear + 19 ? SlideTransitionDirection.next : SlideTransitionDirection.prev,\r\n        })\r\n\r\n        const data = computed(() => {\r\n            const {selectDate} = state\r\n            let selectYear = selectDate.year!\r\n            selectYear = selectYear - selectYear % 20\r\n            let list: DateItemData[] = []\r\n            for (let i = selectYear; i < selectYear + 20; i++) {\r\n                const pd = today.useYear(i)\r\n                let item: DateItemData = {label: i, pd, ...getStatus(pd),}\r\n                list.push(item)\r\n            }\r\n            return {\r\n                list,\r\n                /*年份面板标题，展示列表中年份的范围*/\r\n                title: `${selectYear}-${selectYear + 19}`,\r\n                /*当前选择的年份*/\r\n                selectYear,\r\n            }\r\n        })\r\n\r\n        const methods = {\r\n            /**\r\n             * 切换上一个年份列表\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:17\r\n             */\r\n            prevYearList() {\r\n                state.slide = SlideTransitionDirection.prev\r\n                setSelectDate(today.useYear(data.value.selectYear - 20))\r\n            },\r\n            /**\r\n             *\r\n             * @author  切换下一个年份列表\r\n             * @date    2020/4/15 11:18\r\n             */\r\n            nextYearList() {\r\n                state.slide = SlideTransitionDirection.next\r\n                setSelectDate(today.useYear(data.value.selectYear + 20))\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                const Wrapper = DatePanelWrapper({\r\n                    left: <PlButton icon=\"el-icon-d-arrow-left\" mode=\"text\" size={StyleSize.mini} onClick={methods.prevYearList}/>,\r\n                    center: <span class=\"pl-date-base-panel-header-static-label\">{data.value.title}</span>,\r\n                    right: <PlButton icon=\"el-icon-d-arrow-right\" mode=\"text\" size={StyleSize.mini} onClick={methods.nextYearList}/>,\r\n                    content: (<Transition name={`pl-transition-slide-${state.slide}`}>\r\n                        <ul{...{\r\n                            class: 'pl-date-base-panel-year-list',\r\n                            key: data.value.selectYear,\r\n                            direction: \"vertical\"\r\n                        }}>\r\n                            {data.value.list.map(item => DatePanelItemWrapper({\r\n                                item,\r\n                                Node: (<li key={item.label} class=\"pl-date-base-panel-year-item\"/>),\r\n                                onClick: handler.onClick,\r\n                                onMouseenter: handler.onMouseenter,\r\n                            }))}\r\n                        </ul>\r\n                    </Transition>)\r\n                })\r\n                return <Wrapper {...{class: 'pl-date-base-panel-year', direction: props.direction,}}/>\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateItemData, DatePanelItemWrapper, DatePanelWrapper, DatePublicEmits, DatePublicProps, DateView, DefaultDateFormatString, SlideTransitionDirection} from \"../date.utils\";\r\nimport {PropType, computed, Transition} from 'vue';\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\nimport {PlButton} from \"../../button/button\";\r\nimport {StyleSize} from \"../../../use/useStyle\";\r\nimport {PlDatePanelYear} from \"./date-panel-year\";\r\nimport {useClass} from \"../../../use/useClasses\";\r\n\r\nexport const PlDatePanelMonth = designComponent({\r\n    name: 'pl-date-panel-month',\r\n    props: {\r\n        ...DatePublicProps,\r\n        view: {type: String as PropType<DateView>, default: DateView.month},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        onClick: (did: DateItemData) => true,\r\n        onMouseenter: (did: DateItemData) => true,\r\n        onMouseleaveList: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const months = computed(() => ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月',])\r\n\r\n        const {\r\n            state,\r\n            setSelectDate,\r\n            today,\r\n            getStatus,\r\n            handler,\r\n            viewModel,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.YM,\r\n            getSlide: (pd) => pd.year > state.selectDate.year ? SlideTransitionDirection.next : SlideTransitionDirection.prev,\r\n        })\r\n\r\n        const methods = {\r\n            /**\r\n             * 切换到上一年\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:12\r\n             */\r\n            prevYear() {\r\n                state.slide = SlideTransitionDirection.prev\r\n                setSelectDate(state.selectDate.useYear(state.selectDate.year - 1))\r\n            },\r\n            /**\r\n             * 切换到下一年\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:12\r\n             */\r\n            nextYear() {\r\n                state.slide = SlideTransitionDirection.next\r\n                setSelectDate(state.selectDate.useYear(state.selectDate.year + 1))\r\n            },\r\n        }\r\n\r\n        const monthList = computed(() => {\r\n            const {selectDate} = state\r\n            let list: DateItemData[] = [];\r\n            [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11].forEach(i => {\r\n                const pd = today.useYMD([selectDate.year, i, 1]);\r\n                const item = {label: months.value[i], pd, ...getStatus(pd)}\r\n                list.push(item)\r\n            })\r\n            return list\r\n        })\r\n\r\n        const quarterList = computed(() => {\r\n            const {selectDate} = state\r\n            let list: DateItemData[] = [];\r\n            [0, 1, 2, 3].forEach(i => {\r\n                const pd = selectDate.useMonthDate(i * 3, 1);\r\n                list.push({label: `Q${i + 1}`, pd, ...getStatus(pd),})\r\n            })\r\n            return list\r\n        })\r\n\r\n        const listClasses = useClass(() => [\r\n            'pl-date-base-panel-month-list',\r\n            {\r\n                'pl-date-base-panel-month-list-show-quarter': props.showQuarter,\r\n            }\r\n        ])\r\n\r\n        const externalHandler = {\r\n            /**\r\n             * 处理年份面板选择年份变化动作\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:14\r\n             */\r\n            onSelectYearChange(val?: string | string[]) {\r\n                viewModel.value = DateView.month\r\n                setSelectDate(state.selectDate.useYear(val as any as number))\r\n            },\r\n            onClick: (did: DateItemData) => {\r\n                emit.onClick(did)\r\n                handler.onClick(did)\r\n            },\r\n            onMouseenter: (did: DateItemData) => {\r\n                emit.onMouseenter(did)\r\n                handler.onMouseenter(did)\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n\r\n                const Month = DatePanelWrapper({\r\n                    left: <PlButton icon=\"el-icon-d-arrow-left\" mode=\"text\" size={StyleSize.mini} onClick={methods.prevYear}/>,\r\n                    center: <span onClick={() => viewModel.value = DateView.year}>{state.selectDate.year}</span>,\r\n                    right: <PlButton icon=\"el-icon-d-arrow-right\" mode=\"text\" size={StyleSize.mini} onClick={methods.nextYear}/>,\r\n                    bodyAttrs: {onMouseleave: emit.onMouseleaveList},\r\n                    content: (<>\r\n                        {props.showQuarter && (\r\n                            <Transition name={`pl-transition-slide-${state.slide}`}>\r\n                                <ul {...{\r\n                                    class: 'pl-date-base-panel-month-quarter-list',\r\n                                    key: state.selectDate.year!,\r\n                                    direction: 'vertical'\r\n                                }}>\r\n                                    {quarterList.value.map(item => (DatePanelItemWrapper({\r\n                                        item,\r\n                                        onClick: externalHandler.onClick,\r\n                                        onMouseenter: externalHandler.onMouseenter,\r\n                                        Node: <li class=\"pl-date-base-panel-month-item\" key={item.label}/>,\r\n                                    })))}\r\n                                </ul>\r\n                            </Transition>\r\n                        )}\r\n                        <Transition name={`pl-transition-slide-${state.slide}`}>\r\n                            <ul {...{\r\n                                class: listClasses.value,\r\n                                key: state.selectDate.year!,\r\n                                direction: 'vertical'\r\n                            }}>\r\n                                {monthList.value.map(item => (DatePanelItemWrapper({\r\n                                    item,\r\n                                    onClick: externalHandler.onClick,\r\n                                    onMouseenter: externalHandler.onMouseenter,\r\n                                    Node: <li class=\"pl-date-base-panel-month-item\" key={item.label}/>,\r\n                                })))}\r\n                            </ul>\r\n                        </Transition>\r\n                    </>)\r\n                }) as any\r\n\r\n                const Wrapper = (\r\n                    <div {...{\r\n                        class: 'pl-date-base-panel pl-date-base-panel-month-wrapper',\r\n                        direction: props.direction,\r\n                    }}>\r\n                        <Transition name={`pl-transition-slide-${viewModel.value === DateView.year ? 'prev' : 'next'}`}>\r\n                            {viewModel.value === DateView.month ? <Month {...{class: 'pl-date-base-panel-month', direction: 'horizontal'}}/> : (\r\n                                <PlDatePanelYear\r\n                                    modelValue={String(state.selectDate.year)}\r\n                                    onUpdateModelValue={externalHandler.onSelectYearChange}\r\n                                    direction=\"horizontal\"/>\r\n                            )}\r\n                        </Transition>\r\n                    </div>\r\n                ) as any\r\n\r\n                return <Wrapper/>\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateItemData, DatePanelItemWrapper, DatePanelWrapper, DatePublicEmits, DatePublicProps, DateView, DateViewSeq, DefaultDateFormatString, SlideTransitionDirection} from \"../date.utils\";\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\nimport {computed, PropType, Transition, watch} from 'vue';\r\nimport {PDate, plainDate} from \"../plainDate\";\r\nimport {PlButton} from \"../../button/button\";\r\nimport {StyleSize} from \"../../../use/useStyle\";\r\nimport {prefix} from \"../../../utils/prefix\";\r\nimport {PlList} from \"../../list/list\";\r\nimport {createEventListener} from \"../../../utils/createEventListener\";\r\nimport {PlItem} from \"../../item/item\";\r\nimport {zeroize} from \"plain-utils/string/zeroize\";\r\nimport {PlDatePanelMonth} from \"./date-panel-month\";\r\nimport {PlTimePanel} from \"../../time/panel/time-panel\";\r\n\r\nexport const PlDatePanelDate = designComponent({\r\n    name: 'pl-date-panel-date',\r\n    props: {\r\n        ...DatePublicProps,\r\n        view: {type: String as PropType<DateView>, default: DateView.date},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        // onUpdateModelValue: (val?: string, ipd?: PDate) => true,\r\n        onClick: (did: DateItemData) => true,\r\n        onMouseenter: (did: DateItemData) => true,\r\n        onSelectTime: (val: string) => true,\r\n        onSelectDateChange: (pd: PDate) => true,\r\n        onMouseleaveDateList: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {\r\n            model,\r\n            state,\r\n            today,\r\n            getStatus,\r\n            displayFormat,\r\n            valueFormat,\r\n            viewModel,\r\n            setSelectDate,\r\n            handler,\r\n            parent,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.YMD,\r\n            processPd: {\r\n                value: (pd) => {\r\n                    if (!props.datetime) return pd\r\n                    pd = pd.useHms(showTimePd.value)\r\n                    if (!!state.topState.max && state.topState.max.YMDHms < pd.YMDHms) {pd = state.topState.max}\r\n                    if (!!state.topState.min && state.topState.min.YMDHms > pd.YMDHms) {pd = state.topState.min}\r\n                    return pd\r\n                }\r\n            },\r\n        })\r\n\r\n        const utils = {\r\n            setSelectDate: (val: PDate | string | undefined, autoEmit = true) => {\r\n                let pd: PDate;\r\n                if (!val) {\r\n                    pd = today\r\n                } else {\r\n                    pd = typeof val !== \"string\" ? val : today.useValue(val)\r\n                }\r\n                setSelectDate(pd)\r\n                if (autoEmit) {\r\n                    emit.onSelectDateChange(pd)\r\n                }\r\n            }\r\n        }\r\n\r\n        const weekList = computed(() => {\r\n            const weeks = ['日', '一', '二', '三', '四', '五', '六']\r\n            return weeks.slice(props.firstWeekDay).concat(weeks.slice(0, props.firstWeekDay))\r\n        })\r\n\r\n        const dateList = computed(() => {\r\n            const {selectDate} = state\r\n            let pd = today.useYMD([selectDate.year, selectDate.month, 1])\r\n            const currentMonthFirstDate = pd.clone()\r\n            let weekDayDuration = currentMonthFirstDate.day - props.firstWeekDay\r\n            let offsetDay = weekDayDuration === 0 ? 7 : weekDayDuration > 0 ? weekDayDuration : 7 + weekDayDuration\r\n            let firstDateTime = new Date(currentMonthFirstDate.time! - (offsetDay) * 24 * 60 * 60 * 1000).getTime()\r\n            let list: DateItemData[] = []\r\n            for (let i = 0; i < 42; i++) {\r\n                pd = pd.useTime(firstDateTime)\r\n                let item = {\r\n                    label: pd.date,\r\n                    pd,\r\n                    ...getStatus(pd),\r\n                    externals: {\r\n                        isSelectMonth: pd.YM === selectDate.YM,\r\n                    },\r\n                }\r\n                list.push(item)\r\n                firstDateTime += 24 * 60 * 60 * 1000\r\n            }\r\n            return list\r\n        })\r\n\r\n        const monthAttrs = computed(() => ({\r\n            modelValue: state.selectDate.getValue(),\r\n            displayFormat,\r\n            valueFormat,\r\n            view: viewModel.value,\r\n            onChange: externalHandler.onSelectMonthChange,\r\n        }))\r\n\r\n        const defaultTimePd = computed(() => {\r\n            const config = {displayFormat: DefaultDateFormatString.Hms, valueFormat: DefaultDateFormatString.Hms}\r\n            return !!props.defaultTime ?\r\n                plainDate(props.defaultTime, config) :\r\n                plainDate.today(config.displayFormat, config.valueFormat)\r\n        })\r\n\r\n        const showTimePd = computed(() => (state.pd.vpd as PDate | null) || defaultTimePd.value)\r\n\r\n        const timeAttrs = computed(() => {\r\n            const vpd = state.pd.vpd as PDate | null\r\n            const timePd = vpd || defaultTimePd.value\r\n            const attrs = {\r\n                modelValue: plainDate.format(timePd.getDate(), DefaultDateFormatString.Hms),\r\n                displayFormat: DefaultDateFormatString.Hms,\r\n                valueFormat: DefaultDateFormatString.Hms,\r\n                max: undefined as undefined | string,\r\n                min: undefined as undefined | string,\r\n                onChange: externalHandler.onSelectTime,\r\n            }\r\n            const {max, min} = state.topState\r\n            if (!!vpd) {\r\n                /*限制最大最小值*/\r\n                if (!!max) {\r\n                    if (max.YMD <= vpd.YMD) {\r\n                        const maxPd = timePd.useHms(max)\r\n                        attrs.max = plainDate.format(maxPd.getDate(), DefaultDateFormatString.Hms)\r\n                    }\r\n                }\r\n                if (!!min) {\r\n                    if (min.YMD >= vpd.YMD) {\r\n                        const minPd = timePd.useHms(min)\r\n                        attrs.min = plainDate.format(minPd.getDate(), DefaultDateFormatString.Hms)\r\n                    }\r\n                }\r\n            }\r\n            return attrs\r\n        })\r\n\r\n        const methods = {\r\n            /*上一年*/\r\n            prevYear() {utils.setSelectDate(state.selectDate.useYear(state.selectDate.year - 1))},\r\n            /*下一年*/\r\n            nextYear() {utils.setSelectDate(state.selectDate.useYear(state.selectDate.year + 1))},\r\n            /*上一月*/\r\n            prevMonth() {utils.setSelectDate(state.selectDate.useMonthDate(state.selectDate.month - 1, 1))},\r\n            /*下一月*/\r\n            nextMonth() {utils.setSelectDate(state.selectDate.useMonthDate(state.selectDate.month + 1, 1))},\r\n            /*切换视图*/\r\n            changeView: (view: DateView) => {\r\n                if (view === viewModel.value) return\r\n                const oldSeq = DateViewSeq[viewModel.value]\r\n                const newSeq = DateViewSeq[view]\r\n                state.slide = newSeq > oldSeq ? SlideTransitionDirection.next : SlideTransitionDirection.prev\r\n                viewModel.value = view\r\n            },\r\n        }\r\n\r\n        const externalHandler = {\r\n            onSelectMonthChange: (val: string) => {\r\n                utils.setSelectDate(state.selectDate.useValue(val))\r\n                methods.changeView(DateView.date)\r\n            },\r\n            onSelectTime: (val: string) => {\r\n                if (!!parent) {return emit.onSelectTime(val)}\r\n                const timePd = defaultTimePd.value.useValue(val)\r\n                let vpd = state.pd.vpd as PDate | undefined || today\r\n                vpd = vpd.useHms(timePd)\r\n                model.value = vpd.getValue()\r\n                emit.onSelectTime(val)\r\n            },\r\n            onClick: (did: DateItemData) => {\r\n                if (!!parent) {return emit.onClick(did)}\r\n                handler.onClick(did)\r\n            },\r\n            onMouseenter: (did: DateItemData) => {\r\n                if (!!parent) {return emit.onMouseenter(did)}\r\n                handler.onMouseenter(did)\r\n            },\r\n        }\r\n\r\n        const render = {\r\n            date: () => {\r\n                const Wrapper: any = DatePanelWrapper({\r\n                    left: (<>\r\n                        <PlButton icon=\"el-icon-d-arrow-left\" mode=\"text\" size={StyleSize.mini} onClick={methods.prevYear}/>\r\n                        <PlButton icon=\"el-icon-arrow-left\" mode=\"text\" size={StyleSize.mini} onClick={methods.prevMonth}/>\r\n                    </>),\r\n                    center: (<>\r\n                        <span onClick={() => methods.changeView(DateView.year)}>{state.selectDate.year}</span>\r\n                        -\r\n                        <span onClick={() => methods.changeView(DateView.month)}>{prefix(state.selectDate.month! + 1)}</span>\r\n                        {!!props.datetime && (<span class=\"pl-date-base-panel-date-time-label\" onClick={() => methods.changeView(DateView.time)}>\r\n                        {timeAttrs.value.modelValue}\r\n                    </span>)}\r\n                    </>),\r\n                    right: (<>\r\n                        <PlButton icon=\"el-icon-arrow-right\" mode=\"text\" size={StyleSize.mini} onClick={methods.nextMonth}/>\r\n                        <PlButton icon=\"el-icon-d-arrow-right\" mode=\"text\" size={StyleSize.mini} onClick={methods.nextYear}/>\r\n                    </>),\r\n                    content: (<>\r\n                        <ul class=\"pl-date-base-panel-date-week-list\">\r\n                            {weekList.value.map(item => (\r\n                                <li class=\"pl-date-base-panel-item pl-date-base-panel-date-week-item\" key={item}>\r\n                                    <div><span>{item}</span></div>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                        <PlList class=\"pl-date-base-panel-date-list\" tag=\"ul\" {...createEventListener({onMouseleave: emit.onMouseleaveDateList})}>\r\n                            {dateList.value.map((item, index) => (\r\n                                DatePanelItemWrapper({\r\n                                    item,\r\n                                    onClick: externalHandler.onClick,\r\n                                    onMouseenter: externalHandler.onMouseenter,\r\n                                    Node: <PlItem\r\n                                        {...{\r\n                                            tag: 'li',\r\n                                            class: ['pl-date-base-panel-date-item', {'pl-date-base-panel-date-item-other-month': !item.externals.isSelectMonth,}],\r\n                                            key: item.externals.isSelectMonth ? item.pd.date : `_${index}`,\r\n                                        }}\r\n                                    />,\r\n                                })\r\n                            ))}\r\n                        </PlList>\r\n                    </>),\r\n                })\r\n                return <Wrapper {...{class: 'pl-date-base-panel-date', direction: 'horizontal', key: 'date'}}/>\r\n            },\r\n            month: () => {\r\n                return <PlDatePanelMonth {...monthAttrs.value} direction=\"horizontal\" key={viewModel.value}/>\r\n            },\r\n            time: () => {\r\n                const Wrapper: any = DatePanelWrapper({\r\n                    center: (<>\r\n                        <span onClick={() => methods.changeView(DateView.date)}>\r\n                            {showTimePd.value.year}-{zeroize(showTimePd.value.month! + 1)}-{zeroize(showTimePd.value.date!)}\r\n                        </span>\r\n                    </>),\r\n                    content: <PlTimePanel {...timeAttrs.value}/>,\r\n                })\r\n                return <Wrapper {...{class: 'pl-date-base-panel-time', direction: 'horizontal', key: 'time'}}/>\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-date-base-panel-date-wrapper pl-date-base-panel\">\r\n                    <Transition name={`pl-transition-slide-${state.slide}`}>\r\n                        {render[viewModel.value === DateView.year ? DateView.month : viewModel.value]()}\r\n                    </Transition>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateEmitRangeType, DatePublicEmits, DatePublicProps, DateView, DefaultDateFormatString} from \"../date.utils\";\r\nimport {computed, PropType} from 'vue';\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\nimport {PDate, plainDate} from \"../plainDate\";\r\nimport {PlDatePanelDate} from \"./date-panel-date\";\r\n\r\nconst DefaultTime = {\r\n    start: '00:00:00',\r\n    end: '23:59:59'\r\n}\r\n\r\nexport const PlDatePanelRange = designComponent({\r\n    name: 'pl-date-panel-range',\r\n    props: {\r\n        ...DatePublicProps,\r\n        range: {type: Boolean, default: true},\r\n        view: {type: String as PropType<DateView>, default: DateView.date}\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        mousedown: (e: MouseEvent, type: DateEmitRangeType) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {\r\n            state,\r\n            displayFormat,\r\n            valueFormat,\r\n            startModel,\r\n            endModel,\r\n            handler,\r\n            setSelectDate,\r\n            today,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.YMD,\r\n            processPd: {\r\n                range: (spd, epd) => {\r\n                    spd = spd.useHms(state.pd.spd || defaultTimePd.value.start)\r\n                    epd = epd.useHms(state.pd.epd || defaultTimePd.value.end)\r\n                    return utils.processPd(spd, epd)\r\n                }\r\n            },\r\n        })\r\n\r\n        const defaultTimePd = computed(() => {\r\n            const config = {displayFormat: DefaultDateFormatString.Hms, valueFormat: DefaultDateFormatString.Hms}\r\n            return {\r\n                start: plainDate(props.defaultStartTime || DefaultTime.start, config),\r\n                end: plainDate(props.defaultEndTime || DefaultTime.end, config),\r\n            }\r\n        })\r\n\r\n        const utils = {\r\n            processPd: (argSpd: PDate | null, argEpd: PDate | null) => {\r\n                let spd = argSpd || argEpd!\r\n                let epd = argEpd || argSpd!\r\n                const {max, min} = state.topState\r\n                const jdView = props.datetime ? 'YMDHms' : 'YMD'\r\n                if (!!max) {\r\n                    if (max[jdView] < spd[jdView]) spd = max\r\n                    if (max[jdView] < epd[jdView]) epd = max\r\n                }\r\n                if (!!min) {\r\n                    if (min[jdView] > spd[jdView]) spd = min\r\n                    if (min[jdView] > epd[jdView]) epd = min\r\n                }\r\n                return spd[jdView] > epd[jdView] ? {\r\n                    spd: epd,\r\n                    epd: spd,\r\n                } : {\r\n                    spd, epd\r\n                }\r\n            },\r\n        }\r\n\r\n        const externalHandler = {\r\n            onSelectTime: (val: string, type: DateEmitRangeType) => {\r\n                let pd = (type === DateEmitRangeType.start ? state.pd.spd : state.pd.epd) || today\r\n                pd = pd.useHms(defaultTimePd.value.start.useValue(val))\r\n                const {spd, epd} = utils.processPd(type === DateEmitRangeType.start ? pd : state.pd.spd, type === DateEmitRangeType.end ? pd : state.pd.epd)\r\n                startModel.value = spd.getDisplay()\r\n                endModel.value = epd.getDisplay()\r\n                state.range = {\r\n                    hover: null,\r\n                    value: [spd, epd],\r\n                }\r\n                emit.onUpdateModelValue(startModel.value, DateEmitRangeType.start)\r\n                emit.onUpdateModelValue(endModel.value, DateEmitRangeType.end)\r\n            }\r\n        }\r\n\r\n        const binding = computed(() => {\r\n            const startSelectDate = state.selectDate\r\n            const publicProps = Object.keys(DatePublicProps).reduce((ret, key) => {\r\n                (ret as any)[key] = (props as any)[key]\r\n                return ret\r\n            }, {})\r\n            Object.assign(publicProps, {\r\n                displayFormat: displayFormat,\r\n                valueFormat: valueFormat,\r\n            })\r\n            const start = {\r\n                ...publicProps,\r\n                selectDate: startSelectDate,\r\n                modelValue: startModel.value,\r\n                defaultTime: props.defaultStartTime || DefaultTime.start,\r\n\r\n                onSelectDateChange: setSelectDate,\r\n                onMouseenter: handler.onMouseenter,\r\n                onClick: handler.onClick,\r\n                onSelectTime: (val: string) => externalHandler.onSelectTime(val, DateEmitRangeType.start),\r\n                onMousedown: (e: MouseEvent) => emit.mousedown(e, DateEmitRangeType.start),\r\n            }\r\n            const endSelectDate = startSelectDate.useMonthDate(startSelectDate.month + 1, 1)\r\n            const end = {\r\n                ...publicProps,\r\n                selectDate: endSelectDate,\r\n                modelValue: endModel.value,\r\n                defaultTime: props.defaultEndTime || DefaultTime.end,\r\n\r\n                onSelectDateChange: (val: PDate) => setSelectDate(val.useMonthDate(val.month - 1, 1)),\r\n                onMouseenter: handler.onMouseenter,\r\n                onClick: handler.onClick,\r\n                onSelectTime: (val: string) => externalHandler.onSelectTime(val, DateEmitRangeType.end),\r\n                onMousedown: (e: MouseEvent) => emit.mousedown(e, DateEmitRangeType.end),\r\n            }\r\n            return {start, end}\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-date-base-panel pl-date-panel-date-range\">\r\n                    <PlDatePanelDate {...binding.value.start}/>\r\n                    <PlDatePanelDate {...binding.value.end}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PDate} from \"./plainDate\";\r\nimport {useDate, UseDateEmit, UseDateJudgementView} from \"./useDate\";\r\nimport {DateItemData, DatePublicPropsType} from \"./date.utils\";\r\nimport {toArray} from \"../../utils/toArray\";\r\nimport {reactive, computed} from 'vue';\r\n\r\nexport function useDateWeek(\r\n    {\r\n        props,\r\n        emit,\r\n        getDateData,\r\n        jdView,\r\n    }: {\r\n        props: DatePublicPropsType,\r\n        emit: UseDateEmit,\r\n        getDateData: (pd: PDate) => [PDate, PDate],\r\n        jdView: UseDateJudgementView,\r\n    }) {\r\n\r\n    const useDateData = useDate({\r\n        props,\r\n        emit,\r\n        jdView,\r\n        customStatus: {\r\n            active: () => {\r\n                let ret: PDate[] = []\r\n                if (!props.range) {\r\n                    if (!!dateData.value.value) {\r\n                        dateData.value.value.forEach((item) => ret.push(...item))\r\n                    }\r\n                } else {\r\n                    if (!!dateData.value.range.value) {\r\n                        ret.push(...dateData.value.range.value.start)\r\n                        ret.push(...dateData.value.range.value.end)\r\n                    }\r\n                }\r\n                return ret\r\n            },\r\n            disabled: () => maxmin.value,\r\n            start: () => {\r\n                let ret: PDate[] = []\r\n                if (!props.range) {\r\n                    if (!!dateData.value.current) {\r\n                        ret.push(dateData.value.current[0])\r\n                    }\r\n                    if (!!dateData.value.value) {\r\n                        dateData.value.value.forEach(([spd]) => ret.push(spd))\r\n                    }\r\n                } else {\r\n                    if (!!dateData.value.range.value) {\r\n                        ret.push(dateData.value.range.value.start[0])\r\n                        ret.push(dateData.value.range.value.end[0])\r\n                    } else if (!!dateData.value.range.hover) {\r\n                        ret.push(dateData.value.range.hover.start[0])\r\n                        ret.push(dateData.value.range.hover.end[0])\r\n                    }\r\n                }\r\n                return ret\r\n            },\r\n            end: () => {\r\n                let ret: PDate[] = []\r\n                if (!props.range) {\r\n                    if (!!dateData.value.current) {\r\n                        ret.push(dateData.value.current[1])\r\n                    }\r\n                    if (!!dateData.value.value) {\r\n                        dateData.value.value.forEach(([, epd]) => ret.push(epd))\r\n                    }\r\n                } else {\r\n                    if (!!dateData.value.range.value) {\r\n                        ret.push(dateData.value.range.value.start[1])\r\n                        ret.push(dateData.value.range.value.end[1])\r\n                    } else if (!!dateData.value.range.hover) {\r\n                        ret.push(dateData.value.range.hover.start[1])\r\n                        ret.push(dateData.value.range.hover.end[1])\r\n                    }\r\n                }\r\n                return ret\r\n            },\r\n            hover: () => {\r\n                let ret: [PDate, PDate][] = []\r\n                if (!props.range) {\r\n                    if (!!dateData.value.current) {\r\n                        ret.push(dateData.value.current)\r\n                    }\r\n                    if (!!dateData.value.value) {\r\n                        dateData.value.value.forEach((item) => ret.push(item))\r\n                    }\r\n                } else {\r\n                    if (!!dateData.value.range.value) {\r\n                        ret.push([dateData.value.range.value.start[0], dateData.value.range.value.end[1]])\r\n                    } else if (!!dateData.value.range.hover) {\r\n                        ret.push([dateData.value.range.hover.start[0], dateData.value.range.hover.end[1]])\r\n                    }\r\n                }\r\n                return ret\r\n            },\r\n        },\r\n    })\r\n\r\n    const {state, handler} = useDateData\r\n\r\n    const externalState = reactive({\r\n        current: null as null | DateItemData,\r\n    })\r\n\r\n    const maxmin = computed(() => {\r\n        return {\r\n            max: !state.topState.max ? null : getDateData(state.topState.max)[1],\r\n            min: !state.topState.min ? null : getDateData(state.topState.min)[0],\r\n        }\r\n    })\r\n\r\n    const dateData = computed(() => {\r\n        return {\r\n            value: !state.pd.vpd ? null : toArray(state.pd.vpd).map(item => getDateData(item)),\r\n            range: {\r\n                hover: !state.topState.range.hover ? null : {\r\n                    start: getDateData(state.topState.range.hover[0]),\r\n                    end: getDateData(state.topState.range.hover[1]),\r\n                },\r\n                value: !(!state.topState.range.hover && (!!state.pd.spd && !!state.pd.epd)) ? null : {\r\n                    start: getDateData(state.pd.spd),\r\n                    end: getDateData(state.pd.epd),\r\n                },\r\n            },\r\n            current: !!externalState.current ? getDateData(externalState.current.pd) : null,\r\n        }\r\n    })\r\n\r\n    const externalHandler = {\r\n        onClick: (did: DateItemData) => {\r\n            const [spd] = getDateData(did.pd)\r\n            handler.onClick({...did, pd: spd})\r\n        },\r\n        onMouseenter: (did: DateItemData) => {\r\n            if (!props.range) {\r\n                externalState.current = did\r\n            } else {\r\n                handler.onMouseenter(did)\r\n            }\r\n        },\r\n        onMouseleaveDateList: () => externalState.current = null,\r\n    }\r\n\r\n    return {\r\n        useDateData,\r\n        externalHandler,\r\n    }\r\n}","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DatePublicEmits, DatePublicProps} from \"../date.utils\";\r\nimport {PlDatePanelDate} from \"./date-panel-date\";\r\nimport {computed} from 'vue';\r\nimport {PDate} from \"../plainDate\";\r\nimport {useDateWeek} from \"../useDateWeek\";\r\nimport {UseDateJudgementView} from \"../useDate\";\r\n\r\nexport const PlDatePanelWeek = designComponent({\r\n    name: 'pl-date-panel-week',\r\n    props: {\r\n        ...DatePublicProps,\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {useDateData, externalHandler} = useDateWeek({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.YMD,\r\n            getDateData: (pd: PDate) => {\r\n                let day = pd.day\r\n                let firstWeekDay = props.firstWeekDay\r\n                const weekDayDuration = day - firstWeekDay\r\n                let offsetDay = weekDayDuration === 0 ? 0 : weekDayDuration > 0 ? weekDayDuration : 7 + weekDayDuration\r\n                const spd = pd.useMonthDate(pd.month, pd.date - offsetDay)\r\n                const epd = spd.useMonthDate(spd.month, spd.date + 6)\r\n                return [spd, epd]\r\n            },\r\n        })\r\n\r\n        const dateAttrs = computed(() => ({\r\n            class: 'pl-date-panel-week',\r\n            firstWeekDay: props.firstWeekDay,\r\n            selectDate: useDateData.state.selectDate,\r\n            onMouseenter: externalHandler.onMouseenter,\r\n            onClick: externalHandler.onClick,\r\n            onMouseleaveDateList: externalHandler.onMouseleaveDateList,\r\n            onSelectDateChange: useDateData.setSelectDate,\r\n        }))\r\n\r\n        return {\r\n            render: () => <PlDatePanelDate {...dateAttrs.value}/>\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DatePublicEmits, DatePublicProps} from \"../date.utils\";\r\nimport {PlDatePanelMonth} from \"./date-panel-month\";\r\nimport {PDate} from \"../plainDate\";\r\nimport {computed} from 'vue';\r\nimport {useDateWeek} from \"../useDateWeek\";\r\nimport {UseDateJudgementView} from \"../useDate\";\r\n\r\nexport const PlDatePanelQuarter = designComponent({\r\n    name: 'pl-date-panel-quarter',\r\n    props: {\r\n        ...DatePublicProps,\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {useDateData, externalHandler} = useDateWeek({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.YM,\r\n            getDateData: (pd: PDate) => {\r\n                let month = pd.month\r\n                let quarter = Math.floor(month / 3)\r\n                const spd = pd.useMonthDate(quarter * 3, 1)\r\n                const epd = pd.useMonthDate(spd.month + 2, 1)\r\n                return [spd, epd]\r\n            },\r\n        })\r\n\r\n        const monthAttrs = computed(() => ({\r\n            class: 'pl-date-panel-quarter',\r\n            selectDate: useDateData.state.selectDate,\r\n            onMouseenter: externalHandler.onMouseenter,\r\n            onClick: externalHandler.onClick,\r\n            onMouseleaveList: externalHandler.onMouseleaveDateList,\r\n            onSelectDateChange: useDateData.setSelectDate,\r\n            showQuarter: true,\r\n        }))\r\n\r\n        return {\r\n            render: () => <PlDatePanelMonth {...monthAttrs.value}/>\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateEmitRangeType, DatePanel, DatePublicEmits, DatePublicProps, DefaultDateFormatString} from \"../date.utils\";\r\nimport {PropType, computed} from 'vue';\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {PlDatePanelRange} from \"./date-panel-range\";\r\nimport {PlDatePanelDate} from \"./date-panel-date\";\r\nimport {PlDatePanelYear} from \"./date-panel-year\";\r\nimport {PlDatePanelMonth} from \"./date-panel-month\";\r\nimport {PlDatePanelWeek} from \"./date-panel-week\";\r\nimport {PlDatePanelQuarter} from \"./date-panel-quarter\";\r\nimport {VNodeChild} from \"../../../shims\";\r\n\r\nexport const PlDatePanel = designComponent({\r\n    name: 'pl-date-panel',\r\n    props: {\r\n        ...DatePublicProps,\r\n        panel: {type: String as PropType<DatePanel>, default: DatePanel.date},\r\n        foot: {type: Function as PropType<() => VNodeChild>},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        onMousedown: (e: MouseEvent, type?: DateEmitRangeType) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue as any, emit.onUpdateModelValue)\r\n        const startModel = useModel(() => props.start, emit.onUpdateStart)\r\n        const endModel = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const handler = {\r\n            onChange: (val: string | string[] | undefined, type?: DateEmitRangeType) => {\r\n                if (!props.range || props.multiple) {\r\n                    model.value = val\r\n                } else {\r\n                    if (type === DateEmitRangeType.start) {\r\n                        startModel.value = val as string | undefined\r\n                    } else {\r\n                        endModel.value = val as string | undefined\r\n                    }\r\n                    emit.onUpdateModelValue(val, type)\r\n                }\r\n            }\r\n        }\r\n\r\n        const binding = computed(() => {\r\n            const {range, max, min, displayFormat, valueFormat, firstWeekDay, defaultTime, defaultStartTime, defaultEndTime, datetime, multiple} = props\r\n            const panel = props.panel\r\n            const value = model.value\r\n            const start = startModel.value\r\n            const end = endModel.value\r\n            const publicProps = {range, modelValue: value, start, end, max, min, firstWeekDay, defaultTime, defaultStartTime, defaultEndTime, datetime, multiple}\r\n\r\n            return {\r\n                name: {\r\n                    [DatePanel.year]: PlDatePanelYear,\r\n                    [DatePanel.month]: PlDatePanelMonth,\r\n                    [DatePanel.date]: range ? PlDatePanelRange : PlDatePanelDate,\r\n                    [DatePanel.week]: PlDatePanelWeek,\r\n                    [DatePanel.quarter]: PlDatePanelQuarter,\r\n                }[panel] as any,\r\n                attrs: {\r\n                    ...publicProps,\r\n                    onChange: handler.onChange,\r\n                    onMousedown: emit.onMousedown,\r\n                    displayFormat: displayFormat || DefaultDateFormatString[panel],\r\n                    valueFormat: valueFormat || DefaultDateFormatString[panel],\r\n                },\r\n            }\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                const {name: Component, attrs} = binding.value\r\n                return <>\r\n                    <Component {...attrs}/>\r\n                    {!!props.foot && <div class=\"pl-date-panel-foot\" onMousedown={emit.onMousedown}>\r\n                        {props.foot()}\r\n                    </div>}\r\n                </>\r\n            }\r\n        }\r\n    },\r\n})","import {createAgentGetter} from \"../popper/edit/createAgentGetter\";\r\nimport {PlDatePanel} from \"./panel/date-panel\";\r\n\r\nexport const DateServiceGetter = createAgentGetter({\r\n    name: 'date',\r\n    render: (attrs) => <PlDatePanel {...attrs}/>,\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n    },\r\n    defaultRenderAttrs: {\r\n        async onChange() {\r\n            let renderAttrs: any = this.state.option.serviceOption.renderAttrs\r\n            if (typeof renderAttrs === \"function\") renderAttrs = renderAttrs()\r\n            if (!(\r\n                renderAttrs.datetime ||\r\n                renderAttrs.multiple ||\r\n                renderAttrs.range\r\n            )) {\r\n                this.hide()\r\n            }\r\n        },\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport './date.scss'\r\nimport {DateEmitRangeType, DatePanel, DatePublicEmits, DatePublicProps, getDefaultDateFormatter} from \"./date.utils\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {StyleProps} from \"../../use/useStyle\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {DateServiceGetter} from \"./date.service\";\r\nimport {useDateTime} from \"../date-time-input/useDateTime\";\r\nimport {computed, PropType} from 'vue';\r\nimport {PDate, plainDate} from \"./plainDate\";\r\nimport {PlInput} from \"../input/input\";\r\nimport {PlInputInnerTags} from \"../input/input-inner-tags\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlDateTimeInput} from \"../date-time-input/date-time-input\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\n\r\nexport const PlDate = designComponent({\r\n    name: 'pl-date',\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n        ...DatePublicProps,\r\n        panel: {type: String as PropType<DatePanel>, default: DatePanel.date},\r\n        collapseTags: {type: Boolean, default: true},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots(['foot'], true)\r\n\r\n        const model = useModel(() => props.modelValue as any, emit.onUpdateModelValue)\r\n        const startModel = useModel(() => props.start, emit.onUpdateStart)\r\n        const endModel = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const serviceHandler = {\r\n            onChange: (val: string | undefined, type: DateEmitRangeType) => {\r\n                if (!props.range || props.multiple) {\r\n                    model.value = val\r\n                } else {\r\n                    if (type === 'start') {\r\n                        startModel.value = val\r\n                    } else {\r\n                        endModel.value = val\r\n                        if (props.panel !== DatePanel.date || !props.datetime) {\r\n                            agentState.methods.hide()\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            onMousedown: async (e: MouseEvent, type: DateEmitRangeType) => {\r\n                agentState.state.focusCounter++\r\n                await delay(0)\r\n                if (props.multiple) {\r\n                    refs.plInput!.methods.focus()\r\n                } else if (!props.range) {\r\n                    refs.valueInput!.methods.focus()\r\n                } else {\r\n                    if (type === 'start') {\r\n                        refs.startInput!.methods.focus()\r\n                    } else {\r\n                        refs.endInput!.methods.focus()\r\n                    }\r\n                }\r\n            },\r\n        }\r\n\r\n        const agentState = useEditPopperAgent({\r\n            event: {emit},\r\n            serviceGetter: DateServiceGetter,\r\n            option: {\r\n                reference: () => refs.plInput as any,\r\n                renderAttrs: () => ({\r\n                    ...(Object.keys(DatePublicProps).reduce((ret: any, key) => {\r\n                        ret[key] = (props as any)[key]\r\n                        return ret\r\n                    }, {})),\r\n                    panel: props.panel,\r\n                    modelValue: model.value,\r\n                    start: startModel.value,\r\n                    end: endModel.value,\r\n                    ...format.value,\r\n                    ...serviceHandler,\r\n                    foot: slots.foot.isExist() ? slots.foot : undefined,\r\n                })\r\n            },\r\n        })\r\n\r\n        const {\r\n            refs,\r\n            handler,\r\n            inputValue,\r\n        } = useDateTime({\r\n            value: model,\r\n            start: startModel,\r\n            end: endModel,\r\n            props,\r\n            agentState,\r\n            emit,\r\n        })\r\n\r\n        const format = computed(() => {\r\n            const {displayFormat, valueFormat} = getDefaultDateFormatter(props.panel, props.datetime)\r\n            return {\r\n                displayFormat: props.displayFormat || displayFormat,\r\n                valueFormat: props.valueFormat || valueFormat,\r\n            }\r\n        })\r\n\r\n        const today = plainDate.today(format.value.displayFormat, format.value.valueFormat)\r\n\r\n        const formatData = computed(() => {\r\n            let vpd: PDate | null = null;\r\n            let vpds: PDate[] | null = null;\r\n            let spd: PDate | null = null;\r\n            let epd: PDate | null = null;\r\n            if (props.multiple) {\r\n                let value = model.value as string[] | undefined\r\n                if (!!value) {\r\n                    vpds = value.map(item => plainDate(item, format.value))\r\n                }\r\n            } else {\r\n                if (!props.range) {\r\n                    const value = model.value as string | undefined\r\n                    if (!!value) vpd = plainDate(value, format.value)\r\n                } else {\r\n                    if (!!startModel.value) spd = plainDate(startModel.value, format.value)\r\n                    if (!!endModel.value) epd = plainDate(endModel.value, format.value)\r\n                }\r\n            }\r\n            return {vpd, vpds, spd, epd}\r\n        })\r\n\r\n        const maxmin = computed(() => {\r\n            return {\r\n                max: !props.max ? null : plainDate(props.max, format.value),\r\n                min: !props.min ? null : plainDate(props.min, format.value),\r\n            }\r\n        })\r\n\r\n        const inputAttrs = computed(() => {\r\n            const isDates = props.multiple\r\n            return {\r\n                class: [\r\n                    'pl-date',\r\n                    {\r\n                        'pl-input-custom': !isDates,\r\n                        'pl-input-tags': isDates,\r\n                    },\r\n                ],\r\n                modelValue: Array.isArray(inputValue.value) ? inputValue.value.join('') : inputValue.value,\r\n                suffixIcon: 'el-icon-date',\r\n                clearIcon: true,\r\n                isFocus: agentState.state.focusCounter > 0,\r\n                width: isDates ? undefined : null,\r\n                inputInnerTabindex: isDates ? 0 : null,\r\n                clearHandler: handler.clearHandler,\r\n\r\n                ...agentState.inputHandler,\r\n                onClickInput: handler.clickInput,\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------custom handler-------------------------------------------*/\r\n\r\n        const customHandler = {\r\n            onInputChange(val: string | undefined, type: 'value' | 'start' | 'end') {\r\n                const {spd, epd} = formatData.value\r\n                let jdView = props.datetime ? 'YMDHms' as 'YMDHms' : 'YMD' as 'YMD'\r\n                /*没有值的话，如果是单值则请控值，否则什么也不做*/\r\n                if (!val) {\r\n                    if (type === 'value') {model.value = undefined}\r\n                    return\r\n                }\r\n                let pd = today.useDisplay(val)\r\n                /*输入值格式不正确，，什么是也不做*/\r\n                if (!pd.getDayJs().isValid()) {return;}\r\n                /*检查最大最小值*/\r\n                const {max, min} = maxmin.value\r\n                if (!!max && max[jdView] < pd[jdView]) pd = max\r\n                if (!!min && min[jdView] > pd[jdView]) pd = min\r\n                switch (type) {\r\n                    case 'value':\r\n                        model.value = pd.getValue()\r\n                        break\r\n                    case 'start':\r\n                        startModel.value = pd.getDisplay()\r\n                        if (!epd || (pd[jdView] > epd[jdView])) {endModel.value = startModel.value}\r\n                        break\r\n                    case 'end':\r\n                        endModel.value = pd.getDisplay()\r\n                        if (!spd || (pd[jdView] < spd[jdView])) {startModel.value = endModel.value}\r\n                        break\r\n                }\r\n            },\r\n            onClickItemCloseIcon(index: number, e: MouseEvent) {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                if (!agentState.editComputed.value.editable) {\r\n                    return\r\n                }\r\n                const value = model.value as string[]\r\n                value.splice(index, 1)\r\n                model.value = [...value]\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <PlInput ref=\"plInput\"{...inputAttrs.value as any}>\r\n                        <div {...{class: 'pl-input-custom-inner', range: props.range}}>\r\n                            {props.multiple && (<PlInputInnerTags\r\n                                data={formatData.value.vpds || []}\r\n                                collapseTags={props.collapseTags}\r\n                                v-slots={{\r\n                                    default: ({item, index}: { item: PDate, index: number }) => (<>\r\n                                        <span>{item.getDisplay()}</span>\r\n                                        <PlIcon icon=\"el-icon-close\" {...{onClick: (e: MouseEvent) => customHandler.onClickItemCloseIcon(index, e)}}/>\r\n                                    </>)\r\n                                }}\r\n                            />)}\r\n\r\n                            {!props.multiple && (\r\n                                !props.range ? (<PlDateTimeInput\r\n                                        modelValue={formatData.value.vpd ? formatData.value.vpd.getDisplay() : undefined}\r\n                                        ref=\"valueInput\"\r\n                                        {...{onChange: (val: string) => customHandler.onInputChange(val, 'value')}}\r\n                                        displayFormat={format.value.displayFormat}\r\n                                        onFocus={handler.customInputFocus}\r\n                                        onBlur={handler.customInputBlur}\r\n                                    />) :\r\n                                    <>\r\n                                        <PlDateTimeInput\r\n                                            width=\"100\"\r\n                                            modelValue={formatData.value.spd ? formatData.value.spd.getDisplay() : undefined}\r\n                                            ref=\"startInput\"\r\n                                            displayFormat={format.value.displayFormat}\r\n                                            {...{onChange: (val: string) => customHandler.onInputChange(val, 'start')}}\r\n                                            onFocus={handler.customInputFocus}\r\n                                            onBlur={handler.customInputBlur}\r\n                                        />\r\n                                        <span>~</span>\r\n                                        <PlDateTimeInput\r\n                                            width=\"100\"\r\n                                            modelValue={formatData.value.epd ? formatData.value.epd.getDisplay() : undefined}\r\n                                            ref=\"endInput\"\r\n                                            {...{onChange: (val: string) => customHandler.onInputChange(val, 'end')}}\r\n                                            displayFormat={format.value.displayFormat}\r\n                                            onFocus={handler.customInputFocus}\r\n                                            onBlur={handler.customInputBlur}\r\n                                        />\r\n                                    </>\r\n                            )}\r\n                        </div>\r\n                    </PlInput>\r\n                )\r\n            }\r\n        }\r\n    },\r\n}, {\r\n    plainDate,\r\n})","export const enum FormLabelAlign {\r\n    left = 'left',\r\n    center = 'center',\r\n    right = 'right',\r\n}\r\n\r\nexport const enum FormContentAlign {\r\n    'flex-start' = 'flex-start',\r\n    'flex-end' = 'flex-end',\r\n    'center' = 'center',\r\n    'space-around' = 'space-around',\r\n    'space-between' = 'space-between',\r\n    'space-evenly' = 'space-evenly',\r\n}\r\n\r\nexport const enum FormValidateMode {\r\n    form = 'form',\r\n    table = 'table',\r\n}","/**\r\n * 校验触发动作类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 15:41\r\n */\r\n\r\n/**\r\n * 校验触发器类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 22:02\r\n */\r\nimport {toArray} from \"../../utils/toArray\";\r\n\r\nexport enum FormValidateTrigger {\r\n    change = 'change',\r\n    blur = 'blur',\r\n    all = 'all',\r\n}\r\n\r\n/**\r\n * 校验的值类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 22:02\r\n */\r\nexport enum FormValueType {\r\n    string = 'string',\r\n    number = 'number',\r\n    boolean = 'boolean',\r\n    array = 'array',\r\n}\r\n\r\n/**\r\n * form以及formItem的rules属性类型\r\n * @author  韦胜健\r\n * @date    2020/7/18 12:39\r\n */\r\nexport interface FormRule {\r\n\r\n    field?: string | string[]                                                               // 绑定的字段\r\n    label?: string                                                                          // form item 的文本\r\n    options?: any | any[]                                                                   // 选项值校验\r\n\r\n    max?: number,                                                                           // 最大长度（字符串），最大值（数字），最大长度（数组）\r\n    min?: number,                                                                           // 最小长度（字符串），最小值（数字），最小长度（数组）\r\n    message?: string,                                                                       // 检验事变提示信息\r\n    pattern?: RegExp,                                                                       // 校验的正则表达式\r\n    required?: boolean,                                                                     // 是否必填\r\n    transform?: (val?: any) => any,                                                         // 将字段值转换成目标值之后校验\r\n    type?: FormValueType,                                                                   // 数据的类型\r\n    trigger?: FormValidateTrigger,                                                          // 触发器\r\n    validator?: (rule: FormRule, value: any, formData: object) => void | string | Promise<void | string>,// 自定义校验器\r\n\r\n}\r\n\r\n/**\r\n * pl-form组件 rules 属性对象类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 15:59\r\n */\r\nexport type FormComponentRules = FormRule[] | ({ [field: string]: FormRule | FormRule[] })\r\n\r\n/**\r\n * 关联校验字段\r\n * @author  韦胜健\r\n * @date    2020/12/28 12:07\r\n */\r\nexport type FormAssociateFields = Record<string, string | string[]>\r\n\r\n/**\r\n * pl-form-item 组件rules属性对象类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 15:59\r\n */\r\nexport interface FormComponentItemRules {\r\n    label?: string,\r\n    field?: string | string[]\r\n    required?: boolean,\r\n    rules?: FormRule | FormRule[]\r\n}\r\n\r\n/**\r\n * 校验单个字段的结果\r\n * @author  韦胜健\r\n * @date    2020/12/12 22:24\r\n */\r\nexport interface FormValidateResult {\r\n    label?: string,\r\n    message: string,\r\n    rule: FormRule,\r\n    value: any,\r\n}\r\n\r\n/**\r\n * 校验结果\r\n * @author  韦胜健\r\n * @date    2020/12/12 22:24\r\n */\r\nexport interface FormValidateResultMap {[k: string]: FormValidateResult | undefined}\r\n\r\n/**\r\n * 表单校验工具对象\r\n * @author  韦胜健\r\n * @date    2020/12/13 14:53\r\n */\r\nexport const FormValidateUtils = {\r\n    getValueByField(field: string, formData: Record<string, any> | undefined | null, transform?: (val: any) => any) {\r\n        if (!formData) {\r\n            return null\r\n        }\r\n        let val: any;\r\n        if (field.indexOf('.') === -1) {\r\n            val = formData[field]\r\n        } else {\r\n            const fields = field.split('.')\r\n            let index = 0, len = fields.length\r\n            let value = formData[fields[index]]\r\n\r\n            while (index < len - 1 && value != null) {\r\n                value = value[fields[++index]]\r\n            }\r\n            val = index == len - 1 ? value : null\r\n        }\r\n        return !transform ? val : transform(val)\r\n    },\r\n    /**\r\n     * 获取max校验失败信息\r\n     * @author  韦胜健\r\n     * @date    2020/12/13 14:54\r\n     */\r\n    getMaxMessage({value, max, type,}: { value: any, max: number, type?: FormValueType, }) {\r\n        if (Array.isArray(value)) {\r\n            return `最多选择 ${max} 个选项`\r\n        }\r\n        if (type == \"number\") {\r\n            return `最大值 ${max}`\r\n        }\r\n        return `最大文本长度 ${max} 个字符`\r\n    },\r\n    /**\r\n     * 获取min校验失败信息\r\n     * @author  韦胜健\r\n     * @date    2020/12/13 14:54\r\n     */\r\n    getMinMessage({value, min, type,}: { value: any, min: number, type?: FormValueType, }) {\r\n        if (Array.isArray(value)) {\r\n            return `最少选择 ${min} 个选项`\r\n        }\r\n        if (type == \"number\") {\r\n            return `最小值 ${min}`\r\n        }\r\n        return `最小文本长度 ${min} 个字符`\r\n    },\r\n    /**\r\n     * 获取有效值列表。如果值不存在则返回null\r\n     * @author  韦胜健\r\n     * @date    2020/12/13 14:55\r\n     */\r\n    getListValue<T>(val: T | T[] | null | undefined): T[] | null {\r\n        if (!val) {\r\n            return null\r\n        }\r\n        return Array.isArray(val) ? val : [val]\r\n    },\r\n    /**\r\n     * 执行校验规则，如果函数参数中有field，则只校验一个字段,否则校验rule中所有的字段\r\n     * @author  韦胜健\r\n     * @date    2020/12/13 14:56\r\n     * @param   rule                要校验的FormRule\r\n     * @param   formData            表单数据对象\r\n     * @param   fieldToLabel        字段映射label的对象\r\n     * @param   field               校验的字段\r\n     */\r\n    async checkRule({rule, formData, fieldToLabel, field}: { formData: Record<string, any> | null, rule: FormRule, fieldToLabel: Record<string, string>, field?: string }): Promise<null | FormValidateResult> {\r\n        const {\r\n            transform, type,\r\n            label, message,\r\n            required, options, max, min, pattern, validator\r\n        } = rule\r\n\r\n        let validList: { field: string, value: any }[] | null = null;\r\n\r\n        /*如果函数参数中有field，则只校验一个字段,否则校验rule中所有的字段*/\r\n        if (!!field) {\r\n            /*校验一个字段*/\r\n            validList = [{field, value: FormValidateUtils.getValueByField(field, formData, transform)}]\r\n        } else {\r\n            /*校验rule中所有的字段*/\r\n            const fields = FormValidateUtils.getListValue(rule.field)\r\n            if (!!fields) {\r\n                validList = fields.map(f => ({field: f, value: FormValidateUtils.getValueByField(f, formData, transform)}))\r\n            }\r\n        }\r\n        if (!validList || validList.length === 0) {\r\n            return null\r\n        }\r\n\r\n        /*---------------------------------------required 必填校验-------------------------------------------*/\r\n\r\n        if (required) {\r\n            const invalidValues = validList.filter(({value}) => {\r\n\r\n                //校验不通过才返回true\r\n\r\n                if (value == null) {\r\n                    return true\r\n                }\r\n                if (Array.isArray(value) && value.length === 0) {\r\n                    return true\r\n                }\r\n                if (typeof value === 'string') {\r\n                    return !value.trim()\r\n                } else {\r\n                    return false\r\n                }\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || '必填，不能为空！',\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------options 选项值校验-------------------------------------------*/\r\n\r\n        if (options != null) {\r\n            const optionList = Array.isArray(options) ? options : [options]\r\n            const invalidValues = validList.filter(({value}) => {\r\n\r\n                //校验不通过才返回true\r\n\r\n                if (value == null) {\r\n                    /*没有值，不校验*/\r\n                    return false\r\n                }\r\n                if (!Array.isArray(value)) {\r\n                    /*不是数组，判断值是否存在数组中*/\r\n                    const isExist = optionList.indexOf(value) > -1\r\n                    if (!isExist) {\r\n                        return true\r\n                    }\r\n                } else {\r\n                    /*是数组，判断value数组中是否存在值，不符合options*/\r\n                    return !!(value as any[]).find(v => optionList.indexOf(v) === -1)\r\n                }\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || '不符合特定选项！',\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------max-------------------------------------------*/\r\n\r\n        if (max != null) {\r\n            const invalidValues = validList.filter(({value, field}) => {\r\n\r\n                //校验不通过才返回true\r\n\r\n                if (value == null) {\r\n                    /*没有值，不校验*/\r\n                    return false\r\n                }\r\n                if (Array.isArray(value)) {\r\n                    return value.length > max\r\n                }\r\n                if (type == \"number\" || typeof value === \"number\") {\r\n                    value = typeof value === \"number\" ? value : Number(value)\r\n                    return value > max\r\n                }\r\n                // string\r\n                return String(value).length > max\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || FormValidateUtils.getMaxMessage({value, max, type}),\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------min-------------------------------------------*/\r\n\r\n        if (min != null) {\r\n            const invalidValues = validList.filter(({value}) => {\r\n\r\n                //校验不通过才返回true\r\n\r\n                if (value == null) {\r\n                    /*没有值，不校验*/\r\n                    return false\r\n                }\r\n                if (Array.isArray(value)) {\r\n                    return value.length < min\r\n                }\r\n                if (type == \"number\" || typeof value === \"number\") {\r\n                    value = typeof value === \"number\" ? value : Number(value)\r\n                    return value < min\r\n                }\r\n                // string\r\n                return String(value).length < min\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || FormValidateUtils.getMinMessage({value, min, type}),\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------pattern-------------------------------------------*/\r\n\r\n        if (!!pattern) {\r\n            const invalidValues = validList.filter(({value}) => {\r\n                if (value == null) {\r\n                    /*没有值，不校验*/\r\n                    return false\r\n                }\r\n                return !pattern.test(value)\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || '不符合特定模式',\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------validator-------------------------------------------*/\r\n\r\n        if (!!validator) {\r\n            const validateResultList = (await Promise.all(validList.map(async ({field, value}) => {\r\n                let message: string | void;\r\n                try {\r\n                    message = await validator(rule, value, formData || {})\r\n                } catch (e) {\r\n                    message = !!e.toString ? e.toString() : e\r\n                }\r\n                if (!message) {\r\n                    return null\r\n                }\r\n                return {\r\n                    rule,\r\n                    message,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                }\r\n            }))).filter(Boolean) as FormValidateResult[]\r\n            if (validateResultList.length > 0) {\r\n                return validateResultList[0]!\r\n            }\r\n        }\r\n\r\n        return null\r\n    }\r\n}\r\n\r\n/**\r\n * validateField校验返回结果\r\n * @author  韦胜健\r\n * @date    2020/12/16 11:49\r\n */\r\nexport type FormValidateFieldReturn = FormValidateResult | undefined\r\n/**\r\n * validate校验返回结果\r\n * @author  韦胜健\r\n * @date    2020/12/16 11:49\r\n */\r\nexport type FormValidateReturn = { validateResultMap: FormValidateResultMap, validateMessage: string | undefined, validateResult?: FormValidateResult }\r\n\r\n/**\r\n * 获取总的FormRules数组\r\n * @author  韦胜健\r\n * @date    2020/12/12 21:45\r\n */\r\nexport function formatFormRules(\r\n    formComponentRules?: FormComponentRules,\r\n    formItems?: FormComponentItemRules[]\r\n) {\r\n\r\n    /*field 转化为 label的映射*/\r\n    let fieldToLabel = {} as Record<string, string>\r\n    /*返回值，总的校验规则数组*/\r\n    let resultRules: FormRule[] = []\r\n\r\n    if (!!formItems && formItems.length > 0) {\r\n        formItems.forEach(formItem => {\r\n            const {label, field, required, rules} = formItem\r\n            const fields = FormValidateUtils.getListValue(field)\r\n            if (!!fields) {\r\n                !!label && (fields.forEach(item => fieldToLabel[item] = label));\r\n                required && (resultRules.push({field, label, required: true,}))\r\n            } else {\r\n                if (required) {\r\n                    /*如果 form-item设置了required，但是没有设置field，这里给出警告！*/\r\n                    console.error(\"form-item's props.field is required when props.required is true!\")\r\n                }\r\n            }\r\n            const formItemRules = FormValidateUtils.getListValue(rules)\r\n            if (!!formItemRules && formItemRules.length > 0) {\r\n                formItemRules.forEach(r => {resultRules.push({...r, label: r.label || label, field: r.field || field,})})\r\n            }\r\n        })\r\n    }\r\n\r\n    if (!!formComponentRules) {\r\n        let formComponentRulesList: FormRule[] = []\r\n        if (Array.isArray(formComponentRules)) {\r\n            formComponentRulesList = formComponentRules\r\n        } else {\r\n            Object.keys(formComponentRules).forEach(f => {\r\n                const value = FormValidateUtils.getListValue(formComponentRules[f])\r\n                !!value && value.forEach(r => formComponentRulesList.push({...r, field: r.field || f}))\r\n            })\r\n        }\r\n        resultRules.push(...formComponentRulesList)\r\n    }\r\n\r\n    async function validateField(\r\n        {\r\n            field,\r\n            formData,\r\n            trigger,\r\n            formValidateResultMap,\r\n            associateFields,\r\n        }: {\r\n            field: string,\r\n            formData: Record<string, any> | null,\r\n            trigger: FormValidateTrigger,\r\n            formValidateResultMap: FormValidateResultMap,\r\n            associateFields?: FormAssociateFields,\r\n        }): Promise<FormValidateFieldReturn> {\r\n\r\n        if (!!associateFields && !!associateFields[field]) {\r\n            toArray(associateFields[field]).forEach(f => validateField({\r\n                field: f,\r\n                formData,\r\n                trigger: FormValidateTrigger.all,\r\n                formValidateResultMap,\r\n            }))\r\n        }\r\n\r\n        const rules = resultRules.filter(r => {\r\n            const matchField = Array.isArray(r.field) ? r.field.indexOf(field) > -1 : r.field == field\r\n            if (!matchField) {\r\n                return false\r\n            }\r\n            if (trigger === FormValidateTrigger.all) {\r\n                return trigger\r\n            }\r\n            return (r.trigger || FormValidateTrigger.change) === trigger\r\n        })\r\n\r\n        if (rules.length > 0) {\r\n            const validateResult = (await Promise.all(rules.map(r => FormValidateUtils.checkRule({rule: r, formData, fieldToLabel, field}))))\r\n                .filter(Boolean) as FormValidateResult[];\r\n            formValidateResultMap[field] = validateResult[0]\r\n            return formValidateResultMap[field]\r\n        } else {\r\n            /*\r\n            *   如果没有可用的校验规则，则什么事也不做，不能清理掉现有的校验结果，比如\r\n            *   比如 没有change校验，但是只有blur校验。如果blur先执行。在校验change的时候会把blur的检验结果覆盖掉\r\n            */\r\n            return\r\n        }\r\n    }\r\n\r\n    async function validate(formData: Record<string, any> | null): Promise<FormValidateReturn> {\r\n        const validateResultList = (await Promise.all(resultRules.map(r => FormValidateUtils.checkRule({rule: r, formData, fieldToLabel}))))\r\n            .filter(Boolean) as FormValidateResult[];\r\n        const validateResultMap = validateResultList.reduce((prev, next) => {\r\n            const {rule: {field}} = next\r\n            const fields = FormValidateUtils.getListValue(field)\r\n            if (!!fields) {\r\n                fields.forEach(f => prev[f] = next)\r\n            }\r\n            return prev\r\n        }, {} as FormValidateResultMap)\r\n        let validateMessage: string | undefined;\r\n        let validateResult: FormValidateResult | undefined;\r\n        if (validateResultList.length > 0) {\r\n            const {label, message} = validateResultList[0]!\r\n            validateMessage = `“${label}” 校验不通过，${message}`\r\n            validateResult = validateResultList[0]\r\n        }\r\n        return {\r\n            validateResultMap,\r\n            validateResult,\r\n            validateMessage,\r\n        }\r\n    }\r\n\r\n    const fieldToRequired = resultRules.reduce((prev, next) => {\r\n        if (!!next.required) {\r\n            const fields = FormValidateUtils.getListValue(next.field)!\r\n            fields.forEach(f => prev[f] = true)\r\n        }\r\n        return prev\r\n    }, {} as Record<string, boolean>)\r\n\r\n    return {\r\n        /*通过field映射label文本*/\r\n        fieldToLabel,\r\n        /*所有的校验规则*/\r\n        resultRules,\r\n        /*通过field映射required*/\r\n        fieldToRequired,\r\n        methods: {\r\n            /*校验单个字段*/\r\n            validateField,\r\n            /*校验所有规则*/\r\n            validate,\r\n        },\r\n    }\r\n}\r\n\r\nexport type FormValidate = ReturnType<typeof formatFormRules>","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlDate} from \"./date\";\r\nimport {PlDatePanelYear} from \"./panel/date-panel-year\";\r\nimport {PlDatePanelMonth} from \"./panel/date-panel-month\";\r\nimport {PlDatePanelDate} from \"./panel/date-panel-date\";\r\nimport {PlDatePanelRange} from \"./panel/date-panel-range\";\r\nimport {PlDatePanelWeek} from \"./panel/date-panel-week\";\r\nimport {PlDatePanelQuarter} from \"./panel/date-panel-quarter\";\r\n\r\nexport default createComponentPlugin(PlDate, {\r\n    exposeComponents: {\r\n        PlDatePanelYear,\r\n        PlDatePanelMonth,\r\n        PlDatePanelDate,\r\n        PlDatePanelRange,\r\n        PlDatePanelWeek,\r\n        PlDatePanelQuarter,\r\n    }\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, StyleStatus, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useNumber} from \"../../use/useNumber\";\r\nimport {FormCollector} from \"./form\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {reactive, onMounted, computed, PropType, ComputedRef} from 'vue';\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {FormContentAlign, FormLabelAlign} from \"./form.utils\";\r\nimport {FormComponentItemRules, FormRule, FormValidateUtils} from \"./form.validate\";\r\n\r\nexport const PlFormItem = designComponent({\r\n    name: 'pl-form-item',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        field: {type: [String, Array] as PropType<string | string[]>},      // 绑定的属性字段名\r\n        rules: {type: [Array, Object] as PropType<FormRule | FormRule[]>},  // 校验规则\r\n        required: {type: Boolean},                                          // 不能为空\r\n\r\n        label: {type: String, default: ' '},                                // 显示文本\r\n        labelWidth: {type: [String, Number]},                               // 显示文本宽度\r\n        column: {type: [String, Number], default: 1},                       // 多列表单的列数\r\n        block: {type: Boolean},                                             // 占用一行\r\n        colon: {type: Boolean, default: null},                              // label的冒号\r\n        labelAlign: {type: String as PropType<FormLabelAlign>},             // label 对齐方式\r\n        contentAlign: {type: String as PropType<FormContentAlign>},         // content 对齐方式\r\n    },\r\n    emits: {\r\n        onBlur: () => true,\r\n        onChange: () => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit}}) {\r\n\r\n        const form = FormCollector.child()\r\n        const {slots} = useSlots(['label', 'suffix'], true)\r\n        const {refs} = useRefs({label: HTMLDivElement,})\r\n        const {styleComputed} = useStyle({adjust: ret => {!!invalidate.value && (ret.status = StyleStatus.error)}})\r\n\r\n        const handler = {\r\n            onEditChange: () => form.validateHandler.onEditChange(props.field),\r\n            onEditBlur: () => form.validateHandler.onBlurChange(props.field),\r\n        }\r\n        useEdit({\r\n            adjust: ret => {\r\n                ret.onChange = handler.onEditChange\r\n                ret.onBlur = handler.onEditBlur\r\n\r\n                if (!!form.props.disabledFields && !!props.field) {\r\n                    const fields = FormValidateUtils.getListValue(props.field)\r\n                    if (!!fields && !!fields.find(f => form.props.disabledFields![f])) {\r\n                        ret.disabled = true\r\n                    }\r\n                }\r\n                if (!!form.props.readonlyFields && !!props.field) {\r\n                    const fields = FormValidateUtils.getListValue(props.field)\r\n                    if (!!fields && !!fields.find(f => form.props.disabledFields![f])) {\r\n                        ret.readonly = true\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const {numberState} = useNumber(props, ['labelWidth', 'column'])\r\n        const state = reactive({\r\n            /*当前 form item的label宽度*/\r\n            labelWidth: 0,\r\n        })\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        /*是否显示冒号*/\r\n        const colon = computed(() => props.colon == null ? form.props.colon : props.colon)\r\n        /*label的目标宽度*/\r\n        const labelWidth = computed(() => numberState.labelWidth || form.numberState.labelWidth)\r\n        /*是否设置了label宽度*/\r\n        const staticWidth = computed(() => !!labelWidth.value)\r\n        /*是否存在label节点*/\r\n        const hasLabel = computed(() => !!props.label || slots.label.isExist())\r\n\r\n        const classes = useClass(() => [\r\n            'pl-form-item',\r\n            `pl-form-item-size-${styleComputed.value.size}`,\r\n            `pl-form-item-label-align-${props.labelAlign || form.childState.align.label}`,\r\n            `pl-form-item-content-align-${props.contentAlign || form.childState.align.content}`,\r\n            {\r\n                'pl-form-item-static-width': staticWidth.value,\r\n                'pl-form-item-required': isRequired.value && !form.props.hideRequiredAsterisk,\r\n                'pl-form-item-invalidate': !!invalidate.value && !form.props.hideValidateMessage,\r\n            }\r\n        ])\r\n        const isBlock = computed(() => {\r\n            const flag = !!props.block || numberState.column === form.numberState.column\r\n            return {\r\n                flag,\r\n                column: flag ? form.numberState.column : numberState.column\r\n            }\r\n        })\r\n\r\n        /*form-item的宽度，与下一个form-item的gutter*/\r\n        const styles = useStyles(style => {\r\n            if (form.props.inline) {\r\n                return style\r\n            }\r\n            const {col} = form.childState.width\r\n            const {column} = isBlock.value\r\n            const {columnGutter} = form.numberState\r\n            if (!!col) {\r\n                style.width = unit((col + columnGutter) * column)\r\n            }\r\n            if (form.numberState.column > 1) {\r\n                style.paddingRight = unit(form.numberState.columnGutter)\r\n            }\r\n        })\r\n\r\n        /*label节点宽度，如果有设置labelWidth的话*/\r\n        const labelStyles = useStyles(style => {\r\n            if (form.props.inline) {\r\n                return style\r\n            }\r\n            if (!!labelWidth.value) {\r\n                style.width = unit(labelWidth.value)\r\n            }\r\n        })\r\n\r\n        /*如果没有label的话，body应该占用百分百宽度，否则宽度为占用列数x列宽 - label宽度*/\r\n        const bodyStyles = useStyles(style => {\r\n            if (form.props.inline) {\r\n                return style\r\n            }\r\n            if (!hasLabel.value) {\r\n                style.width = '100%'\r\n            } else {\r\n                const {label, col} = form.childState.width\r\n                if (!!label) {\r\n                    const {columnGutter} = form.numberState\r\n                    const {column} = isBlock.value\r\n                    style.width = unit(col! * column + (column - 1) * columnGutter - label)\r\n                }\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------hook-------------------------------------------*/\r\n\r\n        /**\r\n         * 如果没有写死labelWidth，这mounted的时候计算label节点宽度\r\n         * @author  韦胜健\r\n         * @date    2020/12/11 21:32\r\n         */\r\n        if (!staticWidth.value && hasLabel.value) {\r\n            onMounted(() => {\r\n                state.labelWidth = refs.label.scrollWidth\r\n            })\r\n        }\r\n\r\n        /*---------------------------------------validate-------------------------------------------*/\r\n\r\n        const formItemComponentRules = computed((): FormComponentItemRules => ({\r\n            label: props.label,\r\n            field: props.field,\r\n            required: props.required,\r\n            rules: props.rules,\r\n        }))\r\n\r\n        /*当前是否必填校验*/\r\n        const isRequired = computed(() => {\r\n            const {fieldToRequired} = form.childState.formValidate\r\n            const fields = FormValidateUtils.getListValue(props.field)\r\n            if (!fields) {\r\n                return false\r\n            }\r\n            return !!fields.find(f => !!fieldToRequired[f])\r\n        }) as ComputedRef<boolean>\r\n\r\n        /*当前是否校验不通过*/\r\n        const invalidate = computed(() => {\r\n            const {validateResultMap} = form.childState\r\n            const fields = FormValidateUtils.getListValue(props.field)\r\n            if (!fields) {\r\n                return null\r\n            }\r\n            const invalidField = fields.find(f => !!validateResultMap[f])\r\n            return !invalidField ? null : validateResultMap[invalidField]!\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                state,\r\n                formItemComponentRules,\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {(!!props.label || slots.label.isExist()) && (\r\n                        <div class=\"pl-form-item-label\" style={labelStyles.value} ref=\"label\">\r\n                            {slots.label(props.label)} {!!props.label && !!props.label.trim() && !!colon.value && ':'}\r\n                        </div>\r\n                    )}\r\n                    <div class=\"pl-form-item-body\" style={bodyStyles.value}>\r\n                        {slots.default()}\r\n                        {slots.suffix.isExist() && (\r\n                            <div class=\"pl-form-item-suffix\">\r\n                                {slots.suffix()}\r\n                            </div>\r\n                        )}\r\n                        {!!invalidate.value && !form.props.hideValidateMessage && (<div class=\"pl-form-item-message\">\r\n                            {invalidate.value.message}\r\n                        </div>)}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import './form.scss'\r\nimport {computed, ComputedRef, onMounted, PropType, reactive, watch} from 'vue'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {FormContentAlign, FormLabelAlign, FormValidateMode} from \"./form.utils\";\r\nimport {useNumber} from \"../../use/useNumber\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {PlFormItem} from './form-item'\r\nimport {FormAssociateFields, formatFormRules, FormComponentRules, FormValidate, FormValidateResultMap, FormValidateTrigger, FormValidateUtils} from \"./form.validate\";\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\nimport {$$notice} from \"../notice-service\";\r\n\r\nexport const PlForm = designComponent({\r\n    name: 'pl-form',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n        disabledFields: {type: Object as PropType<Record<string, boolean>>},// 禁用的字段\r\n        readonlyFields: {type: Object as PropType<Record<string, boolean>>},// 只读的字段\r\n\r\n        modelValue: {type: Object},                                         // model绑定表单对象\r\n        rules: {type: Object as PropType<FormComponentRules>},              // 表单验证规则\r\n        validateResult: {type: Object},                                     // 校验结果信息\r\n        validateMode: {type: String as PropType<FormValidateMode>, default: FormValidateMode.form},// 校验模式\r\n        associateFields: {type: Object as PropType<FormAssociateFields>},   // 校验关联字段，一个对象，key为字段名，value为字段字符串或者字符串数组。当key变化时，会自动校验value中所列的字段\r\n\r\n        hideRequiredAsterisk: {type: Boolean, default: null},               // 是否隐藏文本旁边的红色必填星号\r\n        hideValidateMessage: {type: Boolean, default: null},                // 是否隐藏校验失败的信息\r\n        validateOnRulesChange: {type: Boolean, default: null},              // 是否当rules属性改变之后立即触发一次验证\r\n\r\n        column: {type: [String, Number], default: 1},                       // 多列表单的列数\r\n        labelWidth: {type: [String, Number]},                               // formItem 文本宽度\r\n        contentWidth: {type: [String, Number]},                             // formItem 内容宽度\r\n\r\n        labelAlign: {type: String as PropType<FormLabelAlign>},             // 文本对其方式\r\n        contentAlign: {type: String as PropType<FormContentAlign>, default: FormLabelAlign.left},// content 对齐方式\r\n        width: {type: [String, Number], default: '100%'},                   // 表单宽度\r\n        centerWhenSingleColumn: {type: Boolean},                            // 单列的时候会使得表单内容居中，表单文本标题不计宽度，设置该属性为true则使得文本宽度参与计算居中\r\n        colon: {type: Boolean, default: true},                              // label的冒号\r\n        columnGutter: {type: [Number, String], default: 16},                // 列之间的间距\r\n        inline: {type: Boolean},                                            // 行内表单\r\n    },\r\n    emits: {\r\n        /*字段值变化事件*/\r\n        onFieldValueChange: (field: string, newVal: any, oldVal: any) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        /*收集的子组件*/\r\n        const items = FormCollector.parent()\r\n\r\n        useStyle();\r\n        useEdit({adjust: data => {data.loading = false}});\r\n        const {numberState} = useNumber(props, ['labelWidth', 'contentWidth', 'column', 'width', 'columnGutter'])\r\n\r\n        /*---------------------------------------compute-------------------------------------------*/\r\n\r\n        /*form-item中最大的label节点宽度*/\r\n        const maxLabelWidth = computed(() => items.reduce((prev: number, next) => Math.max(next.state.labelWidth, prev), 0)) as ComputedRef<number>\r\n\r\n        /*form-item所需要的对齐方式信息*/\r\n        const align = computed(() => {\r\n            return {\r\n                label: props.labelAlign || (numberState.column === 1 ? FormLabelAlign.right : FormLabelAlign.left),\r\n                content: props.contentAlign,\r\n            }\r\n        })\r\n\r\n        /*form-item所需要的宽度信息*/\r\n        const width = computed(() => {\r\n            /*\r\n            *  如果没有设置contentWidth\r\n            *  如果是单列，默认contentWidth是400\r\n            *  多了则是220\r\n            */\r\n            const content = !!numberState.contentWidth ? numberState.contentWidth : numberState.column === 1 ? 400 : 220\r\n            const label = numberState.labelWidth || maxLabelWidth.value\r\n\r\n            if (!!label) {\r\n                return {\r\n                    col: label + content,\r\n                    label,\r\n                    content,\r\n                }\r\n            } else {\r\n                return {\r\n                    content,\r\n                }\r\n            }\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-form',\r\n            `pl-form-column-${numberState.column}`,\r\n            {\r\n                'pl-form-inline': props.inline,\r\n            }\r\n        ])\r\n\r\n        /*设置form宽度*/\r\n        const styles = useStyles((style) => {\r\n            if (props.inline) {\r\n                return style\r\n            }\r\n            style.width = unit(props.width)\r\n        })\r\n\r\n        /*body节点宽度。如果是单列，则左偏移 label/2 个像素，确保content在屏幕中间*/\r\n        const bodyStyles = useStyles(style => {\r\n            if (props.inline) {\r\n                return style\r\n            }\r\n            const {label, col} = width.value\r\n            if (!label) {return}\r\n            const {column, columnGutter} = numberState\r\n            style.width = unit((col! + columnGutter) * column)\r\n            style.left = `${(!props.centerWhenSingleColumn && column === 1) ? -label! / 2 : 0}px`\r\n        })\r\n        /*---------------------------------------validate-------------------------------------------*/\r\n\r\n        const formValidate = computed(() => formatFormRules(props.rules, items.map(item => item.formItemComponentRules.value))) as ComputedRef<FormValidate>\r\n\r\n        const loading = (() => {\r\n            let time: null | number;\r\n            return {\r\n                show: () => {\r\n                    time = setTimeout(() => {\r\n                        childState.loading = true\r\n                        time = null\r\n                    }, 500)\r\n                },\r\n                hide: () => {\r\n                    if (!!time) {\r\n                        clearTimeout(time)\r\n                    } else {\r\n                        childState.loading = false\r\n                    }\r\n                },\r\n            }\r\n        })();\r\n\r\n        const validateMethods = {\r\n            validate: async (config?: { autoLoading?: boolean, autoAlert?: boolean, }) => {\r\n                config = config || {}\r\n                if (config.autoLoading != false) {\r\n                    loading.show()\r\n                }\r\n                const {validateMessage, validateResultMap, validateResult} = await formValidate.value.methods.validate(props.modelValue!)\r\n                loading.hide()\r\n\r\n                childState.validateResultMap = validateResultMap\r\n                if (!!validateMessage) {\r\n                    if (config.autoAlert !== false) {\r\n                        $$notice.warn(validateMessage)\r\n                    }\r\n                    throw {\r\n                        validate: validateResult,\r\n                        message: validateMessage,\r\n                    }\r\n                } else {\r\n                    return null\r\n                }\r\n            },\r\n            clearValidate: () => {\r\n                childState.validateResultMap = {}\r\n            },\r\n            showError: (error: any) => {\r\n                if (!!error.message) {\r\n                    $$notice.warn(error.message)\r\n                } else {\r\n                    $$notice.warn(String(error))\r\n                }\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------end-------------------------------------------*/\r\n\r\n        onMounted(() => {\r\n            // console.log('formValidate.value', formValidate.value)\r\n        })\r\n\r\n        const childState = reactive({\r\n            align,\r\n            width,\r\n            formValidate,\r\n            validateResultMap: {} as FormValidateResultMap,\r\n            loading: false,\r\n        })\r\n\r\n        const freezeState = {\r\n            oldFormData: {...(props.modelValue || {})},\r\n        }\r\n\r\n        const validateHandler = {\r\n            onEditChange: async (field?: string | string[]) => {\r\n                if (props.validateMode === FormValidateMode.form) {\r\n                    return\r\n                }\r\n                const fields = FormValidateUtils.getListValue(field)\r\n                if (!fields) {return}\r\n                await Promise.all(fields.map(f => formValidate.value.methods.validateField({\r\n                    field: f,\r\n                    trigger: FormValidateTrigger.change,\r\n                    formValidateResultMap: childState.validateResultMap,\r\n                    formData: props.modelValue || {},\r\n                    associateFields: props.associateFields,\r\n                })))\r\n            },\r\n            onBlurChange: async (field?: string | string[]) => {\r\n                const fields = FormValidateUtils.getListValue(field)\r\n                if (!fields) {return}\r\n                await Promise.all(fields.map(f => formValidate.value.methods.validateField({\r\n                    field: f,\r\n                    trigger: FormValidateTrigger.blur,\r\n                    formValidateResultMap: childState.validateResultMap,\r\n                    formData: props.modelValue || {},\r\n                    associateFields: props.associateFields,\r\n                })))\r\n            },\r\n            onFieldChange: async (field: string) => {\r\n                await formValidate.value.methods.validateField({\r\n                    field,\r\n                    trigger: FormValidateTrigger.change,\r\n                    formValidateResultMap: childState.validateResultMap,\r\n                    formData: props.modelValue || {},\r\n                    associateFields: props.associateFields,\r\n                })\r\n            },\r\n            onFormDataChange: debounce((val: any) => {\r\n                const newFormData = val || {}\r\n                const oldFormData = freezeState.oldFormData || {}\r\n                const fields = Object.keys({...newFormData, ...oldFormData})\r\n\r\n                fields.forEach(field => {\r\n                    let newVal = newFormData[field]\r\n                    let oldVal = oldFormData[field]\r\n                    if (newVal !== oldVal) {\r\n                        emit.onFieldValueChange(field, newVal, oldVal)\r\n                        validateHandler.onFieldChange(field)\r\n                    }\r\n                })\r\n                freezeState.oldFormData = {...val || {}}\r\n            }, 150, false)\r\n        }\r\n\r\n        if (props.validateMode === FormValidateMode.form) {\r\n            watch(() => props.modelValue, validateHandler.onFormDataChange, {deep: true})\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n                childState,\r\n                numberState,\r\n                validateHandler,\r\n                ...validateMethods,\r\n            },\r\n            render: () => {\r\n                return (<div class={classes.value} style={styles.value} v-loading={childState.loading || !!props.loading}>\r\n                    <div class=\"pl-form-body\" style={bodyStyles.value}>\r\n                        {slots.default()}\r\n                    </div>\r\n                </div>)\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport default PlForm\r\n\r\nexport const FormCollector = useCollect(() => ({\r\n    parent: PlForm,\r\n    child: PlFormItem,\r\n}))","import PlForm from './form'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlForm)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlFormItem} from \"../form/form-item\";\r\n\r\nexport default createComponentPlugin(PlFormItem)","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {useSlots} from \"../../../../use/useSlots\";\r\nimport {ComponentPublicInstance, getCurrentInstance, inject, onBeforeUnmount, onMounted, provide, ref} from 'vue';\r\nimport {TablePlc} from \"./plc.type\";\r\n\r\nexport const TablePlcCollector = (() => {\r\n    const ProvideString = '@@TablePlcCollector'\r\n    const useParent = () => {\r\n        const children = ref([] as TablePlc[])\r\n        const refer = {\r\n            children: children.value,\r\n            add: (proxy: ComponentPublicInstance) => {\r\n                const el = proxy.$el as HTMLElement\r\n                const index = Array.from(el.parentElement!.childNodes)\r\n                    .filter((item: any) => item.nodeName !== '#comment' && item.nodeName !== '#text' && (!item.style || item.style.display !== 'none'))\r\n                    .indexOf(el)\r\n                children.value.splice(index, 0, proxy as any)\r\n            },\r\n            remove: (proxy: ComponentPublicInstance) => {\r\n                const index = children.value.indexOf(proxy as any)\r\n                if (index > -1) {\r\n                    children.value.splice(index, 1)\r\n                }\r\n            },\r\n        }\r\n        provide(ProvideString, refer)\r\n        return refer\r\n    }\r\n    const useChild = () => {\r\n        const {add, remove} = inject(ProvideString) as ReturnType<typeof useParent>\r\n        const ctx = getCurrentInstance()!\r\n        onMounted(() => add(ctx.proxy!))\r\n        onBeforeUnmount(() => remove(ctx.proxy!))\r\n        return ctx\r\n    }\r\n    return {\r\n        useParent,\r\n        useChild,\r\n    }\r\n})();\r\n\r\nexport default designComponent({\r\n    name: 'plc-collector',\r\n    setup() {\r\n        const {slots} = useSlots()\r\n        const {children} = TablePlcCollector.useParent()\r\n        return {\r\n            refer: {\r\n                children\r\n            },\r\n            render: () => (\r\n                <div class=\"plc-collector\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {Plc} from \"./plc.type\";\r\n\r\nexport function renderColgroup(flatPlcList: Plc[]) {\r\n    return (\r\n        <colgroup>\r\n            {flatPlcList.map((plc) => <col width={plc.props.width || ''}/>)}\r\n        </colgroup>\r\n    )\r\n}","/**\r\n * 处理表头拖拽调整宽度的功能\r\n * @author  韦胜健\r\n * @date    2020/8/18 16:17\r\n */\r\nimport {TablePlc} from \"../../plc/core/plc.type\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport {PlTable} from \"../../table\";\r\n\r\nexport function useHeadCellResize(table: typeof PlTable.use.class, plc: TablePlc) {\r\n\r\n    const state = {\r\n        indicatorEl: null as null | HTMLElement,\r\n        startX: null as null | number,\r\n        endX: null as null | number,\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n\r\n            const tableEl = table.refs.el\r\n\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n\r\n            window.addEventListener('mousemove', handler.mousemove)\r\n            window.addEventListener('mouseup', handler.mouseup)\r\n            disabledUserSelect()\r\n            state.startX = e.clientX\r\n\r\n            state.indicatorEl = document.createElement('div')\r\n\r\n            const cell = e.currentTarget as HTMLElement\r\n\r\n            const {left, width} = cell.getBoundingClientRect()\r\n            const {top, height} = tableEl.getBoundingClientRect()\r\n\r\n            Object.assign(state.indicatorEl.style, {\r\n                display: 'inline-block',\r\n                zIndex: 9999,\r\n                position: 'fixed',\r\n\r\n                width: `${width}px`,\r\n                backgroundColor: '#ddd',\r\n                height: `${height}px`,\r\n                top: `${top}px`,\r\n                left: `${left}px`,\r\n            })\r\n\r\n            document.body.appendChild(state.indicatorEl)\r\n        },\r\n        mousemove: (e: MouseEvent) => {\r\n            state.indicatorEl!.style.left = `${e.clientX}px`\r\n        },\r\n        mouseup: (e: MouseEvent) => {\r\n            window.removeEventListener('mousemove', handler.mousemove)\r\n            window.removeEventListener('mouseup', handler.mouseup)\r\n            enableUserSelect()\r\n            document.body.removeChild(state.indicatorEl!)\r\n            state.endX = e.clientX\r\n            let durWidth = state.endX - state.startX!\r\n            plc.setDurWidth(durWidth)\r\n        }\r\n    }\r\n\r\n    return {\r\n        resizeHandler: handler,\r\n    }\r\n}","import {Plc, TablePlc, TableRenderScope} from \"./plc.type\";\r\nimport {TableNode} from \"../../core/useTableNode\";\r\nimport {VNodeChild} from \"../../../../shims\";\r\n\r\nexport function renderHeadCell(plc: TablePlc) {\r\n    // 如果存在 head作用域插槽，渲染head作用域插槽\r\n    if (plc.scopedSlots.head.isExist()) {\r\n        return plc.scopedSlots.head({plc: plc as any})\r\n    }\r\n    // 如果存在 props.head 渲染函数，则渲染 props.head\r\n    if (!plc.group && !!plc.props.head) {\r\n        return plc.props.head({plc})\r\n    }\r\n    return plc.props.title\r\n}\r\n\r\nexport function renderBodyCell(\r\n    {\r\n        node,\r\n        plc,\r\n    }: {\r\n        node: TableNode,\r\n        plc: Plc,\r\n    }\r\n) {\r\n    const editable = getEditable(plc, node)\r\n    const body = getBodyCell({node, plc, editable})\r\n    return {\r\n        editable,\r\n        body,\r\n    }\r\n}\r\n\r\n/**\r\n * 判断当前是否可编辑\r\n * 1. 如果当前行非编辑状态，则不可编辑\r\n * 2. 如果列没有edit作用域插槽以及渲染函数，则不可编辑\r\n * 3. 如果列的editable属性为函数，则计算这个函数的值来定性是否可编辑\r\n *\r\n * 这个【是否可编辑】值用来设置 body-cell 的样式，以便body-cell清楚地知道当前是否处于可编辑状态，并且设置padding\r\n *\r\n * @author  韦胜健\r\n * @date    2020/7/21 21:16\r\n */\r\nfunction getEditable(plc: Plc, node: TableNode) {\r\n    // 行非编辑状态下，定性为不可编辑\r\n    if (!node.edit) {\r\n        return false\r\n    }\r\n    // 如果没有edit渲染函数以及作用域插槽，那么直接定性为不可编辑\r\n    if (!plc.props.edit && !plc.scopedSlots.edit.isExist()) {\r\n        return false\r\n    }\r\n    return typeof plc.props.editable === \"function\" ? plc.props.editable(node) : (plc.props.editable !== false)\r\n}\r\n\r\nfunction getBodyCell(\r\n    {\r\n        node,\r\n        plc,\r\n        editable,\r\n    }: {\r\n        node: TableNode,\r\n        plc: Plc,\r\n        editable: boolean,\r\n    }\r\n): VNodeChild {\r\n    let renderScope: TableRenderScope\r\n    if (node.isSummary) {\r\n        // 合计行中的row一直是原始的row对象\r\n        renderScope = {node, plc, row: node.data}\r\n        // 合计行，使用作用域插槽 summary渲染，没有则使用渲染函数summary渲染，么有则使用 default作用域插槽渲染，没有\r\n        // 则使用渲染函数default渲染，没有则直接渲染field对应的值\r\n        if (plc.scopedSlots.summary.isExist()) {\r\n            return plc.scopedSlots.summary(renderScope)\r\n        }\r\n        if (!!plc.props.summary) {\r\n            return plc.props.summary(renderScope)\r\n        }\r\n        if (plc.scopedSlots.default.isExist()) {\r\n            return plc.scopedSlots.default(renderScope)\r\n        }\r\n        if (!!plc.props.default) {\r\n            return plc.props.default(renderScope)\r\n        }\r\n        return !!plc.props.field ? renderScope.row[plc.props.field] : null\r\n    } else {\r\n        // 如果当前行处于可编辑状态，则渲染的行数据对象为 rowData.editRow，否则为 rowData.data\r\n        let row = node.edit ? node.editRow : node.data\r\n        renderScope = {node, plc, row}\r\n\r\n        if (editable) {\r\n            // 当前一定存在 plc.scopedSlots.edit 或者 plc.props.edit，否则 editable不可能为true\r\n            if (plc.scopedSlots.edit.isExist()) {\r\n                return plc.scopedSlots.edit(renderScope)\r\n            }\r\n            if (!!plc.props.edit) {\r\n                return plc.props.edit(renderScope)\r\n            }\r\n        } else {\r\n            // 当前单元格不可编辑，如果当前行处于编辑状态，则渲染的行数据为 tableNode.editRow，否则为 tableNode.data\r\n            // 使用作用域插槽default渲染，没有则使用渲染函数default渲染，没有则直接显示field对应的值\r\n            if (plc.scopedSlots.default.isExist()) {\r\n                return plc.scopedSlots.default(renderScope)\r\n            }\r\n            if (!!plc.props.default) {\r\n                return plc.props.default(renderScope)\r\n            }\r\n            return !!plc.props.field ? renderScope.row[plc.props.field] : null\r\n        }\r\n    }\r\n}","import {Plc, TablePlc} from \"../../plc/core/plc.type\";\r\nimport {useAutoScroll} from \"../../../../use/useAutoScroll\";\r\nimport {StyleProperties} from \"../../../../shims\";\r\nimport {addClass} from \"plain-utils/dom/addClass\";\r\nimport {nextIndex} from \"../../../../utils/nextIndex\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport {PlainScroll} from \"../../../scroll/scroll\";\r\nimport {PlTable} from \"../../table\";\r\n\r\ninterface DragData {\r\n    left: number\r\n    width: number\r\n    plc: TablePlc\r\n    droppable: boolean\r\n}\r\n\r\nenum HoverPart {\r\n    left = 'left',\r\n    right = 'right',\r\n}\r\n\r\n/**\r\n * 获取可以滚动的父组件\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:50\r\n */\r\nexport function getHorizontalScrollParent(el: HTMLElement): HTMLElement {\r\n    while (!!el && el.scrollWidth <= el.offsetWidth) {\r\n        el = el.parentElement!\r\n    }\r\n    return el\r\n}\r\n\r\n/**\r\n * 递归遍历plc数组数据\r\n * @author  韦胜健\r\n * @date    2020/9/6 11:24\r\n */\r\nfunction iteratePlc(plcList: TablePlc[], handler: (plc: TablePlc) => 'stop' | void): void {\r\n\r\n    for (let i = 0; i < plcList.length; i++) {\r\n        const item = plcList[i]\r\n        const flag = handler(item)\r\n        if (flag === 'stop') {\r\n            return\r\n        } else {\r\n            if (item.group) {\r\n                iteratePlc(item.children, handler)\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 或者plc对象的兄弟节点\r\n * @author  韦胜健\r\n * @date    2020/9/6 11:24\r\n */\r\nfunction getBroPlcList(plcList: TablePlc[], plc: TablePlc): TablePlc[] {\r\n\r\n    let broPlcList: TablePlc[] = []\r\n\r\n    if (plcList.indexOf(plc) > -1) {\r\n        broPlcList = plcList\r\n    } else {\r\n        iteratePlc(plcList, itarPlc => {\r\n            if (itarPlc.group) {\r\n                if (itarPlc.children.indexOf(plc) > -1) {\r\n                    broPlcList = itarPlc.children\r\n                    return 'stop'\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    if (broPlcList.length === 0) {\r\n        /*内部错误，找不到兄弟节点*/\r\n        throw new Error('Internal error! sibling node not found.')\r\n    }\r\n\r\n    return broPlcList\r\n}\r\n\r\n/**\r\n * 获取plc的宽度\r\n * @author  韦胜健\r\n * @date    2020/9/6 12:09\r\n */\r\nfunction getPlcWidth(plc: TablePlc) {\r\n    if (!plc.group) {\r\n        return Number(plc.props.width)\r\n    } else {\r\n        return plc.children.reduce((ret: number, item: TablePlc) => {\r\n            ret += getPlcWidth(item)\r\n            return ret\r\n        }, 0)\r\n    }\r\n}\r\n\r\n/**\r\n * 获取plc的高度，如果是plc，则高度为currentTarget的高度，如果是plcGroup，则高度等于所有后代层数乘以currentTarget的高度\r\n * @author  韦胜健\r\n * @date    2020/9/6 11:29\r\n */\r\nfunction getIndicatorHeight(\r\n    plc: TablePlc,\r\n    table: typeof PlTable.use.class,\r\n) {\r\n    if (plc.group) {\r\n        return (table.plcData.value!.maxLevel - plc.level!) * table.numberState.headRowHeight\r\n    } else {\r\n        return plc.rowspan! * table.numberState.headRowHeight\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 获取plcList中最底层的plc\r\n * @author  韦胜健\r\n * @date    2020/9/6 20:27\r\n */\r\nfunction getLowestPlcList(plcList: TablePlc[]): Plc[] {\r\n\r\n    return plcList.reduce((ret: Plc[], plc: TablePlc) => {\r\n        if (plc.group) {\r\n            ret.push(...getLowestPlcList(plc.children))\r\n        } else {\r\n            ret.push(plc)\r\n        }\r\n        return ret\r\n    }, [] as Plc[])\r\n\r\n}\r\n\r\n/**\r\n * 获取拖拽所需要的数据\r\n * @author  韦胜健\r\n * @date    2020/9/6 20:41\r\n */\r\nfunction getDragData(table: typeof PlTable.use.class, plc: TablePlc): {\r\n    broData: DragData[],\r\n    broList: TablePlc[]\r\n} {\r\n\r\n    const plcList = table.plcData.value!.plcList\r\n    const broList = getBroPlcList(plcList, plc)\r\n\r\n    const broLowestList = getLowestPlcList(broList)\r\n    const allLowestList = getLowestPlcList(plcList) as TablePlc[]\r\n\r\n    allLowestList.splice(allLowestList.indexOf(broLowestList[0]), broLowestList.length, ...broList)\r\n\r\n    const broData: DragData[] = []\r\n    let left = 0\r\n\r\n    allLowestList.forEach(plc => {\r\n        const item = {\r\n            left,\r\n            width: getPlcWidth(plc),\r\n            plc,\r\n            droppable: broList.indexOf(plc) > -1\r\n        }\r\n        left += item.width\r\n        broData.push(item)\r\n    })\r\n\r\n    // broData.forEach(bro => console.log(bro.plc.props.title, bro.left, bro.droppable))\r\n\r\n    return {\r\n        broList,\r\n        broData,\r\n    }\r\n\r\n}\r\n\r\nexport function useColDraggier(config: () => {\r\n    plc: TablePlc,\r\n    table: typeof PlTable.use.class,\r\n    scrollRefer: () => PlainScroll,\r\n}) {\r\n    const {plc, table, scrollRefer} = config()\r\n    const isDraggable = !!table.props.colDraggable && plc.props.colDraggable !== false\r\n    if (!isDraggable) {return {tdAttrs: {}}}\r\n    const autoScroller = useAutoScroll({\r\n        vertical: false,\r\n        getScroll: scrollRefer\r\n    })\r\n    const indicatorSize = 3\r\n    const state = {\r\n        startClientX: 0,\r\n        moveClientX: 0,\r\n\r\n        startScrollLeft: 0,\r\n        moveScrollLeft: 0,\r\n\r\n        scrollParent: null as null | HTMLElement,\r\n        currentRect: {\r\n            top: 0,\r\n            left: 0,\r\n            height: 0,\r\n            width: 0,\r\n        },\r\n        scrollRect: {\r\n            top: 0,\r\n            left: 0,\r\n            height: 0,\r\n            width: 0,\r\n        },\r\n        indicator: null as null | HTMLElement,\r\n        dragData: null as null | DragData[],\r\n        broList: null as null | TablePlc[],\r\n        refreshData: null as null | {\r\n            index: number,\r\n            dragData: DragData,\r\n            hover: HoverPart,\r\n        }\r\n    }\r\n\r\n    const utils = {\r\n        getDragData: (left: number): { index: number, dragData: DragData, hover: HoverPart } => {\r\n            for (let i = 0; i < state.dragData!.length; i++) {\r\n                const dd = state.dragData![i];\r\n                if (left >= dd.left && left <= dd.left + dd.width) {\r\n                    return {\r\n                        index: i,\r\n                        dragData: dd,\r\n                        hover: left - dd.left > dd.width / 2 ? HoverPart.right : HoverPart.left\r\n                    }\r\n                }\r\n            }\r\n            throw new Error(`Can not get dragData by left:${left}`)\r\n        },\r\n        refresh() {\r\n            const left = (state.moveClientX - state.scrollRect.left) + (state.moveScrollLeft)\r\n            state.refreshData = utils.getDragData(left)\r\n            const {dragData, hover} = state.refreshData\r\n\r\n            let indicatorLeft = (hover === HoverPart.left ? dragData.left : dragData.left + dragData.width - indicatorSize) + state.scrollRect.left - state.moveScrollLeft\r\n            indicatorLeft = Math.min(Math.max(state.scrollRect.left, indicatorLeft), state.scrollRect.left + state.scrollRect.width - indicatorSize)\r\n\r\n            Object.assign(state.indicator!.style, {\r\n                left: `${indicatorLeft}px`,\r\n            } as StyleProperties)\r\n\r\n            state.indicator!.setAttribute('droppable', dragData.droppable ? 'true' : 'false')\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n\r\n            const {broList, broData} = getDragData(table, plc)\r\n            state.dragData = broData\r\n            state.broList = broList\r\n\r\n            const currentTarget = e.currentTarget as HTMLElement\r\n            state.currentRect = currentTarget.getBoundingClientRect()!\r\n            const indicatorHeight = getIndicatorHeight(plc, table)\r\n\r\n            state.startClientX = state.moveClientX = e.clientX\r\n            state.scrollParent = getHorizontalScrollParent(currentTarget)\r\n            state.scrollRect = state.scrollParent.parentElement!.getBoundingClientRect()\r\n            state.startScrollLeft = state.moveScrollLeft = state.scrollParent.scrollLeft\r\n\r\n            state.indicator = document.createElement('div')\r\n            addClass(state.indicator, 'plt-col-draggier-indicator')\r\n            Object.assign(state.indicator.style, {\r\n                top: `${state.currentRect.top}px`,\r\n                left: `${state.currentRect.left}px`,\r\n                height: `${indicatorHeight}px`,\r\n                width: `${indicatorSize}px`,\r\n                position: 'fixed',\r\n                zIndex: `${nextIndex() + 100}`,  // 加100是为了不被 autoScroller 遮住；\r\n                pointerEvents: 'none',                  // indicator只是一个指示的作用，这里设置none为了不挡住autoScroller的鼠标事件\r\n            } as StyleProperties)\r\n            document.body.appendChild(state.indicator)\r\n\r\n            disabledUserSelect()\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n            state.scrollParent!.addEventListener('mousemove', handler.mousemove)\r\n            state.scrollParent!.addEventListener('scroll', handler.scroll)\r\n\r\n            utils.refresh()\r\n            autoScroller.showHover()\r\n        },\r\n        mousemove: (e: MouseEvent) => {\r\n            state.moveClientX = e.clientX\r\n            utils.refresh()\r\n        },\r\n        scroll: () => {\r\n            state.moveScrollLeft = state.scrollParent!.scrollLeft\r\n            utils.refresh()\r\n        },\r\n        mouseup: () => {\r\n\r\n            (() => {\r\n                if (!state.refreshData) {\r\n                    return\r\n                }\r\n                const {dragData, hover} = state.refreshData\r\n\r\n                if (!dragData.droppable) {\r\n                    return;\r\n                }\r\n\r\n                const startPlc = plc\r\n                const endPlc = dragData.plc\r\n                const broList = state.broList!\r\n\r\n                const startIndex = broList.indexOf(startPlc)\r\n                let endIndex = broList.indexOf(endPlc)\r\n                if (startIndex === endIndex) {\r\n                    return;\r\n                }\r\n\r\n                if (startPlc.props.fixed != endPlc.props.fixed) {\r\n                    startPlc.state.fixed = endPlc.props.fixed\r\n                }\r\n\r\n                broList.splice(startIndex, 1)\r\n                endIndex = broList.indexOf(endPlc)\r\n                endIndex = hover === HoverPart.right ? endIndex + 1 : endIndex\r\n                broList.splice(endIndex, 0, startPlc)\r\n\r\n                broList.forEach((plc, index) => plc.state.order = index)\r\n            })();\r\n\r\n            enableUserSelect()\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n            state.scrollParent!.removeEventListener('mousemove', handler.mousemove)\r\n            state.scrollParent!.removeEventListener('scroll', handler.scroll)\r\n            if (!!state.indicator) {\r\n                state.indicator.parentNode!.removeChild(state.indicator)\r\n                state.indicator = null\r\n            }\r\n            autoScroller.hideHover()\r\n        }\r\n    }\r\n\r\n    return {\r\n        tdAttrs: {onMousedown: handler.mousedown,}\r\n    }\r\n}","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {PropType} from 'vue';\r\nimport {TablePlc} from \"../../plc/core/plc.type\";\r\nimport {useHeadCellResize} from \"./useHeadCellResize\";\r\nimport {renderHeadCell} from \"../../plc/core/render\";\r\nimport {useColDraggier} from \"./useColDraggier\";\r\nimport {PlainScroll} from \"../../../scroll/scroll\";\r\n\r\nexport const PltHeadCell = designComponent({\r\n    name: 'plt-head-cell',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n        tablePlc: {type: Object as PropType<TablePlc>, required: true},\r\n        scroll: {type: Function as PropType<() => PlainScroll>, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {resizeHandler} = useHeadCellResize(props.table, props.tablePlc)\r\n        const {tdAttrs} = useColDraggier(() => ({\r\n            table: props.table,\r\n            plc: props.tablePlc,\r\n            scrollRefer: props.scroll,\r\n        }))\r\n\r\n        return {\r\n            render: () => {\r\n                const content = renderHeadCell(props.tablePlc)\r\n                return (\r\n                    <td\r\n                        class={[\r\n                            props.tablePlc.classes.head,\r\n                            props.tablePlc.props.headCls,\r\n                            !!props.table.props.headCellClassFunc ? props.table.props.headCellClassFunc(props.tablePlc) : null\r\n                        ]}\r\n                        style={{\r\n                            ...props.tablePlc.styles.head as any,\r\n                            ...(!!props.table.props.headCellStyleFunc ? props.table.props.headCellStyleFunc(props.tablePlc) : {})\r\n                        }}\r\n                        rowspan={props.tablePlc.rowspan}\r\n                        colspan={props.tablePlc.colspan}\r\n                        {...tdAttrs}\r\n                    >\r\n                        {content}\r\n                        <span class=\"plt-head-cell-indicator\" onMousedown={resizeHandler.mousedown}/>\r\n                    </td>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {StyleProps} from \"../../../use/useStyle\";\r\nimport {SimpleObject, StyleProperties} from \"../../../shims\";\r\nimport {PropType} from 'vue';\r\nimport {Plc, TablePlc} from \"../plc/core/plc.type\";\r\nimport {TableNode} from \"./useTableNode\";\r\nimport {MultipleClass} from \"../../../use/useClasses\";\r\nimport {FormAssociateFields, FormComponentRules} from \"../../form/form.validate\";\r\nimport {useTree} from \"../../tree/core/useTree\";\r\n\r\nexport type TablePropsConfig = (plcList: TablePlc[]) => Record<string, any>\r\n\r\nexport type TablePropsRowClassFunc = (node: TableNode) => MultipleClass\r\nexport type TablePropsCellClassFunc = (node: TableNode, plc: Plc) => MultipleClass\r\nexport type TablePropsCellStyleFunc = (node: TableNode, plc: Plc) => StyleProperties\r\nexport type TablePropsHeadCellClassFunc = (plc: TablePlc) => MultipleClass\r\nexport type TablePropsHeadCellStyleFunc = (plc: TablePlc) => StyleProperties\r\n\r\nexport type TablePropsSpanMethod = (socpe: { node: TableNode, plc: Plc }) => { rowspan: number, colspan: number }\r\n\r\nexport enum TablePlcAlign {\r\n    left = 'left',\r\n    center = 'center',\r\n    right = 'right',\r\n}\r\n\r\nexport enum TablePlcFixedType {\r\n    left = 'left',\r\n    center = 'center',\r\n    right = 'right',\r\n}\r\n\r\nexport const enum TableHoverPart {\r\n    body = 'body',\r\n    head = 'head'\r\n}\r\n\r\nexport const TableProps = {\r\n\r\n    /*---------------------------------------basic-------------------------------------------*/\r\n\r\n    ...StyleProps,\r\n\r\n    loading: {type: Boolean, default: null},                    // 是否开启表格的加载状态\r\n    virtual: {type: Boolean, default: false},                   // 虚拟滚动\r\n    summaryData: {type: Array as PropType<SimpleObject[]>},     // 表尾合计行数据\r\n    config: {type: Function as PropType<TablePropsConfig>},     // 配置列信息函数\r\n    rules: {type: Object as PropType<FormComponentRules>},      // 校验规则\r\n    associateFields: {type: Object as PropType<FormAssociateFields>},   // 校验关联字段，一个对象，key为字段名，value为字段字符串或者字符串数组。当key变化时，会自动校验value中所列的字段\r\n    colDraggable: {type: Boolean},                              // 列是否可以拖拽排序\r\n    spanMethod: {type: Function as PropType<TablePropsSpanMethod>},// 合并表体单元格的方法\r\n\r\n    /*---------------------------------------style-------------------------------------------*/\r\n\r\n    border: {type: Boolean},                                    // 是否带纵向边框\r\n    stripe: {type: Boolean},                                    // 是否为斑马纹table\r\n    hideHeader: {type: Boolean},                                // 是否隐藏表头\r\n    disabledStickyCompatible: {type: Boolean},                  // 是否禁用在ie下的sticky兼容\r\n    headRowHeight: {type: [String, Number], default: 45},       // 表头行高\r\n    bodyRowHeight: {type: [String, Number], default: 40},       // 表体行高\r\n    showRows: {type: Number, default: 10},                      // 表格显示的行数，当表体的行数超过这个值时，将会出现表体内部滚动，这个属性实际上就是用来设值表格高度\r\n\r\n    rowClassFunc: {type: Function as PropType<TablePropsRowClassFunc>},// 行 className 的计算函数\r\n    cellClassFunc: {type: Function as PropType<TablePropsCellClassFunc>},// 单元格 className 的计算函数\r\n    cellStyleFunc: {type: Function as PropType<TablePropsCellStyleFunc>},// 单元格 style 内联样式的计算函数\r\n    headCellClassFunc: {type: Function as PropType<TablePropsHeadCellClassFunc>},// 表头单元格的 className 的计算函数\r\n    headCellStyleFunc: {type: Function as PropType<TablePropsHeadCellStyleFunc>},// 表头单元格 style 内联样式计算函数\r\n\r\n    /*---------------------------------------tree-------------------------------------------*/\r\n    ...useTree.createProps<TableNode>(),\r\n    childrenField: {type: String, default: 'children'},         // 树节点对应子节点数据对应字段\r\n}","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {renderColgroup} from \"../../plc/core/renderColgroup\";\r\nimport {PltHeadCell} from \"./head-cell\";\r\nimport {useStyles} from \"../../../../use/useStyles\";\r\nimport {TableHoverPart} from \"../table.utils\";\r\nimport {useRefs} from \"../../../../use/useRefs\";\r\nimport {PlScroll} from \"../../../scroll/scroll\";\r\n\r\nexport const PltHead = designComponent({\r\n    name: 'plt-head',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            scroll: PlScroll,\r\n        })\r\n        /*Scroll的父节点需要固定高度*/\r\n        const styles = useStyles(style => {\r\n            style.height = `${props.table.plcData.value!.headPlcListArray.length * (props.table.numberState.headRowHeight + 1)}px`\r\n        })\r\n        /*当总的列宽度大于表格宽度时，设置宽度*/\r\n        const tableStyles = useStyles(style => {\r\n            const {targetTableWidth} = props.table.plcData.value!\r\n            if (!!targetTableWidth) {\r\n                style.width = `${targetTableWidth}px`\r\n            }\r\n        })\r\n        /*表头表体联动滚动*/\r\n        const bindScroll = props.table.bindScroll(\r\n            TableHoverPart.head,\r\n            (scrollLeft, part) => part !== TableHoverPart.head && refs.scroll!.methods.scroll({x: scrollLeft}, {noEmitScroll: true})\r\n        )\r\n        /*表头支持鼠标滚动横向滚动*/\r\n        const onMousewheel = (e: WheelEvent) => {\r\n            const {deltaX, deltaY} = e\r\n            if (Math.abs(deltaY) > Math.abs(deltaX)) {\r\n                e.preventDefault()\r\n                e.stopPropagation()\r\n                refs.scroll!.refs.wrapper.scrollLeft = refs.scroll!.refs.wrapper.scrollLeft + deltaY / 3\r\n            }\r\n        }\r\n        const scrollRef = () => refs.scroll!\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"plt-head\" style={styles.value} onMouseenter={bindScroll.onMouseenter}>\r\n                    <PlScroll hideScrollbar scrollX refreshState={props.table.plcData.value!.targetTableWidth} onScroll={bindScroll.onScroll} ref=\"scroll\">\r\n                        <table {...{\r\n                            cellspacing: 0,\r\n                            cellpadding: 0,\r\n                            border: 0,\r\n                            style: tableStyles.value,\r\n                            onMousewheel: onMousewheel,\r\n                            key: props.table.plcData.value!.plcKeyString,\r\n                        }}>\r\n                            {renderColgroup(props.table.plcData.value!.flatPlcList)}\r\n                            {props.table.plcData.value!.headPlcListArray.map((array, arrayIndex) => (\r\n                                <tr style={`height:${props.table.numberState.headRowHeight}px`} key={arrayIndex}>\r\n                                    {array.map((plc) => <PltHeadCell table={props.table} tablePlc={plc} scroll={scrollRef}/>)}\r\n                                </tr>\r\n                            ))}\r\n                        </table>\r\n                    </PlScroll>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {ComputedRef, PropType} from 'vue';\r\nimport {Plc} from \"../../plc/core/plc.type\";\r\nimport {TableNode} from \"../useTableNode\";\r\nimport {renderBodyCell} from \"../../plc/core/render\";\r\nimport {useEdit} from \"../../../../use/useEdit\";\r\nimport {StyleStatus, useStyle} from \"../../../../use/useStyle\";\r\nimport {FormAssociateFields, FormValidate, FormValidateTrigger} from \"../../../form/form.validate\";\r\nimport {useClass} from \"../../../../use/useClasses\";\r\nimport {useStyles} from \"../../../../use/useStyles\";\r\n\r\nfunction useCellFormItemValidate(props: { plc: Plc, node: TableNode }, validate: ComputedRef<FormValidate>, associateFields?: FormAssociateFields) {\r\n    const handler = {\r\n        onEditChange: async () => {\r\n            let {plc: {props: {field}}, node: {edit, data, editRow, validateResultMap}} = props\r\n            if (!validateResultMap) {props.node.validateResultMap = validateResultMap = {}}\r\n            if (!field) {return}\r\n            await validate.value.methods.validateField({\r\n                field,\r\n                formData: edit ? editRow : data,\r\n                trigger: FormValidateTrigger.change,\r\n                formValidateResultMap: validateResultMap,\r\n                associateFields,\r\n            })\r\n        },\r\n        onEditBlur: async () => {\r\n            let {plc: {props: {field}}, node: {edit, data, editRow, validateResultMap}} = props\r\n            if (!validateResultMap) {props.node.validateResultMap = validateResultMap = {}}\r\n            if (!field) {return}\r\n            await validate.value.methods.validateField({\r\n                field,\r\n                formData: edit ? editRow : data,\r\n                trigger: FormValidateTrigger.blur,\r\n                formValidateResultMap: validateResultMap,\r\n                associateFields,\r\n            })\r\n        },\r\n    }\r\n    useEdit({\r\n        adjust: ret => {\r\n            ret.disabled = null\r\n            ret.readonly = null\r\n            ret.loading = null\r\n            ret.onChange = handler.onEditChange\r\n            ret.onBlur = handler.onEditBlur\r\n        }\r\n    })\r\n    useStyle({\r\n        adjust: (ret) => {\r\n            const {node: {validateResultMap}, plc: {props: {field}}} = props\r\n            const {status} = ret\r\n            ret.status = status || ((!!field && validateResultMap && !!validateResultMap[field]) ? StyleStatus.error : undefined)\r\n            return ret\r\n        }\r\n    })\r\n}\r\n\r\nexport const PltCell = designComponent({\r\n    name: 'plt-cell',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n        node: {type: Object as PropType<TableNode>, required: true},\r\n        plc: {type: Object as PropType<Plc>, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        useCellFormItemValidate(props, props.table.formValidate, props.table.props.associateFields)\r\n\r\n        return {\r\n            render: () => {\r\n                const {node, plc} = props\r\n                const {body, editable} = renderBodyCell({node, plc})\r\n                const span = !!props.table.props.spanMethod ? props.table.props.spanMethod({node, plc}) : {rowspan: 1, colspan: 1}\r\n\r\n                if (span.rowspan === 0 || span.colspan === 0) {\r\n                    /*rowspan为0时，不会正确合并单元格，如果要合并单元格得不渲染这个td*/\r\n                    return null\r\n                }\r\n                const classes = useClass(() => {\r\n                    const ret = [\r\n                        props.plc.classes.body,\r\n                        props.plc.props.bodyCls,\r\n                        {'plt-cell-editing': editable,}\r\n                    ] as any[]\r\n                    if (!!props.table.props.cellClassFunc) {\r\n                        ret.push(props.table.props.cellClassFunc(node, plc))\r\n                    }\r\n                    return ret\r\n                })\r\n                const styles = useStyles(style => {\r\n                    Object.assign(style, plc.styles.body)\r\n                    if (!!props.table.props.cellStyleFunc) {\r\n                        Object.assign(style, props.table.props.cellStyleFunc(node, plc))\r\n                    }\r\n                })\r\n\r\n                return (\r\n                    <td{...span} class={classes.value} style={styles.value}>\r\n                        {body}\r\n                    </td>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","/**\r\n * 在遍历plc的时候，操作类型，remove意思是遍历完这一次之删除这个plc或者plc组\r\n * @author  韦胜健\r\n * @date    2020/8/14 17:26\r\n */\r\nimport {Plc, PlcGroup, TablePlc} from \"../../core/plc.type\";\r\n\r\nexport const enum IteratePlcHandleType {\r\n    remove = 'remove',                      // 移除当前节点\r\n    nothing = 'nothing'                     // 什么事也不做\r\n}\r\n\r\nexport function iteratePlcList(\r\n    {\r\n        plcList,\r\n        onPlc,\r\n        onGroup,\r\n    }: {\r\n        plcList: TablePlc[],\r\n        onPlc: (plc: Plc) => IteratePlcHandleType,\r\n        onGroup: (group: PlcGroup) => IteratePlcHandleType,\r\n    }\r\n) {\r\n\r\n    for (let i = 0; i < plcList.length; i++) {\r\n        const plc = plcList[i];\r\n        if (!plc.group) {\r\n            const handleType = onPlc(plc)\r\n            if (handleType === IteratePlcHandleType.remove) {\r\n                plcList.splice(i, 1)\r\n                i--\r\n            }\r\n        } else {\r\n            const handleType = onGroup(plc)\r\n            if (handleType === IteratePlcHandleType.remove) {\r\n                plcList.splice(i, 1)\r\n                i--\r\n            } else {\r\n                iteratePlcList({plcList: plc.children, onPlc, onGroup,})\r\n                // 当这个分组没有列的时候（可能都隐藏了），自动删除这个分组\r\n                if (plc.children.length === 0) {\r\n                    plcList.splice(i, 1)\r\n                    i--\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {PropType} from 'vue';\r\nimport {PltCell} from \"./cell\";\r\nimport {TableNode} from \"../useTableNode\";\r\nimport {useClass} from \"../../../../use/useClasses\";\r\n\r\nexport const PltRow = designComponent({\r\n    name: 'plt-row',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n        node: {type: Object as PropType<TableNode>, required: true},\r\n        vid: {type: [String, Number]},\r\n    },\r\n    setup({props}) {\r\n\r\n        const handler = {\r\n            onClick: (e: MouseEvent) => props.table.handler.onClickRow(e, props.node),\r\n            onDblclick: (e: MouseEvent) => props.table.handler.onDblclickRow(e, props.node),\r\n            vid: props.vid,\r\n        }\r\n\r\n        const classes = useClass(() => {\r\n            const ret = [\r\n                'plt-row',\r\n                {\r\n                    'plt-row-current': props.table.current.value == props.node.key\r\n                }\r\n            ] as any[]\r\n            if (!!props.table.props.rowClassFunc) {\r\n                ret.push(props.table.props.rowClassFunc(props.node))\r\n            }\r\n            return ret\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                const content = [\r\n                    (\r\n                        <tr class={classes.value} style={`height:${props.table.numberState.bodyRowHeight}px`} {...handler}>\r\n                            {props.table.plcData.value!.flatPlcList.map(plc => <PltCell table={props.table} node={props.node} plc={plc}/>)}\r\n                        </tr>\r\n                    ),\r\n                ]\r\n                if (props.table.plcData.value!.plcListHasRenderAfterRow) {\r\n                    content.push(...props.table.plcData.value!.plcListHasRenderAfterRow.map(plc => plc.props.renderAfterRow!({\r\n                        node: props.node,\r\n                        plc,\r\n                        row: props.node.data,\r\n                    }) as Element))\r\n                }\r\n\r\n                return content.filter(Boolean)\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {PropType} from 'vue';\r\nimport {SimpleObject} from \"../../shims\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {useVirtualList} from \"../virtual-list/useVirtualList\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {PlScroll} from \"../scroll/scroll\";\r\n\r\n// const scrollbarSize = 12;\r\n\r\nexport const PlVirtualTable = designComponent({\r\n    name: 'pl-virtual-table',\r\n    props: {\r\n        data: {type: Array as PropType<SimpleObject[]>, require: true, default: []},// 要渲染的长数据\r\n        size: {type: Number, require: true, default: 40},           // 每一行高度\r\n        dynamicSize: {type: Boolean},                               // 标识列表中的每一行高度不是固定的，但是还是需要提供 size 属性，而且size属性不能与每一行的高度差距太多；\r\n        disabled: {type: Boolean},                                  // 禁用虚拟滚动\r\n\r\n        summaryData: {type: Array as PropType<SimpleObject[]>},     // 合计行数据\r\n        width: {type: Number},                                      // 宽度\r\n        height: {type: Number},                                     // 高度\r\n    },\r\n    emits: {\r\n        onScroll: (e: Event) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots(['colgroup'])\r\n        const {scopedSlots} = useScopedSlots({default: {item: Object, index: Number}})\r\n        const {refs} = useRefs({\r\n            scroll: PlScroll,\r\n            content: HTMLDivElement,\r\n            summary: HTMLDivElement,\r\n        })\r\n\r\n        const {virtual} = useVirtualList({props, refs, emit, transform: false})\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n        const styles = useStyles(style => {\r\n            style.height = unit(props.height)\r\n        })\r\n        const tableStyles = useStyles((style) => {\r\n            !!props.width && (style.width = unit(props.width))\r\n        })\r\n\r\n        const summaryTableStyles = useStyles((styles) => {\r\n            Object.assign(styles, tableStyles.value)\r\n            styles.height = `${!props.summaryData ? 0 : props.summaryData.length * props.size}px`\r\n            styles.bottom = `0px`\r\n        })\r\n\r\n        const strutStyles = useStyles(style => {\r\n            Object.assign(style, virtual.strutStyles.value)\r\n            !!props.width && (style.width = unit(props.width));\r\n            style.paddingBottom = `${(props.summaryData || []).length * props.size + 8}px`\r\n        })\r\n\r\n        const handler = {\r\n            onScroll: (e: any) => {\r\n                virtual.handler.onScroll(e)\r\n                !!refs.summary && (refs.summary.scrollLeft = e.target.scrollLeft)\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                refs\r\n            },\r\n            render: () => {\r\n                const {list} = virtual.offsetData.value\r\n                return (\r\n                    <div style={styles.value} class=\"pl-virtual-table\">\r\n                        <PlScroll\r\n                            refreshState={props.width}\r\n                            ref=\"scroll\"\r\n                            disableListTransition\r\n                            onScroll={handler.onScroll}\r\n                            scrollX\r\n                            class={virtual.classes.value}\r\n                            horizontalScrollbarTooltip={'推荐【表头使用鼠标滚轮】，或者【表体Alt键+鼠标滚轮】横向滚动'}\r\n                            v-slots={{\r\n                                default: () => (<div class=\"pl-virtual-list-strut\" style={strutStyles.value}>\r\n                                    <div class=\"pl-virtual-list-content\" ref=\"content\" style={virtual.contentStyles.value}>\r\n                                        <table {...{cellpadding: 0, cellspacing: 0, border: 0, style: tableStyles.value}}>\r\n                                            {slots.colgroup()}\r\n                                            {list.map((node) => scopedSlots.default(node))}\r\n                                        </table>\r\n                                    </div>\r\n                                </div>),\r\n                                content: () => (\r\n                                    !props.summaryData || props.summaryData.length === 0 ? null :\r\n                                        <div class=\"pl-virtual-table-summary-table-wrapper\" ref=\"summary\">\r\n                                            <table {...{cellpadding: 0, cellspacing: 0, border: 0, style: summaryTableStyles.value}}\r\n                                                   class=\"pl-virtual-table-summary-table\">\r\n                                                {slots.colgroup()}\r\n                                                {!props.summaryData ? null : props.summaryData.map((item, index) => scopedSlots.default({item, index}))}\r\n                                            </table>\r\n                                        </div>\r\n                                ),\r\n                            }}/>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {PltRow} from \"./row\";\r\nimport {PlVirtualTable} from \"../../virtual-table\";\r\nimport {renderColgroup} from \"../../plc/core/renderColgroup\";\r\nimport {useRefs} from \"../../../../use/useRefs\";\r\nimport {TableHoverPart} from \"../table.utils\";\r\nimport {TableNode} from \"../useTableNode\";\r\nimport {PlainScroll} from \"../../../scroll/scroll\";\r\n\r\nexport const PltBody = designComponent({\r\n    name: 'plt-head',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            virtual: PlVirtualTable,\r\n        })\r\n        /*表头表体联动滚动*/\r\n        const bindScroll = props.table.bindScroll(\r\n            TableHoverPart.body,\r\n            (scrollLeft, part) => part !== TableHoverPart.body && refs.virtual!.refs.scroll!.methods.scroll({x: scrollLeft}, {noEmitScroll: true})\r\n        );\r\n\r\n        const handler = {\r\n            /*表体支持alt+鼠标滚动联动滚动*/\r\n            onMousewheel: (e: MouseWheelEvent) => {\r\n                const {deltaX, deltaY} = e\r\n                if (e.altKey && Math.abs(deltaY) > Math.abs(deltaX)) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    refs.virtual!.refs.scroll!.refs.wrapper.scrollLeft = refs.virtual!.refs.scroll!.refs.wrapper.scrollLeft + deltaY / 3\r\n                }\r\n            },\r\n            onVnodeMounted: () => {\r\n                props.table.event.emit.onVirtualMounted({scroll: refs.virtual!.refs.scroll as PlainScroll})\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <PlVirtualTable\r\n                    class=\"plt-body\"\r\n                    ref=\"virtual\"\r\n                    key={props.table.plcData.value!.plcKeyString}\r\n                    width={props.table.plcData.value!.targetTableWidth!}\r\n                    size={props.table.numberState.bodyRowHeight}\r\n                    data={props.table.flatNodes.value}\r\n                    summaryData={props.table.summaryNodes.value || undefined}\r\n                    height={props.table.props.showRows * props.table.numberState.bodyRowHeight + 12}\r\n                    disabled={props.table.disabledVirtual.value}\r\n                    {...bindScroll}\r\n                    {...handler}\r\n                    v-slots={{\r\n                        default: ({item, index}: { item: TableNode, index: number }) => (\r\n                            <PltRow\r\n                                {...{vid: index}}\r\n                                key={index}\r\n                                table={props.table}\r\n                                node={item}\r\n                            />\r\n                        ),\r\n                        colgroup: () => renderColgroup(props.table.plcData.value!.flatPlcList)\r\n                    }}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import {StyleProperties, VNodeChild} from \"../../../../shims\";\r\nimport {TablePlc, TableRenderScope} from \"./plc.type\";\r\nimport {TablePlcAlign, TablePlcFixedType} from \"../../core/table.utils\";\r\nimport {PropType} from 'vue';\r\nimport {TableNode} from \"../../core/useTableNode\";\r\nimport {MultipleClass} from \"../../../../use/useClasses\";\r\nimport {FormRule} from \"../../../form/form.validate\";\r\n\r\nexport type PlcRenderFunction = (scope: TableRenderScope) => VNodeChild\r\nexport type PlcPropsHead = (scope: { plc: TablePlc }) => VNodeChild\r\nexport type PlcPropsDefault = PlcRenderFunction\r\nexport type PlcPropsSummary = PlcRenderFunction\r\nexport type PlcPropsEdit = PlcRenderFunction\r\nexport type PlcPropsRenderAfterRow = PlcRenderFunction\r\nexport type PlcPropsEditable = boolean | ((node: TableNode) => boolean)\r\n\r\nexport const PlcGroupProps = {\r\n    title: {type: String},                                                  // 列标题\r\n    align: {type: String as PropType<TablePlcAlign>},                       // 非编辑状态下文本对其方式\r\n    noPadding: {type: Boolean},                                             // 是否不兼容表格的虚拟滚动功能\r\n    colDraggable: {type: Boolean, default: null},                           // 列是否可以拖拽排序\r\n\r\n    hide: {type: Boolean},                                                  // 是否隐藏\r\n    order: {type: [String, Number]},                                        // 列排序\r\n    fixed: {type: String as PropType<TablePlcFixedType>, default: TablePlcFixedType.center},// 冻结列位置：left、right、undefined\r\n    autoFixedLeft: {type: Boolean},                                         // 当出现左固定列的时候，是否自动设置为左固定列\r\n    autoFixedRight: {type: Boolean},                                        // 当出现右固定列的时候，是否自动设置为右固定列\r\n\r\n    headCls: {},                                                            // 给表头添加的class\r\n    bodyCls: {},                                                            // 给表体添加的class\r\n}\r\n\r\nexport const PlcProps = {\r\n    ...PlcGroupProps,\r\n    field: {type: String},                                                  // 列绑定字段\r\n    width: {type: [String, Number], default: 120},                          // 列宽度\r\n    fit: {type: Boolean},                                                   // 列宽自适应(只有一个列能够自适应)\r\n    notFitVirtual: {type: Boolean},                                         // 是否不兼容表格的虚拟滚动功能\r\n\r\n    // 渲染函数\r\n    head: {type: Function as PropType<PlcPropsHead>},                       // 列标题渲染函数\r\n    default: {type: Function as PropType<PlcPropsDefault>},                 // 列内容默认渲染函数\r\n    summary: {type: Function as PropType<PlcPropsSummary>},                 // 列内容在合计行上的渲染函数\r\n    edit: {type: Function as PropType<PlcPropsEdit>},                       // 列内容在编辑状态下的渲染函数\r\n    renderAfterRow: {type: Function as PropType<PlcPropsRenderAfterRow>},   // 行之后需要额外渲染的内容\r\n\r\n    // 编辑相关\r\n    required: {type: Boolean},                                              // 是否必填\r\n    rules: {type: [Object, Array] as PropType<FormRule | FormRule[]>},      // 校验规则\r\n    editable: {type: [Boolean, Function] as PropType<PlcPropsEditable>, default: true},// 是否可编辑\r\n    addEditPadding: {type: Boolean},                                        // 处于编辑状态的时候，是否添加内编辑，只有当行状态为编辑状态，并且列有edit渲染函数或者作用域插槽时，才符合“处于编辑状态”的条件\r\n}\r\n\r\nexport type PlcPublicAttrsType = {\r\n    level: number,                      // 分组表头层级\r\n    rowspan: number,                    // 表头td的rowspan\r\n    colspan: number,                    // 表头td的colspan\r\n    isLastFixedLeft: boolean,           // 是否为最后一个左固定列\r\n    isFirstFixedRight: boolean,         // 是否为第一个右固定列\r\n    fixedPosition: {                    // 固定列的sticky位置\r\n        left: number,\r\n        right: number,\r\n    },\r\n    // 列style公共内联样式\r\n    styles: {\r\n        head: StyleProperties,\r\n        body: StyleProperties,\r\n    },\r\n    // 列公共class样式\r\n    classes: {\r\n        head: MultipleClass,\r\n        body: MultipleClass,\r\n    },\r\n}\r\n\r\n/**\r\n * Plc以及PlcGroup公共的一些属性\r\n * @author  韦胜健\r\n * @date    2020/12/18 14:41\r\n */\r\nexport const PlcPublicAttrs: PlcPublicAttrsType = {\r\n    level: 0,\r\n    rowspan: 1,\r\n    colspan: 1,\r\n    isLastFixedLeft: false,\r\n    isFirstFixedRight: false,\r\n    fixedPosition: {\r\n        left: 0,\r\n        right: 0,\r\n    },\r\n    styles: {\r\n        head: {},\r\n        body: {},\r\n    },\r\n    classes: {\r\n        head: [],\r\n        body: [],\r\n    },\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\nimport {PlcPublicAttrs} from \"../../core/plc.utils\";\r\n\r\n/**\r\n * 浅复制一份plc数据，复制plc最外层对象以及plc.props数据，props数据是需要动态计算修改的。\r\n * state不能复制，因为需要其响应式属性。\r\n * @author  韦胜健\r\n * @date    2020/12/18 10:06\r\n */\r\nexport function copyPlcList(plcList: TablePlc[]) {\r\n    return plcList.map(plc => {\r\n        const refer = plc.refer()\r\n        const newPlc: TablePlc = {\r\n            ...refer,\r\n            ...deepcopy(PlcPublicAttrs),\r\n        }\r\n        newPlc.props = {...newPlc.props}\r\n        if (newPlc.group) {\r\n            newPlc.children = copyPlcList(newPlc.children)\r\n        }\r\n        return newPlc\r\n    })\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\nimport {TablePlcFixedType, TablePropsConfig} from \"../../../core/table.utils\";\r\nimport {IteratePlcHandleType, iteratePlcList} from \"../utils/iteratePlcList\";\r\n\r\n/**\r\n * 处理Plc以及PlcGroup公共的，逻辑\r\n * @author  韦胜健\r\n * @date    2020/12/18 11:18\r\n */\r\nfunction handleTablePlc(plc: TablePlc, configData: { [k: string]: any } | null) {\r\n    const props = plc.props as any\r\n    const state = plc.state as any\r\n    // 如果有config，将config中的属性覆盖props\r\n    const configPlc = !configData ? null : configData[`${!plc.group ? plc.props.field : 'group'}_${plc.props.title}`]\r\n    if (!!configPlc) {\r\n        Object.keys(configPlc).forEach(key => {\r\n            if (configPlc[key] != null) props[key] = configPlc[key]\r\n        })\r\n    }\r\n    // 如果有state，将state中的属性覆盖props\r\n    Object.keys(plc.state).forEach(key => {\r\n        if (state[key] != null) props[key] = state[key]\r\n    })\r\n}\r\n\r\n/**\r\n * 处理plc的数据，以state、config、props为顺序，优先级依次递减，\r\n * 得到一个最终的plc.props 对象\r\n * @author  韦胜健\r\n * @date    2020/12/18 11:08\r\n */\r\nexport function processStateConfigAndProps(\r\n    {\r\n        plcList,\r\n        config,\r\n    }: {\r\n        plcList: TablePlc[],\r\n        config?: TablePropsConfig,\r\n    }\r\n) {\r\n    const configData = !config ? null : config(plcList)\r\n\r\n    const configState = {\r\n        notFitVirtual: [] as TablePlc[],                        // 不能使用虚拟滚动的列\r\n        fixedLeft: [] as TablePlc[],                            // 左固定的列\r\n        fixedRight: [] as TablePlc[],                           // 右固定的列\r\n        autoFixedLeft: [] as TablePlc[],                        // 需要自动左固定的列\r\n        autoFixedRight: [] as TablePlc[],                       // 需要自动右固定的列\r\n    }\r\n\r\n    /**\r\n     * - 根基plc的config，计算plc的属性。\r\n     * - 计算出需要自动左固定的plc，自动右固定的plc，左固定的plc，右固定的plc；以及计算出不兼容虚拟滚动的plc；\r\n     * - 如果group设置了自动左右固定或者左右固定，那么他的子组件plc或者group也要改成和父group一致的值；\r\n     * - 将隐藏的plc从group的子节点数据中移除\r\n     * @author  韦胜健\r\n     * @date    2020/8/12 10:24\r\n     */\r\n    iteratePlcList({\r\n        plcList,\r\n        onPlc: plc => {\r\n            handleTablePlc(plc, configData)\r\n            // 如果是隐藏的列，则删除这一列\r\n            if (plc.props.hide) {\r\n                return IteratePlcHandleType.remove\r\n            }\r\n            if (plc.props.notFitVirtual) configState.notFitVirtual.push(plc)\r\n            if (plc.props.autoFixedLeft) configState.autoFixedLeft.push(plc)\r\n            if (plc.props.autoFixedRight) configState.autoFixedRight.push(plc)\r\n            if (plc.props.fixed === TablePlcFixedType.left) configState.fixedLeft.push(plc)\r\n            if (plc.props.fixed === TablePlcFixedType.right) configState.fixedRight.push(plc)\r\n            return IteratePlcHandleType.nothing\r\n        },\r\n        onGroup: group => {\r\n            handleTablePlc(group, configData)\r\n            if (group.props.hide) {\r\n                return IteratePlcHandleType.remove\r\n            }\r\n            // 表头分组，子节点的固定方式，以及左固定、右固定随父节点控制\r\n            group.children.forEach(plc => {\r\n                plc.props.fixed = group.props.fixed\r\n                plc.props.autoFixedLeft = group.props.autoFixedLeft\r\n                plc.props.autoFixedRight = group.props.autoFixedRight\r\n            })\r\n            return IteratePlcHandleType.nothing\r\n        },\r\n    })\r\n\r\n    /**\r\n     * 在最终排序的时候，要求fixed是正确的，而跟autoFixedLeft，autoFixedRight的值无关\r\n     * @author  韦胜健\r\n     * @date    2020/12/18 11:26\r\n     */\r\n\r\n    /*如果存在左固定列，则设置autoFixedLeft为左固定*/\r\n    if (configState.fixedLeft.length > 0) {configState.autoFixedLeft.forEach(plc => plc.props.fixed = TablePlcFixedType.left)}\r\n\r\n    /*如果存在右固定列，则设置autoFixedRight为右固定*/\r\n    if (configState.fixedRight.length > 0) {configState.autoFixedRight.forEach(plc => plc.props.fixed = TablePlcFixedType.right)}\r\n\r\n    return configState\r\n}","import {Plc, TablePlc} from \"../../core/plc.type\";\r\nimport {IteratePlcHandleType, iteratePlcList} from \"../utils/iteratePlcList\";\r\nimport {insertSort} from \"plain-utils/object/insertSort\";\r\nimport {TablePlcFixedType} from \"../../../core/table.utils\";\r\n\r\n/**\r\n * 获取plc的排序索引\r\n * @author  韦胜健\r\n * @date    2020/12/18 14:23\r\n */\r\nfunction getPlcOrder(item: TablePlc): number {\r\n    let order = item.props.order || 0\r\n    if (item.props.fixed === TablePlcFixedType.left) {\r\n        order -= 9999\r\n    } else if (item.props.fixed === TablePlcFixedType.right) {\r\n        order += 9999\r\n    }\r\n    return Number(order)\r\n}\r\n\r\n/**\r\n * 对plc进行排序\r\n * @author  韦胜健\r\n * @date    2020/8/15 19:18\r\n */\r\nexport function processPlcSort(\r\n    {\r\n        plcList,\r\n        tableWidth,\r\n    }: {\r\n        plcList: TablePlc[],\r\n        tableWidth: number,\r\n    }\r\n) {\r\n    insertSort(plcList, (a, b) => getPlcOrder(a) > getPlcOrder(b))\r\n    /*计算 flatPlcList 自己 targetTableWidth*/\r\n    const flatPlcList = [] as Plc[]\r\n    iteratePlcList({\r\n        plcList,\r\n        onPlc: plc => {\r\n            flatPlcList.push(plc)\r\n            return IteratePlcHandleType.nothing\r\n        },\r\n        onGroup: group => {\r\n            group.children = insertSort(group.children, (a, b) => getPlcOrder(a) > getPlcOrder(b))\r\n            return IteratePlcHandleType.nothing\r\n        }\r\n    })\r\n\r\n    /*计算表格需要固定的宽度*/\r\n    const {targetTableWidth, plcKeyString} = (() => {\r\n        let totalPlcWidth = 0;                                          // 总的plc宽度\r\n        let fitPlc = null as null | Plc                                 // 需要自适应宽度的plc\r\n        const plcKeyString = [] as string[]\r\n        flatPlcList.forEach(plc => {\r\n            totalPlcWidth += plc.props.width\r\n            if (plc.props.fit) {\r\n                fitPlc = plc\r\n            } else if ((!fitPlc || !fitPlc.props.fit) && plc.props.fixed === TablePlcFixedType.center) {\r\n                fitPlc = plc\r\n            }\r\n            plcKeyString.push(plc.props.field || 'empty')\r\n        })\r\n        /**\r\n         * 目标table宽度，当总宽度小于tableWidth时，table不设置width宽度。因为table设置了min-width为100%，此时fit的列会自适应宽度。\r\n         * 当总宽度大于tableWidth时，table需要设置width宽度，否则会导致列被压缩\r\n         * @author  韦胜健\r\n         * @date    2020/12/18 15:28\r\n         */\r\n        let targetTableWidth = totalPlcWidth > tableWidth ? totalPlcWidth : null\r\n        if (!targetTableWidth && !!fitPlc) {\r\n            fitPlc.props.width = 0\r\n        }\r\n        return {targetTableWidth, plcKeyString: plcKeyString.join('_')}\r\n    })();\r\n\r\n    return {\r\n        targetTableWidth,\r\n        flatPlcList,\r\n        plcKeyString,\r\n    }\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\nimport {TablePlcFixedType} from \"../../../core/table.utils\";\r\n\r\n/**\r\n * 计算渲染表头所需要的二维数组以及层数\r\n * @author  韦胜健\r\n * @date    2020/12/18 14:38\r\n */\r\nexport function processHeadPlcList({plcList}: { plcList: TablePlc[] }) {\r\n    // 最大表头层数\r\n    let maxLevel = 1\r\n    // 计算最大层数\r\n    const calculateLevel = (list: TablePlc[] | null, level: number) => {\r\n        if (!!list && list.length > 0) {\r\n            if (level > maxLevel) maxLevel = level\r\n            list.forEach((item) => {\r\n                item.level = level - 1\r\n                if (item.group) {\r\n                    calculateLevel((item).children, level + 1)\r\n                }\r\n            })\r\n        }\r\n    }\r\n    calculateLevel(plcList, 1)\r\n\r\n    // 计算多级表头每个单元格所占行数以及列数\r\n    const calculateSpan = (item: TablePlc) => {\r\n        if (item.group) {\r\n            const group = item\r\n            group.children.forEach(calculateSpan)\r\n            group.rowspan = 1\r\n            group.colspan = 0\r\n            group.children.forEach(i => group.colspan += i.colspan)\r\n        } else {\r\n            const plc = item\r\n            plc.rowspan = maxLevel - plc.level\r\n            plc.colspan = 1\r\n        }\r\n    }\r\n    plcList.forEach(plc => calculateSpan(plc))\r\n\r\n    // 计算结果\r\n    const headPlcListArray: TablePlc[][] = []\r\n\r\n    for (let j = 0; j < maxLevel; j++) headPlcListArray.push([])\r\n    // 收集多级表头渲染数据\r\n    const calculateHeadColumns = (list: TablePlc[]) => {\r\n        if (!!list && list.length > 0) {\r\n            list.forEach((item) => {\r\n                headPlcListArray[item.level!].push(item)\r\n                if (item.group) {\r\n                    calculateHeadColumns((item).children)\r\n                }\r\n            })\r\n        }\r\n    }\r\n    calculateHeadColumns(plcList)\r\n    setFixedFlag(headPlcListArray[0])\r\n\r\n    return {\r\n        headPlcListArray,\r\n        maxLevel,\r\n    }\r\n}\r\n\r\n/**\r\n * 对plc设置标记，是否为最后一个左固定列，是否为第一个右固定列\r\n * @author  韦胜健\r\n * @date    2020/8/15 23:06\r\n */\r\nfunction setFixedFlag(plcList: TablePlc[]) {\r\n    let lastFixedLeft: TablePlc | undefined;\r\n    let firstFixedRight: TablePlc | undefined;\r\n\r\n    plcList.forEach(plc => {\r\n        if (plc.props.fixed === TablePlcFixedType.left) {\r\n            lastFixedLeft = plc\r\n        }\r\n        if (!firstFixedRight && plc.props.fixed === TablePlcFixedType.right) {\r\n            firstFixedRight = plc\r\n        }\r\n    })\r\n\r\n    /**\r\n     * 递归设置，每一层的lastFixedLeft\r\n     * @author  韦胜健\r\n     * @date    2020/12/18 14:46\r\n     */\r\n    function setLastFixedLeft(plc: TablePlc) {\r\n        plc.isLastFixedLeft = true\r\n        if (plc.group) {\r\n            setLastFixedLeft(plc.children[plc.children.length - 1])\r\n        }\r\n    }\r\n\r\n    !!lastFixedLeft && setLastFixedLeft(lastFixedLeft);\r\n\r\n    /**\r\n     * 递归设置每一层的firstFixedRight\r\n     * @author  韦胜健\r\n     * @date    2020/12/18 14:46\r\n     */\r\n    function setFirstFixedRight(plc: TablePlc) {\r\n        plc.isFirstFixedRight = true\r\n        if (plc.group) {\r\n            setFirstFixedRight(plc.children[0])\r\n        }\r\n    }\r\n\r\n    !!firstFixedRight && setFirstFixedRight(firstFixedRight)\r\n}","import {Plc, TablePlc} from \"../../core/plc.type\";\r\nimport {TablePlcFixedType} from \"../../../core/table.utils\";\r\nimport {StyleProperties} from \"../../../../../shims\";\r\n\r\n/**\r\n * 处理plc的fixed定位\r\n * @author  韦胜健\r\n * @date    2020/12/19 16:50\r\n */\r\nexport function processPlcFixed(flatPlcList: Plc[]) {\r\n    const collect = (() => {\r\n        const left = [] as Plc[]\r\n        const right = [] as Plc[]\r\n        flatPlcList.forEach(plc => {\r\n            switch (plc.props.fixed) {\r\n                case TablePlcFixedType.left:\r\n                    left.push(plc)\r\n                    break\r\n                case TablePlcFixedType.right:\r\n                    right.push(plc)\r\n                    break\r\n            }\r\n        })\r\n        return {\r\n            left,\r\n            right,\r\n        }\r\n    })();\r\n    const width = {\r\n        left: 0,\r\n        right: 0,\r\n    };\r\n    Object.keys(collect).forEach((item) => {\r\n        const key = item as 'left' | 'right'\r\n        let list = collect[key]!\r\n        if (key === 'right') {list = list.reverse()}\r\n\r\n        for (let i = 0; i < list.length; i++) {\r\n            const element = list[i];\r\n            width[key] += element.props.width\r\n            if (i === 0) {\r\n                element.fixedPosition[key] = 0\r\n            } else {\r\n                const {props: {width: prevWidth}, fixedPosition: {[key]: prevValue}} = list[i - 1]!\r\n                element.fixedPosition[key] = Number(prevWidth) + prevValue\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\n/**\r\n * 获取plcFixed样式\r\n * @author  韦胜健\r\n * @date    2020/12/19 16:55\r\n */\r\nexport function getPlcFixedStyle(plc: TablePlc) {\r\n    const {props: {fixed}} = plc\r\n    const styles = {} as StyleProperties\r\n    if (fixed === TablePlcFixedType.center) {\r\n        return styles\r\n    }\r\n    styles.position = 'sticky'\r\n    styles.zIndex = 3\r\n\r\n    if (!plc.group) {\r\n        styles[fixed] = plc.fixedPosition[fixed] + 'px'\r\n    } else {\r\n        let count = 10\r\n        const isFixedLeft = fixed === TablePlcFixedType.left\r\n        while (!!plc && plc.group && count > 0) {\r\n            plc = plc.children[isFixedLeft ? 0 : plc.children.length - 1]\r\n            count--\r\n        }\r\n        if (count === 0 && !!plc) {\r\n            throw new Error('解析异常')\r\n        }\r\n        if (!!plc) {\r\n            styles[fixed] = plc.fixedPosition[fixed] + 'px'\r\n        }\r\n    }\r\n    return styles\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\n\r\nexport function getPltCellClass(plc: TablePlc) {\r\n    return {\r\n        // 'pl-cell-group': plc.group,\r\n        [`plt-cell-align-${plc.props.align}`]: !!plc.props.align,\r\n    }\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\nimport {getPlcFixedStyle} from \"./processPlcFixed\";\r\nimport {getPltCellClass} from \"./getPltCellClass\";\r\n\r\nexport function processPlcClassAndStyle(\r\n    {\r\n        headPlcListArray,\r\n    }: {\r\n        headPlcListArray: TablePlc[][],\r\n    }\r\n) {\r\n    headPlcListArray.forEach((list) => {\r\n        list.forEach((plc) => {\r\n            /*---------------------------------------head-------------------------------------------*/\r\n            plc.styles.head = getPlcFixedStyle(plc)\r\n            plc.classes.head = [\r\n                'plt-cell',\r\n                'plt-head-cell',\r\n                {\r\n                    ...getPltCellClass(plc),\r\n                    'plt-cell-last-fixed-left': plc.isLastFixedLeft,\r\n                    'plt-cell-first-fixed-right': plc.isFirstFixedRight,\r\n                    'plt-cell-no-padding': plc.props.noPadding,\r\n                }\r\n            ]\r\n            /*---------------------------------------body-------------------------------------------*/\r\n            if (!plc.group) {\r\n                plc.styles.body = getPlcFixedStyle(plc)\r\n                plc.classes.body = [\r\n                    'plt-cell',\r\n                    'plt-body-cell',\r\n                    {\r\n                        ...getPltCellClass(plc),\r\n                        'plt-cell-add-edit-padding': plc.props.addEditPadding,\r\n                        'plt-cell-last-fixed-left': plc.isLastFixedLeft,\r\n                        'plt-cell-first-fixed-right': plc.isFirstFixedRight,\r\n                        'plt-cell-no-padding': plc.props.noPadding,\r\n                    },\r\n                ]\r\n            }\r\n        })\r\n    })\r\n}","import {Plc, TablePlc} from \"../core/plc.type\";\r\nimport {copyPlcList} from \"./process/copyPlcList\";\r\nimport {processStateConfigAndProps} from \"./process/processStateConfigAndProps\";\r\nimport {ExtractPropTypes} from 'vue';\r\nimport {TableProps} from \"../../core/table.utils\";\r\nimport {processPlcSort} from \"./process/processPlcSort\";\r\nimport {processHeadPlcList} from \"./process/processHeadPlcList\";\r\nimport {processPlcFixed} from \"./process/processPlcFixed\";\r\nimport {processPlcClassAndStyle} from \"./process/processPlcClassAndStyle\";\r\n\r\nexport function formatPlcList(\r\n    {\r\n        plcList,\r\n        props,\r\n        tableWidth,\r\n    }: {\r\n        plcList: TablePlc[],\r\n        props: ExtractPropTypes<typeof TableProps>,\r\n        tableWidth: number,\r\n    }\r\n) {\r\n    /*复制一份plc数据*/\r\n    plcList = copyPlcList(plcList)\r\n    /*处理state、config以及props*/\r\n    const {notFitVirtual} = processStateConfigAndProps({plcList, config: props.config})\r\n    /*对plc进行排序*/\r\n    const {flatPlcList, targetTableWidth, plcKeyString} = processPlcSort({plcList, tableWidth})\r\n    /*计算表头渲染需要的数据*/\r\n    const {headPlcListArray, maxLevel} = processHeadPlcList({plcList})\r\n    /*计算固定列所需要的left，right值*/\r\n    processPlcFixed(flatPlcList)\r\n    /*计算plc的class以及style*/\r\n    processPlcClassAndStyle({headPlcListArray})\r\n\r\n    /*需要在行之后渲染其他内容的plcList*/\r\n    let plcListHasRenderAfterRow = flatPlcList.filter(plc => plc.props.renderAfterRow) as (Plc[] | null)\r\n    if (!!plcListHasRenderAfterRow && plcListHasRenderAfterRow.length === 0) {plcListHasRenderAfterRow = null}\r\n\r\n    return {\r\n        plcList,                                                // 列数组数据，树形结构的数据\r\n        flatPlcList,                                            // 展开之后最底层的列数组\r\n        targetTableWidth,                                       // 表格设置的样式宽度\r\n        tableWidth,                                             // 表格容器宽度\r\n        notFitVirtual,                                          // 不兼容虚拟列表的列数组\r\n        headPlcListArray,                                       // 表头渲染的二维数组\r\n        plcKeyString,                                           // 当列排序或者其他属性变化之后，需要刷新body，否则会出现部分节点没有更新的问题\r\n        maxLevel,                                               // 表头层级\r\n        plcListHasRenderAfterRow,                               // 列需要在行之后多渲染的数据\r\n    }\r\n}","import {computed, ExtractPropTypes, onMounted, reactive} from 'vue';\r\nimport {useRefs} from \"../../../../use/useRefs\";\r\nimport {TableProps} from \"../../core/table.utils\";\r\nimport {useNumber} from \"../../../../use/useNumber\";\r\nimport PlcCollector from \"../core/plc-collector\";\r\nimport {formatPlcList} from \"./formatPlcList\";\r\n\r\nexport function usePlcList(\r\n    {\r\n        props,\r\n    }: {\r\n        props: ExtractPropTypes<typeof TableProps>\r\n    }\r\n) {\r\n\r\n    const {refs} = useRefs({\r\n        collector: PlcCollector,\r\n        el: HTMLDivElement,\r\n    })\r\n\r\n    /*---------------------------------------state-------------------------------------------*/\r\n\r\n    const state = reactive({\r\n        /*表格宽度*/\r\n        tableWidth: null as null | number,\r\n    })\r\n    const {numberState} = useNumber(props, ['bodyRowHeight', 'headRowHeight'])\r\n\r\n    /*---------------------------------------computed-------------------------------------------*/\r\n\r\n    const plcData = computed(() => {\r\n        if (!state.tableWidth) {\r\n            return null\r\n        }\r\n        const {children} = refs.collector!\r\n        return formatPlcList({\r\n            plcList: children,\r\n            props,\r\n            tableWidth: state.tableWidth,\r\n        })\r\n    })\r\n\r\n    onMounted(() => {\r\n        state.tableWidth = refs.el.offsetWidth\r\n    })\r\n\r\n    return {\r\n        numberState,\r\n        plcData,\r\n    }\r\n}","import {TableHoverPart} from \"./table.utils\";\r\nimport {ref} from 'vue';\r\n\r\n/**\r\n * 绑定表头表体联动滚动\r\n * @author  韦胜健\r\n * @date    2020/12/18 16:27\r\n */\r\nexport function useBindScroll(\r\n    event: {\r\n        emit: {\r\n            onScrollLeft: (scrollLeft: number, part: TableHoverPart) => void,\r\n        },\r\n        on: {\r\n            onScrollLeft: (cb: (scrollLeft: number, part: TableHoverPart) => void) => void,\r\n        },\r\n    }\r\n) {\r\n    const hoverPart = ref(null as null | TableHoverPart)\r\n    return {\r\n        bindScroll: (part: TableHoverPart, updateLeft: (left: number, part: TableHoverPart) => void) => {\r\n            event.on.onScrollLeft((left, part) => updateLeft(left, part))\r\n            return {\r\n                onMouseenter: () => hoverPart.value = part,\r\n                onScroll: (e: Event) => hoverPart.value === part && event.emit.onScrollLeft((e as any).target.scrollLeft, part)\r\n            }\r\n        }\r\n    }\r\n}","import {SimpleObject} from \"../../../shims\";\r\nimport {TreeNodeCheckStatus} from \"../../tree/utils/tree-constant\";\r\nimport {FormValidate, FormValidateResultMap, FormValidateReturn} from \"../../form/form.validate\";\r\nimport {computed, ExtractPropTypes} from 'vue';\r\nimport {TableProps} from \"./table.utils\";\r\nimport {createKeyHandler} from \"../../../utils/createKeyHandler\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\nimport {useTree} from \"../../tree/core/useTree\";\r\n\r\nexport function useTableNode(\r\n    {\r\n        props,\r\n        emit,\r\n        getValidate,\r\n    }: {\r\n        props: ExtractPropTypes<typeof TableProps>,\r\n        getValidate: () => FormValidate,\r\n        emit: {\r\n            onExpand: (node: TableNode) => void,\r\n            onExpandChange: (keys: string[]) => void,\r\n            onCollapse: (node: TableNode) => void,\r\n            onCheck: (node: TableNode) => void,\r\n            onUncheck: (node: TableNode) => void,\r\n            onCheckChange: (keys: string[]) => void,\r\n            onClickNode: (node: TableNode) => void,\r\n            onUpdateData: (data?: SimpleObject[]) => void,\r\n            onUpdateCurrentKey: (key?: string) => void,\r\n        },\r\n    }\r\n) {\r\n    const {state, dataModel, utils, methods, current, handler} = useTree<TableNode>({\r\n        props,\r\n        keyManager: createKeyHandler('table'),\r\n        emit,\r\n        getTreeNodeByDataAdjust: node => {\r\n            node.isSummary = false\r\n            node.edit = false\r\n            node.editRow = node.data\r\n            node.validateResultMap = null\r\n            node.openEdit = function () {this.edit = true}\r\n            node.closeEdit = function () {this.edit = false}\r\n            node.enableEdit = function () {\r\n                if (this.edit) return\r\n                this.editRow = deepcopy(this.data)\r\n                this.openEdit()\r\n                this.validate()\r\n            }\r\n            node.cancelEdit = function () {this.edit && this.closeEdit()}\r\n            node.validate = async function () {\r\n                const {methods: {validate}} = getValidate()\r\n                const {validateMessage, validateResult, validateResultMap} = await validate(this.editRow)\r\n                this.validateResultMap = validateResultMap || null\r\n                return !validateMessage ? null : {\r\n                    validateMessage,\r\n                    validateResult,\r\n                    validateResultMap,\r\n                    node: this,\r\n                }\r\n            }\r\n            node.saveEdit = async function (newRow) {\r\n                if (!this.edit) return\r\n                let {data, editRow} = this\r\n                newRow = newRow || this.editRow\r\n                Object.keys({...data, ...editRow, ...newRow}).forEach(k => this.data[k] = newRow[k])\r\n            }\r\n        }\r\n    })\r\n    /*拍平的数组*/\r\n    const flatNodes = computed(() => {\r\n        let list: TableNode[] = []\r\n        if (!state.root) {\r\n            return []\r\n        }\r\n        utils.iterate({\r\n            nodes: state.root.children,\r\n            iterateChildren: (treeNode) => treeNode.expand,\r\n            handler: (treeNode) => list.push(treeNode),\r\n        },)\r\n        list = list.filter((treeNode) => !!treeNode.isVisible)\r\n        list.forEach((node, index) => node.index = index)\r\n        return list\r\n    })\r\n    const summaryNodes = computed(() => !props.summaryData ? null : props.summaryData.map((data) => utils.getTreeNodeByData({data, level: 1, parentRef: null as any, adjust: node => node.isSummary = true})))\r\n    return {state, dataModel, flatNodes, summaryNodes, methods, current, handler, utils}\r\n}\r\n\r\nexport type TableNode = {\r\n\r\n    key: string,                                        // 节点唯一标识\r\n    data: SimpleObject,                                 // 节点数据\r\n    level: number,                                      // 节点层级\r\n    parentRef: () => TableNode | null,                  // 父节点引用\r\n    selfRef: () => TableNode,                           // 自身引用\r\n    index: number,                                      // 节点索引\r\n    children?: TableNode[],                             // 子节点数组\r\n\r\n    expand: boolean,                                    // 节点是否已经展开\r\n    check: boolean,                                     // 节点是够已经选中\r\n    loading: boolean,                                   // 节点是否处于加载状态\r\n    loaded: boolean,                                    // 节点是否已经加载完毕\r\n\r\n    readonly childrenData?: SimpleObject[]              // 子节点数据数组\r\n    readonly checkStatus: TreeNodeCheckStatus,          // 节点选中状态\r\n    readonly isCheckable: boolean,                      // 节点是否可以选择\r\n    readonly isLeaf: boolean,                           // 节点是否为叶子节点\r\n    readonly isVisible: boolean,                        // 节点是否可见\r\n\r\n    /*---------------------------------------edit-------------------------------------------*/\r\n\r\n    isSummary: boolean,                                 // 当前是否为合计行数据\r\n    edit: boolean,                                      // 当前是否处于可编辑状态\r\n    editRow: SimpleObject,                              // 编辑行对象\r\n    validateResultMap: FormValidateResultMap | null,    // 当前行的校验结果\r\n\r\n    openEdit: () => void,                               // 开启编辑状态（不做任何处理）\r\n    closeEdit: () => void,                              // 关闭编辑状态（不做任何处理）\r\n    enableEdit: () => void,                             // 开启编辑状态（先判断当前是否可编辑，深度赋值一份data赋值给editRow，并且立即执行校验）\r\n    cancelEdit: () => void,                             // 取消编辑状态\r\n    validate: () => Promise<(FormValidateReturn & { node: TableNode }) | null>, // 校验数据\r\n    saveEdit: (newRow: SimpleObject) => Promise<void>,  // 保存编辑，将editRow以及newRow（请求得到的新对象）覆盖data\r\n\r\n}","import {PlainScroll} from \"../../scroll/scroll\";\r\n\r\nexport function useTableGetScroll(onVirtualMounted: (cb: (data: { scroll: PlainScroll }) => void) => void, onChange?: (scroll: PlainScroll) => void) {\r\n    let val: PlainScroll\r\n    onVirtualMounted(({scroll}) => {\r\n        val = scroll;\r\n        !!onChange && onChange(scroll)\r\n    })\r\n    return {\r\n        getScroll: () => val!\r\n    }\r\n}","import {PlainScroll} from \"../../scroll/scroll\";\r\nimport {computed, reactive} from 'vue';\r\nimport {useTableGetScroll} from \"./useTableGetScroll\";\r\n\r\nexport function useFixedShadow(event: {\r\n    on: {\r\n        onVirtualMounted: (cb: (data: { scroll: PlainScroll }) => void) => void,\r\n    }\r\n}) {\r\n    const state = reactive({\r\n        showFixedLeft: false,\r\n        showFixedRight: false,\r\n    })\r\n    const freeState = {\r\n        scroll: null as null | PlainScroll,\r\n        onScroll: () => {\r\n            const {freezeState: {wrapperScrollLeft}, state: {hostWidth, contentWidth}} = freeState.scroll!\r\n            state.showFixedLeft = contentWidth > hostWidth && wrapperScrollLeft > 0\r\n            state.showFixedRight = contentWidth > hostWidth && Math.abs(wrapperScrollLeft + hostWidth - contentWidth) > 5\r\n        }\r\n    }\r\n    useTableGetScroll(event.on.onVirtualMounted, (scroll) => {\r\n        if (!!freeState.scroll) {freeState.scroll.off.onScroll(freeState.onScroll)}\r\n        freeState.scroll = scroll\r\n        scroll.on.onScroll(freeState.onScroll)\r\n        freeState.onScroll()\r\n    })\r\n    const classes = computed(() => [\r\n        {\r\n            'plt-table-hide-fixed-left': !state.showFixedLeft,\r\n            'plt-table-hide-fixed-right': !state.showFixedRight,\r\n        }\r\n    ])\r\n    return {\r\n        fixedShadowClass: classes,\r\n    }\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport PlcCollector from './plc/core/plc-collector'\r\nimport {PltHead} from \"./core/head/head\";\r\nimport {PltBody} from \"./core/body/body\";\r\nimport './table.scss'\r\nimport {TableHoverPart, TableProps} from './core/table.utils';\r\nimport {usePlcList} from \"./plc/format/usePlcList\";\r\nimport {computed, ComputedRef, inject, onMounted, PropType} from 'vue';\r\nimport {useBindScroll} from \"./core/useBindScroll\";\r\nimport {TableNode, useTableNode} from \"./core/useTableNode\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {PlainScroll} from \"../scroll/scroll\";\r\nimport {useFixedShadow} from \"./core/useFixedShadow\";\r\nimport {StyleShape, StyleSize, useStyle} from \"../../use/useStyle\";\r\nimport {formatFormRules, FormValidate} from \"../form/form.validate\";\r\nimport {useTree} from \"../tree/core/useTree\";\r\nimport {hasClass} from \"plain-utils/dom/hasClass\";\r\n\r\nexport const PlTable = designComponent({\r\n    name: 'pl-table',\r\n    props: {\r\n        ...TableProps,\r\n    },\r\n    provideRefer: true,\r\n    emits: {\r\n        ...useTree.createEvent<TableNode>(),\r\n        onScrollLeft: (scrollLeft: number, part: TableHoverPart) => true,\r\n        onVirtualMounted: (data: { scroll: PlainScroll }) => true,\r\n\r\n        onClickRow: (node: TableNode, e: MouseEvent) => true,\r\n        onDblclickRow: (node: TableNode, e: MouseEvent) => true,\r\n        onClickCell: (node: TableNode, e: MouseEvent) => true,\r\n        onDblclickCell: (node: TableNode, e: MouseEvent) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        const {styleComputed} = useStyle({\r\n            adjust: config => {\r\n                config.shape = props.shape || StyleShape.square\r\n                config.size = props.size || StyleSize.normal\r\n                config.status = props.status\r\n            }\r\n        })\r\n        const {emit} = event\r\n        const {slots} = useSlots()\r\n        const {numberState, plcData} = usePlcList({props})\r\n        const {bindScroll} = useBindScroll(event)\r\n        const {state, flatNodes, summaryNodes, dataModel, methods, current, handler, utils} = useTableNode({props, emit, getValidate: () => formValidate.value})\r\n        const {fixedShadowClass} = useFixedShadow(event)\r\n        const formValidate = computed(() => formatFormRules(\r\n            props.rules,\r\n            !plcData.value ? undefined : plcData.value.flatPlcList.map(plc => ({\r\n                label: plc.props.title,\r\n                field: plc.props.field,\r\n                required: plc.props.required,\r\n                rules: plc.props.rules,\r\n            })))) as ComputedRef<FormValidate>\r\n\r\n        /*是否可以启用虚拟滚动*/\r\n        const disabledVirtual = computed(() => props.virtual == false || (!!plcData.value && plcData.value.notFitVirtual.length > 0))\r\n\r\n        const classes = computed(() => [\r\n            'pl-table',\r\n            `pl-table-size-${styleComputed.value.size}`,\r\n            `pl-table-shape-${styleComputed.value.shape}`,\r\n            {\r\n                'pl-table-border': props.border,\r\n                'pl-table-stripe': props.stripe,\r\n            },\r\n            ...fixedShadowClass.value,\r\n        ])\r\n\r\n        const exposeHandler = {\r\n            ...handler,\r\n            onClickRow: (e: MouseEvent, node: TableNode) => {\r\n                methods.setCurrent(node.key);\r\n                emit.onClickRow(node, e);\r\n                hasClass(e.target as HTMLElement, 'plt-cell') && emit.onClickCell(node, e);\r\n            },\r\n            onDblclickRow: (e: MouseEvent, node: TableNode) => {\r\n                emit.onDblclickRow(node, e)\r\n                hasClass(e.target as HTMLElement, 'plt-cell') && emit.onDblclickCell(node, e);\r\n            }\r\n        }\r\n\r\n        const refer = {\r\n            refs,\r\n            props,\r\n            numberState,\r\n            plcData,\r\n            bindScroll,\r\n            event,\r\n            dataModel,\r\n            state, flatNodes, summaryNodes,\r\n            disabledVirtual,\r\n            handler: exposeHandler,\r\n            ...methods,\r\n            formValidate,\r\n            current,\r\n            utils,\r\n        }\r\n\r\n        onMounted(() => {\r\n            // console.log(refer.nodeState)\r\n        })\r\n\r\n        return {\r\n            refer,\r\n            render: () => (\r\n                <div class={classes.value} ref=\"el\" v-loading={props.loading || state.root.loading}>\r\n                    <PlcCollector ref=\"collector\">{slots.default()}</PlcCollector>\r\n                    {!!plcData.value && <>\r\n                        {!props.hideHeader && <PltHead table={refer}/>}\r\n                        <PltBody table={refer}/>\r\n                    </>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const PlainTable = Object as PropType<typeof PlTable.use.class>\r\n\r\nexport function injectPlainTable() {return inject('@@pl-table') as typeof PlTable.use.class}","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlTable} from './table'\r\n\r\nexport default createComponentPlugin(PlTable)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlVirtualTable} from \"../table/virtual-table\";\r\n\r\nexport default createComponentPlugin(PlVirtualTable)","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlcProps, PlcPublicAttrs} from \"./plc.utils\";\r\nimport {TablePlcCollector} from './plc-collector';\r\nimport {Plc, TablePlc} from \"./plc.type\";\r\nimport {useNumber} from \"../../../../use/useNumber\";\r\nimport {computed, ExtractPropTypes, PropType, reactive} from 'vue';\r\nimport {useScopedSlots} from \"../../../../use/useScopedSlots\";\r\nimport {TableNode} from \"../../core/useTableNode\";\r\n\r\nexport function usePlc(props: ExtractPropTypes<typeof PlcProps>) {\r\n\r\n    const {scopedSlots} = useScopedSlots({\r\n        head: {plc: Object as PropType<TablePlc>},\r\n        default: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>},\r\n        edit: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>},\r\n        summary: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>},\r\n    }, true)\r\n    /*collector收集列信息*/\r\n    TablePlcCollector.useChild()\r\n    /*格式化props*/\r\n    const {numberState} = useNumber(props, ['order', 'width'])\r\n    /*目标props*/\r\n    const formatProps = computed(() => ({\r\n        ...props,\r\n        ...numberState,\r\n    }) as Omit<typeof props, 'order' | 'width'> & typeof numberState)\r\n    /*props的一个副本，不过如果有值的情况下，优先级比props中的值高（比config值也高）*/\r\n    const propsState = reactive(Object.keys(PlcProps).reduce((ret: any, key: string) => {\r\n        ret[key] = null\r\n        return ret\r\n    }, {}) as { [k in keyof typeof formatProps.value]: typeof formatProps.value[k] | null })\r\n\r\n    const plc: Plc = reactive({\r\n        /*PlcPublicAttrs 在 copyPlc中会深度复制一遍，这里适配类型即可*/\r\n        ...PlcPublicAttrs,\r\n        group: false,\r\n        props: formatProps,\r\n        state: propsState,\r\n        refer: () => plc,\r\n        setDurWidth: (durWidth: number) => propsState.width = Number((formatProps.value.width)) + durWidth,\r\n        scopedSlots,\r\n    })\r\n\r\n    return {\r\n        refer: plc,\r\n        render: () => (<i {...{title: props.title, field: props.field}}/>)\r\n    }\r\n}\r\n\r\nexport default designComponent({\r\n    name: 'plc',\r\n    props: {\r\n        ...PlcProps,\r\n    },\r\n    setup({props}) {\r\n        return usePlc(props)\r\n    },\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlcProps} from \"./plc.utils\";\r\nimport {usePlc} from \"./plc\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\nimport {ComponentInternalInstance, ComponentPropsOptions, ExtractPropTypes} from 'vue';\r\nimport {VNodeChild} from \"../../../../shims\";\r\nimport {Plc} from \"./plc.type\";\r\nimport {TableNode} from \"../../core/useTableNode\";\r\n\r\nexport function designPlc<_,\r\n    ExternalProps extends Readonly<ComponentPropsOptions> = {},\r\n    TargetProps = ExtractPropTypes<typeof PlcProps & ExternalProps>,\r\n    ExternalRefer = {},\r\n    >(\r\n    {\r\n        name,\r\n        standardProps,\r\n        externalProps,\r\n        setup,\r\n    }: {\r\n        name: string,\r\n        standardProps?: Partial<{ [k in keyof typeof PlcProps]: any }>,\r\n        externalProps?: ExternalProps,\r\n        setup?: (props: TargetProps, ctx: ComponentInternalInstance) => ExternalRefer,\r\n    },\r\n    render?: {\r\n        head?: (scope: { plc: Plc, props: TargetProps, refer: ExternalRefer }) => VNodeChild,\r\n        default?: (scope: { node: TableNode, plc: Plc, row: any, props: TargetProps, refer: ExternalRefer }) => VNodeChild,\r\n        summary?: (scope: { node: TableNode, plc: Plc, row: any, props: TargetProps, refer: ExternalRefer }) => VNodeChild,\r\n        edit?: (scope: { node: TableNode, plc: Plc, row: any, props: TargetProps, refer: ExternalRefer }) => VNodeChild,\r\n    },\r\n) {\r\n    const OptionProps = deepcopy(PlcProps)\r\n\r\n    Object.entries(OptionProps).map(([key, value]) => {\r\n        if (!!standardProps && !!(standardProps as any)[key]) {\r\n            Object.assign(value, (standardProps as any)[key])\r\n        }\r\n        if (!!(render as any)[key]) {\r\n            (value as any).default = function (scope: any) {\r\n                return (render as any)[key]({\r\n                    ...scope,\r\n                    refer: !scope.plc.externalRefer ? null : scope.plc.externalRefer(),\r\n                    props: scope.plc.props\r\n                })\r\n            }\r\n        }\r\n    })\r\n\r\n    return designComponent({\r\n        name,\r\n        props: {\r\n            ...OptionProps,\r\n            ...(externalProps || {}),\r\n        },\r\n        setup({props, ctx}) {\r\n            const {render, refer} = usePlc(props)\r\n            if (!!setup) {\r\n                const externalRefer = setup(props as any, ctx!)\r\n                Object.assign(refer, {externalRefer: () => externalRefer})\r\n            }\r\n            return {\r\n                refer,\r\n                render,\r\n            }\r\n        },\r\n    })\r\n}","import {designPlc} from \"../core/designPlc\";\r\nimport {PlInput} from \"../../../input/input\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-input',\r\n}, {\r\n    edit: ({row, plc}) => !plc.props.field ? null : <PlInput v-model={row[plc.props.field]}/>\r\n},)","import {designPlc} from \"../core/designPlc\";\r\nimport {PlNumber} from \"../../../number/number\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-number',\r\n}, {\r\n    edit: ({row, plc}) => !plc.props.field ? null : <PlNumber v-model={row[plc.props.field]}/>\r\n},)","import {designPlc} from \"../core/designPlc\";\r\n// import {PlDate} from \"../../../date/date\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-date',\r\n}, {\r\n    edit: ({row, plc}) => !plc.props.field ? null : <pl-date v-model={row[plc.props.field]}/>\r\n},)","import {designPlc} from \"../core/designPlc\";\r\nimport {PlColorButton} from \"../../../color-picker/color-button\";\r\nimport {PlColorPicker} from \"../../../color-picker/color-picker\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-color-picker',\r\n}, {\r\n    default: ({row, plc}) => {\r\n        return !!plc.props.field && <>\r\n            <PlColorButton color={row[plc.props.field]} style=\"margin-right:6px;\"/>\r\n            {row[plc.props.field]}\r\n        </>\r\n    },\r\n    edit: ({row, plc}) => !plc.props.field ? null : <PlColorPicker v-model={row[plc.props.field]}/>\r\n},)","import {designPlc} from \"../core/designPlc\";\r\nimport {PlToggle} from \"../../../toggle/toggle\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-toggle',\r\n    standardProps: {\r\n        addEditPadding: {default: true},\r\n    },\r\n}, {\r\n    summary: () => null,\r\n    default: ({row, plc}) => !plc.props.field ? null : <PlToggle disabled v-model={row[plc.props.field]} trueValue=\"Y\" falseValue=\"N\"/>,\r\n    edit: ({row, plc}) => !plc.props.field ? null : <PlToggle v-model={row[plc.props.field]} trueValue=\"Y\" falseValue=\"N\"/>,\r\n})","import {designPlc} from \"../core/designPlc\";\r\nimport {PlRate} from \"../../../rate/rate\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-rate',\r\n    standardProps: {\r\n        addEditPadding: {default: true},\r\n    },\r\n}, {\r\n    default: ({row, plc}) => !plc.props.field ? null : <PlRate disabled v-model={row[plc.props.field]}/>,\r\n    edit: ({row, plc}) => !plc.props.field ? null : <PlRate v-model={row[plc.props.field]}/>,\r\n})","import {designPlc} from \"../core/designPlc\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-index',\r\n    standardProps: {\r\n        autoFixedLeft: {default: true},\r\n        order: {default: -9999},\r\n        width: {default: 45},\r\n        align: {default: 'center'},\r\n        noPadding: {default: true},\r\n    },\r\n    externalProps: {\r\n        summaryText: {type: String, default: '合计'},\r\n    },\r\n}, {\r\n    head: () => '#',\r\n    default: ({node}) => node.index + 1,\r\n    summary: ({props}) => <span class=\"plc-index-summary-text\">{props.summaryText}</span>,\r\n})","import {designPlc} from \"../core/designPlc\";\r\nimport {reactive, computed, ComputedRef, PropType, onBeforeUnmount} from 'vue';\r\nimport {injectPlainTable} from \"../../table\";\r\nimport {TableNode} from \"../../core/useTableNode\";\r\nimport {SimpleObject, VNodeChild} from \"../../../../shims\";\r\nimport {Plc, TableRenderScope} from \"../core/plc.type\";\r\nimport {useScopedSlots} from \"../../../../use/useScopedSlots\";\r\nimport {PlButton} from \"../../../button/button\";\r\nimport {PlDropdown} from \"../../../dropdown/dropdown\";\r\nimport {PlDropdownMenu} from \"../../../dropdown/dropdown-menu\";\r\nimport {PlDropdownOption} from \"../../../dropdown/dropdown-option\";\r\n\r\ninterface ExpandRefer {\r\n    isExpand: (node: TableNode) => boolean,\r\n    totalSpan: ComputedRef<number>,\r\n    state: { expandKeys: Record<string, boolean> },\r\n    toggle: (node: TableNode) => void,\r\n    scopedSlots: {\r\n        expand: ((scope: TableRenderScope, vnode: VNodeChild) => VNodeChild)\r\n    },\r\n    width: () => number,\r\n    methods: {\r\n        expandAll: () => void,\r\n        collapseAll: () => void,\r\n    },\r\n}\r\n\r\nexport default designPlc(\r\n    {\r\n        name: 'plc-expand',\r\n        standardProps: {\r\n            autoFixedLeft: {default: true},\r\n            order: {default: -9997},\r\n            width: {default: 60},\r\n            align: {default: 'center'},\r\n            notFitVirtual: {default: true},\r\n            noPadding: {default: true},\r\n            renderAfterRow: {\r\n                default: ({plc, node, row}: { plc: Plc & { externalRefer: () => ExpandRefer }, node: TableNode, row: SimpleObject }) => {\r\n                    const refer = plc.externalRefer()\r\n                    if (!refer.isExpand(node)) {return null}\r\n                    return (\r\n                        <tr class=\"plt-row plt-expand-row\">\r\n                            <td class=\"plt-cell\" rowspan={1} colspan={refer.totalSpan.value}>\r\n                                <div class=\"plt-expand-body\" style={`width:${refer.width() - 20}px`}>\r\n                                    {refer.scopedSlots.expand({node, plc, row})}\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    )\r\n                }\r\n            },\r\n        },\r\n        externalProps: {\r\n            toggleOnClickRow: {type: Boolean},                      // 是否在点击行的时候触发点击动作\r\n            summaryExpand: {type: Boolean},                         // 合计行是否可以展开\r\n        },\r\n        setup: (props) => {\r\n            const table = injectPlainTable()\r\n            const {scopedSlots} = useScopedSlots({\r\n                expand: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>, row: Object as PropType<SimpleObject>},\r\n            })\r\n            const state = reactive({\r\n                expandKeys: {} as Record<string, boolean>,\r\n            })\r\n            const totalSpan = computed(() => !table.plcData.value ? 1 : table.plcData.value.flatPlcList.length)\r\n            const isExpand = (node: TableNode) => state.expandKeys[node.key]\r\n            const toggle = (node: TableNode) => isExpand(node) ? close(node) : expand(node)\r\n            const expand = (node: TableNode) => state.expandKeys[node.key] = true\r\n            const close = (node: TableNode) => state.expandKeys[node.key] = false\r\n            if (props.toggleOnClickRow) {\r\n                table.event.on.onClickCell(toggle)\r\n                onBeforeUnmount(() => table.event.off.onClickRow(toggle))\r\n            }\r\n            const methods = {\r\n                expandAll: () => {\r\n                    state.expandKeys = {}\r\n                    Object.values(table.state.nodeMap).forEach(node => expand(node))\r\n                },\r\n                collapseAll: () => {\r\n                    state.expandKeys = {}\r\n                },\r\n            }\r\n            const refer: ExpandRefer = {\r\n                state,\r\n                totalSpan,\r\n                isExpand,\r\n                toggle,\r\n                scopedSlots,\r\n                width: () => table.plcData.value!.tableWidth,\r\n                methods,\r\n            }\r\n            return refer\r\n        }\r\n    },\r\n    {\r\n        head: ({refer}) => (\r\n            <PlDropdown\r\n                {...{placement: \"bottom-center\"}}\r\n                v-slots={{\r\n                    default: () => <PlButton icon=\"el-icon-menu\" mode=\"text\"/>,\r\n                    popper: () => <PlDropdownMenu>\r\n                        <PlDropdownOption label=\"全部展开\" onClick={refer.methods.expandAll} icon=\"el-icon-zoom-full\"/>\r\n                        <PlDropdownOption label=\"全部收起\" onClick={refer.methods.collapseAll} icon=\"el-icon-zoom-scale\"/>\r\n                    </PlDropdownMenu>\r\n                }}\r\n            />\r\n        ),\r\n        default: ({refer, node, props}) => {\r\n            return (!node.isSummary || props.summaryExpand) && (<PlButton{...{\r\n                icon: 'el-icon-arrow-down',\r\n                mode: 'text',\r\n                class: [\r\n                    'plc-expand-icon',\r\n                    {'plc-expand-icon-active': refer.isExpand(node)},\r\n                ],\r\n                onClick: (e: MouseEvent) => refer.toggle(node)\r\n            }}/>)\r\n        }\r\n    },\r\n)","import {designPlc} from \"../core/designPlc\";\r\nimport {computed, onBeforeUnmount, PropType, reactive} from 'vue';\r\nimport {TableNode} from \"../../core/useTableNode\";\r\nimport {injectPlainTable} from \"../../table\";\r\nimport {CheckboxStatus} from \"../../../../utils/constant\";\r\nimport {toArray} from \"../../../../utils/toArray\";\r\nimport {PlCheckbox} from \"../../../checkbox/checkbox\";\r\nimport {PlDropdown} from \"../../../dropdown/dropdown\";\r\nimport {PlDropdownMenu} from \"../../../dropdown/dropdown-menu\";\r\nimport {PlDropdownOption} from \"../../../dropdown/dropdown-option\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-check',\r\n    standardProps: {\r\n        autoFixedLeft: {default: true},\r\n        order: {default: -9998},\r\n        width: {default: 40},\r\n        align: {default: 'center'},\r\n        noPadding: {default: true},\r\n    },\r\n    externalProps: {\r\n        toggleOnClickRow: {type: Boolean},                      // 是否在点击行的时候触发点击动作\r\n        isCheckable: Function as PropType<(node: TableNode) => boolean>,// 是否可选\r\n    },\r\n    setup(props, ctx) {\r\n        const table = injectPlainTable()\r\n        const proxy = ctx.proxy!\r\n        const state = reactive({\r\n            selected: [] as TableNode[],\r\n        })\r\n        const selectedKeys = computed(() => {\r\n            return state.selected.map(item => item.key)\r\n        })\r\n        const status = computed(() => {\r\n            if (state.selected.length === 0) return CheckboxStatus.uncheck\r\n            if (table.flatNodes.value.every((item) => selectedKeys.value.indexOf(item.key) > -1)) {\r\n                return CheckboxStatus.check\r\n            } else {\r\n                return CheckboxStatus.minus\r\n            }\r\n        })\r\n        const isCheckable = (node: TableNode) => !props.isCheckable || (props.isCheckable(node) !== false)\r\n        const isCheck = (node: TableNode) => selectedKeys.value.indexOf(node.key) > -1\r\n        const toggle = (node: TableNode) => {\r\n            const index = selectedKeys.value.indexOf(node.key)\r\n            index > -1 ? state.selected.splice(index, 1) : state.selected.push(node)\r\n        }\r\n        const handler = {\r\n            onClickCheckbox: (node: TableNode) => isCheckable(node) && toggle(node),\r\n        }\r\n        const methods = {\r\n            getSelected: () => state.selected,\r\n            clearAll: () => state.selected = [],\r\n            checkAll: () => {\r\n                const availableSelectItems = table.flatNodes.value\r\n                    .filter(isCheckable)\r\n                    .map((item: TableNode) => item)\r\n                if (state.selected.length === availableSelectItems.length) {\r\n                    state.selected = []\r\n                } else {\r\n                    state.selected = availableSelectItems\r\n                }\r\n            },\r\n            reverse: () => {\r\n                state.selected = table.flatNodes.value\r\n                    .filter(node => isCheckable(node) && selectedKeys.value.indexOf(node.key) === -1)\r\n            },\r\n            addSelected: (key: string | string[]) => {\r\n                const keys = toArray(key)\r\n                const nodes = keys.map(k => table.state.nodeMap[k]).filter(Boolean)\r\n                state.selected = [...state.selected, ...nodes]\r\n            },\r\n            removeSelected: (key: string | string[]) => {\r\n                const keys = toArray(key)\r\n                state.selected = state.selected.filter(node => keys.indexOf(node.key) === -1)\r\n            },\r\n        }\r\n        if (props.toggleOnClickRow) {\r\n            table.event.on.onClickCell(handler.onClickCheckbox)\r\n            onBeforeUnmount(() => table.event.off.onClickRow(handler.onClickCheckbox))\r\n        }\r\n        Object.assign(proxy, methods)\r\n        return {\r\n            state,\r\n            selectedKeys,\r\n            status,\r\n            handler,\r\n            isCheck,\r\n            isCheckable,\r\n            methods,\r\n        }\r\n    },\r\n}, {\r\n    summary: () => null,\r\n    default: ({refer, node}) => <PlCheckbox\r\n        customReadonly\r\n        modelValue={refer.isCheck(node)}\r\n        onClick={() => refer.handler.onClickCheckbox(node)}\r\n        disabled={!refer.isCheckable(node)}\r\n    />,\r\n    head: ({refer}) => (\r\n        <PlDropdown\r\n            {...{placement: 'bottom-center'}}\r\n            v-slots={{\r\n                default: () => <PlCheckbox checkStatus={refer.status.value}/>,\r\n                popper: () => <PlDropdownMenu>\r\n                    <PlDropdownOption label=\"全部选中\" icon=\"el-icon-check-bold\" onClick={refer.methods.checkAll}/>\r\n                    <PlDropdownOption label=\"全部取消\" icon=\"el-icon-close-bold\" onClick={refer.methods.clearAll}/>\r\n                    <PlDropdownOption label=\"全部反选\" icon=\"el-icon-refresh\" onClick={refer.methods.reverse}/>\r\n                </PlDropdownMenu>\r\n            }}\r\n        />\r\n    )\r\n})","/**\r\n * 获取拖拽的rowEl对象\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:55\r\n */\r\nimport {hasClass} from \"plain-utils/dom/hasClass\";\r\n\r\nexport function getRowEl(e: MouseEvent, rowClass: string): HTMLElement {\r\n    let rowEl = e.target as HTMLElement\r\n    while (!!rowEl && !hasClass(rowEl, rowClass)) {\r\n        rowEl = rowEl.parentNode as HTMLElement\r\n    }\r\n    if (!rowEl) {\r\n        throw new Error(`can't find item element!`)\r\n    }\r\n    return rowEl\r\n}\r\n\r\n/**\r\n * 获取可以滚动的父组件\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:50\r\n */\r\nexport function getScrollParent(el: HTMLElement): HTMLElement {\r\n    while (!!el && el.scrollHeight <= el.offsetHeight) {\r\n        el = el.parentNode as HTMLElement\r\n    }\r\n    return el\r\n}\r\n\r\n/**\r\n * 获取行el对象的所有兄弟节点\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:57\r\n */\r\nexport function getRowElList(el: HTMLElement, rowClass: string): HTMLElement[] {\r\n    return Array.from(el.parentNode!.querySelectorAll(`.${rowClass}`))\r\n}","/**\r\n * 拖拽排序实现（非虚拟滚动）\r\n * @author  韦胜健\r\n * @date    2020/8/21 10:07\r\n */\r\nimport {UseListDraggierType} from \"./index\";\r\nimport {getRowEl, getRowElList, getScrollParent} from \"./utils\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {nextTick} from 'vue';\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport {useAutoScroll} from \"../../../../../../use/useAutoScroll\";\r\n\r\nexport const useListDraggierNotVirtual: UseListDraggierType = ({rowClass, onChange, getScroll}) => {\r\n\r\n    const autoScroll = useAutoScroll({vertical: true, getScroll,})\r\n\r\n    const state = {\r\n        startIndex: 0,                              // 拖拽的dragEl在数组中的索引\r\n        endIndex: 0,                                // 拖拽结束的时候，dragEl应该所在的索引位置\r\n        startClientY: 0,                            // 拖拽dragEl起始的时候，e.clientY，与mousemove的时候的e.clientY做差值，以便得到dragEl的偏移距离\r\n        moveClientY: 0,                             // 拖拽move的时候，e.clientY\r\n        dragEl: null as null | HTMLElement,         // 拖拽的时候的dragEl的dom对象\r\n        dragHeight: 0,                              // 拖拽的时候的dragEl高度，当在下方移动时，下方需要移动的rowEl都应该往上偏移 dragHeight距离，在上方移动时，上方需要移动的rowEl需要往下偏移 dragHeight距离\r\n        dragOffsetTop: 0,                           // dragEl拖拽开始的时候，距离滚动顶部距离\r\n        scrollParent: null as null | HTMLElement,   // 可以滚动的父元素\r\n        dragStartScrollTop: 0,                      // 拖拽开始的时候，scrollParent 的scrollTop位置\r\n        dragScrollTop: 0,                           // scrollParent 的 scroll偏移距离\r\n        rowList: [] as HTMLElement[],               // dragEl的兄弟节点，包含dragEl\r\n    }\r\n    const utils = {\r\n        /**\r\n         * 根据startIndex以及endIndex，设置这个index范围内的row的dom对象进行上下平移；\r\n         * 如果startIndex大于endIndex，则范围内的row对象，除了startIndex，其他的应该向上平移；\r\n         * 反之，如果startIndex小于endIndex，则范围内的row对象，除了startIndex，其他的应该向下平移；\r\n         *\r\n         * @author  韦胜健\r\n         * @date    2020/8/19 21:09\r\n         */\r\n        refresh() {\r\n            const {dragHeight, startIndex, endIndex} = state\r\n            // 是否为向下移动\r\n            const movedown = startIndex < endIndex\r\n            const [start, end] = movedown ? [startIndex, endIndex] : [endIndex, startIndex]\r\n\r\n            state.rowList.forEach((el, index) => {\r\n                if (index < start || index > end) {\r\n                    el.style.transform = ``\r\n                    return;\r\n                }\r\n                if (el === state.dragEl) {\r\n                    return\r\n                }\r\n                el.style.transform = `translateY(${movedown ? '-' : ''}${dragHeight}px)`\r\n            })\r\n        },\r\n        /**\r\n         * 刷新dragEl的位置，同时刷新兄弟节点的位置\r\n         * @author  韦胜健\r\n         * @date    2020/8/20 23:29\r\n         */\r\n        refreshDragElPosition() {\r\n            state.dragEl!.style.transform = `translateY(${state.moveClientY - state.startClientY + state.dragScrollTop}px)`\r\n            const top = (state.moveClientY - state.startClientY) + state.dragScrollTop + state.dragOffsetTop\r\n            state.endIndex = Math.ceil(Math.max(0, top / state.dragHeight - 0.5))\r\n\r\n            utils.refresh()\r\n        },\r\n    }\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n            disabledUserSelect()\r\n\r\n            state.startClientY = e.clientY\r\n            state.dragEl = getRowEl(e, rowClass)\r\n            state.dragHeight = state.dragEl.offsetHeight\r\n            state.dragOffsetTop = state.dragEl.offsetTop\r\n            state.rowList = getRowElList(state.dragEl!, rowClass)\r\n            state.startIndex = state.rowList.indexOf(state.dragEl)\r\n            state.scrollParent = getScrollParent(state.dragEl)\r\n            state.dragStartScrollTop = state.scrollParent!.scrollTop\r\n\r\n            state.scrollParent!.addEventListener('scroll', handler.parentScroll)\r\n            document.addEventListener('mousemove', handler.mousemove)\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n\r\n            state.rowList.forEach((rowEl: any) => {\r\n                // 如果是当前拖拽的el，则不监听事件，不做任何处理\r\n                if (rowEl === state.dragEl) {\r\n                    return\r\n                }\r\n                // 兄弟节点自动进行上下平移\r\n                rowEl.style.transition = `transform 300ms cubic-bezier(0.23, 1, 0.32, 1)`\r\n            })\r\n\r\n            autoScroll.showHover()\r\n        },\r\n        mousemove: (e: MouseEvent) => {\r\n            state.moveClientY = e.clientY\r\n            utils.refreshDragElPosition()\r\n        },\r\n        mouseup: async () => {\r\n\r\n            autoScroll.hideHover()\r\n\r\n            await nextTick()\r\n            enableUserSelect()\r\n\r\n            state.dragEl!.style.transform = ''\r\n            document.removeEventListener('mousemove', handler.mousemove)\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n            state.scrollParent!.removeEventListener('scroll', handler.parentScroll)\r\n\r\n            state.rowList.forEach((rowEl: any) => {\r\n                if (rowEl === state.dragEl) {\r\n                    return\r\n                }\r\n                rowEl.style.transition = ''\r\n                rowEl.style.transform = ''\r\n            })\r\n\r\n            state.startClientY = 0\r\n            state.moveClientY = 0\r\n            state.dragEl = null\r\n            state.dragHeight = 0\r\n            state.dragOffsetTop = 0\r\n            state.scrollParent = null\r\n            state.dragStartScrollTop = 0\r\n            state.dragScrollTop = 0\r\n            state.rowList = []\r\n            await onChange(state.startIndex, state.endIndex)\r\n            state.startIndex = 0\r\n            state.endIndex = 0\r\n        },\r\n        parentScroll: () => {\r\n            state.dragScrollTop = state.scrollParent!.scrollTop - state.dragStartScrollTop\r\n            utils.refreshDragElPosition()\r\n        }\r\n    }\r\n\r\n    return {\r\n        handler,\r\n    }\r\n}","/**\r\n * 拖拽排序组合函数，适用于虚拟滚动版本的\r\n * @author  韦胜健\r\n * @date    2020/8/21 10:27\r\n */\r\nimport {UseListDraggierType} from \"./index\";\r\nimport {getRowEl, getScrollParent} from \"./utils\";\r\nimport {useAutoScroll} from \"../../../../../../use/useAutoScroll\";\r\n\r\nexport const useListDraggierWithVirtual: UseListDraggierType = (\r\n    {\r\n        rowClass,\r\n        onChange,\r\n        getScroll,\r\n    }) => {\r\n\r\n    const dragElHeight = 3\r\n\r\n    const state = {\r\n        startDragIndex: 0,                                              // 开始拖拽的时候，的行索引\r\n        endDragIndex: 0,                                                // 拖拽结束的时候，应该移动到的索引位置\r\n\r\n        startDragOffsetTop: 0,                                          // 开始拖拽的时候，dragEl距离top值（距离可以滚动的父组件的顶部距离）\r\n        startDragHeight: 0,                                             // 拖拽开始的时候，dragEl的高度，虚拟滚动情况下，认为所有row的高度都是一致的，所以这个相当于行高\r\n\r\n        startClientY: 0,                                                // 拖拽开始的时候鼠标位置\r\n        moveClientY: 0,                                                 // 拖拽移动的时候鼠标的位置\r\n\r\n        scrollParent: null as null | HTMLElement,                       // 可以滚动的父元素\r\n        startScrollTopOfScrollParent: 0,                                // 拖拽开始的时候，滚动父元素的滚动距离 \r\n        scrollTopOfScrollParent: 0,                              // 拖拽开始的时候，滚动父元素的滚动差值\r\n        scrollParentBoundingRect: {\r\n            top: 0,                                                     // 滚动父元素在页面上的top值\r\n            left: 0,                                                    // 滚动父元素在页面上的left值\r\n            width: 0,                                                   // 滚动父元素在页面上的显示宽度\r\n            height: 0,                                                  // 滚动父元素在页面上的显示高度\r\n        },\r\n\r\n        dragEl: null as null | HTMLElement,                             // 拖拽的时候，显示的标志元素\r\n    }\r\n\r\n    const autoScroll = useAutoScroll({getScroll, vertical: true,})\r\n\r\n    const utils = {\r\n        refresh() {\r\n            /*拖拽元素在scrollParent中的top值*/\r\n            const top = state.startDragOffsetTop + (state.moveClientY - state.startClientY) + (state.scrollTopOfScrollParent - state.startScrollTopOfScrollParent) + state.startDragHeight / 2\r\n\r\n            /*如果top处于目标index的上方，则index为目标index，在下方则为index+1*/\r\n            let endDragIndex = top / state.startDragHeight\r\n            const external = endDragIndex % 1\r\n            if (external > 0.5) {\r\n                endDragIndex = Math.ceil(endDragIndex)\r\n            } else {\r\n                endDragIndex = Math.floor(endDragIndex)\r\n            }\r\n\r\n            /*刷新指示器的位置*/\r\n            state.dragEl!.style.transform = `translateY(${(endDragIndex) * state.startDragHeight - dragElHeight - state.scrollTopOfScrollParent + state.scrollParentBoundingRect.top}px)`\r\n\r\n            if (endDragIndex === state.startDragIndex || endDragIndex === state.startDragIndex + 1) {\r\n                state.endDragIndex = state.startDragIndex\r\n            } else if (endDragIndex > state.startDragIndex) {\r\n                state.endDragIndex = endDragIndex - 1\r\n            } else {\r\n                state.endDragIndex = endDragIndex\r\n            }\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n            const dragEl = getRowEl(e, rowClass)\r\n            // 每一行dom对象应该加上一个vid属性，表示这一行为第几个行，否则虚拟滚动情况下，无法知道是哪一行\r\n            const vid = Number(dragEl.getAttribute('vid'))\r\n\r\n            // 虚拟滚动下，每一行的行高一致\r\n            const {offsetHeight} = dragEl\r\n\r\n            state.startDragIndex = vid\r\n            state.startDragHeight = offsetHeight\r\n            state.startDragOffsetTop = state.startDragIndex * offsetHeight\r\n            state.startClientY = e.clientY\r\n            state.moveClientY = e.clientY\r\n\r\n            // 初始化scrollParent\r\n            const scrollParent = getScrollParent(dragEl)\r\n            state.scrollParent = scrollParent\r\n            state.startScrollTopOfScrollParent = scrollParent!.scrollTop\r\n            state.scrollTopOfScrollParent = scrollParent!.scrollTop\r\n            const {top, left, height, width} = state.scrollParent!.parentElement!.getBoundingClientRect()\r\n            state.scrollParentBoundingRect = {top, left, height, width}\r\n\r\n            // 初始化监听事件\r\n            scrollParent!.addEventListener('scroll', handler.scroll)\r\n            document.addEventListener('mousemove', handler.mousemove)\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n\r\n            //\r\n            state.dragEl = document.createElement('div')\r\n            document.body.appendChild(state.dragEl)\r\n            state.dragEl.style.position = 'fixed'\r\n            state.dragEl.style.left = `${state.scrollParentBoundingRect.left}px`\r\n            state.dragEl.style.height = `${dragElHeight}px`\r\n            state.dragEl.style.width = `0`\r\n            state.dragEl.style.top = '0'\r\n            state.dragEl.style.backgroundColor = '#12b4a5'\r\n            utils.refresh()\r\n\r\n            setTimeout(() => {\r\n                state.dragEl!.style.width = `${state.scrollParentBoundingRect.width}px`\r\n                autoScroll.showHover()\r\n            }, 23)\r\n        },\r\n        scroll: () => {\r\n            state.scrollTopOfScrollParent = state.scrollParent!.scrollTop\r\n            utils.refresh()\r\n        },\r\n        mousemove: (e: MouseEvent) => {\r\n            if (e.clientY < state.scrollParentBoundingRect.top) {\r\n                return\r\n            }\r\n            if (e.clientY > state.scrollParentBoundingRect.top + state.scrollParentBoundingRect.height - 10) {\r\n                return\r\n            }\r\n            state.moveClientY = e.clientY\r\n            utils.refresh()\r\n        },\r\n        mouseup: (e: MouseEvent) => {\r\n\r\n            autoScroll.hideHover()\r\n\r\n            document.removeEventListener('mousemove', handler.mousemove)\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n            state.scrollParent!.removeEventListener('scroll', handler.scroll)\r\n\r\n            const {startDragIndex, endDragIndex} = state\r\n\r\n            onChange(startDragIndex, endDragIndex)\r\n\r\n            state.startDragIndex = 0\r\n            state.endDragIndex = 0\r\n            state.startDragOffsetTop = 0\r\n            state.startDragHeight = 0\r\n            state.startClientY = 0\r\n            state.moveClientY = 0\r\n            state.scrollParent = null\r\n            state.startScrollTopOfScrollParent = 0\r\n            state.scrollTopOfScrollParent = 0\r\n            state.scrollParentBoundingRect = {\r\n                top: 0,\r\n                left: 0,\r\n                width: 0,\r\n                height: 0,\r\n            }\r\n            state.dragEl!.parentNode!.removeChild(state.dragEl!)\r\n            state.dragEl = null\r\n\r\n        }\r\n    }\r\n\r\n    return {\r\n        handler\r\n    }\r\n\r\n}","/**\r\n * 拖拽排序实现函数的类型\r\n * @author  韦胜健\r\n * @date    2020/8/21 10:07\r\n */\r\nimport {useListDraggierNotVirtual} from \"./use-list-draggier\";\r\nimport {useListDraggierWithVirtual} from \"./use-list-draggier.virtual\";\r\nimport {PlainScroll} from \"../../../../../scroll/scroll\";\r\n\r\nexport interface UseListDraggierType {\r\n    (option: {\r\n        rowClass: string,                                                               // 行的class，要确保只有行所在的dom对象有这个class，其子节点是没有这个class的\r\n        onChange: (start: number, end: number) => void | Promise<void>,                 // 拖拽导致排序变化动作\r\n        virtual?: boolean,                                                              // 是否为虚拟滚动\r\n        getScroll: () => PlainScroll,\r\n    }): {\r\n        handler: {\r\n            mousedown: (e: MouseEvent) => void,\r\n        }\r\n    }\r\n}\r\n\r\nexport const useListDraggier: UseListDraggierType = (option) => {\r\n    if (option.virtual) {\r\n        return useListDraggierWithVirtual(option)\r\n    } else {\r\n        return useListDraggierNotVirtual(option)\r\n    }\r\n}","import {designPlc} from \"../../core/designPlc\";\r\nimport {injectPlainTable} from \"../../../table\";\r\nimport {computed} from 'vue';\r\nimport {useListDraggier} from \"./core\";\r\nimport {ie} from \"plain-utils/utils/ie\";\r\nimport {useTableGetScroll} from \"../../../core/useTableGetScroll\";\r\nimport {PlButton} from \"../../../../button/button\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-draggier',\r\n    standardProps: {\r\n        autoFixedLeft: {default: true},\r\n        order: {default: -9998},\r\n        width: {default: 40},\r\n        align: {default: 'center'},\r\n        noPadding: {type: Boolean, default: true},\r\n    },\r\n    setup: (props) => {\r\n        const {disabledVirtual, dataModel, event} = injectPlainTable()\r\n        const {getScroll} = useTableGetScroll(event.on.onVirtualMounted)\r\n        const handler = computed(() => useListDraggier({\r\n            virtual: !disabledVirtual.value && !ie,\r\n            // virtual: true,\r\n            rowClass: 'plt-row',\r\n            getScroll,\r\n            onChange: async (start, end) => {\r\n                dataModel.value!.splice(end, 0, dataModel.value!.splice(start, 1)[0])\r\n            },\r\n        }))\r\n        return {\r\n            onMousedown: handler.value.handler.mousedown,\r\n            onClick: (e: MouseEvent) => {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n            },\r\n        }\r\n    }\r\n}, {\r\n    default: ({refer}) => <PlButton\r\n        icon=\"el-icon-list\"\r\n        mode=\"text\"\r\n        class=\"plc-draggier-handler\"\r\n        {...refer}\r\n    />\r\n})","import {TableNode} from \"../../../core/useTableNode\";\r\nimport {TreeDropType} from \"../../../../tree/utils/tree-constant\";\r\nimport {useAutoScroll} from \"../../../../../use/useAutoScroll\";\r\nimport {PlainScroll} from \"../../../../scroll/scroll\";\r\nimport {StyleProperties} from \"../../../../../shims\";\r\nimport {getRowEl, getScrollParent} from '../draggier/core/utils';\r\n\r\nconst indicatorSize = 3;\r\n\r\nexport function usePlcTreeDraggier(\r\n    {\r\n        rowClass,\r\n        dragClass,\r\n        flatDataList,\r\n        levelPadding,\r\n        props,\r\n        methods,\r\n        getScroll,\r\n        getParents,\r\n    }: {\r\n        rowClass: string,                                                           // 行class\r\n        dragClass?: string,                                                         // 拖拽元素的class\r\n        flatDataList: { value: TableNode[] },                                       // 拍平的数据\r\n        levelPadding: number,\r\n        props: {\r\n            rowDraggable?: boolean,\r\n            allowRowDraggable?: (node: TableNode) => boolean,\r\n            allowRowDroppable?: (start: TableNode, move: TableNode, type: TreeDropType) => boolean,\r\n        },\r\n        methods: {\r\n            expand: (node: TableNode) => void,                      // 展开某个元素\r\n            refreshCheckStatus: () => void,                 // 刷新所有元素的选中状态\r\n            removeSelf: (node: TableNode) => void,\r\n            previousSibling: (self: TableNode, target: TableNode) => void,\r\n            nextSibling: (self: TableNode, target: TableNode) => void,\r\n            unshiftChild: (self: TableNode, target: TableNode) => void,\r\n        },\r\n        getScroll: () => PlainScroll,\r\n        getParents: (node: TableNode) => TableNode[]\r\n    }\r\n) {\r\n\r\n    const state = {\r\n\r\n        startNode: null as null | TableNode,\r\n        moveNode: null as null | TableNode,\r\n\r\n        startScrollTop: 0,\r\n        moveScrollTop: 0,\r\n\r\n        startClientY: 0,\r\n        moveClientY: 0,\r\n\r\n        rowHeight: 0,\r\n        scrollParent: null as null | HTMLElement,\r\n        rowEl: null as null | HTMLElement,\r\n        scrollParentRect: {\r\n            top: 0,\r\n            left: 0,\r\n            width: 0,\r\n            height: 0,\r\n        },\r\n        indicator: null as null | HTMLElement,\r\n        dragNodeBaseLeft: 0,\r\n\r\n        dropType: TreeDropType.inner,\r\n        droppable: false,\r\n    }\r\n\r\n    const autoScroll = useAutoScroll({vertical: true, getScroll,})\r\n\r\n    const utils = {\r\n        allowDrag: (node: TableNode) => {\r\n            return !props.allowRowDraggable || props.allowRowDraggable(node) !== false\r\n        },\r\n        allowDrop: (startNode: TableNode, moveNode: TableNode, dropType: TreeDropType) => {\r\n            return !props.allowRowDroppable || props.allowRowDroppable(startNode, moveNode, dropType) !== false\r\n        },\r\n        getIndicatorStyles(moveNode: TableNode, droppable: boolean, dropType: TreeDropType) {\r\n\r\n            const styles: StyleProperties = {}\r\n\r\n            let top = moveNode.index * state.rowHeight + state.scrollParentRect.top - (state.moveScrollTop)\r\n            let paddingLeft = (moveNode.level - state.startNode!.level) * levelPadding\r\n\r\n            styles.top = `${dropType === TreeDropType.next ? top + state.rowHeight - indicatorSize : top}px`\r\n            styles.left = `${state.dragNodeBaseLeft + paddingLeft}px`\r\n            styles.width = `${state.scrollParentRect.width - (state.dragNodeBaseLeft - state.scrollParentRect.left) - paddingLeft}px`\r\n            styles.height = `${dropType === TreeDropType.inner ? state.rowHeight : indicatorSize}px`\r\n            styles.backgroundColor = droppable ? '#12b4a5' : '#F38585'\r\n            styles.opacity = dropType === TreeDropType.inner ? '0.15' : ''\r\n\r\n            return styles\r\n        },\r\n        refresh() {\r\n            const top = state.startClientY - state.scrollParentRect.top + (state.moveScrollTop) + (state.moveClientY - state.startClientY)\r\n            let targetIndex = top / state.rowHeight\r\n            const external = targetIndex % 1\r\n            targetIndex = Math.floor(targetIndex)\r\n            let dropType: TreeDropType = external < 0.3 ? TreeDropType.prev : external > 0.7 ? TreeDropType.next : TreeDropType.inner\r\n            const moveNode = flatDataList.value[targetIndex]\r\n            if (!moveNode) {\r\n                return\r\n            }\r\n\r\n            let droppable = true\r\n\r\n            state.moveNode = moveNode\r\n            const parents = getParents(state.moveNode)\r\n            parents.push(state.moveNode)\r\n            if (parents.indexOf(state.startNode!) > -1) {\r\n                droppable = false\r\n            }\r\n            if (!utils.allowDrop(state.startNode!, moveNode, dropType)) {\r\n                droppable = false\r\n            }\r\n\r\n            state.dropType = dropType\r\n            state.droppable = droppable\r\n\r\n            Object.assign(state.indicator!.style, utils.getIndicatorStyles(moveNode, droppable, dropType))\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n            state.startClientY = state.moveClientY = e.clientY\r\n\r\n            state.rowEl = getRowEl(e, rowClass)\r\n            state.rowHeight = state.rowEl.offsetHeight\r\n            const vid = Number(state.rowEl.getAttribute('vid'))\r\n            state.moveNode = state.startNode = flatDataList.value[vid]\r\n\r\n            if (!utils.allowDrag(state.startNode)) {\r\n                return\r\n            }\r\n\r\n            const dragNode = state.rowEl.querySelector(`.${dragClass}`)!\r\n            state.dragNodeBaseLeft = Math.ceil(dragNode.getBoundingClientRect()!.left)\r\n\r\n            state.scrollParent = getScrollParent(state.rowEl)\r\n            state.startScrollTop = state.moveScrollTop = state.scrollParent.scrollTop\r\n            const {top, left, height, width} = (state.scrollParent.parentNode as HTMLElement).getBoundingClientRect()\r\n            state.scrollParentRect = {top, left, height, width}\r\n\r\n            state.indicator = document.createElement('div')\r\n            state.indicator.style.position = 'fixed'\r\n            state.indicator.style.pointerEvents = 'none'\r\n            state.indicator.style.height = `${indicatorSize}px`\r\n            state.indicator.style.width = `${state.scrollParentRect.width}px`\r\n            state.indicator.style.left = `${state.scrollParentRect.left}px`\r\n            state.indicator.style.backgroundColor = '#12b4a5'\r\n            document.body.appendChild(state.indicator)\r\n\r\n            state.scrollParent.addEventListener('scroll', handler.scroll)\r\n            document.addEventListener('mousemove', handler.mousemove)\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n\r\n            utils.refresh()\r\n            autoScroll.showHover()\r\n        },\r\n        scroll() {\r\n            state.moveScrollTop = state.scrollParent!.scrollTop\r\n            utils.refresh()\r\n        },\r\n        /**\r\n         * 在dragover中判断clientX以及clientY，如果这两个值没有变化，就不往下执行，节省性能\r\n         * @author  韦胜健\r\n         * @date    2020/8/25 22:22\r\n         */\r\n        mousemove: (e: MouseEvent) => {\r\n            const {top, height} = state.scrollParentRect\r\n            if (e.clientY < top || e.clientY > top + height) {\r\n                return;\r\n            }\r\n            state.moveClientY = e.clientY\r\n            utils.refresh()\r\n        },\r\n        mouseup: () => {\r\n\r\n            autoScroll.hideHover()\r\n\r\n            const {startNode, moveNode, dropType, droppable} = state\r\n\r\n            state.scrollParent!.removeEventListener('scroll', handler.scroll)\r\n            document.removeEventListener('mousemove', handler.mousemove)\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n\r\n            state.indicator!.parentNode!.removeChild(state.indicator!)\r\n            state.startClientY = state.moveClientY = 0\r\n            state.rowEl = null\r\n            state.rowHeight = 0\r\n            state.moveNode = null\r\n            state.dragNodeBaseLeft = 0\r\n            state.scrollParent = null\r\n            state.startScrollTop = 0\r\n            state.scrollParentRect = {top: 0, left: 0, height: 0, width: 0}\r\n\r\n            if (!droppable) {\r\n                return\r\n            }\r\n\r\n            methods.removeSelf(startNode!)\r\n\r\n            switch (dropType) {\r\n                case TreeDropType.prev:\r\n                    methods.previousSibling(moveNode!, startNode!)\r\n                    break\r\n                case TreeDropType.inner:\r\n                    methods.unshiftChild(moveNode!, startNode!)\r\n                    methods.expand(moveNode!)\r\n                    break\r\n                case TreeDropType.next:\r\n                    methods.nextSibling(moveNode!, startNode!)\r\n                    break\r\n            }\r\n            methods.refreshCheckStatus()\r\n        }\r\n    }\r\n\r\n    return {\r\n        utils,\r\n        handler: {onMousedown: handler.mousedown}\r\n    }\r\n}","import {designPlc} from \"../../core/designPlc\";\r\nimport {computed, onBeforeUnmount, onMounted, PropType, watch} from 'vue';\r\nimport {TableNode} from \"../../../core/useTableNode\";\r\nimport {TreeDropType} from \"../../../../tree/utils/tree-constant\";\r\nimport {useScopedSlots} from \"../../../../../use/useScopedSlots\";\r\nimport {Plc} from \"../../core/plc.type\";\r\nimport {SimpleFunction, SimpleObject} from \"../../../../../shims\";\r\nimport {injectPlainTable} from \"../../../table\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useTableGetScroll} from \"../../../core/useTableGetScroll\";\r\nimport {usePlcTreeDraggier} from \"./plc-tree.draggier\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {PlButton} from \"../../../../button/button\";\r\nimport {StyleSize} from \"../../../../../use/useStyle\";\r\nimport {createEventListener} from \"../../../../../utils/createEventListener\";\r\nimport {PlDropdown} from \"../../../../dropdown/dropdown\";\r\nimport {PlDropdownMenu} from \"../../../../dropdown/dropdown-menu\";\r\nimport {PlDropdownOption} from \"../../../../dropdown/dropdown-option\";\r\nimport {PlCheckbox} from \"../../../../checkbox/checkbox\";\r\n\r\n/*只显示展开收起按钮的时候的基本宽度，不算content宽度*/\r\nconst size = 30\r\n\r\nexport default designPlc({\r\n    name: 'plc-tree',\r\n    standardProps: {\r\n        autoFixedLeft: {default: true},\r\n        order: {default: -9996},\r\n        width: {default: size},\r\n        noPadding: {default: true},\r\n        bodyCls: {default: 'plc-tree-node'},\r\n    },\r\n    externalProps: {\r\n        contentWidth: {type: Number, default: 100},                         // 显示的内容宽度\r\n        rowDraggable: {type: Boolean},                                      // 行是否可以拖拽排序\r\n        allowRowDraggable: {type: Function as PropType<(node: TableNode) => boolean>},// 行是否可以被拖拽放置到其他位置\r\n        allowRowDroppable: {type: Function as PropType<(startNode: TableNode, moveNode: TableNode, dropType: TreeDropType) => boolean>},// 行是否可以被放置（放到子节点中，放到前面，放到后面）\r\n\r\n        folderCollapseIcon: {type: String, default: 'el-icon-folder-s'},\r\n        folderExpandIcon: {type: String, default: 'el-icon-folder-opened'},\r\n        leafIcon: {type: String, default: 'el-icon-document'},\r\n    },\r\n    setup(props, ctx) {\r\n\r\n        const plc = ctx.proxy as any as Plc;\r\n        const table = injectPlainTable()\r\n        const {getScroll} = useTableGetScroll(table.event.on.onVirtualMounted)\r\n\r\n        const {scopedSlots} = useScopedSlots({content: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>, row: Object as PropType<SimpleObject>},}, true)\r\n\r\n        const maxShowLevel = computed(() => {\r\n            let ret = 0\r\n            table.flatNodes.value.forEach(node => node.level > ret ? (ret = node.level) : null)\r\n            return ret\r\n        })\r\n        /**\r\n         * 动态列宽，当展开收起的时候，自动更新列宽\r\n         * @author  韦胜健\r\n         * @date    2020/8/24 9:35\r\n         */\r\n        const width = computed(() => {\r\n            // 展开按钮的基本宽度\r\n            let expand = size\r\n            // 内容宽度，如果有content插槽，则加上props.contentWidth\r\n            let content = scopedSlots.content.isExist() ? props.contentWidth : 0\r\n            // 如果显示复选框，则宽度再加上size\r\n            let check = table.props.showCheckbox ? size : 0\r\n            // 如果显示拖拽排序按钮，则宽度再加上size\r\n            let draggable = props.rowDraggable ? size : 0\r\n\r\n            // 每一层都增加一个左边距 (expand + check) * level，所以每一层都加上这个宽度\r\n            const level = maxShowLevel.value\r\n            // 最后最大层的宽度\r\n            return expand * (level - 1) + (content + expand + check + draggable)\r\n        })\r\n\r\n        const methods = {\r\n            ...table.expandMethods,\r\n            ...table.checkMethods,\r\n            ...table.treeNodeMethods,\r\n        }\r\n\r\n        const handler = {\r\n            ...table.handler,\r\n        }\r\n\r\n        const draggier = usePlcTreeDraggier({\r\n            rowClass: 'plt-row',\r\n            dragClass: 'plc-tree-node-drag-btn',\r\n            levelPadding: size,\r\n            flatDataList: table.flatNodes,\r\n            props,\r\n            getScroll,\r\n            getParents: table.utils.getParents,\r\n            methods: {\r\n                ...methods,\r\n                refreshCheckStatus: async () => {\r\n                    await delay(120)\r\n                    table.flatNodes.value.forEach(methods.refreshCheckStatus)\r\n                },\r\n            },\r\n        })\r\n\r\n        const utils = {\r\n            getExpanderAttrs: (node: TableNode) => {\r\n                return {\r\n                    style: {marginLeft: unit((node.level - 1) * size)} as any,\r\n                }\r\n            },\r\n        }\r\n\r\n        onMounted(() => {\r\n            watch(() => maxShowLevel.value, () => {\r\n                plc.state.width = width.value\r\n            }, {immediate: true})\r\n        })\r\n\r\n        Object.assign(ctx.proxy, methods)\r\n\r\n        let unmountListener = [] as SimpleFunction[]\r\n        if (table.props.expandOnClickNode) {\r\n            const listener = (node: TableNode) => methods.toggleExpand(node)\r\n            table.event.on.onClickCell(listener)\r\n            unmountListener.push(listener)\r\n        }\r\n        if (table.props.checkOnClickNode) {\r\n            const listener = (node: TableNode) => methods.toggleCheck(node)\r\n            table.event.on.onClickCell(listener)\r\n            unmountListener.push(listener)\r\n        }\r\n        if (unmountListener.length > 0) {\r\n            onBeforeUnmount(() => unmountListener.forEach(listener => table.event.off.onClickCell(listener)))\r\n        }\r\n\r\n        return {\r\n            tableProps: table.props,\r\n            props,\r\n            scopedSlots,\r\n            handler,\r\n            utils,\r\n            draggier,\r\n            methods,\r\n        }\r\n    },\r\n}, {\r\n    summary: () => null,\r\n    head: ({refer, plc}) => (<>\r\n        <PlDropdown\r\n            {...{placement: \"bottom\"}}\r\n            v-slots={{\r\n                default: () => <PlButton icon=\"el-icon-menu\" mode=\"text\"/>,\r\n                popper: () => <PlDropdownMenu>\r\n                    <PlDropdownOption label=\"全部展开\" icon=\"el-icon-zoom-full\" onClick={refer.methods.expandAll}/>\r\n                    <PlDropdownOption label=\"全部收起\" icon=\"el-icon-zoom-scale\" onClick={refer.methods.collapseAll}/>\r\n                    {refer.tableProps.showCheckbox && <>\r\n                        <PlDropdownOption label=\"全部选中\" icon=\"el-icon-check\" onClick={refer.methods.checkAll}/>\r\n                        <PlDropdownOption label=\"取消选中\" icon=\"el-icon-close\" onClick={refer.methods.uncheckAll}/>\r\n                    </>}\r\n                </PlDropdownMenu>\r\n            }}\r\n        />\r\n        <div class=\"plc-tree-node-content\">{plc.props.title}</div>\r\n    </>),\r\n    default: ({refer, node, plc, row}) => {\r\n        return (\r\n            <>\r\n                <div class=\"plc-tree-node-expander\" {...refer.utils.getExpanderAttrs(node)}>\r\n                    <PlButton\r\n                        loading={node.loading}\r\n                        mode=\"text\"\r\n                        size={StyleSize.normal}\r\n                        icon={node.isLeaf ? refer.props.leafIcon : node.expand ? refer.props.folderExpandIcon : refer.props.folderCollapseIcon}\r\n                        onClick={(e: MouseEvent) => !node.isLeaf && refer.handler.onClickExpandIcon(e, node)}/>\r\n                </div>\r\n                {refer.tableProps.showCheckbox && (\r\n                    <div class=\"plc-tree-node-check\">\r\n                        <PlCheckbox\r\n                            key={node.key}\r\n                            size={StyleSize.normal}\r\n                            modelValue={node.check}\r\n                            customReadonly={true}\r\n                            checkStatus={node.checkStatus}\r\n                            disabled={!node.isCheckable}\r\n                            {...{onClick: (e?: MouseEvent) => refer.handler.onClickCheckbox(e, node)}}\r\n                        />\r\n                    </div>\r\n                )}\r\n                {refer.props.rowDraggable && (\r\n                    <PlButton mode=\"text\"\r\n                              icon=\"el-icon-list\"\r\n                              class=\"plc-tree-node-drag-btn\"\r\n                              disabled={!refer.draggier.utils.allowDrag(node)}\r\n                              {...createEventListener({onMousedown: refer.draggier.handler.onMousedown})}/>\r\n                )}\r\n                {refer.scopedSlots.content.isExist() && (\r\n                    <div class=\"plc-tree-node-content\" style={`width:${unit(refer.props.contentWidth)}`}>\r\n                        {refer.scopedSlots.content({node, row, plc}, !plc.props.field ? null : row[plc.props.field])}\r\n                    </div>\r\n                )}\r\n            </>\r\n        )\r\n    }\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {$$file, FileServiceDefaultAccept, FileServiceSingleFile, FileServiceValidator} from \"../file-service/file-service\";\r\nimport {computed, PropType} from 'vue';\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {toArray} from \"../../utils/toArray\";\r\nimport './upload.scss'\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {createCounter} from \"../../utils/createCounter\";\r\nimport {VNodeChild} from \"../../shims\";\r\nimport {$$dialog} from \"../dialog-service\";\r\nimport {$$message} from \"../message\";\r\nimport {defer} from \"../../utils/defer\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {PlButton} from \"../button/button\";\r\nimport {PlButtonGroup} from \"../button-group/button-group\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlLoading} from \"../loading/loading\";\r\n\r\nconst nextFileId = createCounter('upload')\r\n\r\nexport enum UploadStatus {\r\n    ready = 'ready',                        // 刚添加，还未上传\r\n    success = 'success',                    // 已上传完毕\r\n    error = 'error',                        // 上传失败\r\n    uploading = 'uploading',                // 正在上传\r\n    remove = 'remove',                      // 已删除\r\n    empty = 'empty',                        // 无文件\r\n}\r\n\r\ntype UploadFile = {\r\n    status?: UploadStatus,\r\n    id: string,\r\n    name: string,\r\n    response?: any,\r\n    file?: FileServiceSingleFile,\r\n    percent?: number,\r\n}\r\n\r\ntype BeforeRemove = (file: UploadFile) => boolean\r\ntype BeforeUpload = (file: UploadFile) => void | Promise<void>\r\ntype HandleRemove = (file: UploadFile) => Promise<void>\r\ntype HandleUpload = (files: UploadFile | UploadFile[]) => Promise<void>\r\ntype HandlePreview = (file: UploadFile) => void\r\n\r\ntype UploadData = Record<string, string> | (() => Record<string, string>)\r\ntype UploadModelValue = UploadFile | UploadFile[]\r\n\r\nexport const PlUpload = designComponent({\r\n    name: 'pl-upload',\r\n    props: {\r\n        ...EditProps,\r\n        modelValue: {type: Array as PropType<UploadModelValue>},        // 双向绑定值，文件对象\r\n        /*chooseFile*/\r\n        accept: {type: String},                                         // FileServiceChooseFileConfig.accept, 接收上传的文件类型\r\n        multiple: {type: Boolean, default: true},                       // FileServiceChooseFileConfig.multiple, 是否上传多个文件\r\n        validator: {type: Function as PropType<FileServiceValidator>},  // FileServiceChooseFileConfig.validator, 选择文件的校验函数\r\n        max: {type: Number},                                            // 最多上传文件个数\r\n        /*upload*/\r\n        action: {type: String, required: true},                         // 文件上传地址\r\n        data: {type: [Object, Function] as PropType<UploadData>},       // 上传时的额外参数，或者获取额外参数的函数\r\n        headers: {type: Object as PropType<Record<string, string>>,},   // 上传时的请求头\r\n        withCredentials: {type: Boolean},                               // 带cookie凭证信息\r\n        filename: {type: String, required: true},                       // 文件上传的的时候接收的文件名\r\n        /*other*/\r\n        draggable: {type: Boolean},                                     // 支持拖拽上传\r\n        // request: {type: Function as PropType<CustomRequest>},           // 自定义上传行为\r\n        // method: {type: String, default: 'post'},                        // 上传时的method方法\r\n        autoUpload: {type: Boolean, default: true},                     // 获取到文件之后，自动上传文件\r\n        removeConfirm: {type: Boolean, default: true},                  // 删除前的确认提示\r\n\r\n        beforeUpload: {type: Function as PropType<BeforeUpload>},       // 上传前校验文件\r\n        beforeRemove: {type: Function as PropType<BeforeRemove>},       // 删除前校验\r\n        handleRemove: {type: Function as PropType<HandleRemove>},       // 执行删除逻辑\r\n        handleUpload: {type: Function as PropType<HandleUpload>},       // 自定义上传逻辑\r\n        handlePreview: {type: Function as PropType<HandlePreview>},     // 处理预览文件逻辑\r\n    },\r\n    emits: {\r\n        updateModelValue: (val?: UploadModelValue) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {editComputed} = useEdit()\r\n        const {slots} = useSlots(['button'])\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {item: Object as PropType<UploadFile>, index: Number}\r\n        })\r\n\r\n        const singleModel = useModel(() => props.modelValue as undefined | UploadFile, emit.updateModelValue)\r\n        const multipleModel = useModel(() => props.modelValue as undefined | UploadFile[], emit.updateModelValue)\r\n\r\n        const renderIcon = {\r\n            [UploadStatus.success]: <PlIcon icon=\"el-icon-check-bold\"/>,\r\n            [UploadStatus.ready]: <PlIcon icon=\"el-icon-upload1\"/>,\r\n            [UploadStatus.error]: <PlIcon icon=\"el-icon-close-bold\"/>,\r\n            [UploadStatus.uploading]: <PlLoading type='beta' status=\"primary\"/>,\r\n            [UploadStatus.remove]: null,\r\n\r\n            [UploadStatus.empty]: <PlIcon icon=\"el-icon-upload1\"/>,\r\n        }\r\n        const singleEmptyFile: UploadFile = {\r\n            name: '未上传',\r\n            status: UploadStatus.empty,\r\n            id: 'nothing'\r\n        }\r\n\r\n        const classes = useClass(() => [\r\n            'pl-upload',\r\n            `pl-upload-${props.multiple ? 'multiple' : 'single'}`,\r\n            {\r\n                'pl-upload-remove': !!props.handleRemove,\r\n                'pl-upload-disabled': editComputed.value.disabled,\r\n                'pl-upload-preview': !!props.handlePreview,\r\n            }\r\n        ])\r\n\r\n        const utils = {\r\n            getItemClass: (item: UploadFile) => [\r\n                'pl-upload-item',\r\n                {\r\n                    [`pl-upload-item-status-${item.status}`]: !!item.status\r\n                }\r\n            ],\r\n        }\r\n\r\n        const handler = {\r\n            onSelectFile: async (files: File | File[]) => {\r\n\r\n                const selectFiles = toArray(files).filter(file => {\r\n                    const f = file as FileServiceSingleFile\r\n                    f.calcSize = Number((file.size / (1024 * 1024)).toFixed(2))\r\n                    /*validator*/\r\n                    if (props.validator != null) {\r\n                        const flag = props.validator(f)\r\n                        if (flag === false) {\r\n                            return false\r\n                        }\r\n                    }\r\n                    /*max*/\r\n                    if (props.max != null) {\r\n                        if (f.calcSize > props.max) {\r\n                            $$message.error(`[${file.name}]大小为${f.calcSize}MB，超过最大限制${props.max}MB`, {time: 5000})\r\n                            return false\r\n                        }\r\n                    }\r\n                    return true\r\n                }) as FileServiceSingleFile[]\r\n\r\n                if (!props.multiple) {\r\n                    const file = selectFiles[0]!\r\n                    singleModel.value = {\r\n                        id: nextFileId(),\r\n                        name: file.name,\r\n                        file,\r\n                        status: UploadStatus.ready,\r\n                    }\r\n                } else {\r\n                    const addFiles = toArray(selectFiles).map(f => ({\r\n                        id: nextFileId(),\r\n                        status: UploadStatus.ready,\r\n                        name: f.name,\r\n                        file: f,\r\n                    } as UploadFile))\r\n                    multipleModel.value = [...addFiles, ...multipleModel.value || []]\r\n                }\r\n                if (props.autoUpload) {\r\n                    await methods.upload()\r\n                }\r\n            },\r\n        }\r\n\r\n        const dropHandler = {\r\n            onDragover: (e: DragEvent) => {\r\n                e.preventDefault()\r\n            },\r\n            onDragLeave: (e: DragEvent) => {\r\n                e.preventDefault()\r\n            },\r\n            onDrop: async (e: DragEvent) => {\r\n                e.preventDefault()\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n\r\n                const accept = !props.accept ? undefined : FileServiceDefaultAccept[props.accept] || props.accept\r\n                let files: File[] = Array.from(e.dataTransfer!.files)\r\n                if (!!accept) {\r\n                    files = Array.from(e.dataTransfer!.files).filter(file => {\r\n                        const {type, name} = file;\r\n                        const extension = name.indexOf('.') > -1\r\n                            ? `.${name.split('.').pop()}`\r\n                            : '';\r\n                        const baseType = type.replace(/\\/.*$/, '');\r\n                        return accept.split(',')\r\n                            .map(type => type.trim())\r\n                            .filter(type => type)\r\n                            .some(acceptedType => {\r\n                                if (/\\..+$/.test(acceptedType)) {\r\n                                    return extension === acceptedType;\r\n                                }\r\n                                if (/\\/\\*$/.test(acceptedType)) {\r\n                                    return baseType === acceptedType.replace(/\\/\\*$/, '');\r\n                                }\r\n                                if (/^[^/]+\\/[^/]+$/.test(acceptedType)) {\r\n                                    return type === acceptedType;\r\n                                }\r\n                                return false;\r\n                            });\r\n                    })\r\n                }\r\n                if (files.length > 0) {\r\n                    await handler.onSelectFile(files)\r\n                }\r\n            },\r\n        }\r\n\r\n        const methods = {\r\n            chooseFile: async () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                const files = await $$file.chooseFile({\r\n                    multiple: props.multiple,\r\n                    accept: props.accept,\r\n                    /*validator以及max不在这里校验，因为 drop file的时候不走这里，在onSelectFile中统一处理*/\r\n                    // validator: props.validator,\r\n                    // max: props.max,\r\n                })\r\n                await handler.onSelectFile(files)\r\n            },\r\n            removeFile: async (file: UploadFile) => {\r\n\r\n                // 状态不存在或者状态为success表示需要用户处理删除文件在后端的逻辑，否则其他状态直接前端删除\r\n                if (!file.status || file.status === UploadStatus.success) {\r\n                    if (props.removeConfirm) {\r\n                        await $$dialog.confirm(`确认要删除文件：${file.name} 吗？`)\r\n                    }\r\n                    if (!!props.beforeRemove) {await props.beforeRemove(file)}\r\n                    await props.handleRemove!(file)\r\n                }\r\n\r\n                // 前端删除\r\n                if (!props.multiple) {\r\n                    singleModel.value = undefined\r\n                } else {\r\n                    const index = multipleModel.value!.indexOf(file)\r\n                    if (index > -1) {\r\n                        multipleModel.value!.splice(index, 1)\r\n                    }\r\n                }\r\n            },\r\n            upload: () => {\r\n                let files = props.multiple ? multipleModel.value : (singleModel.value ? [singleModel.value] : undefined)\r\n                if (!files) return\r\n                /*上传 准备就绪或者上传失败的文件*/\r\n                files = files.filter(f => f.status === UploadStatus.ready || f.status === UploadStatus.error)\r\n                if (files.length === 0) return\r\n                return methods.uploadFile(props.multiple ? files : files[0])\r\n            },\r\n            uploadFile: async (uploadFiles: UploadFile | UploadFile[]) => {\r\n\r\n                toArray(uploadFiles).forEach(file => {\r\n                    file.percent = 0\r\n                    file.status = UploadStatus.uploading\r\n                })\r\n\r\n                if (!!props.beforeUpload) {\r\n                    await Promise.all(toArray(uploadFiles).map(file => props.beforeUpload!(file)))\r\n                }\r\n\r\n                const handler = {\r\n                    onSuccess: () => {\r\n                        toArray(uploadFiles).forEach(file => {\r\n                            file.status = UploadStatus.success\r\n                            file.percent = undefined\r\n                        })\r\n                        dfd.resolve()\r\n                    },\r\n                    onError: () => {\r\n                        toArray(uploadFiles).forEach(file => file.status = UploadStatus.error)\r\n                        dfd.reject()\r\n                    },\r\n                }\r\n\r\n                const dfd = defer()\r\n                if (!!props.handleUpload) {\r\n                    const promise = props.handleUpload(uploadFiles)\r\n                    if (!promise) {\r\n                        console.error('pl-upload: handleUpload must return promise object!')\r\n                    } else {\r\n                        promise.then(handler.onSuccess, handler.onError)\r\n                    }\r\n                } else {\r\n                    $$file.upload({\r\n                        action: props.action,\r\n                        data: typeof props.data === \"function\" ? props.data() : props.data,\r\n                        headers: props.headers,\r\n                        withCredentials: props.withCredentials,\r\n                        file: Array.isArray(uploadFiles) ? uploadFiles.map(f => f.file!) : uploadFiles.file!,\r\n                        filename: props.filename,\r\n                        ...handler,\r\n                        onProgress: (percent) => {\r\n                            toArray(uploadFiles).forEach(file => file.percent = percent)\r\n                        },\r\n                    })\r\n                }\r\n                return dfd.promise\r\n            },\r\n        }\r\n\r\n        const renderItem = (file: UploadFile, index: number, custom?: () => VNodeChild) => (\r\n            <div class={utils.getItemClass(file)} key={file.id}>\r\n                <div class=\"pl-upload-item-inner\">\r\n                    {!!custom ? custom() : <>\r\n                        {file.status ? renderIcon[file.status] : <PlIcon icon=\"el-icon-document\"/>}\r\n                        {file.status === UploadStatus.ready ? '(待上传) ' : ''}\r\n                        <div class=\"pl-upload-item-content\" onClick={() => !!props.handlePreview && props.handlePreview(file)}>\r\n                            {scopedSlots.default({item: file, index}, file.name)}\r\n                        </div>\r\n                    </>}\r\n                    {(\r\n                        !!props.handleRemove\r\n                        && file.status !== UploadStatus.empty\r\n                        && file.status !== UploadStatus.uploading\r\n                        && editComputed.value.editable\r\n                    ) && (\r\n                        <div class=\"pl-upload-item-remove\" onClick={() => methods.removeFile(file)}>\r\n                            <PlIcon icon=\"el-icon-delete-solid\"/>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {file.percent != null && (\r\n                    <div class=\"pl-upload-item-progress\">\r\n                        <div class=\"pl-upload-item-progress-inner\" style={{width: `${file.percent}%`}}/>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        )\r\n\r\n        const singleRender = computed(() => <>\r\n            <PlButtonGroup>\r\n                <PlButton label=\"选择文件\" icon=\"el-icon-upload\" onClick={methods.chooseFile}/>\r\n                {!props.autoUpload && <PlButton label=\"上传\" icon=\"el-icon-connection\" onClick={methods.upload}/>}\r\n                {slots.button()}\r\n            </PlButtonGroup>\r\n            {renderItem(singleModel.value || singleEmptyFile, 0)}\r\n        </>)\r\n        const multipleRender = computed(() => <>\r\n            <div class=\"pl-upload-button\">\r\n                {!props.draggable ? (\r\n                    <PlButtonGroup>\r\n                        <PlButton label=\"选择文件\" icon=\"el-icon-upload\" onClick={methods.chooseFile}/>\r\n                        {!props.autoUpload && <PlButton label=\"上传\" icon=\"el-icon-connection\" onClick={methods.upload}/>}\r\n                        {slots.button()}\r\n                    </PlButtonGroup>\r\n                ) : (\r\n                    <div class=\"pl-upload-drop-area\" onClick={methods.chooseFile} {...dropHandler}>\r\n                        <PlIcon icon=\"el-icon-upload\"/>\r\n                        <div>\r\n                            <span>将文件拖拽至此处，或者</span>\r\n                            <PlButton mode=\"text\" class=\"pl-upload-drop-upload-button\" onClick={methods.chooseFile}>\r\n                                <span>点击上传</span>\r\n                                <PlIcon icon=\"el-icon-upload1\"/>\r\n                            </PlButton>\r\n                            {slots.button()}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <div class=\"pl-upload-list\">\r\n                {!!multipleModel.value && multipleModel.value\r\n                    .filter(item => item.status !== UploadStatus.remove)\r\n                    .map((file, index) => renderItem(file, index))}\r\n            </div>\r\n        </>)\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <div class={classes.value}>\r\n                        {props.multiple ? multipleRender.value : singleRender.value}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import Plc from '../table/plc/core/plc'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport PlcInput from \"../table/plc/edit/plc-input\";\r\nimport PlcNumber from \"../table/plc/edit/plc-number\";\r\nimport PlcDate from \"../table/plc/edit/plc-date\";\r\nimport PlcColorPicker from \"../table/plc/edit/plc-color-picker\";\r\nimport PlcToggle from \"../table/plc/edit/plc-toggle\";\r\nimport PlcRate from \"../table/plc/edit/plc-rate\";\r\nimport PlcIndex from \"../table/plc/standard/plc-index\";\r\nimport PlcExpand from \"../table/plc/standard/plc-expand\";\r\nimport PlcCheck from \"../table/plc/standard/plc-check\";\r\nimport PlcDraggier from \"../table/plc/standard/draggier/plc-draggier\";\r\nimport PlcTree from \"../table/plc/standard/tree/plc-tree\";\r\n\r\nexport default createComponentPlugin(Plc, {\r\n    exposeComponents: {\r\n        /*---------------------------------------standard-------------------------------------------*/\r\n        PlcIndex,\r\n        PlcExpand,\r\n        PlcCheck,\r\n        PlcDraggier,\r\n        PlcTree,\r\n        /*---------------------------------------edit-------------------------------------------*/\r\n        PlcInput,\r\n        PlcNumber,\r\n        PlcDate,\r\n        PlcColorPicker,\r\n        PlcToggle,\r\n        PlcRate,\r\n    },\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlcGroupProps, PlcPublicAttrs} from \"./plc.utils\";\r\nimport {TablePlcCollector} from './plc-collector';\r\nimport {useSlots} from \"../../../../use/useSlots\";\r\nimport {PlcGroup} from \"./plc.type\";\r\nimport {useNumber} from \"../../../../use/useNumber\";\r\nimport {computed, PropType, reactive} from 'vue';\r\nimport {useScopedSlots} from \"../../../../use/useScopedSlots\";\r\n\r\nexport default designComponent({\r\n    name: 'plc-group',\r\n    props: {\r\n        ...PlcGroupProps,\r\n    },\r\n    setup({props}) {\r\n        /*插槽*/\r\n        const {slots} = useSlots()\r\n        const {scopedSlots} = useScopedSlots({\r\n            head: {plc: Object as PropType<PlcGroup>},\r\n        }, true)\r\n        /*collector收集列信息*/\r\n        TablePlcCollector.useChild()\r\n        /*子列信息*/\r\n        const {children} = TablePlcCollector.useParent()\r\n        /*格式化props*/\r\n        const {numberState} = useNumber(props, ['order'])\r\n        /*目标props*/\r\n        const formatProps = computed(() => ({\r\n            ...props,\r\n            ...numberState,\r\n        }) as Omit<typeof props, 'order'> & typeof numberState)\r\n        /*props的一个副本，不过如果有值的情况下，优先级比props中的值高（比config值也高）*/\r\n        const propsState = reactive(Object.keys(PlcGroupProps).reduce((ret: any, key: string) => {\r\n            ret[key] = null\r\n            return ret\r\n        }, {}) as { [k in keyof typeof formatProps.value]: typeof formatProps.value[k] | null })\r\n\r\n        /*核心暴露对象*/\r\n        const group: PlcGroup = reactive({\r\n            /*PlcPublicAttrs 在 copyPlc中会深度复制一遍，这里适配类型即可*/\r\n            ...PlcPublicAttrs,\r\n            group: true,\r\n            children,\r\n            props: formatProps,\r\n            state: propsState,\r\n            refer: () => group,\r\n            setDurWidth: (durWidth: number) => {\r\n                const itemDurWidth = Math.floor(durWidth / (children.length))\r\n                children.forEach(item => item.setDurWidth(itemDurWidth))\r\n            },\r\n            scopedSlots,\r\n        })\r\n\r\n        return {\r\n            refer: group,\r\n            render: () => (\r\n                <div>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport PlcGroup from \"../table/plc/core/plc-group\";\r\n\r\nexport default createComponentPlugin(PlcGroup)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlUpload} from './upload'\r\n\r\nexport default createComponentPlugin(PlUpload)","import Nav from './nav'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Nav, {})","import {App} from 'vue'\r\nimport {$$file} from \"./file-service\";\r\n\r\nexport default {\r\n    install: (app: App) => {\r\n        app.config.globalProperties.$$file = $$file\r\n    }\r\n}","import {defer} from \"../../../utils/defer\";\r\nimport {$$file} from \"../../file-service/file-service\";\r\n\r\n/**\r\n * 将url转成image对象\r\n * @author  韦胜健\r\n * @date    2021/1/21 11:46\r\n */\r\nexport function urlToImage(url: string) {\r\n    const dfd = defer<HTMLImageElement>()\r\n    const image = new Image()\r\n    image.setAttribute('crossOrigin', 'anonymous');\r\n    image.onload = () => dfd.resolve(image)\r\n    image.onerror = dfd.reject\r\n    image.src = url\r\n    return dfd.promise\r\n}\r\n\r\n/**\r\n * 将image转化为canvas\r\n * @author  韦胜健\r\n * @date    2021/1/21 11:50\r\n */\r\nexport function imageToCanvas(image: HTMLImageElement) {\r\n    const canvas = document.createElement('canvas') as HTMLCanvasElement\r\n    const ctx = canvas.getContext('2d')!\r\n    canvas.width = image.width\r\n    canvas.height = image.height\r\n    ctx.drawImage(image, 0, 0, canvas.width, canvas.height)\r\n    return canvas\r\n}\r\n\r\n/**\r\n * 将canvas转化为File对象\r\n * @author  韦胜健\r\n * @date    2021/1/21 11:50\r\n * @param   canvas              画布对象\r\n * @param   type                文件类型，比如 image/jpeg\r\n * @param   quality             图片压缩质量，0-1\r\n * @param   filename            文件名称\r\n */\r\nexport function canvasToFile(canvas: HTMLCanvasElement, type: string, quality: number, filename: string) {\r\n    const dfd = defer<File | null>()\r\n    canvas.toBlob(blob => {\r\n        dfd.resolve(!blob ? null : new File([blob], filename))\r\n    }, type, quality)\r\n    return dfd.promise\r\n}\r\n\r\n/**\r\n * 将canvas转化为base64\r\n * @author  韦胜健\r\n * @date    2021/1/21 11:52\r\n * @param   type            文件类型\r\n * @param   quality         图片压缩质量，0-1\r\n */\r\nexport function canvasToDataURL(canvas: HTMLCanvasElement, type: string, quality: number): string {\r\n    return canvas.toDataURL(type, quality)\r\n}\r\n\r\n\r\n/**\r\n * 将file转化为base64\r\n * @author  韦胜健\r\n * @date    2021/1/21 11:54\r\n */\r\nexport const fileToDataURL = $$file.readAsDataURL\r\n\r\n/**\r\n * 将dataURL转化为File对象\r\n * @author  韦胜健\r\n * @date    2021/1/21 11:54\r\n */\r\nexport function dataURLToFile(dataUrl: string) {\r\n    const arr = dataUrl.split(',');\r\n    const mime = arr[0].match(/:(.*?);/)![1]\r\n    const bstr = atob(arr[1]);\r\n    let n = bstr.length, u8arr = new Uint8Array(n);\r\n    while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    return new Blob([u8arr], {type: mime});\r\n}\r\n\r\n/**\r\n * 将blob转化为file\r\n * @author  韦胜健\r\n * @date    2021/1/21 15:19\r\n */\r\nexport function blobToFile(blob: Blob, filename: string, option?: FilePropertyBag) {\r\n    return new File([blob], filename, option)\r\n}\r\n\r\nexport const imageCompress = (() => {\r\n    /**\r\n     * 根据尺寸压缩图片\r\n     * @author  韦胜健\r\n     * @date    2021/1/21 16:11\r\n     */\r\n    const compressByMeasure = async (image: HTMLImageElement, config: { maxHeight?: number, maxWidth?: number }, filename: string) => {\r\n        const canvas = document.createElement('canvas') as HTMLCanvasElement\r\n        const ctx = canvas.getContext('2d')!\r\n        let height = image.height, width = image.width;\r\n        if (!!config.maxHeight && height > config.maxHeight) {\r\n            width = config.maxHeight / height * width\r\n            height = config.maxHeight\r\n        }\r\n        if (!!config.maxWidth && width > config.maxWidth) {\r\n            height = config.maxWidth / width * height\r\n            width = config.maxWidth\r\n        }\r\n        canvas.width = width\r\n        canvas.height = height\r\n        ctx.drawImage(image, 0, 0, width, height)\r\n        return canvasToFile(canvas, 'image/png', 1, filename)\r\n    }\r\n    /**\r\n     * 根据图片容量大小压缩图片\r\n     * @author  韦胜健\r\n     * @date    2021/1/21 16:11\r\n     */\r\n    const compressByMaxSize = async (image: HTMLImageElement, maxSize: number, filename: string) => {\r\n        const max = maxSize * 1000 * 1000\r\n        let rate = 1\r\n        const canvas = document.createElement('canvas') as HTMLCanvasElement\r\n        const ctx = canvas.getContext('2d')!\r\n        canvas.height = image.height\r\n        canvas.width = image.width\r\n        ctx.drawImage(image, 0, 0, image.width, image.height)\r\n\r\n        let file = await canvasToFile(canvas, 'image/png', 1, filename)\r\n        while (!!file && file.size > max && rate > 0.1) {\r\n            ctx.clearRect(0, 0, image.width * rate, image.height * rate)\r\n            rate -= 0.3\r\n            canvas.height = image.height * rate\r\n            canvas.width = image.width * rate\r\n            ctx.drawImage(image, 0, 0, image.width * rate, image.height * rate)\r\n            file = await canvasToFile(canvas, 'image/png', 1, filename)\r\n        }\r\n        return file\r\n    }\r\n    return async (url: string, config: { maxSize?: number, maxHeight?: number, maxWidth?: number }): Promise<string | ArrayBuffer | null> => {\r\n        if (!url) {\r\n            throw new Error('compress: url is empty!')\r\n        }\r\n        /*if (/^https?/.test(url) && url.indexOf('?') === -1) {\r\n            url += `?timestamp=${Date.now()}`\r\n        }*/\r\n        let image = await urlToImage(url)\r\n        if (!!config.maxHeight || !!config.maxWidth) {\r\n            let file = await compressByMeasure(image, config, '根据尺寸压缩图片.png')\r\n            return !file ? null : fileToDataURL(file)\r\n        }\r\n        if (!!config.maxSize) {\r\n            let file = await compressByMaxSize(image, config.maxSize, '根据文件大小压缩图片.png')\r\n            return !file ? null : fileToDataURL(file)\r\n        }\r\n        throw new Error('compress: maxSize, maxHeight, maxWidth is empty!')\r\n    }\r\n})();","import {registryRootService} from \"../../root/registryRootService\";\r\nimport {createDefaultService} from \"../../root/createDefaultService\";\r\nimport {onMounted, reactive, ref, Transition, withDirectives, computed} from 'vue';\r\nimport {createDefaultManager} from \"../../root/createDefaultManager\";\r\nimport {$$file} from \"../../file-service/file-service\";\r\nimport {getServiceWithoutContext} from \"../../../utils/getServiceWithoutContext\";\r\nimport {imageCompress} from \"./image.service.utils\";\r\nimport {PlIcon} from \"../../icon/icon\";\r\nimport {TooltipDirective} from \"../../tooltip/tooltip-directive\";\r\nimport {useStyles} from \"../../../use/useStyles\";\r\nimport {PlImage} from \"../image\";\r\n\r\ninterface ImageServicePreviewOption {\r\n    urls: string[],\r\n    current: number,\r\n}\r\n\r\nconst Service = createDefaultService({\r\n    name: 'pl-image-preview-service',\r\n    setup: (option: ImageServicePreviewOption) => {\r\n\r\n        const step = {scale: 0.2, rotate: 90,}\r\n\r\n        const isShow = ref(false)\r\n\r\n        const state = reactive({\r\n            option,\r\n            adjust: {\r\n                scale: null as null | number,           // 当前图片缩放大小\r\n                top: null as null | number,             // 当前图片拖拽top距离\r\n                left: null as null | number,            // 当前图片拖拽left距离\r\n                rotate: null as null | number,          // 当前图片旋转距离\r\n            },\r\n            mounted: new Promise(resolve => onMounted(resolve))\r\n        })\r\n\r\n        const imgStyles = useStyles(style => {\r\n            const {scale, top, left, rotate} = state.adjust\r\n            let transform: string[] = []\r\n            if (!!scale) {\r\n                transform.push(`scale(${scale})`)\r\n            }\r\n            if (!!rotate) {\r\n                transform.push(`rotate(${rotate}deg)`)\r\n            }\r\n            if (transform.length > 0) {\r\n                style.transform = transform.join(' ')\r\n            }\r\n            if (!!top) {\r\n                style.top = `${top}px`\r\n            }\r\n            if (!!left) {\r\n                style.left = `${left}px`\r\n            }\r\n        })\r\n\r\n        const show = async () => {\r\n            resetAdjust()\r\n            await state.mounted\r\n            isShow.value = true\r\n        }\r\n\r\n        const hide = () => isShow.value = false\r\n\r\n        const resetAdjust = () => state.adjust = {\r\n            scale: null as null | number,           // 当前图片缩放大小\r\n            top: null as null | number,             // 当前图片拖拽top距离\r\n            left: null as null | number,            // 当前图片拖拽left距离\r\n            rotate: null as null | number,          // 当前图片旋转距离\r\n        }\r\n\r\n        const service = async (option: ImageServicePreviewOption) => {\r\n            state.option = option\r\n            await show()\r\n            return hide\r\n        }\r\n\r\n        const isMultipleImages = computed(() => state.option.urls.length > 1)\r\n\r\n        const buttons = [\r\n            {\r\n                label: '逆时针旋转90°',\r\n                icon: 'el-icon-rotate-left',\r\n                onClick: () => {\r\n                    let {rotate} = state.adjust\r\n                    rotate = (rotate == null ? 0 : rotate) + step.rotate;\r\n                    (rotate === 360) && (rotate = 0);\r\n                    state.adjust.rotate = rotate\r\n                }\r\n            },\r\n            {\r\n                label: '顺时针旋转90°',\r\n                icon: 'el-icon-rotate-right',\r\n                onClick: () => {\r\n                    let {rotate} = state.adjust\r\n                    rotate = (rotate == null ? 0 : rotate) - step.rotate;\r\n                    (rotate === -360) && (rotate = 0);\r\n                    state.adjust.rotate = rotate\r\n                }\r\n            },\r\n            {\r\n                label: '放大',\r\n                icon: 'el-icon-zoom-in',\r\n                onClick: () => {\r\n                    let {scale} = state.adjust\r\n                    state.adjust.scale = (scale == null ? 1 : scale) + step.scale\r\n                }\r\n            },\r\n            {\r\n                label: '缩小',\r\n                icon: 'el-icon-zoom-out',\r\n                onClick: () => {\r\n                    let {scale} = state.adjust\r\n                    state.adjust.scale = (scale == null ? 1 : scale) - step.scale\r\n                }\r\n            },\r\n            {\r\n                label: '上一张',\r\n                icon: 'el-icon-arrow-left',\r\n                show: () => isMultipleImages.value,\r\n                onClick: () => {\r\n                    resetAdjust()\r\n                    let current = state.option.current - 1\r\n                    if (current < 0) current = state.option.urls.length - 1\r\n                    state.option.current = current\r\n                },\r\n            },\r\n            {\r\n                label: '下一张',\r\n                icon: 'el-icon-arrow-right',\r\n                show: () => isMultipleImages.value,\r\n                onClick: () => {\r\n                    resetAdjust()\r\n                    let current = state.option.current + 1\r\n                    if (current > state.option.urls.length - 1) current = 0\r\n                    state.option.current = current\r\n                },\r\n            },\r\n            {\r\n                label: '重置',\r\n                icon: 'el-icon-refresh',\r\n                onClick: resetAdjust,\r\n            },\r\n            {\r\n                label: '关闭',\r\n                icon: 'el-icon-close',\r\n                onClick: hide,\r\n            },\r\n        ]\r\n\r\n        const dragImg = (() => {\r\n            let freezeState = {\r\n                startTop: 0,\r\n                startLeft: 0,\r\n                startX: 0,\r\n                startY: 0,\r\n            }\r\n            const mousedown = (e: MouseEvent) => {\r\n                freezeState = {\r\n                    startTop: state.adjust.top || 0,\r\n                    startLeft: state.adjust.left || 0,\r\n                    startX: e.clientX,\r\n                    startY: e.clientY,\r\n                }\r\n                document.addEventListener('mousemove', mousemove)\r\n                document.addEventListener('mouseup', mouseup)\r\n            }\r\n            const mousemove = (e: MouseEvent) => {\r\n                state.adjust.left = e.clientX - freezeState.startX + freezeState.startLeft\r\n                state.adjust.top = e.clientY - freezeState.startY + freezeState.startTop\r\n            }\r\n            const mouseup = (e: MouseEvent) => {\r\n                document.removeEventListener('mousemove', mousemove)\r\n                document.removeEventListener('mouseup', mouseup)\r\n            }\r\n            const dragstart = (e: DragEvent) => {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n            }\r\n            return {\r\n                mousedown,\r\n                dragstart,\r\n                imgStyles,\r\n            }\r\n        })();\r\n\r\n        const handler = {\r\n            stopPropagation: (e: MouseEvent) => e.stopPropagation(),\r\n            onDblclickImg: hide,\r\n            onClickMask: hide,\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                isShow,\r\n                isOpen: isShow,\r\n                service,\r\n            },\r\n            render: () => (\r\n                <Transition name=\"pl-image-preview\">\r\n                    <div class=\"pl-image-preview-service\" v-show={isShow.value} onClick={handler.onClickMask}>\r\n                        <div class=\"pl-image-preview-service-img-wrapper\">\r\n                            <Transition name=\"pl-transition-scale\" mode=\"out-in\">\r\n                                <PlImage\r\n                                    style={imgStyles.value}\r\n                                    previewOnClick={false}\r\n                                    class=\"pl-image-preview-service-img\"\r\n                                    src={state.option.urls[state.option.current]}\r\n                                    key={state.option.urls[state.option.current]}\r\n                                    {...{\r\n                                        onClick: handler.stopPropagation,\r\n                                        onDblclick: handler.onDblclickImg,\r\n                                        onMousedown: dragImg.mousedown,\r\n                                        onDragstart: dragImg.dragstart,\r\n                                    }}\r\n                                />\r\n                            </Transition>\r\n                        </div>\r\n                        {isMultipleImages.value && <div class=\"pl-image-preview-service-indicator\">\r\n                            {state.option.urls.map((item, index) => <div class={`pl-image-preview-service-indicator-item ${index === state.option.current ? 'pl-image-preview-service-indicator-item-active' : ''}`} key={index}/>)}\r\n                        </div>}\r\n                        <div class=\"pl-image-preview-service-button-group\" onClick={handler.stopPropagation}>\r\n                            {buttons.map(btn => {\r\n                                if (!!btn.show && !btn.show()) {\r\n                                    return null\r\n                                }\r\n                                return withDirectives(\r\n                                    <div class=\"pl-image-preview-service-button\" key={btn.label} onClick={() => !!btn.onClick && btn.onClick()}>\r\n                                        <PlIcon icon={btn.icon}/>\r\n                                    </div> as any,\r\n                                    [[TooltipDirective, btn.label]]\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </Transition>\r\n            )\r\n        }\r\n    }\r\n})\r\n\r\nconst getImageService = registryRootService(\r\n    'image',\r\n    createDefaultManager('pl-image-manager', Service),\r\n    (getManager) => {\r\n        const preview = (urls: string | string[], current?: number) => {\r\n            let option: ImageServicePreviewOption = {\r\n                urls: Array.isArray(urls) ? urls : [urls],\r\n                current: current == null ? 0 : current,\r\n            };\r\n            getManager().then(manager => manager.service(option))\r\n        }\r\n        return {\r\n            choose: $$file.chooseImage,\r\n            compress: imageCompress,\r\n            preview,\r\n        }\r\n    }\r\n)\r\n\r\nexport const $image = getServiceWithoutContext(getImageService)\r\n","export enum ImageStatus {\r\n    success = 'success',\r\n    error = 'error',\r\n    pending = 'pending',\r\n    empty = 'empty',\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {$image} from \"./service\";\r\nimport './image.scss'\r\nimport {computed, PropType, reactive, watch} from 'vue';\r\nimport {ImageStatus} from \"./image.utils\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlLoadingMask} from \"../loading-mask/loading-mask\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\n\r\nexport enum ImageFit {\r\n    fill = 'fill',\r\n    contain = 'contain',\r\n    cover = 'cover',\r\n    none = 'none',\r\n    'scale-down' = 'scale-down',\r\n}\r\n\r\nexport const PlImageProps = {\r\n    alt: {type: String},                                                        // 图片描述\r\n    fit: {type: String as PropType<ImageFit>, default: ImageFit.cover},         // 图片 object-fit 属性\r\n    position: {type: String, default: 'top center'},                            // 图片 object-position 属性\r\n}\r\n\r\nexport const PlImage = designComponent({\r\n    name: 'pl-image',\r\n    props: {\r\n        src: {type: String},                                                     // 图片地址\r\n        status: {type: String as PropType<ImageStatus>},                         // 当前转股固态，fill, container, cover, none, scale-down\r\n        previewOnClick: {type: Boolean, default: true},                          // 是否点击的时候放大预览图片\r\n        maxHeight: {type: [String, Number]},                                     // 最大高度\r\n        minHeight: {type: [String, Number]},                                     // 最小高度\r\n        maxWidth: {type: [String, Number]},                                      // 最大宽度\r\n        minWidth: {type: [String, Number]},                                      // 最小宽度\r\n        width: {type: [String, Number]},                                         // 图片宽度\r\n        height: {type: [String, Number]},                                        // 图片高度\r\n        ...PlImageProps,\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n        onSuccess: (val: string) => true,\r\n        onError: (e: string | Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const state = reactive({\r\n            src: undefined as string | undefined,\r\n            status: ImageStatus.empty,\r\n        })\r\n\r\n        const status = computed(() => props.status == null ? state.status : props.status)\r\n\r\n        watch(() => props.src, val => {\r\n            state.src = val\r\n            if (!val) {\r\n                return state.status = ImageStatus.empty\r\n            }\r\n            state.status = ImageStatus.pending\r\n            const image = new Image()\r\n            image.onload = () => {\r\n                state.status = ImageStatus.success\r\n                emit.onSuccess(val)\r\n            }\r\n            image.onerror = (e) => {\r\n                state.status = ImageStatus.error\r\n                emit.onError(e)\r\n            }\r\n            image.src = val\r\n        }, {immediate: true})\r\n\r\n        const classes = useClass(() => [\r\n            'pl-image',\r\n            `pl-image-status-${status.value}`,\r\n            {\r\n                'pl-image-preview-on-click': props.previewOnClick,\r\n            },\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            if (!!props.height) style.height = unit(props.height)\r\n            if (!!props.width) style.width = unit(props.width)\r\n            if (!!props.minHeight) style.minHeight = unit(props.minHeight)\r\n            if (!!props.minWidth) style.minWidth = unit(props.minWidth)\r\n            if (!!props.maxHeight) style.maxHeight = unit(props.maxHeight)\r\n            if (!!props.maxWidth) style.maxWidth = unit(props.maxWidth)\r\n            if (!!props.fit) style.objectFit = props.fit\r\n            if (!!props.position) style.objectPosition = props.position\r\n        })\r\n\r\n        const tip = {\r\n            [ImageStatus.empty]: '无图片',\r\n            [ImageStatus.pending]: '加载中',\r\n            [ImageStatus.error]: '加载失败',\r\n        }\r\n\r\n        const handler = {\r\n            onClick: (e: MouseEvent) => {\r\n                if (state.status === ImageStatus.success && props.previewOnClick) {\r\n                    $image.preview(state.src!)\r\n                }\r\n                emit.onClick(e)\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                if (status.value === ImageStatus.empty || status.value === ImageStatus.pending || status.value === ImageStatus.error) {\r\n                    return (\r\n                        <div class={classes.value} style={styles.value} onClick={handler.onClick}>\r\n                            <PlIcon icon=\"el-icon-picture\"/>\r\n                            <span>{tip[status.value]}</span>\r\n                            {status.value === ImageStatus.pending && (<PlLoadingMask modelValue={true} background=\"rgba(255,255,255,0.5)\"/>)}\r\n                        </div>\r\n                    )\r\n                }\r\n                if (status.value === ImageStatus.success) {\r\n                    return (\r\n                        <img src={state.src} class={classes.value} style={styles.value} onClick={handler.onClick}/>\r\n                    )\r\n                }\r\n            }\r\n        }\r\n    },\r\n}, {\r\n    $image,\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport './image.scss'\r\nimport {PropType, reactive, watch} from 'vue';\r\nimport {$$file, FileServiceDefaultAccept, FileServiceUploadConfig} from \"../file-service/file-service\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\nimport {defer} from \"../../utils/defer\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {PlImage, PlImageProps} from \"./image\";\r\nimport {ImageStatus} from \"./image.utils\";\r\nimport {$image} from \"./service\";\r\n\r\nenum ImageUploaderStatus {\r\n    /*加载*/\r\n    empty = 'empty',                                        // 当前无图片\r\n    pending = 'pending',                                    // 加载中\r\n    success = 'success',                                    // 图片加载成功或者上传成功\r\n    error = 'error',                                        // 图片加载失败\r\n    /*上传*/\r\n    fail = 'fail',                                          // 图片上传失败\r\n    upload = 'upload',                                      // 图片加载中\r\n}\r\n\r\nexport const PlImageUploader = designComponent({\r\n    name: 'pl-image-uploader',\r\n    props: {\r\n        ...EditProps,\r\n        ...PlImageProps,\r\n        modelValue: {type: String},                                                             // 图片路径\r\n        width: {type: [String, Number], default: '80px'},                                       // 图片宽度\r\n        height: {type: [String, Number], default: '80px'},                                      // 图片高度\r\n        accept: {type: String, default: FileServiceDefaultAccept.image},                        // 选择文件的时候，图片类型\r\n        uploadConfig: {type: Object as PropType<Omit<FileServiceUploadConfig, 'file'>>},        // 上传配置信息对象\r\n        previewImage: {type: String},                                                           // 预览的时候显示的图片\r\n        handleDelete: {type: Function as PropType<() => void | Promise<void>>},                 // 自定义删除图片逻辑\r\n        handleUpload: {type: Function as PropType<(file: File) => void | Promise<void>>},       // 自定义上传图片逻辑\r\n        handlePreview: {type: Function as PropType<(url?: string) => void>},                    // 自定义预览逻辑\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: string) => true,\r\n        onLoadSuccess: (url: string) => true,\r\n        onLoadError: (e: string | Event) => true,\r\n        onUploadSuccess: (resp: object | string) => true,\r\n        onUploadProgress: (percent: number, e: ProgressEvent) => true,\r\n        onUploadFail: (e: any) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoWatch: false})\r\n\r\n        const {editComputed} = useEdit()\r\n\r\n        const state = reactive({\r\n            status: ImageUploaderStatus.empty,\r\n            percent: null as null | number,\r\n            chooseBase64: undefined as string | undefined,\r\n        })\r\n\r\n        watch(() => props.modelValue, val => {\r\n            model.value = val\r\n            state.chooseBase64 = undefined\r\n            if (!val) {\r\n                return state.status = ImageUploaderStatus.empty\r\n            }\r\n            state.status = ImageUploaderStatus.pending\r\n            const image = new Image()\r\n            image.onload = () => {\r\n                state.status = ImageUploaderStatus.success\r\n                emit.onLoadSuccess(val)\r\n            }\r\n            image.onerror = (e) => {\r\n                state.status = ImageUploaderStatus.error\r\n                emit.onLoadError(e)\r\n            }\r\n            image.src = val\r\n        }, {immediate: true})\r\n\r\n        const classes = useClass(() => [\r\n            'pl-image-uploader',\r\n            `pl-image-uploader-status-${state.status}`,\r\n            {\r\n                'pl-image-disabled': editComputed.value.disabled,\r\n                'pl-image-editable': editComputed.value.editable,\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            if (!!props.height) {style.height = unit(props.height)}\r\n            if (!!props.width) {style.width = unit(props.width)}\r\n        })\r\n\r\n        const methods = {\r\n            choose: async () => {\r\n                const dfd = defer<void | string | Record<string, string>>()\r\n                const file = await $$file.chooseImage() as File\r\n                state.chooseBase64 = await $$file.readAsDataURL(file) as string\r\n\r\n                if (!!props.uploadConfig) {\r\n                    const config = deepcopy(props.uploadConfig)\r\n                    state.status = ImageUploaderStatus.upload\r\n                    $$file.upload({\r\n                        ...config,\r\n                        file,\r\n                        onProgress: (percent, e) => {\r\n                            if (!!config.onProgress) config.onProgress(percent, e)\r\n                            console.log('percent', percent)\r\n                            state.percent = percent\r\n                            emit.onUploadProgress(percent, e)\r\n                        },\r\n                        onSuccess: (resp) => {\r\n                            if (!!config.onSuccess) config.onSuccess(resp)\r\n                            console.log('upload success, resp:', resp)\r\n                            model.value = String(state.chooseBase64)\r\n                            state.chooseBase64 = undefined\r\n                            state.status = ImageUploaderStatus.success\r\n                            emit.onUploadSuccess(resp)\r\n                            dfd.resolve(resp)\r\n                        },\r\n                        onError: (e) => {\r\n                            if (!!config.onError) config.onError(e)\r\n                            console.log('upload fail, e:', e)\r\n                            state.status = ImageUploaderStatus.fail\r\n                            emit.onUploadFail(e)\r\n                            dfd.reject(e)\r\n                        },\r\n                    })\r\n                } else if (!!props.handleUpload) {\r\n                    await props.handleUpload(file)\r\n                    dfd.resolve()\r\n                } else {\r\n                    dfd.reject('image-uploader: no props.uploadConfig and props.handleUpload, do nothing')\r\n                }\r\n\r\n                return dfd.promise\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            onClick: async () => {\r\n                if (!editComputed.value.editable) return\r\n                await methods.choose()\r\n            },\r\n            onClickImage: async () => {\r\n                if (state.status === ImageUploaderStatus.error) {\r\n                    return await handler.onClick()\r\n                }\r\n                const url = props.previewImage || model.value || state.chooseBase64\r\n                if (!!props.handlePreview) {\r\n                    return props.handlePreview(url)\r\n                } else {\r\n                    !!url && $image.preview(url)\r\n                }\r\n            },\r\n            onClickDelete: async () => {\r\n                if (!!props.handleDelete) {\r\n                    await props.handleDelete()\r\n                }\r\n                model.value = undefined\r\n                state.chooseBase64 = undefined\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {(!!model.value || !!state.chooseBase64) && (\r\n                        <PlImage\r\n                            src={model.value || state.chooseBase64}\r\n                            fit={props.fit}\r\n                            alt={props.alt}\r\n                            position={props.position}\r\n                            previewOnClick={false}\r\n                            height={props.height}\r\n                            width={props.width}\r\n                            onClick={handler.onClickImage}\r\n                        />\r\n                    )}\r\n                    {state.status === ImageUploaderStatus.empty && <div class=\"pl-image-uploader-empty\" onClick={handler.onClick}>\r\n                        <PlIcon icon=\"el-icon-picture\"/>\r\n                        <span>待上传</span>\r\n                    </div>}\r\n                    {state.status === ImageUploaderStatus.fail && <div class=\"pl-image-uploader-fail\" onClick={handler.onClick}>\r\n                        <PlIcon icon=\"el-icon-close\"/>\r\n                        <span>上传失败</span>\r\n                    </div>}\r\n                    <div class=\"pl-image-uploader-button-group\">\r\n                        <div class=\"pl-image-uploader-button\" onClick={handler.onClick}>\r\n                            <PlIcon icon=\"el-icon-upload\"/>\r\n                        </div>\r\n                        <div class=\"pl-image-uploader-button\" onClick={handler.onClickDelete}>\r\n                            <PlIcon icon=\"el-icon-close-bold\"/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlImage} from \"./image\";\r\n\r\nexport default createComponentPlugin(PlImage)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlImageUploader} from \"../image/image-uploader\";\r\n\r\nexport default createComponentPlugin(PlImageUploader)","import {registryRootService} from \"../root/registryRootService\";\r\nimport {VNodeChild} from \"../../shims\";\r\nimport {onBeforeUnmount, onMounted, reactive, ref, Transition, provide} from 'vue';\r\nimport {createDefaultService} from \"../root/createDefaultService\";\r\nimport {createDefaultManager} from \"../root/createDefaultManager\";\r\nimport {getServiceWithoutContext} from \"../../utils/getServiceWithoutContext\";\r\nimport './contextmenu-service.scss'\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {PlDropdownOption} from \"../dropdown/dropdown-option\";\r\nimport {PlDropdownMenu} from \"../dropdown/dropdown-menu\";\r\n\r\ntype ContextmenuReference = MouseEvent | HTMLElement | { $el: HTMLElement } | { x: number, y: number }\r\ntype ContextContent = (() => VNodeChild) | { label: string, icon?: string, disabled?: string }[]\r\n\r\ninterface ContextmenuServiceOption {\r\n    reference: ContextmenuReference,\r\n    content: ContextContent,\r\n    width?: number,\r\n    height?: number,\r\n}\r\n\r\nfunction getReferencePosition(reference: ContextmenuReference): { top: number, left: number } {\r\n    if ('addEventListener' in reference || '$el' in reference) {\r\n        let el = '$el' in reference ? reference.$el : reference\r\n        const {top, left, height} = el.getBoundingClientRect()\r\n        return {\r\n            top: top + height,\r\n            left: left,\r\n        }\r\n    } else if ('clientX' in reference) {\r\n        const {clientX, clientY} = reference\r\n        return {\r\n            top: clientY,\r\n            left: clientX,\r\n        }\r\n    } else {\r\n        return {\r\n            top: reference.y,\r\n            left: reference.x,\r\n        }\r\n    }\r\n}\r\n\r\nconst Service = createDefaultService({\r\n    name: 'pl-contextmenu-service',\r\n    components: {\r\n        'pl-dropdown-option': PlDropdownOption,\r\n        'pl-dropdown-menu': PlDropdownMenu,\r\n    },\r\n    setup(option: ContextmenuServiceOption) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n        const isShow = ref(false)\r\n        const isOpen = ref(false)\r\n        const state = reactive({\r\n            option,\r\n            zIndex: nextIndex(),\r\n        })\r\n        const mounted = new Promise(resolve => onMounted(resolve))\r\n        let hideTimer: number | null = null\r\n        let onTransitionEnd: (() => void) | null = null\r\n\r\n        const methods = {\r\n            service: (option: ContextmenuServiceOption) => {\r\n                state.option = option\r\n                methods.show()\r\n                return methods.hide\r\n            },\r\n            show: async () => {\r\n                if (!!hideTimer) clearTimeout(hideTimer)\r\n                state.zIndex = nextIndex()\r\n                await mounted;\r\n                isShow.value = true\r\n                onTransitionEnd = () => {\r\n                    isOpen.value = true\r\n                    onTransitionEnd = null\r\n                }\r\n            },\r\n            hide: () => {\r\n                isShow.value = false\r\n                onTransitionEnd = () => {\r\n                    isOpen.value = false\r\n                    onTransitionEnd = null\r\n                }\r\n            },\r\n        }\r\n\r\n        const styles = useStyles(style => {\r\n            const {top, left} = getReferencePosition(state.option.reference)\r\n            style.top = `${top}px`\r\n            style.left = `${left}px`\r\n            style.zIndex = state.zIndex\r\n        })\r\n\r\n        const bodyStyles = useStyles(style => {\r\n            const {width, height} = state.option\r\n            !!width && (style.width = `${width}px`);\r\n            !!height && (style.height = `${height}px`);\r\n        })\r\n\r\n        const handler = {\r\n            onTransitionEnd: () => !!onTransitionEnd && onTransitionEnd(),\r\n            onMousedownWindow: (e: MouseEvent) => {\r\n                if (!refs.el.contains(e.target as HTMLDivElement)) {\r\n                    hideTimer = setTimeout(() => methods.hide(), 50)\r\n                }\r\n            },\r\n            clickDropdownOption: () => {\r\n                methods.hide()\r\n            },\r\n        }\r\n\r\n        document.body.addEventListener('mouseup', handler.onMousedownWindow)\r\n        onBeforeUnmount(() => document.body.removeEventListener('mouseup', handler.onMousedownWindow))\r\n\r\n        provide('@@pl-dropdown', {handler})\r\n\r\n        return {\r\n            refer: {\r\n                state,\r\n                isShow,\r\n                isOpen,\r\n                ...methods,\r\n            },\r\n            render: () => {\r\n\r\n                let content: VNodeChild;\r\n                if (typeof state.option.content === \"function\") {\r\n                    content = state.option.content()\r\n                } else {\r\n                    content = state.option.content.map(item => <div>\r\n                        {item.label}\r\n                    </div>)\r\n                }\r\n\r\n                return (\r\n                    <div class=\"pl-contextmenu-service\" style={styles.value} ref=\"el\" {...{show: String(isShow.value)} as any}>\r\n                        <Transition name=\"pl-transition-scale\" onAfterEnter={handler.onTransitionEnd} onAfterLeave={handler.onTransitionEnd}>\r\n                            <div class=\"pl-contextmenu-service-body\" v-show={isShow.value} style={bodyStyles.value}>\r\n                                {content}\r\n                            </div>\r\n                        </Transition>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\ntype ServiceComponent = typeof Service.use.class\r\n\r\nexport const getContextmenuService = registryRootService(\r\n    'contextmenu',\r\n    createDefaultManager('pl-contextmenu-service-manager', Service, ((items: ServiceComponent[], option: ContextmenuServiceOption) => {\r\n\r\n        const newPos = getReferencePosition(option.reference)\r\n        let exist: ServiceComponent | null = null\r\n        let available: ServiceComponent | null = null\r\n        items.forEach(item => {\r\n            if (!!exist) {\r\n                return\r\n            }\r\n            if (item.state.option === option) {\r\n                exist = item\r\n                return;\r\n            }\r\n            const oldPos = getReferencePosition(item.state.option.reference)\r\n            if (oldPos.top === newPos.top && oldPos.left === newPos.left) {\r\n                exist = item\r\n                return;\r\n            }\r\n            if (!item.isShow.value && !item.isOpen.value) {\r\n                available = item\r\n            }\r\n        })\r\n        return exist || available\r\n    }) as any),\r\n    (getManager) => {\r\n        return async (reference: ContextmenuReference, content: ContextContent) => {\r\n            const option = {reference, content}\r\n            const manager = await getManager()\r\n            return manager.service(option)\r\n        }\r\n    }\r\n)\r\n\r\nexport const $$contextmenu = getServiceWithoutContext(getContextmenuService)","import {PlTabComponent} from \"./tab\";\r\n\r\nexport enum TabHeadType {\r\n    text = 'text',\r\n    card = 'card',\r\n}\r\n\r\nexport enum TabHeadPosition {\r\n    top = 'top',\r\n    bottom = 'bottom',\r\n    left = 'left',\r\n    right = 'right',\r\n}\r\n\r\nexport type TabData = { item: PlTabComponent, index: number, active: boolean }","import {App} from \"vue\";\r\nimport {getContextmenuService} from \"./contextmenu-service\";\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            beforeCreate() {\r\n                Object.defineProperty(this, '$contextmenu', {\r\n                    get() {\r\n                        return getContextmenuService(this)\r\n                    },\r\n                })\r\n            },\r\n        })\r\n    },\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {TabCollector} from \"./tabs\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\n\r\nexport const PlTab = designComponent({\r\n    name: 'pl-tab',\r\n    props: {\r\n        title: {type: String},                              // 页签标题\r\n        init: {type: Boolean},                              // 是否立即初始化（默认第一次点击页签的时候才会初始化内容）\r\n        val: {type: [String, Number]},                      // 页签唯一标识，用于 pl-tabs 绑定值\r\n        destroyOnHide: {type: Boolean},                     // 是否再隐藏页签的时候销毁页签页面(重新打开页签的时候，页签内容会重新初始化)\r\n    },\r\n    setup({props}) {\r\n        const {refs} = useRefs({\r\n            el: HTMLSpanElement,\r\n        })\r\n        const {slots} = useSlots()\r\n        const {scopedSlots} = useScopedSlots({\r\n            head: {active: Boolean},\r\n        })\r\n        TabCollector.child({sort: () => refs.el})\r\n\r\n        return {\r\n            refer: {\r\n                slots,\r\n                scopedSlots,\r\n                props,\r\n            },\r\n            render: () => (<span ref=\"el\">{props.title}</span>)\r\n        }\r\n    },\r\n})\r\n\r\nexport type PlTabComponent = typeof PlTab.use.class","import {designComponent} from \"../../use/designComponent\";\r\nimport {PropType, reactive, onMounted, onBeforeUnmount, computed} from 'vue';\r\nimport {TabData} from \"./tabs.utils\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\n\r\nexport const PlTabsHeader = designComponent({\r\n    props: {\r\n        tabs: {type: Array as PropType<TabData[]>, required: true},\r\n    },\r\n    emits: {\r\n        onClickTabHead: (tab: TabData) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n            list: HTMLDivElement,\r\n        })\r\n\r\n        const state = reactive({\r\n            offsetData: {\r\n                listLeft: 0,                    // list元素当前left值\r\n                hostWidth: 0,                   // 容器宽度\r\n                totalWidth: 0,                  // 总的item宽度\r\n                children: [] as { left: number, width: number }[],\r\n            },\r\n        })\r\n\r\n        const utils = {\r\n            refreshOffsetData: () => {\r\n                const {offsetWidth} = refs.el\r\n                const {children} = refs.list\r\n                state.offsetData.hostWidth = offsetWidth;\r\n                state.offsetData.children = (Array.from(children) as HTMLDivElement[]).reduce((prev, item, index) => {\r\n                    const {offsetLeft, offsetWidth} = item\r\n                    /*最后一个是 indicator，所以这里找最后一个child是-2*/\r\n                    if (index === children.length - 2) {state.offsetData.totalWidth = offsetLeft + offsetWidth}\r\n                    prev.push({left: offsetLeft, width: offsetWidth})\r\n                    return prev\r\n                }, [] as { left: number, width: number }[])\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            onMousewheel: (e: MouseWheelEvent) => {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                const {totalWidth, hostWidth, listLeft} = state.offsetData\r\n                if (totalWidth < hostWidth) {return}\r\n                const delta = ((Math.abs(e.deltaX) > Math.abs(e.deltaY) ? e.deltaX : e.deltaY))\r\n                let target = listLeft - delta\r\n                if (target > 0) {\r\n                    target = 0\r\n                } else if (target < (hostWidth - totalWidth)) {\r\n                    target = hostWidth - totalWidth\r\n                }\r\n                state.offsetData.listLeft = target\r\n            }\r\n        }\r\n\r\n        const listStyles = useStyles(style => {\r\n            style.left = `${state.offsetData.listLeft}px`\r\n        })\r\n        const indicatorStyle = useStyles(style => {\r\n            const index = props.tabs.findIndex(i => i.active)\r\n            if (index == null || index === -1) return\r\n            const el = state.offsetData.children[index]\r\n            if (!el) return;\r\n            const {left, width} = el\r\n            style.left = `${left}px`\r\n            style.width = `${width}px`\r\n        })\r\n\r\n        let refreshTimer: number;\r\n        onMounted(() => {\r\n            refreshTimer = setInterval(() => utils.refreshOffsetData(), 1000)\r\n        })\r\n        onBeforeUnmount(() => {\r\n            clearInterval(refreshTimer)\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-tabs-header\" onWheel={handler.onMousewheel} ref=\"el\">\r\n                    <div class=\"pl-tabs-header-list\" style={listStyles.value} ref=\"list\">\r\n                        {props.tabs.map((tab, index) => (\r\n                            <div class={[\r\n                                'pl-tabs-header-item',\r\n                                {'pl-tabs-header-item-active': tab.active}\r\n                            ]} key={index}\r\n                                 onClick={() => emit.onClickTabHead(tab)}\r\n                            >\r\n                                {tab.item.scopedSlots.head({active: false}, tab.item.props.title)}\r\n                            </div>\r\n                        ))}\r\n                        <i class=\"pl-tabs-header-indicator\" style={indicatorStyle.value}/>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {PropType, reactive, nextTick, watch, Transition} from 'vue';\r\nimport {PlTabComponent} from \"./tab\";\r\n\r\nexport const PlInnerTab = designComponent({\r\n    props: {\r\n        item: {type: Object as PropType<PlTabComponent>, required: true},\r\n        active: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n\r\n        const state = reactive({\r\n            show: false,\r\n            init: props.item.props.init,\r\n        })\r\n\r\n        const methods = {\r\n            show: async () => {\r\n                if (state.show) return\r\n                else {\r\n                    if (!state.init) {\r\n                        state.init = true\r\n                        await nextTick()\r\n                    }\r\n                    state.show = true\r\n                }\r\n            },\r\n            hide: async () => {\r\n                if (!state.show) return\r\n                else {\r\n                    state.show = false\r\n                    if (props.item!.props.destroyOnHide) {\r\n                        await nextTick()\r\n                        state.init = false\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        watch(() => props.active, async (val) => {val ? await methods.show() : await methods.hide()}, {immediate: true})\r\n\r\n        return {\r\n            render: () => (\r\n                <Transition name=\"pl-transition-tab\">\r\n                    <div class=\"pl-inner-tab\" v-show={props.active}>\r\n                        {!!state.init && props.item.slots.default()}\r\n                    </div>\r\n                </Transition>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {PropType, onMounted, computed} from 'vue';\r\nimport {TabData, TabHeadPosition, TabHeadType} from \"./tabs.utils\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {PlTab, PlTabComponent} from \"./tab\";\r\nimport {PlTabsHeader} from \"./tabs-header\";\r\nimport './tab.scss'\r\nimport {PlInnerTab} from \"./inner-tab\";\r\n\r\nexport const PlTabs = designComponent({\r\n    name: 'pl-tabs',\r\n    props: {\r\n        modelValue: {type: [String, Number]},\r\n        headType: {type: String as PropType<TabHeadType>, default: TabHeadType.text},\r\n        headPosition: {type: String as PropType<TabHeadType>, default: TabHeadPosition.top},\r\n        closeable: {type: Boolean},\r\n    },\r\n    emits: {\r\n        updateModelValue: (val?: string | number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n        const model = useModel(() => props.modelValue, emit.updateModelValue)\r\n        const items = TabCollector.parent()\r\n\r\n        const tabs = computed(() => items.map((item, index) => ({\r\n            item,\r\n            index,\r\n            active: (() => {\r\n                const {val} = item.props\r\n                if (val != null) {\r\n                    return model.value == val\r\n                }\r\n                if (model.value != null) {\r\n                    return model.value == index\r\n                }\r\n                return index == 0\r\n            })(),\r\n        })))\r\n\r\n        const handler = {\r\n            onClickTabHeader: ({item, index, active}: TabData) => {\r\n                const {props: {val}} = item\r\n                if (active) {return}\r\n                model.value = val == null ? index : val\r\n            }\r\n        }\r\n\r\n        onMounted(() => {\r\n            // console.log(items, model)\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <div class=\"pl-tabs\">\r\n                        <div class=\"pl-tabs-collector\">{slots.default()}</div>\r\n                        <PlTabsHeader tabs={tabs.value} onClickTabHead={handler.onClickTabHeader}/>\r\n                        <div class=\"pl-tabs-body\">\r\n                            {tabs.value.map((tab, index) => (\r\n                                <PlInnerTab item={tab.item} key={index} active={tab.active}/>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport const TabCollector = useCollect(() => ({\r\n    parent: PlTabs,\r\n    child: PlTab,\r\n}))","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlTabs} from \"../tab/tabs\";\r\n\r\nexport default createComponentPlugin(PlTabs)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlTab} from \"./tab\";\r\n\r\nexport default createComponentPlugin(PlTab)","import {App} from \"vue\"\r\nimport {ComponentPlugin} from \"./shims\";\r\nimport {installPlugin} from \"./utils/installPlugin\";\r\n\r\nimport Root from './packages/root'\r\nimport Button from \"./packages/button\";\r\nimport ButtonGroup from './packages/button-group'\r\nimport Input from \"./packages/input\";\r\nimport InputInnerTags from './packages/input-inner-tags'\r\nimport Icon from './packages/icon';\r\nimport Loading from './packages/loading'\r\nimport LoadingMask from './packages/loading-mask'\r\nimport Checkbox from './packages/checkbox'\r\nimport CheckboxGroup from './packages/checkbox-group'\r\nimport CheckboxInner from './packages/checkbox-inner'\r\nimport MessageService from './packages/message'\r\nimport List from './packages/list'\r\nimport Item from './packages/item'\r\nimport Grid from './packages/grid'\r\nimport Row from './packages/row'\r\nimport Col from './packages/col'\r\nimport Radio from './packages/radio'\r\nimport RadioInner from './packages/radio-inner'\r\nimport RadioGroup from './packages/radio-group'\r\nimport Dialog from './packages/dialog'\r\nimport DialogService from './packages/dialog-service'\r\nimport Scroll from './packages/scroll'\r\nimport NoticeService from './packages/notice-service'\r\nimport LoadingService from './packages/loading-service'\r\nimport Number from './packages/number'\r\nimport Toggle from './packages/toggle'\r\nimport Slider from './packages/slider'\r\nimport Tag from './packages/tag'\r\nimport TagInput from './packages/tag-input'\r\nimport Rate from './packages/rate'\r\nimport VirtualList from './packages/virtual-list'\r\nimport Progress from './packages/progress'\r\nimport ProgressBar from './packages/progress-bar'\r\nimport ProgressCircle from './packages/progress-circle'\r\nimport ProgressMini from './packages/progress-mini'\r\nimport Pagination from './packages/pagination'\r\nimport Badge from './packages/badge'\r\nimport Step from './packages/step'\r\nimport StepGroup from './packages/step-group'\r\nimport ArrowStep from './packages/arrow-step'\r\nimport ArrowStepGroup from './packages/arrow-step-group'\r\nimport Popper from './packages/popper'\r\nimport Dropdown from './packages/dropdown'\r\nimport DropdownGroup from './packages/dropdown-group'\r\nimport DropdownMenu from './packages/dropdown-menu'\r\nimport DropdownOption from './packages/dropdown-option'\r\nimport Tooltip from './packages/tooltip'\r\nimport Alert from './packages/alert'\r\nimport Collapse from './packages/collapse'\r\nimport CollapseGroup from './packages/collapse-group'\r\nimport CollapseTransition from './packages/collapse-transition'\r\nimport Card from './packages/card'\r\nimport Carousel from './packages/carousel'\r\nimport CarouselItem from './packages/carousel-item'\r\nimport ColorPicker from './packages/color-picker'\r\nimport ColorButton from './packages/color-button'\r\nimport Cascade from './packages/cascade'\r\nimport Tree from './packages/tree'\r\nimport Select from './packages/select'\r\nimport SelectOption from './packages/select-option'\r\nimport SelectGroup from './packages/select-group'\r\nimport DateTimeInput from './packages/date-time-input'\r\nimport Time from './packages/time'\r\nimport Date from './packages/date'\r\nimport Form from './packages/form'\r\nimport FormItem from './packages/form-item'\r\nimport Table from './packages/table'\r\nimport VirtualTable from './packages/virtual-table'\r\nimport Plc from './packages/plc'\r\nimport PlcGroup from './packages/plc-group'\r\nimport Upload from './packages/upload'\r\nimport Nav from './packages/nav'\r\nimport FileService from './packages/file-service'\r\nimport Image from './packages/image'\r\nimport ImageUploader from './packages/image-uploader'\r\nimport Contextmenu from './packages/contextmenu'\r\nimport Tabs from './packages/tabs'\r\nimport Tab from './packages/tab'\r\n\r\nfunction install(app: App) {\r\n    installPlugin(app, plugins)\r\n}\r\n\r\nconst plugins: ComponentPlugin[] = [\r\n    Root,\r\n\r\n    Button, ButtonGroup, Icon, Loading, LoadingMask,\r\n    List, Item, Grid, Dialog, Scroll, VirtualList, Progress, ProgressBar,\r\n    ProgressCircle, ProgressMini, Pagination, Badge,\r\n    Step, StepGroup, ArrowStep, ArrowStepGroup, Popper, Dropdown, DropdownGroup,\r\n    DropdownMenu, DropdownOption, InputInnerTags,\r\n    Tooltip, Alert, Collapse, CollapseGroup, CollapseTransition, Card,\r\n    Carousel, CarouselItem, Table, VirtualTable, Plc, PlcGroup, Nav, Row, Col, Tabs, Tab,\r\n\r\n    Input, CheckboxInner, Checkbox, CheckboxGroup, Radio, RadioInner, RadioGroup, Number, Toggle, Slider,\r\n    Tag, TagInput, Rate, ColorPicker, ColorButton, Cascade, Tree, Select, SelectOption, SelectGroup, Time,\r\n    DateTimeInput, Date, Form, FormItem, Upload, Image, ImageUploader,\r\n\r\n    MessageService, DialogService, NoticeService, LoadingService, FileService, Contextmenu,\r\n]\r\n\r\nexport {\r\n    install, Root,\r\n\r\n    Button, ButtonGroup, Icon, Loading, LoadingMask,\r\n    List, Item, Grid, Dialog, Scroll, VirtualList, Progress, ProgressBar,\r\n    ProgressCircle, ProgressMini, Pagination, Badge,\r\n    Step, StepGroup, ArrowStep, ArrowStepGroup, Popper, Dropdown, DropdownGroup,\r\n    DropdownMenu, DropdownOption, InputInnerTags,\r\n    Tooltip, Alert, Collapse, CollapseGroup, CollapseTransition, Card,\r\n    Carousel, CarouselItem, Table, VirtualTable, Plc, PlcGroup, Nav, Row, Col, Tabs, Tab,\r\n\r\n    Input, CheckboxInner, Checkbox, CheckboxGroup, Radio, RadioInner, RadioGroup, Number, Toggle, Slider,\r\n    Tag, TagInput, Rate, ColorPicker, ColorButton, Cascade, Tree, Select, SelectOption, SelectGroup, Time,\r\n    DateTimeInput, Date, Form, FormItem, Upload, Image, ImageUploader,\r\n\r\n    MessageService, DialogService, NoticeService, LoadingService, FileService, Contextmenu,\r\n}\r\n\r\nexport default {\r\n    install,\r\n}"],"sourceRoot":""}