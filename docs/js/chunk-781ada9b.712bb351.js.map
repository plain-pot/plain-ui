{"version":3,"sources":["webpack:///./story/pages/use/useEvent/demo-use-event.vue?cbdc","webpack:///./story/pages/use/useEvent/demo-use-event.vue","webpack:///./story/pages/use/useEvent/DemoUseEventTable.tsx","webpack:///./story/pages/use/useEvent/DemoUseEventTableHead.tsx","webpack:///./story/pages/use/useEvent/DemoUseEventTableBody.tsx","webpack:///./story/pages/use/useEvent/demo-use-event.vue?7514"],"names":["class","style","for","state","currentPart","count","type","id","showHeader","onScroll","tips","item","key","label","done","DemoUseEventTablePart","DemoUseEventTableHead","designComponent","setup","wrapperEl","table","DemoUseEventTable","use","inject","handler","scroll","e","part","body","value","scrollLeft","target","wrapperScroll","hoverPart","head","event","emit","mousewheel","deltaY","on","off","render","onMousewheel","DemoUseEventTableBody","altKey","preventDefault","stopPropagation","name","props","Boolean","default","emits","provideRefer","refer","onMouseenter","components"],"mappings":"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","file":"js/chunk-781ada9b.712bb351.js","sourcesContent":["export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./demo-use-event.vue?vue&type=style&index=0&lang=scss\"","<template>\r\n    <div class=\"demo-use-event\">\r\n        <div style=\"display: inline-block;width: 360px\">\r\n            <div>\r\n                当前滚动位置:{{!!state.currentPart?`${state.currentPart} (${state.count})`:'无'}}\r\n            </div>\r\n            <h3>\r\n                <input type=\"checkbox\" id=\"showHeader\" v-model=\"state.showHeader\">\r\n                <label for=\"showHeader\">showHeader</label>\r\n            </h3>\r\n            <demo-use-event-table @scroll=\"onScroll\" :showHeader=\"state.showHeader\"/>\r\n        </div>\r\n        <ul style=\"display: inline-block; vertical-align: top\">\r\n            <li v-for=\"item in state.tips\" :key=\"item.label\">\r\n                <button v-if=\"!item.done\" style=\"margin-right: 8px\" @click=\"()=>item.done = true\">done</button>\r\n                <span>{{item.label}}</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {DemoUseEventTable} from \"./DemoUseEventTable\";\r\n    import {reactive} from 'vue'\r\n\r\n    export default {\r\n        name: \"demo-use-event\",\r\n        components: {\r\n            DemoUseEventTable\r\n        },\r\n        setup() {\r\n            const state = reactive({\r\n                showHeader: true,\r\n                currentPart: null,\r\n                count: 0,\r\n\r\n                tips: [\r\n                    {label: '使用鼠标的滚轮进行纵向滚动', done: false},\r\n                    {label: '拖拽横向滚动条横向联动滚动', done: false},\r\n                    {label: '在表头、表体使用触摸板横向，以及纵向滚动', done: false},\r\n                    {label: '在表头使用鼠标滚动横向滚动', done: false},\r\n                    {label: '在表体使用 alt+鼠标滚动 横向滚动', done: false},\r\n                ],\r\n            })\r\n\r\n\r\n            return {\r\n                state,\r\n                onScroll: (e, part) => {\r\n                    if (part === state.currentPart) {\r\n                        state.count++\r\n                    } else {\r\n                        state.currentPart = part\r\n                        state.count = 0\r\n                    }\r\n                }\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .demo-use-event-table {\r\n        width: 300px;\r\n\r\n        .demo-use-event-table-head {\r\n            width: 100%;\r\n            overflow-x: auto;\r\n\r\n            .demo-use-event-table-head-inner {\r\n                width: 600px;\r\n                height: 60px;\r\n                background-color: #f6f6f6;\r\n                font-size: 40px;\r\n            }\r\n        }\r\n\r\n        .demo-use-event-table-body {\r\n            width: 100%;\r\n            overflow-x: auto;\r\n            height: 300px;\r\n\r\n            .demo-use-event-table-body-inner {\r\n                width: 600px;\r\n                height: 600px;\r\n                background-color: #f2f2f2;\r\n                font-size: 120px;\r\n            }\r\n        }\r\n    }\r\n</style>","import {designComponent} from \"../../../../src/use/designComponent\";\r\nimport {DemoUseEventTableHead} from \"./DemoUseEventTableHead\";\r\nimport {DemoUseEventTableBody} from \"./DemoUseEventTableBody\";\r\nimport {reactive} from 'vue';\r\n\r\nexport enum DemoUseEventTablePart {\r\n    head = 'head',\r\n    body = 'body',\r\n}\r\n\r\nexport const DemoUseEventTable = designComponent({\r\n    name: 'demo-sue-event-table',\r\n    props: {\r\n        showHeader: {type: Boolean, default: true},\r\n    },\r\n    emits: {\r\n        scroll: (e: Event, part: DemoUseEventTablePart) => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event}) {\r\n\r\n        const state = reactive({\r\n            hoverPart: null as null | DemoUseEventTablePart\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                state,\r\n                event,\r\n            },\r\n            render: () => (\r\n                <div class=\"demo-use-event-table\" onMouseleave={() => state.hoverPart = null}>\r\n\r\n                    {!!props.showHeader &&\r\n                    <DemoUseEventTableHead {...{\r\n                        onMouseenter: () => state.hoverPart = DemoUseEventTablePart.head\r\n                    }}/>}\r\n\r\n                    <DemoUseEventTableBody {...{\r\n                        onMouseenter: () => state.hoverPart = DemoUseEventTablePart.body\r\n                    }}/>\r\n\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../../src/use/designComponent\";\r\nimport {DemoUseEventTable, DemoUseEventTablePart} from \"./DemoUseEventTable\";\r\nimport {onBeforeUnmount, ref} from 'vue';\r\n\r\nexport const DemoUseEventTableHead = designComponent({\r\n    setup() {\r\n\r\n        const wrapperEl = ref(null as null | HTMLDivElement)\r\n        const table = DemoUseEventTable.use.inject()\r\n\r\n        const handler = {\r\n            /**\r\n             * 组件销毁的时候，如果不取消监听事件，则监听的事件一直有效\r\n             * 此时 wrapperEl  节点已经销毁，会导致一直报错\r\n             * @author  韦胜健\r\n             * @date    2020/10/29 16:14\r\n             */\r\n            scroll: (e: Event, part: DemoUseEventTablePart) => {\r\n                // console.log('head handle scroll', Date.now())\r\n                if (part === DemoUseEventTablePart.body) {\r\n                    wrapperEl.value!.scrollLeft = (e.target as HTMLDivElement).scrollLeft\r\n                }\r\n            },\r\n            wrapperScroll: (e: Event) => {\r\n                if (table.state.hoverPart === DemoUseEventTablePart.head) {\r\n                    table.event.emit.scroll(e, DemoUseEventTablePart.head)\r\n                }\r\n            },\r\n            mousewheel: (e: MouseWheelEvent) => {\r\n                wrapperEl.value!.scrollLeft = wrapperEl.value!.scrollLeft + e.deltaY\r\n            }\r\n        }\r\n\r\n        table.event.on.scroll(handler.scroll)\r\n        onBeforeUnmount(() => table.event.off.scroll(handler.scroll))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"demo-use-event-table-head\"\r\n                     ref={wrapperEl}\r\n                     onScroll={handler.wrapperScroll}\r\n                     {...{onMousewheel: handler.mousewheel}}>\r\n                    <div class=\"demo-use-event-table-head-inner\">\r\n                        table head\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../../src/use/designComponent\";\r\nimport {DemoUseEventTable, DemoUseEventTablePart} from \"./DemoUseEventTable\";\r\nimport {onBeforeUnmount, ref} from 'vue';\r\n\r\nexport const DemoUseEventTableBody = designComponent({\r\n    setup() {\r\n\r\n        const wrapperEl = ref(null as null | HTMLDivElement)\r\n        const table = DemoUseEventTable.use.inject()\r\n\r\n        const handler = {\r\n            scroll: (e: Event, part: DemoUseEventTablePart) => {\r\n                if (part === DemoUseEventTablePart.head) {\r\n                    wrapperEl.value!.scrollLeft = (e.target as HTMLDivElement).scrollLeft\r\n                }\r\n            },\r\n            wrapperScroll: (e: Event) => {\r\n                if (table.state.hoverPart === DemoUseEventTablePart.body) {\r\n                    table.event.emit.scroll(e, DemoUseEventTablePart.body)\r\n                }\r\n            },\r\n            mousewheel: (e: MouseWheelEvent) => {\r\n                if (e.altKey) {\r\n                    wrapperEl.value!.scrollLeft = wrapperEl.value!.scrollLeft + e.deltaY\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                }\r\n            }\r\n        }\r\n\r\n        table.event.on.scroll(handler.scroll)\r\n        onBeforeUnmount(() => table.event.off.scroll(handler.scroll))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"demo-use-event-table-body\"\r\n                     ref={wrapperEl}\r\n                     onScroll={handler.wrapperScroll}\r\n                     {...{onMousewheel: handler.mousewheel}}>\r\n                    <div class=\"demo-use-event-table-body-inner\">\r\n                        table <br/> body\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import { render } from \"./demo-use-event.vue?vue&type=template&id=98505978&bindings={\\\"state\\\":\\\"setup\\\",\\\"onScroll\\\":\\\"setup\\\"}\"\nimport script from \"./demo-use-event.vue?vue&type=script&lang=js\"\nexport * from \"./demo-use-event.vue?vue&type=script&lang=js\"\n\nimport \"./demo-use-event.vue?vue&type=style&index=0&lang=scss\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}