{"version":3,"sources":["webpack://CustomApplicationmain-application/./story/pages/service/image-service.vue","webpack://CustomApplicationmain-application/./story/pages/service/image-service.vue?9802"],"names":["class","title","getImageFile","testMeasureCompress","testSizeCompress","compressData","before","src","after","previewSingleImage","urls","item","index","key","previewMultipleImage","name","data","methods","multiple","$image","choose","files","Array","isArray","$notice","map","f","join","$$file","readAsDataURL","Promise","resolve","state","maxHeight","maxWidth","dialog","$dialog","confirmButton","cancelButton","closeOnConfirm","render","onConfirm","$message","error","close","config","compress","editType","maxSize","url","preview"],"mappings":"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","file":"js/chunk-2d0e1b27.fd1e3628.js","sourcesContent":["<template>\r\n    <div class=\"demo-image-service\">\r\n        <demo-row title=\"获取图片文件\">\r\n            <pl-button @click=\"getImageFile()\">获取单个文件</pl-button>\r\n            <pl-button @click=\"getImageFile(true)\">获取多个文件</pl-button>\r\n        </demo-row>\r\n        <demo-row title=\"压缩图片\">\r\n            <pl-button @click=\"testMeasureCompress\">按照尺寸压缩</pl-button>\r\n            <pl-button @click=\"testSizeCompress\">按照容量压缩</pl-button>\r\n            <img :src=\"compressData.before\" v-if=\"compressData.before\">\r\n            <img :src=\"compressData.after\" v-if=\"compressData.after\">\r\n        </demo-row>\r\n        <demo-row title=\"预览图片\">\r\n            <demo-row title=\"预览单张图片\">\r\n                <img src=\"http://pic2.sc.chinaz.com/Files/pic/pic9/201908/hpic1329_s.jpg\" @click=\"previewSingleImage('http://pic2.sc.chinaz.com/Files/pic/pic9/201908/hpic1329_s.jpg')\">\r\n            </demo-row>\r\n            <demo-row title=\"预览多张图片\">\r\n                <img v-for=\"(item,index) in urls\" :src=\"item\" :key=\"index\" @click=\"previewMultipleImage(urls,index)\">\r\n            </demo-row>\r\n        </demo-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import {Image} from 'plain-ui'\r\n\r\n    export default {\r\n        name: \"image-service\",\r\n        data() {\r\n            return {\r\n                compressData: {\r\n                    before: null,\r\n                    after: null,\r\n                },\r\n                urls: [\r\n                    'http://pic2.sc.chinaz.com/Files/pic/pic9/201908/hpic1329_s.jpg',\r\n                    'http://pic2.sc.chinaz.com/Files/pic/pic9/201908/hpic1327_s.jpg',\r\n                    'http://pic2.sc.chinaz.com/Files/pic/pic9/201908/hpic1328_s.jpg',\r\n                    'http://pic2.sc.chinaz.com/Files/pic/pic9/201908/bpic13052_s.jpg',\r\n                    'error.jpg',\r\n                    null,\r\n                ],\r\n            }\r\n        },\r\n        methods: {\r\n            async getImageFile(multiple) {\r\n                const data = await Image.$image.choose(multiple)\r\n                const files = Array.isArray(data) ? data : [data]\r\n                this.$notice(files.map(f => f.name).join(','))\r\n            },\r\n            async testMeasureCompress() {\r\n                const before = await this.$$file.readAsDataURL(await Image.$image.choose())\r\n                const config = await new Promise((resolve) => {\r\n                    const state = {\r\n                        maxHeight: null,\r\n                        maxWidth: null,\r\n                    }\r\n                    const dialog = this.$dialog({\r\n                        confirmButton: true,\r\n                        cancelButton: true,\r\n                        closeOnConfirm: false,\r\n                        render: () => (<div>\r\n                            <pl-form centerWhenSingleColumn={true}>\r\n                                <pl-form-item label=\"最大高度\">\r\n                                    <pl-number v-model={state.maxHeight}/>\r\n                                </pl-form-item>\r\n                                <pl-form-item label=\"最大宽度\">\r\n                                    <pl-number v-model={state.maxWidth}/>\r\n                                </pl-form-item>\r\n                            </pl-form>\r\n                        </div>),\r\n                        onConfirm: () => {\r\n                            if (!state.maxHeight && !state.maxWidth) {\r\n                                return this.$message.error('最大宽度与最大高度不能同时为空！')\r\n                            }\r\n                            resolve(state)\r\n                            dialog.close()\r\n                        },\r\n                    })\r\n                })\r\n                const after = await Image.$image.compress(before, config)\r\n                this.compressData = {before: null, after}\r\n            },\r\n            async testSizeCompress() {\r\n                const before = await this.$$file.readAsDataURL(await Image.$image.choose())\r\n                const maxSize = await new Promise((resolve) => {\r\n                    this.$dialog({\r\n                        title: '最大存储（单位MB）',\r\n                        editType: 'input',\r\n                        onConfirm: resolve,\r\n                        confirmButton: true,\r\n                    })\r\n                })\r\n                const after = await Image.$image.compress(before, {maxSize})\r\n                this.compressData = {before: null, after}\r\n            },\r\n            previewSingleImage(url) {\r\n                Image.$image.preview(url)\r\n            },\r\n            previewMultipleImage(urls, index) {\r\n                Image.$image.preview(urls, index)\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n</style>","import { render } from \"./image-service.vue?vue&type=template&id=269756b3\"\nimport script from \"./image-service.vue?vue&type=script&lang=js\"\nexport * from \"./image-service.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}