{"version":3,"sources":["webpack://CustomApplicationmain-application/./src/utils/PlainDate.ts","webpack://CustomApplicationmain-application/./src/packages/time/servce/time-service.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/refershPopperReference.tsx","webpack://CustomApplicationmain-application/./src/packages/button/index.ts","webpack://CustomApplicationmain-application/./src/packages/cascade/service/cascade-service.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/sub/color-hue-slider.tsx","webpack://CustomApplicationmain-application/./src/use/useStyle.ts","webpack://CustomApplicationmain-application/./src/use/useEdit.ts","webpack://CustomApplicationmain-application/./src/utils/createEventListener.ts","webpack://CustomApplicationmain-application/./src/utils/nextIndex.ts","webpack://CustomApplicationmain-application/./src/use/useModel.ts","webpack://CustomApplicationmain-application/./src/packages/notice-service/notice.tsx","webpack://CustomApplicationmain-application/./src/packages/notice-service/notice-container.tsx","webpack://CustomApplicationmain-application/./src/packages/notice-service/index.ts","webpack://CustomApplicationmain-application/./src/packages/notice-service/notice-manager.tsx","webpack://CustomApplicationmain-application/./src/utils/createFlagManager.ts","webpack://CustomApplicationmain-application/./src/packages/cascade/utils/CascadMark.ts","webpack://CustomApplicationmain-application/./src/packages/file-service/file-service.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/edit/createPopperServiceComponent.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/edit/createAgentGetter.tsx","webpack://CustomApplicationmain-application/./src/utils/installPlugin.ts","webpack://CustomApplicationmain-application/./src/packages/button/button.tsx","webpack://CustomApplicationmain-application/./src/packages/icon/index.ts","webpack://CustomApplicationmain-application/./src/utils/createKeyHandler.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/utils/Color.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/color-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/icon/icon.tsx","webpack://CustomApplicationmain-application/./src/packages/button-group/button-group.tsx","webpack://CustomApplicationmain-application/./src/utils/getServiceWithoutContext.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/sub/opacity.png","webpack://CustomApplicationmain-application/./src/use/useRefs.ts","webpack://CustomApplicationmain-application/./src/packages/list/index.ts","webpack://CustomApplicationmain-application/./src/use/useFunctionWrapper.ts","webpack://CustomApplicationmain-application/./src/utils/getSlotExists.ts","webpack://CustomApplicationmain-application/./src/packages/root/createDefaultManager.tsx","webpack://CustomApplicationmain-application/./src/plugins/Event.ts","webpack://CustomApplicationmain-application/./src/use/useEvent.ts","webpack://CustomApplicationmain-application/./src/utils/renderNothing.ts","webpack://CustomApplicationmain-application/./src/use/designComponent.ts","webpack://CustomApplicationmain-application/./src/packages/item/index.ts","webpack://CustomApplicationmain-application/./src/packages/root/root.tsx","webpack://CustomApplicationmain-application/./src/packages/root/index.ts","webpack://CustomApplicationmain-application/./src/utils/constant.ts","webpack://CustomApplicationmain-application/./src/use/useSlots.ts","webpack://CustomApplicationmain-application/./src/packages/keyboard/index.ts","webpack://CustomApplicationmain-application/./src/utils/createComponentPlugin.ts","webpack://CustomApplicationmain-application/./src/packages/root/createDefaultService.tsx","webpack://CustomApplicationmain-application/./src/packages/cascade/utils/CascadeNode.ts","webpack://CustomApplicationmain-application/./src/utils/createCounter.ts","webpack://CustomApplicationmain-application/./src/packages/cascade/panel/cascade-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/loading/index.ts","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-panel.utils.ts","webpack://CustomApplicationmain-application/./src/use/useCollect.ts","webpack://CustomApplicationmain-application/./src/packages/popper/index.ts","webpack://CustomApplicationmain-application/./src/packages/input/input.tsx","webpack://CustomApplicationmain-application/./src/utils/createError.ts","webpack://CustomApplicationmain-application/./src/use/useRefList.ts","webpack://CustomApplicationmain-application/./src/packages/loading/loading.tsx","webpack://CustomApplicationmain-application/./src/utils/getElement.ts","webpack://CustomApplicationmain-application/./src/packages/popper/trigger/BaseTrigger.ts","webpack://CustomApplicationmain-application/./src/packages/popper/trigger/PopperTrigger.ts","webpack://CustomApplicationmain-application/./src/packages/popper/popper.tsx","webpack://CustomApplicationmain-application/./src/utils/defer.ts","webpack://CustomApplicationmain-application/./src/use/useProps.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/sub/color-sv-panel.tsx","webpack://CustomApplicationmain-application/./src/plugins/ResizeDetector.ts","webpack://CustomApplicationmain-application/./src/packages/scroll/vertical-scrollbar.tsx","webpack://CustomApplicationmain-application/./src/packages/scroll/horizontal-scrollbar.tsx","webpack://CustomApplicationmain-application/./src/packages/scroll/scroll.tsx","webpack://CustomApplicationmain-application/./src/packages/message/message.tsx","webpack://CustomApplicationmain-application/./src/packages/message/message-container.tsx","webpack://CustomApplicationmain-application/./src/packages/message/index.ts","webpack://CustomApplicationmain-application/./src/packages/message/message-manager.tsx","webpack://CustomApplicationmain-application/./src/use/useStyles.ts","webpack://CustomApplicationmain-application/./src/utils/toArray.ts","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-range-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/nav/nav-page.tsx","webpack://CustomApplicationmain-application/./src/packages/nav/nav-stack.tsx","webpack://CustomApplicationmain-application/./src/packages/input/index.ts","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-base-column.tsx","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-base-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/root/registryRootService.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/utils/ColorUtils.ts","webpack://CustomApplicationmain-application/./src/use/useMounted.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/service/color-picker.service.tsx","webpack://CustomApplicationmain-application/./src/packages/list/list.tsx","webpack://CustomApplicationmain-application/./src/packages/icon/icons lazy ^\\.\\/.*\\.json$ namespace object","webpack://CustomApplicationmain-application/./src/packages/color-picker/sub/color-alpha-slider.tsx","webpack://CustomApplicationmain-application/./src/packages/item/item.tsx","webpack://CustomApplicationmain-application/./src/packages/click-wave/click-wave-directive.tsx","webpack://CustomApplicationmain-application/./src/use/useScopedSlots.ts","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/nav/nav.tsx","webpack://CustomApplicationmain-application/./src/use/useClasses.ts","webpack://CustomApplicationmain-application/./src/packages/button-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/input/input-inner-tags.tsx","webpack://CustomApplicationmain-application/./src/packages/input-inner-tags/index.ts","webpack://CustomApplicationmain-application/./src/packages/loading-mask/loading-mask.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-mask/index.tsx","webpack://CustomApplicationmain-application/./src/packages/checkbox-group/checkbox-group.tsx","webpack://CustomApplicationmain-application/./src/packages/checkbox-inner/checkbox-inner.tsx","webpack://CustomApplicationmain-application/./src/packages/checkbox/checkbox.tsx","webpack://CustomApplicationmain-application/./src/packages/grid/row.tsx","webpack://CustomApplicationmain-application/./src/packages/checkbox/index.ts","webpack://CustomApplicationmain-application/./src/packages/checkbox-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/checkbox-inner/index.ts","webpack://CustomApplicationmain-application/./src/packages/grid/index.ts","webpack://CustomApplicationmain-application/./src/packages/row/index.ts","webpack://CustomApplicationmain-application/./src/packages/grid/col.tsx","webpack://CustomApplicationmain-application/./src/packages/col/index.ts","webpack://CustomApplicationmain-application/./src/packages/radio-group/radio-group.tsx","webpack://CustomApplicationmain-application/./src/packages/radio-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/radio-inner/radio-inner.tsx","webpack://CustomApplicationmain-application/./src/packages/radio/radio.tsx","webpack://CustomApplicationmain-application/./src/packages/radio/index.ts","webpack://CustomApplicationmain-application/./src/packages/radio-inner/index.ts","webpack://CustomApplicationmain-application/./src/packages/dialog/dialog.tsx","webpack://CustomApplicationmain-application/./src/packages/dialog-service/index.ts","webpack://CustomApplicationmain-application/./src/packages/dialog/index.ts","webpack://CustomApplicationmain-application/./src/packages/dialog-service/dialog-service.tsx","webpack://CustomApplicationmain-application/./src/packages/scroll/index.ts","webpack://CustomApplicationmain-application/./src/utils/newInstance.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-service/mask/loading-mask-directive.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-service/bar/index.ts","webpack://CustomApplicationmain-application/./src/packages/loading-service/mask/loading-mask-service.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-service/mask/index.ts","webpack://CustomApplicationmain-application/./src/packages/loading-service/bar/loading-bar-service.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-service/index.ts","webpack://CustomApplicationmain-application/./src/packages/number/number.tsx","webpack://CustomApplicationmain-application/./src/packages/number/index.ts","webpack://CustomApplicationmain-application/./src/packages/toggle/toggle.tsx","webpack://CustomApplicationmain-application/./src/packages/toggle/index.ts","webpack://CustomApplicationmain-application/./src/packages/slider/slider.tsx","webpack://CustomApplicationmain-application/./src/packages/slider/index.ts","webpack://CustomApplicationmain-application/./src/packages/tag/tag.tsx","webpack://CustomApplicationmain-application/./src/packages/tag/index.ts","webpack://CustomApplicationmain-application/./src/packages/tag-input/tag-input.tsx","webpack://CustomApplicationmain-application/./src/packages/tag-input/index.ts","webpack://CustomApplicationmain-application/./src/packages/rate/rate.tsx","webpack://CustomApplicationmain-application/./src/packages/rate/index.ts","webpack://CustomApplicationmain-application/./src/packages/virtual-list/useVirtualList.tsx","webpack://CustomApplicationmain-application/./src/packages/virtual-list/virtual-list.tsx","webpack://CustomApplicationmain-application/./src/packages/virtual-list/index.ts","webpack://CustomApplicationmain-application/./src/packages/progress/progress.utils.ts","webpack://CustomApplicationmain-application/./src/packages/progress/progress-bar.tsx","webpack://CustomApplicationmain-application/./src/packages/progress/index.ts","webpack://CustomApplicationmain-application/./src/packages/progress-bar/index.ts","webpack://CustomApplicationmain-application/./src/utils/createAnimate.ts","webpack://CustomApplicationmain-application/./src/packages/progress/progress-circle.tsx","webpack://CustomApplicationmain-application/./src/packages/progress-circle/index.tsx","webpack://CustomApplicationmain-application/./src/packages/progress/progress-mini.tsx","webpack://CustomApplicationmain-application/./src/packages/progress-mini/index.ts","webpack://CustomApplicationmain-application/./src/use/useNumber.ts","webpack://CustomApplicationmain-application/./src/packages/select/select-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/select/select-group.tsx","webpack://CustomApplicationmain-application/./src/packages/select/select-option.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/edit/useEditPopperAgent.tsx","webpack://CustomApplicationmain-application/./src/packages/select/select-service.tsx","webpack://CustomApplicationmain-application/./src/packages/select/select.tsx","webpack://CustomApplicationmain-application/./src/packages/pagination/pagination.tsx","webpack://CustomApplicationmain-application/./src/packages/step/step.utils.ts","webpack://CustomApplicationmain-application/./src/packages/pagination/index.ts","webpack://CustomApplicationmain-application/./src/packages/badge/badge.tsx","webpack://CustomApplicationmain-application/./src/packages/badge/index.ts","webpack://CustomApplicationmain-application/./src/packages/step/step/step-group.tsx","webpack://CustomApplicationmain-application/./src/packages/step/step/step.tsx","webpack://CustomApplicationmain-application/./src/packages/step/index.ts","webpack://CustomApplicationmain-application/./src/packages/step-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/step/arrow-step/arrow-step-group.tsx","webpack://CustomApplicationmain-application/./src/packages/triangle/triangle.tsx","webpack://CustomApplicationmain-application/./src/packages/step/arrow-step/arrow-step.tsx","webpack://CustomApplicationmain-application/./src/packages/arrow-step/index.ts","webpack://CustomApplicationmain-application/./src/packages/arrow-step-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/dropdown/dropdown.tsx","webpack://CustomApplicationmain-application/./src/packages/dropdown/index.ts","webpack://CustomApplicationmain-application/./src/packages/dropdown/dropdown-group.tsx","webpack://CustomApplicationmain-application/./src/packages/dropdown-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/dropdown/dropdown-menu.tsx","webpack://CustomApplicationmain-application/./src/packages/dropdown-menu/index.ts","webpack://CustomApplicationmain-application/./src/packages/dropdown/dropdown-option.tsx","webpack://CustomApplicationmain-application/./src/packages/dropdown-option/index.ts","webpack://CustomApplicationmain-application/./src/packages/tooltip/tooltip.tsx","webpack://CustomApplicationmain-application/./src/packages/tooltip/tooltip-directive.tsx","webpack://CustomApplicationmain-application/./src/packages/tooltip/index.ts","webpack://CustomApplicationmain-application/./src/packages/collapse/collapse-transition.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/color-picker.tsx","webpack://CustomApplicationmain-application/./src/packages/alert/alert.tsx","webpack://CustomApplicationmain-application/./src/packages/alert/index.ts","webpack://CustomApplicationmain-application/./src/packages/collapse/collapse-group.tsx","webpack://CustomApplicationmain-application/./src/packages/collapse/collapse.tsx","webpack://CustomApplicationmain-application/./src/packages/collapse/index.ts","webpack://CustomApplicationmain-application/./src/packages/collapse-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/collapse-transition/index.ts","webpack://CustomApplicationmain-application/./src/packages/card/card.tsx","webpack://CustomApplicationmain-application/./src/packages/card/index.ts","webpack://CustomApplicationmain-application/./src/packages/carousel/carousel-item.tsx","webpack://CustomApplicationmain-application/./src/packages/carousel/carousel.tsx","webpack://CustomApplicationmain-application/./src/packages/carousel/index.ts","webpack://CustomApplicationmain-application/./src/packages/carousel-item/index.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/color-button.tsx","webpack://CustomApplicationmain-application/./src/packages/tree/utils/tree-constant.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/index.ts","webpack://CustomApplicationmain-application/./src/packages/color-button/index.ts","webpack://CustomApplicationmain-application/./src/packages/cascade/cascade.tsx","webpack://CustomApplicationmain-application/./src/packages/cascade/index.ts","webpack://CustomApplicationmain-application/./src/packages/tree/core/useTreeNode.ts","webpack://CustomApplicationmain-application/./src/packages/tree/core/useTree.ts","webpack://CustomApplicationmain-application/./src/packages/tree/utils/props.ts","webpack://CustomApplicationmain-application/./src/packages/tree/utils/tree.utils.ts","webpack://CustomApplicationmain-application/./src/use/useAutoScroll.ts","webpack://CustomApplicationmain-application/./src/utils/getRowEl.ts","webpack://CustomApplicationmain-application/./src/utils/getScrollParent.ts","webpack://CustomApplicationmain-application/./src/packages/tree/core/useTreeDraggier.ts","webpack://CustomApplicationmain-application/./src/packages/tree/tree.tsx","webpack://CustomApplicationmain-application/./src/packages/tree/index.ts","webpack://CustomApplicationmain-application/./src/packages/select/index.ts","webpack://CustomApplicationmain-application/./src/packages/select-option/index.ts","webpack://CustomApplicationmain-application/./src/packages/select-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/date-time-input/date-time-input.tsx","webpack://CustomApplicationmain-application/./src/packages/date-time-input/index.ts","webpack://CustomApplicationmain-application/./src/packages/date-time-input/useDateTime.ts","webpack://CustomApplicationmain-application/./src/packages/time/time.tsx","webpack://CustomApplicationmain-application/./src/packages/date/date.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/time/index.ts","webpack://CustomApplicationmain-application/./src/utils/prefix.ts","webpack://CustomApplicationmain-application/./src/packages/date/plainDate.ts","webpack://CustomApplicationmain-application/./src/packages/date/useDate.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-year.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-month.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-date.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-range.tsx","webpack://CustomApplicationmain-application/./src/packages/date/useDateWeek.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-week.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-quarter.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/date/date.service.tsx","webpack://CustomApplicationmain-application/./src/packages/date/date.tsx","webpack://CustomApplicationmain-application/./src/packages/form/form.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/form/form.validate.tsx","webpack://CustomApplicationmain-application/./src/packages/date/index.ts","webpack://CustomApplicationmain-application/./src/packages/form/form-item.tsx","webpack://CustomApplicationmain-application/./src/packages/form/form.tsx","webpack://CustomApplicationmain-application/./src/packages/form/index.ts","webpack://CustomApplicationmain-application/./src/packages/form-item/index.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/plc-collector.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/renderColgroup.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/head/useHeadCellResize.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/render.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/head/useColDraggier.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/head/head-cell.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/table.utils.ts","webpack://CustomApplicationmain-application/./src/packages/table/core/head/head.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/body/cell.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/utils/iteratePlcList.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/body/row.tsx","webpack://CustomApplicationmain-application/./src/packages/table/virtual-table.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/body/body.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/plc.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/copyPlcList.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processStateConfigAndProps.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processPlcSort.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processHeadPlcList.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processPlcFixed.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/getPltCellClass.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processPlcClassAndStyle.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/formatPlcList.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/usePlcList.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/useBindScroll.ts","webpack://CustomApplicationmain-application/./src/packages/table/core/useTableNode.ts","webpack://CustomApplicationmain-application/./src/packages/table/core/useTableGetScroll.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/useFixedShadow.ts","webpack://CustomApplicationmain-application/./src/packages/table/table.tsx","webpack://CustomApplicationmain-application/./src/packages/table/index.ts","webpack://CustomApplicationmain-application/./src/packages/virtual-table/index.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/plc.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/designPlc.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-input.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-number.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-date.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-color-picker.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-toggle.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-rate.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/plc-index.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/plc-expand.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/plc-check.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/core/utils.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/core/use-list-draggier.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/core/use-list-draggier.virtual.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/core/index.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/plc-draggier.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/tree/plc-tree.draggier.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/tree/plc-tree.tsx","webpack://CustomApplicationmain-application/./src/packages/upload/upload.tsx","webpack://CustomApplicationmain-application/./src/packages/plc/index.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/plc-group.tsx","webpack://CustomApplicationmain-application/./src/packages/plc-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/upload/index.ts","webpack://CustomApplicationmain-application/./src/packages/nav/index.ts","webpack://CustomApplicationmain-application/./src/packages/file-service/index.ts","webpack://CustomApplicationmain-application/./src/packages/image/service/image.service.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/image/service/index.tsx","webpack://CustomApplicationmain-application/./src/packages/image/image.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/image/image.tsx","webpack://CustomApplicationmain-application/./src/packages/image/image-uploader.tsx","webpack://CustomApplicationmain-application/./src/packages/image/index.ts","webpack://CustomApplicationmain-application/./src/packages/image-uploader/index.ts","webpack://CustomApplicationmain-application/./src/packages/contextmenu/contextmenu-service.tsx","webpack://CustomApplicationmain-application/./src/packages/tab/tabs.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/contextmenu/index.ts","webpack://CustomApplicationmain-application/./src/packages/tab/tab.tsx","webpack://CustomApplicationmain-application/./src/packages/tab/tabs-header.tsx","webpack://CustomApplicationmain-application/./src/packages/tab/inner-tab.tsx","webpack://CustomApplicationmain-application/./src/packages/tab/tabs.tsx","webpack://CustomApplicationmain-application/./src/packages/tabs/index.ts","webpack://CustomApplicationmain-application/./src/packages/tab/index.ts","webpack://CustomApplicationmain-application/./src/index.ts"],"names":["CompareMode","WrapDate","value","displayFormat","valueFormat","dateObject","this","setValue","parse","String","year","isNull","defaultDate","setFullYear","month","date","setMonth","hour","setHours","minute","setMinutes","second","setSeconds","time","setTime","setHour","setMinute","setSecond","pd","setYear","Y","setMonthDate","format","displayString","valueString","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","getTime","Number","dateString","timeString","Date","formatString","today","PlainDate","TimeServiceGetter","name","render","attrs","defaultPopperAttrs","transition","REFRESH_POPPER_REFERENCE","refreshPopperReference","provide","refresh","inject","defaultValue","freshPopperReference","CascadeServiceGetter","defaultRenderAttrs","onChange","renderAttrs","state","option","serviceOption","selectBranch","hide","PlColorHueSlider","props","modelValue","type","default","size","thumbSize","emits","onUpdateModelValue","val","setup","emit","event","el","HTMLDivElement","refs","NUMBER","propsState","left","tempLeft","startX","styles","width","thumbStyles","methods","setLeft","Math","max","min","emitValue","toFixed","handler","mousedown","e","document","body","addEventListener","mousemove","mouseup","target","offsetX","clientX","durX","removeEventListener","then","immediate","StyleMode","StyleShape","StyleSize","StyleStatus","StyleProps","shape","status","USE_STYLE_PROVIDER","useStyle","ctx","parent","defaultData","Object","assign","fillet","normal","styleComputed","parentData","data","adjust","EDIT_PROVIDER","EditProps","disabled","Boolean","readonly","loading","placeholder","customReadonly","useEdit","parentEditComputed","editState","editComputed","editable","_event","onBlur","on","off","createEventListener","config","nextIndex","index","useModel","getter","emitter","autoWatch","autoEmit","designComponent","required","onClose","classes","zIndex","close","onClick","onClickCloseIcon","onMouseenter","closeTimer","clearTimeout","onMouseleave","setTimeout","icon","renderHead","title","noClose","renderContent","message","renderFoot","NoticeServiceDirection","horizontal","vertical","duration","options","useRefList","padding","utils","i","splice","refer","getNotice","push","messages","filter","length","start","map","id","proxy","containers","end","getContainer","ref","container","formatOption","idCount","getNoticeService","registryRootService","getManager","service","o","fo","manager","reduce","prev","$$notice","getServiceWithoutContext","install","app","mixin","computed","$notice","createFlagManager","get","key","set","getActiveKeys","keys","generator","createKeyHandler","ctxState","selfGetter","node","level","parentRef","keyField","CascadeNode","getList","list","item","loaded","FileServiceDefaultAccept","image","split","join","excel","createFileService","chooseFile","input","getInput","multiple","setAttribute","removeAttribute","accept","defaultInputAccept","dfd","__change","targetFiles","files","file","calcSize","validator","error","resolve","click","promise","chooseImage","readAsDataURL","fr","FileReader","onloadend","result","onerror","reject","upload","uploadConfig","xhr","window","XMLHttpRequest","Window","ActiveXObject","open","action","percent","total","onProgress","withCredentials","headers","entries","forEach","setRequestHeader","onError","onload","getError","onSuccess","getResponseBody","formData","FormData","append","Array","isArray","f","filename","send","createElement","style","display","appendChild","console","log","response","responseText","Error","method","url","JSON","$$file","counter","createCounter","mergeAttrs","LISTENER_MATCH_REG","agent","defaultAttrs","test","args","apply","createPopperServiceComponent","createDefaultService","isShow","isOpen","renderKey","newKey","getService","getRefer","undefined","show","popperAttrs","defaultOption","onClickBody","hideOnClickBody","noContentPadding","trigger","reference","popper","createAgentGetter","scope","root","create","ins","popperServiceGetter","createDefaultManager","toggle","destroy","cacheMap","WeakMap","cacheKey","$root","installMap","installPlugin","plugins","installedPlugins","plugin","indexOf","use","PlButton","directives","ClickWave","mode","label","active","noPadding","block","throttleClick","asyncHandler","Function","nativeAttrs","slots","PROMISE","buttonGroup","otherComputed","handleClick","handleClickInner","stopPropagation","trailing","prefix","count","obj","ColorFormat","enableAlpha","red","green","blue","hue","saturation","alpha","hex","updateByString","needInitializedEnableAlpha","_value","parts","replace","parseFloat","parseInt","floor","setRgb","trim","substring","setHex","r","g","b","h","s","v","currentColor","setHsv","rgbColor","getDefaultColor","PlColorPanel","onBblclickSvPanel","useRefs","defaultColor","color","reset","svChange","updateByHsv","hueChange","alphaChange","updateByAlpha","confirm","dblclickSvPanel","inputChange","formatVal","model","inputBlur","warn","inputEnter","updateByHex","updateByRgb","mini","registry","icons","unshift","module","PlIcon","getIconVNode","iconName","registryIcon","Icon","BUTTON_GROUP_PROVIDER","ButtonModeProvider","PlButtonGroup","fill","parentGroup","getIns","mount","serviceGetter","exports","refName","defineProperty","useFunctionWrapper","func","_use","getSlotExist","prevState","slotNames","slotName","managerName","serviceComponent","isItemAvailable","ServiceComponent","opt","createPlainEvent","getListenMap","events","Map","hasListener","listenName","fn","listenMap","once","listeners","listener","clear","getComponentEmit","emitObject","match","kebabCaseName","kebabCase","updateName","toLowerCase","useEvent","renderNothing","createError","expose","provideRefer","leftOptions","class","setupContext","duplicateKey","find","PlRoot","useSlots","managers","getManagerInstance","managerComponent","managerInstance","$attrs","attrName","attrComponent","Component","RenderComponent","rootRef","initRoot","createComponentPlugin","CheckboxStatus","DEFAULT_STATUS","primary","STATUS","white","black","success","info","names","makeReactive","exist","vnode","slot","isExist","KEY","KeyBoardMap","16","17","18","8","9","13","27","32","46","37","38","39","40","189","187","48","49","50","51","52","53","54","55","56","57","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","112","113","114","115","116","117","118","119","120","121","122","123","getKey","keyCode","KeyboardService","listen","unbindListener","cancelActiveElement","activeElement","blur","_onkeydown","currentTarget","metaKey","ctrlKey","shiftKey","altKey","compositionKeyName","flag","preventDefault","handleKeyboard","component","exposeComponents","wrapExposeComponents","next","componentList","values","comp","components","markRef","children","childrenField","labelField","childrenData","child","isLeaf","expandKeys","selfExpandKeys","toString","nodeDisabled","filterData","filterText","filterMethod","some","prefixString","CascadePanelProps","hoverDebounce","emptyText","lazy","getChildren","PlCascadePanel","expandNodes","onClickItem","onGetChildren","onUpdateData","scopedSlots","cascadeMark","formatData","cascadeData","checkProps","iterateAll","nodes","iterateChildren","getChildrenAsync","Promise","initLazy","isPassFilter","mouseenterItem","expand","clickItem","isExpand","isLoaded","setChildren","empty","filterList","cascadeList","listIndex","nodeIndex","isLoading","isEmpty","TimePublicProps","layout","custom","checkDisabled","useCollectInParentInner","indexMap","items","addItem","sort","from","parentNode","childNodes","nodeName","a","removeItem","useCollect","parentName","provideString","injectDefaultValue","PlInput","placeValue","minHeight","maxHeight","textarea","suffixIcon","prefixIcon","clearIcon","clearHandler","autoHeight","isFocus","inputReadonly","throttleEnter","inputInnerTabindex","onFocus","onKeydown","onEnter","onEsc","onClickInput","onClickPrefixIcon","onClickSuffixIcon","onClickClearIcon","HTMLInputElement","hiddenInput","HTMLTextAreaElement","FUNCTION","handlerEnter","handleEnterInner","enter","clickPrefixIcon","clickSuffixIcon","clickClearIcon","clearValue","height","publicProps","onInput","esc","focus","resetTextAreaHeight","scrollHeight","onMousedown","hidden","prepend","tag","msg","isLog","reactive","PlLoading","HTMLElement","innerHTML","outerHTML","getElement","$el","nodeType","nextElementSibling","getBaseTrigger","triggerName","openModel","hoverOpenDelay","hoverCloseDelay","PopperTriggerType","hover","getHoverTrigger","getClickTrigger","getFocusTrigger","manual","getManualTrigger","openTimer","onEnterReference","leave","onLeaveReference","onEnterPopper","onLeavePopper","onClickReference","oldTabIndex","onReferenceFocus","onReferenceBlur","getAttribute","init","getPopperTrigger","cb","onClickPopper","PlPopper","popperClass","offset","Element","placement","arrow","boundary","sizeEqual","scrollAttrs","onUpdateOpen","onInit","onDestroy","onOpen","onShow","onHide","onMousedownPopper","comment","content","useProps","referenceEl","onTransitionend","referenceVNode","direction","popperClasses","popperStyles","useStyles","sizeStyles","offsetWidth","offsetHeight","fitHostWidth","onPopperContentTransitionend","contains","bindEvents","unbindEvents","initPopper","arrowSize","shouldUpdate","shouldEmit","delay","refreshReference","setPlacement","popperConfigChangeHandler","debounce","isUnmounted","Comment","ReferenceVNode","defer","FormatPropType","usePropsFormatter","types","formatTypes","lastIndexOf","usePropsInner","configKeys","formatConfig","configKey","PlColorSvPanel","onDblclick","startY","tempSaturation","tempValue","backgroundColor","transform","updatePosition","x","y","isMouseDown","durY","offsetY","clientY","dblclick","callback","detect","scrollWidth","ret","oldWidth","oldHeight","runCallback","observer","MutationObserver","observe","childList","subtree","ceil","disconnect","ResizeDetectorDirective","mounted","binding","__resizedetextor__","beforeUnmount","VerticalScrollbar","tooltip","scroll","PlScroll","dragState","top","scrollTop","contentHeight","hostHeight","targetScrollbarSize","scrollbarColor","onScroll","freezeState","isDragging","onMousemove","onMouseup","disabledUserSelect","deltaY","scrollAfterDragEnd","wrapper","enableUserSelect","TooltipDirective","PLAIN_SCROLL_VERTICAL_POSITION","HorizontalScrollbar","scrollLeft","contentWidth","hostWidth","deltaX","resize","refreshState","scrollbarSize","scrollX","scrollY","hideScrollbar","alwaysShowScrollbar","fitContentWidth","fitContentHeight","fitHostHeight","topThreshold","bottomThreshold","autoScrollSpeed","disableListTransition","horizontalScrollbarTooltip","verticalScrollbarTooltip","onVerticalScrollTop","onVerticalScrollBottom","onVerticalScrollCenter","host","useMounted","verticalPosition","cancelAnimate","wrapperScrollTop","wrapperScrollLeft","emitScroll","_isDragging","hostStyles","wrapperStyles","contentStyles","overflowX","overflowY","width1","height1","contentResize","width2","height2","hostResize","point","configOrTime","noEmitScroll","done","cancelAnimationFrame","ny","nx","ky","kx","startTime","now","run","nowTime","delta","requestAnimationFrame","scrollEnd","autoScrollTop","autoScrollBottom","autoScrollLeft","autoScrollRight","stopAutoScroll","disabledQueueAnimation","windowResize","throttle","popperOpen","popperShow","wrapperMousewheel","wrapperScroll","center","bottom","onMousewheel","MessageServiceDirection","closeMessage","getMessage","getMessageService","charAt","$$message","$message","toArray","TimeRangePanelType","PlTimeRangePanel","onUpdateStart","onUpdateEnd","onMousedownStartPanel","onMousedownEndPanel","onStartChange","endPd","startPd","Hms","onEndChange","publicBinding","disableChangeOnScroll","NavPage","page","isLast","PageComponent","renderEl","unmountHandler","nav","getAppLoader","pageConfig","loader","getPage","mountData","unmount","PROVIDE_NAV_CONSTANT","provideNavPage","stack","$nav","tabMethods","pageMethods","back","redirect","getCurrentPage","useNav","NavStack","provideNav","pages","TimePanelLayout","PlTimeBaseColumn","liList","resetPosition","zeroize","findOne","offsetTop","PlTimeBasePanel","maxmin","maxpd","minpd","vpd","Infinity","num","columnChange","RootServiceScope","RootController","getRoot","createService","mapKey","createRootService","context","INT_HEX_MAP","10","11","12","14","15","hexOne","round","high","low","rgb2hex","isNaN","isOnePointZero","n","isPercentage","bound01","processPercent","abs","rgb2hsv","d","hsv2rgb","p","q","t","mod","HEX_INT_MAP","A","B","C","D","E","F","parseHexChannel","toUpperCase","isEffectiveColorString","isMounted","ColorPickerServiceGetter","PlList","webpackAsyncContext","req","__webpack_require__","code","ids","bg","PlColorAlphaSlider","tempTop","backgroundImage","shadowStyles","background","setTop","PlItem","Tag","ClickWaveData","wavingTimer","updateOption","updated","unbind","useScopedSlots","TimePanelProps","range","PlTimePanel","foot","onMousedownBasePanel","onBaseChange","onRangeChange","base","stacks","useClass","PlInputInnerTags","collapseTags","slice","PlLoadingMask","loadingType","unlock","fixedPosition","inDirective","resetParentPosition","getComputedStyle","position","PlCheckboxGroup","itemWidth","formItem","CheckboxGroupCollector","activeChildren","innerState","checkboxForAll","allKeys","checkStatus","hasCheck","hasUncheck","check","uncheck","minus","getCheckStatus","checkbox","exceed","changeValue","add","delete","clickCheckbox","PlCheckbox","PlCheckboxInner","GridAlign","GridJustify","trueValue","falseValue","checkboxGroup","checked","targetWidth","unit","clickEl","PlRow","align","justify","gutter","marginLeft","marginRight","PlCol","span","order","pull","className","xs","sm","md","lg","row","classList","sizeProps","paddingLeft","paddingRight","PlRadioGroup","onClickRadio","PlRadioInner","PlRadio","group","keydown","space","DialogServiceEditType","PlDialog","minWidth","maxWidth","fullHeight","fullWidth","wrapperPadding","contentPadding","showHead","fullscreen","mask","dialogClass","serviceClass","cancelOnClickMask","showClose","beforeClose","destroyOnClose","confirmButton","cancelButton","closeOnConfirm","closeOnCancel","confirmButtonText","cancelButtonText","confirmOnEnter","cancelOnEsc","disabledCancel","disabledConfirm","onConfirm","onCancel","alignItems","justifyContent","wrapperClasses","bodyClasses","hasHead","hasFoot","contentStyle","keyboardEventOption","cancel","clickWrapper","clickClose","Wrapper","head","large","OptionKeys","editValue","targetOption","editType","editReadonly","getDialogService","$$dialog","$dialog","newInstance","LoadingBarStatus","Mask","update","directive","loadingMask","inactive","LoadingMaskDirective","getLoadingMaskService","wait","interval","autoLoadingStep","startDelayer","process","doneColor","fail","failColor","opacity","startAutoLoading","setInterval","stopAutoLoading","clearInterval","autoProcess","complete","autoStart","getLoadingBarService","$loading","bar","NAN","PlNumber","step","stepStrictly","precision","hideButton","inputProps","getValue","getEffectiveValue","formatModelValue","formatValue","checkValue","intervalAdd","intervalMinus","up","down","PlToggle","isActive","isChecked","alignEnd","full","showSteps","tooltipFormatter","dragStart","touching","tempStart","tempEnd","totalLength","transferValueToLength","transferLengthToValue","setStart","setEnd","startPosition","endPosition","progressStyles","startTooltip","endTooltip","steps","stepItemStyles","removeUnit","dragstart","temp","dur","stepLength","divisor","PlTag","PlTagInput","beforeAdd","beforeRemove","noInput","isEditing","inputValue","clickWindow","clickEditButton","tagClose","PlRate","activeIcon","inactiveIcon","totalWidth","elLeft","activeStyles","getBoundingClientRect","half","useVirtualList","current","pageIndex","pageSize","offsetData","startPageIndex","getPageIndex","strutStyles","dynamicSize","getIndex","middle","middleBottom","scrollIndex","resetData","elNodes","vid","prevNode","prevHeight","deltaHeight","j","virtual","PlVirtualList","require","virtualIndex","PROGRESS_DEFAULT_PROPS","outerColor","innerColor","speed","successColor","errorColor","PlProgressBar","inlineText","iconColor","outerStyles","borderRadius","innerStyles","createAnimate","initValue","k","deltaTime","stop","PlProgressCircle","lineSize","startAngle","antiClockwise","animate","radius","pathD","degrees","PI","sin","cos","pathStroke","circleStroke","pathStyles","PlProgressMini","toNumber","useNumber","numberState","PlSelectPanel","multipleMaxLimit","multipleMinLimit","noMatchText","noDataText","showDebug","SelectPanelCollector","showOptions","isSelected","optionProps","clickOption","newValue","highlightPrev","highlightNext","selectHighlight","inner","PlSelectOption","PlSelectGroup","SelectGroupCollector","panel","SelectCollector","useEditPopperAgent","focusCounter","inputHandler","SelectServiceGetter","Props","filterable","PlSelect","onSpace","onUp","onDown","agentState","popperHeight","onServiceChange","displayValue","strings","placeholderValue","inputBinding","onInputClear","onInputChange","onInputKeydown","multipleTags","ie","onClickItemCloseIcon","StepStatus","SizesWidth","PlPagination","totalPage","pagerCount","currentPage","pageSizes","prevText","nextText","jumperNumberWidth","onJump","onPrev","onNext","onCurrentChange","onSizeChange","jumperValue","totalPageData","pageInfo","midPagerCount","showPrevMore","showNextMore","pagers","array","startPage","getPagerButtonClass","changeCurrent","sizes","jumper","pager","blank","part","PlBadge","dot","contentClass","showValue","badge","StepUtils","getCurrentIndex","getStepStatus","currentStatus","currentIndex","finish","PlStepGroup","titleAlignBottom","dotIcon","StepCollector","isTitleAlignBottom","PlStep","stepGroup","PlArrowStepGroup","ArrowStepCollector","PlArrowStep","DirectionMap","right","uppercaseFirstLetter","PlTriangle","targetStyles","border","hideIndex","isFirst","PlDropdown","disabledHideOnClickOption","clickDropdownOption","PlDropdownGroup","PlDropdownMenu","onClickOption","dropdown","PlDropdownOption","menu","PlTooltip","showWidth","theme","HTMLSpanElement","oldOption","deepEqual","Tooltip","DEFAULT_OPTION","unmounted","ColorPickerType","PlCollapseTransition","onAfterLeave","beforeEnter","addClass","dataset","oldPaddingTop","paddingTop","oldPaddingBottom","paddingBottom","oldOverflow","overflow","afterEnter","removeClass","beforeLeave","transitionProperty","afterLeave","onBeforeEnter","onAfterEnter","onBeforeLeave","onLeave","PlAlert","desc","isClosed","onClickClosed","PlCollapseGroup","limit","clickCollapseTitle","valCounter","PlCollapse","detail","noArrow","selfVal","isDisabled","onClickTitle","PlCard","shadow","poster","operator","PlCarouselItem","carousel","CarouselCollector","itemVal","getItemStyles","isAnimating","PlCarousel","autoplay","disabledOperator","disabledIndicator","indicatorTrigger","card","cardScale","indicator","autoplayTimer","prevActiveIndex","vals","activeVal","activeIndex","sortVals","valArray","shift","pop","sortIndex","activeSortIndex","resetAutoplayTimer","leading","onIndicator","cover","opacityBg","PlColorButton","TreeDropType","TreeNodeCheckStatus","PlColorPicker","button","scopedSlotsOnClick","variable","PlCascade","showLast","separator","showFormat","inputAttrs","cacheData","sourceKey","iteratorTreeData","useTreeNode","keyManager","getTreeNodeByDataAdjust","dataModel","showCheckbox","iterate","iterateChildrenFirst","checkStrictly","every","getTreeNodeByData","selfRef","isCheckable","filterNodeMethod","isVisible","nodeMap","iterator","Node","dataEffectTrigger","stopWatchEffect","getReactiveChildrenData","removeSelf","parentChildrenData","previousSibling","self","nextSibling","unshiftChild","treeNodeUtils","treeNodeMethods","currentKey","onUpdateCurrentKey","handleKeyOrNode","keyOrNode","baseMethods","getNode","all","results","getParents","parents","defaultExpandAll","expandMethods","expandAll","checkNodes","checkKeys","setChildrenData","setCurrent","getCurrent","according","collapse","onExpand","onExpandChange","autoExpandParent","onCollapse","toggleExpand","collapseAll","checkMethods","onCheck","onCheckChange","onUncheck","toggleCheck","checkAll","uncheckAll","getCheckedData","refreshCheckStatus","reverse","onClickExpandIcon","onClickCheckbox","onClickCell","onClickNode","expandOnClickNode","checkOnClickNode","useTree","createProps","createEvent","TreeProps","nodeIcon","nodeHeight","intent","draggable","allowDrag","allowDrop","folderCollapseIcon","folderExpandIcon","leafIcon","basePadding","TreeUtils","getPaddingLeft","getTreeNodeStyles","getTreeNodeClasses","createIndicator","hostEl","indicatorSize","publicStyles","bottomIndicatorTop","rightIndicatorLeft","useAutoScroll","getScroll","showHover","enterStart","enterEnd","hideHover","removeChild","getRowEl","rowClass","rowEl","hasClass","getScrollParent","useTreeDraggier","dragClass","flatList","startNode","moveNode","startScrollTop","moveScrollTop","startClientY","moveClientY","rowHeight","scrollParent","scrollParentRect","dragNodeBaseLeft","dropType","droppable","autoScroll","allowRowDraggable","allowRowDroppable","getIndicatorStyles","targetIndex","external","dragNode","querySelector","pointerEvents","PlTree","treeNode","exposeMethods","draggier","emptyNode","PlDateTimeInput","regexp","RegExp","useDateTime","valueInput","startInput","endInput","plInput","clickInput","customInputFocus","customInputBlur","DateView","DatePanel","SlideTransitionDirection","DateEmitRangeType","PlTime","startModel","endModel","serviceHandler","customHandler","change","valuePd","parseDisplayString","setDisplayValue","DefaultDateFormatString","datetime","week","quarter","getDefaultDateFormatter","getDefaultDateValueFormat","getDefaultDateDisplayFormat","DateViewSeq","DatePublicProps","firstWeekDay","defaultTime","defaultStartTime","defaultEndTime","showQuarter","isQuarterActive","view","selectDate","DatePublicEmits","rangeType","onUpdateView","DatePanelWrapper","bodyAttrs","DatePanelItemWrapper","clickable","len","char","wrapDate","initialValue","dj","dateObj","toDate","day","YM","YMD","YMDHms","getDayJs","getDisplay","useValue","useDisplay","useYear","useMonthDate","useHour","useMinute","useSecond","useTime","useHms","useYMD","parseDisplay","parseValue","clone","locale","extend","UseDateJudgementView","str","plainDate","DayJs","DATE_PANEL_PROVIDER","useDate","jdView","getSlide","processPd","customStatus","defaultFormat","createPlainDate","slide","useDateData","setSelectDate","spd","epd","viewModel","topState","isRange","did","existIndex","findIndex","mid","condition","getStatus","PlDatePanelYear","selectYear","prevYearList","nextYearList","PlDatePanelMonth","onMouseleaveList","months","prevYear","nextYear","monthList","quarterList","listClasses","externalHandler","onSelectYearChange","Month","PlDatePanelDate","onSelectTime","onSelectDateChange","onMouseleaveDateList","showTimePd","weekList","weeks","concat","dateList","currentMonthFirstDate","weekDayDuration","offsetDay","firstDateTime","externals","isSelectMonth","monthAttrs","onSelectMonthChange","defaultTimePd","timeAttrs","timePd","maxPd","minPd","prevMonth","nextMonth","changeView","oldSeq","newSeq","DefaultTime","PlDatePanelRange","argSpd","argEpd","startSelectDate","endSelectDate","useDateWeek","getDateData","dateData","externalState","PlDatePanelWeek","dateAttrs","PlDatePanelQuarter","PlDatePanel","DateServiceGetter","FormLabelAlign","FormContentAlign","FormValidateMode","FormValidateTrigger","FormValueType","PlDate","vpds","isDates","isValid","FormValidateUtils","getValueByField","field","fields","getMaxMessage","getMinMessage","getListValue","checkRule","rule","fieldToLabel","pattern","validList","invalidValues","optionList","validateResultList","formatFormRules","formComponentRules","formItems","resultRules","rules","formItemRules","formComponentRulesList","validateField","formValidateResultMap","associateFields","matchField","validateResult","validate","validateResultMap","validateMessage","fieldToRequired","PlFormItem","labelWidth","column","colon","labelAlign","contentAlign","form","FormCollector","invalidate","onEditChange","validateHandler","onEditBlur","onBlurChange","disabledFields","readonlyFields","staticWidth","hasLabel","childState","isRequired","hideRequiredAsterisk","hideValidateMessage","isBlock","inline","col","columnGutter","labelStyles","bodyStyles","formItemComponentRules","formValidate","invalidField","suffix","PlForm","validateMode","validateOnRulesChange","centerWhenSingleColumn","onFieldValueChange","newVal","oldVal","maxLabelWidth","validateMethods","autoLoading","autoAlert","clearValidate","showError","oldFormData","onFieldChange","onFormDataChange","newFormData","deep","TablePlcCollector","ProvideString","useParent","parentElement","remove","useChild","renderColgroup","flatPlcList","plc","useHeadCellResize","table","indicatorEl","endX","tableEl","cell","durWidth","setDurWidth","resizeHandler","renderHeadCell","renderBodyCell","getEditable","getBodyCell","edit","renderScope","isSummary","summary","editRow","HoverPart","getHorizontalScrollParent","iteratePlc","plcList","getBroPlcList","broPlcList","itarPlc","getPlcWidth","getIndicatorHeight","plcData","maxLevel","headRowHeight","rowspan","getLowestPlcList","getDragData","broList","broLowestList","allLowestList","broData","useColDraggier","scrollRefer","isDraggable","colDraggable","tdAttrs","autoScroller","startClientX","moveClientX","startScrollLeft","moveScrollLeft","currentRect","scrollRect","dragData","refreshData","dd","indicatorLeft","indicatorHeight","startPlc","endPlc","startIndex","endIndex","fixed","TablePlcAlign","TablePlcFixedType","TableHoverPart","PltHeadCell","PlainTable","tablePlc","headCls","headCellClassFunc","headCellStyleFunc","colspan","TableProps","summaryData","spanMethod","stripe","hideHeader","disabledStickyCompatible","bodyRowHeight","showRows","rowClassFunc","cellClassFunc","cellStyleFunc","PltHead","headPlcListArray","tableStyles","targetTableWidth","bindScroll","scrollRef","cellspacing","cellpadding","plcKeyString","arrayIndex","useCellFormItemValidate","IteratePlcHandleType","PltCell","bodyCls","PltRow","onClickRow","onDblclickRow","plcListHasRenderAfterRow","renderAfterRow","PlVirtualTable","summaryTableStyles","colgroup","PltBody","onVnodeMounted","onVirtualMounted","flatNodes","summaryNodes","disabledVirtual","PlcGroupProps","autoFixedLeft","autoFixedRight","PlcProps","fit","notFitVirtual","addEditPadding","PlcPublicAttrs","isLastFixedLeft","isFirstFixedRight","copyPlcList","newPlc","deepcopy","iteratePlcList","onPlc","onGroup","handleType","handleTablePlc","configData","configPlc","processStateConfigAndProps","configState","fixedLeft","fixedRight","nothing","getPlcOrder","processPlcSort","tableWidth","insertSort","totalPlcWidth","fitPlc","processHeadPlcList","calculateLevel","calculateSpan","calculateHeadColumns","setFixedFlag","lastFixedLeft","firstFixedRight","setLastFixedLeft","setFirstFixedRight","processPlcFixed","collect","element","prevWidth","prevValue","getPlcFixedStyle","isFixedLeft","getPltCellClass","processPlcClassAndStyle","formatPlcList","usePlcList","collector","useBindScroll","hoverPart","updateLeft","onScrollLeft","useTableNode","getValidate","openEdit","closeEdit","enableEdit","cancelEdit","saveEdit","newRow","useTableGetScroll","useFixedShadow","showFixedLeft","showFixedRight","freeState","fixedShadowClass","PlTable","onDblclickCell","square","exposeHandler","injectPlainTable","usePlc","formatProps","designPlc","standardProps","externalProps","OptionProps","externalRefer","summaryText","totalSpan","toggleOnClickRow","summaryExpand","selected","selectedKeys","isCheck","getSelected","clearAll","availableSelectItems","addSelected","removeSelected","getRowElList","querySelectorAll","dragEl","dragHeight","dragOffsetTop","dragStartScrollTop","dragScrollTop","rowList","movedown","refreshDragElPosition","parentScroll","dragElHeight","startDragIndex","endDragIndex","startDragOffsetTop","startDragHeight","startScrollTopOfScrollParent","scrollTopOfScrollParent","scrollParentBoundingRect","usePlcTreeDraggier","flatDataList","levelPadding","UploadStatus","rowDraggable","maxShowLevel","getExpanderAttrs","unmountListener","tableProps","PlcIndex","PlcExpand","PlcCheck","PlcDraggier","PlcTree","PlcInput","PlcNumber","PlcDate","PlcColorPicker","PlcToggle","PlcRate","itemDurWidth","nextFileId","PlUpload","autoUpload","removeConfirm","beforeUpload","handleRemove","handleUpload","handlePreview","updateModelValue","singleModel","multipleModel","renderIcon","ready","uploading","singleEmptyFile","getItemClass","onSelectFile","selectFiles","addFiles","dropHandler","onDragover","onDragLeave","onDrop","dataTransfer","extension","baseType","acceptedType","removeFile","uploadFile","uploadFiles","renderItem","singleRender","multipleRender","globalProperties","urlToImage","Image","src","canvasToFile","canvas","quality","toBlob","blob","File","fileToDataURL","imageCompress","compressByMeasure","getContext","drawImage","compressByMaxSize","maxSize","rate","clearRect","ImageStatus","ImageFit","Service","scale","rotate","imgStyles","resetAdjust","isMultipleImages","urls","buttons","dragImg","startTop","startLeft","onDblclickImg","onClickMask","onDragstart","btn","getImageService","preview","choose","compress","$image","ImageUploaderStatus","PlImageProps","alt","PlImage","previewOnClick","pending","objectFit","objectPosition","tip","PlImageUploader","previewImage","handleDelete","onLoadSuccess","onLoadError","onUploadSuccess","resp","onUploadProgress","onUploadFail","chooseBase64","onClickImage","onClickDelete","getReferencePosition","TabHeadType","TabHeadPosition","hideTimer","onTransitionEnd","onMousedownWindow","getContextmenuService","newPos","available","oldPos","$contextmenu","PlTab","destroyOnHide","TabCollector","PlTabsHeader","tabs","onClickTabHead","tab","refreshTimer","listLeft","refreshOffsetData","offsetLeft","listStyles","indicatorStyle","PlInnerTab","PlTabs","headType","text","headPosition","closeable","onClickTabHeader"],"mappings":"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AMkE,UAErB3D,MAVkC,YAUrB,IAANT,EAAM,EAANA,MAAM,EACO,iBAAToT,EADE,EACFA,MACP,MAAO,CACHzU,OAAQ,WAAK,MACH+c,EAAa1b,EAAMmE,SAAWnE,EAAMypB,IAAM,OAChD,OACI,kBACI5O,MAAO,UACPnc,KAAM,gBAAF,OAAkBsB,EAAMstB,WAC5B7D,IAAKzpB,EAAMypB,KAHf,IAKKrW,EAAMjT,WALX,yC,qBCrBpB,IAAI6H,EAAM,CACT,6BAA8B,CAC7B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,2BAA4B,CAC3B,OACA,kBAED,gCAAiC,CAChC,OACA,kBAED,iCAAkC,CACjC,QACA,kBAED,iCAAkC,CACjC,OACA,kBAED,kCAAmC,CAClC,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,qCAAsC,CACrC,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,oCAAqC,CACpC,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,gCAAiC,CAChC,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,+BAAgC,CAC/B,QACA,kBAED,sBAAuB,CACtB,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,kCAAmC,CAClC,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,gCAAiC,CAChC,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sCAAuC,CACtC,OACA,kBAED,kCAAmC,CAClC,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,2BAA4B,CAC3B,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,gCAAiC,CAChC,QACA,kBAED,wBAAyB,CACxB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,2BAA4B,CAC3B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,2BAA4B,CAC3B,OACA,kBAED,qBAAsB,CACrB,OACA,kBAED,qCAAsC,CACrC,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,2BAA4B,CAC3B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,eAAgB,CACf,OACA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","file":"js/chunk-common.3d04c105.js","sourcesContent":["import fecha from 'fecha'\r\nimport {zeroize} from \"plain-utils/string/zeroize\";\r\n\r\nenum CompareMode {\r\n    time = 'time',\r\n    date = 'date',\r\n    datetime = 'datetime',\r\n    yearmonth = 'yearmonth',\r\n}\r\n\r\ntype Pub = {\r\n    displayFormat: string\r\n    valueFormat: string\r\n\r\n    setValue(value: string | undefined): void,\r\n    setDisplayValue(value: string): void,\r\n    setYear(year: number): void,\r\n    setMonthDate(month: number, date: number): void,\r\n    setHour(hour: number): void,\r\n    setMinute(minute: number): void,\r\n    setSecond(second: number): void,\r\n    setTime(time: number): void,\r\n    setHms(hour: number | PlainDateType, minute?: number, second?: number): void,\r\n    setYMD(year: number | PlainDateType, month?: number, date?: number): void,\r\n\r\n    format(dateObject: Date | null): string | null,\r\n    parseDisplayString(displayString: string | null): Date | null,\r\n    parseValueString(valueString: string | null): Date | null,\r\n    copy(): PlainDateType,\r\n}\r\n\r\ntype Diff =\r\n    {\r\n        dateObject: Date\r\n        isNull: false\r\n        year: number\r\n        month: number\r\n        date: number\r\n        hour: number\r\n        minute: number\r\n        second: number\r\n        day: number\r\n        time: number\r\n        displayString: string\r\n        valueString: string\r\n        timeString: string\r\n        dateString: string\r\n        Y: number\r\n        YM: number\r\n        YMD: number\r\n        YMDHms: number\r\n        Hms: number\r\n    } |\r\n    {\r\n        dateObject: null\r\n        isNull: true\r\n        year: null\r\n        month: null\r\n        date: null\r\n        hour: null\r\n        minute: null\r\n        second: null\r\n        day: null\r\n        time: null\r\n        displayString: null\r\n        valueString: null\r\n        timeString: null\r\n        dateString: null\r\n        Y: null\r\n        YM: null\r\n        YMD: null\r\n        YMDHms: null\r\n        Hms: null\r\n    };\r\n\r\nexport type PlainDateType = Diff & Pub\r\n\r\nclass WrapDate {\r\n\r\n    displayFormat: string                                                       // 显示值格式字符串\r\n    valueFormat: string                                                         // 实际值格式字符串\r\n    dateObject: Date | null = null                                              // 日期对象\r\n\r\n    constructor(value: string | undefined | null, displayFormat: string, valueFormat: string) {\r\n        this.displayFormat = displayFormat\r\n        this.valueFormat = valueFormat\r\n\r\n        if (value != null) {\r\n            this.setValue(value)\r\n        }\r\n    }\r\n\r\n    /*---------------------------------------attrs-------------------------------------------*/\r\n\r\n    get isNull(): boolean {return !this.dateObject}\r\n\r\n    get year() {return this.isNull ? null : this.dateObject!.getFullYear()}\r\n\r\n    get month() {return this.isNull ? null : this.dateObject!.getMonth()}\r\n\r\n    get date() {return this.isNull ? null : this.dateObject!.getDate()}\r\n\r\n    get hour() {return this.isNull ? null : this.dateObject!.getHours()}\r\n\r\n    get minute() {return this.isNull ? null : this.dateObject!.getMinutes()}\r\n\r\n    get second() {return this.isNull ? null : this.dateObject!.getSeconds()}\r\n\r\n    get day() {return this.isNull ? null : this.dateObject!.getDay()}\r\n\r\n    get time() {return this.isNull ? null : this.dateObject!.getTime()}\r\n\r\n    get displayString() {return this.isNull ? null : fecha.format(this.dateObject!, this.displayFormat)}\r\n\r\n    get valueString() {return this.isNull ? null : fecha.format(this.dateObject!, this.valueFormat)}\r\n\r\n    get timeString() {return this.isNull ? null : `${zeroize(this.hour!)}${zeroize(this.minute!)}${zeroize(this.second!)}`}\r\n\r\n    get dateString() {return this.isNull ? null : `${zeroize(this.year!)}${zeroize(this.month! + 1)}${zeroize(this.date!)}`}\r\n\r\n    get Y() {return this.isNull ? null : this.year}\r\n\r\n    get YM() {return this.isNull ? null : Number(`${this.year}${zeroize(this.month! + 1)}`)}\r\n\r\n    get YMD() {return this.isNull ? null : Number(this.dateString)}\r\n\r\n    get YMDHms() {return this.isNull ? null : Number(this.dateString! + this.timeString!)}\r\n\r\n    get Hms() {return this.isNull ? null : Number(this.timeString)}\r\n\r\n    /*---------------------------------------methods-------------------------------------------*/\r\n\r\n    setValue(value: string | undefined) {this.dateObject = !value ? null : WrapDate.parse(String(value), this.valueFormat)}\r\n\r\n    setDisplayValue(value: string) {this.dateObject = !value ? null : this.dateObject = WrapDate.parse(String(value), this.displayFormat)}\r\n\r\n    setYear(year: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setFullYear(year)\r\n    }\r\n\r\n    setMonthDate(month: number, date: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setMonth(month, date)\r\n    }\r\n\r\n    setHour(hour: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setHours(hour)\r\n    }\r\n\r\n    setMinute(minute: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setMinutes(minute)\r\n    }\r\n\r\n    setSecond(second: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setSeconds(second)\r\n    }\r\n\r\n    setTime(time: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setTime(time)\r\n    }\r\n\r\n    setHms(hour: number | WrapDate, minute?: number, second?: number): void {\r\n        if (typeof hour === \"number\") {\r\n            this.setHour(hour)\r\n            if (minute != null) this.setMinute(minute)\r\n            if (second != null) this.setSecond(second)\r\n        } else {\r\n            const pd = hour as WrapDate\r\n            this.setHour(pd.hour!)\r\n            this.setMinute(pd.minute!)\r\n            this.setSecond(pd.second!)\r\n        }\r\n    }\r\n\r\n    setYMD(year: number | WrapDate, month?: number, date?: number) {\r\n        if (typeof year == \"object\") {\r\n            this.setYear(year.Y!)\r\n            this.setMonthDate(year.month!, year.date!)\r\n        } else {\r\n            this.setYear(year)\r\n            if (month != null && date != null) this.setMonthDate(month, date)\r\n        }\r\n    }\r\n\r\n    format(dateObject: Date | null): string | null {\r\n        if (!dateObject) return null\r\n        return WrapDate.format(dateObject, this.displayFormat)\r\n    }\r\n\r\n    parseDisplayString(displayString: string | null): Date | null {\r\n        if (!displayString) return null\r\n        return WrapDate.parse(displayString, this.displayFormat)\r\n    }\r\n\r\n    parseValueString(valueString: string | null): Date | null {\r\n        if (!valueString) return null\r\n        return WrapDate.parse(valueString, this.valueFormat)\r\n    }\r\n\r\n    copy(): WrapDate {\r\n        return new WrapDate(this.valueString, this.displayFormat, this.valueFormat)\r\n    }\r\n\r\n    /*---------------------------------------static-------------------------------------------*/\r\n\r\n    static defaultDate(): Date {\r\n        const date = new Date()\r\n        date.setMonth(0, 1)\r\n        date.setHours(0, 0, 0)\r\n        return date\r\n    }\r\n\r\n    static format(dateObject: Date, formatString: string) {\r\n        if (!dateObject) return null\r\n        return fecha.format(dateObject, formatString)\r\n    }\r\n\r\n    static parse(dateString: string, formatString: string) {\r\n        if (!dateString) return null\r\n        return fecha.parse(dateString, formatString)\r\n    }\r\n\r\n    static today(displayFormat: string, valueFormat: string): PlainDateType {\r\n        let today = new WrapDate(null, displayFormat, valueFormat)\r\n        today.setTime(new Date().getTime())\r\n        return today as PlainDateType\r\n    }\r\n\r\n    static CompareMode = CompareMode\r\n}\r\n\r\nexport const PlainDate = WrapDate as any as (new(...args: ConstructorParameters<typeof WrapDate>) => PlainDateType) & {\r\n    defaultDate(): Date,\r\n    format(dateObject: Date, formatString: string): string,\r\n    parse(dateString: string, formatString: string): Date | null,\r\n    today(displayFormat: string, valueFormat: string): PlainDateType,\r\n    CompareMode: typeof CompareMode,\r\n}\r\n","import {createAgentGetter} from \"../../popper/edit/createAgentGetter\";\r\nimport {PlTimePanel} from \"../panel/time-panel\";\r\n\r\nexport const TimeServiceGetter = createAgentGetter({\r\n    name: 'time',\r\n    render: (attrs) => <PlTimePanel {...attrs}/>,\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n    },\r\n})","import {provide, inject} from 'vue'\r\nimport {SimpleFunction} from \"../../shims\";\r\n\r\nconst REFRESH_POPPER_REFERENCE = '@@REFRESH_POPPER_REFERENCE'\r\n\r\n/**\r\n * 因为 Popper 是无根节点，所以比较难检测到reference节点变化的情况。为了优化这一块的内容\r\n * 有两种方式，一种是在使用Popper组件的时候，reference包裹一层不变的节点，缺点是会破坏无根\r\n * 节点的结构。另一种是，提供一个 refreshPopperReference 函数，子组件可以注入这个函数，当子组件\r\n * 知道自己的reference节点变化之后调用这个函数通知Popper重新reference。\r\n *\r\n * @author  韦胜健\r\n * @date    2020/11/19 11:00\r\n */\r\nexport const refreshPopperReference = {\r\n    provide: (refresh: () => void) => {\r\n        provide(REFRESH_POPPER_REFERENCE, refresh)\r\n    },\r\n    inject: (defaultValue = null) => {\r\n        const refresh = inject(REFRESH_POPPER_REFERENCE, defaultValue) as null | SimpleFunction\r\n        return {\r\n            freshPopperReference: () => !!refresh && refresh()\r\n        }\r\n    },\r\n}","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlButton} from \"./button\";\r\n\r\nexport default createComponentPlugin(PlButton)","import {createAgentGetter} from \"../../popper/edit/createAgentGetter\";\r\nimport './cascade-service.scss'\r\nimport {App} from 'vue';\r\nimport {delay} from 'plain-utils/utils/delay';\r\nimport {PlCascadePanel} from \"../panel/cascade-panel\";\r\n\r\nexport const CascadeServiceGetter = createAgentGetter({\r\n    name: 'cascade',\r\n    render(attrs) {\r\n        return <PlCascadePanel {...attrs}/>\r\n    },\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n    },\r\n    defaultRenderAttrs: {\r\n        async onChange() {\r\n            let renderAttrs: any = this.state.option.serviceOption.renderAttrs\r\n            if (typeof renderAttrs === \"function\") renderAttrs = renderAttrs()\r\n            if (!renderAttrs.selectBranch) {\r\n                // 因为change之后，会引发 cascade panels 重新渲染没有宽度以及高度，导致过度动画失效，这里再change之后延迟再关闭\r\n                await delay(120)\r\n                this.hide()\r\n            }\r\n        },\r\n    },\r\n})\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            computed: {\r\n                $cascade() {CascadeServiceGetter(this)},\r\n            },\r\n        })\r\n    },\r\n}","import './color-hue-slider.scss'\r\nimport {designComponent} from \"../../../use/designComponent\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport {useProps} from \"../../../use/useProps\";\r\nimport {computed, nextTick, reactive, watch} from 'vue';\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\n\r\nexport const PlColorHueSlider = designComponent({\r\n    name: 'pl-color-hue-slider',\r\n    props: {\r\n        modelValue: {type: Number, default: 0},                          // 当前色相\r\n        size: {type: [String, Number]},                             // 宽度\r\n        thumbSize: {type: [String, Number], default: 10},           // 指示器宽度\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n        const {propsState} = useProps(props, {\r\n            size: useProps.NUMBER,\r\n            thumbSize: useProps.NUMBER,\r\n        })\r\n\r\n        const state = reactive({\r\n            left: 0,                                                // 指示器左偏移位置\r\n            tempLeft: 0,                                            // 拖拽的时候，指示器的缓存左偏移位置\r\n            startX: null as null | number,                          // 拖拽的时候起始位置\r\n        })\r\n\r\n        const styles = computed(() => ({\r\n            width: unit(propsState.size)\r\n        }))\r\n\r\n        const thumbStyles = computed(() => ({\r\n            left: `${state.left}px`,\r\n            width: unit(propsState.thumbSize)\r\n        }))\r\n\r\n        const width = computed(() => (propsState.size as number) - (propsState.thumbSize as number))\r\n\r\n        const methods = {\r\n            setLeft: (left: number) => {\r\n                state.left = Math.max(0, Math.min(width.value, left))\r\n            },\r\n            emitValue: () => {\r\n                emit.onUpdateModelValue(Number((state.left / width.value * 360).toFixed(0)))\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                document.body.addEventListener('mousemove', handler.mousemove)\r\n                document.body.addEventListener('mouseup', handler.mouseup)\r\n                if (e.target === refs.el) {\r\n                    methods.setLeft(e.offsetX - (propsState.thumbSize as number) / 2)\r\n                    methods.emitValue()\r\n                }\r\n                disabledUserSelect()\r\n                state.startX = e.clientX\r\n                state.tempLeft = state.left\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                const durX = e.clientX - state.startX!\r\n                methods.setLeft(state.tempLeft + durX)\r\n                methods.emitValue()\r\n            },\r\n            mouseup: () => {\r\n                document.body.removeEventListener('mousemove', handler.mousemove)\r\n                document.body.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            nextTick().then(() => methods.setLeft(val / 360 * width.value))\r\n        }, {immediate: true})\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-hue-slider\" onMousedown={handler.mousedown} style={styles.value as any} ref=\"el\">\r\n                    <div class=\"pl-color-hue-slider-thumb\" style={thumbStyles.value as any}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {useFunctionWrapper} from \"./useFunctionWrapper\";\r\nimport {computed, inject, PropType, provide} from 'vue';\r\n\r\nexport enum StyleMode {\r\n    fill = 'fill',\r\n    stroke = 'stroke',\r\n    text = 'text',\r\n}\r\n\r\nexport enum StyleShape {\r\n    fillet = 'fillet',\r\n    round = 'round',\r\n    square = 'square',\r\n}\r\n\r\nexport enum StyleSize {\r\n    normal = 'normal',\r\n    large = 'large',\r\n    mini = 'mini',\r\n}\r\n\r\nexport enum StyleStatus {\r\n    primary = 'primary',\r\n    success = 'success',\r\n    error = 'error',\r\n    warn = 'warn',\r\n    info = 'info',\r\n}\r\n\r\nexport const StyleProps = {\r\n    shape: {type: String as PropType<StyleShape>},                      // fillet,round,square\r\n    size: {type: String as PropType<StyleSize>},                       // normal,large,mini\r\n    status: {type: String as PropType<StyleStatus>},                     // primary,success,error,warn,info\r\n}\r\n\r\ninterface UseStyleProvideData {\r\n    shape: StyleShape,\r\n    size: StyleSize,\r\n    status?: StyleStatus,\r\n}\r\n\r\ninterface UseStyleOption {\r\n    shape?: StyleShape,\r\n    size?: StyleSize,\r\n    status?: StyleStatus,\r\n    adjust?: (data: UseStyleProvideData) => void | UseStyleProvideData\r\n}\r\n\r\nconst USE_STYLE_PROVIDER = '@@USE_STYLE_PROVIDER'\r\n\r\nexport const useStyle = useFunctionWrapper('style', (ctx, option: UseStyleOption = {}): { styleComputed: { value: UseStyleProvideData } } => {\r\n\r\n    const parent = inject(USE_STYLE_PROVIDER, null) as null | { value: UseStyleProvideData }\r\n    const defaultData = Object.assign({shape: StyleShape.fillet, size: StyleSize.normal}, option)\r\n\r\n    const styleComputed = computed(() => {\r\n        const {shape, size, status} = ctx.props\r\n        const parentData = !!parent ? parent.value : {} as any\r\n        let data: UseStyleProvideData = {\r\n            shape: shape || parentData.shape || defaultData.shape,\r\n            size: size || parentData.size || defaultData.size,\r\n            status: status || parentData.status || defaultData.status,\r\n        }\r\n        if (!!defaultData.adjust) {\r\n            data = defaultData.adjust(data) || data\r\n        }\r\n        (data as any).ctx = ctx;\r\n        (data as any).parent = parent\r\n        return data\r\n    })\r\n\r\n    provide(USE_STYLE_PROVIDER, styleComputed)\r\n\r\n    return {styleComputed}\r\n})","import {useFunctionWrapper} from \"./useFunctionWrapper\";\r\nimport {computed, inject, onBeforeUnmount, provide, reactive} from 'vue';\r\nimport {ComponentEvent} from \"./useEvent\";\r\n\r\nexport const EDIT_PROVIDER = '@@EDIT_PROVIDER'\r\n\r\nexport const EditProps = {\r\n    disabled: {type: Boolean, default: null},\r\n    readonly: {type: Boolean, default: null},\r\n    loading: {type: Boolean, default: null},\r\n    placeholder: {type: String, default: null},\r\n    customReadonly: {type: Boolean, default: null},\r\n}\r\n\r\ninterface EditProvideData {\r\n    disabled: boolean | null,\r\n    readonly: boolean | null,\r\n    loading: boolean | null,\r\n    placeholder: string | null,\r\n\r\n    onBlur?: (...args: any[]) => void,\r\n    onChange?: (...args: any[]) => void,\r\n}\r\n\r\nexport const useEdit = useFunctionWrapper(\r\n    'edit',\r\n    (ctx, option: { adjust?: (data: EditProvideData) => void | EditProvideData } = {}) => {\r\n\r\n        const parentEditComputed = inject(EDIT_PROVIDER, null) as null | { value: EditProvideData }\r\n\r\n        const editState = reactive({loading: null as null | boolean})\r\n\r\n        const editComputed = computed(() => {\r\n            const {\r\n                disabled,\r\n                readonly,\r\n                loading,\r\n                placeholder\r\n            } = ctx.props as any as EditProvideData\r\n\r\n            let data = {disabled, readonly, loading, placeholder}\r\n\r\n            if (data.disabled == null) data.disabled = !!parentEditComputed ? parentEditComputed.value.disabled : false\r\n            if (data.readonly == null) data.readonly = !!parentEditComputed ? parentEditComputed.value.readonly : false\r\n            if (data.placeholder == null) data.placeholder = !!parentEditComputed ? parentEditComputed.value.placeholder : null\r\n            if (editState.loading == null) {\r\n                data.loading = data.loading != null ? data.loading : (!!parentEditComputed ? parentEditComputed.value.loading : false)\r\n            } else {\r\n                data.loading = editState.loading\r\n            }\r\n\r\n            if (!!option.adjust) data = option.adjust(data) || data\r\n\r\n            return {\r\n                ...data,\r\n                editable: !data.disabled && !data.readonly && !data.loading\r\n            }\r\n        });\r\n\r\n        provide(EDIT_PROVIDER, editComputed)\r\n\r\n        const event = (ctx as any)._event as ComponentEvent<any> | undefined\r\n\r\n        if (!!parentEditComputed) {\r\n            if (!!parentEditComputed.value.onBlur && !!event && !!event.on.onBlur) {\r\n                event.on.onBlur(parentEditComputed.value.onBlur)\r\n                onBeforeUnmount(() => event.off.onBlur(parentEditComputed.value.onBlur!))\r\n            }\r\n            if (!!parentEditComputed.value.onChange && !!event && !!event.on.onChange) {\r\n                event.on.onChange(parentEditComputed.value.onChange)\r\n                onBeforeUnmount(() => event.off.onChange(parentEditComputed.value.onChange!))\r\n            }\r\n        }\r\n\r\n        return {\r\n            editState,\r\n            editComputed,\r\n        }\r\n    })","import {Events} from 'vue'\r\n\r\n/**\r\n * 方便创建监听原生事件的监听函数\r\n * @author  韦胜健\r\n * @date    2020/12/14 17:47\r\n */\r\nexport function createEventListener<Config extends Partial<{ [k in keyof Events]: (e: Events[k]) => void }>>(config: Config): Config {\r\n    return config\r\n}","export const nextIndex = (() => {\r\n    let index = 1500\r\n    return () => index++\r\n})()","import {ref, watch} from 'vue';\r\n\r\nexport type UseModelConfig<T = any> = {\r\n    autoEmit?: boolean | undefined,\r\n    autoWatch?: boolean | undefined,\r\n    onChange?: (newVal: T, oldVal: T) => void,\r\n}\r\n\r\n/**\r\n * 双向绑定组合函数\r\n * @author  韦胜健\r\n * @date    2020/10/19 9:21\r\n */\r\nexport function useModel<T>(\r\n    getter: () => T,\r\n    emitter: (val: T) => void,\r\n    config?: UseModelConfig<T>\r\n) {\r\n\r\n    const state = ref(getter()) as { value: T }\r\n    config = config || {}\r\n\r\n    if (config.autoWatch !== false) {\r\n        watch(getter, (val: T) => {\r\n            if (val != state.value) {\r\n                if (config!.onChange) {\r\n                    config!.onChange(val, state.value)\r\n                }\r\n                state.value = val\r\n            }\r\n        })\r\n    }\r\n\r\n    return {\r\n        get value() {\r\n            return state.value\r\n        },\r\n        set value(val: T) {\r\n            state.value = val\r\n            if (config!.autoEmit !== false) {\r\n                emitter((val))\r\n            }\r\n        }\r\n    }\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {NoticeServiceFormatOption} from \"./index\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport './notice-service.scss'\r\nimport {PropType} from 'vue';\r\nimport Icon from '../icon'\r\nimport Button from '../button'\r\n\r\nexport default designComponent({\r\n    name: 'pl-notice',\r\n    props: {\r\n        option: {type: Object as PropType<NoticeServiceFormatOption>, required: true}\r\n    },\r\n    emits: {\r\n        onClose: () => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const classes = useClass(() => [\r\n            'pl-notice',\r\n            `pl-notice-status-${props.option.status}`\r\n        ])\r\n        const styles = {zIndex: nextIndex()}\r\n        const close = () => {\r\n            emit.onClose()\r\n            !!props.option.onClose && props.option.onClose()\r\n        }\r\n        props.option.close = close\r\n        const handler = {\r\n            onClick: (e: MouseEvent) => {\r\n                !!props.option.onClick && props.option.onClick(e)\r\n            },\r\n            onClickCloseIcon: (e: MouseEvent) => {\r\n                close()\r\n            },\r\n            onMouseenter: () => {\r\n                if (!!closeTimer) {\r\n                    clearTimeout(closeTimer)\r\n                }\r\n            },\r\n            onMouseleave: () => {\r\n                !!props.option.time && (closeTimer = setTimeout(close, props.option.time))\r\n            }\r\n        }\r\n        let closeTimer: number | null = null\r\n        !!props.option.time && (closeTimer = setTimeout(close, props.option.time))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}\r\n                     style={styles}\r\n                     onMouseenter={handler.onMouseenter}\r\n                     onMouseleave={handler.onMouseleave}\r\n                     onClick={handler.onClick}>\r\n                    <div class=\"pl-notice-head\">\r\n                        {!!props.option.icon && <Icon class=\"pl-notice-head-icon\" icon={props.option.icon}/>}\r\n                        {(!!props.option.renderHead || !!props.option.title) && (\r\n                            <div class=\"pl-notice-title\">\r\n                                {!!props.option.renderHead ? props.option.renderHead() : props.option.title}\r\n                            </div>\r\n                        )}\r\n                        {!props.option.noClose && (\r\n                            <Button mode=\"text\" icon=\"el-icon-close\" class=\"pl-notice-close\" onClick={handler.onClickCloseIcon}/>\r\n                        )}\r\n                    </div>\r\n                    {(!!props.option.renderContent || !!props.option.message) && (\r\n                        <div class=\"pl-notice-content\">\r\n                            {!!props.option.renderContent ? props.option.renderContent() : props.option.message}\r\n                        </div>\r\n                    )}\r\n                    {!!props.option.renderFoot && (\r\n                        <div class=\"pl-notice-foot\">\r\n                            {props.option.renderFoot()}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {NoticeServiceDirection, NoticeServiceFormatOption} from \"./index\";\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport {nextTick, reactive} from 'vue';\r\nimport Notice from \"./notice\";\r\nimport List from '../list'\r\nimport Item from '../item'\r\n\r\nexport default designComponent({\r\n    name: 'pl-notice-container',\r\n    props: {\r\n        horizontal: {type: String, required: true},\r\n        vertical: {type: String, required: true},\r\n        duration: {type: String, default: \"30px\"},\r\n    },\r\n    setup({props}) {\r\n        const classes = useClass(() => [\r\n            'pl-notice-container',\r\n            `pl-notice-container-${props.horizontal}-${props.vertical}`\r\n        ])\r\n        const state = reactive({\r\n            options: [] as NoticeServiceFormatOption[]\r\n        })\r\n        const refs = useRefList<{ option: NoticeServiceFormatOption }>()\r\n        const styles = {padding: props.duration}\r\n        const utils = {\r\n            close: (i: number) => {\r\n                state.options.splice(i, 1)\r\n            }\r\n        }\r\n        return {\r\n            refer: {\r\n                props,\r\n                getNotice: async (option: NoticeServiceFormatOption) => {\r\n                    state.options.push(option)\r\n                    await nextTick()\r\n                    const messages = refs.filter(Boolean)\r\n                    for (let i = 0; i < messages.length; i++) {\r\n                        const message = messages[i];\r\n                        if (message.option === option) {\r\n                            return message\r\n                        }\r\n                    }\r\n                    return null\r\n                },\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles}>\r\n                    <List direction={props.horizontal === NoticeServiceDirection.start ? 'left' : 'right'}>\r\n                        <Item key=\"placeholder\"/>\r\n                        {state.options.map((option, index) =>\r\n                            <Item key={option.id}>\r\n                                <Notice option={option}\r\n                                        ref={(proxy: any) => refs[index] = proxy}\r\n                                        onClose={() => utils.close(index)}\r\n                                />\r\n                            </Item>\r\n                        )}\r\n                    </List>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {StyleStatus} from \"../../use/useStyle\";\r\nimport {registryRootService} from \"../root/registryRootService\";\r\nimport {RequireFormat, SimpleFunction, VNodeChild} from \"../../shims\";\r\nimport ManagerComponent from './notice-manager'\r\nimport {App} from 'vue';\r\nimport {STATUS} from \"../../utils/constant\";\r\nimport {getServiceWithoutContext} from \"../../utils/getServiceWithoutContext\";\r\n\r\nexport enum NoticeServiceDirection {\r\n    start = 'start',\r\n    end = 'end',\r\n}\r\n\r\nexport interface NoticeServiceOption {\r\n    title?: string | null,                              // 标题\r\n    message?: string,                                   // 通知消息\r\n    time?: number | null,                               // 停留时间\r\n    status?: StyleStatus,                               // 状态\r\n    icon?: string,                                      // 显示图标\r\n    noClose?: boolean,                                  // 不显示关闭按钮\r\n    renderHead?: () => VNodeChild,                      // 自定义头部内容\r\n    renderContent?: () => VNodeChild,                   // 自定义内容\r\n    renderFoot?: () => VNodeChild,                      // 自定义底部内容\r\n    onClick?: SimpleFunction,                           // 点击事件处理函数\r\n    onClose?: SimpleFunction,                           // 关闭处理函数\r\n    vertical?: NoticeServiceDirection,                  // 纵向位置\r\n    horizontal?: NoticeServiceDirection,                // 横向位置\r\n}\r\n\r\nexport type NoticeServiceFormatOption = RequireFormat<NoticeServiceOption, 'time' | 'status' | 'vertical' | 'horizontal'> & {\r\n    id: string,\r\n    close: () => void,\r\n}\r\n\r\n/**\r\n * 格式化消息配置参数\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:21\r\n */\r\nconst formatOption = (() => {\r\n    let idCount = 0\r\n    return (option: NoticeServiceOption): NoticeServiceFormatOption => {\r\n\r\n        const status = option.status === null ? null : (option.status || 'primary')\r\n\r\n        return Object.assign(option as NoticeServiceFormatOption, {\r\n            title: option.title === null ? null : (option.title || '消息提示'),\r\n            id: `message_${idCount++}`,\r\n            time: option.time === null ? null : (option.time || 3 * 1000),\r\n            status,\r\n            icon: option.icon || (!status ? null : STATUS[status].icon),\r\n            horizontal: option.horizontal || NoticeServiceDirection.end,\r\n            vertical: option.vertical || NoticeServiceDirection.start,\r\n            close: () => undefined,\r\n        })\r\n    }\r\n})()\r\n\r\nexport interface NoticeServiceFunction {\r\n    (message: string | NoticeServiceOption, option?: NoticeServiceOption): void\r\n}\r\n\r\nexport type NoticeService = NoticeServiceFunction & { [k in 'primary' | 'success' | 'warn' | 'error' | 'info']: NoticeServiceFunction }\r\n\r\nconst getNoticeService = registryRootService(\r\n    'notice',\r\n    ManagerComponent,\r\n    (getManager) => {\r\n        const service: NoticeServiceFunction = (message: string | NoticeServiceOption, option?: NoticeServiceOption): NoticeServiceFormatOption => {\r\n            let o = typeof message === \"object\" ? message : {message}\r\n            if (!!option) {\r\n                Object.assign(o, option)\r\n            }\r\n            const fo = formatOption(o);\r\n            getManager().then(manager => manager.getContainer(fo).then(container => container.getNotice(fo)))\r\n            return fo\r\n        };\r\n\r\n        return Object.assign(service, [\r\n            'lite',\r\n            'dark',\r\n            'primary',\r\n            'success',\r\n            'warn',\r\n            'error',\r\n            'info',\r\n        ].reduce((prev: any, status: any) => {\r\n            prev[status] = function (message: string | NoticeServiceOption, option?: NoticeServiceOption) {\r\n                const o = typeof message === \"object\" ? message : {message}\r\n                if (!!option) {\r\n                    Object.assign(o, option)\r\n                }\r\n                o.status = status\r\n                return service(o)\r\n            }\r\n            return prev\r\n        }, {})) as NoticeService\r\n    }\r\n)\r\n\r\nexport const $$notice = getServiceWithoutContext(getNoticeService)\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            computed: {\r\n                $notice() {return getNoticeService(this)},\r\n            },\r\n        })\r\n    },\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {NoticeServiceDirection} from \"./index\";\r\nimport {nextTick, reactive} from 'vue';\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport Container from \"./notice-container\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-notice-manager',\r\n    setup() {\r\n\r\n        const state = reactive({\r\n            containers: [\r\n                {\r\n                    horizontal: NoticeServiceDirection.end,\r\n                    vertical: NoticeServiceDirection.start,\r\n                }] as { horizontal: NoticeServiceDirection, vertical: NoticeServiceDirection }[]\r\n        })\r\n\r\n        const refs = useRefList<typeof Container.use.class>()\r\n\r\n        const getContainer = async (config: { horizontal: NoticeServiceDirection, vertical: NoticeServiceDirection }): Promise<typeof Container.use.class> => {\r\n            for (let i = 0; i < refs.length; i++) {\r\n                const ref = refs[i];\r\n                if (ref.props.horizontal === config.horizontal && ref.props.vertical === config.vertical) {\r\n                    return ref\r\n                }\r\n            }\r\n            state.containers.push(config);\r\n            await nextTick()\r\n            return getContainer(config)\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                name: 'I am notice controller',\r\n                getContainer,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-notice-manager\">\r\n                    {state.containers.map((container, index) =>\r\n                        <Container horizontal={container.horizontal}\r\n                                   vertical={container.vertical}\r\n                                   ref={(proxy: any) => refs[index] = proxy}/>)}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {reactive, UnwrapRef} from 'vue'\r\n\r\n/**\r\n * 给mark对象使用，用来创建管理flag的对象\r\n * @author  韦胜健\r\n * @date    2020/11/27 11:38\r\n */\r\nexport function createFlagManager<T = boolean>() {\r\n    return {\r\n        state: reactive({\r\n            map: {} as { [k: string]: T }\r\n        }),\r\n        get(key: string) {\r\n            return this.state.map[key]\r\n        },\r\n        set(key: string, val: UnwrapRef<T>) {\r\n            /*if (this.state.map.hasOwnProperty(key)) {\r\n                this.state.map[key] = val\r\n            } else {\r\n                set(this.state.map, key, val)\r\n            }*/\r\n            this.state.map[key] = val\r\n        },\r\n        getActiveKeys(): string[] {\r\n            const keys: string[] = []\r\n            for (let key in this.state.map) {\r\n                if (!!this.state.map[key]) {\r\n                    keys.push(key)\r\n                }\r\n            }\r\n            return keys\r\n        }\r\n    }\r\n}","import {CascadeNode} from \"./CascadeNode\";\r\nimport {reactive} from \"vue\";\r\nimport {createKeyHandler} from \"../../../utils/createKeyHandler\";\r\nimport {createFlagManager} from \"../../../utils/createFlagManager\";\r\n\r\nconst generator = createKeyHandler('cascade_node')\r\n\r\nexport interface CascadeConfig {\r\n    nodeDisabled?: (node: CascadeNode) => boolean,\r\n    isLeaf?: (node: CascadeNode) => boolean,\r\n    lazy?: boolean,\r\n    getChildren?: (node: CascadeNode, cb: (...args: any[]) => void) => void,\r\n    filterMethod?: (filterData: CascadeNode[], filterText: string) => boolean\r\n\r\n    labelField: string,\r\n    keyField: string,\r\n    childrenField: string,\r\n}\r\n\r\nexport class CascadeMark {\r\n\r\n    constructor(public config: () => CascadeConfig, public ctxState: () => {\r\n        expandKeys: string[],\r\n        filterText: string | undefined,\r\n    }) {}\r\n\r\n    selfGetter = () => this;\r\n\r\n    node = {\r\n        state: reactive({\r\n            map: {} as { [k: string]: CascadeNode }\r\n        }),\r\n        get: (\r\n            data: any,\r\n            level: number,\r\n            parentRef: () => (CascadeNode | null),\r\n        ): CascadeNode => {\r\n            const key = generator(data, this.config().keyField)\r\n            let node: CascadeNode = this.node.state.map[key]\r\n            if (!!node) {\r\n                if (node.data != data) {\r\n                    node.data = data\r\n                }\r\n                node.level = level\r\n                node.parentRef = parentRef\r\n            } else {\r\n                node = new CascadeNode(\r\n                    key,\r\n                    data,\r\n                    level,\r\n                    this.config,\r\n                    parentRef,\r\n                    this.selfGetter,\r\n                    this.ctxState,\r\n                )\r\n                this.node.state.map[key] = node\r\n            }\r\n            return node\r\n        },\r\n        getList: (list: any[] | undefined, level: number, parentRef: () => (CascadeNode | null)): CascadeNode[] => {\r\n            if (!list) return []\r\n            return list.map(item => this.node.get(item, level, parentRef))\r\n        }\r\n    }\r\n\r\n    loading = createFlagManager()\r\n    loaded = createFlagManager()\r\n\r\n}","import {defer} from \"../../utils/defer\";\r\nimport {$$message} from \"../message\";\r\n\r\nexport type FileServiceSingleFile = File & { calcSize: number }\r\nexport type FileServiceValidator = (file: FileServiceSingleFile) => boolean\r\n\r\nexport type FileServiceChooseFileConfig = {\r\n    multiple?: boolean,                 // 是否多选\r\n    accept?: string,                    // 选择的文件类型， input组件的accept属性值\r\n    validator?: FileServiceValidator,   // 自定义校验函数\r\n    max?: number,                       // 最大文件大小\r\n}\r\n\r\nexport type FileServiceUploadErrorEvent = Error & {\r\n    status: number,\r\n    method: string,\r\n    url: string,\r\n    config: FileServiceUploadConfig,\r\n}\r\n\r\nexport type FileServiceUploadConfig = {\r\n    action: string,                             // 上传地址\r\n    file: File | File[],                        // 上传的文件\r\n    filename: string,                           // 上传文件接收的文件名\r\n    data?: Record<string, string>,               // 上传的额外数据\r\n    headers?: Record<string, string>,           // 请求头\r\n    withCredentials?: boolean,                  // 是否带cookies凭证\r\n    onProgress?: (percent: number, e: ProgressEvent) => void,\r\n    onSuccess?: (data: string | Record<string, string>) => void,\r\n    onError?: (e: FileServiceUploadErrorEvent | ProgressEvent) => void,\r\n}\r\n\r\nexport const FileServiceDefaultAccept = {\r\n    // image: 'image/gif, image/jpeg, image/png, image/jpg',\r\n    image: 'bmp,jpg,jpeg,png,tif,gif,pcx,tga,exif,fpx,svg,psd,cdr,pcd,dxf,ufo,eps,ai,raw,WMF,webp,avif'.split(',').map(i => `image/${i}`).join(', '),\r\n    excel: 'application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\r\n} as Record<string, string>\r\n\r\nexport function createFileService() {\r\n\r\n    /**\r\n     * 选择文件\r\n     * @author  韦胜健\r\n     * @date    2021/1/1 17:03\r\n     */\r\n    const chooseFile = (config?: FileServiceChooseFileConfig) => {\r\n        config = config || {}\r\n        const input = getInput()\r\n\r\n        /*multiple*/\r\n        if (config.multiple) {\r\n            input.setAttribute('multiple', 'multiple')\r\n        } else {\r\n            input.removeAttribute('multiple')\r\n        }\r\n        /*accept*/\r\n        if (!!config.accept) {\r\n            const defaultInputAccept = FileServiceDefaultAccept[config.accept]\r\n            input.setAttribute('accept', defaultInputAccept || config.accept)\r\n        } else {\r\n            input.removeAttribute('accept')\r\n        }\r\n        const dfd = defer<FileServiceSingleFile | FileServiceSingleFile[]>()\r\n\r\n        if (!!input.__change) {\r\n            input.value = null as any\r\n            input.removeEventListener('change', input.__change)\r\n        }\r\n        input.__change = (e) => {\r\n            const targetFiles = (e as any).target.files as FileServiceSingleFile[]\r\n            const files = []\r\n            for (let i = 0; i < targetFiles.length; i++) {\r\n                const file = targetFiles[i];\r\n                file.calcSize = Number((file.size / (1024 * 1024)).toFixed(2))\r\n                if (!!config!.validator && !config!.validator(file)) return\r\n                if (!!config!.max && file.calcSize > config!.max) {\r\n                    return $$message.error(`[${file.name}]大小为${file.calcSize}MB，超过最大限制${config!.max}MB`, {time: 5000})\r\n                }\r\n                files.push(file)\r\n            }\r\n            dfd.resolve(config!.multiple ? files : files[0])\r\n        }\r\n        input.addEventListener('change', input.__change)\r\n        input.click()\r\n\r\n        return dfd.promise\r\n    }\r\n\r\n    /**\r\n     * 选择tupiuan\r\n     * @author  韦胜健\r\n     * @date    2021/1/1 17:03\r\n     */\r\n    const chooseImage = (multiple?: boolean) => {\r\n        const config: FileServiceChooseFileConfig = {accept: \"image\", multiple}\r\n        return chooseFile(config)\r\n    }\r\n\r\n    /**\r\n     * 读取文件为base64字符串\r\n     * @author  韦胜健\r\n     * @date    2021/1/1 17:04\r\n     */\r\n    const readAsDataURL = (file: File) => {\r\n        const dfd = defer<string | ArrayBuffer | null>()\r\n        let fr = new FileReader()\r\n        fr.onloadend = e => dfd.resolve(e.target!.result)\r\n        fr.onerror = () => dfd.reject()\r\n        fr.readAsDataURL(file)\r\n        return dfd.promise\r\n    }\r\n\r\n    /**\r\n     * 上传文件\r\n     * @author  韦胜健\r\n     * @date    2021/1/1 17:07\r\n     */\r\n    const upload = (uploadConfig: FileServiceUploadConfig) => {\r\n        const xhr = ('XMLHttpRequest' in window ? new XMLHttpRequest() : new (Window as any).ActiveXObject('Microsoft.XMLHTTP')) as XMLHttpRequest\r\n        xhr.open('post', uploadConfig.action, true)\r\n\r\n        if (!!xhr.upload) {\r\n            xhr.upload.addEventListener('progress', (e) => {\r\n                const percent = Number((e.loaded / e.total * 100).toFixed(2))\r\n                !!uploadConfig.onProgress && uploadConfig.onProgress(percent, e)\r\n            })\r\n        }\r\n\r\n        if (uploadConfig.withCredentials != null && 'withCredentials' in xhr) {\r\n            xhr.withCredentials = uploadConfig.withCredentials\r\n        }\r\n\r\n        if (!!uploadConfig.headers)\r\n            Object.entries(uploadConfig.headers)\r\n                .forEach(([key, value]) => xhr.setRequestHeader(key, value))\r\n\r\n        xhr.onerror = (e) => !!uploadConfig.onError && uploadConfig.onError(e)\r\n        xhr.onload = () => {\r\n            if (xhr.status < 200 || xhr.status > 300) {\r\n                !!uploadConfig.onError && uploadConfig.onError(getError(uploadConfig, xhr))\r\n            } else {\r\n                !!uploadConfig.onSuccess && uploadConfig.onSuccess(getResponseBody(xhr))\r\n            }\r\n        }\r\n        const formData = new FormData()\r\n        if (!!uploadConfig.data) Object.entries(uploadConfig.data).forEach(([key, value]) => formData.append(key, value))\r\n        if (Array.isArray(uploadConfig.file)) {\r\n            uploadConfig.file.forEach(f => formData.append(uploadConfig.filename, f))\r\n        } else {\r\n            formData.append(uploadConfig.filename, uploadConfig.file);\r\n        }\r\n        xhr.send(formData)\r\n        return xhr\r\n    }\r\n\r\n    return {\r\n        chooseFile,\r\n        chooseImage,\r\n        readAsDataURL,\r\n        upload,\r\n    }\r\n}\r\n\r\nconst getInput = (() => {\r\n    let input: HTMLInputElement & { __change?: (e: Event) => void };\r\n    return () => {\r\n        if (!input) {\r\n            input = document.createElement('input')\r\n            input.setAttribute('type', 'file')\r\n            input.style.display = 'none'\r\n            document.body.appendChild(input)\r\n        }\r\n        return input\r\n    }\r\n})();\r\n\r\nfunction getError(config: FileServiceUploadConfig, xhr: XMLHttpRequest) {\r\n    let message: string\r\n    console.log(xhr)\r\n    if (!!xhr.response) {\r\n        message = xhr.response.error || xhr.response\r\n    } else if (!!xhr.responseText) {\r\n        message = xhr.responseText\r\n    } else {\r\n        message = `file to post ${config.action} ${xhr.status}`\r\n    }\r\n\r\n    const error = new Error(message) as FileServiceUploadErrorEvent\r\n    error.status = xhr.status\r\n    error.method = 'post'\r\n    error.url = config.action\r\n    error.config = config\r\n\r\n    return error\r\n}\r\n\r\nfunction getResponseBody(xhr: XMLHttpRequest) {\r\n    let result = xhr.responseText || xhr.response\r\n    if (!result) return result\r\n    try {\r\n        return JSON.parse(result)\r\n    } catch (e) {\r\n        return result\r\n    }\r\n}\r\n\r\nexport const $$file = createFileService()","import {createDefaultService} from \"../../root/createDefaultService\";\r\nimport {nextTick, reactive, ref, computed} from 'vue';\r\nimport {PopperServiceComponentOption} from \"./utils\";\r\nimport {createCounter} from \"../../../utils/createCounter\";\r\nimport {PlPopper} from \"../popper\";\r\n\r\n/**\r\n * 生成id的计数器，每次show的时候获取一个新的计数器，一遍令render重新渲染\r\n * @author  韦胜健\r\n * @date    2020/11/27 9:31\r\n */\r\nconst counter = createCounter('popper-service-component')\r\n\r\n/**\r\n * 合并attrs\r\n * @author  韦胜健\r\n * @date    2020/11/27 9:31\r\n */\r\nconst mergeAttrs = (() => {\r\n    const LISTENER_MATCH_REG = /on[A-Z]/\r\n    return (config: { attrs: any, defaultAttrs: any, agent: any }) => {\r\n        const {agent} = config\r\n        let attrs = config.attrs || {}\r\n        let defaultAttrs = config.defaultAttrs || {}\r\n        if (typeof attrs === \"function\") {attrs = attrs()}\r\n        if (typeof defaultAttrs === \"function\") {defaultAttrs = defaultAttrs()}\r\n\r\n        const result = {} as any\r\n        Object.keys({...attrs, ...defaultAttrs}).forEach(key => {\r\n            if (LISTENER_MATCH_REG.test(key)) {\r\n                result[key] = (...args: any[]) => {\r\n                    !!(attrs as any)[key] && (attrs as any)[key].apply(agent, args);\r\n                    !!(defaultAttrs as any)[key] && (defaultAttrs as any)[key].apply(agent, args);\r\n                }\r\n            } else {\r\n                if (key in attrs) {\r\n                    result[key] = attrs[key]\r\n                } else {\r\n                    result[key] = defaultAttrs[key]\r\n                }\r\n            }\r\n        })\r\n        return result\r\n    }\r\n})();\r\n\r\n/**\r\n * 创建一个基于 pl-popper 的service 组件\r\n * @author  韦胜健\r\n * @date    2020/11/27 9:31\r\n */\r\nexport function createPopperServiceComponent(name: string) {\r\n    return createDefaultService({\r\n        name,\r\n        setup(option: PopperServiceComponentOption) {\r\n\r\n            /*当前是否显示/隐藏*/\r\n            const isShow = ref(false)\r\n            /*当前是否已经显示/隐藏*/\r\n            const isOpen = ref(false)\r\n\r\n            const state = reactive({\r\n                option,                                 // 当前服务的option\r\n                renderKey: counter(),                   // 用于刷新render的key\r\n            })\r\n\r\n            /**\r\n             * 开始服务\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:32\r\n             */\r\n            async function service(option: PopperServiceComponentOption) {\r\n                let newKey = true\r\n                if (!option.getService || option.getService !== getRefer) {\r\n                    /*clear*/\r\n                    state.option.getService = undefined\r\n                    /*init*/\r\n                    state.option = option\r\n                    state.option.getService = getRefer\r\n                    state.renderKey = counter()\r\n                    newKey = false\r\n                    await nextTick()\r\n                }\r\n                await show(newKey)\r\n            }\r\n\r\n            /**\r\n             * 显示服务\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:33\r\n             * @param   newKey          默认情况下每次show之前都应该重新初始化内容，避免不必要的bug\r\n             */\r\n            async function show(newKey = true) {\r\n                if (newKey) {\r\n                    state.renderKey = counter()\r\n                    await nextTick()\r\n                }\r\n                isShow.value = true\r\n            }\r\n\r\n            /**\r\n             * 隐藏服务\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:33\r\n             */\r\n            function hide() {isShow.value = false}\r\n\r\n            /**\r\n             * service本身暴露的对象\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:39\r\n             */\r\n            const refer = {state, isShow, isOpen, service, show, hide,}\r\n\r\n            /**\r\n             * service本身暴露对象的引用，保存在option.getService中，用于标记service与option的绑定关系\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:39\r\n             */\r\n            const getRefer = () => refer\r\n\r\n            /**\r\n             * 合并后的popper属性\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:40\r\n             */\r\n            const popperAttrs = computed(() => {\r\n                let {defaultOption: {defaultPopperAttrs}, serviceOption: {popperAttrs}} = state.option\r\n                return mergeAttrs({agent: refer, attrs: popperAttrs, defaultAttrs: defaultPopperAttrs,})\r\n            })\r\n\r\n            /**\r\n             * 合并之后的render属性\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:40\r\n             */\r\n            const renderAttrs = computed(() => {\r\n                let {defaultOption: {defaultRenderAttrs}, serviceOption: {renderAttrs}} = state.option\r\n                return {\r\n                    ...mergeAttrs({agent: refer, attrs: renderAttrs, defaultAttrs: defaultRenderAttrs,}),\r\n                    key: state.renderKey,\r\n                }\r\n            })\r\n\r\n            const handler = {\r\n                onClickBody: () => {\r\n                    if (state.option.serviceOption.hideOnClickBody !== false) {\r\n                        refer.hide()\r\n                    }\r\n                },\r\n            }\r\n\r\n            return {\r\n                refer,\r\n                render: () => (\r\n                    <PlPopper\r\n                        v-model={isShow.value}\r\n                        onClickBody={handler.onClickBody}\r\n                        popperAttrs={{['service-name']: name}}\r\n                        {...{\r\n                            transition: 'pl-transition-scale',\r\n                            noContentPadding: true,\r\n                            trigger: 'manual',\r\n                            reference: state.option.serviceOption.reference,\r\n                            'onUpdate:open': (val: boolean) => isOpen.value = val,\r\n                            ...popperAttrs.value,\r\n                        }}\r\n                        v-slots={{\r\n                            popper: () => state.option.defaultOption.render(renderAttrs.value),\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        },\r\n    })\r\n}","import {ComponentPublicInstance, computed, reactive} from 'vue';\r\nimport {registryRootService, RootServiceScope} from \"../../root/registryRootService\";\r\nimport {createDefaultManager} from \"../../root/createDefaultManager\";\r\nimport {createPopperServiceComponent} from \"./createPopperServiceComponent\";\r\nimport {CreateAgentGetterOption, PopperAgent, PopperServiceComponentOption, SpecificPopperServiceOption} from './utils';\r\n\r\n/**\r\n * 创建一个获取popper agent的函数\r\n * @author  韦胜健\r\n * @date    2020/11/26 21:15\r\n */\r\nexport function createAgentGetter(defaultOption: CreateAgentGetterOption, scope = RootServiceScope.root) {\r\n\r\n    /**\r\n     * 创建一个生成service的函数\r\n     * @author  韦胜健\r\n     * @date    2020/11/27 9:30\r\n     */\r\n    function create(ins: ComponentPublicInstance) {\r\n        const name = defaultOption.name\r\n        /*---------------------------------------Specific Popper Service-------------------------------------------*/\r\n        const popperServiceGetter = registryRootService(\r\n            name,\r\n            createDefaultManager(\r\n                `pl-popper-service-${name}-manager`,\r\n                createPopperServiceComponent(`pl-popper-service-${name}`)\r\n            ),\r\n            (getManager) => {\r\n                return (serviceOption: SpecificPopperServiceOption): PopperAgent => {\r\n\r\n                    const option: PopperServiceComponentOption = {\r\n                        defaultOption,\r\n                        serviceOption,\r\n                        getService: undefined,\r\n                    }\r\n\r\n                    /*---------------------------------------create popper agent-------------------------------------------*/\r\n                    const state = reactive({option})\r\n                    const service = computed(() => !state.option.getService ? null : state.option.getService())\r\n                    const isShow = computed(() => !!service.value && service.value.isShow.value)\r\n                    const isOpen = computed(() => !!service.value && service.value.isShow.value)\r\n                    const agent = reactive({\r\n                        state,\r\n                        isShow,\r\n                        isOpen,\r\n                        service,\r\n                        show: () => {!!agent.service ? agent.service.show() : getManager().then(manager => manager.service(option))},\r\n                        hide: () => {!!agent.service && agent.service.hide()},\r\n                        toggle: () => isShow.value ? agent.hide() : agent.show(),\r\n                        destroy: () => {\r\n                            agent.hide()\r\n                            state.option.getService = undefined\r\n                        }\r\n                    })\r\n                    return agent\r\n                }\r\n            },\r\n        )\r\n\r\n        return popperServiceGetter(ins)\r\n    }\r\n\r\n    /*缓存 service，scope为缓存的作用域*/\r\n    const cacheMap = new WeakMap<ComponentPublicInstance, ReturnType<typeof create>>()\r\n\r\n    return (ins: ComponentPublicInstance) => {\r\n        const cacheKey = scope === RootServiceScope.ins ? ins : ins.$root!\r\n        let service = cacheMap.get(cacheKey)\r\n        if (!!service) {\r\n            return service\r\n        }\r\n        service = create(ins)\r\n        cacheMap.set(cacheKey, service)\r\n        return service\r\n    }\r\n}","import {ComponentPlugin} from \"../shims\";\r\nimport {App} from 'vue';\r\n\r\nconst installMap = new WeakMap<App, ComponentPlugin[]>()\r\n\r\nexport function installPlugin(app: App, plugins: ComponentPlugin | ComponentPlugin[]) {\r\n    /*已经安装过的插件*/\r\n    let installedPlugins = installMap.get(app)\r\n    if (!installedPlugins) {\r\n        /*这个app第一次注册*/\r\n        installedPlugins = []\r\n        installMap.set(app, installedPlugins)\r\n    }\r\n    (Array.isArray(plugins) ? plugins : [plugins]).forEach(plugin => {\r\n        if (installedPlugins!.indexOf(plugin) === -1) {\r\n            installedPlugins!.push(plugin)// 这句代码一定要在app.use面前\r\n            app.use(plugin)\r\n        }\r\n    });\r\n}","import {computed, PropType, reactive, watch} from \"vue\";\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport './button.scss'\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {ButtonModeProvider} from \"../button-group/button-group\";\r\nimport {SimpleFunction} from \"../../shims\";\r\nimport {throttle} from 'plain-utils/utils/throttle'\r\nimport {unit} from 'plain-utils/string/unit'\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport Icon from '../icon'\r\nimport Loading from '../loading'\r\n\r\nconsole.log('load button component')\r\n\r\nexport const PlButton = designComponent({\r\n    name: 'pl-button',\r\n    directives: {ClickWave},\r\n    props: {\r\n        mode: {type: String, default: 'fill'},                  // fill,stroke,text\r\n        label: {type: [String, Object]},                        // 按钮文本\r\n        width: {type: [String, Number]},                        // 按钮宽度\r\n        icon: {type: String},                                   // 按钮图标\r\n        active: {type: Boolean},                                // 按钮是否高亮\r\n        noPadding: {type: Boolean},                             // 按钮是否无边距\r\n        block: {type: Boolean},                                 // 块级元素\r\n        throttleClick: {type: [Boolean, Number]},               // click节流\r\n        asyncHandler: {type: Function as PropType<(e: MouseEvent) => void>},    // 异步处理函数，会自动开启关闭loading状态\r\n\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        /*native*/\r\n        type: {type: String, default: 'button'},\r\n        nativeAttrs: {type: Object},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n        const {propsState} = useProps(props, {\r\n            width: useProps.NUMBER,\r\n            label: useProps.PROMISE,\r\n        })\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        const {editState, editComputed} = useEdit()\r\n        const buttonGroup = ButtonModeProvider.inject()\r\n        const otherComputed = computed(() => ({\r\n            mode: !!buttonGroup ? buttonGroup.value.mode : props.mode\r\n        }))\r\n        const state = reactive({\r\n            handleClick: null as SimpleFunction | null,\r\n            handleClickInner: async (e: MouseEvent) => {\r\n                e.stopPropagation()\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                if (!props.asyncHandler) {\r\n                    return emit.onClick(e)\r\n                }\r\n                editState.loading = true\r\n                try {\r\n                    await props.asyncHandler(e)\r\n                } catch (e) {\r\n                    console.error(e)\r\n                } finally {\r\n                    editState.loading = null\r\n                }\r\n            },\r\n        })\r\n\r\n        watch(\r\n            () => props.throttleClick,\r\n            (val) => {\r\n                if (!val) {\r\n                    return state.handleClick = state.handleClickInner\r\n                }\r\n                if (val === true) {\r\n                    val = 1000\r\n                }\r\n                state.handleClick = throttle(state.handleClickInner, val, {trailing: false})\r\n            },\r\n            {immediate: true}\r\n        )\r\n\r\n        const classes = computed(() => ([\r\n            'pl-button',\r\n            'plain-click-node',\r\n\r\n            `pl-button-mode-${otherComputed.value.mode}`,\r\n            `pl-button-status-${styleComputed.value.status}`,\r\n            `pl-button-shape-${styleComputed.value.shape}`,\r\n            `pl-button-size-${styleComputed.value.size}`,\r\n\r\n            {\r\n                'pl-button-icon': !!props.icon,\r\n                'pl-button-active': !!props.active,\r\n                'pl-button-noPadding': !!props.noPadding,\r\n\r\n                'pl-button-loading': !!editComputed.value.loading,\r\n                'pl-button-has-icon': !!props.icon,\r\n                'pl-button-block': !!props.block,\r\n                'pl-button-disabled': !!editComputed.value.disabled,\r\n                'pl-button-icon-only': !!props.icon && !propsState.label,\r\n            },\r\n        ]))\r\n\r\n        const styles = useStyles(style => {\r\n            style.width = unit(propsState.width)\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <button\r\n                        style={styles.value}\r\n                        class={classes.value}\r\n                        type={props.type as any}\r\n                        disabled={editComputed.value.disabled!}\r\n                        v-click-wave={\"large\"}\r\n                        {...{\r\n                            ...(props.nativeAttrs || {}),\r\n                            onClick: state.handleClick!,\r\n                        }}\r\n                    >\r\n                        {!!editComputed.value.loading && <Loading type=\"gamma\"/>}\r\n                        {\r\n                            slots.default(<>\r\n                                {(!!props.icon && !editComputed.value.loading) ? <Icon icon={props.icon}/> : null}\r\n                                {propsState.label ? <span>{propsState.label}</span> : null}\r\n                            </>)\r\n                        }\r\n                    </button>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {PlIcon} from './icon'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlIcon)","/**\r\n * 创建一个用来管理key的对象\r\n * @author  韦胜健\r\n * @date    2020/11/27 11:38\r\n */\r\nexport function createKeyHandler(prefix: string) {\r\n    const map = new WeakMap<any, string>()\r\n    let count = 1\r\n    return (obj: any, keyField?: string | null): string => {\r\n        if (!!keyField) {\r\n            return obj[keyField]\r\n        }\r\n        let key = map.get(obj)\r\n        if (!key) {\r\n            key = `${prefix}_${count++}`\r\n            map.set(obj, key)\r\n        }\r\n        return String(key)\r\n    }\r\n}","import {hsv2rgb, parseHexChannel, rgb2hex, rgb2hsv} from \"./ColorUtils\";\r\n\r\nexport enum ColorFormat {\r\n    hex = 'hex',\r\n    rgb = 'rgb'\r\n}\r\n\r\nexport class Color {\r\n\r\n    red = 0                                             // 红\r\n    green = 0                                           // 绿\r\n    blue = 0                                            // 蓝\r\n\r\n    hue = 0                                             // 色相\r\n    saturation = 0                                      // 饱和度\r\n    val = 0                                             // 明亮度\r\n\r\n    alpha = 0                                           // 透明度\r\n    hex = ''                                            // 十六进制值\r\n    enableAlpha = false                                 // 是否启用透明度\r\n    format: ColorFormat = ColorFormat.hex               // 格式\r\n\r\n    _value?: string;                                    // 当前值，hex或者rgb字符串\r\n\r\n    /*当前rgb颜色值，如果启用透明度，则为rgba*/\r\n    get rgbColor(): string | undefined {\r\n        if (!this.red && !this.green && !this.blue) {\r\n            return undefined\r\n        }\r\n        return `rgb${this.enableAlpha ? 'a' : ''}(${this.red},${this.green},${this.blue}${this.enableAlpha ? ',' + (this.alpha / 100).toFixed(2) : ''})`\r\n    }\r\n\r\n    /*当前颜色，可能是rgb，也可能是hex*/\r\n    get currentColor(): string | undefined {\r\n        /*如果是带透明度的，强制使用rgb格式*/\r\n        return this.enableAlpha || this.format === 'rgb' ? this.rgbColor : this.hex\r\n    }\r\n\r\n    /*当前颜色值*/\r\n    get color(): string | undefined {\r\n        if (this._value == null) return undefined\r\n        return this.currentColor\r\n    }\r\n\r\n    constructor(value: string, enableAlpha: boolean, format: ColorFormat) {\r\n        if (format != null) {\r\n            this.format = format\r\n        }\r\n        if (enableAlpha != null) {\r\n            this.enableAlpha = enableAlpha\r\n        }\r\n\r\n        this.updateByString(value, true, enableAlpha)\r\n    }\r\n\r\n    /**\r\n     * 根据值更新color信息\r\n     * @author  韦胜健\r\n     * @date    2020/4/4 21:57\r\n     */\r\n    public setValue(value: string): void {\r\n        this.updateByString(value, false)\r\n    }\r\n\r\n    /**\r\n     * 根据新值更新当前color信息\r\n     * @author  韦胜健\r\n     * @date    2020/4/4 12:10\r\n     */\r\n    public updateByString(value: string, needInitializedEnableAlpha = false, enableAlpha?: boolean): void {\r\n        this._value = value\r\n        if (value == null) {\r\n            this.hue = 0\r\n            this.saturation = 0\r\n            this.val = 100\r\n            this.alpha = 100\r\n            return\r\n        }\r\n        /*如果输入值是rgb格式*/\r\n        if (value.indexOf('rgb') !== -1) {\r\n            const parts = value.replace(/rgba|rgb|\\(|\\)/gm, '').split(/\\s|,/g).filter((val) => val !== '').map((val, index) => index > 2 ? parseFloat(val) : parseInt(val, 10));\r\n            if (parts.length === 4) {\r\n                this.alpha = Math.floor(parseFloat(`${parts[3]}`) * 100);\r\n                needInitializedEnableAlpha && (enableAlpha == null) && (this.enableAlpha = true)\r\n            } else if (parts.length === 3) {\r\n                this.alpha = 100;\r\n                needInitializedEnableAlpha && (enableAlpha == null) && (this.enableAlpha = false)\r\n            }\r\n            if (parts.length >= 3) {\r\n                this.setRgb(parts[0], parts[1], parts[2])\r\n            }\r\n            return\r\n        }\r\n\r\n        /*如果是16进制格式*/\r\n        if (value.indexOf('#') !== -1) {\r\n            const hex = value.replace('#', '').trim();\r\n            if (hex.length === 8) {\r\n                this.alpha = Math.floor(parseHexChannel(hex.substring(6)) / 255 * 100);\r\n                needInitializedEnableAlpha && (enableAlpha == null) && (this.enableAlpha = true)\r\n            } else if (hex.length === 3 || hex.length === 6) {\r\n                this.alpha = 100;\r\n                needInitializedEnableAlpha && (enableAlpha == null) && (this.enableAlpha = false)\r\n            }\r\n            this.setHex(value)\r\n        }\r\n    }\r\n\r\n    /*\r\n   *  通过rgb设置当前颜色\r\n   *  @author     martsforever\r\n   *  @datetime   2019/2/17 19:49\r\n   */\r\n    setRgb(r: number, g: number, b: number): void {\r\n        this.red = r\r\n        this.green = g\r\n        this.blue = b\r\n\r\n        /*设置hsv*/\r\n        const {h, s, v} = rgb2hsv(r, g, b)\r\n        this.hue = h\r\n        this.saturation = s\r\n        this.val = v\r\n\r\n        /*设置hex*/\r\n        this.hex = rgb2hex(r, g, b)\r\n\r\n        this._value = this.currentColor\r\n    }\r\n\r\n    /*\r\n     *  根据当前rgb更新颜色\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:51\r\n     */\r\n    updateByRgb(): void {\r\n        this.setRgb(this.red, this.green, this.blue)\r\n    }\r\n\r\n    /*\r\n     *  通过十六进制色改变当前颜色\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:13\r\n     */\r\n    setHex(hex: string): void {\r\n        this.hex = hex\r\n\r\n        /*设置rgb*/\r\n        hex = hex.replace('#', '').trim();\r\n        if (hex.length === 3) {\r\n            this.red = parseHexChannel(hex[0] + hex[0]);\r\n            this.green = parseHexChannel(hex[1] + hex[1]);\r\n            this.blue = parseHexChannel(hex[2] + hex[2]);\r\n        } else if (hex.length === 6 || hex.length === 8) {\r\n            this.red = parseHexChannel(hex.substring(0, 2));\r\n            this.green = parseHexChannel(hex.substring(2, 4));\r\n            this.blue = parseHexChannel(hex.substring(4, 6));\r\n        }\r\n        if (hex.length === 8) {\r\n            this.alpha = Math.floor(parseHexChannel(hex.substring(6)) / 255 * 100);\r\n        } else if (hex.length === 3 || hex.length === 6) {\r\n            this.alpha = 100;\r\n        }\r\n\r\n        /*设置hsv*/\r\n        const {h, s, v} = rgb2hsv(this.red, this.green, this.blue)\r\n        this.hue = h\r\n        this.saturation = s\r\n        this.val = v\r\n\r\n        this._value = this.currentColor\r\n    }\r\n\r\n    /*\r\n     *  根据当前hex更新rgb以及hsv\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:23\r\n     */\r\n    updateByHex() {\r\n        this.setHex(this.hex)\r\n    }\r\n\r\n    /*\r\n     *  通过设置Hsv改变当前颜色\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:14\r\n     */\r\n    setHsv(hue: number, saturation: number, val: number) {\r\n        this.hue = hue\r\n        this.saturation = saturation\r\n        this.val = val\r\n\r\n        /*设置rgb*/\r\n        const {r, g, b} = hsv2rgb(hue, saturation, val)\r\n        this.red = r\r\n        this.green = g\r\n        this.blue = b\r\n\r\n        /*设置hex*/\r\n        this.hex = rgb2hex(r, g, b)\r\n\r\n        this._value = this.currentColor\r\n    }\r\n\r\n    /*\r\n     *  根据hsv更新当前rgbyijihex\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:23\r\n     */\r\n    updateByHsv() {\r\n        this.setHsv(this.hue, this.saturation, this.val)\r\n    }\r\n\r\n    updateByAlpha() {\r\n        this._value = this.currentColor\r\n    }\r\n}","import './color-panel.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {Color, ColorFormat} from \"./utils/Color\";\r\nimport {nextTick, reactive, watch} from 'vue';\r\nimport {isEffectiveColorString} from \"./utils/ColorUtils\";\r\nimport Input from '../input'\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {$$notice} from \"../notice-service\";\r\nimport {PlColorSvPanel} from \"./sub/color-sv-panel\";\r\nimport {PlColorAlphaSlider} from \"./sub/color-alpha-slider\";\r\nimport {PlColorHueSlider} from \"./sub/color-hue-slider\";\r\nimport {PlInput} from \"../input/input\";\r\nimport {StyleSize} from \"../../use/useStyle\";\r\nimport {PlButtonGroup} from \"../button-group/button-group\";\r\nimport {PlButton} from \"../button/button\";\r\n\r\nfunction getDefaultColor(format: ColorFormat, enableAlpha: boolean) {\r\n    if (format === ColorFormat.hex) {\r\n        return '#12b4a5'\r\n    } else {\r\n        if (enableAlpha) {\r\n            return 'rgba(18,180,165,0.5)'\r\n        } else {\r\n            return 'rgb(18,180,165)'\r\n        }\r\n    }\r\n}\r\n\r\nexport const PlColorPanel = designComponent({\r\n    name: 'pl-color-panel',\r\n    props: {\r\n        modelValue: {type: String},                      // 当前颜色值\r\n        enableAlpha: {type: Boolean},               // 是否启用透明度\r\n        format: {type: String},                     // 格式类型：hex、rgb\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onBblclickSvPanel: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n        })\r\n\r\n        const defaultColor = () => getDefaultColor(props.format as ColorFormat, props.enableAlpha as boolean)\r\n\r\n        const state = reactive({\r\n            val: props.modelValue,\r\n            color: new Color(\r\n                props.modelValue || defaultColor(),\r\n                props.enableAlpha as boolean,\r\n                props.format as ColorFormat\r\n            ),\r\n        })\r\n\r\n        const methods = {\r\n            reset: () => {\r\n                state.val = props.modelValue\r\n                state.color.setValue(props.modelValue || defaultColor())\r\n            },\r\n        }\r\n        const handler = {\r\n            svChange: ({value, saturation}: { value: number, saturation: number }) => {\r\n                state.color.val = value\r\n                state.color.saturation = saturation\r\n                state.color.updateByHsv()\r\n                state.val = state.color.color\r\n            },\r\n            hueChange: (hue: number) => {\r\n                state.color.hue = hue\r\n                state.color.updateByHsv()\r\n                state.val = state.color.color\r\n            },\r\n            alphaChange: (alpha: number) => {\r\n                state.color.alpha = alpha\r\n                state.color.updateByAlpha()\r\n                state.val = state.color.color\r\n            },\r\n            confirm: () => {\r\n                emit.onUpdateModelValue(state.val)\r\n            },\r\n            dblclickSvPanel: (e: MouseEvent) => {\r\n                handler.confirm()\r\n                emit.onBblclickSvPanel(e)\r\n            },\r\n            inputChange: (val: string) => {\r\n                if (!val) {\r\n                    state.color.setValue(val)\r\n                    state.val = state.color.color\r\n                    return\r\n                }\r\n                let formatVal = val.replace(/\\s/g, '')\r\n                if (!isEffectiveColorString(formatVal)) {\r\n                    return;\r\n                } else {\r\n                    state.color.setValue(formatVal)\r\n                    if (val !== formatVal) {\r\n                        refs.input!.model.value = formatVal\r\n                    }\r\n                    state.val = state.color.color\r\n                }\r\n            },\r\n            inputBlur: () => {\r\n                if (!!refs.input!.model.value && refs.input!.model.value !== state.color.color) {\r\n                    $$notice.warn('请输入正确的颜色值！')\r\n                    refs.input!.model.value = state.color.color\r\n                }\r\n            },\r\n            inputEnter: async () => {\r\n                await nextTick()\r\n                if (!!refs.input!.model.value && refs.input!.model.value !== state.color.color) {\r\n                    $$notice('请输入正确的颜色值！')\r\n                    refs.input!.model.value = state.color.color\r\n                } else {\r\n                    handler.confirm()\r\n                }\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------watch-------------------------------------------*/\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            state.color.setValue(val || defaultColor())\r\n            state.val = state.color.color\r\n        })\r\n\r\n        watch(() => props.enableAlpha, (val) => {\r\n            state.color.enableAlpha = val as boolean\r\n            state.color.updateByAlpha()\r\n        })\r\n\r\n        watch(() => props.format, (val) => {\r\n            state.color.format = val as ColorFormat || ColorFormat.hex\r\n            state.color.format === ColorFormat.hex ? state.color.updateByHex() : state.color.updateByRgb()\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-panel\">\r\n                    <div>\r\n                        <PlColorSvPanel height=\"180\"\r\n                                        width=\"240\"\r\n                                        hue={state.color.hue}\r\n                                        modelValue={state.color.val}\r\n                                        saturation={state.color.saturation}\r\n                                        onChange={handler.svChange} onDblclick={handler.dblclickSvPanel}/>\r\n\r\n                        {state.color.enableAlpha && (\r\n                            <PlColorAlphaSlider\r\n                                size=\"180\"\r\n                                color={state.color.hex}\r\n                                modelValue={state.color.alpha}\r\n                                {...{onChange: handler.alphaChange}}\r\n                            />\r\n                        )}\r\n                    </div>\r\n\r\n\r\n                    <PlColorHueSlider size=\"240\"\r\n                                      v-model={state.color.hue}\r\n                                      {...{onChange: handler.hueChange}}/>\r\n                    <div class=\"pl-color-panel-input-group\">\r\n                        <PlInput ref=\"input\"\r\n                                 size={StyleSize.mini}\r\n                                 modelValue={state.val}\r\n                                 width={props.enableAlpha ? 204 : 186}\r\n                                 {...{onChange: handler.inputChange}}\r\n                                 onBlur={handler.inputBlur}\r\n                                 onEnter={handler.inputEnter}/>\r\n                        <PlButtonGroup size={StyleSize.mini}>\r\n                            <PlButton icon=\"el-icon-close-bold\" onClick={methods.reset}/>\r\n                            <PlButton icon=\"el-icon-check-bold\" onClick={handler.confirm}/>\r\n                        </PlButtonGroup>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {markRaw, ref, watch, computed} from 'vue';\r\nimport './icon.scss'\r\nimport {VNodeChild} from \"../../shims\";\r\nimport {refreshPopperReference} from \"../popper/refershPopperReference\";\r\n\r\ninterface IconGetter {\r\n    (icon: string): VNodeChild | Promise<VNodeChild>\r\n}\r\n\r\n/**\r\n * prefix必须为全小写，可以有横杠下划线\r\n * @author  韦胜健\r\n * @date    2020/11/1 12:59\r\n */\r\nconst registry = (() => {\r\n    const icons: { prefix: string, getter: IconGetter }[] = []\r\n    return Object.assign((prefix: string, getter: IconGetter) => {\r\n        icons.unshift({prefix, getter})\r\n    }, {\r\n        icons,\r\n    })\r\n})()\r\n\r\nregistry('el-icon-', async (icon) => {\r\n    try {\r\n        const module = await import('./icons/' + icon + '.json')\r\n        // console.log(module)\r\n        return (\r\n            <svg\r\n                class={`el-svg-icon ${icon}`}\r\n                viewBox=\"0 0 1024 1024\"\r\n                version=\"1.1\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                innerHTML={module.default[0]}\r\n            />\r\n        )\r\n    } catch (e) {\r\n        console.error(e)\r\n        throw e\r\n    }\r\n})\r\n\r\nexport const PlIcon = designComponent({\r\n    name: 'pl-icon',\r\n    props: {\r\n        icon: {type: String},                       // 图标名称\r\n        status: {type: String},                     // 图标状态\r\n    },\r\n    setup({props}) {\r\n\r\n        const {freshPopperReference} = refreshPopperReference.inject()\r\n\r\n        const icon = ref(null as any)\r\n\r\n        const classes = computed(() => [\r\n            'pl-icon',\r\n            {\r\n                [`pl-icon-status-${props.status}`]: !!props.status\r\n            }\r\n        ])\r\n\r\n        const utils = {\r\n            getIconVNode: async (iconName: string) => {\r\n                for (let i = 0; i < registry.icons.length; i++) {\r\n                    const registryIcon = registry.icons[i];\r\n                    if (iconName.indexOf(registryIcon.prefix) === 0) {\r\n                        return await registryIcon.getter(iconName)\r\n                    }\r\n                }\r\n                return null\r\n            },\r\n            reset: async (iconName: string) => {\r\n                const Icon = await utils.getIconVNode(iconName)\r\n                icon.value = !!Icon ? markRaw(Icon) : null\r\n                freshPopperReference()\r\n            }\r\n        }\r\n\r\n        watch(() => props.icon, val => !!val && utils.reset(val), {immediate: true})\r\n\r\n        return {\r\n            render: () => {\r\n                const {value: Icon} = icon\r\n                return !!Icon ? <Icon class={classes.value}/> : <i class=\"PlIcon\"/>\r\n            }\r\n        }\r\n    },\r\n}, {registry})","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleMode, StyleProps, StyleStatus, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {computed, provide, inject} from 'vue';\r\nimport './button-group.scss'\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\n\r\ninterface ButtonModeProviderValue {\r\n    value: { mode: string }\r\n}\r\n\r\nexport const BUTTON_GROUP_PROVIDER = '@@BUTTON_GROUP_PROVIDER'\r\n\r\nexport const ButtonModeProvider = (() => {\r\n    return {\r\n        provide: (data: ButtonModeProviderValue) => {\r\n            provide(BUTTON_GROUP_PROVIDER, data)\r\n        },\r\n        inject: () => {\r\n            return inject(BUTTON_GROUP_PROVIDER, null) as ButtonModeProviderValue | null\r\n        }\r\n    }\r\n})()\r\n\r\nexport const PlButtonGroup = designComponent({\r\n    name: 'pl-button-group',\r\n    props: {\r\n        mode: {type: String, default: StyleMode.fill},                  // fill,stroke,text\r\n        vertical: {type: Boolean},                                      // 是否为纵向按钮组\r\n\r\n        ...EditProps,\r\n        ...StyleProps,\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        const {editComputed} = useEdit()\r\n\r\n        const parentGroup = ButtonModeProvider.inject()\r\n        const otherComputed = computed(() => ({mode: !!parentGroup ? parentGroup.value.mode : props.mode}))\r\n        ButtonModeProvider.provide(otherComputed)\r\n\r\n        const classes = computed(() => ([\r\n            `pl-button-group`,\r\n            `pl-button-group-status-${styleComputed.value.status}`,\r\n            `pl-button-group-mode-${otherComputed.value.mode}`,\r\n            `pl-button-group-shape-${styleComputed.value.shape}`,\r\n            `pl-button-group-size-${styleComputed.value.size}`,\r\n            `pl-button-group-direction-${props.vertical ? 'vertical' : 'horizontal'}`,\r\n            {\r\n                'pl-button-group-disabled': !!editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {ComponentPublicInstance, createApp} from 'vue';\r\nimport Root from '../packages/root'\r\nimport {installPlugin} from \"./installPlugin\";\r\nimport {addClass} from \"plain-utils/dom/addClass\";\r\n\r\nconst getIns = (() => {\r\n    let ins: ComponentPublicInstance | undefined;\r\n    return () => {\r\n        if (!ins) {\r\n            const container = document.createElement('div')\r\n            addClass(container, 'service-without-context')\r\n            document.body.appendChild(container)\r\n            const app = createApp({render() {return <pl-root/>}})\r\n            installPlugin(app, Root)\r\n            ins = app.mount(container)\r\n        }\r\n        return ins\r\n    }\r\n})();\r\n\r\nexport function getServiceWithoutContext<Service>(serviceGetter: (ins: ComponentPublicInstance) => Service) {\r\n    return serviceGetter(getIns())\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAWElEQVRIiWM8fubkfwYygKWJOSM5+mCAhRLNoxaPWjxq8ajFoxbTyeL/DAfJ0Xjs3Cl7Siwmu4Yht1aDgZEYx6MWj1o8avGoxaMWD3qLya5X//4nqx6HAQC7RBGFzolqTAAAAABJRU5ErkJggg==\"","import {getCurrentInstance} from 'vue';\r\n\r\nexport function useRefs<T extends { [k: string]: any }>(config: T): {\r\n    refs: {\r\n        [k in keyof T]: T[k] extends { use: { ref: (refName: string) => { value: infer Refer } } } ? Refer :\r\n            T[k] extends new (...args: any[]) => infer Refer ? Refer : T\r\n    }\r\n} {\r\n    const ctx = getCurrentInstance() as any\r\n    return {\r\n        refs: Object.keys(config).reduce((prev, refName) => {\r\n            Object.defineProperty(prev, refName, {\r\n                get(): any {\r\n                    return ctx.refs[refName]\r\n                }\r\n            })\r\n            return prev\r\n        }, {} as any)\r\n    }\r\n}\r\n","import {PlList} from './list'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlList)","import {getCurrentInstance, ComponentInternalInstance} from 'vue'\r\n\r\nexport function useFunctionWrapper<P extends any[],\r\n    T extends (ctx: ComponentInternalInstance, ...args: P) => any>(\r\n    key: string,\r\n    func: T,\r\n): (...args: P) => ReturnType<T> {\r\n    return (...args) => {\r\n        const ctx = getCurrentInstance() as any\r\n        if (!ctx._use) ctx._use = {}\r\n\r\n        if (!!ctx._use[key]) {\r\n            throw new Error(`use ${key} can only be executed once!`)\r\n        }\r\n\r\n        return (ctx._use[key] = func(ctx, ...args))\r\n    }\r\n}\r\n\r\n/*const func = useFunctionWrapper('', (ctx, name: string, age: number) => {\r\n    return {\r\n        sayHello: () => {},\r\n    }\r\n})\r\n\r\nconst data = func('111', 111)\r\ndata.sayHello()*/\r\n\r\n","import {ComponentInternalInstance} from \"vue\"\r\n\r\nexport function getSlotExist(prevState: { [k: string]: boolean } | null, slotNames: string[], ctx: ComponentInternalInstance) {\r\n    if (!prevState) {\r\n        prevState = {}\r\n    }\r\n    slotNames.forEach((slotName) => {\r\n        prevState![slotName] = !!ctx.slots[slotName]\r\n    })\r\n    return prevState\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {nextTick, ref} from 'vue';\r\nimport {useRefList} from \"../../use/useRefList\";\r\n\r\n/**\r\n * 创建一个默认的 root service manager组件\r\n * @author  韦胜健\r\n * @date    2020/11/26 9:20\r\n */\r\nexport function createDefaultManager<Option>(\r\n    managerName: string,\r\n    serviceComponent: {\r\n        use: {\r\n            class: {\r\n                isShow: { value: boolean },\r\n                isOpen: { value: boolean },\r\n                service: (option: Option) => any,\r\n            }\r\n        }\r\n    },\r\n    isItemAvailable?: (refs: typeof serviceComponent.use.class[], opt: Option) => null | typeof serviceComponent.use.class,\r\n) {\r\n    return designComponent({\r\n        name: managerName,\r\n        setup() {\r\n\r\n            const options = ref([] as Option[])\r\n            const refs = useRefList<typeof serviceComponent[\"use\"][\"class\"]>()\r\n\r\n            /**\r\n             * 获取一个 非show以及open的 service提供服务，如果存在\r\n             * 符合这个条件的service，直接调用service函数，否则创建\r\n             * 一个service，这个service在setup末尾需要调用一次service\r\n             * 函数；\r\n             * @author  韦胜健\r\n             * @date    2020/11/26 9:23\r\n             */\r\n            const service = async (option: Option): Promise<void> => {\r\n                if (isItemAvailable) {\r\n                    const item = isItemAvailable(refs, option)\r\n                    if (!!item) {\r\n                        return item.service(option)\r\n                    }\r\n                } else {\r\n                    for (let i = 0; i < refs.length; i++) {\r\n                        const item = refs[i];\r\n                        const {isShow, isOpen} = item\r\n                        if (!isShow.value && !isOpen.value) {\r\n                            return item.service(option)\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // 没有合适的item，创建新的item提供服务\r\n                options.value.push(option as any)\r\n                await nextTick()\r\n            }\r\n\r\n            return {\r\n                refer: {\r\n                    managerName,\r\n                    service,\r\n                },\r\n                render: () => {\r\n                    const ServiceComponent = serviceComponent as any\r\n                    return (\r\n                        <div class={managerName}>\r\n                            {options.value.map((opt, i) => <ServiceComponent\r\n                                key={i}\r\n                                option={opt}\r\n                                ref={(proxy: any) => refs[i] = proxy}\r\n                            />)}\r\n                        </div>\r\n                    )\r\n                }\r\n            }\r\n        },\r\n    })\r\n}","import {SimpleFunction} from \"../shims\";\r\n\r\ntype Listener = (SimpleFunction & { fn?: any })\r\ntype ListenName = string | symbol\r\nexport type PlainEvent = ReturnType<typeof createPlainEvent>\r\n\r\nexport function createPlainEvent() {\r\n\r\n    /**\r\n     * 第一次调用getEvents的时候才创建map对象\r\n     * @author  韦胜健\r\n     * @date    2020/10/17 11:27\r\n     */\r\n    const getListenMap = (() => {\r\n        let events: Map<ListenName, Listener[]>;\r\n        return () => {\r\n            if (!events) {\r\n                events = new Map<ListenName, Listener[]>()\r\n            }\r\n            return events\r\n        }\r\n    })()\r\n\r\n    let hasListener = false\r\n\r\n    const event = {\r\n        on: (listenName: ListenName, fn: SimpleFunction) => {\r\n\r\n            hasListener = true\r\n\r\n            const listenMap = getListenMap()\r\n            const map = listenMap.get(listenName)\r\n            if (!!map) {\r\n                map.push(fn)\r\n            } else {\r\n                listenMap.set(listenName, [fn])\r\n            }\r\n            return () => event.off(listenName, fn)\r\n        },\r\n        once: (listenName: ListenName, fn: SimpleFunction) => {\r\n\r\n            hasListener = true\r\n\r\n            const on: Listener = (...args: any[]) => {\r\n                event.off(listenName, fn)\r\n                fn(...args)\r\n            }\r\n            on.fn = fn\r\n            event.on(listenName, on)\r\n            return () => event.off(listenName, on)\r\n        },\r\n        off: (listenName: ListenName, fn?: SimpleFunction) => {\r\n            const listenMap = getListenMap()\r\n\r\n            const listeners = listenMap.get(listenName)\r\n            if (!listeners) {\r\n                return;\r\n            }\r\n\r\n            /*移除listenName的所有监听器*/\r\n            if (!fn) {\r\n                listenMap.set(listenName, [])\r\n                return\r\n            }\r\n\r\n            for (let i = 0; i < listeners.length; i++) {\r\n                const listener = listeners[i];\r\n                if (fn === listener || (!!listener.fn && fn === listener.fn)) {\r\n                    listeners.splice(i, 1)\r\n                    break\r\n                }\r\n            }\r\n        },\r\n        emit: (listenName: ListenName, ...args: any[]) => {\r\n            const listeners = getListenMap().get(listenName)\r\n            if (!!listeners) {\r\n                listeners.forEach(listener => listener(...args))\r\n            }\r\n        },\r\n        clear: () => {\r\n            if (hasListener) {\r\n                getListenMap().clear()\r\n            }\r\n        }\r\n    }\r\n\r\n    return event\r\n}","import {getCurrentInstance, onBeforeUnmount} from 'vue'\r\nimport {createPlainEvent, PlainEvent} from \"../plugins/Event\";\r\nimport {SimpleFunction} from \"../shims\";\r\nimport {kebabCase} from 'plain-utils/string/kebabCase'\r\n\r\ntype EventListener<EmitsValue> = EmitsValue extends (...args: any[]) => any ? Parameters<EmitsValue> : never\r\n\r\nexport type ComponentEvent<Emit> = {\r\n    emit: { [key in keyof Emit]: (...args: EventListener<Emit[key]>) => void },\r\n    on: { [key in keyof Emit]: (cb: (...args: EventListener<Emit[key]>) => void) => void },\r\n    once: { [key in keyof Emit]: (cb: (...args: EventListener<Emit[key]>) => void) => void },\r\n    off: { [key in keyof Emit]: (cb: (...args: EventListener<Emit[key]>) => void) => void },\r\n}\r\n\r\nexport function getComponentEmit<T>(emitObject: T): T {\r\n    return Object.keys(emitObject || {}).reduce((prev, key) => {\r\n        const emitter = (emitObject as any)[key];\r\n        const match = key.match(/onUpdate([A-Z])(.*)/)\r\n        const kebabCaseName = kebabCase(key).replace('on-', '')\r\n        if (!!match) {\r\n            const updateName = `update:${match[1].toLowerCase()}${match[2]}`\r\n            prev[updateName] = emitter\r\n            if (key === 'onUpdateModelValue') {\r\n                prev['change'] = emitter\r\n            }\r\n        }\r\n        prev[kebabCaseName] = emitter\r\n        return prev\r\n    }, {} as any)\r\n}\r\n\r\nexport function useEvent<T>(emitObject: T): ComponentEvent<T> {\r\n\r\n    const ctx = getCurrentInstance()!\r\n    const event = createPlainEvent()\r\n\r\n    const emit = {} as any;\r\n    const on = {} as any;\r\n    const once = {} as any;\r\n    const off = {} as any;\r\n\r\n    const keys = Object.keys(emitObject || {})\r\n    if (!!emitObject && !!(emitObject as any).onUpdateModelValue) {keys.push('onChange')}\r\n\r\n    keys.forEach(key => {\r\n        /*派发事件名称，横杠命名*/\r\n        const match = key.match(/onUpdate([A-Z])(.*)/)\r\n        const kebabCaseName = kebabCase(key).replace('on-', '')\r\n        if (!!match) {\r\n            const updateName = `update:${match[1].toLowerCase()}${match[2]}`\r\n            emit[key] = (...args: any[]) => {\r\n                ctx.emit(kebabCaseName, ...args)\r\n                event.emit(kebabCaseName, ...args)\r\n                ctx.emit(updateName, ...args)\r\n                event.emit(updateName, ...args)\r\n                if (key === 'onUpdateModelValue') {\r\n                    ctx.emit('change', ...args)\r\n                    event.emit('change', ...args)\r\n                }\r\n            }\r\n        } else {\r\n            emit[key] = (...args: any[]) => {\r\n                ctx.emit(kebabCaseName, ...args)\r\n                event.emit(kebabCaseName, ...args)\r\n            }\r\n        }\r\n        on[key] = (fn: SimpleFunction) => event.on(kebabCaseName, fn)\r\n        once[key] = (fn: SimpleFunction) => event.once(kebabCaseName, fn)\r\n        off[key] = (fn: SimpleFunction) => event.off(kebabCaseName, fn)\r\n    })\r\n\r\n    onBeforeUnmount(event.clear)\r\n\r\n    return {\r\n        emit, on, once, off,\r\n    }\r\n}","export const renderNothing = () => null","import {Component, ComponentInternalInstance, ComponentOptionsMixin, ComponentPropsOptions, ComputedOptions, defineComponent, DefineComponent, Directive, EmitsOptions, ExtractPropTypes, getCurrentInstance, inject, MethodOptions, PropType, provide, Ref, ref, SetupContext,} from 'vue'\r\nimport {ComponentEvent, getComponentEmit, useEvent} from \"./useEvent\";\r\nimport {createError} from \"../utils/createError\";\r\nimport {renderNothing} from \"../utils/renderNothing\";\r\n\r\nconst error = createError('designComponent')\r\n\r\ninterface RefValue<T> {\r\n    (): Ref<null | T>\r\n\r\n    (refName?: string): Readonly<{ value: null | T }>\r\n}\r\n\r\ninterface InjectValue<Refer> {\r\n    (): Refer,\r\n\r\n    <DefaultValue>(defaultValue?: DefaultValue): Refer | DefaultValue\r\n}\r\n\r\ninterface UseType<Refer, Props> {\r\n    ref: RefValue<Refer>,\r\n    inject: InjectValue<Refer>\r\n    class: Refer,\r\n    props: Props,\r\n}\r\n\r\ntype EmitToProp<E extends Record<string, any>> = {\r\n    [k in keyof E]: { type: PropType<E[k] extends ((...args: any[]) => any) ? (...args: Parameters<E[k]>) => void : E[k]>, }\r\n}\r\n\r\nexport function designComponent<RawBindings,\r\n    D,\r\n    Refer,\r\n    Expose extends object,\r\n    Props extends Readonly<ExtractPropTypes<PropsOptions>>,\r\n    PropsOptions extends Readonly<ComponentPropsOptions> = {},\r\n    C extends ComputedOptions = {},\r\n    M extends MethodOptions = {},\r\n    Mixin extends ComponentOptionsMixin = ComponentOptionsMixin,\r\n    Extends extends ComponentOptionsMixin = ComponentOptionsMixin,\r\n    E extends EmitsOptions = {},\r\n    EE extends string = string,\r\n    >(\r\n    options: {\r\n        provideRefer?: boolean,\r\n        emits?: E,\r\n        setup?: (parameter: { props: Props, event: ComponentEvent<E>, setupContext: SetupContext<E>, ctx: ComponentInternalInstance }) => {\r\n            refer?: Refer\r\n            render: () => any,\r\n        },\r\n\r\n        name?: string,\r\n        props?: PropsOptions,\r\n        mixins?: any[],\r\n        components?: Record<string, Component>;\r\n        directives?: Record<string, Directive>;\r\n    },\r\n    expose?: Expose,\r\n): DefineComponent<PropsOptions & EmitToProp<E>, RawBindings, D, C, M, Mixin, Extends, E, EE> & {\r\n    use: UseType<Refer, Props>\r\n} & Expose {\r\n\r\n    const {provideRefer, emits, setup, ...leftOptions} = options\r\n\r\n    const use: UseType<Refer, Props> = {\r\n        inject: (defaultValue?: any) => {\r\n            return inject(`@@${options.name}`, defaultValue) as Refer\r\n        },\r\n        class: Object as any as Refer,\r\n        ref: (refName?: string) => {\r\n            if (!!refName) {\r\n                const ctx = getCurrentInstance()!\r\n                return {\r\n                    get value() {\r\n                        return ctx.refs[refName!]\r\n                    }\r\n                } as any\r\n            } else {\r\n                return ref(null)\r\n            }\r\n        },\r\n        props: Object as any as Props,\r\n    }\r\n\r\n    /*if (leftOptions.name === 'pl-popper') {\r\n        console.log(leftOptions.name, getComponentEmit(emits), emits)\r\n    }*/\r\n\r\n    return Object.assign(\r\n        defineComponent({\r\n            ...(leftOptions as any || {}),\r\n            props: leftOptions.props as PropsOptions,\r\n            emits: getComponentEmit(emits),\r\n            setup(props: any, setupContext: any) {\r\n                if (!setup) {\r\n                    error('setup is necessary!')\r\n                    return renderNothing\r\n                }\r\n                const ctx = getCurrentInstance()!\r\n                const event = useEvent<E>(emits!);\r\n                (ctx as any)._event = event;\r\n\r\n                const {refer, render} = setup({\r\n                    ctx,\r\n                    props,\r\n                    event,\r\n                    setupContext,\r\n                })\r\n\r\n                if (!!refer) {\r\n                    const duplicateKey = Object.keys(refer || {}).find(i => i in ctx.proxy!)\r\n                    if (!!duplicateKey) {\r\n                        console.error(`designComponent:${leftOptions.name} key '${duplicateKey}' in refer is not allow here!`)\r\n                    } else {\r\n                        Object.assign(ctx.proxy, refer)\r\n                    }\r\n                }\r\n\r\n                if (provideRefer) {\r\n                    if (!options.name) {\r\n                        error('component name is necessary when provideRefer is true!')\r\n                    } else {\r\n                        provide(`@@${options.name}`, refer)\r\n                    }\r\n                }\r\n                return render\r\n            },\r\n        }),\r\n        {use, ...(expose || {})}\r\n    ) as any\r\n}","import {PlItem} from './item'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlItem)","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {ComponentPublicInstance, getCurrentInstance, markRaw, nextTick, reactive, Teleport} from 'vue';\r\nimport {RootController} from \"./registryRootService\";\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport './root.scss'\r\n\r\nexport const PlRoot =  designComponent({\r\n    name: 'pl-root',\r\n    props: {\r\n        ...StyleProps,\r\n    },\r\n    setup() {\r\n\r\n        /*全局样式定义*/\r\n        useStyle()\r\n        /*默认插槽*/\r\n        const {slots} = useSlots()\r\n        /*controller代理对象引用*/\r\n        let refs = useRefList<ComponentPublicInstance>()\r\n        /*当前状态*/\r\n        const state = reactive({\r\n            managers: [] as {\r\n                name: string,\r\n                Component: { use: { class: any } },\r\n                RenderComponent: any,\r\n            }[],\r\n        })\r\n\r\n        /**\r\n         * 获取一个Controller实例\r\n         * @author  韦胜健\r\n         * @date    2020/11/5 10:19\r\n         */\r\n        async function getManagerInstance<ManagerComponent extends { use: { class: any } }>(\r\n            name: string,\r\n            managerComponent: ManagerComponent\r\n        ): Promise<ManagerComponent[\"use\"][\"class\"]> {\r\n            if (!!refs) {\r\n                for (let i = 0; i < refs.length; i++) {\r\n                    const managerInstance = refs[i];\r\n                    if (!!managerInstance) {\r\n                        const {name: attrName, Component: attrComponent} = managerInstance.$attrs\r\n                        if (name === attrName && managerComponent === attrComponent) {\r\n                            return managerInstance as any\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            /*当前引用中没有该实例，手动创建一个*/\r\n            state.managers.push({\r\n                name,\r\n                Component: managerComponent,\r\n                RenderComponent: markRaw(managerComponent),\r\n            })\r\n            await nextTick()\r\n            return getManagerInstance(name, managerComponent)\r\n        }\r\n\r\n        const ctx = getCurrentInstance()!\r\n        const refer = {\r\n            rootRef: () => ctx.proxy!.$root!,\r\n            getManagerInstance,\r\n        }\r\n        RootController.initRoot(refer)\r\n\r\n        return {\r\n            refer,\r\n            render: () => [\r\n                slots.default(),\r\n                <Teleport to=\"body\">\r\n                    <div class=\"pl-root-service-container\">\r\n                        {state.managers.map(({name, Component, RenderComponent}, index) => (\r\n                            <RenderComponent key={index} {...{name, Component}} ref={proxy => refs[index] = proxy as any}/>\r\n                        ))}\r\n                    </div>\r\n                </Teleport>\r\n            ]\r\n        }\r\n    },\r\n})","import {PlRoot} from './root'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlRoot)","import {StyleStatus} from \"../use/useStyle\";\r\n\r\nexport enum CheckboxStatus {\r\n    uncheck = 'uncheck',\r\n    check = 'check',\r\n    minus = 'minus',\r\n}\r\n\r\nexport const DEFAULT_STATUS = StyleStatus.primary\r\n\r\nexport const STATUS = {\r\n    white: {icon: 'el-icon-info', status: 'white'},\r\n    black: {icon: 'el-icon-info', status: 'black'},\r\n    primary: {icon: 'el-icon-info', status: 'primary'},\r\n    success: {icon: 'el-icon-success', status: 'success'},\r\n    warn: {icon: 'el-icon-warning', status: 'warn'},\r\n    error: {icon: 'el-icon-error', status: 'error'},\r\n    info: {icon: 'el-icon-info', status: 'info'},\r\n} as { [k: string]: { icon: string, status: string } }","import {getCurrentInstance, onBeforeUpdate, reactive} from 'vue'\r\nimport {VNodeChild} from \"../shims\";\r\nimport {getSlotExist} from \"../utils/getSlotExists\";\r\n\r\ntype SlotFunction = ((vnode?: VNodeChild) => VNodeChild)\r\ntype SlotObject = { isExist: () => boolean }\r\n\r\ninterface UseSlots {\r\n    <T extends string>(names?: T[]): {\r\n        slots: { default: SlotFunction } & { [k in T]: SlotFunction }\r\n    }\r\n\r\n    <T extends string>(names?: T[], makeReactive?: boolean): {\r\n        slots: { default: SlotFunction & SlotObject } & { [k in T]: SlotFunction & SlotObject }\r\n    }\r\n}\r\n\r\n/**\r\n * 规范插槽用法\r\n * @author  韦胜健\r\n * @date    2020/11/18 17:48\r\n * @param   names                   插槽名称\r\n * @param   makeReactive            是否需要 isExist具备响应式的能力，以便在computed、watch以及render中判断\r\n */\r\nexport const useSlots: UseSlots = (names?: string[], makeReactive?: boolean) => {\r\n\r\n    const ctx = getCurrentInstance()!\r\n    const slotNames = [...(names || []), 'default']\r\n\r\n    /**\r\n     * 因为ctx.slots,ctx.ctx.$slots都不是响应式属性，无法触发computed以及watch中的变化，这里做一个手动更新处理\r\n     * 每次beforeUpdate打补丁之前，先更新ctxSlots响应式变量，render函数只会触发一次；\r\n     * @author  韦胜健\r\n     * @date    2020/10/19 11:36\r\n     */\r\n    const state = reactive({exist: getSlotExist(null, slotNames, ctx)})\r\n\r\n    /*如果需要响应式，则需要设置 makeReactive，会自动在updated之后更新slots的isExist值*/\r\n    if (makeReactive) {\r\n        onBeforeUpdate(() => {\r\n            getSlotExist(state.exist, slotNames, ctx)\r\n        })\r\n    }\r\n\r\n    /*slots.***是一个函数，参数是插槽后备内容。当插槽不存在时，渲染后备内容，否则渲染插槽内容*/\r\n    let slots = slotNames.reduce((prev: any, slotName: string) => {\r\n        prev[slotName] = Object.assign((vnode: VNodeChild) => {\r\n            const slot = ctx.slots[slotName]\r\n            return !!slot ? slot() : vnode\r\n        }, {\r\n            isExist() {\r\n                return state.exist[slotName]\r\n            }\r\n        })\r\n        return prev\r\n    }, {} as any)\r\n\r\n    return {\r\n        slots,\r\n    }\r\n}","import {App} from 'vue'\r\n\r\nexport enum KEY {\r\n    'shift' = 'shift',\r\n    'ctrl' = 'ctrl',\r\n    'alt' = 'alt',\r\n    'backspace' = 'backspace',\r\n    'tab' = 'tab',\r\n    'enter' = 'enter',\r\n    'esc' = 'esc',\r\n    'space' = 'space',\r\n    'del' = 'del',\r\n    'left' = 'left',\r\n    'up' = 'up',\r\n    'right' = 'right',\r\n    'down' = 'down',\r\n    'minus' = 'minus',\r\n    'equal' = 'equal',\r\n    'num_0' = 'num_0',\r\n    'num_1' = 'num_1',\r\n    'num_2' = 'num_2',\r\n    'num_3' = 'num_3',\r\n    'num_4' = 'num_4',\r\n    'num_5' = 'num_5',\r\n    'num_6' = 'num_6',\r\n    'num_7' = 'num_7',\r\n    'num_8' = 'num_8',\r\n    'num_9' = 'num_9',\r\n    'a' = 'a',\r\n    'b' = 'b',\r\n    'c' = 'c',\r\n    'd' = 'd',\r\n    'e' = 'e',\r\n    'f' = 'f',\r\n    'g' = 'g',\r\n    'h' = 'h',\r\n    'i' = 'i',\r\n    'j' = 'j',\r\n    'k' = 'k',\r\n    'l' = 'l',\r\n    'm' = 'm',\r\n    'n' = 'n',\r\n    'o' = 'o',\r\n    'p' = 'p',\r\n    'q' = 'q',\r\n    'r' = 'r',\r\n    's' = 's',\r\n    't' = 't',\r\n    'u' = 'u',\r\n    'v' = 'v',\r\n    'w' = 'w',\r\n    'x' = 'x',\r\n    'y' = 'y',\r\n    'z' = 'z',\r\n    'F1' = 'F1',\r\n    'F2' = 'F2',\r\n    'F3' = 'F3',\r\n    'F4' = 'F4',\r\n    'F5' = 'F5',\r\n    'F6' = 'F6',\r\n    'F7' = 'F7',\r\n    'F8' = 'F8',\r\n    'F9' = 'F9',\r\n    'F10' = 'F10',\r\n    'F11' = 'F11',\r\n    'F12' = 'F12',\r\n}\r\n\r\nexport const KeyBoardMap = {\r\n    16: 'shift',\r\n    17: 'ctrl',\r\n    18: 'alt',\r\n\r\n    8: 'backspace',\r\n    9: 'tab',\r\n    13: 'enter',\r\n    27: 'esc',\r\n    32: 'space',\r\n    46: 'del',\r\n\r\n    37: 'left',\r\n    38: 'up',\r\n    39: 'right',\r\n    40: 'down',\r\n\r\n    189: 'minus',\r\n    187: 'equal',\r\n\r\n    48: 'num_0',\r\n    49: 'num_1',\r\n    50: 'num_2',\r\n    51: 'num_3',\r\n    52: 'num_4',\r\n    53: 'num_5',\r\n    54: 'num_6',\r\n    55: 'num_7',\r\n    56: 'num_8',\r\n    57: 'num_9',\r\n\r\n    65: 'a',\r\n    66: 'b',\r\n    67: 'c',\r\n    68: 'd',\r\n    69: 'e',\r\n    70: 'f',\r\n    71: 'g',\r\n    72: 'h',\r\n    73: 'i',\r\n    74: 'j',\r\n    75: 'k',\r\n\r\n    76: 'l',\r\n    77: 'm',\r\n    78: 'n',\r\n    79: 'o',\r\n    80: 'p',\r\n    81: 'q',\r\n    82: 'r',\r\n    83: 's',\r\n    84: 't',\r\n    85: 'u',\r\n    86: 'v',\r\n    87: 'w',\r\n    88: 'x',\r\n    89: 'y',\r\n    90: 'z',\r\n\r\n    112: 'F1',\r\n    113: 'F2',\r\n    114: 'F3',\r\n    115: 'F4',\r\n    116: 'F5',\r\n    117: 'F6',\r\n    118: 'F7',\r\n    119: 'F8',\r\n    120: 'F9',\r\n    121: 'F10',\r\n    122: 'F11',\r\n    123: 'F12',\r\n}\r\n\r\nexport function getKey(e: KeyboardEvent): KEY | null {\r\n    // @ts-ignore\r\n    let key = KeyBoardMap[e.keyCode] as KEY\r\n    if (!!KEY[key]) {\r\n        return KEY[key]\r\n    } else {\r\n        /*if (e.keyCode !== 229) {\r\n            console.warn(`Can't recognise key`, e)\r\n        }*/\r\n        return null\r\n    }\r\n}\r\n\r\nexport class KeyboardServiceOption {\r\n    [key: string]: (e?: KeyboardEvent) => (void | undefined | boolean)\r\n}\r\n\r\nexport const KeyboardService = {\r\n    options: [] as KeyboardServiceOption[],\r\n    /*订阅点击事件*/\r\n    listen(option: KeyboardServiceOption) {\r\n        if (!option) return\r\n        this.options.push(option)\r\n    },\r\n    /*取消订阅事件*/\r\n    unbindListener(option: KeyboardServiceOption) {\r\n        let index = this.options.indexOf(option)\r\n        if (index > -1) {\r\n            this.options.splice(index, 1)\r\n        }\r\n    },\r\n    /*取消当前激活的元素*/\r\n    cancelActiveElement() {\r\n        const activeElement = document.activeElement as HTMLElement\r\n        if (!!activeElement) activeElement.blur()\r\n        return activeElement\r\n    },\r\n    /*处理window的点击事件*/\r\n    _onkeydown(e: KeyboardEvent) {\r\n        if (e.currentTarget !== e.target) return\r\n        const names = [] as string[];\r\n        (e.metaKey || e.ctrlKey) && names.push('ctrl')\r\n        e.shiftKey && names.push('shift')\r\n        e.altKey && names.push('alt')\r\n        // @ts-ignore\r\n        names.push(KeyBoardMap[e.keyCode])\r\n        const compositionKeyName = names.join('+')\r\n\r\n        const option = this.options[this.options.length - 1]\r\n        if (!!option && !!option[compositionKeyName]) {\r\n            const flag = option[compositionKeyName](e)\r\n            /*默认阻止事件冒泡*/\r\n            if (flag !== false) {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n            }\r\n        }\r\n    },\r\n}\r\n\r\nexport function handleKeyboard(option: { [key in KEY]?: (e: KeyboardEvent) => any }) {\r\n    return (e: KeyboardEvent) => {\r\n        const key = getKey(e)\r\n        if (!!key && !!option[key]) {\r\n            return option[key]!(e)\r\n        }\r\n    }\r\n}\r\n\r\ndocument.body.addEventListener('keydown', e => KeyboardService._onkeydown(e))\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.config.globalProperties.$keyboard = KeyboardService\r\n    },\r\n}","import {App} from 'vue'\r\nimport {ComponentPlugin} from \"../shims\";\r\nimport {installPlugin} from \"./installPlugin\";\r\nimport Root from '../packages/root'\r\n\r\ninterface InstallComponent {\r\n    name: string\r\n}\r\n\r\nexport function createComponentPlugin<Component extends InstallComponent,\r\n    Expose extends Record<string, any>,\r\n    ExposeComponents extends { [k: string]: InstallComponent },\r\n    >(\r\n    component: Component,                               // 导出的主组件\r\n    option?: {\r\n        exposeComponents?: ExposeComponents,            // 额外需要安装的组件（一并导出挂载的component组件上）\r\n        plugins?: ComponentPlugin[],                    // 依赖的其他插件\r\n        expose?: Expose                                 // 需要导出的额外内容\r\n    },\r\n) {\r\n    const {exposeComponents, plugins, expose} = option || {}\r\n    const wrapExposeComponents: { [k in keyof ExposeComponents]: ExposeComponents[k] & ComponentPlugin } = !exposeComponents ?\r\n        {} :\r\n        Object.keys(exposeComponents || {})\r\n            .reduce((prev, next) => {\r\n                prev[next] = createComponentPlugin(exposeComponents[next])\r\n                return prev\r\n            }, {} as any)\r\n\r\n    return Object.assign(component, {\r\n        install(app: App) {\r\n            installPlugin(app, Root)\r\n            const componentList = [component] as InstallComponent[]\r\n            if (!!exposeComponents) {componentList.push(...Object.values(exposeComponents))}\r\n            componentList.forEach(comp => app.component(comp.name, comp))\r\n            !!plugins && (installPlugin(app, plugins))\r\n        },\r\n        ...wrapExposeComponents,\r\n        ...expose,\r\n    })\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {VNodeChild} from \"../../shims\";\r\n\r\n/**\r\n * 创建一个默认的root service组件\r\n * 这个组件最后返回的refer，必须含有isShow、isOpen、service三个属性。\r\n * isShow：当前是否已经显示，因为存在过渡动画，所以如果值为true，但是此时在页面可能没有完全显示。值为false，可能在页面上没有完全隐藏；\r\n * isOpen：当前是否已经在页面上完全打开或者消失。值为true，表示当前已经完全显示，但是此时isShow可能为false。因为隐藏过渡动画没有结束的时候就是这种情况、同理isOpen为true的时候也是这样。\r\n * 只有当isShow以及isOpen都是false的情况下，这个service才是处于闲置可以服用的状态。\r\n *\r\n * @author  韦胜健\r\n * @date    2020/11/26 9:24\r\n */\r\nexport function createDefaultService<Option extends object, Refer extends {\r\n    isShow: { value: boolean },\r\n    isOpen: { value: boolean },\r\n    service: (optoin: Option) => void\r\n}>\r\n(\r\n    {\r\n        name,\r\n        setup,\r\n        components,\r\n    }: {\r\n        name: string,\r\n        setup: (option: Option) => {\r\n            refer: Refer,\r\n            render: () => VNodeChild,\r\n        },\r\n        components?: any,\r\n    }\r\n) {\r\n    return designComponent({\r\n        name: `pl-${name}-service`,\r\n        components,\r\n        props: {\r\n            option: {type: Object, required: true}\r\n        },\r\n        setup({props}) {\r\n            const option = props.option as Option\r\n            const {render, refer} = setup(option)\r\n            refer.service(option)\r\n            return {\r\n                render, refer\r\n            }\r\n        },\r\n    })\r\n}","import {CascadeConfig, CascadeMark} from \"./CascadMark\";\r\nimport {reactive} from 'vue';\r\n\r\nexport class CascadeNode {\r\n\r\n    state: {\r\n        data: Record<string, any>\r\n    }\r\n\r\n    constructor(\r\n        public key: string,\r\n        data: Record<string, any>,\r\n        public level: number,\r\n        public config: () => CascadeConfig,\r\n        public parentRef: () => (CascadeNode | null),\r\n        public markRef: () => CascadeMark,\r\n        public ctxState: () => {\r\n            expandKeys: string[],\r\n            filterText: string | undefined,\r\n        }\r\n    ) {\r\n        this.state = reactive({\r\n            data\r\n        })\r\n    }\r\n\r\n    selfGetter = () => this;\r\n\r\n    /*---------------------------------------prop-------------------------------------------*/\r\n\r\n    get data() {return this.state.data}\r\n\r\n    set data(val) {this.state.data = val}\r\n\r\n    /*节点显示文本*/\r\n    get label(): string {return this.data[this.config().labelField]}\r\n\r\n    /*节点子数据*/\r\n    get childrenData(): object[] | undefined {\r\n        const data = this.data[this.config().childrenField]\r\n        return typeof data === \"function\" ? data() : data\r\n    }\r\n\r\n    /*子节点*/\r\n    get children(): CascadeNode[] | undefined {\r\n        if (!this.childrenData) return undefined\r\n        return this.childrenData.map(child => this.markRef().node.get(\r\n            child,\r\n            this.level + 1,\r\n            this.selfGetter,\r\n        ))\r\n    }\r\n\r\n    /*是否为叶子节点（无子节点）*/\r\n    get isLeaf(): boolean {\r\n        const {isLeaf} = this.config()\r\n        if (!!isLeaf) {\r\n            return isLeaf(this)\r\n        } else {\r\n            return !this.children || this.children.length === 0\r\n        }\r\n    }\r\n\r\n    /*当前节点展开时包含的keys*/\r\n    get expandKeys(): string[] {\r\n        let expandKeys = [this.key]\r\n        let parent = this.parentRef()\r\n        while (!!parent && !!parent.key) {\r\n            expandKeys.unshift(parent.key)\r\n            parent = parent.parentRef()\r\n        }\r\n        return expandKeys\r\n    }\r\n\r\n    /*当前节点是否已经展开*/\r\n    get isExpand() {\r\n        let expandKeys = this.ctxState().expandKeys\r\n        let selfExpandKeys = this.expandKeys\r\n        return expandKeys.toString() === selfExpandKeys.toString()\r\n    }\r\n\r\n    /*当前是否处于加载状态*/\r\n    get isLoading(): boolean {\r\n        return this.markRef().loading.get(this.key)\r\n    }\r\n\r\n    get isLoaded(): boolean {\r\n        return this.markRef().loaded.get(this.key)\r\n    }\r\n\r\n    /*当前节点是否禁用*/\r\n    get nodeDisabled(): boolean {\r\n        const nodeDisabled = this.config().nodeDisabled\r\n        return !!nodeDisabled && nodeDisabled(this)\r\n    }\r\n\r\n    /*当有过滤文本时，显示的文本*/\r\n    get filterData(): CascadeNode[] {\r\n        let filterData: CascadeNode[] = [this]\r\n        let parent = this.parentRef()\r\n        while (!!parent && !!parent.key) {\r\n            filterData.unshift(parent)\r\n            parent = parent.parentRef()\r\n        }\r\n        return filterData\r\n    }\r\n\r\n    /*是否通过筛选，当子节点通过筛选时，当前节点也算通过筛选*/\r\n    get isPassFilter(): boolean {\r\n        const {filterText} = this.ctxState()\r\n        if (!filterText) return false\r\n\r\n        const {filterMethod} = this.config()\r\n        let filterData = this.filterData\r\n        if (!!filterMethod) {\r\n            return filterMethod(filterData, filterText)\r\n        }\r\n        return filterData.some(item => item.label.indexOf(filterText!) > -1)\r\n    }\r\n\r\n    /*---------------------------------------action-------------------------------------------*/\r\n\r\n    /*设置子节点数据*/\r\n    setChildren(children: object[]) {\r\n        // set(this.data, this.config().childrenField, children)\r\n        this.data[this.config().childrenField] = children\r\n    }\r\n\r\n    loading(val: boolean) {\r\n        this.markRef().loading.set(this.key, val)\r\n    }\r\n\r\n    loaded(val: boolean) {\r\n        this.markRef().loaded.set(this.key, val)\r\n    }\r\n}","export function createCounter(prefixString?: string) {\r\n    let count = 0\r\n    return () => (!!prefixString ? `${prefixString}_` : '') + count++\r\n}","import {designComponent} from \"../../../use/designComponent\";\r\nimport {CascadeNode} from \"../utils/CascadeNode\";\r\nimport {VNodeChild} from \"../../../shims\";\r\nimport {useScopedSlots} from \"../../../use/useScopedSlots\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {CascadeMark} from \"../utils/CascadMark\";\r\nimport {computed, PropType, reactive, ref} from 'vue';\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\nimport './cascade-panel.scss'\r\nimport {PlItem} from \"../../item/item\";\r\nimport {PlIcon} from \"../../icon/icon\";\r\nimport {PlScroll} from \"../../scroll/scroll\";\r\nimport {PlList} from \"../../list/list\";\r\nimport {PlLoading} from \"../../loading/loading\";\r\n\r\nexport const CascadePanelProps = {\r\n    modelValue: {type: Array},                                          // 数组，双向绑定值\r\n    data: {type: Array},                                                // 选择的数据\r\n    trigger: {type: String, default: 'click'},                           // 展开触发类型：click，hover\r\n    hoverDebounce: {type: Number, default: 150},                        // 触发器为hover的时候，防抖时间间隔\r\n    emptyText: {type: String, default: '暂无数据'},                      // 没有子节点时展示的文本\r\n    nodeDisabled: {type: Function as PropType<(node: CascadeNode) => boolean>},// 是否禁用判断函数\r\n    renderContent: {type: Function as PropType<(data: { node: CascadeNode, index: number }) => VNodeChild>},// 渲染内容的渲染函数\r\n    selectBranch: {type: Boolean},                                      // 点击分支的时候也能够触发 change 事件\r\n    /*---------------------------------------separator-------------------------------------------*/\r\n    isLeaf: {type: Function as PropType<(node: CascadeNode) => boolean>},// 函数，用来判断是否为叶子节点，默认根据节点是否存在子节点来判断是否为叶子节点，懒加载模式下，改属性为必需属性\r\n    lazy: {type: Boolean},                                              // 数据是否为懒加载\r\n    getChildren: {type: Function as PropType<(node: CascadeNode | null, cb: (...args: any[]) => void) => any>},// 懒加载数据函数\r\n    /*---------------------------------------separator-------------------------------------------*/\r\n    labelField: {type: String, required: true},                         // 记录显示文本的字段名\r\n    keyField: {type: String, required: true},                           // 记录值的字段名\r\n    childrenField: {type: String, required: true},                      // 记录的子节点数据的字段名\r\n    /*---------------------------------------separator-------------------------------------------*/\r\n    filterText: {type: String},                                         // 筛选文本\r\n    filterMethod: {type: Function as PropType<(nodes: CascadeNode[], filterText: string) => boolean>},// 自定义筛选函数/\r\n}\r\n\r\nexport const PlCascadePanel = designComponent({\r\n    name: 'pl-cascade-panel',\r\n    props: CascadePanelProps,\r\n    emits: {\r\n        onUpdateModelValue: (val: any, expandNodes?: CascadeNode[]) => true,\r\n        onClickItem: (data: { node: CascadeNode, index: number }) => true,\r\n        onGetChildren: (...args: any[]) => true,\r\n        onUpdateData: (val: any) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {node: CascadeNode, index: Number}\r\n        })\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoEmit: false})\r\n        const data = useModel(() => props.data, emit.onUpdateData)\r\n        const expandKeys = ref([] as string[])\r\n        const state = reactive({\r\n            loading: false,\r\n            expandKeys,\r\n            cascadeMark: new CascadeMark(\r\n                () => ({\r\n                    nodeDisabled: props.nodeDisabled,\r\n                    isLeaf: props.isLeaf,\r\n                    lazy: props.lazy,\r\n                    getChildren: props.getChildren,\r\n                    filterMethod: props.filterMethod,\r\n\r\n                    labelField: props.labelField!,\r\n                    keyField: props.keyField!,\r\n                    childrenField: props.childrenField!,\r\n                }),\r\n                () => ({\r\n                    expandKeys: expandKeys.value,\r\n                    filterText: props.filterText,\r\n                })\r\n            )\r\n        })\r\n\r\n        const formatData = computed(() => state.cascadeMark.node.getList(data.value, 1, () => null))\r\n        const cascadeData = computed(() => {\r\n            const data = formatData.value || []\r\n            if (data.length === 0) return []\r\n            let expandKeys: string[] = []\r\n            if (!!state.expandKeys && state.expandKeys.length > 0) {\r\n                expandKeys = state.expandKeys\r\n            } else if (!!model.value && model.value.length > 0 && !props.lazy) {\r\n                expandKeys = model.value as string[]\r\n            }\r\n\r\n            let children = data as CascadeNode[]\r\n            let cascadeData: CascadeNode[][] = []\r\n\r\n            cascadeData.push(children)\r\n\r\n            expandKeys.forEach((key: string) => {\r\n                for (let i = 0; i < children.length; i++) {\r\n                    const child = children[i];\r\n                    if (child.key === key && !child.isLeaf) {\r\n                        children = child.children || []\r\n                        cascadeData.push(children)\r\n                        break\r\n                    }\r\n                }\r\n            })\r\n            return cascadeData\r\n        })\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            /**\r\n             * 检查props是否合法\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 18:48\r\n             */\r\n            checkProps() {\r\n                if (!props.data) return true\r\n                if (!props.keyField) {\r\n                    console.error('pl-cascade 的 keyField属性不能为空，每一条记录必须要有一个key标识')\r\n                    return false\r\n                }\r\n                if (!props.childrenField) {\r\n                    console.error('pl-cascade 的 childrenKey不能为空')\r\n                    return false\r\n                }\r\n                return true\r\n            },\r\n            iterateAll: (nodes: CascadeNode[], fn: Function, iterateChildren?: Function) => {\r\n                if (!nodes) return\r\n                nodes.forEach(node => {\r\n                    fn(node)\r\n                    if (!!node.children && (!iterateChildren || iterateChildren(node))) {\r\n                        utils.iterateAll(node.children, fn, iterateChildren)\r\n                    }\r\n                })\r\n            },\r\n            getChildrenAsync(node: CascadeNode | null): Promise<CascadeNode[]> {\r\n                return new Promise((resolve) => {\r\n                    if (!node) {\r\n                        state.loading = true\r\n                    } else {\r\n                        node.loading(true)\r\n                    }\r\n                    props.getChildren!(node, (...results: any[]) => {\r\n                        if (!node) {\r\n                            state.loading = false\r\n                        } else {\r\n                            node.loading(false)\r\n                            node.loaded(true)\r\n                        }\r\n                        emit.onGetChildren(...results)\r\n                        resolve(...results)\r\n                    })\r\n                })\r\n            },\r\n            async initLazy() {\r\n                if (!props.lazy) {\r\n                    return\r\n                }\r\n                data.value = await utils.getChildrenAsync(null)\r\n            },\r\n        }\r\n\r\n        const filterData = computed(() => {\r\n            let filterData: CascadeNode[][] = []\r\n            utils.iterateAll((formatData.value || []) as CascadeNode[], (node: CascadeNode) => {\r\n                if (node.isPassFilter && (node.isLeaf || props.selectBranch)) {\r\n                    filterData.push(node.filterData)\r\n                }\r\n            })\r\n            return filterData\r\n        })\r\n\r\n        const expandNodes = computed(() => {\r\n            if (!state.expandKeys) return []\r\n            let result: CascadeNode[] = []\r\n            let nodes = formatData.value || []\r\n\r\n            state.expandKeys.forEach((key: string) => {\r\n                for (let i = 0; i < nodes.length; i++) {\r\n                    const child = nodes[i];\r\n                    if (child.key === key) {\r\n                        result.push(child)\r\n                        if (!child.children || child.children.length === 0) {\r\n                            break\r\n                        } else {\r\n                            nodes = child.children\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            return result\r\n        })\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            mouseenterItem: debounce((node: CascadeNode) => {\r\n                if (props.trigger === 'hover') {\r\n                    methods.expand(node)\r\n                }\r\n            }, props.hoverDebounce),\r\n            clickItem: async (node: CascadeNode, index: number) => {\r\n                if (props.trigger === 'click') {\r\n                    await methods.expand(node)\r\n                }\r\n\r\n                if (node.nodeDisabled) return\r\n                if (node.isLeaf || props.selectBranch) {\r\n                    model.value = state.expandKeys\r\n                    emit.onUpdateModelValue(model.value as string[], expandNodes.value as CascadeNode[])\r\n                }\r\n                emit.onClickItem({node, index})\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            expand: async (node: CascadeNode) => {\r\n                if (!node.isExpand) {\r\n                    state.expandKeys = node.expandKeys\r\n\r\n                    if (\r\n                        props.lazy &&                                               // 懒加载模式\r\n                        !node.isLoaded &&                                           // 未曾加载过子节点数据\r\n                        !node.isLeaf                                                // 节点不是叶子节点\r\n                    ) {\r\n                        const children = await utils.getChildrenAsync(node)\r\n                        node.setChildren(children || [])\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        utils.initLazy()\r\n\r\n        return {\r\n            refer: {\r\n                ...methods,\r\n            },\r\n            render: () => {\r\n                const empty = (\r\n                    <PlItem class=\"pl-cascade-item pl-cascade-empty\" key=\"empty\" block>\r\n                        <PlIcon icon=\"el-icon-nodata\"/>\r\n                        {props.emptyText}\r\n                    </PlItem>\r\n                )\r\n\r\n                const filterList = (\r\n                    <PlItem class=\"pl-cascade-list pl-cascade-filter-list\" key={0}>\r\n                        <PlScroll>\r\n                            <PlList>\r\n                                {(!filterData.value || filterData.value.length === 0) && empty}\r\n                                {filterData.value.map((nodes) => (\r\n                                    <PlItem block\r\n                                            class={[\r\n                                                'pl-cascade-item',\r\n                                                {\r\n                                                    'pl-cascade-item-active': !!model.value && model.value.toString() === nodes.map(node => node.key).toString(),\r\n                                                    'pl-cascade-item-disabled': nodes.some(node => node.nodeDisabled),\r\n                                                }\r\n                                            ]}\r\n                                            key={nodes.map(node => node.key).join(' ')}\r\n                                            {...{\r\n                                                onClick: () => {\r\n                                                    handler.clickItem(nodes[nodes.length - 1], -1)\r\n                                                },\r\n                                            }}>\r\n                                        <div class=\"pl-cascade-content\">\r\n                                            {nodes.map(node => node.label).join(' / ')}\r\n                                        </div>\r\n                                    </PlItem>\r\n                                ))}\r\n                            </PlList>\r\n                        </PlScroll>\r\n                    </PlItem>\r\n                )\r\n\r\n                const cascadeList = cascadeData.value.map((list, listIndex) => (\r\n                    <PlItem class=\"pl-cascade-list\" key={listIndex} v-loading={listIndex > 0 && state.cascadeMark.loading.get(state.expandKeys[listIndex - 1])}>\r\n                        <PlScroll>\r\n                            <PlList>\r\n                                {list.map((node, nodeIndex) => (\r\n                                    <PlItem block\r\n                                            class={[\r\n                                                'pl-cascade-item',\r\n                                                {\r\n                                                    'pl-cascade-item-expand': node.key === state.expandKeys[listIndex],\r\n                                                    'pl-cascade-item-active': !!model.value && model.value[listIndex] === node.key,\r\n                                                    'pl-cascade-item-disabled': node.nodeDisabled,\r\n                                                }\r\n                                            ]}\r\n                                            key={node.key}\r\n\r\n                                            {...{\r\n                                                onClick: () => handler.clickItem(node, nodeIndex),\r\n                                                ...(props.trigger === 'hover' ? {\r\n                                                    onMouseenter: () => handler.mouseenterItem(node),\r\n                                                } : {})\r\n                                            }}>\r\n                                        <div class=\"pl-cascade-content\">\r\n                                            {scopedSlots.default({node, index: nodeIndex}, (\r\n                                                !!props.renderContent ? props.renderContent({node, index: nodeIndex}) : node.label\r\n                                            ))}\r\n                                            {!node.isLeaf && (\r\n                                                <div class=\"pl-cascade-arrow\">\r\n                                                    {node.isLoading ? <PlLoading type=\"gamma\" status=\"primary\"/> : <PlIcon icon=\"el-icon-arrow-right\"/>}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    </PlItem>\r\n                                ))}\r\n                                {list.length === 0 && (\r\n                                    <PlItem class=\"pl-cascade-item pl-cascade-empty\" key=\"empty\" block>\r\n                                        <PlIcon icon=\"el-icon-nodata\"/>\r\n                                        {props.emptyText}\r\n                                    </PlItem>\r\n                                )}\r\n                            </PlList>\r\n                        </PlScroll>\r\n                    </PlItem>\r\n                ))\r\n\r\n                const isEmpty = !!props.filterText ? (filterData.value.length === 0) : (cascadeData.value.length === 0)\r\n\r\n                return (\r\n                    <div class=\"pl-cascade-panel\" v-loading={state.loading}>\r\n                        {!!props.filterText ? filterList : (\r\n                            <PlList>\r\n                                {isEmpty ? (\r\n                                    <div class=\"pl-cascade-list\" key=\"empty\">\r\n                                        {empty}\r\n                                    </div>\r\n                                ) : cascadeList}\r\n                            </PlList>\r\n                        )}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {PlLoading} from './loading'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlLoading)","export const TimePublicProps = {\r\n    displayFormat: {type: String, default: 'HH:mm:ss'},\r\n    valueFormat: {type: String, default: 'HH:mm:ss'},\r\n    max: {type: String},\r\n    min: {type: String},\r\n    layout: {type: Array, default: () => (['h', 'm', 's'])},\r\n    custom: Function,\r\n    checkDisabled: Function,\r\n}","import {ref, getCurrentInstance, provide, inject, onMounted, onBeforeUnmount, markRaw, Ref} from 'vue';\r\nimport {createCounter} from \"../utils/createCounter\";\r\n\r\ntype UseCollectComponent = { name?: string, use: { class: any } }\r\ntype UseCollectSort = (() => HTMLElement) | number\r\n\r\nconst counter = createCounter('use_collector')\r\n\r\nfunction useCollectInParentInner() {\r\n\r\n    const indexMap = new WeakMap<any, number>()\r\n\r\n    const items = ref([] as any[])\r\n    const utils = {\r\n        addItem: (item: any, sort?: UseCollectSort) => {\r\n            if (!!sort) {\r\n                if (typeof sort !== \"number\") {\r\n                    const el = sort()\r\n                    sort = Array\r\n                        .from(el!.parentNode!.childNodes)\r\n                        .filter((item: any) => item.nodeName !== '#comment' && (!item.style || item.style.display !== 'none'))\r\n                        .indexOf(el)\r\n                    // console.log(el, sort)\r\n                }\r\n                indexMap.set(item, sort as number)\r\n\r\n                items.value.splice(\r\n                    0,\r\n                    items.value.length,\r\n                    ...[...items.value, item]\r\n                        .sort((a, b) => indexMap.get(a)! - indexMap.get(b)!))\r\n            } else {\r\n                items.value.push(item)\r\n            }\r\n        },\r\n        removeItem: (item: any) => {\r\n            const index = items.value.indexOf(item)\r\n            if (index > -1) items.value.splice(index, 1)\r\n        }\r\n    }\r\n    return {\r\n        parent: {} as any,  // 类型提示，实际上无用处\r\n        items,\r\n        utils,\r\n    }\r\n}\r\n\r\nexport function useCollect<Parent extends UseCollectComponent, Child extends UseCollectComponent>\r\n(config: () => {\r\n    parent: Parent,\r\n    child: Child,\r\n}) {\r\n\r\n    const {parent} = config()\r\n    const parentName = parent.name || counter()\r\n    const provideString = `@@Collector_${parentName}`\r\n\r\n    return {\r\n        parent: (): (Child['use']['class'])[] => {\r\n            const ctx = getCurrentInstance()!\r\n            const {items, utils} = useCollectInParentInner()\r\n            const data: ReturnType<typeof useCollectInParentInner> = {\r\n                items,\r\n                utils,\r\n                parent: ctx.proxy,\r\n            }\r\n            provide(provideString, data)\r\n            return items.value\r\n        },\r\n        child: (\r\n            {\r\n                injectDefaultValue,\r\n                sort,\r\n            }: {\r\n                injectDefaultValue?: any,\r\n                sort?: UseCollectSort,\r\n            } = {}): Parent['use']['class'] => {\r\n            const data = inject(provideString, injectDefaultValue) as ReturnType<typeof useCollectInParentInner>\r\n            if (!!data) {\r\n                const ctx = getCurrentInstance()!\r\n                const child = markRaw(ctx.proxy as any)\r\n                onMounted(() => data.utils.addItem(child, sort))\r\n                onBeforeUnmount(() => data.utils.removeItem(child))\r\n                return data.parent\r\n            } else {\r\n                return null\r\n            }\r\n        }\r\n    }\r\n}","import {PlPopper} from './popper'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlPopper)","import {computed, onMounted, reactive, watch, PropType} from 'vue';\r\nimport './input.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {SimpleFunction, StyleProperties} from \"../../shims\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport {throttle} from 'plain-utils/utils/throttle';\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {createEventListener} from \"../../utils/createEventListener\";\r\nimport {PlLoading} from \"../loading/loading\";\r\n\r\nconsole.log('load input component')\r\n\r\nexport const PlInput = designComponent({\r\n    name: 'pl-input',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: [String, Number]},\r\n        placeValue: {type: [String, Number]},\r\n\r\n        width: {type: [Number, String, Object, Function] as PropType<string | number>, default: null,},        // 输入框默认宽度\r\n        minHeight: {type: [Number, String], default: 100},      // 文本域最小高度\r\n        maxHeight: {type: [Number, String], default: 156},      // 文本域最大高度\r\n        block: {type: Boolean},                                 // 块级元素\r\n        textarea: {type: Boolean},                              // 当前是否为文本域输入框\r\n        suffixIcon: {type: [String, Function]},                 // 右侧图标\r\n        prefixIcon: {type: String},                             // 左侧图标\r\n        clearIcon: {type: Boolean},                             // 清除图标\r\n        clearHandler: Function,                         // 点击清除图标处理逻辑\r\n\r\n        autoHeight: {type: Boolean},                            // 自适应高度\r\n        isFocus: {type: Boolean},                               // 当前是否处于激活状态\r\n        inputReadonly: {type: Boolean},                         // 输入框只读\r\n        throttleEnter: {type: [Boolean, Number]},               // enter按键事件节流\r\n        asyncHandler: {type: Function},                         // 异步处理函数，会自动开启关闭loading状态\r\n\r\n        /*---------------------------------------原生属性-------------------------------------------*/\r\n        inputInnerTabindex: {type: Number, default: 0},\r\n        type: {type: String, default: 'text'},\r\n        placeholder: {type: String},\r\n        nativeAttrs: {type: Object, default: () => ({})},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onFocus: (e: FocusEvent) => true,\r\n        onBlur: (e: Event) => true,\r\n        onKeydown: (e: KeyboardEvent) => true,\r\n        onEnter: (e: KeyboardEvent) => true,\r\n        onEsc: (e: KeyboardEvent) => true,\r\n\r\n        onClickInput: (e: MouseEvent) => true,\r\n        onClickPrefixIcon: (e: MouseEvent) => true,\r\n        onClickSuffixIcon: (e: MouseEvent) => true,\r\n        onClickClearIcon: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots([\r\n            'prepend', 'append', 'hidden'\r\n        ], true)\r\n        const {refs} = useRefs({\r\n            input: HTMLInputElement,\r\n            hiddenInput: HTMLTextAreaElement,\r\n        })\r\n        const {propsState} = useProps(props, {\r\n            width: [useProps.NUMBER, useProps.PROMISE, useProps.FUNCTION],\r\n            minHeight: useProps.NUMBER,\r\n            maxHeight: useProps.NUMBER,\r\n        })\r\n        const {styleComputed} = useStyle({status: undefined})\r\n        const {editComputed, editState} = useEdit()\r\n        const state = reactive({\r\n            autoHeight: null as null | number,\r\n            handlerEnter: null as null | Function,\r\n            handleEnterInner: async (e: KeyboardEvent) => {\r\n                if (editComputed.value.editable) {\r\n                    if (!!props.asyncHandler) {\r\n                        editState.loading = true\r\n                        try {\r\n                            await props.asyncHandler()\r\n                        } catch (e) {\r\n                            console.error(e)\r\n                        } finally {\r\n                            editState.loading = null\r\n                        }\r\n                    } else {\r\n                        emit.onEnter(e)\r\n                    }\r\n                }\r\n            },\r\n        })\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            input: (e: Event) => {\r\n                model.value = (e.target as HTMLInputElement).value\r\n            },\r\n            enter: (e: KeyboardEvent) => {\r\n                state.handlerEnter!(e)\r\n            },\r\n            clickPrefixIcon: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                emit.onClickPrefixIcon(e)\r\n            },\r\n            clickSuffixIcon: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                emit.onClickSuffixIcon(e)\r\n            },\r\n            clickClearIcon: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                emit.onClickClearIcon(e)\r\n                if (!!props.clearHandler) {\r\n                    props.clearHandler(e)\r\n                } else {\r\n                    methods.clearValue()\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        const classes = useClass(() => [\r\n            `pl-input-shape-${styleComputed.value.shape}`,\r\n            `pl-input-size-${styleComputed.value.size}`,\r\n            {\r\n                [`pl-input-status-${styleComputed.value.status}`]: !!styleComputed.value.status,\r\n                'pl-input-block': props.block,\r\n                'pl-input-disabled': !!editComputed.value.disabled,\r\n                'pl-input-prefix-padding': !!props.prefixIcon,\r\n                'pl-input-suffix-padding': !!props.suffixIcon || !!props.clearIcon || editComputed.value.loading,\r\n                'pl-input-prefix': !!props.prefixIcon,\r\n                'pl-input-suffix': !!props.suffixIcon || editComputed.value.loading,\r\n                'pl-input-clear': !!props.clearIcon,\r\n                'pl-input-empty': !model.value && !props.placeValue,\r\n                'pl-input-focus': props.isFocus,\r\n                'pl-input-not-editable': !editComputed.value.editable,\r\n            }\r\n        ])\r\n\r\n        const styles = computed(() => {\r\n            const styles: StyleProperties = {}\r\n            /*没有前置以及后置插槽以及非块级元素的情况下，设置宽度*/\r\n            if (propsState.width !== null && !props.block) {\r\n                styles.width = unit(propsState.width)\r\n            }\r\n            /*textarea自动高度的时候，取最大高度最小高度以及滚动高度*/\r\n            if (!!props.textarea) {\r\n                if (!props.autoHeight || state.autoHeight == null) {\r\n                    styles.height = unit(state.autoHeight)\r\n                } else {\r\n                    if (propsState.maxHeight != null && state.autoHeight > propsState.maxHeight) {\r\n                        styles.height = unit(propsState.maxHeight)\r\n                    } else if (state.autoHeight < propsState.minHeight) {\r\n                        styles.height = unit(propsState.minHeight)\r\n                    } else {\r\n                        styles.height = unit(state.autoHeight)\r\n                    }\r\n                }\r\n            }\r\n            return styles\r\n        })\r\n\r\n        const publicProps = computed(() => ({\r\n            style: styles.value,\r\n            disabled: editComputed.value.disabled,\r\n            readonly: props.inputReadonly || editComputed.value.readonly || editComputed.value.loading,\r\n            value: model.value,\r\n            placeholder: props.placeholder,\r\n            ...(props.nativeAttrs || {}),\r\n\r\n            // 发现一个非常奇怪的现象，div.pl-input-inner 里面的input、派发的input事件，居然也能够在 div.pl-input-inner这个div节点上监听到。神奇\r\n            ...(!slots.default.isExist() ? {\r\n                onInput: (e: Event) => {\r\n                    /*ie 下不知道为什么页面初始化的之后这里默认就执行了一次，这里判断绕过这个问题*/\r\n                    if (e.target === document.activeElement) {\r\n                        handler.input(e)\r\n                    }\r\n                },\r\n            } : {}),\r\n\r\n            onClick: emit.onClickInput,\r\n            onFocus: emit.onFocus,\r\n            onBlur: emit.onBlur,\r\n            onKeydown: (e: KeyboardEvent) => {\r\n                emit.onKeydown(e)\r\n                switch (getKey(e)) {\r\n                    case KEY.enter:\r\n                        return handler.enter(e)\r\n                    case KEY.esc:\r\n                        return emit.onEsc(e)\r\n                }\r\n            },\r\n            ref: \"input\",\r\n        } as any))\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            clearValue: () => {\r\n                model.value = undefined\r\n            },\r\n            focus: () => {\r\n                if (!!refs.input && !!refs.input.focus) {\r\n                    refs.input.focus()\r\n                }\r\n            },\r\n            blur: () => {\r\n                if (!!refs.input && !!refs.input.blur) {\r\n                    refs.input.blur()\r\n                }\r\n            },\r\n            /*重置文本域高度*/\r\n            resetTextAreaHeight: throttle(() => {\r\n                if (!!props.autoHeight && !!props.textarea) {\r\n                    setTimeout(() => state.autoHeight = refs.hiddenInput!.scrollHeight + 12, 0)\r\n                }\r\n            }, 300),\r\n        }\r\n\r\n        /*---------------------------------------watcher-------------------------------------------*/\r\n\r\n        watch(() => model.value, () => {\r\n            methods.resetTextAreaHeight()\r\n        })\r\n        watch(() => props.throttleEnter, (val) => {\r\n            if (!val) {\r\n                state.handlerEnter = state.handleEnterInner\r\n            }\r\n            if (val === true) {\r\n                val = 1000\r\n            }\r\n            state.handlerEnter = throttle(state.handleEnterInner, val as number, {trailing: true})\r\n        }, {immediate: true})\r\n\r\n        onMounted(() => {\r\n            if (props.textarea) {\r\n                methods.resetTextAreaHeight()\r\n            }\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                refs,\r\n                state,\r\n                propsState,\r\n                methods,\r\n                model,\r\n            },\r\n            render: () => {\r\n\r\n                if (props.textarea) {\r\n                    /*渲染文本域*/\r\n                    return (\r\n                        <div class={['pl-textarea', classes.value]}>\r\n                            <textarea class=\"pl-textarea-inner\" {...publicProps.value}/>\r\n                            <textarea class=\"pl-textarea-inner pl-textarea-hidden\" ref=\"hiddenInput\" value={model.value}/>\r\n                        </div>\r\n                    )\r\n                } else {\r\n                    /*普通输入框*/\r\n                    const input = (\r\n                        <div class={['pl-input', classes.value]}>\r\n                            {!!props.prefixIcon && <span class=\"pl-input-prefix-icon\" onClick={handler.clickPrefixIcon}><PlIcon icon={props.prefixIcon}/></span>}\r\n\r\n                            {slots.default.isExist() ?\r\n                                <div tabIndex={props.inputInnerTabindex} class=\"pl-input-inner\" {...publicProps.value}>\r\n                                    {slots.default()}\r\n                                </div>\r\n                                :\r\n                                <input class=\"pl-input-inner\" {...publicProps.value}/>}\r\n\r\n                            {!!props.suffixIcon && <span class=\"pl-input-suffix-icon\">\r\n                                {typeof props.suffixIcon === 'function' ? (props.suffixIcon as any)() : <PlIcon {...createEventListener({onMousedown: handler.clickSuffixIcon})} icon={props.suffixIcon}/>}\r\n                            </span>}\r\n                            {!!props.clearIcon && (<span class=\"pl-input-suffix-icon pl-input-clear-icon\"><PlIcon {...createEventListener({onMousedown: handler.clickClearIcon})} icon=\"el-icon-error\"/></span>)}\r\n                            {!!editComputed.value.loading && <PlLoading class=\"pl-input-suffix-icon\"/>}\r\n                            {slots.hidden.isExist() && <div class=\"pl-input-inner-hidden\">{slots.hidden()}</div>}\r\n                        </div>\r\n                    )\r\n\r\n                    if (!slots.prepend.isExist() && !slots.append.isExist()) {\r\n                        return input\r\n                    } else {\r\n                        /*输入框组*/\r\n                        return (\r\n                            <div class=\"pl-input-group\">\r\n                                {slots.prepend.isExist() && <div class=\"pl-input-prepend\">{slots.prepend()}</div>}\r\n                                {input}\r\n                                {slots.append.isExist() && <div class=\"pl-input-append\">{slots.append()}</div>}\r\n                            </div>\r\n                        )\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n})","/**\r\n * 创建一个报错对象\r\n * @author  韦胜健\r\n * @date    2020/10/15 10:33\r\n */\r\nexport function createError(tag: string) {\r\n    return (msg: string, isLog?: boolean) => {\r\n        const message = `${tag}:${msg}`\r\n        const log = isLog == null ? true : isLog\r\n        if (log) {\r\n            console.error(message)\r\n        } else {\r\n            throw new Error(message)\r\n        }\r\n    }\r\n}","import {ref, onBeforeUpdate, Ref} from 'vue';\r\n\r\ninterface UseRefList {\r\n    <T = any>(reactive: true): Ref<T[]>\r\n\r\n    <T = any>(): T[]\r\n}\r\n\r\nexport const useRefList: UseRefList = <T>(reactive?: boolean) => {\r\n    if (reactive) {\r\n        const refs = ref([] as T[])\r\n        onBeforeUpdate(() => refs.value = [])\r\n        return refs\r\n    } else {\r\n        const refs = [] as any\r\n        onBeforeUpdate(() => refs.splice(0, refs.length))\r\n        return refs\r\n    }\r\n}\r\n","import {PlainLoading} from 'plain-loading/src/index'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {computed, watch} from 'vue';\r\nimport './loading.scss'\r\nimport {delay} from \"plain-utils/utils/delay\";\r\n\r\nexport const PlLoading = designComponent({\r\n    name: 'pl-loading',\r\n    props: {\r\n        type: {type: String, default: 'alpha'},\r\n        status: {type: String, default: null},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLElement,\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-loading',\r\n            !!props.status ? `pl-loading-status-${props.status}` : null,\r\n        ])\r\n\r\n        watch(() => props.type, async val => {\r\n            if (!val) {\r\n                return refs.el.innerHTML = ''\r\n            }\r\n            await delay(23)\r\n            if (!(PlainLoading as any)[val]) {\r\n                throw new Error(`pl-loading: un recognise type:${val}`)\r\n            }\r\n            !!refs.el && (refs.el.innerHTML = (PlainLoading as any)[val]().outerHTML)\r\n        }, {immediate: true})\r\n\r\n        return {\r\n            render: () => {\r\n                return <i class={classes.value} ref=\"el\"/>\r\n            }\r\n        }\r\n    },\r\n})","export function getElement(ref: any): HTMLElement | null {\r\n\r\n    if (!ref) {\r\n        return null\r\n    }\r\n\r\n    if (!!ref.$el) {\r\n        return getElement(ref.$el)\r\n    }\r\n\r\n    if (ref.nodeType !== 3) {\r\n        return ref\r\n    }\r\n\r\n    return !!ref.data ? ref : ref.nextElementSibling\r\n\r\n}","import {PopperTrigger, PopperTriggerType} from \"./PopperTrigger\";\r\nimport {SimpleFunction} from \"../../../shims\";\r\n\r\nexport function getBaseTrigger(\r\n    triggerName: PopperTriggerType,\r\n    {\r\n        model,\r\n        openModel,\r\n\r\n        show,\r\n        hide,\r\n\r\n        hoverOpenDelay,\r\n        hoverCloseDelay,\r\n        reference,\r\n\r\n        on,\r\n        off,\r\n        emit,\r\n    }: {\r\n        model: { value: boolean | undefined },\r\n        openModel: { value: boolean | undefined },\r\n\r\n        show: SimpleFunction,\r\n        hide: SimpleFunction,\r\n\r\n        hoverOpenDelay: number,\r\n        hoverCloseDelay: number,\r\n        reference: HTMLElement,\r\n\r\n        on: {\r\n            onEnterReference: SimpleFunction,\r\n            onLeaveReference: SimpleFunction,\r\n\r\n            onEnterPopper: SimpleFunction,\r\n            onLeavePopper: SimpleFunction,\r\n\r\n            onReferenceFocus: SimpleFunction,\r\n            onReferenceBlur: SimpleFunction,\r\n\r\n            onClickReference: SimpleFunction,\r\n            onClickBody: SimpleFunction,\r\n            onClickPopper: SimpleFunction,\r\n        },\r\n        off: {\r\n            onEnterReference: SimpleFunction,\r\n            onLeaveReference: SimpleFunction,\r\n\r\n            onEnterPopper: SimpleFunction,\r\n            onLeavePopper: SimpleFunction,\r\n\r\n            onReferenceFocus: SimpleFunction,\r\n            onReferenceBlur: SimpleFunction,\r\n\r\n            onClickReference: SimpleFunction,\r\n            onClickBody: SimpleFunction,\r\n            onClickPopper: SimpleFunction,\r\n        },\r\n        emit: {\r\n            onReferenceFocus: SimpleFunction,\r\n            onReferenceBlur: SimpleFunction,\r\n\r\n            onEnterReference: SimpleFunction,\r\n            onLeaveReference: SimpleFunction,\r\n\r\n            onEnterPopper: SimpleFunction,\r\n            onLeavePopper: SimpleFunction,\r\n        },\r\n    },\r\n) {\r\n    switch (triggerName) {\r\n        case PopperTriggerType.hover:\r\n            return getHoverTrigger({\r\n                model,\r\n                show,\r\n                hide,\r\n                hoverOpenDelay,\r\n                hoverCloseDelay,\r\n                on,\r\n                off,\r\n                emit,\r\n            })\r\n        case PopperTriggerType.click:\r\n            return getClickTrigger({\r\n                model,\r\n                show,\r\n                hide,\r\n                openModel,\r\n                on,\r\n                off,\r\n            })\r\n        case PopperTriggerType.focus:\r\n            return getFocusTrigger({\r\n                show,\r\n                hide,\r\n                reference,\r\n                on,\r\n                off,\r\n                emit,\r\n            })\r\n        case PopperTriggerType.manual:\r\n            return getManualTrigger()\r\n    }\r\n}\r\n\r\nfunction getHoverTrigger({\r\n                             model,\r\n                             show,\r\n                             hide,\r\n                             hoverOpenDelay,\r\n                             hoverCloseDelay,\r\n\r\n                             on,\r\n                             off,\r\n                             emit,\r\n                         }: {\r\n    model: { value: boolean | undefined },\r\n    show: Function,\r\n    hide: Function,\r\n    hoverOpenDelay: number,\r\n    hoverCloseDelay: number,\r\n\r\n    on: {\r\n        onEnterReference: Function,\r\n        onLeaveReference: Function,\r\n\r\n        onEnterPopper: Function,\r\n        onLeavePopper: Function,\r\n\r\n        onReferenceFocus: Function,\r\n        onReferenceBlur: Function,\r\n\r\n        onClickReference: Function,\r\n        onClickPopper: Function,\r\n    },\r\n    off: {\r\n        onEnterReference: Function,\r\n        onLeaveReference: Function,\r\n\r\n        onEnterPopper: Function,\r\n        onLeavePopper: Function,\r\n\r\n        onReferenceFocus: Function,\r\n        onReferenceBlur: Function,\r\n\r\n        onClickReference: Function,\r\n        onClickPopper: Function,\r\n    },\r\n    emit: {\r\n        onReferenceFocus: Function,\r\n        onReferenceBlur: Function,\r\n\r\n        onEnterReference: Function,\r\n        onLeaveReference: Function,\r\n\r\n        onEnterPopper: Function,\r\n        onLeavePopper: Function,\r\n    },\r\n}) {\r\n    let closeTimer: number | undefined;\r\n    let openTimer: number | undefined;\r\n\r\n    const handler = {\r\n        reference: {\r\n            enter: () => {\r\n                if (!!closeTimer) {\r\n                    clearTimeout(closeTimer)\r\n                    closeTimer = undefined\r\n                }\r\n                openTimer = setTimeout(() => {\r\n                    show()\r\n                    openTimer = undefined\r\n                    emit.onEnterReference(model.value)\r\n                }, hoverOpenDelay)\r\n            },\r\n            leave: () => {\r\n                if (!!openTimer) {\r\n                    clearTimeout(openTimer)\r\n                    openTimer = undefined\r\n                }\r\n                closeTimer = setTimeout(() => {\r\n                    hide()\r\n                    closeTimer = undefined\r\n                    emit.onLeaveReference(model.value)\r\n                }, hoverCloseDelay)\r\n            },\r\n        },\r\n        popper: {\r\n            enter: () => {\r\n                if (!!closeTimer) {\r\n                    clearTimeout(closeTimer)\r\n                    closeTimer = undefined\r\n                }\r\n                openTimer = setTimeout(() => {\r\n                    show()\r\n                    openTimer = undefined\r\n                    emit.onEnterPopper(model.value)\r\n                }, hoverOpenDelay)\r\n            },\r\n            leave: () => {\r\n                if (!!openTimer) {\r\n                    clearTimeout(openTimer)\r\n                    openTimer = undefined\r\n                }\r\n                closeTimer = setTimeout(() => {\r\n                    hide()\r\n                    closeTimer = undefined\r\n                    emit.onLeavePopper(model.value)\r\n                }, hoverCloseDelay)\r\n            },\r\n        },\r\n    }\r\n\r\n    return new PopperTrigger(\r\n        PopperTriggerType.hover,\r\n        () => {\r\n            on.onEnterReference(handler.reference.enter)\r\n            on.onLeaveReference(handler.reference.leave)\r\n\r\n            on.onEnterPopper(handler.popper.enter)\r\n            on.onLeavePopper(handler.popper.leave)\r\n        },\r\n        () => {\r\n            off.onEnterReference(handler.reference.enter)\r\n            off.onLeaveReference(handler.reference.leave)\r\n\r\n            off.onEnterPopper(handler.popper.enter)\r\n            off.onLeavePopper(handler.popper.leave)\r\n        }\r\n    )\r\n}\r\n\r\nfunction getClickTrigger({\r\n                             model,\r\n                             show,\r\n                             hide,\r\n                             openModel,\r\n                             on,\r\n                             off,\r\n                         }: {\r\n    model: { value: boolean | undefined },\r\n    show: Function,\r\n    hide: Function,\r\n    openModel: { value: boolean | undefined },\r\n\r\n    on: {\r\n        onClickReference: Function,\r\n        onClickBody: Function,\r\n    },\r\n    off: {\r\n        onClickReference: Function,\r\n        onClickBody: Function,\r\n    },\r\n\r\n}) {\r\n\r\n    const handler = {\r\n        onClickReference: () => {\r\n            if (model.value) {\r\n                hide()\r\n            } else {\r\n                show()\r\n            }\r\n        },\r\n        onClickBody: () => {\r\n            if (openModel.value) {\r\n                hide()\r\n            }\r\n        },\r\n    }\r\n\r\n    return new PopperTrigger(\r\n        PopperTriggerType.click,\r\n        () => {\r\n            on.onClickReference(handler.onClickReference)\r\n            on.onClickBody(handler.onClickBody)\r\n        },\r\n        () => {\r\n            off.onClickReference(handler.onClickReference)\r\n            off.onClickBody(handler.onClickBody)\r\n        },\r\n    )\r\n}\r\n\r\nfunction getFocusTrigger(\r\n    {\r\n        show,\r\n        hide,\r\n        reference,\r\n        on,\r\n        off,\r\n        emit,\r\n    }: {\r\n        show: Function,\r\n        hide: Function,\r\n        reference: HTMLElement,\r\n\r\n        on: {\r\n            onReferenceFocus: Function,\r\n            onReferenceBlur: Function,\r\n        },\r\n        off: {\r\n            onReferenceFocus: Function,\r\n            onReferenceBlur: Function,\r\n        },\r\n        emit: {\r\n            onReferenceFocus: Function,\r\n            onReferenceBlur: Function,\r\n        },\r\n    }\r\n) {\r\n\r\n    let oldTabIndex: string | null;\r\n    const handler = {\r\n        focus: (e: FocusEvent) => {\r\n            emit.onReferenceFocus(e)\r\n            show()\r\n        },\r\n        blur: (e: Event) => {\r\n            emit.onReferenceBlur(e)\r\n            hide()\r\n        },\r\n    }\r\n\r\n    return new PopperTrigger(PopperTriggerType.focus,\r\n        () => {\r\n            oldTabIndex = reference.getAttribute('tabindex')\r\n            if (oldTabIndex == null) {\r\n                reference.setAttribute('tabindex', '0')\r\n            }\r\n            on.onReferenceFocus(handler.focus)\r\n            on.onReferenceBlur(handler.blur)\r\n        },\r\n        () => {\r\n            if (oldTabIndex == null) {\r\n                reference.removeAttribute('tabindex')\r\n            } else {\r\n                reference.setAttribute('tabindex', oldTabIndex)\r\n            }\r\n            off.onReferenceFocus(handler.focus)\r\n            off.onReferenceBlur(handler.blur)\r\n        },\r\n    )\r\n}\r\n\r\nfunction getManualTrigger() {\r\n    return new PopperTrigger(PopperTriggerType.manual,\r\n        () => undefined,\r\n        () => undefined,\r\n    )\r\n}","import {getBaseTrigger} from \"./BaseTrigger\";\r\nimport {SimpleFunction} from \"../../../shims\";\r\n\r\nexport class PopperTrigger {\r\n    data: any\r\n\r\n    constructor(\r\n        public name: PopperTriggerType,     // 触发器名称\r\n        public init: Function,              // 触发器初始化的时候执行函数\r\n        public destroy: Function            // 触发器销毁的时候执行函数\r\n    ) {\r\n    }\r\n}\r\n\r\nexport enum PopperTriggerType {\r\n    hover = 'hover',\r\n    click = 'click',\r\n    focus = 'focus',\r\n    manual = 'manual'\r\n}\r\n\r\nexport function getPopperTrigger(triggerName: PopperTriggerType, {\r\n    model,\r\n    openModel,\r\n\r\n    show,\r\n    hide,\r\n\r\n    hoverOpenDelay,\r\n    hoverCloseDelay,\r\n    reference,\r\n\r\n    on,\r\n    off,\r\n    emit,\r\n}: {\r\n    model: { value: boolean | undefined },\r\n    openModel: { value: boolean | undefined },\r\n\r\n    show: SimpleFunction,\r\n    hide: SimpleFunction,\r\n\r\n    hoverOpenDelay: number,\r\n    hoverCloseDelay: number,\r\n    reference: HTMLElement,\r\n\r\n    on: {\r\n        onClickReference: SimpleFunction,\r\n        onClickBody: SimpleFunction,\r\n        onClickPopper: SimpleFunction,\r\n        onEnterPopper: SimpleFunction,\r\n        onLeavePopper: SimpleFunction,\r\n    },\r\n    off: {\r\n        onClickReference: SimpleFunction,\r\n        onClickBody: SimpleFunction,\r\n        onClickPopper: SimpleFunction,\r\n        onEnterPopper: SimpleFunction,\r\n        onLeavePopper: SimpleFunction,\r\n    },\r\n    emit: {\r\n        onReferenceFocus: SimpleFunction,\r\n        onReferenceBlur: SimpleFunction,\r\n        onEnterReference: SimpleFunction,\r\n        onLeaveReference: SimpleFunction,\r\n        onEnterPopper: SimpleFunction,\r\n        onLeavePopper: SimpleFunction,\r\n    },\r\n\r\n}) {\r\n    return getBaseTrigger(triggerName, {\r\n        model,\r\n        openModel,\r\n        show,\r\n        hide,\r\n\r\n        hoverOpenDelay,\r\n        hoverCloseDelay,\r\n        reference,\r\n\r\n        on: {\r\n            onEnterReference: (cb) => reference.addEventListener('mouseenter', cb),\r\n            onLeaveReference: (cb) => reference.addEventListener('mouseleave', cb),\r\n            onReferenceFocus: (cb) => reference.addEventListener('focus', cb),\r\n            onReferenceBlur: (cb) => reference.addEventListener('blur', cb),\r\n\r\n            onEnterPopper: on.onEnterPopper,\r\n            onLeavePopper: on.onLeavePopper,\r\n            onClickReference: on.onClickReference,\r\n            onClickBody: on.onClickBody,\r\n            onClickPopper: on.onClickPopper,\r\n        },\r\n        off: {\r\n            onEnterReference: (cb) => reference.removeEventListener('mouseenter', cb),\r\n            onLeaveReference: (cb) => reference.removeEventListener('mouseleave', cb),\r\n            onReferenceFocus: (cb) => reference.removeEventListener('focus', cb),\r\n            onReferenceBlur: (cb) => reference.removeEventListener('blur', cb),\r\n\r\n            onEnterPopper: off.onEnterPopper,\r\n            onLeavePopper: off.onLeavePopper,\r\n            onClickReference: off.onClickReference,\r\n            onClickBody: off.onClickBody,\r\n            onClickPopper: off.onClickPopper,\r\n        },\r\n        emit: emit,\r\n    })\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {computed, onMounted, createCommentVNode, Teleport, reactive, markRaw, nextTick, watch, getCurrentInstance, onBeforeUnmount, PropType} from 'vue';\r\nimport {createError} from \"../../utils/createError\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {getElement} from \"../../utils/getElement\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {PlainPopper} from 'plain-popper'\r\nimport {SimpleFunction} from \"../../shims\";\r\nimport {getPopperTrigger, PopperTrigger, PopperTriggerType} from \"./trigger/PopperTrigger\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\nimport './popper.scss'\r\nimport {refreshPopperReference} from \"./refershPopperReference\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {PlScroll} from '../scroll/scroll';\r\n\r\nconst error = createError('pl-popper')\r\n\r\nexport const PlPopper = designComponent({\r\n    name: 'pl-popper',\r\n    props: {\r\n        modelValue: {type: Boolean},                                // 双向绑定值，当前是否打开\r\n        open: {type: Boolean},                                      // 双向绑定值，当前是否已经打开\r\n        trigger: {type: String, default: 'hover'},                  // 触发动作， hover,click,focus,manual,always\r\n\r\n        title: {type: String},                                      // 标题文本\r\n        message: {type: String},                                    // 内容文本\r\n        disabled: {type: Boolean},                                  // 禁用\r\n        transition: {type: String, default: 'pl-transition-fade'},  // 动画名称：pl-transition-fade, pl-transition-scale, pl-transition-scale-y, pl-transition-popper-drop\r\n        popperClass: {type: [String, Array, Object]},               // popper容器节点样式\r\n        offset: {type: [Number, String]},                           // 偏移量\r\n        width: {type: [Number, String]},                            // 宽度\r\n        height: {type: [Number, String]},                           // 高度\r\n        hoverOpenDelay: {type: [Number, String], default: 0},       // hover触发条件下，打开延迟时间\r\n        hoverCloseDelay: {type: [Number, String], default: 200},    // hover触发条件下，关闭延迟时间\r\n        noContentPadding: {type: Boolean},                          // 去掉默认内容内边距\r\n\r\n        reference: {type: [Function, Element] as PropType<HTMLElement | (() => HTMLElement)>},// 目标dom元素\r\n        placement: {type: String, default: 'bottom-start'},         // 位置\r\n        arrow: {type: Boolean, default: true},                      // 是否需要箭头\r\n\r\n        boundary: {default: 'window'},                              // 边界元素\r\n        sizeEqual: {type: Boolean},                                 // 与reference在方向上大小相等\r\n        scrollAttrs: {type: Object},                                // pl-scroll 属性配置\r\n        popperAttrs: {type: Object},                                // 给popper dom节点传递的属性\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true,\r\n        onUpdateOpen: (val: boolean) => true,\r\n        onInit: () => true,\r\n        onDestroy: () => true,\r\n        onOpen: () => true,\r\n        onClose: () => true,\r\n        onShow: () => true,\r\n        onHide: () => true,\r\n\r\n        onClickReference: (e: MouseEvent) => true,\r\n        onClickPopper: (e: MouseEvent) => true,\r\n        onClickBody: (e: MouseEvent) => true,\r\n        onMousedownPopper: (e: MouseEvent) => true,\r\n\r\n        onEnterReference: (e: MouseEvent) => true,\r\n        onLeaveReference: (e: MouseEvent) => true,\r\n        onEnterPopper: (e: MouseEvent) => true,\r\n        onLeavePopper: (e: MouseEvent) => true,\r\n        onReferenceFocus: (e: FocusEvent) => true,\r\n        onReferenceBlur: (e: Event) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {emit, on, off} = event\r\n\r\n        const {slots} = useSlots([\r\n            'popper',\r\n            'title',\r\n        ], true)\r\n\r\n        const {refs} = useRefs({\r\n            comment: HTMLElement,                                               // 注释节点，用来查找reference的第一个节点\r\n            popper: HTMLDivElement,                                             // popper div 节点\r\n            content: HTMLDivElement,                                            // popper content 节点\r\n        });\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const {propsState} = useProps(props, {\r\n            hoverOpenDelay: useProps.NUMBER,\r\n            hoverCloseDelay: useProps.NUMBER,\r\n            offset: useProps.NUMBER,\r\n            width: useProps.NUMBER,\r\n            height: useProps.NUMBER,\r\n        })\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoEmit: false, autoWatch: false})\r\n        const openModel = useModel(() => props.open, emit.onUpdateOpen, {autoEmit: false, autoWatch: false})\r\n\r\n        const state = reactive({\r\n            el: {\r\n                popper: null as null | HTMLElement,                             // popper 节点\r\n                comment: null as null | HTMLElement,                            // comment 节点\r\n                reference: null as null | HTMLElement,                          // comment.nextElementSibling，也就是 reference 的第一个节点\r\n            },\r\n            referenceEl: null as null | HTMLElement,                            // 真正的 reference 对象获取方法\r\n            zIndex: nextIndex(),                                                // popper zIndex值\r\n            onTransitionend: null as null | ((e: Event) => void),               // 当show或者hide，需要监听一次 transitionend事件，所以这里有可能是null\r\n            init: false,                                                        // 当前是否已经初始化popper content及其Popper对象\r\n            popper: null as null | PlainPopper,                                 // PlainPopper 对象\r\n            trigger: null as null | PopperTrigger,                              // 触发类型\r\n        })\r\n\r\n        /**\r\n         * 检查默认插槽中是否存在多个节点，如果是则发出警告\r\n         * @author  韦胜健\r\n         * @date    2020/11/17 9:45\r\n         */\r\n        const referenceVNode = computed(() => {\r\n            const slot = slots.default() as any\r\n            if (!slot) {\r\n                return null\r\n            }\r\n            if (slot.length > 1) {\r\n                error('allows only one child node!')\r\n            }\r\n            return slot[0]\r\n        })\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        /**\r\n         * 当前方向，用来配置sizeEqual使用\r\n         * @author  韦胜健\r\n         * @date    2020/11/17 10:49\r\n         */\r\n        const direction = computed(() => {\r\n            const [direction] = props.placement.split('-')\r\n            return direction as 'top' | 'bottom' | 'left' | 'right'\r\n        })\r\n\r\n        const popperClasses = computed(() => [\r\n            'pl-popper',\r\n            'plain-popper',\r\n            props.transition,\r\n            props.popperClass,\r\n            {\r\n                'pl-popper-show': model.value,\r\n                'pl-popper-open': openModel.value,\r\n                // 'pl-popper-ready': state.ready,\r\n                'pl-popper-show-arrow': props.arrow,\r\n                'pl-popper-no-content-padding': props.noContentPadding,\r\n            }\r\n        ])\r\n\r\n        const popperStyles = useStyles(style => {\r\n            style.zIndex = state.zIndex\r\n        })\r\n\r\n        const sizeStyles = useStyles(styles => {\r\n            propsState.height != null && (styles.height = `${propsState.height}px`);\r\n            propsState.width != null && (styles.width = `${propsState.width}px`);\r\n            if (!!props.sizeEqual && !!state.referenceEl) {\r\n                if (['top', 'bottom'].indexOf(direction.value) > -1) {\r\n                    styles.width = (state.referenceEl as HTMLElement).offsetWidth + 'px'\r\n                } else if (['left', 'right'].indexOf(direction.value) > -1) {\r\n                    styles.height = (state.referenceEl as HTMLElement).offsetHeight + 'px'\r\n                }\r\n            }\r\n            return styles\r\n        })\r\n\r\n        const scrollAttrs = computed(() => {\r\n            if (!propsState.height) {\r\n                return null\r\n            } else {\r\n                return Object.assign({\r\n                    fitHostWidth: true,\r\n                }, props.scrollAttrs)\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            onPopperContentTransitionend: (e: Event) => !!state.onTransitionend && state.onTransitionend(e),\r\n            onClickReference: (e: MouseEvent) => {\r\n                emit.onClickReference(e)\r\n            },\r\n            onClickPopper: (e: MouseEvent) => {\r\n                emit.onClickPopper(e)\r\n            },\r\n            onClickBody: (e: MouseEvent) => {\r\n                if (!model.value && !openModel.value) {\r\n                    return;\r\n                }\r\n                if (state.referenceEl!.contains(e.target as Node)) {\r\n                    /*点击了reference*/\r\n                    return\r\n                }\r\n                if (!!refs.content && refs.content!.contains(e.target as Node)) {\r\n                    /*点击了content*/\r\n                    return\r\n                }\r\n                emit.onClickBody(e)\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            init: (): boolean => {\r\n                let {comment, reference} = state.el\r\n                if (!!comment && !!reference) {\r\n                    state.referenceEl = reference\r\n                } else if (!!props.reference) {\r\n                    state.referenceEl = getElement(typeof props.reference === \"function\" ? (props.reference as SimpleFunction)() : props.reference)\r\n                } else {\r\n                    /*没有reference，等待reference初始化在初始化popper*/\r\n                    return false\r\n                }\r\n                utils.bindEvents()\r\n\r\n                state.trigger = getPopperTrigger(props.trigger as PopperTriggerType, {\r\n                    model,\r\n                    openModel: openModel,\r\n                    show: methods.show,\r\n                    hide: methods.hide,\r\n\r\n                    hoverOpenDelay: propsState.hoverOpenDelay as number,\r\n                    hoverCloseDelay: propsState.hoverCloseDelay as number,\r\n\r\n                    reference: state.referenceEl as HTMLElement,\r\n\r\n                    on,\r\n                    off,\r\n                    emit,\r\n                })\r\n\r\n                state.trigger.init()\r\n                emit.onInit()\r\n\r\n                return true\r\n            },\r\n            destroy: () => {\r\n                utils.unbindEvents()\r\n                if (!!state.trigger) {\r\n                    state.trigger.destroy()\r\n                }\r\n                if (!!state.popper) {\r\n                    state.popper.destroy()\r\n                }\r\n                emit.onDestroy()\r\n            },\r\n            bindEvents: () => {\r\n                if (!!state.referenceEl) {\r\n                    state.referenceEl.addEventListener('click', handler.onClickReference)\r\n                }\r\n                document.body.addEventListener('click', handler.onClickBody, true)\r\n            },\r\n            unbindEvents: () => {\r\n                if (!!state.referenceEl) {\r\n                    state.referenceEl.removeEventListener('click', handler.onClickReference)\r\n                }\r\n                document.body.removeEventListener('click', handler.onClickBody, true)\r\n            },\r\n            initPopper: () => {\r\n                state.popper = new PlainPopper({\r\n                    popper: refs.popper,\r\n                    reference: state.referenceEl!,\r\n                    padding: 50,\r\n                    placement: props.placement as any,\r\n                    offset: Number(props.offset || (!!props.arrow ? 0 : 2)),\r\n                    boundary: props.boundary,\r\n                    arrowSize: !props.arrow ? 0 : undefined,\r\n                    shouldUpdate: () => !!model.value\r\n                })\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            show: async (shouldEmit = true) => {\r\n                if (props.disabled) {\r\n                    return\r\n                }\r\n                if (!state.init) {\r\n                    state.init = true\r\n                    await nextTick()\r\n                    await utils.initPopper()\r\n                }\r\n                state.popper!.refresh()\r\n\r\n                /*这里要有一定的延迟，否则popper的属性 direction以及align更新没有结束，导致动画的方向不对*/\r\n                await nextTick()\r\n                await delay(50)\r\n\r\n                state.zIndex = nextIndex()\r\n                model.value = true\r\n                emit.onShow()\r\n                if (shouldEmit) {\r\n                    emit.onUpdateModelValue(model.value)\r\n                }\r\n                state.onTransitionend = () => {\r\n                    openModel.value = true\r\n                    state.onTransitionend = null\r\n                }\r\n            },\r\n            hide: (shouldEmit = true) => {\r\n                model.value = false\r\n                emit.onHide()\r\n                if (shouldEmit) {\r\n                    emit.onUpdateModelValue(model.value)\r\n                }\r\n                state.onTransitionend = () => {\r\n                    openModel.value = false\r\n                    state.onTransitionend = null\r\n                }\r\n            },\r\n            toggle: async () => {\r\n                model.value ? await methods.hide() : await methods.show()\r\n            },\r\n            refresh: () => {\r\n                if (!state.referenceEl) return\r\n                state.popper!.refresh()\r\n            },\r\n            refreshReference: async () => {\r\n                await nextTick()\r\n                const comment = getElement(refs.comment)\r\n                const reference = !!comment ? comment!.nextElementSibling as HTMLElement : null\r\n                // console.log(reference, state.el.reference)\r\n                if (!!reference && reference !== state.el.reference) {\r\n                    await utils.destroy()\r\n                    state.el.reference = markRaw(reference)\r\n                    await utils.init()\r\n                }\r\n            }\r\n        }\r\n\r\n        onMounted(async () => {\r\n\r\n            const popper = getElement(refs.popper)\r\n            const comment = getElement(refs.comment)\r\n            const reference = !!comment ? comment!.nextElementSibling as HTMLElement : null\r\n            // console.log({popper, comment, reference})\r\n\r\n            state.el = markRaw({popper, comment, reference})\r\n\r\n            await utils.init()\r\n            if (model.value) {\r\n                await methods.show(false)\r\n            }\r\n        })\r\n\r\n        onBeforeUnmount(() => utils.destroy())\r\n        refreshPopperReference.provide(methods.refreshReference)\r\n\r\n        /*---------------------------------------watch-------------------------------------------*/\r\n        watch(() => props.modelValue, (val) => {\r\n            if (val === model.value) {\r\n                return\r\n            }\r\n            if (val) {\r\n                methods.show(false)\r\n            } else {\r\n                methods.hide(false)\r\n            }\r\n        })\r\n        // watch(() => model.value, (val) => {})\r\n        watch(() => openModel.value, (val) => {\r\n            if (!!val) {\r\n                emit.onUpdateOpen(true)\r\n                emit.onOpen()\r\n            } else {\r\n                emit.onUpdateOpen(false)\r\n                emit.onClose()\r\n            }\r\n        })\r\n        watch(() => props.placement, (val) => {\r\n            if (!!state.popper) {\r\n                state.popper.setPlacement(val as any)\r\n            }\r\n        })\r\n\r\n        const ctx = getCurrentInstance()!\r\n        const popperConfigChangeHandler = debounce(async () => {\r\n            // console.log('popperConfigChangeHandler')\r\n            await nextTick()\r\n            if (ctx.isUnmounted) {\r\n                return\r\n            }\r\n            await utils.destroy()\r\n            await utils.init()\r\n            if (!state.referenceEl) {\r\n                if (!!state.popper) {\r\n                    state.popper.destroy()\r\n                    state.popper = null\r\n                }\r\n                return\r\n            }\r\n            if (!!state.popper) {\r\n                await utils.initPopper()\r\n            }\r\n        }, 50)\r\n        watch(() => props.reference, popperConfigChangeHandler)\r\n        watch(() => props.arrow, popperConfigChangeHandler)\r\n        watch(() => props.trigger, popperConfigChangeHandler)\r\n\r\n        /*---------------------------------------render-------------------------------------------*/\r\n\r\n        const Comment = createCommentVNode('') as any\r\n\r\n        return {\r\n            refer: {\r\n                event,\r\n                state,\r\n                ...methods,\r\n            },\r\n            render: () => {\r\n                const {value: ReferenceVNode} = referenceVNode\r\n                return (\r\n                    <>\r\n                        {/*如果没有reference，则不渲染comment节点*/}\r\n                        {!!ReferenceVNode && <>\r\n                            <Comment ref=\"comment\"/>\r\n                            <ReferenceVNode/>\r\n                        </>}\r\n\r\n                        {state.init && <Teleport to=\".pl-root-service-container\">\r\n                            <div class={popperClasses.value}\r\n                                 style={popperStyles.value}\r\n                                 {...(props.popperAttrs || {})}\r\n                                 ref=\"popper\">\r\n                                <div class=\"plain-popper-content\"\r\n                                     ref=\"content\"\r\n\r\n                                     onClick={emit.onClickPopper}\r\n                                     onTransitionend={handler.onPopperContentTransitionend}\r\n                                     onMousedown={emit.onMousedownPopper}\r\n                                     {...(props.trigger === 'hover' ? {\r\n                                         onMouseenter: emit.onEnterPopper,\r\n                                         onMouseleave: emit.onLeavePopper,\r\n                                     } : {})}\r\n                                >\r\n                                    <div class=\"plain-popper-arrow\"/>\r\n                                    {(props.title || slots.title.isExist()) && <div class=\"pl-popper-title\">\r\n                                        {props.title || slots.title()}\r\n                                    </div>}\r\n                                    {(props.message || slots.popper.isExist()) && <div class=\"pl-popper-content-inner\" style={sizeStyles.value}>\r\n                                        {!!scrollAttrs.value ? (\r\n                                            <PlScroll {...scrollAttrs.value}>\r\n                                                {props.message || slots.popper()}\r\n                                            </PlScroll>\r\n                                        ) : (props.message || slots.popper())}\r\n                                    </div>}\r\n                                </div>\r\n                            </div>\r\n                        </Teleport>}\r\n                    </>\r\n                )\r\n            }\r\n        }\r\n    },\r\n}, {\r\n    refreshPopperReference,\r\n})","interface Defer {\r\n    (): {\r\n        resolve: () => void,\r\n        reject: (...args: any[]) => void,\r\n        promise: Promise<void>\r\n    },\r\n\r\n    <T>(): {\r\n        resolve: (val: T) => void,\r\n        reject: (...args: any[]) => void,\r\n        promise: Promise<T>\r\n    },\r\n}\r\n\r\nexport const defer: Defer = () => {\r\n    const dfd = {} as any\r\n    dfd.promise = new Promise((resolve, reject) => {\r\n        dfd.resolve = resolve as any\r\n        dfd.reject = reject\r\n    })\r\n    return dfd\r\n}","import {reactive, watch} from 'vue'\r\nimport {toArray} from \"../utils/toArray\";\r\n\r\nexport enum FormatPropType {\r\n    PROMISE = 'PROMISE',\r\n    FUNCTION = 'FUNCTION',\r\n    NUMBER = 'NUMBER',\r\n}\r\n\r\n/**\r\n * ignorePromise:第一次获取值的时候，忽略Promise格式化，而是通过 watch immediate 来实现赋值\r\n * @author  韦胜健\r\n * @date    2020/10/30 15:29\r\n */\r\nasync function usePropsFormatter(state: any, key: string, val: any, types: FormatPropType | FormatPropType[]): Promise<void> {\r\n\r\n    if (val == null) {\r\n        state[key] = val\r\n        return\r\n    }\r\n\r\n    const formatTypes = toArray(types)\r\n\r\n    if (formatTypes.indexOf(FormatPropType.PROMISE) > -1 && !!val.then && typeof val.then === 'function') {\r\n        val = await val\r\n    }\r\n\r\n    if (formatTypes.indexOf(FormatPropType.FUNCTION) > -1 && typeof val === \"function\") {\r\n        val = val()\r\n    }\r\n\r\n    if (formatTypes.indexOf(FormatPropType.NUMBER) > -1 && typeof val === \"string\") {\r\n        if (/^[\\d]+$/.test(val)) {\r\n            val = Number(val)\r\n        } else {\r\n            if (val.lastIndexOf('px') === val.length - 2) {\r\n                val = Number(val.replace('px', ''))\r\n            }\r\n        }\r\n    }\r\n\r\n    state[key] = val\r\n}\r\n\r\nfunction usePropsInner<Props extends { [k: string]: any },\r\n    Config extends Partial<{ [k in keyof Props]: FormatPropType | FormatPropType[] }>>\r\n(\r\n    props: Props,\r\n    config: Config\r\n) {\r\n\r\n    const configKeys = Object.keys(config)\r\n\r\n    const formatConfig: { [k in keyof Props]: FormatPropType[] } = configKeys.reduce((prev, key) => {\r\n        prev[key] = toArray(config[key])\r\n        return prev\r\n    }, {} as any)\r\n\r\n    const state = reactive((() =>\r\n        configKeys.reduce((prev: any, configKey) => {\r\n            prev[configKey] = null\r\n            const formatTypes = formatConfig[configKey]\r\n            /**\r\n             * 如果是Promise，则跳过处理，在watch immediate中初始化\r\n             * @author  韦胜健\r\n             * @date    2020/11/3 20:10\r\n             */\r\n            if (formatTypes.indexOf(FormatPropType.PROMISE) === -1) {\r\n                usePropsFormatter(prev, configKey, props[configKey], formatTypes)\r\n            }\r\n            return prev\r\n        }, {}) as { [k in Exclude<keyof Props, Exclude<keyof Props, keyof Config>>]: Props[k] })\r\n    ())\r\n\r\n    configKeys.forEach(configKey => {\r\n        watch(() => props[configKey], val => {\r\n            // @ts-ignore\r\n            usePropsFormatter(state, configKey, val, config[configKey])\r\n        }, {immediate: formatConfig[configKey].indexOf(FormatPropType.PROMISE) > -1})\r\n    })\r\n\r\n    return {\r\n        propsState: state,\r\n    }\r\n}\r\n\r\nexport const useProps = Object.assign(usePropsInner, FormatPropType)","import './color-sv-panel.scss'\r\nimport {designComponent} from \"../../../use/designComponent\";\r\nimport {useProps} from \"../../../use/useProps\";\r\nimport {computed, nextTick, reactive, watch} from 'vue';\r\nimport {hsv2rgb} from \"../utils/ColorUtils\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\n\r\nexport const PlColorSvPanel = designComponent({\r\n    name: 'pl-color-sv-panel',\r\n    props: {\r\n        hue: {type: Number, default: 360},                      // 色相\r\n        saturation: {type: Number},                             // 饱和度\r\n        modelValue: {type: Number},                             // 亮度\r\n\r\n        height: {type: [String, Number], default: 180},         // 面板高度\r\n        width: {type: [String, Number], default: 240},          // 面板宽度\r\n    },\r\n    emits: {\r\n        onChange: (val: any) => true,\r\n        onDblclick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {propsState} = useProps(props, {\r\n            height: useProps.NUMBER,\r\n            width: useProps.NUMBER,\r\n        })\r\n\r\n        const state = reactive({\r\n            val: props.modelValue == null ? null : 100 - Number(props.modelValue),\r\n            saturation: props.saturation,\r\n\r\n            startX: 0,\r\n            startY: 0,\r\n            tempSaturation: 0,\r\n            tempValue: 0,\r\n        })\r\n\r\n        const styles = computed(() => {\r\n            const color = hsv2rgb(props.hue, 100, 100)\r\n            return {\r\n                width: unit(propsState.width),\r\n                height: unit(propsState.height),\r\n                backgroundColor: `rgb(${color.r},${color.g},${color.b})`,\r\n            }\r\n        })\r\n\r\n        const thumbStyles = computed(() => {\r\n            let {val, saturation} = state\r\n            val = val == null ? 50 : val\r\n            saturation = saturation == null ? 50 : saturation\r\n\r\n            return {\r\n                transform: `translate3d(${saturation * (propsState.width as number) / 100}px,${val * (propsState.height as number) / 100}px,0)`,\r\n            }\r\n        })\r\n\r\n        const methods = {\r\n            updatePosition: (x: number, y: number, isMouseDown = true): void => {\r\n                const durX = Number((x / (propsState.width as number) * 100).toFixed(0));\r\n                const durY = Number((y / (propsState.height as number) * 100).toFixed(0));\r\n\r\n                state.saturation = (isMouseDown ? 0 : state.tempSaturation) + durX\r\n                state.val = (isMouseDown ? 0 : state.tempValue) + durY\r\n                state.saturation = Math.max(0, Math.min(100, state.saturation))\r\n                state.val = Math.max(0, Math.min(100, state.val))\r\n\r\n                emit.onChange({hue: props.hue, saturation: state.saturation, value: 100 - state.val})\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                document.body.addEventListener('mousemove', handler.mousemove)\r\n                document.body.addEventListener('mouseup', handler.mouseup)\r\n                disabledUserSelect()\r\n                methods.updatePosition(e.offsetX, e.offsetY)\r\n                state.startX = e.clientX\r\n                state.startY = e.clientY\r\n                state.tempSaturation = state.saturation as number\r\n                state.tempValue = state.val as number\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                methods.updatePosition(e.clientX - state.startX, e.clientY - state.startY, false)\r\n            },\r\n            mouseup: () => {\r\n                document.body.removeEventListener('mousemove', handler.mousemove)\r\n                document.body.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            },\r\n            dblclick: async (e: MouseEvent) => {\r\n                nextTick().then(() => emit.onDblclick(e))\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            if (val == null) {\r\n                state.val = null\r\n                return\r\n            }\r\n            if (state.val !== 100 - val) state.val = 100 - val\r\n        })\r\n        watch(() => props.saturation, (val) => {\r\n            if (val == null) {\r\n                state.saturation = undefined\r\n                return\r\n            }\r\n            if (state.saturation !== val) state.saturation = val\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-sv-panel\" style={styles.value as any} onMousedown={handler.mousedown} onDblclick={handler.dblclick}>\r\n                    <span class=\"pl-color-sv-thumb\" style={thumbStyles.value}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {Directive} from 'vue'\r\n\r\nexport interface ResizeDetectFuncParam {\r\n    width?: number\r\n    height?: number\r\n    oldWidth?: number\r\n    oldHeight?: number\r\n    el?: HTMLElement\r\n\r\n    [key: string]: any\r\n}\r\n\r\nexport interface ResizeDetectFunc {\r\n    (option: ResizeDetectFuncParam): void\r\n}\r\n\r\nexport default class ResizeDetector {\r\n\r\n    observer?: MutationObserver\r\n    width?: number\r\n    height?: number\r\n\r\n    constructor(public el: HTMLElement, public callback: ResizeDetectFunc) {\r\n\r\n        if (!el) {\r\n            console.error(`el is ${typeof el}`)\r\n            return\r\n        }\r\n\r\n        this.observer = new MutationObserver(this.detect)\r\n\r\n        this.observer.observe(el, {\r\n            childList: true,\r\n            subtree: true\r\n        })\r\n\r\n        // const {width, height} = el.getBoundingClientRect()\r\n        const {scrollHeight: height, scrollWidth: width} = el\r\n        this.width = width\r\n        this.height = height\r\n        this.runCallback({\r\n            width,\r\n            height,\r\n            el\r\n        })\r\n    }\r\n\r\n    detect = () => {\r\n        // const {width, height} = this.el.getBoundingClientRect()\r\n        const {scrollHeight: height, scrollWidth: width} = this.el\r\n        if (width === this.width && height === this.height) return\r\n        const ret = {} as ResizeDetectFuncParam\r\n        if (width !== this.width) {\r\n            ret.width = width\r\n            ret.oldWidth = this.width\r\n            this.width = width\r\n        }\r\n        if (height !== this.height) {\r\n            ret.height = height\r\n            ret.oldHeight = this.height\r\n            this.height = height\r\n        }\r\n        this.runCallback(ret)\r\n    }\r\n\r\n    runCallback(data: ResizeDetectFuncParam) {\r\n        Object.keys(data).forEach(key => {\r\n            if (data[key] != null && typeof data[key] === 'number') data[key] = Math.ceil(data[key])\r\n        })\r\n        this.callback(data)\r\n    }\r\n\r\n    destroy() {\r\n        if (!!this.observer) {\r\n            this.observer.disconnect();\r\n            this.observer = undefined\r\n        }\r\n    }\r\n}\r\n\r\nexport const ResizeDetectorDirective: Directive = {\r\n    mounted(el: any, binding: any, vnode: any) {\r\n        el.__resizedetextor__ = new ResizeDetector(el, (data) => binding.value(data))\r\n    },\r\n    beforeUnmount(el: any) {\r\n        (el.__resizedetextor__ as ResizeDetector).destroy()\r\n        delete el.__resizedetextor__\r\n    },\r\n}\r\n\r\n","import {designComponent} from \"../../use/designComponent\";\r\nimport {PlScroll} from './scroll'\r\nimport {computed, reactive, resolveDirective, withDirectives} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\n\r\nexport const VerticalScrollbar = designComponent({\r\n    props: {\r\n        tooltip: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const scroll = PlScroll.use.inject()\r\n\r\n        const dragState = {\r\n            top: 0,\r\n            clientY: 0,\r\n        }\r\n\r\n        const state = reactive({\r\n            scrollTop: 0,\r\n        })\r\n\r\n        const height = computed(() => {\r\n            return scroll.state.contentHeight > scroll.state.hostHeight ?\r\n                (scroll.state.hostHeight * scroll.state.hostHeight / scroll.state.contentHeight)\r\n                : 0\r\n        })\r\n        const top = computed(() => {\r\n            return (scroll.state.hostHeight - height.value) * state.scrollTop / (scroll.state.contentHeight - scroll.state.hostHeight)\r\n        })\r\n\r\n        const styles = useStyles(() => {\r\n            return {\r\n                height: `${height.value}px`,\r\n                width: `${scroll.targetScrollbarSize.value}px`,\r\n                top: `${top.value}px`,\r\n                backgroundColor: scroll.props.scrollbarColor,\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            onScroll: (e: Event) => {\r\n                state.scrollTop = (e.target as HTMLElement).scrollTop\r\n            },\r\n            onMousedown: (e: MouseEvent) => {\r\n                scroll.freezeState.isDragging = true\r\n                dragState.top = top.value\r\n                dragState.clientY = e.clientY\r\n                document.addEventListener('mousemove', handler.onMousemove)\r\n                document.addEventListener('mouseup', handler.onMouseup)\r\n                disabledUserSelect()\r\n            },\r\n            onMousemove: (e: MouseEvent) => {\r\n                let deltaY = e.clientY - dragState.clientY\r\n                let top = dragState.top + deltaY\r\n                let scrollTop = top * (scroll.state.contentHeight - scroll.state.hostHeight) / (scroll.state.hostHeight - height.value)\r\n                scrollTop = Math.max(0, Math.min(scrollTop, scroll.state.contentHeight - scroll.state.hostHeight))\r\n                if (!scroll.props.scrollAfterDragEnd) {\r\n                    scroll.refs.wrapper.scrollTop = scrollTop\r\n                } else {\r\n                    /*滚动条发生位移，但是内容scrollTop暂时不变*/\r\n                    state.scrollTop = scrollTop\r\n                }\r\n            },\r\n            onMouseup: (e: MouseEvent) => {\r\n                scroll.freezeState.isDragging = false\r\n                document.removeEventListener('mousemove', handler.onMousemove)\r\n                document.removeEventListener('mouseup', handler.onMouseup)\r\n                enableUserSelect()\r\n\r\n                if (scroll.props.scrollAfterDragEnd) {\r\n                    let deltaY = e.clientY - dragState.clientY\r\n                    let top = dragState.top + deltaY\r\n                    scroll.refs.wrapper.scrollTop = top * (scroll.state.contentHeight - scroll.state.hostHeight) / (scroll.state.hostHeight - height.value)\r\n                }\r\n            },\r\n        }\r\n\r\n        scroll.on.onScroll(handler.onScroll)\r\n\r\n        return {\r\n            render: () => {\r\n\r\n                let content = <div class=\"pl-vertical-scrollbar\" style={styles.value} onMousedown={handler.onMousedown}/> as any\r\n                if (!!props.tooltip) {\r\n                    const TooltipDirective = resolveDirective('tooltip')\r\n                    if (!!TooltipDirective) {\r\n                        content = withDirectives(content, [[TooltipDirective, props.tooltip]])\r\n                    }\r\n                }\r\n\r\n                return (\r\n                    <div class=\"pl-vertical-scrollbar-wrapper\">\r\n                        {content}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {reactive, computed, withDirectives, resolveDirective} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport {PlScroll} from \"./scroll\";\r\n\r\nexport const HorizontalScrollbar = designComponent({\r\n    props: {\r\n        tooltip: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const dragState = {\r\n            left: 0,\r\n            clientX: 0,\r\n        }\r\n\r\n        const scroll = PlScroll.use.inject()\r\n\r\n        const state = reactive({\r\n            scrollLeft: 0,\r\n        })\r\n\r\n        const width = computed(() => {\r\n            return scroll.state.contentWidth > scroll.state.hostWidth ? (scroll.state.hostWidth * scroll.state.hostWidth) / scroll.state.contentWidth : 0\r\n        })\r\n        const left = computed(() => {\r\n            return (scroll.state.hostWidth - width.value) * state.scrollLeft / (scroll.state.contentWidth - scroll.state.hostWidth)\r\n        })\r\n        const styles = useStyles(() => ({\r\n            height: `${scroll.targetScrollbarSize.value}px`,\r\n            width: `${width.value}px`,\r\n            left: `${left.value}px`,\r\n            backgroundColor: scroll.props.scrollbarColor,\r\n        }))\r\n\r\n        const handler = {\r\n            onScroll: (e: Event) => {\r\n                state.scrollLeft = (e.target as HTMLElement).scrollLeft\r\n            },\r\n            onMousedown: (e: MouseEvent) => {\r\n                scroll.freezeState.isDragging = true\r\n                dragState.left = left.value\r\n                dragState.clientX = e.clientX\r\n                document.addEventListener('mousemove', handler.onMousemove)\r\n                document.addEventListener('mouseup', handler.onMouseup)\r\n                disabledUserSelect()\r\n            },\r\n            onMousemove: (e: MouseEvent) => {\r\n                let deltaX = e.clientX - dragState.clientX\r\n                const left = dragState.left + deltaX\r\n                let scrollLeft = left * (scroll.state.contentWidth - scroll.state.hostWidth) / (scroll.state.hostWidth - width.value)\r\n                scrollLeft = Math.max(0, Math.min(scrollLeft, scroll.state.contentWidth - scroll.state.hostWidth))\r\n                if (!scroll.props.scrollAfterDragEnd) {\r\n                    scroll.refs.wrapper.scrollLeft = scrollLeft\r\n                } else {\r\n                    state.scrollLeft = scrollLeft\r\n                }\r\n            },\r\n            onMouseup: (e: MouseEvent) => {\r\n                scroll.freezeState.isDragging = false\r\n                document.removeEventListener('mousemove', handler.onMousemove)\r\n                document.removeEventListener('mouseup', handler.onMouseup)\r\n                enableUserSelect()\r\n\r\n                if (scroll.props.scrollAfterDragEnd) {\r\n                    let deltaX = e.clientX - dragState.clientX\r\n                    const left = dragState.left + deltaX\r\n                    scroll.refs.wrapper.scrollLeft = left * (scroll.state.contentWidth - scroll.state.hostWidth) / (scroll.state.hostWidth - width.value)\r\n                }\r\n            },\r\n        }\r\n\r\n        scroll.on.onScroll(handler.onScroll)\r\n\r\n        return {\r\n            render: () => {\r\n                let content = <div class=\"pl-horizontal-scrollbar\" style={styles.value} onMousedown={handler.onMousedown}/> as any\r\n                if (!!props.tooltip) {\r\n                    const TooltipDirective = resolveDirective('tooltip')\r\n                    if (!!TooltipDirective) {\r\n                        content = withDirectives(content, [[TooltipDirective, props.tooltip]])\r\n                    }\r\n                }\r\n                return (\r\n                    <div class=\"pl-horizontal-scrollbar-wrapper\">\r\n                        {content}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useMounted} from \"../../use/useMounted\";\r\nimport {computed, nextTick, onBeforeUnmount, onMounted, reactive, watch} from 'vue';\r\nimport {throttle} from 'plain-utils/utils/throttle';\r\nimport {ResizeDetectFuncParam, ResizeDetectorDirective} from \"../../plugins/ResizeDetector\";\r\nimport Popper from '../popper'\r\nimport './scroll.scss'\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {VerticalScrollbar} from \"./vertical-scrollbar\";\r\nimport {HorizontalScrollbar} from \"./horizontal-scrollbar\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\n\r\nexport const enum PLAIN_SCROLL_VERTICAL_POSITION {\r\n    top = 'top',\r\n    center = 'center',\r\n    bottom = 'bottom'\r\n}\r\n\r\nexport const PlScroll = designComponent({\r\n    name: 'pl-scroll',\r\n    directives: {resize: ResizeDetectorDirective},\r\n    props: {\r\n        refreshState: {},                                                                               // 监听改属性，以便自动执行refresh刷新\r\n        scrollbarSize: {type: Number},                                                                  // 滚动条大小\r\n        scrollbarColor: {type: String, default: 'rgba(144,147,153,.3)'},                                // 滚动条颜色\r\n        scrollX: {type: Boolean},                                                                       // 可以横向滚动\r\n        scrollY: {type: Boolean, default: true},                                                        // 可以纵向滚动\r\n        hideScrollbar: {type: Boolean},                                                                 // 隐藏滚动条\r\n        alwaysShowScrollbar: {type: Boolean},                                                           // 一直显示滚动条\r\n        fitContentWidth: {type: Boolean},                                                               // 适配内容宽度\r\n        fitContentHeight: {type: Boolean},                                                              // 适配内容高度\r\n        fitHostWidth: {type: Boolean},                                                                  // 适配容器宽度\r\n        fitHostHeight: {type: Boolean},                                                                 // 适配容器高度\r\n        topThreshold: {type: Number, default: 20},                                                      // 距离顶部多少距离派发滚动到顶部事件\r\n        bottomThreshold: {type: Number, default: 20},                                                   // 距离底部多少距离派发滚动到底部事件\r\n        autoScrollSpeed: {type: Number, default: 400},                                                  // 自动滚动的时候的速度，每秒钟滚动的距离\r\n        scrollAfterDragEnd: {type: Boolean,},                                                           // 是否拖拽结束后才刷新滚动位置\r\n        disableListTransition: {type: Boolean,},                                                        // 是否股弄懂的时候禁用pl-list的队列动画\r\n        horizontalScrollbarTooltip: {type: String},                                                     // 横向滚动条tooltip显示文本\r\n        verticalScrollbarTooltip: {type: String},                                                       // 纵向滚动条tooltip显示文本\r\n    },\r\n    emits: {\r\n        onScroll: (e: Event) => true,\r\n        onVerticalScrollTop: (e: Event) => true,\r\n        onVerticalScrollBottom: (e: Event) => true,\r\n        onVerticalScrollCenter: (e: Event) => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit, on, off}}) {\r\n\r\n        const {slots} = useSlots(['content'])\r\n\r\n        /*---------------------------------------ref-------------------------------------------*/\r\n\r\n        const {refs} = useRefs({\r\n            host: HTMLDivElement,\r\n            wrapper: HTMLDivElement,\r\n            content: HTMLDivElement,\r\n        })\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const mounted = useMounted()\r\n        const popper = Popper.use.inject(null)\r\n        /*非响应式状态*/\r\n        const freezeState = {\r\n            verticalPosition: PLAIN_SCROLL_VERTICAL_POSITION.top,               // 当前滚动纵向位置，top，center，right\r\n            cancelAnimate: null as null | number,                               // 自动滚动动画计时器\r\n            wrapperScrollTop: 0,                                                // 容器 scrollTop\r\n            wrapperScrollLeft: 0,                                               // 容器 scrollLeft\r\n            emitScroll: true,                                                   // 当前是否派发scroll事件\r\n\r\n            _isDragging: false,\r\n            get isDragging() {\r\n                return this._isDragging\r\n            },\r\n            set isDragging(val: boolean) {\r\n                this._isDragging = val\r\n                if (val) {\r\n                    refs.host.setAttribute('is-dragging', '')\r\n                } else {\r\n                    refs.host.removeAttribute('is-dragging')\r\n                }\r\n            },\r\n        }\r\n        const state = reactive({\r\n            contentWidth: 0,                                                    // 内容宽度\r\n            contentHeight: 0,                                                   // 内容高度\r\n            hostWidth: 0,                                                       // 容器宽度\r\n            hostHeight: 0,                                                      // 容器高度\r\n        })\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        const targetScrollbarSize = computed(() => {\r\n            if (!props.scrollX) {\r\n                return props.scrollbarSize || 6\r\n            } else {\r\n                return props.scrollbarSize || 9\r\n            }\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            `pl-scroll`,\r\n            {\r\n                'pl-scroll-always-show-scroll-bar': props.alwaysShowScrollbar,\r\n            }\r\n        ])\r\n\r\n        const hostStyles = useStyles(style => {\r\n            if (!mounted.value) return style\r\n            if (props.fitContentHeight) {\r\n                style.height = `${state.contentHeight}px`\r\n            }\r\n            return style\r\n        })\r\n\r\n        const wrapperStyles = useStyles(style => {\r\n            if (!mounted.value) return style\r\n            if (props.fitContentHeight) {\r\n                style.height = `${state.contentHeight + 17}px`\r\n            }\r\n            return style\r\n        })\r\n\r\n        const contentStyles = useStyles(style => {\r\n            if (!mounted.value) return style\r\n            if (!props.scrollX) {\r\n                style.width = props.fitContentWidth && state.contentWidth > 0 ? `${state.contentWidth}px` : `100%`;\r\n                style.overflowX = 'hidden'\r\n            }\r\n\r\n            if (!props.scrollY) {\r\n                style.height = props.fitContentHeight && state.contentHeight > 0 ? `${state.contentHeight}px` : `100%`;\r\n                style.overflowY = 'hidden'\r\n            }\r\n\r\n            if (props.fitHostHeight) {\r\n                style.height = '100%'\r\n            }\r\n            if (props.fitHostWidth) {\r\n                style.width = '100%'\r\n            }\r\n            if (props.fitContentWidth) {\r\n                style.width = `${state.contentWidth}px`\r\n            }\r\n            if (props.fitContentHeight) {\r\n                style.height = `${state.contentHeight}px`\r\n            }\r\n\r\n            return style\r\n        })\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n\r\n        const methods = {\r\n            refresh: async () => {\r\n                await nextTick()\r\n\r\n                const {scrollWidth: width1, scrollHeight: height1} = refs.content\r\n                handler.contentResize({\r\n                    width: Math.ceil(width1),\r\n                    height: Math.ceil(height1),\r\n                })\r\n\r\n                const {scrollWidth: width2, scrollHeight: height2} = refs.host\r\n                handler.hostResize({\r\n                    width: Math.ceil(width2),\r\n                    height: Math.ceil(height2),\r\n                })\r\n            },\r\n            /**\r\n             * 滚动到指定位置\r\n             * @author  韦胜健\r\n             * @date    2020/12/7 12:20\r\n             * @param   point\r\n             * @param   point.x             // 滚动scrollLeft值\r\n             * @param   point.y             // 滚动scrollTop值\r\n             * @param   configOrTime        // number|{ time?: number, noEmitScroll?: boolean }\r\n             * @param   configOrTime.time   // 滚动的时间\r\n             * @param   configOrTime.noEmitScroll //滚动期间不派发scroll事件\r\n             */\r\n            async scroll(point: { x?: number, y?: number }, configOrTime?: number | { time?: number, noEmitScroll?: boolean }) {\r\n\r\n                if (!refs.wrapper) return\r\n\r\n                const config = typeof configOrTime === \"number\" ? {time: configOrTime} : configOrTime\r\n                const {time, noEmitScroll} = (config || {})\r\n\r\n                // if (point.x != null) this.wrapper!.scrollLeft = point.x\r\n                // if (point.y != null) this.wrapper!.scrollTop = point.y\r\n\r\n                if (noEmitScroll) {\r\n                    freezeState.emitScroll = false\r\n                }\r\n                const done = () => noEmitScroll && (freezeState.emitScroll = true)\r\n\r\n                if (!time) {\r\n                    if (point.x != null) refs.wrapper!.scrollLeft = point.x\r\n                    if (point.y != null) refs.wrapper!.scrollTop = point.y\r\n                    await delay(23)\r\n                    done()\r\n                } else {\r\n\r\n                    if (!!freezeState.cancelAnimate) {\r\n                        cancelAnimationFrame(freezeState.cancelAnimate)\r\n                        freezeState.cancelAnimate = null\r\n                    }\r\n\r\n                    let ny = refs.wrapper!.scrollTop\r\n                    let nx = refs.wrapper!.scrollLeft\r\n\r\n                    let ky = (point.y! - ny) / time\r\n                    let kx = (point.x! - nx) / time\r\n\r\n                    let startTime = Date.now()\r\n                    const run = async () => {\r\n                        let nowTime = Date.now()\r\n                        let delta = nowTime - startTime\r\n                        let top;\r\n                        let left;\r\n\r\n                        if (delta >= time) {\r\n                            freezeState.cancelAnimate = null\r\n                            top = time * ky + ny\r\n                            left = time * kx + nx\r\n\r\n                            if (!!refs.wrapper) {\r\n                                refs.wrapper.scrollTop = top\r\n                                refs.wrapper.scrollLeft = left\r\n                                await delay(23)\r\n                                done()\r\n                            }\r\n                        } else {\r\n                            top = delta * ky + ny\r\n                            left = delta * kx + nx\r\n\r\n                            if (!!refs.wrapper) {\r\n                                refs.wrapper.scrollTop = top\r\n                                refs.wrapper.scrollLeft = left\r\n                            }\r\n                            freezeState.cancelAnimate = requestAnimationFrame(run)\r\n                        }\r\n                    }\r\n                    run()\r\n                }\r\n            },\r\n            scrollTop(scrollTop: number, time?: number) {\r\n                methods.scroll({y: scrollTop}, {time})\r\n            },\r\n            scrollLeft(scrollLeft: number, time?: number) {\r\n                methods.scroll({x: scrollLeft}, {time})\r\n            },\r\n            scrollEnd(point: { x: boolean, y?: boolean } = {x: true, y: true}) {\r\n                methods.scroll({\r\n                    x: point.x ? refs.wrapper!.scrollWidth : undefined,\r\n                    y: point.y ? refs.wrapper!.scrollHeight : undefined,\r\n                })\r\n            },\r\n            autoScrollTop() {\r\n                const {hostHeight, contentHeight} = state\r\n                const {wrapperScrollTop} = freezeState\r\n                const scrollHeight = contentHeight - hostHeight\r\n                if (scrollHeight <= 0) {\r\n                    return\r\n                }\r\n                const height = wrapperScrollTop\r\n                if (height <= 0) {\r\n                    return\r\n                }\r\n                const duration = (height / props.autoScrollSpeed) * 1000\r\n                methods.scrollTop(0, duration)\r\n            },\r\n            autoScrollBottom() {\r\n                const {hostHeight, contentHeight} = state\r\n                const {wrapperScrollTop} = freezeState\r\n                const scrollHeight = contentHeight - hostHeight\r\n                if (scrollHeight <= 0) {\r\n                    return\r\n                }\r\n                const height = scrollHeight - wrapperScrollTop\r\n                if (height <= 0) {\r\n                    return\r\n                }\r\n                const duration = (height / props.autoScrollSpeed) * 1000\r\n                methods.scrollTop(scrollHeight, duration)\r\n            },\r\n            autoScrollLeft() {\r\n                const {hostWidth, contentWidth} = state\r\n                const {wrapperScrollLeft} = freezeState\r\n                const scrollWidth = contentWidth - hostWidth\r\n                if (scrollWidth <= 0) {\r\n                    return\r\n                }\r\n                const width = wrapperScrollLeft\r\n                if (width <= 0) {\r\n                    return\r\n                }\r\n                const duration = (width / props.autoScrollSpeed) * 1000\r\n                methods.scrollLeft(0, duration)\r\n            },\r\n            autoScrollRight() {\r\n                const {hostWidth, contentWidth} = state\r\n                const {wrapperScrollLeft} = freezeState\r\n                const scrollWidth = contentWidth - hostWidth\r\n                if (scrollWidth <= 0) {\r\n                    return\r\n                }\r\n                const width = scrollWidth - wrapperScrollLeft\r\n                if (width <= 0) {\r\n                    return\r\n                }\r\n                const duration = (width / props.autoScrollSpeed) * 1000\r\n                methods.scrollLeft(scrollWidth, duration)\r\n            },\r\n            stopAutoScroll() {\r\n                if (!!freezeState.cancelAnimate) {\r\n                    cancelAnimationFrame(freezeState.cancelAnimate)\r\n                    freezeState.cancelAnimate = null\r\n                }\r\n            },\r\n            /**\r\n             * 禁用pl-list的队列动画，300ms后恢复正常\r\n             * @author  韦胜健\r\n             * @date    2020/12/15 10:16\r\n             */\r\n            disableListTransition: (() => {\r\n                const disabledQueueAnimation = debounce(() => refs.host.removeAttribute('virtual-scrolling'), 300, true)\r\n                return () => {\r\n                    refs.host.setAttribute('virtual-scrolling', '')\r\n                    disabledQueueAnimation();\r\n                }\r\n            })(),\r\n        }\r\n\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            windowResize: throttle(() => methods.refresh(), 500),\r\n            popperOpen: () => methods.refresh(),\r\n            popperShow: async () => {\r\n                await nextTick()\r\n                methods.scroll({y: 0})\r\n            },\r\n            contentResize: (data: ResizeDetectFuncParam) => {\r\n                if (data.width != null) state.contentWidth = data.width\r\n                if (data.height != null) state.contentHeight = data.height\r\n            },\r\n            hostResize: (data: ResizeDetectFuncParam) => {\r\n                if (data.width != null) state.hostWidth = data.width - 16\r\n                if (data.height != null) state.hostHeight = data.height - 16\r\n            },\r\n            wrapperMousewheel: (e: WheelEvent) => {\r\n                if (!!freezeState.cancelAnimate) {\r\n                    cancelAnimationFrame(freezeState.cancelAnimate)\r\n                    freezeState.cancelAnimate = null\r\n                }\r\n            },\r\n            wrapperScroll: (e: Event) => {\r\n                const target = e.target as HTMLElement\r\n                freezeState.wrapperScrollTop = target.scrollTop\r\n                freezeState.wrapperScrollLeft = target.scrollLeft\r\n\r\n                if (freezeState.emitScroll) {\r\n                    emit.onScroll(e)\r\n                }\r\n\r\n                if (freezeState.verticalPosition === PLAIN_SCROLL_VERTICAL_POSITION.top && freezeState.wrapperScrollTop > props.topThreshold!) {\r\n                    /*进入center*/\r\n                    emit.onVerticalScrollCenter(e)\r\n                    freezeState.verticalPosition = PLAIN_SCROLL_VERTICAL_POSITION.center\r\n                } else if (freezeState.verticalPosition === PLAIN_SCROLL_VERTICAL_POSITION.center) {\r\n                    // console.log(this.contentHeight - this.hostHeight - this.contentWrapperScrollTop, this.bottomScrollDuration)\r\n                    if (freezeState.wrapperScrollTop < props.topThreshold!) {\r\n                        /*进入top*/\r\n                        emit.onVerticalScrollTop(e)\r\n                        freezeState.verticalPosition = PLAIN_SCROLL_VERTICAL_POSITION.top\r\n                    } else if (state.contentHeight - state.hostHeight - freezeState.wrapperScrollTop < props.bottomThreshold!) {\r\n                        /*进入bottom*/\r\n                        emit.onVerticalScrollBottom(e)\r\n                        freezeState.verticalPosition = PLAIN_SCROLL_VERTICAL_POSITION.bottom\r\n                    }\r\n\r\n                } else if (freezeState.verticalPosition === PLAIN_SCROLL_VERTICAL_POSITION.bottom) {\r\n                    if (state.contentHeight - state.hostHeight - freezeState.wrapperScrollTop > props.bottomThreshold!) {\r\n                        /*进入center*/\r\n                        emit.onVerticalScrollCenter(e)\r\n                        freezeState.verticalPosition = PLAIN_SCROLL_VERTICAL_POSITION.center\r\n                    }\r\n                }\r\n\r\n                if (props.disableListTransition) {\r\n                    methods.disableListTransition()\r\n                }\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------lifecycle-------------------------------------------*/\r\n\r\n        onMounted(() => {\r\n            window.addEventListener('resize', handler.windowResize)\r\n            if (!!popper) {\r\n                popper.event.on.onOpen(handler.popperOpen)\r\n                popper.event.on.onShow(handler.popperShow)\r\n            }\r\n        })\r\n\r\n        onBeforeUnmount(() => {\r\n            window.removeEventListener('resize', handler.windowResize)\r\n            if (!!popper) {\r\n                popper.event.off.onOpen(handler.popperOpen)\r\n                popper.event.off.onShow(handler.popperShow)\r\n            }\r\n        })\r\n\r\n        watch(() => props.refreshState, methods.refresh)\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n                on, off,\r\n                targetScrollbarSize,\r\n                refs,\r\n                slots,\r\n                handler,\r\n                methods,\r\n                state,\r\n                freezeState,\r\n            },\r\n            render: () => (\r\n                <div ref=\"host\"\r\n                     class={classes.value}\r\n                     v-resize={handler.hostResize}\r\n                     style={hostStyles.value as any}>\r\n                    <div ref=\"wrapper\"\r\n                         class=\"pl-scroll-wrapper\"\r\n                         style={wrapperStyles.value as any}\r\n                         onScroll={handler.wrapperScroll}\r\n                         {...{onMousewheel: handler.wrapperMousewheel}}>\r\n                        <div ref=\"content\"\r\n                             class=\"pl-scroll-content\"\r\n                             style={contentStyles.value as any}\r\n                             v-resize={handler.contentResize}>\r\n                            {slots.default()}\r\n                        </div>\r\n                        {slots.content()}\r\n                    </div>\r\n\r\n                    {\r\n                        !props.hideScrollbar && props.scrollY && (\r\n                            <div class=\"pl-vertical-scrollbar-wrapper\">\r\n                                {<VerticalScrollbar tooltip={props.verticalScrollbarTooltip}/>}\r\n                            </div>\r\n                        )\r\n                    }\r\n                    {\r\n                        !props.hideScrollbar && props.scrollX && (\r\n                            <div class=\"pl-horizontal-scrollbar-wrapper\">\r\n                                {<HorizontalScrollbar tooltip={props.horizontalScrollbarTooltip}/>}\r\n                            </div>\r\n                        )\r\n                    }\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport type PlainScroll = typeof PlScroll.use.class","import {designComponent} from \"../../use/designComponent\";\r\nimport {MessageServiceFormatOption} from \"./index\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {PropType} from 'vue';\r\nimport Icon from '../icon'\r\nimport {createEventListener} from \"../../utils/createEventListener\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-message',\r\n    props: {\r\n        option: {type: Object as PropType<MessageServiceFormatOption>, required: true}\r\n    },\r\n    emits: {\r\n        onClose: () => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const classes = useClass(() => [\r\n            'pl-message',\r\n            `pl-message-status-${props.option.status}`\r\n        ])\r\n        const styles = {zIndex: nextIndex()}\r\n\r\n        const close = () => {\r\n            emit.onClose()\r\n            !!props.option.onClose && props.option.onClose()\r\n        }\r\n\r\n        props.option.close = close\r\n\r\n        const handler = {\r\n            onClick: (e: MouseEvent) => {\r\n                !!props.option.onClick && props.option.onClick(e)\r\n            },\r\n            onClickCloseIcon: (e: MouseEvent) => {\r\n                close()\r\n            },\r\n            onMouseenter: () => {\r\n                if (!!closeTimer) {\r\n                    clearTimeout(closeTimer)\r\n                }\r\n            },\r\n            onMouseleave: () => {\r\n                !!props.option.time && (closeTimer = setTimeout(close, props.option.time))\r\n            }\r\n        }\r\n\r\n        let closeTimer: number | null = null\r\n        !!props.option.time && (closeTimer = setTimeout(close, props.option.time))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}\r\n                     style={styles}\r\n                     onMouseenter={handler.onMouseenter}\r\n                     onMouseleave={handler.onMouseleave}\r\n                     onClick={handler.onClick}>\r\n                    {!!props.option.icon && <PlIcon icon={props.option.icon}/>}\r\n                    <div class=\"pl-message-content\">{!!props.option.render ? props.option.render() : props.option.message}</div>\r\n                    <Icon icon=\"el-icon-close\" class=\"pl-message-close\" {...createEventListener({onClick: handler.onClickCloseIcon})}/>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n    ,\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {MessageServiceFormatOption} from \"./index\";\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport {nextTick, reactive} from 'vue';\r\nimport Message from \"./message\";\r\nimport List from '../list'\r\nimport Item from '../item'\r\n\r\nexport default designComponent({\r\n    name: 'pl-message-container',\r\n    props: {\r\n        horizontal: {type: String, required: true},\r\n        vertical: {type: String, required: true},\r\n        duration: {type: String, default: \"30px\"},\r\n    },\r\n    setup({props}) {\r\n        const classes = useClass(() => [\r\n            'pl-message-container',\r\n            `pl-message-container-${props.horizontal}-${props.vertical}`\r\n        ])\r\n        const state = reactive({\r\n            options: [] as MessageServiceFormatOption[]\r\n        })\r\n        const refs = useRefList<{ option: MessageServiceFormatOption }>()\r\n        const styles = {padding: props.duration}\r\n\r\n        const utils = {\r\n            closeMessage: (i: number) => {\r\n                state.options.splice(i, 1)\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n                getMessage: async (option: MessageServiceFormatOption) => {\r\n                    state.options.push(option)\r\n                    await nextTick()\r\n                    const messages = refs.filter(Boolean)\r\n                    for (let i = 0; i < messages.length; i++) {\r\n                        const message = messages[i];\r\n                        if (message.option === option) {\r\n                            return message\r\n                        }\r\n                    }\r\n                    return null\r\n                },\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles}>\r\n                    <List direction=\"top\">\r\n                        <Item key=\"placeholder\"/>\r\n                        {state.options.map((option, index) =>\r\n                            <Item key={option.id}>\r\n                                <Message option={option}\r\n                                         ref={(proxy: any) => refs[index] = proxy}\r\n                                         {...{onClose: () => utils.closeMessage(index)}}\r\n                                />\r\n                            </Item>\r\n                        )}\r\n                    </List>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {App} from \"vue\";\r\nimport {RequireFormat, VNodeChild} from \"../../shims\";\r\nimport {registryRootService} from \"../root/registryRootService\";\r\nimport ManagerComponent from './message-manager'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport './message.scss'\r\nimport Icon from '../icon'\r\nimport List from '../list'\r\nimport Item from '../item'\r\nimport {getServiceWithoutContext} from \"../../utils/getServiceWithoutContext\";\r\n\r\n/**\r\n * 消息位置\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:20\r\n */\r\nexport enum MessageServiceDirection {\r\n    start = 'start',\r\n    center = 'center',\r\n    end = 'end',\r\n}\r\n\r\n/**\r\n * 消息状态\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:20\r\n */\r\nexport type MessageServiceStatus = \"lite\" | \"dark\" | \"primary\" | \"success\" | \"warn\" | \"error\" | \"info\"\r\n\r\n/**\r\n * 消息配置对象类型\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:20\r\n */\r\nexport interface MessageServiceOption {\r\n    message?: string,                                                                               // 消息文本\r\n\r\n    horizontal?: MessageServiceDirection,                                                           // 横向位置\r\n    vertical?: MessageServiceDirection,                                                             // 纵向位置\r\n    time?: number | null,                                                                           // 显示的时间\r\n    status?: MessageServiceStatus,                                                                  // 消息状态\r\n    render?: () => VNodeChild,                                                                      // 自定义内容渲染函数\r\n    icon?: string | null,                                                                           // 显示的图标\r\n    onClick?: (e: MouseEvent) => void,                                                              // 自定义点击处理动作\r\n    onClose?: () => void,                                                                           // 处理消息关闭之后的动作\r\n}\r\n\r\n/**\r\n * 消息配置对象类型格式化后的类型\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:20\r\n */\r\nexport type MessageServiceFormatOption = RequireFormat<MessageServiceOption, 'horizontal' | 'vertical' | 'time' | 'status'> & {\r\n    id: string,\r\n    close: () => void,\r\n}\r\n\r\n/**\r\n * 格式化消息配置参数\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:21\r\n */\r\nconst formatOption = (() => {\r\n    let idCount = 0\r\n    return (option: MessageServiceOption): MessageServiceFormatOption => {\r\n        return Object.assign(option as MessageServiceFormatOption, {\r\n            id: `message_${idCount++}`,\r\n            close: () => null,\r\n            horizontal: option.horizontal || MessageServiceDirection.center,\r\n            vertical: option.vertical || MessageServiceDirection.start,\r\n            time: option.time === null ? null : (option.time || 3 * 1000),\r\n            status: option.status || 'dark'\r\n        })\r\n    }\r\n})()\r\n\r\n/**\r\n * 消息服务函数类型\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:21\r\n */\r\ninterface MessageServiceFunction {\r\n    (message: string | MessageServiceOption, option?: MessageServiceOption): void\r\n}\r\n\r\n/**\r\n * 消息服务对象类型\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:21\r\n */\r\nexport type MessageService = MessageServiceFunction & {\r\n    [k in MessageServiceStatus]: MessageServiceFunction\r\n}\r\n\r\n/**\r\n * 通过应用实例获取消息服务对象函数\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:22\r\n */\r\nconst getMessageService = registryRootService(\r\n    'message',\r\n    ManagerComponent,\r\n    (getManager) => {\r\n        const service: MessageServiceFunction = (message: string | MessageServiceOption, option?: MessageServiceOption) => {\r\n            let o = typeof message === \"object\" ? message : {message}\r\n            if (!!option) {\r\n                Object.assign(o, option)\r\n            }\r\n            const fo = formatOption(o)\r\n            fo.horizontal.charAt(0)\r\n            getManager().then(manager => manager.getContainer(fo).then(container => container.getMessage(fo)))\r\n            return fo\r\n        };\r\n\r\n        return Object.assign(service, [\r\n            'lite',\r\n            'dark',\r\n            'primary',\r\n            'success',\r\n            'warn',\r\n            'error',\r\n            'info',\r\n        ].reduce((prev: any, status: any) => {\r\n            prev[status] = function (message: string | MessageServiceOption, option?: MessageServiceOption) {\r\n                const o = typeof message === \"object\" ? message : {message}\r\n                if (!!option) {\r\n                    Object.assign(o, option)\r\n                }\r\n                o.status = status\r\n                return service(o)\r\n            }\r\n            return prev\r\n        }, {})) as MessageService\r\n    }\r\n)\r\n\r\nexport const $$message = getServiceWithoutContext(getMessageService)\r\n\r\nexport default createComponentPlugin({\r\n    ...ManagerComponent,\r\n    getMessageService,\r\n}, {\r\n    plugins: [\r\n        Icon, List, Item,\r\n        {\r\n            install: (app: App) => {\r\n                app.mixin({\r\n                    computed: {\r\n                        $message() {\r\n                            return getMessageService(this)\r\n                        },\r\n                    },\r\n                })\r\n            }\r\n        }\r\n    ]\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {nextTick, reactive} from 'vue';\r\nimport {MessageServiceDirection} from \"./index\";\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport Container from './message-container'\r\n\r\nexport default designComponent({\r\n    name: 'pl-message-manager',\r\n    setup() {\r\n\r\n        const state = reactive({\r\n            containers: [\r\n                {\r\n                    horizontal: MessageServiceDirection.center,\r\n                    vertical: MessageServiceDirection.start,\r\n                }] as { horizontal: MessageServiceDirection, vertical: MessageServiceDirection }[]\r\n        })\r\n        const refs = useRefList<typeof Container.use.class>()\r\n\r\n        const getContainer = async (config: { horizontal: MessageServiceDirection, vertical: MessageServiceDirection }): Promise<typeof Container.use.class> => {\r\n            for (let i = 0; i < refs.length; i++) {\r\n                const ref = refs[i];\r\n                if (ref.props.horizontal === config.horizontal && ref.props.vertical === config.vertical) {\r\n                    return ref\r\n                }\r\n            }\r\n            state.containers.push(config);\r\n            await nextTick()\r\n            return getContainer(config)\r\n        }\r\n        return {\r\n            refer: {\r\n                name: 'I am message controller',\r\n                getContainer,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-message-manager\">\r\n                    {state.containers.map((container, index) =>\r\n                        <Container horizontal={container.horizontal}\r\n                                   vertical={container.vertical}\r\n                                   ref={(proxy: any) => refs[index] = proxy}/>)}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {StyleProperties} from '../shims';\r\nimport {computed} from 'vue';\r\n\r\nexport function useStyles(\r\n    getter: (styles: StyleProperties) => StyleProperties | void\r\n) {\r\n    return computed(() => {\r\n        const style = {}\r\n        return getter(style) || style\r\n    })\r\n}","export function toArray<T>(data: T | T[]): T[] {\r\n    return Array.isArray(data) ? data : [data]\r\n}","import {designComponent} from \"../../../use/designComponent\";\r\nimport {TimePublicProps} from \"./time-panel.utils\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {PlainDate} from \"../../../utils/PlainDate\";\r\nimport {computed} from 'vue';\r\nimport './time-range-panel.scss'\r\nimport {PlTimeBasePanel} from \"./time-base-panel\";\r\n\r\nexport enum TimeRangePanelType {\r\n    start = 'start',\r\n    end = 'end',\r\n}\r\n\r\nexport const PlTimeRangePanel= designComponent({\r\n    name: 'pl-time-range-panel',\r\n    props: {\r\n        start: {type: String},\r\n        end: {type: String},\r\n        ...TimePublicProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | undefined, type: TimeRangePanelType) => true,\r\n        onUpdateStart: (val?: string) => true,\r\n        onUpdateEnd: (val?: string) => true,\r\n        onMousedownStartPanel: (e: MouseEvent) => true,\r\n        onMousedownEndPanel: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const start = useModel(() => props.start, emit.onUpdateStart)\r\n        const end = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const formatData = computed(() => {\r\n            const {displayFormat, valueFormat} = props\r\n            return {\r\n                start: new PlainDate(start.value, displayFormat, valueFormat),\r\n                end: new PlainDate(end.value, displayFormat, valueFormat),\r\n                max: new PlainDate(props.max, displayFormat, valueFormat),\r\n                min: new PlainDate(props.min, displayFormat, valueFormat)\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            onStartChange: (value?: string) => {\r\n                start.value = value\r\n                emit.onUpdateModelValue(value, TimeRangePanelType.start)\r\n\r\n                const {end: endPd, start: startPd} = formatData.value\r\n\r\n                if (endPd.isNull || startPd.Hms! > endPd.Hms) {\r\n                    end.value = start.value\r\n                    emit.onUpdateModelValue(end.value, TimeRangePanelType.end)\r\n                }\r\n            },\r\n            onEndChange: (value?: string) => {\r\n                end.value = value\r\n                emit.onUpdateModelValue(value, TimeRangePanelType.end)\r\n                const {end: endPd, start: startPd} = formatData.value\r\n\r\n                if (startPd.isNull || endPd.Hms! < startPd.Hms) {\r\n                    start.value = end.value\r\n                    emit.onUpdateModelValue(start.value, TimeRangePanelType.start)\r\n                }\r\n            },\r\n        }\r\n\r\n        const binding = computed(() => {\r\n            const publicProps = Object.keys(TimePublicProps).reduce((ret: any, key) => {\r\n                ret[key] = (props as any)[key]\r\n                return ret\r\n            }, {})\r\n            const {max, min} = props\r\n            const publicBinding = {\r\n                ...publicProps,\r\n                max,\r\n                min,\r\n                disableChangeOnScroll: true,\r\n            }\r\n            return {\r\n                start: {\r\n                    ...publicBinding,\r\n                    modelValue: start.value,\r\n                    onChange: handler.onStartChange,\r\n                    onMousedown: emit.onMousedownStartPanel,\r\n                },\r\n                end: {\r\n                    ...publicBinding,\r\n                    modelValue: end.value,\r\n                    onChange: handler.onEndChange,\r\n                    onMousedown: emit.onMousedownEndPanel,\r\n                },\r\n            }\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-time-range-panel\">\r\n                    <PlTimeBasePanel {...binding.value.start}/>\r\n                    <PlTimeBasePanel {...binding.value.end}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {markRaw, PropType, reactive, watch, nextTick, onBeforeUnmount} from 'vue';\r\nimport {Page} from \"./NavigatorManager\";\r\nimport Nav from './nav'\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {SimpleFunction} from \"../../shims\";\r\n\r\nexport const NavPage = designComponent({\r\n    name: 'pl-nav-page',\r\n    props: {\r\n        page: {type: Object as PropType<Page>, required: true},\r\n        isLast: {type: Boolean, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement\r\n        })\r\n\r\n        const parent = Nav.use.inject()\r\n\r\n        const state = reactive({\r\n            PageComponent: null as any,\r\n            renderEl: false,\r\n        });\r\n\r\n        let unmountHandler: null | SimpleFunction = null;\r\n\r\n        (async () => {\r\n            const loader = await parent.props.nav.utils.getAppLoader(props.page.pageConfig)\r\n            if (!!loader) {\r\n                if ('getPage' in loader) {\r\n                    const Component = await loader.getPage(props.page.pageConfig)\r\n                    state.PageComponent = markRaw(Component)\r\n                } else {\r\n                    state.renderEl = true\r\n                    await nextTick()\r\n                    const mountData = await loader.mount(refs.el!, props.page.pageConfig)\r\n                    unmountHandler = () => loader.unmount(mountData)\r\n                }\r\n            }\r\n        })();\r\n\r\n        onBeforeUnmount(() => {\r\n            !!unmountHandler && unmountHandler()\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                const {PageComponent} = state\r\n                return (\r\n                    <div class=\"pl-nav-page\" v-show={props.isLast}>\r\n                        {state.renderEl && <div ref=\"el\"/>}\r\n                        {PageComponent && <PageComponent/>}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {PropType, provide, inject} from 'vue';\r\nimport {NavigatorManager, PageConfig, Stack} from \"./NavigatorManager\";\r\nimport {NavPage} from \"./nav-page\";\r\nimport Nav from \"./nav\";\r\n\r\nexport const PROVIDE_NAV_CONSTANT = '@@PROVIDE_NAV_CONSTANT'\r\n\r\nfunction provideNavPage({nav, stack}: { nav: NavigatorManager, stack: Stack }) {\r\n    const $nav = {\r\n        /*---------------------------------------tab methods-------------------------------------------*/\r\n        ...nav.tabMethods,\r\n        /*---------------------------------------path methods-------------------------------------------*/\r\n        /*push一个页面*/\r\n        push: (pageConfig: PageConfig) => {\r\n            return nav.pageMethods.push(stack, pageConfig)\r\n        },\r\n        /*pop一个页面*/\r\n        back: () => {\r\n            return nav.pageMethods.back(stack)\r\n        },\r\n        /*重定向到一个页面*/\r\n        redirect: () => {/*todo*/},\r\n        /*刷新页面*/\r\n        refresh: () => {/*todo*/},\r\n        /*开启/关闭页面的加载状态*/\r\n        loading: () => {/*todo*/},\r\n        /*获取当前页面信息*/\r\n        getCurrentPage: () => {/*todo*/},\r\n        /*监听事件*/\r\n        on: () => {/*todo*/},\r\n        /*解除监听事件*/\r\n        off: () => {/*todo*/},\r\n        /*监听一次事件*/\r\n        once: () => {/*todo*/},\r\n        /*派发事件*/\r\n        emit: () => {/*todo*/},\r\n    }\r\n    provide(PROVIDE_NAV_CONSTANT, $nav)\r\n    return $nav\r\n}\r\n\r\nexport function useNav() {\r\n    return inject(PROVIDE_NAV_CONSTANT) as ReturnType<typeof provideNavPage>\r\n}\r\n\r\nexport const NavStack = designComponent({\r\n    name: \"pl-nav-stack\",\r\n    props: {\r\n        stack: {type: Object as PropType<Stack>, required: true},\r\n    },\r\n    setup({props}) {\r\n        const parent = Nav.use.inject()\r\n        const provideNav = provideNavPage({stack: props.stack, nav: parent.props.nav})\r\n\r\n        return {\r\n            refer: {\r\n                provideNav,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-nav-stack\" v-show={props.stack.show}>\r\n                    {props.stack.pages.map((page, index) => {\r\n                        return (\r\n                            <NavPage\r\n                                key={page.id}\r\n                                page={page}\r\n                                isLast={index === props.stack.pages.length - 1}\r\n                            />\r\n                        )\r\n                    })}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlInput} from \"./input\";\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlInput)","import {designComponent} from \"../../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../../use/useEdit\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {computed, nextTick, onMounted, PropType} from 'vue';\r\nimport {zeroize} from \"plain-utils/string/zeroize\";\r\nimport {findOne} from \"plain-utils/object/findOne\";\r\nimport './time-base-column.scss'\r\nimport {useRefList} from \"../../../use/useRefList\";\r\nimport {PlScroll} from \"../../scroll/scroll\";\r\n\r\nconst size = 24;\r\n\r\nexport const PlTimeBaseColumn = designComponent({\r\n    name: 'pl-time-base-column',\r\n    props: {\r\n        ...EditProps,\r\n\r\n        layout: {type: String, default: 'h'},   // 模式，h：时，m：分，s：秒\r\n        modelValue: {required: true},// 当前值\r\n        max: {type: Number},                    // 最大值\r\n        min: {type: Number},                    // 最小值\r\n        custom: {type: Function as PropType<(layout: string) => number[]>},// 自定义选项函数\r\n        checkDisabled: Function,                // 用来判断选项是否禁用的函数\r\n        disableChangeOnScroll: {type: Boolean}, // 是否禁用在滚动的时候触发更新值动作\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number) => true,\r\n        onClickItem: (i: number) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {editComputed} = useEdit()\r\n\r\n        const {refs} = useRefs({scroll: PlScroll,})\r\n        const liList = useRefList<HTMLLIElement>()\r\n\r\n        const model = useModel(() => props.modelValue as any, event.emit.onUpdateModelValue, {onChange: () => nextTick().then(methods.resetPosition)})\r\n\r\n        const options = computed(() => {\r\n            if (!!props.custom) {\r\n                return props.custom(props.layout).map(item => zeroize(item, 2))\r\n            }\r\n            let count = props.layout === 'h' ? 24 : 60\r\n            let options: string[] = []\r\n            for (let i = 0; i < count; i++) {\r\n                options.push(zeroize(i, 2))\r\n            }\r\n            return options\r\n        })\r\n\r\n        const methods = {\r\n            resetPosition: () => {\r\n                let value = model.value || 0\r\n                let start = 0\r\n                let find = findOne(options.value, item => Number(item) == value, true) as { item: string, index: number }\r\n                if (!!find.item) {\r\n                    start = find.index\r\n                    refs.scroll!.methods.scroll({y: liList[start].offsetTop}, {noEmitScroll: true})\r\n                }\r\n            },\r\n        }\r\n\r\n        const utils = {\r\n            checkDisabled: (item: string | number) => {\r\n                item = Number(item)\r\n                if (editComputed.value.disabled) return true\r\n                if (!!props.checkDisabled && props.checkDisabled(item, props.layout)) return true\r\n\r\n                if (props.max != null && props.max < item) return true\r\n                if (props.min != null && props.min > item) return true\r\n                return false\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            clickItem: (item: string | number) => {\r\n                item = Number(item)\r\n                if (utils.checkDisabled(item)) {\r\n                    return\r\n                }\r\n                model.value = item\r\n                event.emit.onClickItem(item)\r\n                methods.resetPosition()\r\n            },\r\n            onScroll: (e: any) => {\r\n                if (props.disableChangeOnScroll) {\r\n                    return\r\n                }\r\n                let index = Math.max(0, Math.min(options.value.length - 1, Math.floor(e.target.scrollTop / size)))\r\n                const val = options.value[index] == null ? null : Number(options.value[index])\r\n                if (val != null && val !== model.value && !utils.checkDisabled(val)) {\r\n                    model.value = val\r\n                }\r\n            }\r\n        }\r\n\r\n        onMounted(methods.resetPosition)\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-time-base-column\">\r\n                    <PlScroll ref=\"scroll\" onScroll={handler.onScroll}>\r\n                        <ul class=\"pl-time-base-column-list\">\r\n                            {[1, 2, 3].map((item, index) => (\r\n                                <li\r\n                                    ref={val => liList[index] = val as any}\r\n                                    class=\"pl-time-base-column-item\"\r\n                                    key={-item}/>)\r\n                            )}\r\n\r\n                            {options.value.map((item, index) => (\r\n                                <li{...{\r\n                                    class: [\r\n                                        'pl-time-base-column-item',\r\n                                        'pl-time-base-column-option-item',\r\n                                        {\r\n                                            'pl-time-base-column-item-current': model.value != null && model.value == Number(item),\r\n                                            'pl-time-base-column-item-disabled': utils.checkDisabled(item),\r\n                                        }\r\n                                    ],\r\n                                    key: item,\r\n                                    onClick: () => handler.clickItem(item),\r\n                                    ref: val => liList[index + 3] = val as any\r\n                                }}>\r\n                                    {item}\r\n                                </li>\r\n                            ))}\r\n\r\n                            {[1, 2, 3].map(item => (<li class=\"pl-time-base-column-item\" key={-item - 3}/>))}\r\n                        </ul>\r\n                    </PlScroll>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {TimePublicProps} from './time-panel.utils';\r\nimport {computed} from 'vue';\r\nimport {PlainDate} from \"../../../utils/PlainDate\";\r\nimport './time-base-panel.scss'\r\nimport {PlTimeBaseColumn} from \"./time-base-column\";\r\n\r\nexport enum TimePanelLayout {\r\n    h = 'hour',\r\n    m = 'minute',\r\n    s = 'second',\r\n}\r\n\r\nexport const PlTimeBasePanel = designComponent({\r\n    name: 'pl-time-base-panel',\r\n    props: {\r\n        modelValue: {type: String},\r\n        disableChangeOnScroll: {type: Boolean},// 是否禁用在滚动的时候触发更新值动作\r\n        ...TimePublicProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | null) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const formatData = computed(() => {\r\n            return {\r\n                value: new PlainDate(props.modelValue, props.displayFormat, props.valueFormat),\r\n                max: new PlainDate(props.max, props.displayFormat, props.valueFormat),\r\n                min: new PlainDate(props.min, props.displayFormat, props.valueFormat),\r\n            }\r\n        })\r\n\r\n        const maxmin = computed(() => {\r\n\r\n            const max = {\r\n                hour: null as null | number,\r\n                minute: null as null | number,\r\n                second: null as null | number,\r\n            }\r\n            const min = {\r\n                hour: null as null | number,\r\n                minute: null as null | number,\r\n                second: null as null | number,\r\n            }\r\n\r\n            const {max: maxpd, min: minpd, value: vpd} = formatData.value\r\n\r\n            if (!!maxpd.hour) {\r\n                max.hour = maxpd.hour\r\n                if (vpd.hour == null) {\r\n                    // 有最大值，但是没有选择【时】的情况下，分以及秒不能选择任意选项\r\n                    max.minute = -Infinity\r\n                    max.second = -Infinity\r\n                } else {\r\n                    if (vpd.hour < max.hour) {\r\n                        // 有最大值，但是【时】没有达到最大值，此时分以及秒可以任意选择\r\n                        max.minute = null\r\n                        max.second = null\r\n                    } else {\r\n                        max.minute = maxpd.minute\r\n                        if (vpd.minute == null) {\r\n                            max.second = -Infinity\r\n                        } else {\r\n                            if (vpd.minute < max.minute!) {\r\n                                max.second = null\r\n                            } else {\r\n                                max.second = maxpd.second\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!!minpd.hour) {\r\n                min.hour = minpd.hour\r\n                if (vpd.hour == null) {\r\n                    // 有最小值，但是没有选择【时】的情况下，分以及秒不能选择任意选项\r\n                    min.minute = Infinity\r\n                    min.second = Infinity\r\n                } else {\r\n                    if (vpd.hour > min.hour) {\r\n                        // 有最小值，但是【时】没有达到最小值，此时分以及秒可以任意选择\r\n                        min.minute = null\r\n                        min.second = null\r\n                    } else {\r\n                        min.minute = minpd.minute\r\n                        if (vpd.minute == null) {\r\n                            min.second = Infinity\r\n                        } else {\r\n                            if (vpd.minute > min.minute!) {\r\n                                min.second = null\r\n                            } else {\r\n                                min.second = minpd.second\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return {\r\n                max, min,\r\n            }\r\n        })\r\n\r\n        const checkDisabled = computed(() => !props.checkDisabled ? null : (num: number, layout: TimePanelLayout) => props.checkDisabled!(num, layout, formatData.value.value))\r\n\r\n        const custom = computed(() => !props.custom ? null : (layout: TimePanelLayout) => props.custom!(layout, formatData.value.value))\r\n\r\n        const handler = {\r\n            columnChange: (value: number, type: string) => {\r\n                // console.log('columnChange', {value, type})\r\n\r\n                const {value: vpd, max: maxpd, min: minpd} = formatData.value\r\n\r\n                switch (type) {\r\n                    case 'h':\r\n                        vpd.setHour(value)\r\n                        break\r\n                    case 'm':\r\n                        vpd.setMinute(value)\r\n                        break\r\n                    case 's':\r\n                        vpd.setSecond(value)\r\n                        break\r\n                }\r\n\r\n                if (!maxpd.isNull && vpd.Hms! > maxpd.Hms) {\r\n                    vpd.setValue(maxpd.valueString!)\r\n                }\r\n\r\n                if (!minpd.isNull && vpd.Hms! < minpd.Hms) {\r\n                    vpd.setValue(minpd.valueString!)\r\n                }\r\n\r\n                event.emit.onUpdateModelValue(vpd.valueString)\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <div class=\"pl-time-base-panel\">\r\n                        {props.layout.map((layout: any) => (\r\n                            <PlTimeBaseColumn\r\n                                {...{\r\n                                    key: layout,\r\n                                    layout,\r\n                                    modelValue: (formatData as any).value.value[(TimePanelLayout as any)[layout]],\r\n                                    max: (maxmin as any).value.max[(TimePanelLayout as any)[layout]],\r\n                                    min: (maxmin as any).value.min[(TimePanelLayout as any)[layout]],\r\n                                    checkDisabled: checkDisabled.value!,\r\n                                    custom: custom.value as any,\r\n                                    onChange: (val: number) => handler.columnChange(val, layout),\r\n                                    disableChangeOnScroll: props.disableChangeOnScroll,\r\n                                }}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {ComponentPublicInstance, getCurrentInstance} from 'vue';\r\nimport {PlRoot} from \"./root\";\r\n\r\n/**\r\n * 用来注册root组件，建立 root 与 app中的 $root根实例的唯一对应关系\r\n * @author  韦胜健\r\n * @date    2020/11/26 9:32\r\n */\r\nexport const RootController = (() => {\r\n    const map = new WeakMap<ComponentPublicInstance, typeof PlRoot.use.class>()\r\n    return {\r\n        initRoot: (root: typeof PlRoot.use.class) => {\r\n            const $root = root.rootRef()\r\n            map.set($root, root)\r\n        },\r\n        getRoot: (ins: ComponentPublicInstance) => {\r\n            const root = map.get(ins.$root!)\r\n            if (!root) {\r\n                throw new Error(`pl-root is not found, you have to wrap the entire application with <pl-root/>!`)\r\n            }\r\n            return root\r\n        }\r\n    }\r\n})()\r\n\r\nexport enum RootServiceScope {\r\n    root = 'root',\r\n    ins = 'ins',\r\n}\r\n\r\n/**\r\n * 注册一个应用服务\r\n * @author  韦胜健\r\n * @date    2020/11/26 9:34\r\n * @param   name                        服务名称\r\n * @param   managerComponent            Manager组件，由root实例创建，Manager负责创建Service组件实例\r\n * @param   createService               负责通过得到的manager实例，获取service实例，调用service实例的service方法提供服务\r\n * @param   scope                       应用服务的作用范围，root表示整个应用只有一个服务，ins表示每个组件都有自己的服务。\r\n */\r\nexport function registryRootService<ManagerComponent extends { use: { class: any } },\r\n    CreateService extends (getManager: () => Promise<ManagerComponent[\"use\"][\"class\"]>, ins: ComponentPublicInstance) => any>\r\n(\r\n    name: string,\r\n    managerComponent: ManagerComponent,\r\n    createService: CreateService,\r\n    scope = RootServiceScope.root\r\n) {\r\n    let map = new WeakMap<ComponentPublicInstance, ReturnType<CreateService>>()\r\n\r\n    return (ins: ComponentPublicInstance): ReturnType<CreateService> => {\r\n        const mapKey = scope === RootServiceScope.root ? ins.$root! : ins\r\n        let service = map.get(mapKey)\r\n        /*如果在作用域范围内存在已经创建的服务，则直接返回这个服务函数*/\r\n        if (!!service) {\r\n            return service\r\n        }\r\n        /*否则调用创建服务函数，创建一个新的服务函数提供服务*/\r\n        service = createService(async () => {\r\n            const root = RootController.getRoot(mapKey)\r\n            /*获取一个 Controller 实例，没有就给我创建一个*/\r\n            return await root.getManagerInstance(name, managerComponent)\r\n        }, ins)\r\n        console.log({mapKey, service})\r\n        map.set(mapKey, service!)\r\n        return service!\r\n    }\r\n}\r\n\r\nexport function createRootService<Service>(context: ComponentPublicInstance, serviceGetter: (ins: ComponentPublicInstance) => Service): Service {\r\n    return serviceGetter(context)\r\n}\r\n\r\nexport function useRootService<Service>(serviceGetter: (ins: ComponentPublicInstance) => Service) {\r\n    const ctx = getCurrentInstance()!\r\n    return serviceGetter(ctx.proxy!)\r\n}","/*---------------------------------------rgb to hex-------------------------------------------*/\r\n\r\nconst INT_HEX_MAP = {10: 'A', 11: 'B', 12: 'C', 13: 'D', 14: 'E', 15: 'F'} as any;\r\n\r\nconst hexOne = function (value: number) {\r\n    value = Math.min(Math.round(value), 255);\r\n    const high = Math.floor(value / 16);\r\n    const low = value % 16;\r\n    return '' + (INT_HEX_MAP[high] || high) + (INT_HEX_MAP[low] || low);\r\n};\r\n\r\n/**\r\n * rgb -> hex\r\n * @author  韦胜健\r\n * @date    2020/4/4 8:58\r\n */\r\nexport const rgb2hex = function (r: number, g: number, b: number): string {\r\n    if (isNaN(r) || isNaN(g) || isNaN(b)) return '';\r\n    return '#' + hexOne(r) + hexOne(g) + hexOne(b);\r\n};\r\n\r\n/*---------------------------------------rgb to hsv-------------------------------------------*/\r\n\r\n/*是否为0.**形式的字符串*/\r\nconst isOnePointZero = function (n: string | number): boolean {\r\n    return typeof n === 'string' && n.indexOf('.') !== -1 && parseFloat(n) === 1;\r\n};\r\n\r\n/*是否为百分比字符串*/\r\nconst isPercentage = function (n: any): boolean {\r\n    return typeof n === 'string' && n.indexOf('%') !== -1;\r\n};\r\n\r\n/*将[0,n]转换为[0,1]*/\r\nconst bound01 = function (value: string | number, max: number): number {\r\n    if (isOnePointZero(value)) value = '100%';\r\n    const processPercent = isPercentage(value);\r\n    value = Math.min(max, Math.max(0, parseFloat(value as string)));\r\n    // Automatically convert percentage into number\r\n    if (processPercent) {\r\n        value = parseInt(String(value * max), 10) / 100;\r\n    }\r\n    // Handle floating point rounding errors\r\n    if ((Math.abs(value - max) < 0.000001)) {\r\n        return 1;\r\n    }\r\n    // Convert into [0, 1] range if it isn't already\r\n    return (value % max) / parseFloat(max as any as string);\r\n};\r\n\r\n/**\r\n * rgb -> hsv\r\n * @author  韦胜健\r\n * @date    2020/4/4 9:09\r\n */\r\nexport const rgb2hsv = function (r: number, g: number, b: number): { h: number, s: number, v: number } {\r\n    r = bound01(r, 255);\r\n    g = bound01(g, 255);\r\n    b = bound01(b, 255);\r\n\r\n    const max = Math.max(r, g, b);\r\n    const min = Math.min(r, g, b);\r\n    let h = 0, s = 0;\r\n    let v = max;\r\n\r\n    const d = max - min;\r\n    s = max === 0 ? 0 : d / max;\r\n\r\n    if (max === min) {\r\n        h = 0; // achromatic\r\n    } else {\r\n        switch (max) {\r\n            case r:\r\n                h = (g - b) / d + (g < b ? 6 : 0);\r\n                break;\r\n            case g:\r\n                h = (b - r) / d + 2;\r\n                break;\r\n            case b:\r\n                h = (r - g) / d + 4;\r\n                break;\r\n        }\r\n        h /= 6;\r\n    }\r\n    const ret = {h: h * 360, s: s * 100, v: v * 100} as any\r\n    Object.keys(ret).forEach(key => ret[key] = ret[key].toFixed(0) - 0)\r\n    return ret;\r\n};\r\n\r\n/*---------------------------------------hsv -> rgb-------------------------------------------*/\r\n/*\r\n *  hsv颜色值转rgb颜色值\r\n *  @author              martsforever\r\n *  @datetime           2019/2/16 22:43\r\n *  @param hue          色调，用角度度量，取值范围为0°～360°，从红色开始按逆时针方向计算，红色为0°，绿色为120°,蓝色为240°。它们的补色是：黄色为60°，青色为180°,品红为300°；\r\n *  @param saturation   饱和度，一种颜色，可以看成是某种光谱色与白色混合的结果。其中光谱色所占的比例愈大，颜色接近光谱色的程度就愈高，颜色的饱和度也就愈高。饱和度高，颜色则深而艳。光谱色的白光成分为0，饱和度达到最高。通常取值范围为0%～100%，值越大，颜色越饱和。\r\n *  @param value        明度，明度表示颜色明亮的程度，对于光源色，明度值与发光体的光亮度有关；对于物体色，此值和物体的透射比或反射比有关。通常取值范围为0%（黑）到100%（白）。\r\n */\r\nexport const hsv2rgb = function (hue: number, saturation: number, value: number): { r: number, g: number, b: number } {\r\n    hue = bound01(hue, 360) * 6;\r\n    saturation = bound01(saturation, 100);\r\n    value = bound01(value, 100);\r\n\r\n    const i = Math.floor(hue);\r\n    const f = hue - i;\r\n    const p = value * (1 - saturation);\r\n    const q = value * (1 - f * saturation);\r\n    const t = value * (1 - (1 - f) * saturation);\r\n    const mod = i % 6;\r\n    const r = [value, q, p, p, t, value][mod];\r\n    const g = [t, value, value, q, p, p][mod];\r\n    const b = [p, p, t, value, value, q][mod];\r\n\r\n    return {\r\n        r: Math.round(r * 255),\r\n        g: Math.round(g * 255),\r\n        b: Math.round(b * 255)\r\n    };\r\n};\r\n\r\n/*---------------------------------------other-------------------------------------------*/\r\n\r\nconst HEX_INT_MAP = {A: 10, B: 11, C: 12, D: 13, E: 14, F: 15} as any;\r\n\r\nexport const parseHexChannel = function (hex: string) {\r\n    if (hex.length === 2) {\r\n        return (HEX_INT_MAP[hex[0].toUpperCase()] || +hex[0]) * 16 + (HEX_INT_MAP[hex[1].toUpperCase()] || +hex[1]);\r\n    }\r\n\r\n    return HEX_INT_MAP[hex[1].toUpperCase()] || +hex[1];\r\n};\r\n\r\n/**\r\n * 判断是否为一个有效的颜色值\r\n * @author  韦胜健\r\n * @date    2020/4/7 11:32\r\n */\r\nexport function isEffectiveColorString(color: string): boolean {\r\n    if (!color) return true\r\n    if (color.indexOf('#') === 0 && /^#[0-9a-fA-F]{6}$/.test(color)) {\r\n        return true\r\n    } else if (color.indexOf('rgb') === 0 && /^rgb(\\(\\d{1,3}(,\\d{1,3}){2}|a\\(\\d{1,3}(,\\d{1,3}){2},(1\\.?0*|0\\.\\d+))\\)$/.test(color)) {\r\n        return true\r\n    }\r\n    return false\r\n}","import {ref, onMounted, onBeforeUnmount} from 'vue';\r\n\r\nexport function useMounted() {\r\n    const isMounted = ref(false)\r\n    onMounted(() => isMounted.value = true)\r\n    onBeforeUnmount(() => isMounted.value = false)\r\n    return isMounted\r\n}","import {createAgentGetter} from \"../../popper/edit/createAgentGetter\";\r\nimport {App} from 'vue';\r\nimport {PlColorPanel} from \"../color-panel\";\r\n\r\nexport const ColorPickerServiceGetter = createAgentGetter({\r\n    name: 'color-picker',\r\n    render(attrs: any) {\r\n        return <PlColorPanel {...attrs}/>\r\n    },\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n    },\r\n    defaultRenderAttrs: {\r\n        onChange() {this.hide()},\r\n    },\r\n})\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            computed: {\r\n                $colorPicker() { ColorPickerServiceGetter(this)},\r\n            },\r\n        })\r\n    },\r\n}","import './list.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {TransitionGroup} from 'vue'\r\nimport {useSlots} from \"../../use/useSlots\";\r\n\r\nexport const PlList = designComponent({\r\n    name: 'pl-list',\r\n    props: {\r\n        direction: {                            //item入场出场动画 'left', 'right', 'top', 'bottom', 'left-top', 'top-left', 'right-top', 'top-right', 'left-bottom', 'bottom-left', 'right-bottom', 'bottom-right'\r\n            type: String,\r\n            default: 'bottom-right',\r\n        },\r\n        tag: {type: String, default: 'div'},\r\n        disabled: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        return {\r\n            render: () => {\r\n                const Component = (props.disabled ? props.tag : TransitionGroup) as any\r\n                return (\r\n                    <Component {...{\r\n                        class: \"pl-list\",\r\n                        name: `pl-list-move-${props.direction}`,\r\n                        tag: props.tag,\r\n                    }}>\r\n                        {slots.default()}\r\n                    </Component>\r\n                )\r\n            }\r\n        }\r\n    }\r\n})","var map = {\n\t\"./el-icon-alarm-clock.json\": [\n\t\t\"cb35\",\n\t\t\"chunk-2d2217f7\"\n\t],\n\t\"./el-icon-arrow-down.json\": [\n\t\t\"6c41\",\n\t\t\"chunk-2d0da720\"\n\t],\n\t\"./el-icon-arrow-left.json\": [\n\t\t\"cfb7\",\n\t\t\"chunk-2d222cae\"\n\t],\n\t\"./el-icon-arrow-right.json\": [\n\t\t\"adb0\",\n\t\t\"chunk-2d213c67\"\n\t],\n\t\"./el-icon-arrow-up.json\": [\n\t\t\"94ea\",\n\t\t\"chunk-2d0e59ed\"\n\t],\n\t\"./el-icon-back.json\": [\n\t\t\"3c66\",\n\t\t\"chunk-2d0c4a46\"\n\t],\n\t\"./el-icon-bell.json\": [\n\t\t\"e25d\",\n\t\t\"chunk-2d224cf2\"\n\t],\n\t\"./el-icon-bottom-left.json\": [\n\t\t\"4a3f\",\n\t\t\"chunk-2d0cb6f6\"\n\t],\n\t\"./el-icon-bottom-right.json\": [\n\t\t\"1917\",\n\t\t\"chunk-2d0ac344\"\n\t],\n\t\"./el-icon-bottom.json\": [\n\t\t\"6976\",\n\t\t\"chunk-2d0d09d8\"\n\t],\n\t\"./el-icon-brush.json\": [\n\t\t\"5133\",\n\t\t\"chunk-2d0c76f2\"\n\t],\n\t\"./el-icon-camera-solid.json\": [\n\t\t\"b8dc\",\n\t\t\"chunk-2d210c0b\"\n\t],\n\t\"./el-icon-camera.json\": [\n\t\t\"6fe1\",\n\t\t\"chunk-2d0db852\"\n\t],\n\t\"./el-icon-caret-bottom.json\": [\n\t\t\"3442\",\n\t\t\"chunk-2d0b9995\"\n\t],\n\t\"./el-icon-caret-left.json\": [\n\t\t\"e67c\",\n\t\t\"chunk-2d225c33\"\n\t],\n\t\"./el-icon-caret-right.json\": [\n\t\t\"54bc\",\n\t\t\"chunk-2d0c8816\"\n\t],\n\t\"./el-icon-caret-top.json\": [\n\t\t\"afd3\",\n\t\t\"chunk-2d21442a\"\n\t],\n\t\"./el-icon-chat-dot-round.json\": [\n\t\t\"76c6\",\n\t\t\"chunk-2d0d7848\"\n\t],\n\t\"./el-icon-chat-dot-square.json\": [\n\t\t\"e8b52\",\n\t\t\"chunk-772aaef6\"\n\t],\n\t\"./el-icon-chat-line-round.json\": [\n\t\t\"f439\",\n\t\t\"chunk-2d22c86a\"\n\t],\n\t\"./el-icon-chat-line-square.json\": [\n\t\t\"ec88\",\n\t\t\"chunk-2d230514\"\n\t],\n\t\"./el-icon-chat-round.json\": [\n\t\t\"be43\",\n\t\t\"chunk-2d21aef8\"\n\t],\n\t\"./el-icon-chat-square.json\": [\n\t\t\"fe43\",\n\t\t\"chunk-2d238074\"\n\t],\n\t\"./el-icon-check-bold.json\": [\n\t\t\"f9a6\",\n\t\t\"chunk-2d22e0be\"\n\t],\n\t\"./el-icon-check.json\": [\n\t\t\"4e52\",\n\t\t\"chunk-2d0cc604\"\n\t],\n\t\"./el-icon-circle-check.json\": [\n\t\t\"3c3b\",\n\t\t\"chunk-2d0c4a15\"\n\t],\n\t\"./el-icon-circle-close.json\": [\n\t\t\"3728\",\n\t\t\"chunk-2d0ba4a0\"\n\t],\n\t\"./el-icon-circle-plus-outline.json\": [\n\t\t\"5b87\",\n\t\t\"chunk-2d0d2f82\"\n\t],\n\t\"./el-icon-circle-plus.json\": [\n\t\t\"2bcd\",\n\t\t\"chunk-2d0bd7c7\"\n\t],\n\t\"./el-icon-close-bold.json\": [\n\t\t\"8b35\",\n\t\t\"chunk-2d0e8c02\"\n\t],\n\t\"./el-icon-close-notification.json\": [\n\t\t\"84d2\",\n\t\t\"chunk-2d0de540\"\n\t],\n\t\"./el-icon-close.json\": [\n\t\t\"b7c2\",\n\t\t\"chunk-2d2107fa\"\n\t],\n\t\"./el-icon-cloudy.json\": [\n\t\t\"4230\",\n\t\t\"chunk-2d0c0651\"\n\t],\n\t\"./el-icon-code.json\": [\n\t\t\"711f\",\n\t\t\"chunk-2d0d5fa5\"\n\t],\n\t\"./el-icon-coffee-cup.json\": [\n\t\t\"831a\",\n\t\t\"chunk-2d0ddb81\"\n\t],\n\t\"./el-icon-collection-tag.json\": [\n\t\t\"0ff2\",\n\t\t\"chunk-2d0afe38\"\n\t],\n\t\"./el-icon-connection.json\": [\n\t\t\"6a3d\",\n\t\t\"chunk-2d0d9fb2\"\n\t],\n\t\"./el-icon-crop.json\": [\n\t\t\"94f4\",\n\t\t\"chunk-2d0e59df\"\n\t],\n\t\"./el-icon-d-arrow-left.json\": [\n\t\t\"3194\",\n\t\t\"chunk-2d0b8eef\"\n\t],\n\t\"./el-icon-d-arrow-right.json\": [\n\t\t\"56ef3\",\n\t\t\"chunk-74856f3b\"\n\t],\n\t\"./el-icon-date.json\": [\n\t\t\"ca53\",\n\t\t\"chunk-2d221472\"\n\t],\n\t\"./el-icon-debug-s.json\": [\n\t\t\"241e\",\n\t\t\"chunk-2d0b250c\"\n\t],\n\t\"./el-icon-debug.json\": [\n\t\t\"5696\",\n\t\t\"chunk-2d0c8a74\"\n\t],\n\t\"./el-icon-delete-location.json\": [\n\t\t\"e918\",\n\t\t\"chunk-2d226691\"\n\t],\n\t\"./el-icon-delete-solid.json\": [\n\t\t\"ed66\",\n\t\t\"chunk-2d230895\"\n\t],\n\t\"./el-icon-delete.json\": [\n\t\t\"4add\",\n\t\t\"chunk-2d0cbce3\"\n\t],\n\t\"./el-icon-document-add.json\": [\n\t\t\"b7c1\",\n\t\t\"chunk-2d2107f9\"\n\t],\n\t\"./el-icon-document-checked.json\": [\n\t\t\"af1c\",\n\t\t\"chunk-2d213e2d\"\n\t],\n\t\"./el-icon-document-copy.json\": [\n\t\t\"764e\",\n\t\t\"chunk-2d0d72c6\"\n\t],\n\t\"./el-icon-document-delete.json\": [\n\t\t\"a8d2\",\n\t\t\"chunk-2d20977b\"\n\t],\n\t\"./el-icon-document-remove.json\": [\n\t\t\"dd28\",\n\t\t\"chunk-2d2293bc\"\n\t],\n\t\"./el-icon-document.json\": [\n\t\t\"2b65\",\n\t\t\"chunk-2d0bd225\"\n\t],\n\t\"./el-icon-download.json\": [\n\t\t\"9065\",\n\t\t\"chunk-2d0e450c\"\n\t],\n\t\"./el-icon-edit-outline.json\": [\n\t\t\"f8e0\",\n\t\t\"chunk-2d22dd73\"\n\t],\n\t\"./el-icon-edit.json\": [\n\t\t\"0caa\",\n\t\t\"chunk-2d0af289\"\n\t],\n\t\"./el-icon-error.json\": [\n\t\t\"16c6\",\n\t\t\"chunk-2d0abe0e\"\n\t],\n\t\"./el-icon-female.json\": [\n\t\t\"9937\",\n\t\t\"chunk-2d0e667a\"\n\t],\n\t\"./el-icon-first-aid-kit.json\": [\n\t\t\"9a63\",\n\t\t\"chunk-2d0efcfb\"\n\t],\n\t\"./el-icon-folder-add.json\": [\n\t\t\"e0c3\",\n\t\t\"chunk-2d224ad1\"\n\t],\n\t\"./el-icon-folder-checked.json\": [\n\t\t\"6eb2\",\n\t\t\"chunk-2d0db435\"\n\t],\n\t\"./el-icon-folder-delete.json\": [\n\t\t\"5ca1\",\n\t\t\"chunk-2d0d3834\"\n\t],\n\t\"./el-icon-folder-opened.json\": [\n\t\t\"08b5\",\n\t\t\"chunk-2d0a5111\"\n\t],\n\t\"./el-icon-folder-remove.json\": [\n\t\t\"dcfa\",\n\t\t\"chunk-2d229670\"\n\t],\n\t\"./el-icon-folder-s.json\": [\n\t\t\"59d9\",\n\t\t\"chunk-2d0c9aef\"\n\t],\n\t\"./el-icon-folder.json\": [\n\t\t\"f98f\",\n\t\t\"chunk-2d22dbf7\"\n\t],\n\t\"./el-icon-full-screen.json\": [\n\t\t\"5d5a\",\n\t\t\"chunk-2d0d36d1\"\n\t],\n\t\"./el-icon-info.json\": [\n\t\t\"36b6\",\n\t\t\"chunk-2d0ba6ad\"\n\t],\n\t\"./el-icon-jiahao.json\": [\n\t\t\"da7d\",\n\t\t\"chunk-2d228940\"\n\t],\n\t\"./el-icon-link.json\": [\n\t\t\"90ff\",\n\t\t\"chunk-2d0e4b0d\"\n\t],\n\t\"./el-icon-list.json\": [\n\t\t\"66d9\",\n\t\t\"chunk-2d0d040b\"\n\t],\n\t\"./el-icon-location-information.json\": [\n\t\t\"e752\",\n\t\t\"chunk-2d225f85\"\n\t],\n\t\"./el-icon-location-outline.json\": [\n\t\t\"e518\",\n\t\t\"chunk-2d22578d\"\n\t],\n\t\"./el-icon-location.json\": [\n\t\t\"c034\",\n\t\t\"chunk-2d215c44\"\n\t],\n\t\"./el-icon-lock.json\": [\n\t\t\"4e03\",\n\t\t\"chunk-2d0cc56a\"\n\t],\n\t\"./el-icon-male.json\": [\n\t\t\"469c\",\n\t\t\"chunk-2d0c1642\"\n\t],\n\t\"./el-icon-menu.json\": [\n\t\t\"0a5a\",\n\t\t\"chunk-2d0ae5b3\"\n\t],\n\t\"./el-icon-message-solid.json\": [\n\t\t\"b1c9\",\n\t\t\"chunk-2d20f17b\"\n\t],\n\t\"./el-icon-message.json\": [\n\t\t\"d4ee\",\n\t\t\"chunk-2d21e5e6\"\n\t],\n\t\"./el-icon-microphone.json\": [\n\t\t\"1722\",\n\t\t\"chunk-2d0abbdc\"\n\t],\n\t\"./el-icon-minus.json\": [\n\t\t\"a53c\",\n\t\t\"chunk-2d20867a\"\n\t],\n\t\"./el-icon-more.json\": [\n\t\t\"af8e\",\n\t\t\"chunk-2d213f08\"\n\t],\n\t\"./el-icon-nodata.json\": [\n\t\t\"1e28\",\n\t\t\"chunk-2d0b6890\"\n\t],\n\t\"./el-icon-paperclip.json\": [\n\t\t\"011a\",\n\t\t\"chunk-2d0a3107\"\n\t],\n\t\"./el-icon-picture-outline.json\": [\n\t\t\"9618\",\n\t\t\"chunk-2d0e5afa\"\n\t],\n\t\"./el-icon-picture.json\": [\n\t\t\"dbd7\",\n\t\t\"chunk-2d229247\"\n\t],\n\t\"./el-icon-place.json\": [\n\t\t\"f20d\",\n\t\t\"chunk-2d22c0b6\"\n\t],\n\t\"./el-icon-plus.json\": [\n\t\t\"26b6\",\n\t\t\"chunk-2d0b324e\"\n\t],\n\t\"./el-icon-position.json\": [\n\t\t\"0bbe\",\n\t\t\"chunk-2d0aeeeb\"\n\t],\n\t\"./el-icon-question.json\": [\n\t\t\"84cd\",\n\t\t\"chunk-2d0de553\"\n\t],\n\t\"./el-icon-rank.json\": [\n\t\t\"8661\",\n\t\t\"chunk-2d0de72f\"\n\t],\n\t\"./el-icon-redo.json\": [\n\t\t\"01af\",\n\t\t\"chunk-2d0a36dc\"\n\t],\n\t\"./el-icon-refresh-right.json\": [\n\t\t\"ed12\",\n\t\t\"chunk-2d2307f6\"\n\t],\n\t\"./el-icon-refresh.json\": [\n\t\t\"33ab\",\n\t\t\"chunk-2d0b9b77\"\n\t],\n\t\"./el-icon-remove-outline.json\": [\n\t\t\"c6b69\",\n\t\t\"chunk-770d975c\"\n\t],\n\t\"./el-icon-remove.json\": [\n\t\t\"0103\",\n\t\t\"chunk-2d0a30ba\"\n\t],\n\t\"./el-icon-right.json\": [\n\t\t\"6be0\",\n\t\t\"chunk-2d0da94d\"\n\t],\n\t\"./el-icon-rotate-left.json\": [\n\t\t\"94b8\",\n\t\t\"chunk-2d0e5967\"\n\t],\n\t\"./el-icon-rotate-right.json\": [\n\t\t\"30b7\",\n\t\t\"chunk-2d0b9028\"\n\t],\n\t\"./el-icon-s-comment.json\": [\n\t\t\"849a\",\n\t\t\"chunk-2d0de03a\"\n\t],\n\t\"./el-icon-s-custom.json\": [\n\t\t\"4001\",\n\t\t\"chunk-2d0bfe73\"\n\t],\n\t\"./el-icon-s-fold.json\": [\n\t\t\"01f3\",\n\t\t\"chunk-2d0a3744\"\n\t],\n\t\"./el-icon-s-grid.json\": [\n\t\t\"8efd\",\n\t\t\"chunk-2d0e9da1\"\n\t],\n\t\"./el-icon-s-opportunity.json\": [\n\t\t\"acd7\",\n\t\t\"chunk-2d2138eb\"\n\t],\n\t\"./el-icon-s-order.json\": [\n\t\t\"b5e1\",\n\t\t\"chunk-2d2100b5\"\n\t],\n\t\"./el-icon-s-promotion.json\": [\n\t\t\"8e1e\",\n\t\t\"chunk-2d0e9737\"\n\t],\n\t\"./el-icon-s-shop.json\": [\n\t\t\"a48f\",\n\t\t\"chunk-2d208357\"\n\t],\n\t\"./el-icon-s-ticket.json\": [\n\t\t\"471a\",\n\t\t\"chunk-2d0c1909\"\n\t],\n\t\"./el-icon-s-tools.json\": [\n\t\t\"49e0\",\n\t\t\"chunk-2d0c26a6\"\n\t],\n\t\"./el-icon-s-unfold.json\": [\n\t\t\"2d66\",\n\t\t\"chunk-2d0bd9a8\"\n\t],\n\t\"./el-icon-search.json\": [\n\t\t\"37aa\",\n\t\t\"chunk-2d0baa7a\"\n\t],\n\t\"./el-icon-setting.json\": [\n\t\t\"70db\",\n\t\t\"chunk-2d0d620d\"\n\t],\n\t\"./el-icon-share.json\": [\n\t\t\"75e3\",\n\t\t\"chunk-2d0d74c2\"\n\t],\n\t\"./el-icon-sort.json\": [\n\t\t\"e450\",\n\t\t\"chunk-2d225440\"\n\t],\n\t\"./el-icon-star-off.json\": [\n\t\t\"c7d3\",\n\t\t\"chunk-2d217c79\"\n\t],\n\t\"./el-icon-star-on.json\": [\n\t\t\"ce5c\",\n\t\t\"chunk-2d2223a6\"\n\t],\n\t\"./el-icon-success.json\": [\n\t\t\"b819\",\n\t\t\"chunk-2d2105b4\"\n\t],\n\t\"./el-icon-switch-button.json\": [\n\t\t\"e677\",\n\t\t\"chunk-2d225c07\"\n\t],\n\t\"./el-icon-thumb.json\": [\n\t\t\"681e\",\n\t\t\"chunk-2d0d058c\"\n\t],\n\t\"./el-icon-time.json\": [\n\t\t\"d831\",\n\t\t\"chunk-2d21eea8\"\n\t],\n\t\"./el-icon-tools.json\": [\n\t\t\"3f79\",\n\t\t\"chunk-2d0c55ab\"\n\t],\n\t\"./el-icon-top-left.json\": [\n\t\t\"d8d8\",\n\t\t\"chunk-2d21f49e\"\n\t],\n\t\"./el-icon-top-right.json\": [\n\t\t\"ddd4\",\n\t\t\"chunk-2d2299c6\"\n\t],\n\t\"./el-icon-top.json\": [\n\t\t\"aca8\",\n\t\t\"chunk-2d21388f\"\n\t],\n\t\"./el-icon-turn-off-microphone.json\": [\n\t\t\"0bd6\",\n\t\t\"chunk-2d0aeefa\"\n\t],\n\t\"./el-icon-undo.json\": [\n\t\t\"9ff1\",\n\t\t\"chunk-2d0f158e\"\n\t],\n\t\"./el-icon-unlock.json\": [\n\t\t\"f7ea\",\n\t\t\"chunk-2d22d9e3\"\n\t],\n\t\"./el-icon-upload.json\": [\n\t\t\"0bce\",\n\t\t\"chunk-2d0aef0a\"\n\t],\n\t\"./el-icon-upload1.json\": [\n\t\t\"d889\",\n\t\t\"chunk-2d21ef4b\"\n\t],\n\t\"./el-icon-video-pause.json\": [\n\t\t\"c6a5\",\n\t\t\"chunk-2d21785d\"\n\t],\n\t\"./el-icon-video-play.json\": [\n\t\t\"4016\",\n\t\t\"chunk-2d0bfe97\"\n\t],\n\t\"./el-icon-view-not-s.json\": [\n\t\t\"f49d\",\n\t\t\"chunk-2d22c94f\"\n\t],\n\t\"./el-icon-view.json\": [\n\t\t\"c3a4\",\n\t\t\"chunk-2d216d19\"\n\t],\n\t\"./el-icon-warning-outline.json\": [\n\t\t\"93f8\",\n\t\t\"chunk-2d0e5622\"\n\t],\n\t\"./el-icon-warning.json\": [\n\t\t\"80f1\",\n\t\t\"chunk-2d0dd679\"\n\t],\n\t\"./el-icon-zoom-full.json\": [\n\t\t\"450c\",\n\t\t\"chunk-2d0c116a\"\n\t],\n\t\"./el-icon-zoom-in.json\": [\n\t\t\"2731\",\n\t\t\"chunk-2d0b3059\"\n\t],\n\t\"./el-icon-zoom-out.json\": [\n\t\t\"1141\",\n\t\t\"chunk-2d0aa593\"\n\t],\n\t\"./el-icon-zoom-scale.json\": [\n\t\t\"616d\",\n\t\t\"chunk-2d0cebdf\"\n\t],\n\t\"./index.json\": [\n\t\t\"9aae\",\n\t\t\"chunk-2d0f0262\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"e51c\";\nmodule.exports = webpackAsyncContext;","import {designComponent} from \"../../../use/designComponent\";\r\nimport {EditProps} from \"../../../use/useEdit\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport {useProps} from \"../../../use/useProps\";\r\nimport {computed, nextTick, reactive, watch} from 'vue';\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport './color-alpha-slider.scss'\r\n\r\nconst bg = require('./opacity.png')\r\n\r\nexport const PlColorAlphaSlider = designComponent({\r\n    name: 'pl-color-alpha-slider',\r\n    props: {\r\n        ...EditProps,\r\n\r\n        color: {type: String},                                      // 当前颜色\r\n        modelValue: {type: Number, default: 0},                     // 透明度\r\n        size: {type: [String, Number]},                             // 大小\r\n        thumbSize: {type: [String, Number], default: 10},           // 指示器宽度\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        const {propsState} = useProps(props, {\r\n            size: useProps.NUMBER,\r\n            thumbSize: useProps.NUMBER,\r\n        })\r\n\r\n        const state = reactive({\r\n            top: 0,\r\n            tempTop: 0,\r\n            startY: null as null | number,\r\n        })\r\n\r\n        const styles = computed(() => ({\r\n            height: unit(propsState.size),\r\n            backgroundImage: `url(${bg})`,\r\n        }))\r\n\r\n        const shadowStyles = computed(() => ({\r\n            background: `linear-gradient(to top, ${props.color}, rgba(255,255,255,0))`,\r\n        }))\r\n\r\n        const thumbStyles = computed(() => ({\r\n            top: `${state.top}px`,\r\n            width: unit(propsState.thumbSize)\r\n        }))\r\n\r\n        const height = computed(() => (propsState.size as number) - (propsState.thumbSize as number))\r\n\r\n        const methods = {\r\n            setTop: (top: number) => {\r\n                state.top = Math.max(0, Math.min(height.value, top))\r\n            },\r\n            emitValue: () => {\r\n                emit.onUpdateModelValue(Number((state.top / height.value * 100).toFixed(0)))\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                document.body.addEventListener('mousemove', handler.mousemove)\r\n                document.body.addEventListener('mouseup', handler.mouseup)\r\n                if (e.target === refs.el) {\r\n                    methods.setTop(e.offsetY - (propsState.thumbSize as number) / 2)\r\n                    methods.emitValue()\r\n                }\r\n                disabledUserSelect()\r\n                state.startY = e.clientY\r\n                state.tempTop = state.top\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                const durY = e.clientY - state.startY!\r\n                methods.setTop(state.tempTop + durY)\r\n                methods.emitValue()\r\n            },\r\n            mouseup: (e: MouseEvent) => {\r\n                document.body.removeEventListener('mousemove', handler.mousemove)\r\n                document.body.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            nextTick().then(() => methods.setTop(val / 100 * height.value))\r\n        }, {immediate: true})\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-alpha-slider\" style={styles.value as any} onMousedown={handler.mousedown} ref=\"el\">\r\n                    <div class=\"pl-color-alpha-shadow\" style={shadowStyles.value}/>\r\n                    <span class=\"pl-color-alpha-thumb\" style={thumbStyles.value as any}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\n\r\nexport const PlItem = designComponent({\r\n    name: 'pl-item',\r\n    props: {\r\n        block: {type: Boolean},\r\n        tag: {type: String, default: 'div'},\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        return {\r\n            render: () => {\r\n                const {tag: Tag} = props as any\r\n                return (\r\n                    <Tag {...{class: `pl-item ${!!props.block ? 'pl-item-block' : ''}`}}>\r\n                        {slots.default()}\r\n                    </Tag>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {Directive} from 'vue'\r\nimport './click-wave.scss'\r\n\r\nconst map = new WeakMap()\r\n\r\nclass ClickWaveData {\r\n\r\n    option: any\r\n    on: () => void\r\n    wavingTimer: number | null = null\r\n    el: HTMLElement\r\n    updateOption: (option: any) => void\r\n\r\n    constructor(el: HTMLElement, option: any) {\r\n        this.option = {}\r\n        this.on = () => {\r\n            // console.log(this.option,this.option.disabled === true)\r\n            if (this.option.disabled === true) return;\r\n            if (!!this.wavingTimer) return\r\n\r\n            this.el.setAttribute('plain-click-node-waving', 'active')\r\n            this.wavingTimer = setTimeout(() => {\r\n                this.el.removeAttribute('plain-click-node-waving')\r\n                this.wavingTimer = null\r\n            }, 500) as any as number\r\n        }\r\n        this.updateOption = (option) => {\r\n            option = option || {}\r\n            if (typeof option === \"string\") {\r\n                option = {\r\n                    size: option\r\n                }\r\n            }\r\n            option.size = option.size || 'normal'\r\n            this.option = option\r\n        }\r\n        this.updateOption(option)\r\n        this.el = el\r\n        this.el.setAttribute(`plain-click-node-${this.option.size}`, 'active')\r\n\r\n        el.addEventListener('click', this.on, true)\r\n    }\r\n\r\n    unbind() {\r\n        this.el.removeEventListener('click', this.on, true)\r\n    }\r\n}\r\n\r\nexport const ClickWave: Directive = {\r\n    mounted(el, binding) {\r\n        map.set(el, new ClickWaveData(el, binding.value))\r\n    },\r\n    updated(el, binding) {\r\n        const data = map.get(el)\r\n        if (!!data) {\r\n            data.updateOption(binding.value)\r\n        }\r\n    },\r\n    beforeUnmount(el) {\r\n        const data = map.get(el)\r\n        if (!!data) {\r\n            data.unbind()\r\n        }\r\n    },\r\n}","import {VNodeChild} from \"../shims\";\r\nimport {getCurrentInstance, onBeforeUpdate, reactive} from 'vue';\r\nimport {getSlotExist} from \"../utils/getSlotExists\";\r\n\r\ntype ScopedSlotsOptionType = { [SlotName: string]: { [ScopeKey: string]: any } }\r\n\r\ntype ExtractScopedSlotsDataValue<ScopeValue> = ScopeValue extends new (...args: any[]) => infer R ? R : ScopeValue;\r\n\r\ntype ExtractScopedSlotsData<Scope extends { [ScopeKey: string]: any }> = {\r\n    [k in keyof Scope]: ExtractScopedSlotsDataValue<Scope[k]>\r\n}\r\n\r\ninterface UseScopedSlots {\r\n    <T extends ScopedSlotsOptionType>(options: T): {\r\n        scopedSlots: {\r\n            [k in keyof T]: ((scope: ExtractScopedSlotsData<T[k]>, vnode: VNodeChild) => void)\r\n        }\r\n    }\r\n\r\n    <T extends ScopedSlotsOptionType>(options: T, makeReactive?: boolean): {\r\n        scopedSlots: {\r\n            [k in keyof T]: ((scope: ExtractScopedSlotsData<T[k]>, vnode: VNodeChild) => void) & { isExist: () => boolean }\r\n        }\r\n    }\r\n}\r\n\r\nexport const useScopedSlots: UseScopedSlots = <T extends ScopedSlotsOptionType>(options: T, makeReactive?: boolean) => {\r\n\r\n    const ctx = getCurrentInstance()!\r\n    const slotNames = Object.keys(options)\r\n\r\n    const state = reactive({exist: getSlotExist(null, slotNames, ctx)})\r\n    /*如果需要响应式，则需要设置 makeReactive，会自动在updated之后更新slots的isExist值*/\r\n    if (makeReactive) {\r\n        onBeforeUpdate(() => {\r\n            getSlotExist(state.exist, slotNames, ctx)\r\n        })\r\n    }\r\n\r\n    const scopedSlots = slotNames.reduce((prev: any, slotName: string) => {\r\n        prev[slotName] = Object.assign((scope: any, vnode: VNodeChild) => {\r\n            const slot = ctx.slots[slotName]\r\n            return !!slot ? slot(scope) : vnode\r\n        }, {\r\n            isExist() {\r\n                return state.exist[slotName]\r\n            },\r\n        })\r\n        return prev\r\n    }, {} as any)\r\n\r\n    return {\r\n        scopedSlots,\r\n    }\r\n}\r\n","import {designComponent} from \"../../../use/designComponent\";\r\nimport {TimePublicProps} from \"./time-panel.utils\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {nextTick, computed, PropType} from 'vue';\r\nimport {PlTimeRangePanel, TimeRangePanelType} from \"./time-range-panel\";\r\nimport {PlTimeBasePanel} from \"./time-base-panel\";\r\nimport {VNodeChild} from \"../../../shims\";\r\n\r\nexport const TimePanelProps = {\r\n    modelValue: {type: String},\r\n    start: {type: String},\r\n    end: {type: String},\r\n    range: {type: Boolean},\r\n    ...TimePublicProps,\r\n}\r\n\r\nexport const PlTimePanel = designComponent({\r\n    name: 'pl-time-panel',\r\n    props: {\r\n        ...TimePanelProps,\r\n        foot: {type: Function as PropType<() => VNodeChild>},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | undefined, type: TimeRangePanelType) => true,\r\n        onUpdateStart: (val?: string) => true,\r\n        onUpdateEnd: (val?: string) => true,\r\n\r\n        onMousedownBasePanel: (e: MouseEvent) => true,\r\n        onMousedownStartPanel: (e: MouseEvent) => true,\r\n        onMousedownEndPanel: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue as any)\r\n        const start = useModel(() => props.start, emit.onUpdateStart)\r\n        const end = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const handler = {\r\n            onBaseChange: async (val?: string) => {\r\n                await nextTick()\r\n                model.value = val\r\n            },\r\n            onRangeChange: async (val: string | undefined, type: TimeRangePanelType) => {\r\n                await nextTick()\r\n                if (type === TimeRangePanelType.start) {\r\n                    start.value = val\r\n                } else if (type === TimeRangePanelType.end) {\r\n                    end.value = val\r\n                }\r\n                emit.onUpdateModelValue(val, type)\r\n            },\r\n        }\r\n\r\n        const binding = computed(() => {\r\n\r\n            const publicProps = Object.keys(TimePublicProps).reduce((ret: any, key) => {\r\n                ret[key] = (props as any)[key]\r\n                return ret\r\n            }, {})\r\n\r\n            return {\r\n                base: {\r\n                    ...publicProps,\r\n                    modelValue: model.value,\r\n                    onChange: handler.onBaseChange,\r\n                    onMousedown: emit.onMousedownBasePanel,\r\n                },\r\n                range: {\r\n                    ...publicProps,\r\n                    start: start.value,\r\n                    end: end.value,\r\n                    onChange: handler.onRangeChange,\r\n                    onMousedownStartPanel: emit.onMousedownStartPanel,\r\n                    onMousedownEndPanel: emit.onMousedownEndPanel,\r\n                },\r\n            }\r\n        })\r\n\r\n        return {\r\n            render: () => <>\r\n                {!props.range ?\r\n                    <PlTimeBasePanel class=\"pl-time-panel\" {...binding.value.base} key=\"base\"/> :\r\n                    <PlTimeRangePanel class=\"pl-time-panel\" {...binding.value.range} key=\"range\"/>}\r\n                {!!props.foot && <div class=\"pl-time-panel-foot\" onMousedown={emit.onMousedownBasePanel}>\r\n                    {props.foot()}\r\n                </div>}\r\n            </>\r\n        }\r\n\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {PropType} from 'vue';\r\nimport {NavigatorManager} from \"./NavigatorManager\";\r\nimport './nav.scss'\r\nimport {NavStack} from \"./nav-stack\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-nav',\r\n    provideRefer: true,\r\n    props: {\r\n        nav: {type: Object as PropType<NavigatorManager>, required: true},\r\n        height: {default: '100vh'},\r\n        width: {default: '100vw'},\r\n    },\r\n    setup({props}) {\r\n        return {\r\n            refer: {\r\n                props,\r\n            },\r\n            render: () => {\r\n                return (\r\n                    <div class=\"pl-nav\" style={{width: props.width, height: props.height}}>\r\n                        {props.nav.state.stacks\r\n                            .map(stack => (<NavStack stack={stack} key={stack.id}/>))}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {computed} from 'vue'\r\n\r\nexport type SingleClass = null | undefined | string | { [k: string]: boolean | null | undefined }\r\nexport type MultipleClass = SingleClass | SingleClass[]\r\n\r\nexport function useClass<T extends () => MultipleClass>(fn: T) {\r\n    return computed(fn)\r\n}","import {PlButtonGroup} from './button-group'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlButtonGroup)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\n\r\nexport const PlInputInnerTags = designComponent({\r\n    name: 'pl-input-inner-tags',\r\n    props: {\r\n        data: {type: Array},\r\n        collapseTags: {type: Boolean, default: true},\r\n    },\r\n    setup({props}) {\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {item: Object, index: Number},\r\n        })\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-input-inner-tags\">\r\n                    <span class=\"pl-input-inner-tag-item pl-input-inner-tag-item-takeover\">&nbsp;</span>\r\n                    {\r\n                        (props.collapseTags ? props.data!.slice(0, 3) : props.data!).map((item: any, index) => (\r\n                            <span key={index} class=\"pl-input-inner-tag-item\">\r\n                            {scopedSlots.default({item, index}, null)}\r\n                        </span>\r\n                        ))\r\n                    }\r\n                    {props.collapseTags && props.data!.length > 3 && <span class=\"pl-input-inner-tag-item\">+{props.data!.length - 3}</span>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlInputInnerTags} from \"../input/input-inner-tags\";\r\n\r\nexport default createComponentPlugin(PlInputInnerTags)","import './loading-mask.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {computed, nextTick, reactive, watch, Transition, onMounted} from 'vue';\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Loading from '../loading'\r\n\r\nexport const PlLoadingMask =  designComponent({\r\n    name: 'pl-loading-mask',\r\n    props: {\r\n        modelValue: {type: Boolean},                                    // 是否打开loading遮罩\r\n        message: {type: String},                                        // 提示信息\r\n        loadingType: {type: String, default: 'delta'},                  // loading类型\r\n        background: {type: String, default: 'rgba(255,255,255,0.85)'},  // 遮罩背景色\r\n        unlock: {type: Boolean},                                        // 取消阻止点击事件\r\n        fixedPosition: {type: Boolean},                                 // 是否为根节点的加载遮罩\r\n        inDirective: {type: Boolean},                                   // 是否为遮罩指令服务的实例\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean | undefined) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLElement\r\n        })\r\n\r\n        const modelValue = useModel(() => props.modelValue, event.emit.onUpdateModelValue)\r\n\r\n        const state = reactive({\r\n            isMounted: false,\r\n            zIndex: nextIndex() + (!props.fixedPosition ? -1500 : 0) + 1,\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-loading-mask',\r\n            {\r\n                'pl-loading-mask-unlock': props.unlock,\r\n                'pl-loading-mask-fixed-position': props.fixedPosition\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            style.background = props.background\r\n            style.zIndex = state.zIndex\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 检查父节点的position是否为 absolute，relative或者fixed，不是的话，设置为 relative\r\n             * @author  韦胜健\r\n             * @date    2020/11/3 16:42\r\n             */\r\n            resetParentPosition: async () => {\r\n                if (props.fixedPosition) {\r\n                    return\r\n                }\r\n                await nextTick()\r\n                const el = refs.el\r\n                if (el) {\r\n                    let parentNode = el.parentNode as HTMLElement\r\n                    if (props.inDirective) {\r\n                        parentNode = parentNode.parentNode as HTMLElement\r\n                    }\r\n                    if (!!parentNode) {\r\n                        const styles = window.getComputedStyle(parentNode)\r\n                        const position = styles.position\r\n                        if (['absolute', 'relative', 'fixed'].indexOf(position) === -1) {\r\n                            parentNode.style.position = 'relative'\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        watch(() => modelValue.value && state.isMounted, async val => {\r\n            !!val && (state.zIndex = nextIndex() + (!props.fixedPosition ? -1500 : 0) + 1);\r\n            await utils.resetParentPosition()\r\n        })\r\n\r\n        onMounted(() => {\r\n            utils.resetParentPosition()\r\n            setTimeout(() => {\r\n                state.isMounted = true\r\n            }, 23)\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <Transition name=\"pl-transition-loading-mask\">\r\n                    {!!modelValue.value && state.isMounted && (\r\n                        <div style={styles.value} class={classes.value} ref=\"el\">\r\n                            <Loading type={props.loadingType}/>\r\n                            {!!props.message && <span>{props.message}</span>}\r\n                        </div>\r\n                    )}\r\n                </Transition>\r\n            )\r\n        }\r\n    },\r\n})","import {PlLoadingMask} from './loading-mask'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlLoadingMask)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from '../../use/useEdit';\r\nimport {StyleProps, useStyle} from '../../use/useStyle';\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {CheckboxStatus, DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {computed, inject, PropType} from 'vue';\r\nimport {$$notice} from \"../notice-service\";\r\nimport {PlCheckbox} from \"../checkbox/checkbox\";\r\n\r\nexport const PlCheckboxGroup = designComponent({\r\n    name: 'pl-checkbox-group',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: Array as PropType<(string | number)[]>},\r\n\r\n        min: {type: Number},                                        // 最大勾选个数\r\n        max: {type: Number},                                        // 最小勾选个数\r\n        itemWidth: {type: [String, Number]},                        // 文本宽度\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: (string | number)[] | undefined) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const formItem = inject('@@pl-form-item', null)\r\n\r\n        /*插槽*/\r\n        const {slots} = useSlots()\r\n        /*可编辑控制*/\r\n        const {editComputed} = useEdit()\r\n        /*样式控制*/\r\n        useStyle({status: DEFAULT_STATUS})\r\n        /*格式化属性*/\r\n        const {propsState} = useProps(props, {\r\n            min: useProps.NUMBER,\r\n            max: useProps.NUMBER,\r\n            itemWidth: useProps.NUMBER,\r\n        })\r\n        /*绑定值*/\r\n        const modelValue = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        /*子组件Checkbox*/\r\n        const children = CheckboxGroupCollector.parent()\r\n        /*可用子组件*/\r\n        const activeChildren = computed(() => children.filter(({innerState: {props: {checkboxForAll, customReadonly}}}) => !checkboxForAll && !customReadonly))\r\n\r\n        /*可用子组件keys*/\r\n        const allKeys = computed((() => activeChildren.value.map(({innerState: {props: {val}}}) => val)))\r\n\r\n        /*当前选择状态*/\r\n        const checkStatus = computed(() => {\r\n            let hasCheck = false\r\n            let hasUncheck = false\r\n            if (!modelValue.value) {\r\n                return CheckboxStatus.uncheck\r\n            }\r\n            activeChildren\r\n                .value\r\n                .forEach(child => modelValue.value!\r\n                    .indexOf(child.innerState.props.val!) > -1 ? hasCheck = true : hasUncheck = true)\r\n\r\n            if (hasCheck && !hasUncheck) {\r\n                return CheckboxStatus.check\r\n            }\r\n            if (!hasCheck && hasUncheck) {\r\n                return CheckboxStatus.uncheck\r\n            }\r\n            return CheckboxStatus.minus\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 子组件用来获取状态工具函数\r\n             * @author  韦胜健\r\n             * @date    2020/11/4 11:26\r\n             */\r\n            getCheckStatus: (checkbox: typeof PlCheckbox.use.class): CheckboxStatus => {\r\n                const {innerState: {props: {checkboxForAll, val}}} = checkbox\r\n                if (checkboxForAll) {\r\n                    return checkStatus.value\r\n                } else {\r\n                    return !!modelValue.value && modelValue.value.indexOf(val!) > -1 ? CheckboxStatus.check : CheckboxStatus.uncheck\r\n                }\r\n            },\r\n            exceed: {\r\n                /**\r\n                 * 是否已经超出了max\r\n                 * @author  韦胜健\r\n                 * @date    2020/11/4 11:26\r\n                 */\r\n                max: (val: (string | number)[] | undefined) => {\r\n                    if (propsState.max == null) {\r\n                        return false\r\n                    }\r\n                    return !!val && val.length > propsState.max\r\n                },\r\n                /**\r\n                 * 是否已经超出了min\r\n                 * @author  韦胜健\r\n                 * @date    2020/11/4 11:26\r\n                 */\r\n                min: (val: (string | number)[] | undefined) => {\r\n                    if (propsState.min == null) {\r\n                        return false\r\n                    }\r\n                    return !val || val.length < propsState.min\r\n                }\r\n            },\r\n            changeValue: {\r\n                /**\r\n                 * 添加选项赋值\r\n                 * @author  韦胜健\r\n                 * @date    2020/11/4 11:26\r\n                 */\r\n                add: (val: (string | number)[]) => {\r\n                    if (utils.exceed.max(val)) {\r\n                        $$notice.warn(`最多可选 ${propsState.max} 个选项！`)\r\n                    } else {\r\n                        modelValue.value = val\r\n                    }\r\n                },\r\n                /**\r\n                 * 删除选项赋值\r\n                 * @author  韦胜健\r\n                 * @date    2020/11/4 11:26\r\n                 */\r\n                delete: (val: (string | number)[]) => {\r\n                    if (utils.exceed.min(val)) {\r\n                        $$notice.warn(`最少选择 ${propsState.min} 个选项！`)\r\n                    } else {\r\n                        modelValue.value = val\r\n                    }\r\n                }\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            /**\r\n             * 处理点击按钮事件\r\n             * @author  韦胜健\r\n             * @date    2020/11/4 11:27\r\n             */\r\n            clickCheckbox: (checkbox: typeof PlCheckbox.use.class) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                const {innerState: {props: {val, checkboxForAll}}} = checkbox\r\n\r\n                /*全选按钮*/\r\n                if (checkboxForAll) {\r\n                    if (checkStatus.value !== CheckboxStatus.check) {\r\n                        /*全选*/\r\n                        utils.changeValue.add([...allKeys.value as string[]])\r\n                    } else {\r\n                        /*取消全选*/\r\n                        utils.changeValue.delete([])\r\n                    }\r\n                    return\r\n                }\r\n\r\n                /*单个按钮*/\r\n                if (!val) {\r\n                    throw new Error('Checkbox: val is necessary when Checkbox in CheckboxGroup')\r\n                }\r\n                if (!modelValue.value) {\r\n                    return utils.changeValue.add([val])\r\n                }\r\n                const value = [...modelValue.value]\r\n                const index = value.indexOf(val)\r\n                if (index > -1) {\r\n                    /*删除*/\r\n                    value.splice(index, 1)\r\n                    utils.changeValue.delete(value)\r\n                } else {\r\n                    /*添加*/\r\n                    utils.changeValue.add([...value, val])\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                utils,\r\n                handler,\r\n                propsState,\r\n            },\r\n            render: () => !formItem ? slots.default() : (\r\n                <div class=\"pl-checkbox-group\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const CheckboxGroupCollector = useCollect(() => ({\r\n    parent: PlCheckboxGroup,\r\n    child: PlCheckbox,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport './checkbox-inner.scss'\r\nimport {CheckboxStatus} from \"../../utils/constant\";\r\n\r\nexport const PlCheckboxInner = designComponent({\r\n    name: 'pl-checkbox-inner',\r\n    props: {\r\n        disabled: {type: Boolean},\r\n        checkStatus: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const classes = useClass(() => [\r\n            'pl-checkbox-inner',\r\n            `pl-checkbox-inner-status-${props.checkStatus}`,\r\n            {\r\n                'pl-checkbox-inner-disabled': props.disabled,\r\n            }\r\n        ])\r\n\r\n        return {\r\n            render: () => (\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" class={classes.value}>\r\n                    {props.checkStatus === CheckboxStatus.check && <polyline points=\"22,50 45,75 75,25\" class=\"pl-checkbox-inner-check-polyline\"/>}\r\n                    {props.checkStatus === CheckboxStatus.minus && <rect x=\"15\" y=\"15\" width=\"70\" height=\"70\" class=\"pl-checkbox-inner-minus-polyline\"/>}\r\n                </svg>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {computed, Transition} from 'vue';\r\nimport {CheckboxStatus, DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {CheckboxGroupCollector} from \"../checkbox-group/checkbox-group\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {PlCheckboxInner} from \"../checkbox-inner/checkbox-inner\";\r\n\r\nexport const PlCheckbox = designComponent({\r\n    name: 'pl-checkbox',\r\n    directives: {ClickWave},\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {},\r\n        val: {type: [String, Number]},                              // 多选时选中值\r\n        label: {type: String},                                      // 显示文本\r\n        width: {type: [String, Number]},                            // 宽度\r\n        trueValue: {default: true},                                 // 选中实际值\r\n        falseValue: {default: false},                               // 非选中值\r\n\r\n        checkboxForAll: {type: Boolean},                            // 是否为 checkbox 全选按钮\r\n        checkStatus: {type: String},                                // checkbox 自定义状态\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onClick: (e?: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        /*group父组件*/\r\n        const checkboxGroup = CheckboxGroupCollector.child({injectDefaultValue: null})\r\n        /*绑定值*/\r\n        const modelValue = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        /*格式化属性值*/\r\n        const {propsState} = useProps(props, {\r\n            label: useProps.PROMISE,\r\n            width: useProps.NUMBER,\r\n        })\r\n        /*插槽*/\r\n        const {slots} = useSlots(['label'])\r\n        /*作用域插槽*/\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {checked: Boolean, status: String, click: Function},\r\n        })\r\n        /*可编辑控制*/\r\n        const {editComputed} = useEdit()\r\n        /*样式控制*/\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        /*当前组件内部变量引用*/\r\n        const refer = {innerState: {props, editComputed}}\r\n        /*当前选中状态*/\r\n        const checkStatus = computed((): CheckboxStatus => {\r\n            if (!!props.checkStatus) {\r\n                return props.checkStatus as CheckboxStatus\r\n            }\r\n            if (!!checkboxGroup) {\r\n                return checkboxGroup.utils.getCheckStatus(refer)\r\n            } else {\r\n                return modelValue.value === props.trueValue ? CheckboxStatus.check : CheckboxStatus.uncheck\r\n            }\r\n        })\r\n\r\n        const classes = useClass(() => [\r\n            'pl-checkbox',\r\n            `pl-checkbox-status-${styleComputed.value.status}`,\r\n            `pl-checkbox-size-${styleComputed.value.size}`,\r\n            `pl-checkbox-check-status-${checkStatus.value}`,\r\n            {'pl-checkbox-disabled': editComputed.value.disabled},\r\n        ])\r\n\r\n        /*当前选项宽度*/\r\n        const targetWidth = computed(() => {\r\n            if (!!propsState.width) return propsState.width\r\n            if (!!checkboxGroup && !!checkboxGroup.propsState.itemWidth) return checkboxGroup.propsState.itemWidth\r\n            return null\r\n        })\r\n\r\n        const styles = useStyles(style => {\r\n            style.width = unit(targetWidth.value)\r\n        })\r\n\r\n        const handler = {\r\n            clickEl: (e?: MouseEvent) => {\r\n                if (!!e) {\r\n                    e.stopPropagation()\r\n                }\r\n                emit.onClick(e)\r\n                if (!editComputed.value.editable || props.customReadonly) {\r\n                    return\r\n                }\r\n                if (!!checkboxGroup) {\r\n                    return checkboxGroup.handler.clickCheckbox(refer)\r\n                }\r\n                modelValue.value = checkStatus.value === CheckboxStatus.check ? props.falseValue : props.trueValue\r\n\r\n                if (!!e) {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer,\r\n            render: () => scopedSlots.default(\r\n                {\r\n                    checked: checkStatus.value === CheckboxStatus.check,\r\n                    status: checkStatus.value,\r\n                    click: handler.clickEl,\r\n                },\r\n                (\r\n                    <div class={classes.value}\r\n                         style={styles.value}\r\n                         onClick={handler.clickEl}\r\n                         v-click-wave={{disabled: !editComputed.value.editable}}>\r\n                        <span class=\"plain-click-node\">\r\n                            <Transition name=\"pl-transition-scale\" mode=\"out-in\">\r\n                                <PlCheckboxInner\r\n                                    checkStatus={checkStatus.value}\r\n                                    key={checkStatus.value}\r\n                                    disabled={editComputed.value.disabled!}/>\r\n                            </Transition>\r\n                        </span>\r\n                        {slots.label(!!propsState.label ? <span class=\"pl-checkbox-label\">{propsState.label}</span> : null)}\r\n                    </div>\r\n                ))\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport './grid.scss'\r\nimport {PropType} from 'vue';\r\n\r\nexport enum GridAlign {\r\n    left = 'left',\r\n    center = 'center',\r\n    right = 'right',\r\n}\r\n\r\nexport enum GridJustify {\r\n    start = \"start\",\r\n    end = \"start\",\r\n    center = \"start\",\r\n    'space-around' = \"space-around\",\r\n    'space-between' = \"space-between\",\r\n}\r\n\r\nexport const PlRow = designComponent({\r\n    name: 'pl-row',\r\n    props: {\r\n        type: {type: String as PropType<undefined | null | string>},        //类型,type\r\n        align: {type: String as PropType<GridAlign>},                       //对其方式,left|center|right\r\n        justify: {type: String as PropType<GridJustify>},                   //内容弹性布局方式,start,end,center,space-around,space-between\r\n        gutter: {type: [Number, String], default: 0},                       //间隔\r\n    },\r\n    provideRefer: true,\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots()\r\n        const classes = useClass(() => [\r\n            'pl-row',\r\n            {\r\n                [`pl-row-${props.type}`]: !!props.type,\r\n                [`pl-row-${props.type}-${props.align}`]: !!props.align,\r\n                [`pl-row-${props.type}-${props.justify}`]: !!props.justify,\r\n            }\r\n        ])\r\n        const styles = useStyles(style => {\r\n            const gutter = Number(props.gutter)\r\n            if (gutter !== 0) {\r\n                style = {\r\n                    marginLeft: unit(gutter / -2),\r\n                    marginRight: unit(gutter / -2)\r\n                };\r\n            }\r\n            return style\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlCheckbox} from './checkbox'\r\nimport './checkbox.scss'\r\n\r\nexport default createComponentPlugin(PlCheckbox)","import {PlCheckboxGroup} from './checkbox-group'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlCheckboxGroup)","import {PlCheckboxInner} from './checkbox-inner'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlCheckboxInner)","import {PlRow} from \"./row\";\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlRow)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlRow} from \"../grid/row\";\r\n\r\nexport default createComponentPlugin(PlRow)","import {designComponent} from \"../../use/designComponent\";\r\nimport {SingleClass, useClass} from \"../../use/useClasses\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {PropType} from 'vue';\r\nimport {PlRow} from \"./row\";\r\n\r\nexport type GridColSize = number | {\r\n    span: number,\r\n    offset: number,\r\n}\r\n\r\nexport const PlCol = designComponent({\r\n    name: 'pl-col',\r\n    props: {\r\n        span: {type: [Number, String] as PropType<string | number>},\r\n        order: {type: [Number, String] as PropType<string | number>},\r\n        offset: {type: [Number, String] as PropType<string | number>},\r\n        push: {type: [Number, String] as PropType<string | number>},\r\n        pull: {type: [Number, String] as PropType<string | number>},\r\n        className: String,\r\n        xs: {type: [Number, Object] as PropType<GridColSize>},\r\n        sm: {type: [Number, Object] as PropType<GridColSize>},\r\n        md: {type: [Number, Object] as PropType<GridColSize>},\r\n        lg: {type: [Number, Object] as PropType<GridColSize>},\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        const row = PlRow.use.inject()\r\n        const classes = useClass(() => {\r\n            let classList = [\r\n                'pl-col',\r\n                {\r\n                    [`pl-col-span-${props.span}`]: props.span,\r\n                    [`pl-col-order-${props.order}`]: props.order,\r\n                    [`pl-col-offset-${props.offset}`]: props.offset,\r\n                    [`pl-col-push-${props.push}`]: props.push,\r\n                    [`pl-col-pull-${props.pull}`]: props.pull,\r\n                    [`${props.className}`]: !!props.className\r\n                }\r\n            ] as SingleClass[];\r\n\r\n            const sizeProps = props;\r\n            (['xs', 'sm', 'md', 'lg'] as ['xs', 'sm', 'md', 'lg']).forEach(size => {\r\n                if (typeof sizeProps[size] === 'number') {\r\n                    classList.push(`pl-col-${size}-${sizeProps[size]}`);\r\n                } else if (typeof sizeProps[size] === 'object') {\r\n                    let obj = sizeProps[size];\r\n                    !!obj && Object.entries(obj).forEach(([key, val]) => classList.push(key !== 'span' ? `pl-col-${size}-${key}-${val}` : `pl-col-span-${size}-${val}`))\r\n                }\r\n            });\r\n            return classList;\r\n        })\r\n        const styles = useStyles(style => {\r\n            if ((Number(row.props.gutter)) !== 0) {\r\n                style = {\r\n                    paddingLeft: (Number(row.props.gutter)) / 2 + 'px',\r\n                    paddingRight: (Number(row.props.gutter)) / 2 + 'px'\r\n                };\r\n            }\r\n            return style;\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlCol} from \"../grid/col\";\r\n\r\nexport default createComponentPlugin(PlCol)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {CheckboxStatus, DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {inject} from 'vue';\r\n\r\nexport const PlRadioGroup = designComponent({\r\n    name: 'pl-radio-group',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {},\r\n        itemWidth: {type: [String, Number]},                       // 每一个单选框的宽度\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit}}) {\r\n\r\n        const formItem = inject('@@pl-form-item', null)\r\n\r\n        const {slots} = useSlots()\r\n        useEdit()\r\n        useStyle({status: DEFAULT_STATUS})\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const {propsState} = useProps(props, {\r\n            itemWidth: useProps.NUMBER,\r\n        })\r\n\r\n        const handler = {\r\n            onClickRadio: (val: any) => {\r\n                model.value = val\r\n            },\r\n        }\r\n        const utils = {\r\n            getCheckStatus: (val: any) => {\r\n                return val === model.value ? CheckboxStatus.check : CheckboxStatus.uncheck\r\n            }\r\n        }\r\n        return {\r\n            refer: {\r\n                propsState,\r\n                handler,\r\n                utils,\r\n            },\r\n            render: () => !formItem ? slots.default() : (\r\n                <div class=\"pl-radio-group\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlRadioGroup} from './radio-group'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlRadioGroup)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport './radio-inner.scss'\r\n\r\nexport const PlRadioInner = designComponent({\r\n    name: 'pl-radio-inner',\r\n    props: {\r\n        checkStatus: {type: String},                // check,uncheck\r\n    },\r\n    setup({props}) {\r\n\r\n        const classes = useClass(() => [\r\n            'pl-radio-inner',\r\n            `pl-radio-inner-${props.checkStatus}`,\r\n        ])\r\n\r\n        return {\r\n            render: () => (\r\n                <svg class={classes.value} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\">\r\n                    {props.checkStatus === 'check' && <circle cx=\"50\" cy=\"50\" r=\"30\"/>}\r\n                </svg>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {computed, Transition} from 'vue';\r\nimport {CheckboxStatus, DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport './radio.scss'\r\nimport Group from '../radio-group'\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {PlRadioInner} from \"../radio-inner/radio-inner\";\r\n\r\nexport const PlRadio = designComponent({\r\n    name: 'pl-radio',\r\n    directives: {ClickWave},\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {},                                             // 双向绑定值\r\n        val: {type: [String, Number]},                              // 在group中的唯一标识\r\n        label: {type: String},                                      // 显示文本\r\n        width: {type: [String, Number]},                            // 宽度\r\n        trueValue: {default: true},                                 // 真值\r\n        falseValue: {default: false},                               // 假值\r\n        checkStatus: {type: String},                                // 自定义选中状态\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onClick: (e?: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const group = Group.use.inject(null)\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {checked: Boolean, status: String, click: Function},\r\n        })\r\n        const {slots} = useSlots(['label'])\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        const {propsState} = useProps(props, {\r\n            width: useProps.NUMBER,\r\n        })\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const checkStatus = computed(() => {\r\n            if (!!props.checkStatus) {\r\n                return props.checkStatus as CheckboxStatus\r\n            }\r\n            if (!!group) {\r\n                return group.utils.getCheckStatus(props.val)\r\n            } else {\r\n                return model.value === props.trueValue ? CheckboxStatus.check : CheckboxStatus.uncheck\r\n            }\r\n        })\r\n\r\n        const classes = useClass(() => [\r\n            'pl-radio',\r\n            `pl-radio-status-${styleComputed.value.status}`,\r\n            `pl-radio-size-${styleComputed.value.size}`,\r\n            {\r\n                'pl-radio-checked': checkStatus.value === CheckboxStatus.check,\r\n                'pl-radio-disabled': editComputed.value.disabled,\r\n            },\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            let width: number | null = null;\r\n            if (!!propsState.width) {\r\n                width = propsState.width as number\r\n            }\r\n            if (!!group && !!group.propsState.itemWidth) {\r\n                width = group.propsState.itemWidth as number\r\n            }\r\n            if (width != null) {\r\n                style.width = unit(width)\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            click: (e?: MouseEvent) => {\r\n                if (!!e) {\r\n                    e.stopPropagation()\r\n                }\r\n                emit.onClick(e)\r\n                if (!editComputed.value.editable || props.customReadonly) {\r\n                    return\r\n                }\r\n                if (!!group) {\r\n                    group.handler.onClickRadio(props.val)\r\n                } else {\r\n                    model.value = checkStatus.value === CheckboxStatus.check ? props.falseValue : props.trueValue\r\n                }\r\n\r\n                if (!!e) {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                }\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n                if (getKey(e) === KEY.space) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    handler.click(e as any)\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                return scopedSlots.default({\r\n                    checked: checkStatus.value === CheckboxStatus.check,\r\n                    status: checkStatus.value,\r\n                    click: handler.click,\r\n                }, (\r\n                    <div\r\n                        class={classes.value}\r\n                        style={styles.value}\r\n                        tabindex={0}\r\n                        v-click-wave={{disabled: !editComputed.value.editable}}\r\n                        onClick={handler.click}\r\n                        onKeydown={handler.keydown}\r\n                    >\r\n                        <span class=\"plain-click-node\">\r\n                            <Transition name=\"pl-transition-fade\" mode=\"out-in\">\r\n                                <PlRadioInner checkStatus={checkStatus.value} key={checkStatus.value}/>\r\n                            </Transition>\r\n                        </span>\r\n                        {slots.label(<span class=\"pl-radio-label\">{props.label}</span>)}\r\n                    </div>\r\n                ))\r\n            }\r\n        }\r\n    },\r\n})","import {PlRadio} from './radio'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlRadio)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlRadioInner} from './radio-inner'\r\n\r\nexport default createComponentPlugin(PlRadioInner)","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, StyleShape, StyleSize, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {computed, onBeforeUnmount, reactive, ref, Teleport, Transition, watch} from 'vue';\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {KeyboardService, KeyboardServiceOption} from \"../keyboard\";\r\nimport './dialog.scss'\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport Button from '../button'\r\nimport LoadingMask from '../loading-mask'\r\n\r\nexport const PlDialog =  designComponent({\r\n    name: 'pl-dialog',\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n\r\n        modelValue: {type: Boolean},                                            // model绑定是否打开对话框\r\n\r\n        height: {type: [String, Number]},                                       // 对话框高度\r\n        width: {type: [String, Number]},                                        // 对话框宽度\r\n        minHeight: {type: [String, Number]},                                    // 最小高度\r\n        minWidth: {type: [String, Number]},                                     // 最小宽度\r\n        maxHeight: {type: [String, Number]},                                    // 最大高度\r\n        maxWidth: {type: [String, Number]},                                     // 最大宽度\r\n        fullHeight: {type: Boolean},                                            // 撑满高度\r\n        fullWidth: {type: Boolean},                                             // 撑满宽度\r\n\r\n        wrapperPadding: {type: [String, Boolean], default: '15vh 5vw'},         // body的内边距\r\n        contentPadding: {type: Boolean, default: true},                         // 内容内边距\r\n        showHead: {type: Boolean, default: true},                               // 是否展示对话框标题栏\r\n        transition: {type: String, default: 'pl-transition-dialog'},            // 弹框动画, pl-transition-dialog，pl-transition-dialog-top,pl-transition-dialog-left,pl-transition-dialog-right,pl-transition-dialog-bottom\r\n\r\n        title: {type: [String, Object], default: '提示'},                        // 对话框标题\r\n        fullscreen: {type: Boolean},                                            // 是否全屏\r\n        mask: {type: Boolean, default: true},                                   // 是否需要遮罩\r\n        dialogClass: {type: String},                                            // 对话框内容自定义类名\r\n        serviceClass: {type: String},                                           // 对话框服务内容自定义类名\r\n        cancelOnClickMask: {type: Boolean, default: true},                      // 是否在点击遮罩的时候关闭对话框\r\n        showClose: {type: Boolean, default: true},                              // 是否展示关闭按钮\r\n        beforeClose: Function,                                                  // 关闭之前的回调\r\n        center: {type: Boolean},                                                // 是否纵向居中对其\r\n        destroyOnClose: {type: Boolean, default: true},                         // 关闭的时候是否销毁内容\r\n\r\n        confirmButton: {type: Boolean},                                         // 是否显示确认按钮\r\n        cancelButton: {type: Boolean},                                          // 是否显示取消按钮\r\n        closeOnConfirm: {type: Boolean, default: true},                         // 是否点击确认按钮之后自动关闭\r\n        closeOnCancel: {type: Boolean, default: true},                          // 是否点击取消按钮之后自动关闭\r\n        confirmButtonText: {type: [String, Object], default: '确认'},            // 确认按钮文本\r\n        cancelButtonText: {type: [String, Object], default: '取消'},             // 取消按钮文本\r\n        confirmOnEnter: {type: Boolean, default: true},                         // 是否在点击 enter 按键的时候触发 confirm 事件\r\n        cancelOnEsc: {type: Boolean, default: true},                            // 是否在点击 esc 按键的时候出发 cancel事件\r\n        disabledCancel: {type: Boolean},                                        // 禁用cancel，当任何动作触发cancel时，不做任何处理，适用于开发者完全控制对话框的情况，对话框内置的按钮以及键盘事件不做任何处理\r\n        disabledConfirm: {type: Boolean},                                       // 禁用confirm，当任何动作触发confirm时，不做任何处理,适用于开发者完全控制对话框的情况,对话框内置的按钮以及键盘事件不做任何处理\r\n\r\n        vertical: {type: String, default: 'start'},                             // 纵向对其方式：start,center,end\r\n        horizontal: {type: String, default: 'center'},                          // 横向对其方式：start,center,end\r\n        loading: {type: Boolean},                                               // 弹出框添加 加载中的遮罩\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true,\r\n        onConfirm: () => true,\r\n        onCancel: () => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {slots} = useSlots(['head', 'foot'], true)\r\n        const {refs} = useRefs({\r\n            body: HTMLDivElement,\r\n        })\r\n        const state = reactive({\r\n            zIndex: nextIndex(),\r\n            loading: false,\r\n        })\r\n        const isLoading = computed(() => state.loading || props.loading)\r\n        const {styleComputed} = useStyle({status: undefined})\r\n        const model = ref(false)\r\n        const {propsState} = useProps(props, {\r\n            height: useProps.NUMBER,\r\n            width: useProps.NUMBER,\r\n            minHeight: useProps.NUMBER,\r\n            minWidth: useProps.NUMBER,\r\n            maxHeight: useProps.NUMBER,\r\n            maxWidth: useProps.NUMBER,\r\n            title: useProps.PROMISE,\r\n        }) as {\r\n            propsState: {\r\n                height: number,\r\n                width: number,\r\n                minHeight: number,\r\n                minWidth: number,\r\n                maxHeight: number,\r\n                maxWidth: number,\r\n                title: string,\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n        const wrapperStyles = computed(() => ({\r\n            alignItems: props.center ? null : `flex-${props.vertical}`.replace('flex-center', 'center'),\r\n            justifyContent: `flex-${props.horizontal}`.replace('flex-center', 'center'),\r\n            zIndex: state.zIndex,\r\n            padding: !!props.center ? null : props.wrapperPadding,\r\n        }))\r\n\r\n        const wrapperClasses = useClass(() => [\r\n            'pl-dialog',\r\n            props.transition,\r\n            props.dialogClass,\r\n            props.serviceClass,\r\n            {\r\n                'pl-dialog-fullscreen': props.fullscreen,\r\n                'pl-dialog-no-mask': !props.mask,\r\n                'pl-dialog-vertical-center': props.center,\r\n                'pl-dialog-no-content-padding': !props.contentPadding,\r\n            }\r\n        ])\r\n\r\n        const bodyClasses = computed(() => [\r\n            'pl-dialog-body',\r\n            `pl-dialog-body-shape-${styleComputed.value.shape}`,\r\n        ])\r\n\r\n        const hasHead = computed(() => {\r\n            return props.showHead\r\n        })\r\n        const hasFoot = computed(() => {\r\n            return slots.foot.isExist() || props.confirmButton || props.cancelButton\r\n        })\r\n\r\n        const contentStyle = computed(() => {\r\n            let height = props.fullHeight ? `calc(100vh - ${(!!hasHead.value ? 40 : 0) + (hasFoot.value ? 60 : 0)}px)` : propsState.height\r\n            let width = props.fullWidth ? '100vw' : propsState.width\r\n\r\n            let minHeight = propsState.minHeight !== undefined ? propsState.minHeight : height !== undefined ? null : '15vh'\r\n            let minWidth = propsState.minWidth !== undefined ? propsState.minWidth : width !== undefined ? null : '336px'\r\n            let maxHeight = propsState.maxHeight !== undefined ? propsState.maxHeight : height !== undefined ? null : '80vh'\r\n            let maxWidth = propsState.maxWidth !== undefined ? propsState.maxWidth : width !== undefined ? null : '60vw'\r\n\r\n            return {\r\n                height: unit(height),\r\n                width: unit(width),\r\n                minHeight: unit(minHeight),\r\n                minWidth: unit(minWidth),\r\n                maxHeight: unit(maxHeight),\r\n                maxWidth: unit(maxWidth),\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n        const handler = {\r\n            keyboardEventOption: {\r\n                \"enter\": () => {\r\n                    if (isLoading.value) return\r\n                    if (!!props.confirmOnEnter) {\r\n                        methods.confirm()\r\n                    }\r\n                },\r\n                \"esc\": () => {\r\n                    if (isLoading.value) return\r\n                    if (!!props.cancelOnEsc) {\r\n                        methods.cancel()\r\n                    }\r\n                }\r\n            } as KeyboardServiceOption,\r\n            clickWrapper: (e: MouseEvent) => {\r\n                if (isLoading.value) {\r\n                    return\r\n                }\r\n                if (!!props.cancelOnClickMask) {\r\n                    if (!!refs.body && !refs.body.contains(e.target as HTMLElement)) {\r\n                        methods.cancel()\r\n                    }\r\n                }\r\n            },\r\n            clickClose: () => {\r\n                if (isLoading.value) {\r\n                    return\r\n                }\r\n                methods.cancel()\r\n            }\r\n        }\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n        const methods = {\r\n            show: async () => {\r\n                if (model.value) return\r\n                KeyboardService.listen(handler.keyboardEventOption)\r\n                KeyboardService.cancelActiveElement()\r\n                state.zIndex = nextIndex()\r\n                await methods.open()\r\n            },\r\n            async hide() {\r\n                if (!model.value) return\r\n                KeyboardService.unbindListener(handler.keyboardEventOption)\r\n                await this.close()\r\n            },\r\n            confirm() {\r\n                if (props.disabledConfirm) {\r\n                    return\r\n                }\r\n                if (props.closeOnConfirm) {\r\n                    methods.hide()\r\n                }\r\n                emit.onConfirm()\r\n            },\r\n            cancel() {\r\n                if (props.disabledCancel) {\r\n                    return\r\n                }\r\n                if (props.closeOnCancel) {\r\n                    methods.hide()\r\n                }\r\n                emit.onCancel()\r\n            },\r\n            open() {\r\n                model.value = true\r\n                emit.onUpdateModelValue(model.value)\r\n            },\r\n            async close() {\r\n                try {\r\n                    if (!!props.beforeClose) {\r\n                        state.loading = true\r\n                        let flag = await props.beforeClose!()\r\n                        if (flag === false) return\r\n                    }\r\n                    model.value = false\r\n                    emit.onUpdateModelValue(model.value)\r\n                } catch (e) {\r\n                    console.error(e)\r\n                } finally {\r\n                    state.loading = false\r\n                }\r\n            },\r\n        }\r\n        /*---------------------------------------watch-------------------------------------------*/\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            val ? setTimeout(methods.show, 100) : methods.hide()\r\n        }, {immediate: true})\r\n\r\n        onBeforeUnmount(() => {\r\n            KeyboardService.unbindListener(handler.keyboardEventOption)\r\n            if (model.value) {\r\n                methods.hide()\r\n            }\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n\r\n                const Wrapper: any = props.destroyOnClose ? <div/> : <div v-show={model.value}/>\r\n\r\n                return (\r\n                    <Teleport to=\".pl-root-service-container\">\r\n                        <Transition name={props.transition}>\r\n                            {(!props.destroyOnClose ? true : model.value) && <Wrapper onClick={handler.clickWrapper} style={wrapperStyles.value as any} class={wrapperClasses.value}>\r\n                                <div class={bodyClasses.value} ref=\"body\">\r\n                                    {hasHead.value && <div class=\"pl-dialog-head\">\r\n                                        {slots.head(<span class=\"pl-dialog-head-title\">{propsState.title}</span>)}\r\n                                        {!!props.showClose && (\r\n                                            <div class=\"pl-dialog-head-close\">\r\n                                                <Button icon=\"el-icon-close\"\r\n                                                        shape={StyleShape.round}\r\n                                                        mode=\"text\"\r\n                                                        size={StyleSize.large}\r\n                                                        onClick={handler.clickClose}/>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>}\r\n                                    <div class=\"pl-dialog-content\" style={contentStyle.value as any}>\r\n                                        {slots.default()}\r\n                                    </div>\r\n                                    {hasFoot.value && <div class=\"pl-dialog-foot\">\r\n                                        {slots.foot()}\r\n\r\n                                        {!!props.cancelButton && <Button label={props.cancelButtonText} mode=\"stroke\" onClick={methods.cancel}/>}\r\n                                        {!!props.confirmButton && <Button label={props.confirmButtonText} onClick={methods.confirm}/>}\r\n                                    </div>}\r\n                                    <LoadingMask v-model={isLoading.value}/>\r\n                                </div>\r\n                            </Wrapper>}\r\n                        </Transition>\r\n                    </Teleport>\r\n                )\r\n            }\r\n        }\r\n    }\r\n})","import {StyleStatus} from \"../../use/useStyle\";\r\nimport {RequireFormat, VNodeChild} from \"../../shims\";\r\nimport Dialog from '../dialog'\r\nimport {registryRootService} from \"../root/registryRootService\";\r\nimport {createDefaultManager} from \"../root/createDefaultManager\";\r\nimport Service from './dialog-service'\r\nimport {App} from 'vue';\r\nimport {DialogService} from \"../../index\";\r\nimport {installPlugin} from \"../../utils/installPlugin\";\r\nimport {defer} from \"../../utils/defer\";\r\nimport {getServiceWithoutContext} from \"../../utils/getServiceWithoutContext\";\r\n\r\nexport enum DialogServiceEditType {\r\n    input = 'input',\r\n    textarea = 'textarea'\r\n}\r\n\r\nexport interface DialogServiceOption {\r\n    title?: string,                                                 // 标题\r\n    message?: string,                                               // 提示的消息\r\n    editType?: DialogServiceEditType,                               // 输入类型\r\n    editValue?: string | number,                                    // 输入初始内容\r\n    editReadonly?: boolean,                                         // 输入框只读\r\n    status?: StyleStatus | null,                                    // 对话框状态\r\n    render?: () => VNodeChild,                                      // 自定义对话框内容\r\n    renderHead?: () => VNodeChild,                                  // 自定义对话框标题内容\r\n    renderFoot?: () => VNodeChild,                                  // 自定义对话框底部内容\r\n    confirmButton?: boolean,                                        // 是否显示确认按钮\r\n    confirmButtonText?: string,                                     // 确认按钮文本\r\n    onConfirm?: (editValue?: string) => void | Promise<void>,       // 确认按钮处理函数\r\n    cancelButton?: boolean,                                         // 是否显示删除按钮\r\n    cancelButtonText?: string,                                      // 删除按钮文本\r\n    onCancel?: () => void | Promise<void>,                          // 删除按钮文本\r\n    dialogProps?: Partial<typeof Dialog.use.props>,                 // 对话框属性\r\n}\r\n\r\nexport type DialogServiceFormatOption = RequireFormat<DialogServiceOption, 'status'> & {\r\n    close: () => void\r\n}\r\n\r\ntype DialogServiceFunction = (message: string | DialogServiceOption, option?: DialogServiceOption) => void\r\ntype DialogService = DialogServiceFunction & { [k in StyleStatus]: DialogServiceFunction } & { confirm: DialogServiceFunction }\r\n\r\nfunction formatOption(o: DialogServiceOption): DialogServiceFormatOption {\r\n    return Object.assign(o, {\r\n        status: o.status === null ? null : (o.status || 'primary'),\r\n    }) as DialogServiceFormatOption\r\n}\r\n\r\nconst getDialogService = registryRootService(\r\n    'dialog',\r\n    createDefaultManager('pl-dialog-manager', Service),\r\n    (getManager) => {\r\n        const service = (message: string | DialogServiceOption, option?: DialogServiceOption) => {\r\n            const o: DialogServiceOption = typeof message === \"string\" ? {message} : message\r\n            if (!!option) {\r\n                Object.assign(o, option)\r\n            }\r\n            const fo = formatOption(o)\r\n            getManager().then(manager => manager.service(fo))\r\n            return fo\r\n        }\r\n\r\n        return Object.assign(\r\n            service,\r\n            Object.keys(StyleStatus).reduce((prev: any, status: any) => {\r\n                prev[status] = function (message: string | DialogServiceOption, option?: DialogServiceOption) {\r\n                    const o = typeof message === \"object\" ? message : {message}\r\n                    if (!!option) {\r\n                        Object.assign(o, option)\r\n                    }\r\n                    o.status = status\r\n                    return service(o)\r\n                }\r\n                return prev\r\n            }, {\r\n                confirm: (message: string | DialogServiceOption, option?: DialogServiceOption) => {\r\n                    const dfd = defer()\r\n                    const o = typeof message === \"object\" ? message : {message}\r\n                    if (!!option) {\r\n                        Object.assign(o, option)\r\n                    }\r\n                    o.status = o.status || StyleStatus.info\r\n                    o.confirmButton = true\r\n                    o.cancelButton = true\r\n                    const {onConfirm} = o\r\n                    o.onConfirm = () => {\r\n                        dfd.resolve();\r\n                        onConfirm && onConfirm()\r\n                    }\r\n                    service(o)\r\n                    return dfd.promise\r\n                }\r\n            })\r\n        ) as DialogService\r\n    }\r\n)\r\n\r\nexport const $$dialog = getServiceWithoutContext(getDialogService)\r\n\r\nexport default {\r\n    install(app: App) {\r\n        installPlugin(app, Dialog)\r\n        app.mixin({\r\n            computed: {\r\n                $dialog() {return getDialogService(this)},\r\n            },\r\n        })\r\n    },\r\n}","import {PlDialog} from './dialog'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlDialog)","import {computed, reactive, ref} from 'vue';\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {DialogServiceFormatOption} from \"./index\";\r\nimport Input from '../input'\r\nimport Dialog from '../dialog'\r\nimport Icon from '../icon'\r\nimport {STATUS} from \"../../utils/constant\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport './dialog-service.scss'\r\nimport {VNodeChild} from \"../../shims\";\r\nimport {createDefaultService} from \"../root/createDefaultService\";\r\n\r\n/**\r\n * 用来区分 DialogServiceOption中的选项与pl-dialog组件的属性\r\n * @author  韦胜健\r\n * @date    2020/11/7 20:04\r\n */\r\nconst OptionKeys = [\r\n    'title',\r\n    'message',\r\n    'editType',\r\n    'editValue',\r\n    'editReadonly',\r\n    'status',\r\n    'render',\r\n    'onConfirm',\r\n    'onCancel',\r\n    'close',\r\n]\r\n\r\nexport default createDefaultService({\r\n    name: 'pl-dialog-service',\r\n    setup(option: DialogServiceFormatOption) {\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n        })\r\n\r\n        const isShow = ref(false)\r\n\r\n        const state = reactive({\r\n            key: 0,\r\n            option,\r\n            editValue: null as null | string,\r\n        })\r\n\r\n        const targetOption = computed(() => {\r\n            let option = {} as DialogServiceFormatOption\r\n            let binding = {} as Partial<typeof Dialog.use.props>\r\n\r\n            Object.keys(state.option).forEach((key) => {\r\n                if (OptionKeys.indexOf(key) > -1) {\r\n                    (option as any)[key] = (state.option as any)[key]\r\n                } else {\r\n                    (binding as any)[key] = (state.option as any)[key]\r\n                }\r\n            })\r\n\r\n            return {\r\n                option,\r\n                binding,\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            confirm: () => {\r\n                if (!!targetOption.value.option.onConfirm) {\r\n                    targetOption.value.option.onConfirm(!targetOption.value.option.editType ? undefined : state.editValue as string)\r\n                }\r\n            },\r\n            cancel: () => {\r\n                if (!!targetOption.value.option.onCancel) {\r\n                    targetOption.value.option.onCancel()\r\n                }\r\n            },\r\n        }\r\n\r\n        async function service(option: DialogServiceFormatOption) {\r\n            option.close = hide\r\n            state.option = option\r\n            state.key++\r\n            isShow.value = true\r\n            if (!!option.editType) {\r\n                state.editValue = option.editValue as string\r\n                await delay(300)\r\n                refs.input!.methods.focus()\r\n            }\r\n            return hide\r\n        }\r\n\r\n        function hide() {\r\n            isShow.value = false\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                service,\r\n                hide,\r\n                isShow,\r\n                isOpen: isShow,\r\n            },\r\n            render: () => {\r\n                let {option, binding} = targetOption.value\r\n                let status = option.status\r\n                let serviceClass = 'pl-dialog-service';\r\n\r\n                if (!!status) {\r\n                    serviceClass += ` pl-dialog-service-status-${status}`\r\n                }\r\n\r\n                /*---------------------------------------head-------------------------------------------*/\r\n                let head = <div class=\"pl-dialog-service-head\">\r\n                    {!!status && STATUS[status] && <Icon class=\"pl-dialog-service-status-icon\" icon={STATUS[status].icon}/>}\r\n                    {!!option.renderHead ? option.renderHead() : (option.title || '提示')}\r\n                </div>\r\n                /*---------------------------------------content-------------------------------------------*/\r\n                let content: VNodeChild;\r\n                if (!!option.editType) {\r\n                    binding = {...binding}\r\n                    if (option.editType !== 'input') {\r\n                        (binding as any).height = binding.height || '300px';\r\n                        (binding as any).width = binding.width || '400px';\r\n                    } else {\r\n                        (binding as any).minHeight = null\r\n                    }\r\n                    serviceClass += ` pl-dialog-service-edit`\r\n                    content = <Input ref=\"input\"\r\n                                     block\r\n                                     minHeight={null as any}\r\n                                     maxHeight={null as any}\r\n                                     autoHeight={false}\r\n                                     v-model={state.editValue}\r\n                                     readonly={option.editReadonly}\r\n                                     textarea={option.editType === 'textarea'}/>\r\n                } else if (!!option.message) {\r\n                    content = (\r\n                        <div class=\"pl-dialog-service-item-message\">\r\n                            {option.message}\r\n                        </div>\r\n                    )\r\n                } else if (!!option.render) {\r\n                    content = option.render()\r\n                }\r\n                /*---------------------------------------foot-------------------------------------------*/\r\n                let foot = !option.renderFoot ? null : option.renderFoot()\r\n\r\n                return (\r\n                    <Dialog\r\n                        serviceClass={serviceClass}\r\n                        v-model={isShow.value}\r\n                        key={state.key}\r\n\r\n                        onConfirm={handler.confirm}\r\n                        onCancel={handler.cancel}\r\n\r\n                        {...binding}\r\n                        v-slots={{\r\n                            default: !!content ? () => content : null,\r\n                            head: !!head ? () => head : null,\r\n                            foot: !!foot ? () => foot : null,\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n","import {PlScroll} from './scroll'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlScroll)","import {createApp} from 'vue'\r\nimport {ComponentPlugin} from \"../shims\";\r\nimport {installPlugin} from \"./installPlugin\";\r\n\r\nexport function newInstance<Component>(component: Component, config: {\r\n    el?: HTMLElement,\r\n    parentNode?: HTMLElement,\r\n    plugins?: ComponentPlugin[],\r\n} = {}) {\r\n    let {el, parentNode} = config\r\n    if (!el) {\r\n        el = document.createElement('div')\r\n        if (!!parentNode) {\r\n            parentNode.appendChild(el)\r\n        } else {\r\n            document.body.appendChild(el)\r\n        }\r\n    }\r\n    const app = createApp(component)\r\n    if (!!config.plugins) {\r\n        config.plugins.forEach(plugin => installPlugin(app, plugin))\r\n    }\r\n    const ins = app.mount(el) as Component extends { use: { class: infer C } } ? C : any\r\n    return {\r\n        app,\r\n        ins,\r\n        el,\r\n    }\r\n}","import {Directive, reactive, App} from 'vue';\r\nimport {designComponent} from \"../../../use/designComponent\";\r\nimport {newInstance} from \"../../../utils/newInstance\";\r\nimport LoadingMaskPlugin from '../../loading-mask'\r\nimport LoadingPlugin from '../../loading'\r\nimport {PlLoadingMask} from \"../../loading-mask/loading-mask\";\r\n\r\ntype LoadingMaskBinding = boolean | {\r\n    modelValue?: boolean,\r\n    message?: string,\r\n    loadingType?: 'alpha' | 'beta' | 'gamma' | 'delta',\r\n    background?: string,\r\n    unlock?: boolean,\r\n}\r\n\r\nconst Mask = designComponent({\r\n    setup() {\r\n        const state = reactive({\r\n            option: null as null | LoadingMaskBinding & { modelValue?: boolean }\r\n        })\r\n        return {\r\n            refer: {\r\n                update: (option: LoadingMaskBinding) => {\r\n                    state.option = typeof option === \"object\" ?\r\n                        {\r\n                            ...option,\r\n                            modelValue: option.modelValue === undefined ? true : option.modelValue\r\n                        }\r\n                        : {modelValue: option}\r\n                }\r\n            },\r\n            render: () => (\r\n                !!state.option ? <PlLoadingMask {...state.option} inDirective/> : null\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nclass LoadingMask {\r\n\r\n    mask?: {\r\n        app: App,\r\n        ins: typeof Mask.use.class,\r\n        el: HTMLElement\r\n    }\r\n\r\n    constructor(private el: HTMLElement) {}\r\n\r\n    update(binding: LoadingMaskBinding) {\r\n        const flag = typeof binding === \"object\" ? true : binding\r\n        flag ? this.show(binding) : this.hide()\r\n    }\r\n\r\n    show(binding: LoadingMaskBinding) {\r\n        if (!this.mask) {\r\n            this.mask = newInstance(Mask, {\r\n                parentNode: this.el,\r\n                plugins: [\r\n                    LoadingPlugin,\r\n                    LoadingMaskPlugin\r\n                ]\r\n            })\r\n        }\r\n        this.mask.ins.update(binding)\r\n    }\r\n\r\n    hide() {\r\n        if (!!this.mask) {\r\n            this.mask.ins.update(false)\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        if (!!this.mask) {\r\n            this.mask.app.unmount(this.mask.el)\r\n        }\r\n    }\r\n}\r\n\r\nconst directive = (() => {\r\n    let map = new WeakMap<HTMLElement, LoadingMask>()\r\n    return {\r\n        active: (el: HTMLElement, binding: { value: LoadingMaskBinding }) => {\r\n            // console.log('active', binding.value);\r\n            const flag = typeof binding.value === \"object\" ? true : binding.value\r\n            let loadingMask = map.get(el)\r\n            if (flag) {\r\n                /*第一次显示的时候才创建实例*/\r\n                if (!loadingMask) {\r\n                    loadingMask = new LoadingMask(el)\r\n                    map.set(el, loadingMask)\r\n                }\r\n                loadingMask.update(binding.value)\r\n            } else {\r\n                if (!!loadingMask) {\r\n                    loadingMask.update(binding.value)\r\n                }\r\n            }\r\n        },\r\n        inactive: (el: HTMLElement) => {\r\n            // console.log('inactive');\r\n            const loadingMask = map.get(el)\r\n            if (!!loadingMask) {\r\n                loadingMask.destroy()\r\n            }\r\n        }\r\n    }\r\n})()\r\n\r\nexport const LoadingMaskDirective: Directive = {\r\n    mounted: directive.active,\r\n    updated: directive.active,\r\n    beforeUnmount: directive.inactive,\r\n}","import Service from './loading-bar-service'\r\nimport {createDefaultManager} from \"../../root/createDefaultManager\";\r\nimport {registryRootService} from \"../../root/registryRootService\";\r\nimport {RequireFormat} from \"../../../shims\";\r\n\r\nexport interface LoadingBarOption {\r\n    color?: string,\r\n    doneColor?: string,\r\n    failColor?: string,\r\n    height?: number,\r\n    percent?: number,\r\n    autoStart?: boolean,\r\n    autoProcess?: boolean,\r\n}\r\n\r\nexport type LoadingBarFormatOption = RequireFormat<LoadingBarOption,\r\n    \"color\" | \"doneColor\" | \"failColor\" | \"height\" | \"percent\" | \"autoStart\" | \"autoProcess\">\r\n\r\nexport interface LoadingBarHandler {\r\n    init: (option: LoadingBarOption) => void,\r\n    update: (option: LoadingBarOption) => void,\r\n    start: () => void,\r\n    done: () => void,\r\n    fail: () => void,\r\n}\r\n\r\nexport enum LoadingBarStatus {\r\n    wait = 'wait',\r\n    process = 'process',\r\n    done = 'done',\r\n    fail = 'fail',\r\n}\r\n\r\nfunction formatOption(option: LoadingBarOption): LoadingBarFormatOption {\r\n    return Object.assign(option, {\r\n        color: option.color || 'primary',\r\n        doneColor: option.doneColor || 'primary',\r\n        failColor: option.failColor || 'error',\r\n        percent: option.percent || 0,\r\n        height: option.height || 4,\r\n        autoStart: option.autoStart == null ? true : option.autoStart,\r\n        autoProcess: option.autoProcess == null ? true : option.autoProcess,\r\n    }) as LoadingBarFormatOption\r\n}\r\n\r\nexport const getLoadingBarService = registryRootService(\r\n    'loading-bar',\r\n    createDefaultManager('pl-loading-bar-manager', Service),\r\n    getManager => {\r\n        return (option?: LoadingBarOption): LoadingBarFormatOption & LoadingBarHandler => {\r\n            const fo = formatOption(option || {})\r\n            getManager().then(manager => manager.service(fo))\r\n            return fo as any\r\n        }\r\n    }\r\n)","import {LoadingMaskServiceFormatOption} from \"./index\";\r\nimport {reactive, ref} from 'vue';\r\nimport {createDefaultService} from \"../../root/createDefaultService\";\r\nimport PlLoadingMask from \"../../loading-mask\";\r\n\r\nexport default createDefaultService({\r\n    name: 'loading-mask-service',\r\n    setup: (option: LoadingMaskServiceFormatOption) => {\r\n        const isShow = ref(false)\r\n\r\n        const state = reactive({\r\n            option,\r\n            key: 0,\r\n        })\r\n\r\n        const hide = () => isShow.value = false\r\n\r\n        const service = (option: LoadingMaskServiceFormatOption) => {\r\n            option.close = hide\r\n            state.option = option\r\n            state.key++\r\n            isShow.value = true\r\n            return hide\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                isShow,\r\n                isOpen: isShow,\r\n                service,\r\n            },\r\n            render: () => {\r\n                return (\r\n                    <PlLoadingMask\r\n                        key={state.key}\r\n                        v-model={isShow.value}\r\n                        message={state.option.message}\r\n                        loadingType={state.option.loadingType}\r\n                        background={state.option.background}\r\n                        unlock={state.option.unlock}\r\n                        fixedPosition\r\n                    />\r\n                )\r\n            }\r\n        }\r\n    }\r\n})","import Service from './loading-mask-service'\r\nimport {registryRootService} from \"../../root/registryRootService\";\r\nimport {createDefaultManager} from \"../../root/createDefaultManager\";\r\n\r\nexport interface LoadingMaskServiceOption {\r\n    message?: string,\r\n    loadingType?: string,\r\n    background?: string,\r\n    unlock?: boolean,\r\n}\r\n\r\nexport interface LoadingMaskServiceFormatOption extends LoadingMaskServiceOption {\r\n    close: () => void\r\n}\r\n\r\nexport const getLoadingMaskService = registryRootService(\r\n    'loading',\r\n    createDefaultManager('pl-loading-mask-manager', Service),\r\n    (getManager) => {\r\n        return (option: LoadingMaskServiceOption): LoadingMaskServiceFormatOption => {\r\n            option = option || {};\r\n            getManager().then(manager => manager.service(option as LoadingMaskServiceFormatOption));\r\n            return option as LoadingMaskServiceFormatOption\r\n        }\r\n    }\r\n)","import {createDefaultService} from \"../../root/createDefaultService\";\r\nimport {computed, reactive, ref} from 'vue';\r\nimport {LoadingBarFormatOption, LoadingBarStatus} from \"./index\";\r\nimport {StyleProperties} from \"../../../shims\";\r\nimport {nextIndex} from \"../../../utils/nextIndex\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\n\r\nexport default createDefaultService({\r\n    name: 'pl-loading-bar-service',\r\n    setup(option: LoadingBarFormatOption) {\r\n\r\n        const isShow = ref(false)\r\n\r\n        const state = reactive({\r\n            status: LoadingBarStatus.wait,\r\n            option: option as LoadingBarFormatOption | null,\r\n            zIndex: 0,\r\n            interval: null as null | number,\r\n            autoLoadingStep: 5,\r\n            startDelayer: null as null | number,\r\n        })\r\n\r\n        const color = computed(() => {\r\n            switch (state.status) {\r\n                case LoadingBarStatus.wait:\r\n                    return null\r\n                case LoadingBarStatus.process:\r\n                    return state.option!.color\r\n                case LoadingBarStatus.done:\r\n                    return state.option!.doneColor\r\n                case LoadingBarStatus.fail:\r\n                    return state.option!.failColor\r\n            }\r\n            return LoadingBarStatus.process\r\n        })\r\n\r\n        const status = ['primary', 'success', 'warn', 'error', 'info']\r\n\r\n        const classes = computed(() => [\r\n            'pl-loading-bar-service',\r\n            {\r\n                [`pl-loading-bar-service-status-${color.value}`]: !!color.value && status.indexOf(color.value) > -1\r\n            }\r\n        ])\r\n\r\n        const styles = computed(() => {\r\n            if (!state.option) return {} as StyleProperties\r\n            return {\r\n                height: `${state.option.height}px`,\r\n                width: `${state.option!.percent}%`,\r\n                backgroundColor: (!!color.value && status.indexOf(color.value) === -1) ? color.value : '',\r\n                opacity: state.status === LoadingBarStatus.wait ? '0' : '1',\r\n                zIndex: String(state.zIndex),\r\n            } as StyleProperties\r\n        })\r\n\r\n        const methods = {\r\n            /**\r\n             * 开始自动播放进度\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            startAutoLoading: () => {\r\n                state.autoLoadingStep = 10\r\n                state.interval = setInterval(() => {\r\n                    if (!!state.option) {\r\n                        if (state.option.percent == null) {\r\n                            state.option.percent = 0\r\n                        }\r\n                        state.option.percent += state.autoLoadingStep\r\n                        state.autoLoadingStep -= 0.5\r\n                        if (state.option.percent + 20 > 100 || state.autoLoadingStep < 0) {\r\n                            methods.stopAutoLoading()\r\n                        }\r\n                    } else {\r\n                        methods.stopAutoLoading()\r\n                    }\r\n                }, 250)\r\n            },\r\n            /**\r\n             * 停止自动播放进度\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            stopAutoLoading: () => {\r\n                if (!!state.interval) {\r\n                    clearInterval(state.interval)\r\n                    state.interval = null\r\n                }\r\n            },\r\n            /**\r\n             * 初始化option\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            init: (option: LoadingBarFormatOption) => {\r\n                state.option = option\r\n                Object.assign(option, methods)\r\n                return methods\r\n            },\r\n            /**\r\n             * 更新option\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            update: (option: LoadingBarFormatOption) => {\r\n                if (!!state.option) {\r\n                    Object.assign(state.option, option)\r\n                }\r\n                methods.stopAutoLoading()\r\n            },\r\n            /**\r\n             * 开始loading\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            start: async () => {\r\n                state.startDelayer = setTimeout(async () => {\r\n                    if (!state.option) {\r\n                        return\r\n                    }\r\n\r\n                    const percent = state.option.percent\r\n                    isShow.value = true\r\n                    state.option.percent = 0\r\n\r\n                    state.status = LoadingBarStatus.process\r\n                    state.zIndex = nextIndex()\r\n\r\n                    await delay(23)\r\n                    state.option.percent = percent\r\n\r\n                    if (state.option!.autoProcess) {\r\n                        methods.startAutoLoading()\r\n                    }\r\n                }, 100)\r\n            },\r\n            /**\r\n             * 加载完成\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            done: async () => {\r\n                state.status = LoadingBarStatus.done\r\n                await methods.complete()\r\n            },\r\n            /**\r\n             * 加载失败\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            fail: async () => {\r\n                state.status = LoadingBarStatus.fail\r\n                await methods.complete()\r\n            },\r\n            complete: async () => {\r\n                if (!state.option) {\r\n                    return\r\n                }\r\n                if (state.startDelayer != null) {\r\n                    clearTimeout(state.startDelayer)\r\n                    state.startDelayer = null\r\n                }\r\n                methods.stopAutoLoading()\r\n                state.option!.percent = 100\r\n                await delay(300)\r\n                state.status = LoadingBarStatus.wait\r\n                await delay(300)\r\n                isShow.value = false\r\n                state.option = null\r\n            },\r\n        };\r\n\r\n\r\n        const service = (option: LoadingBarFormatOption) => {\r\n            methods.init(option)\r\n            if (!!option.autoStart) {\r\n                methods.start()\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                isShow,\r\n                isOpen: isShow,\r\n                service,\r\n            },\r\n            render: () => isShow.value && (\r\n                <div class={classes.value} style={styles.value as any}/>\r\n            )\r\n        }\r\n    },\r\n})","import Loading from '../loading'\r\nimport LoadingMask from '../loading-mask'\r\nimport {App} from 'vue';\r\nimport {installPlugin} from \"../../utils/installPlugin\";\r\nimport {LoadingMaskDirective} from \"./mask/loading-mask-directive\";\r\nimport {getLoadingMaskService} from \"./mask\";\r\nimport {getLoadingBarService} from \"./bar\";\r\nimport './loading-service.scss'\r\n\r\nexport default {\r\n    install(app: App) {\r\n        installPlugin(app, Loading)\r\n        installPlugin(app, LoadingMask)\r\n        app.directive('loading', LoadingMaskDirective)\r\n        app.mixin({\r\n            computed: {\r\n                $loading() {\r\n                    return {\r\n                        mask: getLoadingMaskService(this),\r\n                        bar: getLoadingBarService(this),\r\n                    }\r\n                },\r\n            },\r\n        })\r\n    },\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive, computed} from 'vue';\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {HTMLInputEvent} from \"../../shims\";\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport './number.scss'\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlInput} from \"../input/input\";\r\n\r\nconst NAN = 'NAN'\r\n\r\nexport const PlNumber = designComponent({\r\n    name: 'pl-number',\r\n    directives: {\r\n        ClickWave,\r\n    },\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n\r\n        modelValue: {type: [String, Number]},                       // 双向绑定值\r\n        min: {type: [String, Number]},                              // 最小值\r\n        max: {type: [String, Number]},                              // 最大值\r\n        step: {type: [String, Number], default: 1},                 // 计数器步长\r\n        stepStrictly: {type: Boolean},                              // 是否只能输入 step 的倍数\r\n        precision: {type: [Number, String]},                        // 数值精度\r\n        hideButton: {type: Boolean},                                // 隐藏操作按钮\r\n\r\n        /*---------------------------------------input-------------------------------------------*/\r\n        inputProps: {type: Object},                                 // pl-input属性配置对象\r\n    },\r\n    emits: {\r\n        onFocus: (e: Event) => true,\r\n        onBlur: (e: Event) => true,\r\n        onUpdateModelValue: (val: string | number | undefined) => true,\r\n        onEnter: (e: KeyboardEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoEmit: false})\r\n        useStyle({status: undefined})\r\n        const {editComputed} = useEdit()\r\n        const state = reactive({\r\n            isFocus: false,                                         // 当前是否获取焦点\r\n            interval: null as null | number,                        // 进步器长摁定时器\r\n        })\r\n\r\n        const {propsState} = useProps(props, {\r\n            min: useProps.NUMBER,\r\n            max: useProps.NUMBER,\r\n            step: useProps.NUMBER,\r\n            precision: useProps.NUMBER,\r\n        }) as {\r\n            propsState: {\r\n                min: number | null,\r\n                max: number | null,\r\n                step: number,\r\n                precision: number | null,\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            getValue: (val: any): undefined | number | 'NAN' => {\r\n                if (val == null) return undefined\r\n                val = String(val).trim()\r\n                if (val === '') return undefined\r\n                val = Number(val)\r\n                if (isNaN(val)) {\r\n                    return NAN\r\n                } else {\r\n                    return val\r\n                }\r\n            },\r\n            getEffectiveValue: (): number | undefined => {\r\n                let value = formatModelValue.value\r\n                if (value === NAN) {\r\n                    value = formatValue.value\r\n                    if (value === NAN) {\r\n                        if (propsState.min != null) return propsState.min\r\n                        else if (propsState.max != null) return propsState.max\r\n                        else if (props.stepStrictly) return propsState.step\r\n                        else return 0\r\n                    }\r\n                }\r\n                return value\r\n            },\r\n            checkValue: (value: number | undefined): number | undefined => {\r\n                if (value != null) {\r\n                    // min\r\n                    if (propsState.min != null && value < propsState.min) {\r\n                        value = propsState.min\r\n                    }\r\n                    // max\r\n                    if (propsState.max != null && value! > propsState.max) {\r\n                        value = propsState.max\r\n                    }\r\n                    // stepStrictly\r\n                    if (props.stepStrictly && value! % propsState.step! !== 0) {\r\n                        // console.log('props.value', props.modelValue)\r\n                        value = props.modelValue == undefined ? undefined : Number(props.modelValue)\r\n                    }\r\n                    // precision\r\n                    if (propsState.precision != null) {\r\n                        value = Number(value!.toFixed(propsState.precision))\r\n                    }\r\n                }\r\n                return value\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const classes = computed(() => ([\r\n            `pl-number`,\r\n            {\r\n                'pl-number-hide-button': props.hideButton,\r\n                'pl-number-disabled': editComputed.value.disabled,\r\n            }\r\n        ]))\r\n        const formatModelValue = computed(() => utils.getValue(model.value))\r\n        const formatValue = computed(() => utils.getValue(props.modelValue))\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            add: () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                let value = utils.getEffectiveValue()\r\n                if (value == null) {\r\n                    value = 0\r\n                }\r\n                value += propsState.step\r\n                value = utils.checkValue(value)\r\n                model.value = value\r\n                emit.onUpdateModelValue(model.value)\r\n            },\r\n            minus: () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                let value = utils.getEffectiveValue()\r\n                if (value == null) {\r\n                    value = 0\r\n                }\r\n                value -= propsState.step\r\n                value = utils.checkValue(value)\r\n                model.value = value\r\n                emit.onUpdateModelValue(model.value)\r\n            },\r\n            clearInterval: () => {              // 清除定时器\r\n                if (state.interval != null) {\r\n                    clearInterval(state.interval)\r\n                }\r\n                window.removeEventListener('mouseup', methods.clearInterval)\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            focus: (e: Event) => {\r\n                state.isFocus = true\r\n                emit.onFocus(e)\r\n            },\r\n            blur: (e: Event) => {\r\n                model.value = utils.checkValue(utils.getEffectiveValue())\r\n                emit.onUpdateModelValue(model.value)\r\n                state.isFocus = false\r\n                emit.onBlur(e)\r\n            },\r\n            input: (e: HTMLInputEvent) => {\r\n                model.value = e.target.value\r\n            },\r\n            enter: (e: KeyboardEvent) => {\r\n                model.value = utils.checkValue(utils.getEffectiveValue())\r\n                emit.onUpdateModelValue(model.value)\r\n                emit.onEnter(e)\r\n            },\r\n            intervalAdd: () => {\r\n                methods.add()\r\n                state.interval = setInterval(methods.add, 100)\r\n                window.addEventListener('mouseup', methods.clearInterval)\r\n            },\r\n            intervalMinus: () => {\r\n                methods.minus()\r\n                state.interval = setInterval(() => methods.minus(), 100)\r\n                window.addEventListener('mouseup', methods.clearInterval)\r\n            },\r\n            clearHandler: () => {\r\n                model.value = undefined\r\n                emit.onUpdateModelValue(model.value)\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n                const key = getKey(e)\r\n                switch (key) {\r\n                    case KEY.up:\r\n                        e.preventDefault()\r\n                        e.stopPropagation()\r\n                        methods.add()\r\n                        break\r\n                    case KEY.down:\r\n                        e.preventDefault()\r\n                        e.stopPropagation()\r\n                        methods.minus()\r\n                        break\r\n                    case KEY.enter:\r\n                        handler.enter(e)\r\n                        break\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                ...methods,\r\n            },\r\n            render: () => (\r\n                <PlInput class={classes.value}\r\n                         isFocus={state.isFocus}\r\n                         inputInnerTabindex={null as any}\r\n                         {...(props.inputProps || {})}\r\n                >\r\n                    {!props.hideButton && (\r\n                        <div class=\"pl-number-prepend-button plain-click-node\" onMousedown={handler.intervalMinus} v-click-wave>\r\n                            <PlIcon icon=\"el-icon-minus\"/>\r\n                        </div>\r\n                    )}\r\n                    <input type=\"text\"\r\n                           value={model.value}\r\n                           disabled={editComputed.value.disabled!}\r\n                           readonly={editComputed.value.readonly!}\r\n                           onFocus={handler.focus}\r\n                           onBlur={handler.blur}\r\n                           onInput={handler.input as any}\r\n                           onKeydown={handler.keydown}/>\r\n                    {!props.hideButton && (\r\n                        <div class=\"pl-number-append-button plain-click-node\" onMousedown={handler.intervalAdd} v-click-wave>\r\n                            <PlIcon icon=\"el-icon-plus\"/>\r\n                        </div>\r\n                    )}\r\n                </PlInput>\r\n            )\r\n        }\r\n    },\r\n})","import {PlNumber} from './number'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlNumber)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive, computed} from 'vue';\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport './toggle.scss'\r\n\r\nexport const PlToggle = designComponent({\r\n    name: 'pl-toggle',\r\n    directives: {ClickWave},\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {},                                                              // 双向绑定值\r\n        trueValue: {default: true as any},                                           // 选中时绑定的值\r\n        falseValue: {default: false as any},                                         // 未选中时绑定的值\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onMousedown: (e: MouseEvent) => true,\r\n        onMouseup: (e: MouseEvent) => true,\r\n        onClick: (e: MouseEvent) => true,\r\n        onFocus: (e: Event) => true,\r\n        onBlur: (e: Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const state = reactive({\r\n            isActive: false,\r\n        })\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const isChecked = computed(() => model.value === props.trueValue)\r\n\r\n        const classes = computed(() => ([\r\n            `pl-toggle`,\r\n            `plain-click-node`,\r\n            `pl-toggle-status-${styleComputed.value.status}`,\r\n            `pl-toggle-size-${styleComputed.value.size}`,\r\n            {\r\n                'pl-toggle-on': isChecked.value,\r\n                'pl-toggle-active': state.isActive,\r\n                'pl-toggle-disabled': editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                state.isActive = true\r\n                window.addEventListener('mouseup', handler.mouseup)\r\n                emit.onMousedown(e)\r\n            },\r\n            mouseup: (e: MouseEvent) => {\r\n                state.isActive = false\r\n                window.removeEventListener('mouseup', handler.mouseup)\r\n                emit.onMouseup(e)\r\n            },\r\n            click: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                model.value = isChecked.value ? props.falseValue : props.trueValue\r\n                emit.onClick(e)\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n                const key = getKey(e)\r\n                if (key === KEY.space || key === KEY.enter) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    handler.click(e as any)\r\n                }\r\n            },\r\n            focus: emit.onFocus,\r\n            blur: emit.onBlur,\r\n        }\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}\r\n                     tabindex={0}\r\n                     onMousedown={handler.mousedown}\r\n                     onClick={handler.click}\r\n                     onKeydown={handler.keydown}\r\n                     onFocus={handler.focus}\r\n                     onBlur={handler.blur}\r\n                     v-click-wave={'large'}\r\n                >\r\n                    <div class=\"pl-toggle-inner\"/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlToggle} from './toggle'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlToggle)","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useMounted} from \"../../use/useMounted\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive, computed} from 'vue';\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {removeUnit} from \"plain-utils/string/removeUnit\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport './slider.scss'\r\n\r\nexport default designComponent({\r\n    name: 'pl-slider',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: Number, default: 0},                          //非范围选择时，双向绑定值\r\n        start: {type: Number, default: 0},                          //范围选择时，起始绑定值\r\n        end: {type: Number, default: 0},                            //范围选择时，末尾绑定值\r\n        total: {type: Number, default: 100},                        //总数，value,start以及end不应该超过total\r\n        alignEnd: {type: Boolean},                                  //是否末尾对其\r\n        full: {type: Boolean},                                      //是否占满父元素大小\r\n        length: {type: [Number, String], default: '156px'},         //滑动条长度\r\n        size: {type: [Number, String], default: '6px'},             //滑动条宽度\r\n        vertical: {type: Boolean},                                  //是否纵向\r\n        step: {type: Number, default: 1},                           //滑条分块的个数，默认是不分块\r\n        min: {type: Number},                                        //最小值\r\n        max: {type: Number},                                        //最大值\r\n\r\n        showSteps: {type: Boolean, default: true},                  //是否显示步骤点\r\n        tooltip: {type: Boolean, default: true},                    //是否tooltip显示值\r\n        tooltipFormatter: Function,                                 //tooltip显示格式化函数\r\n        range: {type: Boolean},                                     //是否为范围选择\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number) => true,\r\n        onUpdateStart: (val: number) => true,\r\n        onUpdateEnd: (val: number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const start = useModel(() => props.start, emit.onUpdateStart)\r\n        const end = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const isMounted = useMounted()\r\n\r\n        const state = reactive({\r\n            dragStart: null as null | boolean,\r\n            touching: false,\r\n            tempStart: null as null | number,\r\n            tempEnd: null as null | number,\r\n            startX: null as null | number,\r\n            startY: null as null | number,\r\n            totalLength: null as null | number,\r\n            position: {\r\n                'vertical-start': 'bottom',\r\n                'vertical-end': 'top',\r\n                'horizontal-start': 'right',\r\n                'horizontal-end': 'left',\r\n            },\r\n        })\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            transferValueToLength(value: number) {\r\n                return totalLength.value * value / props.total\r\n            },\r\n            transferLengthToValue(length: number) {\r\n                return props.total * length / totalLength.value\r\n            },\r\n            setValue(val: number) {\r\n                model.value = val\r\n            },\r\n            setStart(val: number) {\r\n                start.value = val\r\n            },\r\n            setEnd(val: number) {\r\n                end.value = val\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const styles = computed(() => ({\r\n            [props.vertical ? 'height' : 'width']: !!props.full ? '100%' : unit(props.length),\r\n            [props.vertical ? 'width' : 'height']: unit(props.size),\r\n        }))\r\n\r\n        const classes = computed(() => ([\r\n            'pl-slider',\r\n            {\r\n                'pl-slider-full': !!props.full,\r\n                'pl-slider-touching': state.touching,\r\n                'pl-slider-range': props.range,\r\n                'pl-slider-place-end': start.value === end.value && start.value === props.total\r\n            },\r\n            `pl-slider-${!!props.vertical ? 'vertical' : 'horizontal'}`,\r\n            `pl-slider-align-${!!props.alignEnd ? 'end' : 'start'}`,\r\n            `pl-slider-status-${!!editComputed.value.disabled ? 'info' : (styleComputed.value.status)}`,\r\n        ]))\r\n\r\n        const totalLength = computed(() => {\r\n            if (!isMounted.value) return 0\r\n            if (state.totalLength == null) state.totalLength = refs.el![!!props.vertical ? 'offsetHeight' : 'offsetWidth']\r\n            return state.totalLength\r\n        })\r\n\r\n        const startPosition = computed(() => {\r\n            return !!props.range ? utils.transferValueToLength(start.value) : props.alignEnd ? (totalLength.value - utils.transferValueToLength(model.value)) : 0\r\n        })\r\n\r\n        const endPosition = computed(() => {\r\n            return !!props.range ? totalLength.value - utils.transferValueToLength(end.value) : props.alignEnd ? 0 : (totalLength.value - utils.transferValueToLength(model.value))\r\n        })\r\n\r\n        const progressStyles = computed(() => {\r\n            const ret = {} as any\r\n            ret[props.vertical ? 'top' : 'left'] = `${startPosition.value}px`\r\n            ret[props.vertical ? 'bottom' : 'right'] = `${endPosition.value}px`\r\n            return ret\r\n        })\r\n\r\n        const startTooltip = computed(() => {\r\n            let ret = !!props.range ? start.value : model.value\r\n            return !!props.tooltipFormatter ? props.tooltipFormatter(ret) : ret\r\n        })\r\n\r\n        const endTooltip = computed(() => {\r\n            let ret = !!props.range ? end.value : model.value\r\n            return !!props.tooltipFormatter ? props.tooltipFormatter(ret) : ret\r\n        })\r\n\r\n        const steps = computed(() => {\r\n            const ret: number[] = []\r\n            let i = 0\r\n            while (i < props.step - 1) {\r\n                ret.push(i)\r\n                i++\r\n            }\r\n            return ret\r\n        })\r\n\r\n        const stepItemStyles = computed(() => {\r\n            return {\r\n                ['height']: unit(removeUnit(props.size) as any / 2),\r\n                ['width']: unit(removeUnit(props.size) as any / 2),\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            dragstart: (e: MouseEvent, dragStart: boolean) => {\r\n                if ((!!props.alignEnd !== dragStart && !props.range) || !editComputed.value.editable) return\r\n                document.addEventListener('mousemove', handler.mousemove)\r\n                document.addEventListener('mouseup', handler.mouseup)\r\n                state.dragStart = dragStart\r\n                state.touching = true\r\n                state.startX = e.clientX\r\n                state.startY = e.clientY\r\n                state.tempStart = startPosition.value\r\n                state.tempEnd = endPosition.value\r\n                disabledUserSelect()\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                if (!state.touching) return\r\n                const durX = e.clientX - state.startX!\r\n                const durY = e.clientY - state.startY!\r\n                let temp = !!state.dragStart ? state.tempStart : state.tempEnd\r\n                let dur = (!!props.vertical ? durY : durX) * (!!state.dragStart ? 1 : -1)\r\n                let ret = Math.min(Math.max(temp! + dur, 0), totalLength.value)\r\n\r\n                if (props.step > 1) {\r\n                    const stepLength = totalLength.value / props.step\r\n                    const divisor = Number((ret / stepLength).toFixed(0)) + 1\r\n                    if (ret > stepLength * divisor) ret = stepLength * divisor\r\n                    else ret = stepLength * (divisor - 1)\r\n                }\r\n\r\n                if (!!state.dragStart) {\r\n                    start.value = utils.transferLengthToValue(ret)\r\n                } else {\r\n                    end.value = utils.transferLengthToValue(ret)\r\n                }\r\n\r\n                if (!props.range) {\r\n                    ret = Number(utils.transferLengthToValue(totalLength.value - ret).toFixed(2))\r\n                    props.max != null && ret > props.max && (ret = props.max)\r\n                    props.min != null && ret < props.min && (ret = props.min)\r\n                    utils.setValue(ret)\r\n                } else {\r\n                    ret = Number(utils.transferLengthToValue(state.dragStart ? ret : totalLength.value - ret).toFixed(2))\r\n                    props.max != null && ret > props.max && (ret = props.max)\r\n                    props.min != null && ret < props.min && (ret = props.min)\r\n                    if (!!state.dragStart) {\r\n                        if (ret > end.value) ret = end.value\r\n                    } else {\r\n                        if (ret < start.value) ret = start.value\r\n                    }\r\n                    state.dragStart ? utils.setStart(ret) : utils.setEnd(ret)\r\n                }\r\n            },\r\n            mouseup: (e: MouseEvent) => {\r\n                if (!state.touching) return\r\n                state.touching = false\r\n                document.removeEventListener('mousemove', handler.mousemove)\r\n                document.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value} ref={'el'}>\r\n                    {\r\n                        props.showSteps && props.step > 1 && (\r\n                            <div class=\"pl-slider-step\">\r\n                                {\r\n                                    steps.value.map((item) => (\r\n                                        <span class=\"pl-slider-step-item-wrapper\" key={item}>\r\n                                        <div class=\"pl-slider-step-item\" style={stepItemStyles.value as any}/>\r\n                                    </span>\r\n                                    ))\r\n                                }\r\n                            </div>\r\n                        )\r\n                    }\r\n                    <div class=\"pl-slider-progress\" style={progressStyles.value}>\r\n                <span class=\"pl-slider-dot-wrapper pl-slider-dot-wrapper-start\" onMousedown={(e: MouseEvent) => handler.dragstart(e, true)}><span class=\"pl-slider-dot\"><span class=\"pl-slider-dot-inner\">\r\n                    {!!props.tooltip && <span class=\"pl-slider-dot-tooltip\">{startTooltip.value}</span>}\r\n                </span></span></span>\r\n                        <span class=\"pl-slider-dot-wrapper pl-slider-dot-wrapper-end\" onMousedown={e => handler.dragstart(e, false)}><span class=\"pl-slider-dot\"><span class=\"pl-slider-dot-inner\">\r\n                    {!!props.tooltip && <span class=\"pl-slider-dot-tooltip\">{endTooltip.value}</span>}\r\n                </span></span></span>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import Slider from './slider'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Slider)","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {computed} from 'vue';\r\nimport './tag.scss'\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {createEventListener} from \"../../utils/createEventListener\";\r\n\r\nexport const PlTag = designComponent({\r\n    name: 'pl-tag',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n        mode: {type: String, default: 'stroke'},\r\n        label: {type: String},\r\n        close: {type: Boolean},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n        onClose: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {slots} = useSlots()\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        const classes = computed(() => ([\r\n            `pl-tag`,\r\n            `pl-tag-mode-${props.mode}`,\r\n            `pl-tag-status-${styleComputed.value.status}`,\r\n            `pl-tag-shape-${styleComputed.value.shape}`,\r\n            `pl-tag-size-${styleComputed.value.size}`,\r\n            {\r\n                'pl-tag-disabled': !!editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n        const handler = {\r\n            click: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                emit.onClick(e)\r\n            },\r\n            clickClose: (e: MouseEvent) => {\r\n                e.stopPropagation()\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                emit.onClose(e)\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} onClick={handler.click}>\r\n                    {slots.default(props.label)}\r\n                    {!!props.close && <PlIcon icon=\"el-icon-close\" class=\"pl-tag-close\" {...createEventListener({onClick: handler.clickClose})}/>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlTag} from './tag'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlTag)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport Input from '../input'\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {computed, nextTick, onBeforeUnmount, reactive} from 'vue';\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport './tag-input.scss'\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlTag} from \"../tag/tag\";\r\nimport {PlInput} from \"../input/input\";\r\n\r\nexport const PlTagInput = designComponent({\r\n    name: 'pl-tag-input',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: Array},                                              // 数组，双向绑定值\r\n        close: {type: Boolean, default: true},                                  // 是否可删除\r\n        beforeAdd: Function,                                                    // 添加前校验\r\n        beforeRemove: Function,                                                 // 删除前校验\r\n        formatValue: Function,                                                  // 格式化输入值，返回一个值，或者对象\r\n        noInput: Function,                                                      // 是否显示输入框\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any[] | undefined) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {item: String, index: Number}\r\n        })\r\n\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n        })\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n\r\n        const state = reactive({\r\n            isEditing: false,\r\n            inputValue: null as string | null,\r\n        })\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle()\r\n\r\n        const classes = computed(() => ([\r\n            'pl-tag-input',\r\n            `pl-tag-input-status-${styleComputed.value.status}`,\r\n            {\r\n                'pl-tag-input-disabled': editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n\r\n        onBeforeUnmount(() => {\r\n            window.removeEventListener('click', handler.clickWindow, true)\r\n        })\r\n\r\n        const handler = {\r\n            clickWindow: (e: MouseEvent) => {\r\n                if (!refs.input!.refs.input.contains(e.target as Node)) {\r\n                    state.isEditing = false\r\n                    window.removeEventListener('click', handler.clickWindow, true)\r\n                }\r\n            },\r\n            clickEditButton: async () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                state.isEditing = true\r\n                await nextTick()\r\n                refs.input!.methods.focus()\r\n\r\n                // 点击其他元素的时候关闭输入状态\r\n                await delay(0)\r\n                window.addEventListener('click', handler.clickWindow, true)\r\n            },\r\n            inputEnter: async () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n\r\n                let inputValue = state.inputValue\r\n\r\n                if (inputValue != '0' && !inputValue) {\r\n                    return\r\n                }\r\n\r\n                if (!!props.beforeAdd) {\r\n                    await props.beforeAdd(inputValue)\r\n                }\r\n                if (!!props.formatValue) {\r\n                    inputValue = await props.formatValue(inputValue)\r\n                }\r\n\r\n                let value = [...(model.value || [])]\r\n                value.push(inputValue)\r\n                model.value = value\r\n                state.inputValue = null\r\n            },\r\n            tagClose: async (item: any, index: number) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                if (!!props.beforeRemove) {\r\n                    await props.beforeRemove(item, index)\r\n                }\r\n                model.value!.splice(index, 1)\r\n                model.value = [...model.value!]\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n                if (getKey(e) === KEY.enter) {\r\n                    handler.inputEnter()\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}>\r\n                    {\r\n                        (model.value || []).map((item: any, index) => (\r\n                            scopedSlots.default({item, index}, (\r\n                                <PlTag key={index} label={item} close={editComputed.value.editable && props.close} onClose={() => handler.tagClose(item, index)}/>\r\n                            ))\r\n                        ))\r\n                    }\r\n                    {!props.noInput && (\r\n                        <PlInput v-model={state.inputValue}\r\n                                 ref=\"input\"\r\n                                 key={state.isEditing ? 1 : 2}\r\n                                 onKeydown={handler.keydown}\r\n                                 v-slots={!state.isEditing ? {\r\n                                     default: () => (\r\n                                         <div class=\"pl-tag-input-not-edit\"\r\n                                              onClick={handler.clickEditButton}>\r\n                                             <PlIcon icon=\"el-icon-plus\"/>\r\n                                             <span>添加</span>\r\n                                         </div>\r\n                                     )\r\n                                 } : null}\r\n                        />\r\n                    )}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlTagInput} from './tag-input'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlTagInput)","import './rate.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive, computed} from 'vue';\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {useMounted} from \"../../use/useMounted\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlRate = designComponent({\r\n    name: 'pl-rate',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: Number, default: 0},                         //vModel双向绑定值\r\n        total: {type: Number, default: 5},                              //总分\r\n        count: {type: Number, default: 5},                              //显示图标的个数\r\n        mode: {type: String, default: 'normal'},                        //模式，normal，all整个图标为单位，half：半个图标为单位\r\n        status: {type: String,},                                        //标准颜色\r\n        activeIcon: {type: String},                                     //激活的时候的图标\r\n        inactiveIcon: {type: String},                                   //未激活的时候的图标\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const state = reactive({\r\n            totalWidth: null as null | number,\r\n            elLeft: null as null | number,\r\n        })\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n\r\n        const mounted = useMounted()\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const classes = computed(() => ([\r\n            `pl-rate`,\r\n            `pl-rate-status-${styleComputed.value.status}`,\r\n            `pl-rate-size-${styleComputed.value.size}`,\r\n            {\r\n                'pl-rate-disabled': editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n        const data = computed(() => {\r\n            let i = 0\r\n            let ret: number[] = []\r\n            while (i < props.count) {\r\n                ret.push(i)\r\n                i++\r\n            }\r\n            return ret\r\n        })\r\n\r\n        const activeStyles = computed(() => ({\r\n            width: (model.value / props.total) * 100 + '%'\r\n        }))\r\n\r\n        const totalWidth = computed(() => {\r\n            if (!mounted.value) return 0\r\n            if (!state.totalWidth) state.totalWidth = refs.el.offsetWidth\r\n            return state.totalWidth\r\n        })\r\n\r\n        const elLeft = computed(() => {\r\n            if (!state.elLeft) state.elLeft = refs.el.getBoundingClientRect().left\r\n            return state.elLeft\r\n        })\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n\r\n        const methods = {\r\n            reset: (e: MouseEvent) => {\r\n                let dur = e.clientX - (elLeft.value || 0)\r\n                let start = 0\r\n                let end = totalWidth.value\r\n                let step = end / props.count\r\n                switch (props.mode) {\r\n                    case 'all':\r\n                        for (; start < end; start += step) {\r\n                            if (start < dur && dur < start + step) {\r\n                                dur = start + step\r\n                                break\r\n                            }\r\n                        }\r\n                        break\r\n                    case 'half':\r\n                        for (; start < end; start += step) {\r\n                            let half = (start + start + step) / 2\r\n                            if (start < dur && dur < half) {\r\n                                dur = half\r\n                                break\r\n                            }\r\n                            if (half < dur && dur < start + step) {\r\n                                dur = start + step\r\n                                break\r\n                            }\r\n                        }\r\n                        break\r\n                }\r\n\r\n                model.value = Number((Math.max(0, Math.min((dur) / totalWidth.value, 1)) * props.total).toFixed(2))\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) return\r\n                window.document.addEventListener('mousemove', handler.mousemove)\r\n                window.document.addEventListener('mouseup', handler.mouseup)\r\n                disabledUserSelect()\r\n                methods.reset(e)\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                methods.reset(e)\r\n            },\r\n            mouseup: (e: MouseEvent) => {\r\n                window.document.removeEventListener('mousemove', handler.mousemove)\r\n                window.document.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} onMousedown={handler.mousedown} ref=\"el\">\r\n                    <div class=\"pl-rate-active\" style={activeStyles.value}>\r\n                        {data.value.map(i => <PlIcon icon={props.activeIcon || 'el-icon-star-on'} key={i}/>)}\r\n                    </div>\r\n                    <div class=\"pl-rate-inactive\">\r\n                        {data.value.map(i => <PlIcon icon={props.inactiveIcon || 'el-icon-star-off'} key={i}/>)}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlRate} from './rate'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlRate)","import {computed, reactive, nextTick, watch, onMounted, onUpdated} from 'vue'\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {PlScroll} from \"../scroll/scroll\";\r\n\r\ninterface DataNode {\r\n    top: number\r\n    bottom: number\r\n    height: number\r\n\r\n    data: any\r\n    index: number\r\n}\r\n\r\nexport function useVirtualList(\r\n    {\r\n        props,\r\n        refs,\r\n        emit,\r\n        transform,\r\n    }: {\r\n        props: {\r\n            data: any[],\r\n            size: number,\r\n            disabled?: boolean,\r\n            dynamicSize?: boolean,\r\n        },\r\n        refs: {\r\n            scroll: typeof PlScroll.use.class | null,\r\n            content: HTMLDivElement,\r\n        },\r\n        emit: {\r\n            onScroll: (e: Event) => void\r\n        },\r\n        transform?: boolean,\r\n    }\r\n) {\r\n\r\n    /*非响应式属性*/\r\n    const freezeState = {\r\n        scrollTop: 0,                               // 实时的scrollTop值\r\n        current: {                                  // 当前的页面信息\r\n            pageIndex: 0,\r\n            start: 0,\r\n            end: 0,\r\n        },\r\n    }\r\n    /*响应式属性*/\r\n    const state = reactive({\r\n        nodes: [] as DataNode[],                    // 格式化的data数组数据\r\n        scrollTop: 0,                               // 当前滚动scrollTop（非实时的）\r\n        pageSize: 0,                                // 页大小\r\n    })\r\n\r\n    /**\r\n     * 计算得到的在虚拟列表当前要渲染的数组数据\r\n     * @author  韦胜健\r\n     * @date    2020/11/15 9:28\r\n     */\r\n    const offsetData = computed((): { list: { item: any, index: number }[], startPageIndex: number, start: number } => {\r\n        const {pageSize, scrollTop} = state\r\n        const data = props.data || []\r\n        if (!pageSize) {\r\n            return {list: [], startPageIndex: 0, start: 0}\r\n        }\r\n        if (props.disabled) {\r\n            return {\r\n                list: data.map((item, index) => ({item, index})),\r\n                start: 0,\r\n                startPageIndex: 0,\r\n            }\r\n        }\r\n        const {start, end, pageIndex} = utils.getPageIndex(scrollTop, pageSize)\r\n        return {\r\n            list: data.map((item, index) => ({item, index})).slice(start, end),\r\n            startPageIndex: pageIndex,\r\n            start,\r\n        }\r\n    })\r\n\r\n    /*---------------------------------------style-------------------------------------------*/\r\n\r\n    /**\r\n     * 跟节点Scroll的class\r\n     * @author  韦胜健\r\n     * @date    2020/12/16 10:48\r\n     */\r\n    const classes = useClass(() => [\r\n        'pl-virtual-list',\r\n        {\r\n            'pl-virtual-list-disabled': props.disabled,\r\n        }\r\n    ])\r\n\r\n    /**\r\n     * 占位节点strut的样式\r\n     * @author  韦胜健\r\n     * @date    2020/12/16 10:48\r\n     */\r\n    const strutStyles = useStyles(style => {\r\n        if (!state.pageSize) {\r\n            return\r\n        }\r\n        if (props.disabled) {\r\n            return;\r\n        }\r\n        if (!props.dynamicSize) {\r\n            style.height = `${(props.data || []).length * props.size}px`\r\n        } else {\r\n            style.height = `${state.nodes[state.nodes.length - 1].bottom}px`\r\n        }\r\n    })\r\n\r\n    /**\r\n     * 内容（位移）节点的样式\r\n     * @author  韦胜健\r\n     * @date    2020/12/16 10:48\r\n     */\r\n    const contentStyles = useStyles(style => {\r\n\r\n        if (!state.pageSize) {\r\n            return\r\n        }\r\n        if (props.disabled) {\r\n            return;\r\n        }\r\n\r\n        const {start} = offsetData.value\r\n\r\n        let top = 0\r\n        if (!props.dynamicSize) {\r\n            top = start * props.size\r\n        } else {\r\n            top = state.nodes[start].top\r\n        }\r\n\r\n        if (transform !== false) {\r\n            /*transform定位*/\r\n            style.transform = `translateY(${top}px)`\r\n        } else {\r\n            /*top定位*/\r\n            style.top = `${top}px`\r\n        }\r\n    })\r\n\r\n    /*---------------------------------------utils-------------------------------------------*/\r\n\r\n    const utils = {\r\n        /**\r\n         * 根据top值，对比DataNodes中节点的top以及bottom得到在data nodes中的位置索引\r\n         * @author  韦胜健\r\n         * @date    2020/11/15 9:29\r\n         */\r\n        getIndex: (top: number) => {\r\n            if (!props.dynamicSize) {\r\n                // console.log('not dynamic》》》getIndex', top / props.size)\r\n                return Math.floor(top / props.size)\r\n            } else {\r\n                const {nodes} = state\r\n                let start = 0;\r\n                let end = nodes.length - 1\r\n                let temp = 0;\r\n                while (start <= end) {\r\n                    let middle = Math.floor((start + end) / 2)\r\n                    let middleBottom = nodes[middle].bottom\r\n                    if (middleBottom === top) {\r\n                        return middle + 1\r\n                    } else if (middleBottom < top) {\r\n                        start = middle + 1\r\n                    } else if (middleBottom > top) {\r\n                        if (!temp || temp > middle) {\r\n                            temp = middle\r\n                        }\r\n                        end = middle - 1\r\n                    }\r\n                }\r\n                // console.log('is dynamic》》》getIndex', temp)\r\n                return temp\r\n            }\r\n        },\r\n        /**\r\n         * 根据scrollTop以及pageSize获取当前的pageIndex\r\n         * @author  韦胜健\r\n         * @date    2020/12/14 22:44\r\n         */\r\n        getPageIndex: (scrollTop: number, pageSize: number) => {\r\n            const data = props.data || []\r\n            /*当前scrollTop对应的数据中数据的索引*/\r\n            let scrollIndex = utils.getIndex(scrollTop)\r\n            let pageIndex = Math.floor(scrollIndex / pageSize)\r\n            let start = pageIndex === 0 ? 0 : (pageIndex - 1) * pageSize\r\n            let end = start + pageSize * 3\r\n            /*console.log({\r\n                scrollIndex,\r\n                pageIndex,\r\n                start,\r\n                end,\r\n            })*/\r\n            const exceed = end - data.length\r\n            if (exceed > 0) {\r\n                end = data.length\r\n                start -= exceed\r\n                if (start < 0) {\r\n                    start = 0\r\n                }\r\n            }\r\n            pageIndex = Math.floor(start / pageSize)\r\n            return {\r\n                data,\r\n                start,\r\n                end,\r\n                pageIndex,\r\n            }\r\n        },\r\n        /**\r\n         * 格式化props.data为 DataNode数组\r\n         * @author  韦胜健\r\n         * @date    2020/11/15 9:29\r\n         */\r\n        resetData: (data: any[]) => {\r\n            // console.log('resetData')\r\n            state.nodes = data.map((item, index) => ({\r\n                data: item,\r\n                index,\r\n                top: props.size * index,\r\n                height: props.size,\r\n                bottom: props.size * (index + 1),\r\n            }))\r\n        }\r\n    }\r\n\r\n    /*---------------------------------------handler-------------------------------------------*/\r\n\r\n    const handler = {\r\n        onScroll: (e: Event) => {\r\n            emit.onScroll(e)\r\n            if (props.disabled) {\r\n                return\r\n            }\r\n            freezeState.scrollTop = (e.target as HTMLDivElement).scrollTop\r\n            const current = utils.getPageIndex((e.target as HTMLDivElement).scrollTop, state.pageSize)\r\n            if (freezeState.current.pageIndex != current.pageIndex || freezeState.current.start != current.start) {\r\n                state.scrollTop = (e.target as HTMLDivElement).scrollTop\r\n                freezeState.current = current\r\n            }\r\n        }\r\n    }\r\n\r\n    watch(() => props.data, (data: any[]) => {\r\n        if (props.disabled) {\r\n            return\r\n        }\r\n        if (!props.dynamicSize) {\r\n            return;\r\n        }\r\n        !!refs.scroll && refs.scroll.methods.scrollTop(0, 0);\r\n        /*如果是动态高度，则刷state.nodes*/\r\n        utils.resetData(data)\r\n    })\r\n\r\n    onMounted(() => {\r\n        const hostHeight = refs.scroll!.refs.host.offsetHeight\r\n        state.pageSize = Math.ceil(hostHeight / props.size)\r\n        if (props.dynamicSize && !props.disabled) {\r\n            utils.resetData(props.data)\r\n        }\r\n    })\r\n\r\n    onUpdated(async () => {\r\n        if (props.disabled) {\r\n            return\r\n        }\r\n        if (!props.dynamicSize) {\r\n            return;\r\n        }\r\n        await nextTick()\r\n        // console.log('dynamic scan height')\r\n        const elNodes = (Array.from(refs.content.childNodes || []) as HTMLElement[]).filter(node => node.nodeType !== 3)\r\n        for (let i = 0; i < elNodes.length; i++) {\r\n            const el = elNodes[i];\r\n            const {offsetHeight: height} = el\r\n            let vid = el.getAttribute('vid') as null | number | string\r\n            if (vid == null) {\r\n                throw new Error('Each item of the virtual-list must have an attribute named \"vid\", please set :vid=\"index\"')\r\n            }\r\n            vid = Number(vid)\r\n            const prevNode = state.nodes[vid]\r\n            const prevHeight = prevNode.height\r\n            let deltaHeight = prevHeight - height\r\n            if (deltaHeight !== 0) {\r\n                prevNode.height = height\r\n                prevNode.bottom = prevNode.bottom - deltaHeight\r\n                for (let j = vid + 1; j < state.nodes!.length; j++) {\r\n                    state.nodes![j].top = state.nodes![j - 1].bottom\r\n                    state.nodes![j].bottom = state.nodes![j].bottom - deltaHeight\r\n                }\r\n            }\r\n        }\r\n    })\r\n\r\n    return {\r\n        virtual: {\r\n            offsetData,\r\n            classes,\r\n            strutStyles,\r\n            contentStyles,\r\n            handler,\r\n        }\r\n    }\r\n}","import './virtual-list.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useVirtualList} from \"./useVirtualList\";\r\nimport {PlScroll} from \"../scroll/scroll\";\r\n\r\nexport const PlVirtualList =  designComponent({\r\n    name: 'pl-virtual-list',\r\n    props: {\r\n        data: {type: Array, require: true, default: []},            // 要渲染的长数据\r\n        size: {type: Number, require: true, default: 40},           // 每一行高度\r\n        dynamicSize: {type: Boolean},                               // 标识列表中的每一行高度不是固定的，但是还是需要提供 size 属性，而且size属性不能与每一行的高度差距太多；\r\n        disabled: {type: Boolean},                                  // 禁用虚拟滚动\r\n    },\r\n    emits: {\r\n        onScroll: (e: Event) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {item: Object, index: Number, virtualIndex: Number},\r\n            content: {data: Array},\r\n        })\r\n\r\n        const {refs} = useRefs({\r\n            scroll: PlScroll,\r\n            content: HTMLDivElement,\r\n        })\r\n\r\n        const {virtual} = useVirtualList({\r\n            refs,\r\n            props,\r\n            emit,\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                refs,\r\n            },\r\n            render: () => {\r\n                const {list} = virtual.offsetData.value\r\n                return (\r\n                    <PlScroll onScroll={virtual.handler.onScroll} ref=\"scroll\" class={virtual.classes.value} disableListTransition>\r\n                        <div class=\"pl-virtual-list-strut\" style={virtual.strutStyles.value}>\r\n                            <div class=\"pl-virtual-list-content\" style={virtual.contentStyles.value} ref=\"content\">\r\n                                {scopedSlots.content({data: list}, list.map((node, virtualIndex) =>\r\n                                    scopedSlots.default({item: node.item, index: node.index, virtualIndex})\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </PlScroll>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {PlVirtualList} from './virtual-list'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlVirtualList)","export const PROGRESS_DEFAULT_PROPS = {\r\n    modelValue: {type: Number, default: 100},                           // 进度百分比，双向绑定值\r\n    outerColor: {type: String, default: '#f2f2f2'},                     // 外层未激活颜色\r\n    innerColor: {type: String, default: '#12b4a5'},                     // 内层已经激活颜色\r\n    speed: {type: Number, default: 3},                                  // 动画速度\r\n    status: {type: String, default: 'normal'},                          // 状态\r\n    successColor: {type: String, default: '#42E67F'},                   // 成功状态颜色\r\n    errorColor: {type: String, default: '#FF6235'},                     // 失败状态颜色\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {PROGRESS_DEFAULT_PROPS} from \"./progress.utils\";\r\nimport {computed} from 'vue';\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlProgressBar = designComponent({\r\n    name: 'pl-progress-bar',\r\n    props: {\r\n        ...PROGRESS_DEFAULT_PROPS,\r\n\r\n        width: {type: String, default: '300px'},\r\n        height: {type: String, default: '6px'},\r\n        inlineText: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n        const iconColor = computed(() => {\r\n            switch (props.status) {\r\n                case 'success':\r\n                    return props.successColor\r\n                case 'error':\r\n                    return props.errorColor\r\n                default:\r\n                    return null\r\n            }\r\n        })\r\n\r\n        const outerStyles = computed(() => ({\r\n            height: !!props.inlineText ? '16px' : props.height,\r\n            width: props.width,\r\n            backgroundColor: props.outerColor,\r\n            borderRadius: props.width,\r\n        }))\r\n\r\n        const innerStyles = computed(() => ({\r\n            width: `${props.modelValue}%`,\r\n            backgroundColor: iconColor.value || props.innerColor,\r\n            borderRadius: props.width,\r\n        }))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-progress-bar\">\r\n                    <div class=\"pl-progress-bar-outer\" style={outerStyles.value}>\r\n                        <div class=\"pl-progress-bar-inner\" style={innerStyles.value}>\r\n                            {props.inlineText && props.modelValue > 20 && (\r\n                                <div>\r\n                                    <div class=\"pl-progress-bar-content\">\r\n                                        {props.status === 'success' && <PlIcon icon=\"el-icon-check-bold\" class=\"pl-progress-bar-icon-success\" style={{color: 'white'}}/>}\r\n                                        {props.status === 'error' && <PlIcon icon=\"el-icon-close-bold\" class=\"pl-progress-bar-icon-error\" style={{color: 'white'}}/>}\r\n                                        {props.status !== 'success' && props.status !== 'error' && <span>{props.modelValue}%</span>}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        {props.inlineText && props.modelValue < 20 && (\r\n                            <div>\r\n                                <div class=\"pl-progress-bar-content\">\r\n                                    {props.status === 'success' && <PlIcon icon=\"el-icon-check-bold\" class=\"pl-progress-bar-icon-success\" style={{color: props.successColor}}/>}\r\n                                    {props.status === 'error' && <PlIcon icon=\"el-icon-close-bold\" class=\"pl-progress-bar-icon-error\" style={{color: props.errorColor}}/>}\r\n                                    {props.status !== 'success' && props.status !== 'error' && <span>{props.modelValue}%</span>}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    {\r\n                        !props.inlineText && (\r\n                            <div class=\"pl-progress-bar-content\">\r\n                                {props.status === 'success' && <PlIcon icon=\"el-icon-success\" class=\"pl-progress-bar-icon-success\" style={{color: props.successColor}}/>}\r\n                                {props.status === 'error' && <PlIcon icon=\"el-icon-error\" class=\"pl-progress-bar-icon-error\" style={{color: props.errorColor}}/>}\r\n                                {props.status !== 'success' && props.status !== 'error' && <span>{props.modelValue}%</span>}\r\n                            </div>\r\n                        )\r\n                    }\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlProgressBar} from './progress-bar'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport './progress.scss'\r\n\r\nexport default createComponentPlugin(PlProgressBar)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlProgressBar} from \"../progress/progress-bar\";\r\n\r\nexport default createComponentPlugin(PlProgressBar)","export function createAnimate(\r\n    {\r\n        initValue,\r\n        time,\r\n        action,\r\n    }: {\r\n        initValue: () => number,\r\n        time: number,\r\n        action: (val: number) => void,\r\n    }) {\r\n\r\n    let cancel = null as null | number\r\n\r\n    return {\r\n        start: (percent: number, done?: () => void) => {\r\n            if (cancel != null) {\r\n                cancelAnimationFrame(cancel)\r\n            }\r\n            let startTime = Date.now()\r\n\r\n            let n = initValue()\r\n            let k = (percent - n) / time\r\n\r\n            const run = () => {\r\n                let nowTime = Date.now()\r\n                let deltaTime = nowTime - startTime\r\n\r\n                if (deltaTime > time) {\r\n                    cancel = null\r\n                    action(percent)\r\n                    !!done && done()\r\n                    return\r\n                }\r\n                action(Number((deltaTime * k + n).toFixed(2)))\r\n                cancel = requestAnimationFrame(run)\r\n            }\r\n            run()\r\n        },\r\n        stop: () => {\r\n            if (cancel != null) {\r\n                cancelAnimationFrame(cancel)\r\n            }\r\n        }\r\n    }\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {PROGRESS_DEFAULT_PROPS} from \"./progress.utils\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {computed, reactive, watch} from 'vue';\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {createAnimate} from \"../../utils/createAnimate\";\r\nimport {PlIcon} from '../icon/icon';\r\n\r\n/*\r\n\r\nSVG path 指令\r\n\r\nM x,y 在这里x和y是绝对坐标，分别代表水平坐标和垂直坐标\r\nm dx,dy 在这里dx和dy是相对于当前点的距离，分别是向右和向下的距离。\r\nA 绘制圆弧\r\n\r\nSVG提供了一个范围广泛stroke 属性\r\n\r\n- stroke: 定义一条线，文本或元素轮廓颜色\r\n- stroke-width: 定义了一条线，文本或元素轮廓厚度\r\n- stroke-linecap: 不同类型的开放路径的终结(开头和结尾是方形还是带圆角的)\r\n- stroke-dasharray: 虚线\r\n- stroke-dashoffset: dash模式到路径开始的距离,使用了一个 <百分比> 值， 那么这个值就代表了当前viewport的一个百分比，值可以取为负值\r\n\r\nSVG Path标签 A 参数\r\n\r\nA rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n\r\n- rx：x轴半径\r\n- ry：y轴半径\r\n- x-axis-rotation：指椭圆的X轴与水平方向顺时针方向夹角，可以想像成一个水平的椭圆绕中心点顺时针旋转的角度（一般都是0，不知道有什么用，如果希望旋转一定的夹角的话，可以用transform rotate实现）\r\n- large-arc-flag：1表示大角度弧线，0为小角度弧线（如果数值大于50%，则这个应该是1，否则是0）。\r\n- sweep-flag：1为顺时针方向，0为逆时针方向。\r\n- x：结束点x坐标\r\n- y：结束点y坐标\r\n\r\n*/\r\nexport const PlProgressCircle = designComponent({\r\n    name: 'pl-progress-circle',\r\n    props: {\r\n        ...PROGRESS_DEFAULT_PROPS,\r\n\r\n        size: {type: Number, default: 100},                                                     // 大小尺寸\r\n        lineSize: {type: Number, default: 6},                                                   // 线条尺寸\r\n        startAngle: {type: Number, default: 0},                                                 // 起始角度\r\n\r\n        antiClockwise: {type: Boolean},                                                         // 逆时针\r\n        loading: {type: Boolean},                                                               // 加载动画\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: number) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {slots} = useSlots()\r\n\r\n        const model = useModel(() => 0, event.emit.onUpdateModelValue, {autoWatch: false})\r\n\r\n        const animate = createAnimate({\r\n            time: props.loading ? 1500 : 900,\r\n            initValue: () => model.value != null ? model.value : (props.loading ? loading.min : 0),\r\n            action: val => model.value = val,\r\n        })\r\n\r\n        const loading = (() => {\r\n            return reactive({\r\n                isLoading: false,\r\n                max: 75,\r\n                min: 15,\r\n                start: () => {\r\n                    const run = () => {\r\n                        if (model.value == null) {\r\n                            model.value = loading.min\r\n                        }\r\n                        animate.start(model.value <= loading.min ? loading.max : loading.min, run)\r\n                    }\r\n                    animate.start(loading.max, run)\r\n                    loading.isLoading = true\r\n                },\r\n                end: () => {\r\n                    animate.stop()\r\n                    loading.isLoading = false\r\n                },\r\n            })\r\n        })();\r\n\r\n        const styles = useStyles(style => {\r\n            style.width = unit(props.size)\r\n            style.height = unit(props.size)\r\n        })\r\n\r\n        const percent = computed(() => model.value == null ? 0 : model.value / 100)\r\n\r\n        const radius = computed(() => 50 - props.lineSize / 2)\r\n\r\n        const pathD = computed(() => {\r\n            let d = [`M 50 ${props.lineSize / 2}`] as (string | number)[]\r\n            const r = radius.value\r\n            const p = percent.value /*小于1的百分比数字*/\r\n\r\n            const degrees = Math.PI * 2 * p\r\n\r\n            d.push(`A ${r} ${r} 0`)\r\n            d.push(p > 0.5 ? 1 : 0)\r\n            d.push(props.antiClockwise ? 0 : 1)\r\n            d.push(`${50 + r * Math.sin(degrees) * (props.antiClockwise ? -1 : 1)} ${50 - r * Math.cos(degrees)}`)\r\n\r\n            return d.join(' ')\r\n        })\r\n\r\n\r\n        const pathStroke = computed(() => {\r\n            switch (props.status) {\r\n                case 'success':\r\n                    return props.successColor\r\n                case 'error':\r\n                    return props.errorColor\r\n                default:\r\n                    return props.innerColor\r\n            }\r\n        })\r\n\r\n        const circleStroke = computed(() => {\r\n            if (percent.value === 1) {\r\n                return pathStroke.value\r\n            }\r\n            return props.outerColor\r\n        })\r\n\r\n        const pathStyles = useStyles(style => {\r\n            style.transform = `rotate(${props.startAngle}deg)`\r\n        })\r\n\r\n        watch(() => props.loading, val => val ? loading.start() : loading.end(), {immediate: true})\r\n\r\n        watch(() => props.modelValue, val => !props.loading && animate.start(val), {immediate: true})\r\n\r\n        return {\r\n            refer: {\r\n                animate,\r\n            },\r\n            render: () => (\r\n                <div class={`pl-progress-circle ${loading.isLoading ? 'pl-progress-circle-loading' : ''}`} style={styles.value}>\r\n                    <svg viewBox=\"0 0 100 100\">\r\n\r\n                        <circle\r\n                            cx=\"50\"\r\n                            cy=\"50\"\r\n                            r={radius.value}\r\n                            stroke={circleStroke.value}\r\n                            stroke-width={props.lineSize}\r\n                            fill=\"none\"/>\r\n\r\n                        {percent.value !== 1 && <path\r\n                            d={pathD.value}\r\n                            stroke={pathStroke.value}\r\n                            stroke-width={props.lineSize}\r\n                            fill=\"none\"\r\n                            stroke-linecap=\"round\"\r\n                            style={pathStyles.value}\r\n                        />}\r\n\r\n                    </svg>\r\n\r\n                    <div class=\"pl-progress-circle-label\">\r\n                        {props.loading ? slots.default() : <>\r\n                            {props.status === 'normal' && slots.default(`${model.value}%`)}\r\n                            {props.status === 'success' && <PlIcon icon=\"el-icon-check-bold\" class=\"pl-progress-bar-icon-success\" style={{color: props.successColor}}/>}\r\n                            {props.status === 'error' && <PlIcon icon=\"el-icon-close-bold\" class=\"pl-progress-bar-icon-error\" style={{color: props.errorColor}}/>}\r\n                        </>}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlProgressCircle} from \"../progress/progress-circle\";\r\n\r\nexport default createComponentPlugin(PlProgressCircle)","import {designComponent} from \"../../use/designComponent\";\r\nimport {PROGRESS_DEFAULT_PROPS} from \"./progress.utils\";\r\nimport {computed, watch} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {createAnimate} from \"../../utils/createAnimate\";\r\nimport {useModel} from \"../../use/useModel\";\r\n\r\nexport const PlProgressMini = designComponent({\r\n    name: 'pl-progress-mini',\r\n    props: {\r\n        size: {default: 28},\r\n        ...PROGRESS_DEFAULT_PROPS,\r\n        innerColor: {type: String, default: 'rgba(0,0,0,0.25)'},\r\n        round: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n\r\n        const model = useModel(() => 0, () => undefined, {autoWatch: false})\r\n\r\n        const animate = createAnimate({\r\n            time: 300,\r\n            initValue: () => model.value || 0,\r\n            action: val => model.value = val,\r\n        })\r\n\r\n        const styles = useStyles(style => {\r\n            style.height = unit(props.size)\r\n            style.width = unit(props.size)\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-progress-mini',\r\n            {\r\n                [`pl-progress-mini-status-${props.status}`]: !!props.status,\r\n                [`pl-progress-mini-round`]: props.round,\r\n            },\r\n        ])\r\n\r\n        const percent = computed(() => 1 - (model.value == null ? 0 : model.value / 100))\r\n\r\n        const radius = computed(() => 50 - 2 / 2)\r\n\r\n        const pathD = computed(() => {\r\n            let d = [`M 50 1`] as (string | number)[]\r\n            const r = radius.value\r\n            const p = percent.value /*小于1的百分比数字*/\r\n\r\n            const degrees = Math.PI * 2 * p\r\n\r\n            d.push(`A ${r} ${r} 0`)\r\n            d.push(p > 0.5 ? 1 : 0)\r\n            d.push(0)\r\n            d.push(`${50 - r * Math.sin(degrees)} ${50 - r * Math.cos(degrees)}`)\r\n\r\n            d.push(`L 50 50 L 50 1`)\r\n\r\n            return d.join(' ')\r\n        })\r\n\r\n\r\n        const pathStroke = computed(() => {\r\n            switch (props.status) {\r\n                case 'success':\r\n                    return props.successColor\r\n                case 'error':\r\n                    return props.errorColor\r\n                default:\r\n                    return props.innerColor\r\n            }\r\n        })\r\n\r\n        watch(() => props.modelValue, val => animate.start(val), {immediate: true})\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    <svg viewBox=\"0 0 100 100\">\r\n                        {model.value == 0 ? (\r\n                            <circle cx=\"50\" cy=\"50\" r={radius.value} fill={pathStroke.value}/>\r\n                        ) : (\r\n                            <path\r\n                                d={pathD.value}\r\n                                stroke=\"none\"\r\n                                fill={pathStroke.value}\r\n                            />\r\n                        )}\r\n                    </svg>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlProgressMini} from \"../progress/progress-mini\";\r\n\r\nexport default createComponentPlugin(PlProgressMini)","import {reactive, watch} from 'vue'\r\n\r\nfunction toNumber(val: null | string | number) {\r\n    if (val == null) {\r\n        return\r\n    }\r\n    if (typeof val === \"string\") {\r\n        return Number(val.replace('px', ''))\r\n    }\r\n    return val\r\n}\r\n\r\nexport function useNumber<Props extends { [k: string]: any },\r\n    K extends string,\r\n    >(\r\n    props: Props,\r\n    keys: K[]\r\n): { numberState: { [k in K]: Exclude<Props[k], string> } } {\r\n\r\n    const state = reactive((() => {\r\n        const ret = {} as Record<string, number | undefined>\r\n        keys.forEach(key => {\r\n            ret[key] = toNumber(props[key])\r\n        })\r\n        return ret\r\n    })())\r\n\r\n    keys.forEach(key => {\r\n        watch(() => props[key], val => state[key] = toNumber(val))\r\n    })\r\n\r\n    return {\r\n        numberState: state as any,\r\n    }\r\n}\r\n\r\n/*const {numberState} = useNumber({\r\n    noField: 11,\r\n    level: 1,\r\n    age: 2 as number | undefined,\r\n    limit: '2' as string | number | undefined,\r\n}, [\r\n    'level',\r\n    'age',\r\n    'limit',\r\n])\r\n\r\nnumberState.level.toFixed(0)\r\nnumberState.age.toFixed(0)\r\nnumberState.limit.toFixed(0)*/\r\n\r\n\r\n","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {computed, PropType, ref} from 'vue';\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {$$notice} from \"../notice-service\";\r\nimport {PlSelectOption, SelectOption} from \"./select-option\";\r\nimport {PlScroll} from \"../scroll/scroll\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlSelectPanel = designComponent({\r\n    name: 'pl-select-panel',\r\n    props: {\r\n        modelValue: {type: [String, Number, Array]},                     // 双向绑定值\r\n\r\n        multiple: {type: Boolean},                                      // 是否多选\r\n        multipleMaxLimit: {type: [Number, String]},                     // 多选最多选择个数\r\n        multipleMinLimit: {type: [Number, String]},                     // 多选最少选择个数\r\n\r\n        noMatchText: {type: String, default: '暂无匹配数据'},             // 筛选无数据时展示的文本\r\n        noDataText: {type: String, default: '暂无数据'},                 // 无数据时显示的文本\r\n        filterMethod: {type: Function as PropType<(option: { val: string | number, label: string | number, disabled?: boolean }) => boolean>},// 筛选过滤函数\r\n        content: {type: [Object, Function]},                            // 内容虚拟dom或者渲染函数\r\n        height: {type: Number},                                         // 面板高度，超过会显示自定义滚动条\r\n\r\n        showDebug: {type: Boolean},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number | string | string[]) => true,\r\n        onClick: (option: SelectOption) => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {propsState} = useProps(props, {\r\n            multipleMaxLimit: useProps.NUMBER,\r\n            multipleMinLimit: useProps.NUMBER,\r\n        })\r\n\r\n        /*插槽*/\r\n        const {slots} = useSlots()\r\n        /*组件引用*/\r\n        const {refs} = useRefs({scroll: PlScroll})\r\n        /*收集的 select-option 子组件*/\r\n        const items = SelectPanelCollector.parent()\r\n        /*筛选的出有效的 select-option 子组件*/\r\n        const options = computed(() => items.filter(i => !i.props.group))\r\n        /*当前显示的select-option*/\r\n        const showOptions = computed(() => options.value.filter(o => utils.isShow(o.props)))\r\n        /*当前高亮的option.props.val*/\r\n        const current = ref(null as null | SelectOption)\r\n        /*双向绑定值*/\r\n        const model = useModel(() => props.modelValue as number | string | string[], emit.onUpdateModelValue)\r\n\r\n        const classes = computed(() => [\r\n            'pl-select-panel',\r\n            {\r\n                'pl-select-panel-multiple': props.multiple,\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {!!props.height && (style.height = unit(props.height))})\r\n\r\n        const utils = {\r\n            /**\r\n             * 用于option判断当前是否已经被选中\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:23\r\n             */\r\n            isSelected: (optionProps: { label: string | number, val: string | number, disabled?: boolean }) => {\r\n                if (!model.value) return false\r\n                if (!props.multiple) {\r\n                    return (model.value as string) == optionProps.val\r\n                } else {\r\n                    return (model.value as string[]).indexOf(optionProps.val! as string) > -1\r\n                }\r\n            },\r\n            isShow: (optionProps: { label: string | number, val: string | number, disabled?: boolean }) => {\r\n                return !props.filterMethod || props.filterMethod(optionProps)\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            /**\r\n             * 处理点击option的动作\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:24\r\n             */\r\n            clickOption: (option: SelectOption) => {\r\n\r\n                if (option.props.disabled) return\r\n\r\n                emit.onClick(option)\r\n\r\n                if (!props.multiple) {\r\n                    model.value = option.props.val\r\n                } else {\r\n                    const newValue: any[] = [...((model.value as string[]) || [])]\r\n                    const index = newValue.indexOf(option.props.val!)\r\n                    if (index > -1) {\r\n                        if (!!propsState.multipleMinLimit && newValue.length <= propsState.multipleMinLimit) {\r\n                            return $$notice.warn(`最少选择 ${propsState.multipleMinLimit} 个选项`)\r\n                        }\r\n                        newValue.splice(index, 1)\r\n                    } else {\r\n                        if (!!propsState.multipleMaxLimit && newValue.length >= propsState.multipleMaxLimit) {\r\n                            return $$notice.warn(`最多选择 ${propsState.multipleMaxLimit} 个选项`)\r\n                        }\r\n                        newValue.push(option.props.val!)\r\n                    }\r\n                    model.value = [...newValue]\r\n                }\r\n            },\r\n        }\r\n\r\n        const methods = {\r\n            /**\r\n             * 高亮上一个元素\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:18\r\n             */\r\n            highlightPrev: () => {\r\n                if (showOptions.value.length === 0) {\r\n                    return\r\n                }\r\n                if (!current.value) {\r\n                    current.value = showOptions.value[showOptions.value.length - 1]\r\n\r\n                    // 滚动到高亮的选项\r\n                    if (!!refs.scroll) {\r\n                        const el = (current.value as any).$el\r\n                        refs.scroll.methods.scrollTop(el.offsetTop, 200)\r\n                    }\r\n                } else {\r\n                    let index = showOptions.value.indexOf(current.value)\r\n                    if (index === 0) {\r\n                        index = showOptions.value.length - 1\r\n                        current.value = showOptions.value[index]\r\n\r\n                        // 滚动到高亮的选项\r\n                        if (!!refs.scroll) {\r\n                            const el = (current.value as any).$el\r\n                            refs.scroll.methods.scrollTop(el.offsetTop, 200)\r\n                        }\r\n                    } else {\r\n                        index--\r\n                        current.value = showOptions.value[index]\r\n\r\n                        // 滚动到高亮的选项\r\n                        if (!!refs.scroll) {\r\n                            const el = (current.value as any).$el\r\n                            const {wrapperScrollTop} = refs.scroll.freezeState\r\n                            if (wrapperScrollTop > el.offsetTop) {\r\n                                refs.scroll.methods.scrollTop(el.offsetTop, 200)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * 高亮下一个元素\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:18\r\n             */\r\n            highlightNext: () => {\r\n                if (showOptions.value.length === 0) {\r\n                    return\r\n                }\r\n                if (!current.value) {\r\n                    current.value = showOptions.value[0]\r\n                } else {\r\n                    let index = showOptions.value.indexOf(current.value)\r\n                    if (index === showOptions.value.length - 1) {\r\n                        index = 0\r\n                        current.value = showOptions.value[index]\r\n\r\n                        // 滚动到高亮的选项\r\n                        if (!!refs.scroll) {\r\n                            refs.scroll.methods.scrollTop(0, 200)\r\n                        }\r\n                    } else {\r\n                        index++\r\n                        current.value = showOptions.value[index]\r\n\r\n                        // 滚动到高亮的选项\r\n                        if (!!refs.scroll) {\r\n                            const el = (current.value as any).$el\r\n                            const {state: {hostHeight}, freezeState: {wrapperScrollTop}} = refs.scroll\r\n                            const scrollTop = el.offsetTop + el.offsetHeight - hostHeight\r\n                            if (scrollTop > 0 && scrollTop > wrapperScrollTop) {\r\n                                refs.scroll.methods.scrollTop(scrollTop, 200)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n            },\r\n            /**\r\n             * 选中当前高亮的元素\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:18\r\n             */\r\n            selectHighlight: () => {\r\n                if (showOptions.value.length === 0) {\r\n                    return\r\n                }\r\n                if (!current.value) {\r\n                    methods.highlightNext()\r\n                }\r\n                if (!!current.value) {\r\n                    handler.clickOption(current.value)\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n                handler,\r\n                methods,\r\n                utils,\r\n                current,\r\n            },\r\n            render: () => {\r\n\r\n                const inner = [\r\n                    (options.value.length === 0 || showOptions.value.length === 0) ? (\r\n                        <div class=\"pl-select-panel-empty-text\">\r\n                            <PlIcon icon=\"el-icon-nodata\"/>\r\n                            {options.value.length === 0 ? props.noDataText : props.noMatchText}\r\n                        </div>\r\n                    ) : null,\r\n                    slots.default(),\r\n                    !!props.content ? ((typeof props.content === \"function\" ? props.content() : props.content)) : null,\r\n                    !!props.showDebug ? (\r\n                        <div class=\"pl-select-panel-debug\">\r\n                            {options.value.map(option => <div>{option.props.label}__{option.props.val}__{option.props.disabled}</div>)}\r\n                        </div>\r\n                    ) : null,\r\n                ].filter(Boolean)\r\n\r\n                const content: any = !!props.height ? (\r\n                    <PlScroll fitHostWidth ref=\"scroll\">\r\n                        {inner}\r\n                    </PlScroll>\r\n                ) : inner\r\n\r\n                return (\r\n                    <div class={classes.value} style={styles.value}>\r\n                        {content}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport const SelectPanelCollector = useCollect(() => ({\r\n    parent: PlSelectPanel,\r\n    child: PlSelectOption,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {PlSelectOption, SelectOption} from './select-option'\r\nimport {computed} from 'vue';\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlSelectPanel} from \"./select-panel\";\r\n\r\nexport const PlSelectGroup = designComponent({\r\n    name: 'pl-select-group',\r\n    props: {\r\n        label: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots(['label'], true)\r\n        const options = (SelectGroupCollector as any).parent() as SelectOption[]\r\n        const panel = PlSelectPanel.use.inject(null)\r\n        const isShow = computed(() => !panel || options.filter((option) => !option.props.group).filter(o => panel.utils.isShow(o.props)).length > 0)\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <>\r\n                        {isShow.value && (slots.label.isExist() || !!props.label) && (\r\n                            <PlSelectOption class=\"pl-select-group\" group label=\"\" val=\"\">\r\n                                <PlIcon icon=\"el-icon-list\"/>\r\n                                {slots.label(props.label)}\r\n                            </PlSelectOption>\r\n                        )}\r\n                        {slots.default()}\r\n                    </>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport const SelectGroupCollector = useCollect(() => ({\r\n    parent: PlSelectGroup,\r\n    child: PlSelectOption,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {SelectPanelCollector} from \"./select-panel\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {computed} from 'vue';\r\nimport {SelectGroupCollector} from \"./select-group\";\r\nimport {SelectCollector} from \"./select\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlCheckbox} from \"../checkbox/checkbox\";\r\n\r\nexport const PlSelectOption = designComponent({\r\n    name: 'pl-select-option',\r\n    props: {\r\n        label: {type: [String, Number], required: true},\r\n        val: {type: [String, Number], required: true},\r\n        icon: {type: String},\r\n        disabled: {type: Boolean},\r\n\r\n        group: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots()\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        SelectCollector.child({injectDefaultValue: null, sort: () => refs.el})\r\n        const group = SelectGroupCollector.child({injectDefaultValue: null})\r\n        const panel = SelectPanelCollector.child({injectDefaultValue: null, sort: () => refs.el})\r\n        const isShow = computed(() => (props.group || !panel || panel.utils.isShow(props)))\r\n        const isSelected = computed(() => !!panel && panel.utils.isSelected(props))\r\n\r\n        const refer = {\r\n            props,\r\n            refs,\r\n        }\r\n\r\n        const classes = useClass(() => [\r\n            'pl-select-option',\r\n            {\r\n                'pl-select-option-disabled': props.disabled,\r\n                'pl-select-option-show': isShow.value,\r\n                'pl-select-option-selected': isSelected.value,\r\n                'pl-select-option-highlight': !!panel && !!panel.current.value && panel.current.value.props === props,\r\n                'pl-select-option-group-child': !!group && !props.group,\r\n            }\r\n        ])\r\n\r\n        const handler = {\r\n            click: () => {\r\n                if (props.group) return\r\n                !!panel && panel.handler.clickOption(refer)\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer,\r\n            render: () => {\r\n                return (\r\n                    <div\r\n                        {...{\r\n                            ref: \"el\",\r\n                            label: props.label,\r\n                            val: props.val,\r\n                            icon: props.icon,\r\n                            class: classes.value,\r\n                            onClick: handler.click,\r\n                        }}>\r\n                        {!!panel && isShow.value && <>\r\n                            {!!panel.props.multiple && !props.group ? <PlCheckbox customReadonly modelValue={isSelected.value} class=\"pl-select-option-checkbox\"/> : null}\r\n                            {!!props.icon && <PlIcon icon={props.icon} class=\"pl-select-option-icon\"/>}\r\n                            {slots.default(props.label)}\r\n                        </>}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport type SelectOption = typeof PlSelectOption.use.class","import {reactive, computed, onBeforeUnmount, ComponentPublicInstance, getCurrentInstance} from 'vue';\r\nimport {useEdit} from \"../../../use/useEdit\";\r\nimport {PopperAgent, SpecificPopperServiceOption} from \"./utils\";\r\n\r\nexport type EditPopperAgent = ReturnType<typeof useEditPopperAgent>\r\n\r\nexport function useEditPopperAgent(\r\n    {\r\n        event: {emit},\r\n        serviceGetter,\r\n        option,\r\n    }: {\r\n        event: { emit: { onBlur: (e: Event) => void, onFocus: (e: Event) => void } },\r\n        serviceGetter: (ins: ComponentPublicInstance) => ((o: SpecificPopperServiceOption) => PopperAgent),\r\n        option: SpecificPopperServiceOption,\r\n    }) {\r\n\r\n    const ctx = getCurrentInstance()!\r\n    const {editComputed} = useEdit()\r\n\r\n    const state = reactive({\r\n        agent: null as null | PopperAgent,\r\n        focusCounter: 0,\r\n    })\r\n\r\n    const isShow = computed(() => !!state.agent && state.agent.isShow)\r\n    const isOpen = computed(() => !!state.agent && state.agent.isOpen)\r\n\r\n    const methods = {\r\n        show: async () => {\r\n            if (!editComputed.value.editable) return\r\n            if (isShow.value) return;\r\n            if (!state.agent) {\r\n                state.agent = await serviceGetter(ctx.proxy!)(option)\r\n            }\r\n            await state.agent.show()\r\n        },\r\n        hide: async () => {\r\n            if (!isShow.value) return\r\n            await state.agent!.hide()\r\n        },\r\n        toggle: async () => {\r\n            isShow.value ? methods.hide() : methods.show()\r\n        }\r\n    }\r\n\r\n    const inputHandler = {\r\n        onClickInput: async () => await methods.toggle(),\r\n        onBlur: async (e: Event) => {\r\n            state.focusCounter--\r\n            if (state.focusCounter === 0) {\r\n                emit.onBlur(e)\r\n                await methods.hide()\r\n            }\r\n        },\r\n        onFocus: (e: Event) => {\r\n            if (state.focusCounter === 0) {\r\n                emit.onFocus(e)\r\n            }\r\n            state.focusCounter = 1\r\n        },\r\n        onEsc: async () => {\r\n            await methods.hide()\r\n        },\r\n        onEnter: async (e: KeyboardEvent) => {\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n            await methods.show()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 当前组件示例销毁的时候，解除与service的绑定关系\r\n     * @author  韦胜健\r\n     * @date    2020/11/27 10:12\r\n     */\r\n    onBeforeUnmount(() => {\r\n        if (!!state.agent) {\r\n            state.agent.destroy()\r\n        }\r\n    })\r\n\r\n    return {\r\n        methods,\r\n        inputHandler,\r\n        state,\r\n        isShow,\r\n        isOpen,\r\n        editComputed,\r\n    }\r\n\r\n}","import {createAgentGetter} from \"../popper/edit/createAgentGetter\";\r\nimport {App} from 'vue';\r\nimport {PlSelectPanel} from \"./select-panel\";\r\n\r\nexport const SelectServiceGetter = createAgentGetter({\r\n    name: 'select',\r\n    render: (attrs) => {\r\n        return <PlSelectPanel {...attrs}/>\r\n    },\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n        sizeEqual: true,\r\n        arrow: false,\r\n    },\r\n    defaultRenderAttrs: {\r\n        async onChange() {\r\n            let renderAttrs: any = this.state.option.serviceOption.renderAttrs\r\n            if (typeof renderAttrs === \"function\") renderAttrs = renderAttrs()\r\n            /*非多选的情况下，默认点击关闭下拉框*/\r\n            if (!renderAttrs.multiple) {\r\n                this.hide()\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            computed: {\r\n                $select() {return SelectServiceGetter(this)},\r\n            },\r\n        })\r\n    },\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport './select.scss'\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Input from '../input'\r\nimport {PlSelectOption, SelectOption} from \"./select-option\";\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {SelectServiceGetter} from \"./select-service\";\r\nimport {computed, ref} from 'vue';\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {ie} from \"plain-utils/utils/ie\";\r\nimport {handleKeyboard} from \"../keyboard\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {createEventListener} from \"../../utils/createEventListener\";\r\nimport {PlSelectPanel} from \"./select-panel\";\r\nimport {PlInput} from \"../input/input\";\r\nimport {PlInputInnerTags} from \"../input/input-inner-tags\";\r\n\r\nconst Props = {\r\n    ...EditProps,\r\n    ...StyleProps,\r\n\r\n    modelValue: {type: [String, Number, Array]},\r\n    filterable: {type: Boolean, default: true},                     // 是否可以输入筛选\r\n    inputProps: {type: Object},                                     // input组件绑定属性对象\r\n\r\n    multiple: {type: Boolean},                                      // 是否多选\r\n    multipleMaxLimit: {type: Number},                               // 多选最多选择个数\r\n    multipleMinLimit: {type: Number},                               // 多选最少选择个数\r\n    collapseTags: {type: Boolean, default: true},                   // 多选模式下，超过三个选项，其他的将省略显示\r\n\r\n    noMatchText: {type: String, default: '暂无匹配数据'},            // 筛选无数据时展示的文本\r\n    noDataText: {type: String, default: '暂无数据'},                // 无数据时显示的文本\r\n    filterMethod: Function,                                         // 筛选过滤函数\r\n}\r\n\r\nexport const PlSelect = designComponent({\r\n    name: 'pl-select',\r\n    props: {\r\n        ...Props,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: number | string | string[]) => true,\r\n        onClick: (option: SelectOption) => true,\r\n\r\n        onSpace: (e: KeyboardEvent) => true,\r\n        onEnter: (e: KeyboardEvent) => true,\r\n        onUp: (e: KeyboardEvent) => true,\r\n        onDown: (e: KeyboardEvent) => true,\r\n        onEsc: (e: KeyboardEvent) => true,\r\n\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        useStyle()\r\n        const {slots} = useSlots()\r\n        const {refs} = useRefs({input: Input,})\r\n\r\n        /*对 pl-select-panel 的引用*/\r\n        let panel = null as typeof PlSelectPanel.use.class | null\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const model = useModel(() => props.modelValue as number | string | string[] | undefined, event.emit.onUpdateModelValue)\r\n        const filterText = ref(null as string | null)\r\n        const agentState = useEditPopperAgent({\r\n            event,\r\n            serviceGetter: SelectServiceGetter,\r\n            option: {\r\n                reference: () => refs.input as any,\r\n                renderAttrs: () => ({\r\n                    ref: r => panel = r,\r\n                    ...(Object.keys(Props).reduce((ret: any, key) => {\r\n                        ret[key] = (props as any)[key]\r\n                        return ret\r\n                    }, {})),\r\n                    modelValue: model.value,\r\n                    height: popperHeight.value,\r\n                    content: slots.default,\r\n                    filterMethod: utils.filterMethod,\r\n                    onChange: handler.onServiceChange,\r\n                    onClick: event.emit.onClick,\r\n                }),\r\n                popperAttrs: ({\r\n                    onMousedownPopper: () => agentState.state.focusCounter++,\r\n                    onClickPopper: () => refs.input!.methods.focus(),\r\n                    onHide: () => filterText.value = null,\r\n                }),\r\n            },\r\n        })\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            filterMethod: (option: { label?: string, val: string, disabled: boolean }) => {\r\n                if (!!props.filterMethod) return props.filterMethod(filterText.value, option)\r\n                return !!filterText.value && !!filterText.value.trim() ? (!!option.label && option.label.indexOf(filterText.value) > -1) : true\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        /**\r\n         * 收集的option实例\r\n         * @author  韦胜健\r\n         * @date    2020/6/8 11:16\r\n         */\r\n        const items = SelectCollector.parent()\r\n        /**\r\n         * 有效的 pl-select-option\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 10:06\r\n         */\r\n        const formatData = computed(() => items.filter(i => !i.props.group))\r\n        /**\r\n         * popper应该的高度\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 10:06\r\n         */\r\n        const popperHeight = computed(() => formatData.value.length > 6 ? 256 : null)\r\n        /**\r\n         * 显示值\r\n         * @author  韦胜健\r\n         * @date    2020/6/8 11:16\r\n         */\r\n        const displayValue = computed(() => {\r\n            if (!props.multiple) {\r\n                for (let i = 0; i < formatData.value.length; i++) {\r\n                    const item = formatData.value[i];\r\n                    if (item.props.val === model.value) {\r\n                        return item.props.label\r\n                    }\r\n                }\r\n                return model.value\r\n            } else {\r\n                let strings: string[] = []\r\n                if (!!model.value && Array.isArray(model.value)) {\r\n                    for (let i = 0; i < formatData.value.length; i++) {\r\n                        const item = formatData.value[i];\r\n                        if (model.value.indexOf(item.props.val! as string) > -1) {\r\n                            strings.push(item.props.label! as string)\r\n                        }\r\n                    }\r\n                }\r\n                return strings.join('').trim()\r\n            }\r\n        })\r\n\r\n        /**\r\n         * 给input组件传递的属性\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 11:21\r\n         */\r\n        const inputProps = computed(() => Object.assign({}, props.inputProps || {}))\r\n\r\n        /**\r\n         * 当前显示的空值占位符\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 11:21\r\n         */\r\n        const placeholderValue = computed(() => (agentState.isShow.value ? displayValue.value || inputProps.value.placeholder : inputProps.value.placeholder) || '')\r\n\r\n        /**\r\n         * 给input组件绑定的目标对象\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 11:21\r\n         */\r\n        const inputBinding = computed(() => {\r\n            /*onEnter不要了，只要剩余的时间监听器*/\r\n            const {onEnter, ...inputHandler} = agentState.inputHandler\r\n\r\n            return {\r\n                ref: 'input',\r\n                class: [\r\n                    'pl-select',\r\n                    {\r\n                        'pl-input-tags': !!props.multiple,\r\n                        'pl-select-input-show': agentState.isShow.value,\r\n                    }\r\n                ],\r\n\r\n                modelValue: (props.filterable && agentState.isShow.value) ? filterText.value! : displayValue.value as string,\r\n                placeValue: displayValue.value as string,\r\n                inputReadonly: !props.filterable,\r\n                placeholder: placeholderValue.value,\r\n                suffixIcon: 'el-icon-arrow-down',\r\n                clearIcon: true,\r\n                isFocus: agentState.state.focusCounter > 0,\r\n                clearHandler: handler.onInputClear,\r\n\r\n                ...inputHandler,\r\n                onChange: handler.onInputChange,\r\n                onKeydown: handler.onInputKeydown,\r\n\r\n                ...inputProps.value,\r\n            }\r\n        })\r\n\r\n        const multipleTags = computed(() => {\r\n            if (!model.value) {\r\n                return []\r\n            }\r\n            if (!Array.isArray(model.value)) {\r\n                console.error('The value of multiple select should be array')\r\n                return []\r\n            }\r\n            if (!formatData.value || formatData.value.length === 0) return []\r\n            return formatData.value.filter(option => (model.value as any[]).indexOf(option.props.val!) > -1)\r\n        })\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            onInputKeydown: handleKeyboard({\r\n                space: (e) => {\r\n                    if (props.multiple && agentState.isShow.value) {\r\n                        e.stopPropagation()\r\n                        e.preventDefault()\r\n                        panel!.methods.selectHighlight()\r\n                    }\r\n                    event.emit.onSpace(e)\r\n                },\r\n                enter: (e) => {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                    if (agentState.isShow.value) {\r\n                        panel!.methods.selectHighlight()\r\n                    } else {\r\n                        agentState.methods.show()\r\n                    }\r\n                },\r\n                up: (e) => {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                    if (!!agentState.isShow.value) {\r\n                        panel!.methods.highlightPrev()\r\n                    }\r\n                },\r\n                down: (e) => {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                    if (!!agentState.isShow.value) {\r\n                        panel!.methods.highlightNext()\r\n                    }\r\n                },\r\n                esc: (e) => {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                    if (!!agentState.isShow.value) {\r\n                        agentState.methods.hide()\r\n                    }\r\n                },\r\n            }),\r\n            onServiceChange: (val: any) => model.value = val,\r\n            onInputClear: () => model.value = undefined,\r\n            onInputChange: (val: string | null) => {\r\n                filterText.value = val\r\n                if (!agentState.isShow.value && ie) {\r\n                    agentState.methods.show()\r\n                }\r\n            },\r\n            onClickItemCloseIcon: (item: SelectOption, index: number) => {\r\n                index = (model.value as any[]).indexOf(item.props.val!)\r\n                if (index > -1) {\r\n                    const value = [...(model.value as any[])]\r\n                    value.splice(index, 1)\r\n                    model.value = [...value]\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <PlInput {...inputBinding.value} v-slots={{\r\n                    hidden: slots.default,\r\n                    default: !props.multiple ? null : () => (\r\n                        <PlInputInnerTags\r\n                            data={multipleTags.value}\r\n                            collapseTags={props.collapseTags}\r\n                            v-slots={{\r\n                                default: ({item, index}: { item: SelectOption, index: number }) => [\r\n                                    <span>{item.props.label}</span>,\r\n                                    <PlIcon icon=\"el-icon-close\" {...createEventListener({onClick: () => handler.onClickItemCloseIcon(item, index)})}/>\r\n                                ]\r\n                            }}\r\n                        />\r\n                    )\r\n                }}/>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const SelectCollector = useCollect(() => ({\r\n    parent: PlSelect,\r\n    child: PlSelectOption,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {computed, nextTick, ref, watch, PropType} from 'vue';\r\nimport './pagination.scss'\r\nimport {useNumber} from \"../../use/useNumber\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlSelect} from \"../select/select\";\r\nimport {PlSelectOption} from \"../select/select-option\";\r\nimport {PlNumber} from \"../number/number\";\r\nimport {PlLoading} from \"../loading/loading\";\r\n\r\nconst SizesWidth = {\r\n    large: 120,\r\n    normal: 105,\r\n    mini: 90,\r\n}\r\n\r\nexport const PlPagination = designComponent({\r\n    name: 'pl-pagination',\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n\r\n        pageSize: {type: [Number, String], required: true},                                     // 页大小\r\n        total: {type: [Number, String]},                                                        // 总共条目数\r\n        totalPage: {type: [Number, String]},                                                    // 总页数，与 total/pageSize 作用类似，用来确定总页数；\r\n        pagerCount: {type: [Number, String], default: 7},                                       // 页码按钮数量，当总页数超过时会折叠\r\n        currentPage: {type: [Number, String]},                                                  // 当前页\r\n\r\n        layout: {type: String, default: 'sizes,jumper,prev,pager,next,loading,blank,total,slot'},// 组件布局\r\n        pageSizes: {type: Array as PropType<number[]>, default: [10, 20, 50, 100]},             // 页大小下拉选项数组\r\n        prevText: {type: String},                                                               // 上一页按钮替换文本\r\n        nextText: {type: String},                                                               // 下一页按钮替换文本\r\n\r\n        jumperNumberWidth: {type: Number},                                                      // 跳转页的数字输入框宽度\r\n    },\r\n    emits: {\r\n        onJump: (val: number) => true,\r\n        onPrev: () => true,\r\n        onNext: () => true,\r\n        onCurrentChange: (val: number) => true,\r\n        onSizeChange: (val: number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle()\r\n        const {slots} = useSlots([], true)\r\n\r\n        const jumperValue = ref(null as number | null)\r\n        watch(() => props.currentPage, (val) => jumperValue.value = val == null ? 1 : Number(val), {immediate: true})\r\n\r\n        const classes = computed(() => [\r\n            'pl-pagination',\r\n            `pl-pagination-size-${styleComputed.value.size}`,\r\n            `pl-pagination-shape-${styleComputed.value.shape}`,\r\n            {\r\n                'pl-pagination-disabled': editComputed.value.disabled,\r\n            },\r\n        ])\r\n\r\n        const {numberState} = useNumber(props, [\r\n            'pageSize',\r\n            'total',\r\n            'totalPage',\r\n            'pagerCount',\r\n            'currentPage',\r\n        ])\r\n\r\n        const jumperNumberWidth = computed(() => {\r\n            if (!!props.jumperNumberWidth) {\r\n                return props.jumperNumberWidth\r\n            } else {\r\n                return {\r\n                    large: 78,\r\n                    normal: 64,\r\n                    mini: 56,\r\n                }[styleComputed.value.size]\r\n            }\r\n        })\r\n\r\n        const totalPageData = computed(() => {\r\n            if (numberState.totalPage != null) {\r\n                return numberState.totalPage\r\n            } else if (numberState.pageSize != null && numberState.total != null) {\r\n                return Math.ceil(numberState.total / numberState.pageSize)\r\n            } else {\r\n                return 0\r\n            }\r\n        })\r\n\r\n        const pageInfo = computed(() => {\r\n            let currentPage = numberState.currentPage\r\n            let pagerCount = numberState.pagerCount\r\n            let totalPage = Number(totalPageData.value)\r\n            const midPagerCount = (pagerCount - 1) / 2                      // 从0开始计算中间索引\r\n\r\n            let showPrevMore = false\r\n            let showNextMore = false\r\n\r\n            if (totalPage > pagerCount) {\r\n                if (currentPage! > pagerCount - midPagerCount) {\r\n                    showPrevMore = true\r\n                }\r\n                if (currentPage! < totalPage - midPagerCount) {\r\n                    showNextMore = true\r\n                }\r\n            }\r\n\r\n            return {\r\n                currentPage,                // 当前页\r\n                pagerCount,                 // 页码按钮数量，包括左折叠左边的一个按钮以及右折叠右边的一个按钮\r\n                totalPage,                  // 总页数\r\n                midPagerCount,              // 中间页码按钮位置索引\r\n                showPrevMore,               // 是否显示左折叠\r\n                showNextMore,               // 是否显示右折叠\r\n            }\r\n        })\r\n\r\n        const pagers = computed(() => {\r\n            const {\r\n                currentPage,\r\n                pagerCount,\r\n                totalPage,\r\n                showPrevMore,\r\n                showNextMore\r\n            } = pageInfo.value\r\n\r\n            const array: number[] = []\r\n\r\n            if (showPrevMore && !showNextMore) {\r\n                const startPage = totalPage - (pagerCount - 2);\r\n                for (let i = startPage; i < totalPage; i++) {\r\n                    array.push(i);\r\n                }\r\n            } else if (!showPrevMore && showNextMore) {\r\n                for (let i = 2; i < pagerCount; i++) {\r\n                    array.push(i);\r\n                }\r\n            } else if (showPrevMore && showNextMore) {\r\n                const offset = Math.floor(pagerCount / 2) - 1;\r\n                for (let i = currentPage! - offset; i <= currentPage! + offset; i++) {\r\n                    array.push(i);\r\n                }\r\n            } else {\r\n                for (let i = 2; i < totalPage; i++) {\r\n                    array.push(i);\r\n                }\r\n            }\r\n\r\n            return array\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 获取页码按钮的 class\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 12:07\r\n             */\r\n            getPagerButtonClass(page: string | number) {\r\n                return [\r\n                    'pl-pagination-pager-button',\r\n                    {\r\n                        'pl-pagination-pager-button-active': page === pageInfo.value.currentPage\r\n                    },\r\n                ]\r\n            },\r\n            /**\r\n             * 跳转到指定页\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 14:02\r\n             */\r\n            changeCurrent(val: number) {\r\n                if (!editComputed.value.editable) return;\r\n                emit.onCurrentChange(val)\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            /**\r\n             * 跳转到上一页\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 14:08\r\n             */\r\n            onPrev() {\r\n                if (!editComputed.value.editable) return;\r\n                if (pageInfo.value.currentPage === 1) {\r\n                    return\r\n                }\r\n                utils.changeCurrent(pageInfo.value.currentPage! - 1)\r\n                emit.onPrev()\r\n            },\r\n            /**\r\n             * 跳转到下一页\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 14:09\r\n             */\r\n            onNext() {\r\n                if (!editComputed.value.editable) return;\r\n                if (pageInfo.value.totalPage != null && pageInfo.value.currentPage == pageInfo.value.totalPage) {\r\n                    return\r\n                }\r\n                utils.changeCurrent(pageInfo.value.currentPage! + 1)\r\n                emit.onNext()\r\n            },\r\n            /**\r\n             * 跳转到指定页\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 14:29\r\n             */\r\n            async onJump() {\r\n                if (!editComputed.value.editable) return;\r\n                await nextTick()\r\n                let val = jumperValue.value\r\n                if (!val && val !== 0) {\r\n                    val = 1\r\n                    await nextTick()\r\n                    jumperValue.value = val\r\n                }\r\n                if (val > pageInfo.value.totalPage) {\r\n                    val = pageInfo.value.totalPage\r\n                    await nextTick()\r\n                    jumperValue.value = val\r\n                }\r\n                emit.onJump(val)\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                const sizes = (\r\n                    <PlSelect\r\n                        class=\"pl-pagination-sizes\"\r\n                        modelValue={numberState.pageSize}\r\n\r\n                        loading={false}\r\n                        readonly={editComputed.value.readonly || editComputed.value.loading!}\r\n                        filterable={false}\r\n                        inputProps={{width: SizesWidth[styleComputed.value.size], clearIcon: false}}\r\n                        {...{onChange: emit.onSizeChange}}>\r\n                        {(props.pageSizes || []).map((item) => (\r\n                            <PlSelectOption label={`${item} 条/页`} val={item} key={item}/>\r\n                        ))}\r\n                    </PlSelect>\r\n                )\r\n\r\n                const jumper = (\r\n                    <div class=\"pl-pagination-jumper\">\r\n                        <span>前往</span>\r\n                        <PlNumber inputProps={{width: jumperNumberWidth.value}}\r\n                                  readonly={editComputed.value.readonly || editComputed.value.loading!}\r\n                                  hideButton\r\n                                  loading={false}\r\n                                  v-model={jumperValue.value}\r\n                                  min={0}\r\n                                  onEnter={handler.onJump}/>\r\n                        <span>页</span>\r\n                    </div>\r\n                )\r\n\r\n                const prev = (\r\n                    <div class=\"pl-pagination-prev pl-pagination-pager-button\" onClick={handler.onPrev}>\r\n                        {!!props.prevText ? props.prevText : <PlIcon icon=\"el-icon-arrow-left\"/>}\r\n                    </div>\r\n                )\r\n                const next = (\r\n                    <div class=\"pl-pagination-next pl-pagination-pager-button\" onClick={handler.onNext}>\r\n                        {!!props.nextText ? props.nextText : <PlIcon icon=\"el-icon-arrow-right\"/>}\r\n                    </div>\r\n                )\r\n\r\n                const pager = (\r\n                    <ul class=\"pl-pagination-pager\">\r\n                        {pageInfo.value.totalPage > 0 && <li key=\"first\" class={utils.getPagerButtonClass(1)} onClick={() => utils.changeCurrent(1)}>1</li>}\r\n                        {pageInfo.value.showPrevMore && <li key=\"prev-more\" class={utils.getPagerButtonClass('prev')}>\r\n                            <PlIcon icon=\"el-icon-more\"/>\r\n                        </li>}\r\n                        {pagers.value.map((page, index) => <li class={utils.getPagerButtonClass(page)} key={index} onClick={() => utils.changeCurrent(page)}>{page}</li>)}\r\n                        {pageInfo.value.showNextMore && <li key=\"prev-more\" class={utils.getPagerButtonClass('next')}>\r\n                            <PlIcon icon=\"el-icon-more\"/>\r\n                        </li>}\r\n                        {pageInfo.value.totalPage > 1 && <li key=\"last\" class={utils.getPagerButtonClass(pageInfo.value.totalPage)} onClick={() => utils.changeCurrent(pageInfo.value.totalPage)}>{pageInfo.value.totalPage}</li>}\r\n                    </ul>\r\n                )\r\n\r\n                const blank = (<div class=\"pl-pagination-blank\"></div>)\r\n                const total = props.total == null ? null : (<div class=\"pl-pagination-total\"><span>总共 {props.total} 条记录</span></div>)\r\n                const slot = !slots.default.isExist() ? null : (<div class=\"pl-pagination-slot\">{slots.default()}</div>)\r\n                const loading = !editComputed.value.loading ? null : (\r\n                    <div class=\"pl-pagination-loading\">\r\n                        <PlLoading type=\"beta\"/>\r\n                    </div>\r\n                )\r\n\r\n                let parts = {sizes, jumper, prev, pager, next, loading, blank, total, slot,}\r\n\r\n                let layout = props.layout.replace(/\\s+/g, '').split(',').reduce((ret: any[], item) => {\r\n                    let part = (parts as any)[item]\r\n                    if (!!part) {\r\n                        ret.push(part)\r\n                    }\r\n                    return ret\r\n                }, [])\r\n\r\n                return (\r\n                    <div class={classes.value}>\r\n                        {layout}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {Ref} from 'vue';\r\n\r\n/*节点状态类型*/\r\nexport enum StepStatus {\r\n    wait = 'wait',\r\n    finish = 'finish',\r\n    process = 'process',\r\n    error = 'error',\r\n}\r\n\r\nexport const StepUtils = {\r\n    getCurrentIndex: (current: any, items: any[]) => {\r\n        if (typeof current === \"number\") {\r\n            return current\r\n        } else {\r\n            for (let i = 0; i < items.length; i++) {\r\n                const item = items[i];\r\n                if (item.val === current) return i\r\n            }\r\n        }\r\n    },\r\n    getStepStatus: (\r\n        group: { currentStatus: StepStatus, currentIndex: Ref<number> },\r\n        child: { status: StepStatus, index: Ref<number> }\r\n    ): StepStatus | null => {\r\n\r\n        const {currentStatus, currentIndex} = group\r\n        const {status, index} = child\r\n\r\n        if (!!status) return status as StepStatus\r\n        if (currentIndex.value > index.value) {\r\n            return StepStatus.finish\r\n        } else if (currentIndex.value === index.value) {\r\n            if (!!currentStatus) {\r\n                return currentStatus as StepStatus\r\n            } else {\r\n                return StepStatus.process\r\n            }\r\n        } else if (currentIndex.value < index.value) {\r\n            return StepStatus.wait\r\n        } else {\r\n            return null\r\n        }\r\n    }\r\n}","import {PlPagination} from './pagination'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlPagination)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {computed} from 'vue';\r\nimport './badge.scss'\r\n\r\nexport const PlBadge = designComponent({\r\n    name: 'pl-badge',\r\n    props: {\r\n        data: {},                                       //显示的数据\r\n        bottom: {type: Boolean},                        //标记纵向是否在底部\r\n        start: {type: Boolean},                         //标记横向是否在右边\r\n        status: {type: String, default: 'error'},       //标记背景色\r\n        dot: {type: Boolean,},                          //标记是否只是一个小圆点\r\n        max: {type: Number,},                           //标记显示文本最大值\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots(['badge'])\r\n        const contentClass = computed(() => [\r\n            'pl-badge-content',\r\n            {\r\n                'pl-badge-content-dot': !!props.dot,\r\n            },\r\n            `pl-badge-content-${!!props.bottom ? 'bottom' : 'top'}`,\r\n            `pl-badge-content-${!!props.start ? 'start' : 'end'}`,\r\n            `pl-badge-content-status-${props.status}`,\r\n        ])\r\n        const showValue = computed(() => {\r\n            if (props.data == null) return null\r\n            if (props.max != null && (Number(props.data)) > props.max) return props.max + '+'\r\n            return props.data\r\n        })\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-badge\">\r\n                    {slots.default()}\r\n                    <div class={contentClass.value}>\r\n                        {slots.badge(props.data != null ? <span>{showValue.value}</span> : null)}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlBadge} from './badge'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlBadge)","import {designComponent} from \"../../../use/designComponent\";\r\nimport {useSlots} from \"../../../use/useSlots\";\r\nimport {computed} from 'vue';\r\nimport {StepUtils} from \"../step.utils\";\r\nimport {useCollect} from \"../../../use/useCollect\";\r\nimport './step.scss'\r\nimport {PlStep} from \"./step\";\r\n\r\nexport const PlStepGroup = designComponent({\r\n    name: 'pl-step-group',\r\n    props: {\r\n        current: {type: [String, Number]},                              // 双向绑定，指定当前步骤条的步骤，在step组件中，可以通过 status 属性覆盖状态\r\n        currentStatus: {type: String},                                  // 当前激活节点的状态\r\n        type: {type: String, default: 'normal'},                        // 步骤条类型，normal、navigation\r\n        vertical: {type: Boolean},                                      // 步骤条是否为纵向\r\n        titleAlignBottom: {type: Boolean},                              // 默认情况下，标题会放在图标右侧，设置该属性可以改为放在图标下面\r\n        mini: {type: Boolean, default: true},                           // 迷你步骤条\r\n        dotIcon: {type: Boolean},                                       // 图标是否采用小圆点替代\r\n    },\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots()\r\n\r\n        const items = StepCollector.parent() as any[]\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const isTitleAlignBottom = computed(() => {\r\n            return props.titleAlignBottom || props.vertical\r\n        })\r\n        const classes = computed(() => [\r\n            'pl-step-group',\r\n            `pl-step-group-${props.vertical ? 'vertical' : 'horizontal'}`,\r\n            {\r\n                'pl-step-group-title-align-bottom': isTitleAlignBottom.value,\r\n                'pl-step-group-mini': props.mini,\r\n                'pl-step-group-dot-icon': props.dotIcon,\r\n            },\r\n        ])\r\n        const currentIndex = computed(() => StepUtils.getCurrentIndex(props.current, items)) as { value: number }\r\n\r\n        return {\r\n            refer: {\r\n                items,\r\n                currentIndex,\r\n                props,\r\n                isTitleAlignBottom,\r\n            },\r\n            render: () => (\r\n                <div class={classes.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const StepCollector = useCollect(() => ({\r\n    parent: PlStepGroup,\r\n    child: PlStep,\r\n}))","import {designComponent} from \"../../../use/designComponent\";\r\nimport {useSlots} from \"../../../use/useSlots\";\r\nimport {computed, getCurrentInstance, Ref} from 'vue';\r\nimport {StepStatus, StepUtils} from \"../step.utils\";\r\nimport {StepCollector} from \"./step-group\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport {PlIcon} from \"../../icon/icon\";\r\nimport {PlLoading} from \"../../loading/loading\";\r\n\r\nexport const PlStep = designComponent({\r\n    name: 'pl-step',\r\n    props: {\r\n        icon: {type: String},\r\n        status: {type: String},\r\n        title: {type: String},\r\n        content: {type: String},\r\n        val: {type: String},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement\r\n        })\r\n        const {slots} = useSlots(['title', 'content'])\r\n        const stepGroup = StepCollector.child({sort: () => refs.el})\r\n        const ctx = getCurrentInstance()!\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const index = computed(() => stepGroup.items.indexOf(ctx.proxy))\r\n\r\n        const icon = computed(() => {\r\n            if (!!props.icon) return props.icon\r\n            return null\r\n        })\r\n\r\n        const isLast = computed(() => {\r\n            return index.value === stepGroup.items.length - 1\r\n        })\r\n\r\n        const currentStatus: Ref<StepStatus | null> = computed(() => {\r\n            return StepUtils.getStepStatus({\r\n                currentIndex: stepGroup.currentIndex as any,\r\n                currentStatus: stepGroup.props.currentStatus as any\r\n            }, {\r\n                status: props.status as any,\r\n                index\r\n            })\r\n        })\r\n\r\n\r\n        const classes = computed(() => [\r\n            'pl-step',\r\n            `pl-step-status-${currentStatus.value}`,\r\n            {\r\n                'pl-step-has-icon': !!icon.value,\r\n                'pl-step-last': isLast.value,\r\n            }\r\n        ])\r\n\r\n        return {\r\n            refer: {},\r\n            render: () => (\r\n                <div class={classes.value} onClick={emit.onClick} ref=\"el\">\r\n                    <div class=\"pl-step-head\">\r\n                        {!stepGroup.props.vertical && (stepGroup.isTitleAlignBottom.value || isLast.value) && <span class=\"pl-step-divider pl-step-divider-prev\"/>}\r\n                        <span class=\"pl-step-icon\">\r\n                        {\r\n                            !!icon.value ?\r\n                                (currentStatus.value !== 'process' ? <PlIcon icon={icon.value}/> : <PlLoading type=\"delta\"/>)\r\n                                :\r\n                                (\r\n                                    !!stepGroup.props.dotIcon ?\r\n                                        (<span class=\"pl-step-dot\"/>)\r\n                                        :\r\n                                        (\r\n                                            <span class=\"pl-step-number\">\r\n                                                {currentStatus.value === StepStatus.finish ?\r\n                                                    <PlIcon icon=\"el-icon-check\"/>\r\n                                                    :\r\n                                                    (currentStatus.value === StepStatus.error ?\r\n                                                            <PlIcon icon=\"el-icon-close\"/>\r\n                                                            :\r\n                                                            <span>{index.value + 1}</span>\r\n                                                    )\r\n                                                }\r\n                                            </span>\r\n                                        )\r\n                                )\r\n                        }\r\n                    </span>\r\n                        {!stepGroup.isTitleAlignBottom.value && (\r\n                            <span class=\"pl-step-title\">\r\n                            {slots.title(props.title)}\r\n                        </span>\r\n                        )}\r\n                        {(stepGroup.isTitleAlignBottom.value || !isLast.value) && <span class=\"pl-step-divider pl-step-divider-next\"/>}\r\n                    </div>\r\n                    <div class=\"pl-step-body\">\r\n                        {!stepGroup.isTitleAlignBottom.value ?\r\n                            <span class=\"pl-step-icon\"/>\r\n                            :\r\n                            <span class=\"pl-step-title\">\r\n                            {slots.title(props.title)}\r\n                        </span>\r\n                        }\r\n                        <span class=\"pl-step-content\">\r\n                        {slots.content(props.content)}\r\n                    </span>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlStep} from \"./step/step\";\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlStep)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlStepGroup} from \"../step/step/step-group\";\r\n\r\nexport default createComponentPlugin(PlStepGroup)","import {designComponent} from \"../../../use/designComponent\";\r\nimport {useSlots} from \"../../../use/useSlots\";\r\nimport {computed} from 'vue';\r\nimport {StepUtils} from \"../step.utils\";\r\nimport {useCollect} from \"../../../use/useCollect\";\r\nimport {PlArrowStep} from \"./arrow-step\";\r\nimport './arrow-step.scss'\r\n\r\nexport const PlArrowStepGroup = designComponent({\r\n    name: 'pl-arrow-step-group',\r\n    props: {\r\n        current: {},\r\n        currentStatus: {type: String},\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        const items = ArrowStepCollector.parent() as any[]\r\n        const currentIndex = computed(() => StepUtils.getCurrentIndex(props.current, items)) as { value: number }\r\n        return {\r\n            refer: {\r\n                props,\r\n                currentIndex,\r\n                items,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-arrow-step-group\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const ArrowStepCollector = useCollect(() => ({\r\n    parent: PlArrowStepGroup,\r\n    child: PlArrowStep,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {computed, onMounted} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport './triangle.scss'\r\n\r\nconst DirectionMap = {\r\n    top: 'bottom',\r\n    bottom: 'top',\r\n    left: 'right',\r\n    right: 'left',\r\n}\r\n\r\nfunction uppercaseFirstLetter(name: string): string {\r\n    if (!name) return name\r\n    return name.charAt(0).toUpperCase() + name.slice(1)\r\n}\r\n\r\nexport const PlTriangle = designComponent({\r\n    name: 'pl-triangle',\r\n    props: {\r\n        direction: {type: String, default: 'top'},\r\n        half: {type: String},\r\n        size: {type: [Number, String], default: 20},\r\n    },\r\n    setup({props}) {\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        const {propsState} = useProps(props, {\r\n            size: useProps.NUMBER,\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-triangle',\r\n            `pl-triangle-direction-${props.direction}`,\r\n            {\r\n                [`pl-triangle-half-${props.half}`]: !!props.half\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            if (!props.half) {\r\n                return style\r\n            }\r\n            if (props.direction === 'top' || props.direction === 'bottom') {\r\n                style.width = unit(propsState.size)\r\n            } else {\r\n                style.height = unit(propsState.size)\r\n            }\r\n            return style\r\n        })\r\n\r\n        const targetStyles = useStyles((style: any) => {\r\n\r\n            style.border = `solid transparent ${unit(propsState.size)}`\r\n            style[`border${uppercaseFirstLetter(props.direction)}Width`] = '0'\r\n            style[`border${uppercaseFirstLetter((DirectionMap as any)[props.direction])}Color`] = 'currentColor'\r\n\r\n            if (!!props.half) {\r\n                if (props.direction === 'top' || props.direction === 'bottom') {\r\n                    props.half === 'end' && (style.right = unit(propsState.size))\r\n                } else {\r\n                    props.half === 'end' && (style.bottom = unit(propsState.size))\r\n                }\r\n            }\r\n\r\n            return style\r\n        })\r\n\r\n        if (propsState.size == null) {\r\n            onMounted(() => {\r\n                propsState.size = (refs.el!.parentNode as HTMLDivElement).offsetHeight / 2\r\n            })\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                propsState.size == null ? <span ref=\"el\" style=\"display:none\"/> : (\r\n                    <div class={classes.value} style={styles.value} ref=\"el\">\r\n                        <div class=\"pl-triangle-target\" style={targetStyles.value}/>\r\n                    </div>\r\n                )\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {getCurrentInstance, computed, Ref} from 'vue';\r\nimport {useSlots} from \"../../../use/useSlots\";\r\nimport {StepStatus, StepUtils} from \"../step.utils\";\r\nimport {ArrowStepCollector} from \"./arrow-step-group\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport {PlTriangle} from \"../../triangle/triangle\";\r\n\r\nexport const PlArrowStep = designComponent({\r\n    name: 'pl-arrow-step',\r\n    props: {\r\n        status: {type: String},\r\n        title: {type: String},\r\n        val: {type: String},\r\n        hideIndex: {type: Boolean},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const ctx = getCurrentInstance()!\r\n        const {slots} = useSlots(['title'])\r\n        const {refs} = useRefs({el: HTMLDivElement})\r\n        const stepGroup = ArrowStepCollector.child({sort: () => refs.el})\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const index = computed(() => {\r\n            return stepGroup.items.indexOf(ctx.proxy)\r\n        }) as { value: number }\r\n\r\n        const isLast = computed(() => {\r\n            return index.value === stepGroup.items.length - 1\r\n        })\r\n\r\n        const isFirst = computed(() => {\r\n            return index.value === 0\r\n        })\r\n\r\n        const currentStatus: Ref<StepStatus | null> = computed(() => {\r\n            return StepUtils.getStepStatus({\r\n                currentIndex: stepGroup.currentIndex as any,\r\n                currentStatus: stepGroup.props.currentStatus as any\r\n            }, {\r\n                status: props.status as any,\r\n                index: index as any\r\n            })\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-arrow-step',\r\n            `pl-arrow-step-status-${currentStatus.value}`,\r\n        ])\r\n\r\n        return {\r\n            refer: {},\r\n            render: () => (\r\n                index.value != null ? (\r\n                    <div class={classes.value} onClick={emit.onClick} ref=\"el\">\r\n                        <div class=\"pl-arrow-step-content\">\r\n                            {!props.hideIndex && <span class=\"pl-arrow-step-sequence\">{index.value + 1}. &nbsp;</span>}\r\n                            <span>{slots.default(props.title)}</span>\r\n                        </div>\r\n                        {!isLast.value ? <PlTriangle direction=\"right\" size={null as any}/> : null}\r\n                        {!isFirst.value ? [\r\n                            <PlTriangle direction=\"bottom\" half=\"start\" size={null as any}/>,\r\n                            <PlTriangle direction=\"top\" half=\"start\" size={null as any}/>\r\n                        ] : null}\r\n                    </div>\r\n                ) : <div/>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlArrowStep} from \"../step/arrow-step/arrow-step\";\r\n\r\nexport default createComponentPlugin(PlArrowStep)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlArrowStepGroup} from \"../step/arrow-step/arrow-step-group\";\r\n\r\nexport default createComponentPlugin(PlArrowStepGroup)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive} from 'vue';\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {PlPopper} from \"../popper/popper\";\r\n\r\nexport const PlDropdown = designComponent({\r\n    name: 'pl-dropdown',\r\n    props: {\r\n        modelValue: {type: Boolean},\r\n        disabledHideOnClickOption: {type: Boolean},                     // 禁用点击 dropdown-option 之后关闭 dropdown\r\n    },\r\n    provideRefer: true,\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots([\r\n            'popper'\r\n        ])\r\n        const {scopedSlots} = useScopedSlots({\r\n            reference: {open: Boolean}\r\n        })\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n\r\n        const state = reactive({})\r\n\r\n        const handler = {\r\n            clickDropdownOption: (e: MouseEvent) => {\r\n                if (!props.disabledHideOnClickOption) {\r\n                    model.value = false\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                state,\r\n                handler,\r\n            },\r\n            render: () => (\r\n                <PlPopper\r\n                    trigger=\"click\"\r\n                    v-model={model.value}\r\n                    noContentPadding\r\n                    transition=\"pl-transition-popper-drop\"\r\n                    v-slots={{popper: slots.popper}}>\r\n                    {scopedSlots.reference(\r\n                        {open: model.value},\r\n                        slots.default()\r\n                    )}\r\n                </PlPopper>\r\n            )\r\n        }\r\n    },\r\n})","import './dropdown.scss'\r\nimport {PlDropdown} from './dropdown'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlDropdown)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlDropdownGroup = designComponent({\r\n    name: 'pl-dropdown-group',\r\n    props: {\r\n        title: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots(['title'], true)\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={[\r\n                    'pl-dropdown-group',\r\n                    {'pl-dropdown-no-title': !slots.title.isExist() && !props.title}\r\n                ]}>\r\n                    {slots.title.isExist() || props.title && (\r\n                        <div class=\"pl-dropdown-group-title\">\r\n                            <PlIcon icon=\"el-icon-list\"/>\r\n                            <span>{slots.title(props.title)}</span>\r\n                        </div>\r\n                    )}\r\n                    <div class=\"pl-dropdown-group-content\">\r\n                        {slots.default()}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlDropdownGroup} from \"../dropdown/dropdown-group\";\r\n\r\nexport default createComponentPlugin(PlDropdownGroup)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {PlDropdown} from \"./dropdown\";\r\n\r\nexport const PlDropdownMenu = designComponent({\r\n    name: 'pl-dropdown-menu',\r\n    props: {},\r\n    emits: {\r\n        onClickOption: (e: MouseEvent, val: any) => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit}}) {\r\n\r\n        const dropdown = PlDropdown.use.inject()\r\n        const {slots} = useSlots()\r\n\r\n        const handler = {\r\n            clickOption: (e: MouseEvent, val: any) => {\r\n                emit.onClickOption(e, val)\r\n                dropdown.handler.clickDropdownOption(e)\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                handler,\r\n            },\r\n            render: slots.default\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlDropdownMenu} from \"../dropdown/dropdown-menu\";\r\n\r\nexport default createComponentPlugin(PlDropdownMenu)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {PlDropdownMenu} from \"./dropdown-menu\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlDropdownOption = designComponent({\r\n    name: 'pl-dropdown-option',\r\n    props: {\r\n        label: {type: [String]},\r\n        val: {},\r\n        icon: {type: String},\r\n        disabled: {type: Boolean},\r\n        align: {type: String, default: 'left'},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n        const menu = PlDropdownMenu.use.inject()\r\n\r\n        const onClick = (e: MouseEvent) => {\r\n            if (props.disabled) {\r\n                return\r\n            }\r\n            emit.onClick(e)\r\n            menu.handler.clickOption(e, props.val)\r\n        }\r\n\r\n        const classes = useClass(() => [\r\n            'pl-dropdown-option',\r\n            `pl-dropdown-option-align-${props.align}`,\r\n            {\r\n                'pl-dropdown-option-disabled': props.disabled\r\n            }\r\n        ])\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} onClick={onClick}>\r\n                    {!!props.icon && <PlIcon icon={props.icon} class=\"pl-dropdown-option-icon\"/>}\r\n                    {slots.default(props.label)}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlDropdownOption} from \"../dropdown/dropdown-option\";\r\n\r\nexport default createComponentPlugin(PlDropdownOption)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport './tooltip.scss'\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {onUpdated, reactive, onMounted} from 'vue';\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\nimport {PlPopper} from \"../popper/popper\";\r\n\r\nexport const PlTooltip = designComponent({\r\n    name: 'pl-tooltip',\r\n    props: {\r\n        modelValue: {type: Boolean},                        // 双向绑定控制是否显示\r\n        tooltip: {type: String},                            // tooltip提示文本，可以通过 tooltip插槽替换\r\n        showWidth: {type: Number},                          // 设置宽度，当内容宽度超过这个宽度时，才会显示tooltip\r\n        theme: {type: String, default: 'dark'},             // 主题，dark以及light\r\n\r\n        placement: {type: String, default: 'top-start'},    // 位置\r\n        popperClass: {type: Object},                        // 传递给 pl-popper 的popperClass 属性\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const state = reactive({\r\n            scrollWidth: 0,\r\n            offsetWidth: 0,\r\n        })\r\n        const {refs} = useRefs({\r\n            reference: HTMLSpanElement\r\n        })\r\n        const {slots} = useSlots(['tooltip'])\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n\r\n        const popperClasses = useClass(() => [\r\n            'pl-tooltip',\r\n            `pl-tooltip-theme-${props.theme}`,\r\n            props.popperClass,\r\n        ])\r\n\r\n        const refresh = debounce(() => {\r\n            if (!refs.reference) return\r\n            const {scrollWidth, offsetWidth} = refs.reference\r\n            if (state.scrollWidth != scrollWidth) state.scrollWidth = scrollWidth\r\n            if (state.offsetWidth != offsetWidth) state.offsetWidth = offsetWidth\r\n            // console.log({...state})\r\n        }, 100)\r\n\r\n        if (props.showWidth) {\r\n            onUpdated(refresh)\r\n            onMounted(refresh)\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <PlPopper\r\n                    disabled={!!props.showWidth ? state.offsetWidth === state.scrollWidth : false}\r\n                    popperClass={popperClasses.value}\r\n                    placement={props.placement}\r\n                    v-model={model.value}\r\n                    v-slots={{\r\n                        default: () => {\r\n                            refresh()\r\n                            return !!props.showWidth ? (\r\n                                <span class=\"pl-tooltip-reference\"\r\n                                      ref=\"reference\"\r\n                                      style={{width: unit(props.showWidth)!}}>\r\n                                {slots.default(props.tooltip)}\r\n                            </span>\r\n                            ) : slots.default(props.tooltip)\r\n                        },\r\n                        popper: () => slots.tooltip(props.tooltip)\r\n                    }}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import {Directive, nextTick} from 'vue';\r\nimport {PlainTooltip} from 'plain-popper';\r\nimport {PlainTooltipConfig} from 'plain-popper/src/PlainTooltipUtils';\r\nimport {deepEqual} from \"plain-utils/object/deepEqual\";\r\n\r\ntype TooltipBinding = string | PlainTooltipConfig\r\n\r\nclass Tooltip {\r\n\r\n    static DEFAULT_OPTION = {\r\n        placement: 'top',\r\n        theme: 'dark',\r\n        animate: 'fade',\r\n        trigger: 'hover',\r\n    }\r\n\r\n    tooltip: PlainTooltip | null = null\r\n    oldOption: any = null\r\n\r\n    constructor(el: HTMLElement, option: PlainTooltipConfig | string) {\r\n        this.updateOption(el, option)\r\n    }\r\n\r\n    async updateOption(el: HTMLElement, option: PlainTooltipConfig | string) {\r\n        if (deepEqual(this.oldOption, option)) {\r\n            return\r\n        }\r\n        this.oldOption = option\r\n        await nextTick()\r\n        if (!!this.tooltip) {\r\n            this.tooltip.destroy()\r\n            this.tooltip = null\r\n        }\r\n        if (!!option) {\r\n            let config: PlainTooltipConfig = (typeof option === \"string\" ? {content: option} : option) as any\r\n            config = Object.assign({reference: el} as Partial<PlainTooltipConfig>, Tooltip.DEFAULT_OPTION, config)\r\n            this.tooltip = new PlainTooltip(config)\r\n        }\r\n    }\r\n\r\n    unbind() {\r\n        if (!!this.tooltip) {\r\n            this.tooltip.destroy()\r\n        }\r\n    }\r\n}\r\n\r\nexport const TooltipDirective = (() => {\r\n    const map = new WeakMap()\r\n    const directive: Directive = {\r\n        mounted(el: HTMLElement, binding: { value: TooltipBinding }) {\r\n            if (!!binding.value) {\r\n                let service = new Tooltip(el, binding.value)\r\n                map.set(el, service)\r\n                service.updateOption(el, binding.value)\r\n            }\r\n        },\r\n        updated(el: HTMLElement, binding: { value: TooltipBinding }) {\r\n            if (!!binding.value) {\r\n                let service = map.get(el) as Tooltip | null\r\n                if (!service) {\r\n                    service = new Tooltip(el, binding.value)\r\n                    map.set(el, service)\r\n                }\r\n                service.updateOption(el, binding.value)\r\n            } else {\r\n                let service = map.get(el) as Tooltip | null\r\n                if (!!service) {\r\n                    service.unbind()\r\n                    service = null\r\n                    map.set(el, service)\r\n                }\r\n            }\r\n        },\r\n        unmounted(el: HTMLElement) {\r\n            const service = map.get(el) as Tooltip\r\n            if (!!service) {\r\n                service.unbind()\r\n            }\r\n        },\r\n    }\r\n    return directive\r\n})()","import {PlTooltip} from './tooltip'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {App} from 'vue';\r\nimport {TooltipDirective} from \"./tooltip-directive\";\r\n\r\nexport default createComponentPlugin(PlTooltip, {\r\n    plugins: [\r\n        {\r\n            install(app: App) {\r\n                app.directive('tooltip', TooltipDirective)\r\n            },\r\n        }\r\n    ]\r\n})","import {Transition} from 'vue'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {addClass} from \"plain-utils/dom/addClass\";\r\nimport {removeClass} from \"plain-utils/dom/removeClass\";\r\n\r\nexport const PlCollapseTransition = designComponent({\r\n    name: 'pl-collapse-transition',\r\n    emits: {\r\n        onAfterLeave: () => true,\r\n    },\r\n    setup({event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n\r\n        const handler = {\r\n            beforeEnter(el: HTMLElement) {\r\n                addClass(el, 'pl-collapse-transition');\r\n                if (!el.dataset) (el as any).dataset = {};\r\n\r\n                el.dataset.oldPaddingTop = el.style.paddingTop;\r\n                el.dataset.oldPaddingBottom = el.style.paddingBottom;\r\n\r\n                el.style.height = '0';\r\n                el.style.paddingTop = '0';\r\n                el.style.paddingBottom = '0';\r\n            },\r\n            enter(el: HTMLElement) {\r\n                el.dataset.oldOverflow = el.style.overflow;\r\n                if (el.scrollHeight !== 0) {\r\n                    el.style.height = el.scrollHeight + 'px';\r\n                    el.style.paddingTop = el.dataset.oldPaddingTop as string;\r\n                    el.style.paddingBottom = el.dataset.oldPaddingBottom as string;\r\n                } else {\r\n                    el.style.height = '';\r\n                    el.style.paddingTop = el.dataset.oldPaddingTop as string;\r\n                    el.style.paddingBottom = el.dataset.oldPaddingBottom as string;\r\n                }\r\n\r\n                el.style.overflow = 'hidden';\r\n            },\r\n            afterEnter(el: HTMLElement) {\r\n                removeClass(el, 'pl-collapse-transition');\r\n                el.style.height = '';\r\n                el.style.overflow = el.dataset.oldOverflow as string;\r\n            },\r\n            beforeLeave(el: HTMLElement) {\r\n                if (!el.dataset) (el as any).dataset = {};\r\n                el.dataset.oldPaddingTop = el.style.paddingTop;\r\n                el.dataset.oldPaddingBottom = el.style.paddingBottom;\r\n                el.dataset.oldOverflow = el.style.overflow;\r\n                el.style.height = el.scrollHeight + 'px';\r\n                el.style.overflow = 'hidden';\r\n            },\r\n            leave(el: HTMLElement) {\r\n                if (el.scrollHeight != 0) {\r\n                    addClass(el, 'pl-collapse-transition');\r\n                    el.style.transitionProperty = 'height'\r\n                    el.style.height = \"0\";\r\n                    el.style.paddingTop = '0';\r\n                    el.style.paddingBottom = '0';\r\n                }\r\n            },\r\n            afterLeave(el: HTMLElement) {\r\n                removeClass(el, 'pl-collapse-transition');\r\n                el.style.height = '';\r\n                el.style.overflow = el.dataset.oldOverflow as string;\r\n                el.style.paddingTop = el.dataset.oldPaddingTop as string;\r\n                el.style.paddingBottom = el.dataset.oldPaddingBottom as string;\r\n                emit.onAfterLeave()\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <Transition\r\n                    {...{\r\n                        onBeforeEnter: handler.beforeEnter,\r\n                        onEnter: handler.enter,\r\n                        onAfterEnter: handler.afterEnter,\r\n                        onBeforeLeave: handler.beforeLeave,\r\n                        onLeave: handler.leave,\r\n                        onAfterLeave: handler.afterLeave,\r\n                    } as any}>\r\n                    {slots.default()}\r\n                </Transition>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Input from '../input'\r\nimport {reactive, watch, PropType} from 'vue';\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {ColorPickerServiceGetter} from \"./service/color-picker.service\";\r\nimport {isEffectiveColorString} from \"./utils/ColorUtils\";\r\nimport './color-picker.scss'\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {$$notice} from \"../notice-service\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {PlColorButton} from \"./color-button\";\r\nimport {PlInput} from \"../input/input\";\r\n\r\nenum ColorPickerType {\r\n    input = 'input',\r\n    button = 'button',\r\n}\r\n\r\nexport const PlColorPicker = designComponent({\r\n    name: 'pl-color-picker',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: String},                             // 当前颜色值\r\n        enableAlpha: {type: Boolean, default: true},            // 是否启用透明度\r\n        format: {type: String, default: 'hex'},                 // 颜色格式\r\n        type: {type: String as PropType<ColorPickerType>, default: ColorPickerType.input}\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | undefined) => true,\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        useStyle()\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n            button: PlColorButton,\r\n        })\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {color: String, onClick: Function as PropType<() => void>},\r\n        }, true)\r\n\r\n        const model = useModel(() => props.modelValue, event.emit.onUpdateModelValue, {autoWatch: false})\r\n        const state = reactive({\r\n            val: model.value,\r\n            inputValue: props.modelValue,\r\n        })\r\n\r\n        const agentState = useEditPopperAgent({\r\n            event,\r\n            serviceGetter: ColorPickerServiceGetter,\r\n            option: {\r\n                reference: () => refs.input as any || refs.button || scopedSlotsOnClick.el,\r\n                renderAttrs: () => ({\r\n                    modelValue: state.val,\r\n                    enableAlpha: props.enableAlpha,\r\n                    format: props.format,\r\n\r\n                    onChange(val) {\r\n                        state.inputValue = val\r\n                        methods.emitValue(val)\r\n                    },\r\n                }),\r\n                popperAttrs: () => ({\r\n                    onMousedownPopper: async () => {\r\n                        agentState.state.focusCounter++\r\n                    },\r\n                    onClickPopper: () => {\r\n                        !!refs.input && refs.input.methods.focus()\r\n                    },\r\n                }),\r\n            },\r\n        })\r\n        const scopedSlotsOnClick = (() => {\r\n            const variable = {\r\n                el: null as null | HTMLDivElement,\r\n                onClick: (e: MouseEvent) => {\r\n                    variable.el = e.target as HTMLDivElement\r\n                    agentState.inputHandler.onClickInput()\r\n                }\r\n            }\r\n            return variable\r\n        })();\r\n\r\n        const methods = {\r\n            emitValue(val: any) {\r\n                model.value = val\r\n            },\r\n        }\r\n\r\n        const suffixIcon = () => (\r\n            <PlColorButton\r\n                ref=\"button\"\r\n                color={state.val}\r\n                onClick={agentState.inputHandler.onClickInput}/>\r\n        )\r\n\r\n        const inputHandler = {\r\n            onChange: (val: string) => {\r\n                state.inputValue = val\r\n                if (isEffectiveColorString(val)) {\r\n                    methods.emitValue(val)\r\n                }\r\n            },\r\n            /*---------------------------------------override-------------------------------------------*/\r\n\r\n            onEnter: (e: KeyboardEvent) => {\r\n                if (!!state.inputValue && state.inputValue !== state.val) {\r\n                    $$notice.warn('请输入有效的颜色值')\r\n                    state.inputValue = state.val\r\n                }\r\n                agentState.inputHandler.onEnter(e)\r\n            },\r\n            onBlur: (e: Event) => {\r\n                agentState.state.focusCounter--\r\n                if (agentState.state.focusCounter === 0) {\r\n                    event.emit.onBlur(e)\r\n                    agentState.methods.hide()\r\n                    state.val = model.value\r\n                    state.inputValue = model.value\r\n                }\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            model.value = val\r\n            state.val = val\r\n            state.inputValue = val\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                return scopedSlots.default({\r\n                    color: state.val!,\r\n                    onClick: scopedSlotsOnClick.onClick,\r\n                }, (\r\n                    props.type === ColorPickerType.input ? (\r\n                        <PlInput ref=\"input\"\r\n                                 class=\"pl-color-picker\"\r\n                                 modelValue={state.inputValue}\r\n                                 suffixIcon={suffixIcon}\r\n                                 isFocus={agentState.state.focusCounter > 0}\r\n                                 {...{\r\n                                     ...agentState.inputHandler,\r\n                                     ...inputHandler,\r\n                                 }}/>\r\n                    ) : suffixIcon()\r\n                ))\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, StyleStatus, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {STATUS} from \"../../utils/constant\";\r\nimport {computed, reactive} from 'vue';\r\nimport './alert.scss'\r\nimport {PlCollapseTransition} from \"../collapse/collapse-transition\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlAlert = designComponent({\r\n    name: 'pl-alert',\r\n    props: {\r\n        ...StyleProps,\r\n\r\n        label: {type: String},                                      // 提示文本\r\n        desc: {type: String},                                       // 描述文本\r\n        align: {type: String, default: 'left'},                     // 文本对其方式\r\n        theme: {type: String, default: 'lite'},                     // 主题，lite轻色，deep深色\r\n        noClose: {type: Boolean},                                   // 禁用关闭\r\n        icon: {type: String, default: undefined},                   // 显示的图标\r\n    },\r\n    setup({props}) {\r\n\r\n        const state = reactive({\r\n            isClosed: false,\r\n        })\r\n\r\n        const {slots} = useSlots([\r\n            'desc',\r\n            'close',\r\n        ], true)\r\n\r\n        const {styleComputed} = useStyle({status: StyleStatus.info})\r\n\r\n        const icon = computed(() => {\r\n            if (props.icon === null) {\r\n                return null\r\n            }\r\n            return props.icon || STATUS[styleComputed.value.status!].icon\r\n        })\r\n        const classes = computed(() => [\r\n            'pl-alert',\r\n            `pl-alert-status-${styleComputed.value.status}`,\r\n            `pl-alert-shape-${styleComputed.value.shape}`,\r\n            `pl-alert-theme-${props.theme}`,\r\n            `pl-alert-align-${props.align}`,\r\n            {\r\n                'pl-alert-has-icon': !!icon.value,\r\n                'pl-alert-has-desc': !!props.desc || slots.desc.isExist(),\r\n                'pl-alert-has-close': !props.noClose,\r\n            }\r\n        ])\r\n\r\n        const handler = {\r\n            onClickClosed: () => {\r\n                state.isClosed = true\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <PlCollapseTransition>\r\n                    {!state.isClosed && <div class=\"pl-alert-wrapper\">\r\n                        <div class={classes.value}>\r\n                            {!!icon.value && <div class=\"pl-alert-icon\">\r\n                                <PlIcon icon={icon.value}/>\r\n                            </div>}\r\n                            {!props.noClose && <div class=\"pl-alert-close\" onClick={handler.onClickClosed}>\r\n                                {slots.close(<PlIcon icon=\"el-icon-close\"/>)}\r\n                            </div>}\r\n                            {(!!props.label || slots.default.isExist()) && (\r\n                                <div class=\"pl-alert-label\">\r\n                                    {slots.default(props.label)}\r\n                                </div>\r\n                            )}\r\n                            {(!!props.desc || slots.desc.isExist()) && (\r\n                                <div class=\"pl-alert-desc\">\r\n                                    {slots.desc(props.desc)}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>}\r\n                </PlCollapseTransition>\r\n            )\r\n        }\r\n\r\n    },\r\n})","import {PlAlert} from './alert'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlAlert)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useModel} from \"../../use/useModel\";\r\n\r\nexport const PlCollapseGroup = designComponent({\r\n    name: 'pl-collapse-group',\r\n    props: {\r\n        modelValue: {type: [String, Array]},\r\n        limit: {type: Number, default: 1},\r\n        disabled: {type: Boolean},\r\n    },\r\n    provideRefer: true,\r\n    emits: {\r\n        onUpdateModelValue: (val: string | string[] | undefined) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {slots} = useSlots()\r\n        const model = useModel(() => props.modelValue as string | string[] | undefined, emit.onUpdateModelValue)\r\n\r\n        const utils = {\r\n            isOpen: (val: string) => {\r\n                if (!model.value) {\r\n                    return\r\n                }\r\n                if (typeof model.value === \"string\") {\r\n                    return model.value == val\r\n                } else {\r\n                    return (model.value as string[]).indexOf(val) > -1\r\n                }\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            clickCollapseTitle: (val: string) => {\r\n                if (props.limit === 1) {\r\n                    model.value = val == model.value ? undefined : val\r\n                } else {\r\n                    const value = (model.value as string[] | undefined) || []\r\n                    const index = value.indexOf(val)\r\n                    if (index > -1) {\r\n                        value.splice(index, 1)\r\n                    } else {\r\n                        value.push(val)\r\n                    }\r\n                    model.value = [...value]\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                utils,\r\n                handler,\r\n                props,\r\n                model,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-collapse-group\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {computed} from 'vue';\r\nimport {createCounter} from \"../../utils/createCounter\";\r\nimport './collapse.scss'\r\nimport {PlCollapseGroup} from \"./collapse-group\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlCollapseTransition} from \"./collapse-transition\";\r\n\r\nconst valCounter = createCounter('collapse')\r\n\r\nexport const PlCollapse = designComponent({\r\n    name: 'pl-collapse',\r\n    props: {\r\n        modelValue: {type: Boolean, default: true},\r\n        title: {type: String},\r\n        detail: {type: String},\r\n        noArrow: {type: Boolean},\r\n        disabled: {type: Boolean, default: null},\r\n        val: {type: String},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const group = PlCollapseGroup.use.inject(null)\r\n\r\n        const selfVal = computed(() => props.val || valCounter())\r\n\r\n        const isOpen = computed(() => {\r\n            if (!!group) {\r\n                return group.utils.isOpen(selfVal.value)\r\n            } else {\r\n                return model.value\r\n            }\r\n        })\r\n\r\n        const {slots} = useSlots([\r\n            'title',\r\n        ], true)\r\n\r\n        const classes = useClass(() => [\r\n            'pl-collapse',\r\n            {\r\n                'pl-collapse-has-arrow': !props.noArrow,\r\n                'pl-collapse-is-open': isOpen.value,\r\n            }\r\n        ])\r\n\r\n        const isDisabled = computed(() => {\r\n            if (props.disabled != null) {\r\n                return props.disabled\r\n            }\r\n            if (!!group) {\r\n                return group.props.disabled\r\n            }\r\n            return false\r\n        })\r\n\r\n        const handler = {\r\n            onClickTitle: () => {\r\n                if (isDisabled.value) {\r\n                    return\r\n                }\r\n                if (!!group) {\r\n                    group.handler.clickCollapseTitle(selfVal.value)\r\n                } else {\r\n                    model.value = !model.value\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}>\r\n                    {(!!props.title || slots.title.isExist()) && <div class=\"pl-collapse-title\" onClick={handler.onClickTitle}>\r\n                        {slots.title(props.title)}\r\n\r\n                        {!props.noArrow && !isDisabled.value && <div class=\"pl-collapse-arrow\">\r\n                            <PlIcon icon=\"el-icon-arrow-right\"/>\r\n                        </div>}\r\n                    </div>}\r\n                    <PlCollapseTransition>\r\n                        {isOpen.value && (!!props.detail || slots.default.isExist()) && <div class=\"pl-collapse-detail\">\r\n                            {slots.default(props.detail)}\r\n                        </div>}\r\n                    </PlCollapseTransition>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlCollapse} from './collapse'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlCollapse)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlCollapseGroup} from \"../collapse/collapse-group\";\r\n\r\nexport default createComponentPlugin(PlCollapseGroup)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlCollapseTransition} from \"../collapse/collapse-transition\";\r\n\r\nexport default createComponentPlugin(PlCollapseTransition)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport './card.scss'\r\nimport {useClass} from \"../../use/useClasses\";\r\n\r\nexport const PlCard = designComponent({\r\n    name: 'pl-card',\r\n    props: {\r\n        width: {type: [String, Number], default: '300'},        // 卡片宽度\r\n        noPadding: {type: Boolean},                             // 去掉标题以及内容的内边距\r\n        mini: {type: Boolean},                                  // 小型卡片\r\n        title: {type: String},                                  // 卡片标题\r\n        desc: {type: String},                                   // 卡片标题描述\r\n        shadow: {type: String},                                 // 阴影, normal,hover\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {slots} = useSlots([\r\n            'title',                                // 卡片标题\r\n            'desc',                                 // 标题下方的描述\r\n            // 'default',                              // 卡片内容\r\n            'operator',                             // 卡片标题右侧的操作按钮\r\n            'poster',                               // 卡片海报（标题上方）\r\n            'foot',                                 // 卡片底部操作栏\r\n        ], true)\r\n\r\n        const classes = useClass(() => [\r\n            'pl-card',\r\n            {\r\n                'pl-card-mini': props.mini,\r\n                'pl-card-no-padding': props.noPadding,\r\n                [`pl-card-shadow-${props.shadow}`]: !!props.shadow,\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            !!props.width && (style.width = unit(props.width))\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {slots.poster.isExist() && <div class=\"pl-card-poster\">\r\n                        {slots.poster()}\r\n                    </div>}\r\n                    {(slots.title.isExist() || slots.desc.isExist() || slots.operator.isExist() || props.title || props.desc) && (\r\n                        <div class=\"pl-card-head\">\r\n                            <div class=\"pl-card-head-content\">\r\n                                {(slots.title.isExist() || props.title) && <div class=\"pl-card-title\">\r\n                                    {slots.title(props.title)}\r\n                                </div>}\r\n                                {(slots.desc.isExist() || props.desc) && <div class=\"pl-card-desc\">\r\n                                    {slots.desc(props.desc)}\r\n                                </div>}\r\n                            </div>\r\n                            {slots.operator.isExist() && <div class=\"pl-card-head-operator\">\r\n                                {slots.operator()}\r\n                            </div>}\r\n                        </div>\r\n                    )}\r\n                    {slots.default.isExist() && <div class=\"pl-card-content\">\r\n                        {slots.default()}\r\n                    </div>}\r\n                    {slots.foot.isExist() && <div class=\"pl-card-foot\">\r\n                        {slots.foot()}\r\n                    </div>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PlCard} from './card'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlCard)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {CarouselCollector} from \"./carousel\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {computed} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {createCounter} from \"../../utils/createCounter\";\r\n\r\nconst counter = createCounter('carousel')\r\n\r\nexport const PlCarouselItem = designComponent({\r\n    name: 'pl-carousel-item',\r\n    props: {\r\n        val: {type: [String, Number]},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n        const carousel = CarouselCollector.child({sort: () => refs.el})\r\n        const {slots} = useSlots()\r\n        const itemVal = computed(() => props.val == null ? counter() : props.val)\r\n        const style = useStyles(() => carousel.utils.getItemStyles(itemVal.value) as any)\r\n\r\n        return {\r\n            refer: {\r\n                itemVal,\r\n            },\r\n            render: () => (\r\n                <div class={[\r\n                    'pl-carousel-item',\r\n                    {\r\n                        'pl-carousel-item-animating': carousel.utils.isAnimating(itemVal.value),\r\n                    }\r\n                ]}\r\n                     ref=\"el\"\r\n                     style={style.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {computed, onMounted, reactive, watch} from 'vue'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport './carousel.scss'\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {throttle} from \"plain-utils/utils/throttle\";\r\nimport {PlCarouselItem} from \"./carousel-item\";\r\nimport {PlIcon} from \"../icon/icon\";\r\n\r\nexport const PlCarousel = designComponent({\r\n    name: 'pl-carousel',\r\n    props: {\r\n        modelValue: {type: [String, Number]},                       // 双向绑定值\r\n        height: {type: [Number, String], default: 225},             // 轮播高度\r\n        autoplay: {type: Number, default: 3000},                    // 自定播放时间，为0则取消自动播放\r\n        disabledOperator: {type: Boolean},                          // 禁用前后按钮\r\n        disabledIndicator: {type: Boolean},                         // 禁用指示器\r\n        indicatorTrigger: {type: String, default: 'click'},         // 指示器激活触发器：click。hover\r\n        vertical: {type: Boolean},                                  // 轮播方向为纵向\r\n        card: {type: Boolean},                                      // 卡片形式的切换\r\n        cardScale: {type: Number, default: 0.64},                   // 卡片形式轮播的时候，缩小比例\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | number | undefined | null) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        /*子元素*/\r\n        const items = CarouselCollector.parent()\r\n        const {scopedSlots} = useScopedSlots({\r\n            indicator: {val: String, index: Number, active: Boolean}\r\n        })\r\n        const {slots} = useSlots([\r\n            'cover',\r\n        ], true)\r\n        const {propsState} = useProps(props, {\r\n            height: useProps.NUMBER,\r\n        })\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement\r\n        })\r\n        const state = reactive({\r\n            width: 0,                                                   // 容器宽度\r\n            height: 0,                                                  // 容器高度\r\n            autoplayTimer: null as null | number,                       // 自动播放定时器\r\n            prevActiveIndex: null as null | number,                     // 上一个激活的index，当元素个数为3时，需要通过这个属性优化动画\r\n        })\r\n\r\n        /*双向绑定值*/\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        /*子元素val数组*/\r\n        const vals = computed(() => items.map(item => String(item.itemVal.value)!))\r\n        /*当前激活的元素的val值*/\r\n        const activeVal = computed(() => {\r\n            if (vals.value.length === 0) {\r\n                return null\r\n            }\r\n            if (model.value != null) {\r\n                return String(model.value)\r\n            } else {\r\n                return vals.value[0]\r\n            }\r\n        })\r\n        /*当前激活的元素的val的在 数组中的索引*/\r\n        const activeIndex = computed(() => {\r\n            if (!activeVal.value) {\r\n                return 0\r\n            }\r\n            return vals.value.indexOf(activeVal.value)\r\n        })\r\n\r\n        /*实际渲染的，排序过的val数组*/\r\n        const sortVals = computed(() => {\r\n            const valArray = vals.value\r\n            let prev = valArray.slice(0, activeIndex.value)\r\n            let next = valArray.slice(activeIndex.value + 1)\r\n\r\n            if (Math.abs(prev.length - next.length) > 1) {\r\n                if (prev.length > next.length) {\r\n                    while (prev.length - next.length > 1) {\r\n                        next.push(prev.shift()!)\r\n                    }\r\n                } else {\r\n                    while (next.length - prev.length > 1) {\r\n                        prev.unshift(next.pop()!)\r\n                    }\r\n                }\r\n            }\r\n            return [...prev, activeVal.value, ...next]\r\n        })\r\n\r\n        const classes = useClass(() => [\r\n            'pl-carousel',\r\n            {\r\n                'pl-carousel-vertical': props.vertical,\r\n                'pl-carousel-card': props.card,\r\n            }\r\n        ])\r\n        const styles = useStyles(style => {\r\n            style.height = unit(propsState.height)\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 子元素的左偏移位置\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:19\r\n             */\r\n            getItemStyles: (val: any) => {\r\n                if (!state.width) {\r\n                    return null\r\n                }\r\n                /*当前val在sortVals中的索引*/\r\n                const sortIndex = sortVals.value.indexOf(String(val))\r\n                /*激活val在sortVals中的索引*/\r\n                const activeSortIndex = sortVals.value.indexOf(String(activeVal.value))\r\n\r\n                /*当前val与激活val在sortVal的间距*/\r\n                let duration = sortIndex - activeSortIndex\r\n\r\n                const style = {\r\n                    zIndex: sortVals.value.length - Math.abs(duration),\r\n                } as any\r\n\r\n                if (!props.vertical) {\r\n                    if (!props.card) {\r\n                        /*非卡片形式的轮播*/\r\n                        style.transform = `translateX(${duration * state.width}px)`\r\n                    } else {\r\n                        style.width = `${props.cardScale * 100}%`\r\n                        style.height = `${props.cardScale * 100}%`\r\n\r\n                        /*卡片轮播*/\r\n                        let left = duration * state.width * (props.cardScale) + (state.width * (1 - props.cardScale) / 2)\r\n                        left += (sortIndex > activeSortIndex ? -1 : 1) * Math.abs(sortIndex - activeSortIndex) * state.width * 0.125\r\n                        style.transform = `translateX(${left}px) translateY(${state.height * ((1 - props.cardScale) / 2)}px) scale(${sortIndex === activeSortIndex ? '1' : '0.83'})`\r\n                    }\r\n                } else {\r\n                    /*纵向非卡片形式的轮播*/\r\n                    style.transform = `translateY(${duration * state.height}px)`\r\n                }\r\n\r\n                return style\r\n            },\r\n            /**\r\n             * 重置自动播放定时器\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:19\r\n             */\r\n            resetAutoplayTimer: (autoplay: number | null) => {\r\n                /*无论怎么样都要清理掉定时器*/\r\n                if (!!state.autoplayTimer) {\r\n                    clearInterval(state.autoplayTimer)\r\n                    state.autoplayTimer = null\r\n                }\r\n                /*如果autoplay有值，重新设定一个自动播放定时器*/\r\n                if (!!autoplay) {\r\n                    state.autoplayTimer = setInterval(methods.next, autoplay)\r\n                }\r\n            },\r\n            /**\r\n             * 子元素是否需要动画（当元素为3时，只有prevActiveIndex以及activeIndex的元素需要动画，另一个需要立刻移动到对应的位置）\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:20\r\n             */\r\n            isAnimating: (val: any) => {\r\n                if (vals.value.length !== 3 && !props.card) {\r\n                    return true\r\n                }\r\n                let index = vals.value.indexOf(val)\r\n                return index === state.prevActiveIndex || index === activeIndex.value\r\n            },\r\n        }\r\n\r\n        const methods = {\r\n            /**\r\n             * 显示上一个元素\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:21\r\n             */\r\n            prev: () => {\r\n                state.prevActiveIndex = activeIndex.value\r\n                model.value = sortVals.value[sortVals.value.indexOf(activeVal.value) - 1]!\r\n            },\r\n            /**\r\n             * 显示下一个元素\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:21\r\n             */\r\n            next: () => {\r\n                state.prevActiveIndex = activeIndex.value\r\n                model.value = sortVals.value[sortVals.value.indexOf(activeVal.value) + 1]!\r\n            },\r\n            /**\r\n             * 显示特定元素\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:21\r\n             */\r\n            show: (val: any) => {\r\n                state.prevActiveIndex = activeIndex.value\r\n                model.value = val\r\n\r\n                utils.resetAutoplayTimer(props.autoplay)\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            onPrev: throttle(() => {\r\n                utils.resetAutoplayTimer(props.autoplay)\r\n                methods.prev()\r\n            }, 800, {trailing: true, leading: true}),\r\n            onNext: throttle(() => {\r\n                utils.resetAutoplayTimer(props.autoplay)\r\n                methods.next()\r\n            }, 800, {trailing: true, leading: true}),\r\n            onIndicator: (index: number) => {\r\n                methods.show(vals.value[index])\r\n            },\r\n        }\r\n\r\n        onMounted(() => {\r\n            state.width = refs.el.offsetWidth\r\n            state.height = refs.el.offsetHeight\r\n        })\r\n\r\n        watch(() => props.autoplay, utils.resetAutoplayTimer, {immediate: true})\r\n\r\n        return {\r\n            refer: {\r\n                utils,\r\n                methods,\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value} ref=\"el\">\r\n                    {slots.default()}\r\n                    {slots.cover.isExist() && <div class=\"pl-carousel-cover\">\r\n                        {slots.cover()}\r\n                    </div>}\r\n\r\n                    {!props.disabledOperator && <div class=\"pl-carousel-operator\">\r\n                        <div class=\"pl-carousel-operator-btn pl-carousel-operator-prev\" onClick={handler.onPrev}>\r\n                            <PlIcon icon=\"el-icon-arrow-left\"/>\r\n                        </div>\r\n                        <div class=\"pl-carousel-operator-btn pl-carousel-operator-next\" onClick={handler.onNext}>\r\n                            <PlIcon icon=\"el-icon-arrow-right\"/>\r\n                        </div>\r\n                    </div>}\r\n\r\n                    {!props.disabledIndicator && <div class=\"pl-carousel-indicator\">\r\n                        {items.map((item, index) => (\r\n                            scopedSlots.indicator({val: String(item.itemVal.value), index, active: index === activeIndex.value}, (\r\n                                <div\r\n                                    {...{\r\n                                        [props.indicatorTrigger === 'hover' ? 'onMouseenter' : 'onClick']: () => handler.onIndicator(index)\r\n                                    }}\r\n                                    class={[\r\n                                        'pl-carousel-indicator-item',\r\n                                        {\r\n                                            'pl-carousel-indicator-item-active': index === activeIndex.value,\r\n                                        }\r\n                                    ]} key={index}/>\r\n                            ))\r\n                        ))}\r\n                    </div>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const CarouselCollector = useCollect(() => ({\r\n    parent: PlCarousel,\r\n    child: PlCarouselItem,\r\n}))","import {PlCarousel} from './carousel'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlCarousel)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlCarouselItem} from \"../carousel/carousel-item\";\r\n\r\nexport default createComponentPlugin(PlCarouselItem)","import {designComponent} from \"../../use/designComponent\";\r\n\r\nconst opacityBg = require('./sub/opacity.png')\r\n\r\nexport const PlColorButton = designComponent({\r\n    name: 'pl-color-button',\r\n    props: {\r\n        color: {type: String}\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-button\" onClick={emit.onClick}>\r\n                    <div class=\"pl-color-button-background\" style={{backgroundImage: `url(${opacityBg})`}}>\r\n                        <div class=\"pl-color-button-color\" style={{backgroundColor: props.color}}/>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","/**\r\n * 拖拽放置的类型\r\n * @author  韦胜健\r\n * @date    2020/4/1 17:15\r\n */\r\nexport enum TreeDropType {\r\n    prev = 'prev',\r\n    inner = 'inner',\r\n    next = 'next',\r\n    null = 'null',\r\n}\r\n\r\nexport const enum TreeNodeCheckStatus {\r\n    check = 'check',\r\n    uncheck = 'uncheck',\r\n    minus = 'minus',\r\n}","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlColorPicker} from \"./color-picker\";\r\nimport {PlColorAlphaSlider} from \"./sub/color-alpha-slider\";\r\nimport {PlColorHueSlider} from \"./sub/color-hue-slider\";\r\nimport {PlColorSvPanel} from \"./sub/color-sv-panel\";\r\nimport {PlColorPanel} from \"./color-panel\";\r\n\r\nexport default createComponentPlugin(PlColorPicker, {\r\n    exposeComponents: {\r\n        PlColorAlphaSlider,\r\n        PlColorHueSlider,\r\n        PlColorSvPanel,\r\n        PlColorPanel,\r\n    }\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlColorButton} from \"../color-picker/color-button\";\r\n\r\nexport default createComponentPlugin(PlColorButton)","import {designComponent} from \"../../use/designComponent\";\r\nimport {CascadePanelProps} from \"./panel/cascade-panel\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Input from '../input'\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {CascadeNode} from \"./utils/CascadeNode\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {computed, PropType, reactive, watch} from 'vue';\r\nimport {CascadeMark} from \"./utils/CascadMark\";\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {CascadeServiceGetter} from \"./service/cascade-service\";\r\nimport {ie} from \"plain-utils/utils/ie\";\r\nimport './cascade.scss'\r\nimport {PlInput} from \"../input/input\";\r\n\r\nexport const PlCascade = designComponent({\r\n    name: 'pl-cascade',\r\n    props: {\r\n        ...CascadePanelProps,\r\n\r\n        showLast: {type: Boolean},                                          // 只显示最后一级节点文本\r\n        separator: {type: String, default: ' / '},                          // 显示值分隔符\r\n        filterable: {type: Boolean, default: true},                         // 是否可筛选\r\n        showFormat: {type: Function as PropType<(value: any[]) => string>}, // 显示值格式化函数\r\n\r\n        inputAttrs: {type: Object},                                         // 输入框属性值\r\n\r\n        ...StyleProps,\r\n        ...EditProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any, expandNodes?: CascadeNode[]) => true,\r\n        onClickItem: (data: { node: CascadeNode, index: number }) => true,\r\n        onGetChildren: (...args: any[]) => true,\r\n        onUpdateData: (val: any) => true,\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        useStyle()\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n        })\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {node: CascadeNode, index: Number}\r\n        }, true)\r\n\r\n        /*之所以不自动派发事件，是因为派发事件的时候需要多传一个nodes值*/\r\n        const model = useModel(() => props.modelValue, event.emit.onUpdateModelValue, {autoEmit: false})\r\n        const data = useModel(() => props.data, event.emit.onUpdateData)\r\n\r\n        const state = reactive({\r\n            inputValue: null as null | string,\r\n            cacheData: {} as { [key: string]: object[] },\r\n            expandKeys: [] as string[],\r\n        })\r\n\r\n        const cascadeMark = computed(() => new CascadeMark(\r\n            () => ({\r\n                nodeDisabled: props.nodeDisabled,\r\n                isLeaf: props.isLeaf,\r\n                lazy: props.lazy,\r\n                getChildren: props.getChildren,\r\n                filterMethod: props.filterMethod,\r\n\r\n                labelField: props.labelField!,\r\n                keyField: props.keyField!,\r\n                childrenField: props.childrenField!,\r\n            }),\r\n            () => ({\r\n                expandKeys: state.expandKeys,\r\n                filterText: '',\r\n            })\r\n        ))\r\n\r\n        const agentState = useEditPopperAgent({\r\n            event,\r\n            serviceGetter: CascadeServiceGetter,\r\n            option: {\r\n                reference: () => refs.input as any,\r\n                renderAttrs: () => ({\r\n                    ...props,\r\n                    modelValue: model.value,\r\n                    filterText: state.inputValue,\r\n                    getChildren: utils.getChildren,\r\n                    renderContent: utils.renderContent,\r\n\r\n                    onChange: handler.onServiceChange,\r\n                    onClickItem: event.emit.onClickItem,\r\n                    onGetChildren: event.emit.onGetChildren,\r\n                    onUpdateData: event.emit.onUpdateData,\r\n                }),\r\n                popperAttrs: {\r\n                    onMousedownPopper: () => agentState.state.focusCounter++,\r\n                    onClickPopper: () => refs.input!.methods.focus(),\r\n                    onHide: () => state.inputValue = null,\r\n                },\r\n            },\r\n        })\r\n\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            getChildren: (node: CascadeNode | null, resolve: Function) => {\r\n                let key = !!node ? node.key : 'root'\r\n                if (state.cacheData[key]) {\r\n                    resolve(state.cacheData[key])\r\n                } else {\r\n                    props.getChildren!(node, (data) => {\r\n                        state.cacheData[key] = data\r\n                        resolve(data)\r\n                    })\r\n                }\r\n            },\r\n            /**\r\n             * 检查props是否合法\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 18:48\r\n             */\r\n            checkProps() {\r\n                if (!props.data) return true\r\n                if (!props.keyField) {\r\n                    console.error('pl-cascade 的 keyField属性不能为空，每一条记录必须要有一个key标识')\r\n                    return false\r\n                }\r\n                if (!props.childrenField) {\r\n                    console.error('pl-cascade 的 childrenKey不能为空')\r\n                    return false\r\n                }\r\n                return true\r\n            },\r\n            renderContent: (scopedSlots.default.isExist() || !!props.renderContent) ? ({node, index}: { node: CascadeNode, index: number }) => {\r\n                if (scopedSlots.default.isExist()) return scopedSlots.default({node, index})\r\n                if (!!props.renderContent) return props.renderContent({node, index})\r\n            } : null\r\n        }\r\n\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const classes = computed(() => ([\r\n            'pl-cascade',\r\n            {\r\n                'pl-cascade-open': agentState.isShow.value,\r\n            }\r\n        ]))\r\n\r\n        const formatData = computed(() => cascadeMark.value.node.getList(data.value, 1, () => null))\r\n\r\n        const showValue = computed(() => {\r\n            if (!model.value) return null\r\n            if (!!props.showFormat) return props.showFormat(model.value)\r\n\r\n            let result: string[] = []\r\n            let list = formatData.value || []\r\n            for (let i = 0; i < model.value.length; i++) {\r\n                const sourceKey = model.value[i];\r\n                let flag = false\r\n                for (let j = 0; j < list.length; j++) {\r\n                    const target = list[j];\r\n                    if (sourceKey === target.key) {\r\n                        result.push(target.label)\r\n                        list = target.children || []\r\n                        flag = true\r\n                        break\r\n                    }\r\n                }\r\n                if (!flag) {\r\n                    result = [...result, ...(model.value.slice(i)) as string[]]\r\n                    break\r\n                }\r\n            }\r\n            if (props.showLast && result.length > 0) {\r\n                return result[result.length - 1]\r\n            }\r\n            return result.join(' / ')\r\n        })\r\n\r\n\r\n        const handler = {\r\n            clear: () => {\r\n                model.value = undefined\r\n                event.emit.onUpdateModelValue(model.value)\r\n\r\n                state.inputValue = null\r\n                refs.input!.methods.focus()\r\n            },\r\n            onServiceChange: (val: any, nodes: CascadeNode[]) => {\r\n                model.value = val\r\n                event.emit.onUpdateModelValue(val, nodes)\r\n            },\r\n            onInputChange: (val: string) => {\r\n                state.inputValue = val\r\n                if (!agentState.isShow.value && !ie) {\r\n                    agentState.methods.show()\r\n                }\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, () => {state.inputValue = null})\r\n\r\n        return {\r\n            render: () => (\r\n                <PlInput\r\n                    ref=\"input\"\r\n                    class={classes.value}\r\n                    clearIcon\r\n                    suffixIcon=\"el-icon-d-arrow-right\"\r\n                    modelValue={((agentState.isShow.value && props.filterable) ? state.inputValue : showValue.value) || undefined}\r\n                    placeValue={showValue.value || undefined}\r\n                    placeholder={((agentState.isShow.value && props.filterable) ? showValue.value : (!!props.inputAttrs ? props.inputAttrs!.placeholder : null)) || ''}\r\n                    clearHandler={handler.clear}\r\n                    inputReadonly={!props.filterable}\r\n                    isFocus={agentState.state.focusCounter > 0}\r\n\r\n                    {...agentState.inputHandler}\r\n                    {...{onChange: handler.onInputChange}}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import {PlCascade} from './cascade'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlCascadePanel} from \"./panel/cascade-panel\";\r\n\r\nexport default createComponentPlugin(PlCascade, {\r\n    exposeComponents: {\r\n        PlCascadePanel,\r\n    }\r\n})","import {SimpleObject} from \"../../../shims\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {TreeNodeCheckStatus} from \"../utils/tree-constant\";\r\nimport {computed, onBeforeUnmount, reactive, watchEffect} from 'vue';\r\nimport {throttle} from \"plain-utils/utils/throttle\";\r\n\r\n/**\r\n * 根据childrenField遍历data树形数据\r\n * @author  韦胜健\r\n * @date    2020/12/2 12:22\r\n */\r\nfunction iteratorTreeData({data, childrenField}: { data?: SimpleObject[], childrenField: string }) {\r\n    if (!!data) {\r\n        data.forEach(item => {\r\n            if (!!item[childrenField]) {\r\n                iteratorTreeData({data: item[childrenField], childrenField})\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport function useTreeNode<Node extends {\r\n    key: string,\r\n    data: SimpleObject,\r\n    level: number,\r\n    parentRef: () => Node | null,\r\n    selfRef: () => Node,\r\n\r\n    index: number,\r\n\r\n    readonly childrenData?: SimpleObject[]\r\n    readonly label?: string,\r\n    children?: Node[],\r\n    readonly checkStatus: TreeNodeCheckStatus,\r\n\r\n    expand: boolean,\r\n    check: boolean,\r\n    loading: boolean,\r\n    loaded: boolean,\r\n\r\n    readonly isCheckable: boolean,\r\n    readonly isLeaf: boolean,\r\n    readonly isVisible: boolean,\r\n}>(\r\n    {\r\n        props,\r\n        event,\r\n        keyManager,\r\n        getTreeNodeByDataAdjust,\r\n    }: {\r\n        props: {\r\n            data?: SimpleObject[],\r\n            labelField?: string,\r\n            keyField?: string,\r\n            childrenField?: string,\r\n            filterNodeMethod?: (node: Node) => boolean,\r\n            isLeaf?: (node: Node) => boolean,\r\n            isCheckable?: (node: Node) => boolean,\r\n            getChildren?: (node: Node, cb: (data: SimpleObject[]) => void) => void,\r\n            lazy?: boolean,\r\n            showCheckbox?: boolean,\r\n            checkStrictly?: boolean,\r\n        },\r\n        event: {\r\n            emit: { onUpdateData: (data?: SimpleObject[]) => void }\r\n        },\r\n        keyManager: (obj: any, keyField: string | undefined | null) => string,\r\n        getTreeNodeByDataAdjust?: (node: Node) => void,\r\n    }\r\n) {\r\n\r\n    /*内部data变量*/\r\n    const dataModel = useModel(() => props.data, event.emit.onUpdateData)\r\n\r\n\r\n    /**\r\n     * 因为滚动的时候会频繁获取checkStatus，而这个属性又是计算量比较大的属性，这里作为计算属性统一计算\r\n     * @author  韦胜健\r\n     * @date    2020/12/2 14:07\r\n     */\r\n    const checkStatus = computed(() => {\r\n        const map = {} as Record<string, TreeNodeCheckStatus>\r\n        if (!props.showCheckbox || !state.root) {\r\n            return map\r\n        }\r\n        utils.iterate({\r\n            nodes: state.root.children,\r\n            iterateChildrenFirst: true,\r\n            handler: node => {\r\n                if (props.checkStrictly || node.isLeaf) {\r\n                    map[node.key] = node.check ? TreeNodeCheckStatus.check : TreeNodeCheckStatus.uncheck\r\n                } else {\r\n                    if (node.check) {\r\n                        map[node.key] = TreeNodeCheckStatus.check\r\n                    } else {\r\n                        if (!!node.children && node.children.every(child => map[child.key] === TreeNodeCheckStatus.uncheck)) {\r\n                            map[node.key] = TreeNodeCheckStatus.uncheck\r\n                        } else {\r\n                            map[node.key] = TreeNodeCheckStatus.minus\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return map\r\n    })\r\n\r\n    const utils = {\r\n        /*根据data获取Node*/\r\n        getTreeNodeByData: (() => {\r\n            const map = new WeakMap<object, Node>()\r\n            const get = ({data, level, parentRef, adjust}: { data: any, level: number, parentRef: () => Node, adjust?: (node: Node) => void }): Node => {\r\n                let node: Node | undefined = map.get(data)\r\n                if (!node) {\r\n                    node = {\r\n                        index: 0,\r\n                        key: keyManager(data, props.keyField),\r\n                        data,\r\n                        level,\r\n                        parentRef,\r\n                        selfRef() {return this},\r\n                        empty: false,\r\n                        children: [],\r\n\r\n                        get label() {return !!props.labelField && !!data ? data[props.labelField] : null},\r\n                        get childrenData() {return data[props.childrenField!]},\r\n\r\n                        expand: false,\r\n                        check: false,\r\n                        loading: false,\r\n                        loaded: !props.lazy,\r\n                        /* todo 这里并不会立即执行，当渲染VNodeChild的时候这里才会执行，所以不存在checkStatus.value不存在的问题*/\r\n                        get checkStatus() {return checkStatus.value[this.key]},\r\n                        // get checkStatus() {return TreeNodeCheckStatus.uncheck},\r\n\r\n                        get isCheckable() {return !props.isCheckable || props.isCheckable(this as any)},\r\n                        get isLeaf() {return !!props.isLeaf ? props.isLeaf(this as any) : !this.childrenData},\r\n                        get isVisible() {\r\n                            return !props.filterNodeMethod ? true : (props.filterNodeMethod(this as any) || (!!this.children && this.children.some((child: Node) => child.isVisible)))\r\n                        },\r\n                    } as any\r\n                    if (!!adjust) adjust(node!)\r\n                    map.set(data, node!)\r\n                } else {\r\n                    Object.assign(node, {\r\n                        key: keyManager(data, props.keyField),\r\n                        data,\r\n                        level,\r\n                        parentRef,\r\n                    })\r\n                }\r\n                return node!\r\n            }\r\n            return get\r\n        })(),\r\n        /**\r\n         * 重置state中的data数据\r\n         * 为什么不直接把root以及nodeMap做成计算属性。\r\n         * 因为在计算root以及nodeMap的时候，会获取 label，key以及children，如果这些字段被修改了，可能会导致\r\n         * 这个计算属性频繁执行。这里只检查子节点数据，当子节点数据变化的时候才重新执行root以及nodeMap\r\n         * @author  韦胜健\r\n         * @date    2020/12/17 16:17\r\n         */\r\n        resetData: () => {\r\n            const nodeMap = {} as Record<string, Node>;\r\n            const iterator = ({data, level, parentRef}: { data: any, level: number, parentRef: () => Node }): Node => {\r\n                const node = utils.getTreeNodeByData({data, level, parentRef, adjust: getTreeNodeByDataAdjust})\r\n                nodeMap[node.key] = node\r\n                const childrenData = !props.childrenField ? null : (data[props.childrenField!] as SimpleObject[])\r\n                if (!!childrenData) {\r\n                    node.children = childrenData.map(child => iterator({data: child, level: level + 1, parentRef: () => state.nodeMap[node.key]}))\r\n                }\r\n                return node\r\n            }\r\n            const root = iterator({\r\n                data: {\r\n                    [props.keyField || 'id']: '@@$$root',\r\n                    [props.childrenField || 'children']: dataModel.value\r\n                },\r\n                level: 0,\r\n                parentRef: null as any,\r\n            })\r\n\r\n            return {\r\n                nodeMap,\r\n                root\r\n            }\r\n        },\r\n        /*遍历所有节点数据*/\r\n        iterate: ({nodes, handler, iterateChildren, iterateChildrenFirst,}: { nodes: Node[] | undefined, handler: (node: Node) => void, iterateChildren?: (node: Node) => boolean, iterateChildrenFirst?: boolean, }) => {\r\n            if (!nodes) return\r\n            nodes.forEach(Node => {\r\n                !iterateChildrenFirst && handler(Node);\r\n                if (!!Node.children && (!iterateChildren || iterateChildren(Node))) {\r\n                    utils.iterate({nodes: Node.children, handler, iterateChildren, iterateChildrenFirst,})\r\n                }\r\n                iterateChildrenFirst && handler(Node);\r\n            })\r\n        },\r\n    }\r\n\r\n    const state = reactive((() => {\r\n        const {root, nodeMap} = utils.resetData()\r\n        return {\r\n            /*虚拟跟节点*/\r\n            root,\r\n            /*节点映射node*/\r\n            nodeMap\r\n        }\r\n    })()) as { root: Node, nodeMap: Record<string, Node> };\r\n\r\n    const dataEffectTrigger = throttle(() => {\r\n        const {root, nodeMap} = utils.resetData()\r\n        state.root = root\r\n        state.nodeMap = nodeMap\r\n    }, 100)\r\n\r\n    const stopWatchEffect = watchEffect(\r\n        () => {\r\n            iteratorTreeData({data: dataModel.value || [], childrenField: props.childrenField!})\r\n            dataEffectTrigger()\r\n        },\r\n    )\r\n    onBeforeUnmount(stopWatchEffect)\r\n    const methods = {\r\n        getReactiveChildrenData(node: Node) {\r\n            let childrenData = node.childrenData\r\n            if (!childrenData) {\r\n                childrenData = []\r\n                node.data[props.childrenField!] = childrenData\r\n            }\r\n            return childrenData\r\n        },\r\n        removeSelf: (node: Node) => {\r\n            const parentChildrenData = node.parentRef()!.childrenData!\r\n            parentChildrenData.splice(parentChildrenData.indexOf(node.data), 1)\r\n        },\r\n        previousSibling: (self: Node, target: Node) => {\r\n            let parentChildrenData = methods.getReactiveChildrenData(self.parentRef()!)\r\n            target.parentRef = self.parentRef\r\n            target.level = self.level\r\n            parentChildrenData.splice(parentChildrenData.indexOf(self.data), 0, target.data)\r\n        },\r\n        nextSibling: (self: Node, target: Node) => {\r\n            let parentChildrenData = methods.getReactiveChildrenData(self.parentRef()!)\r\n            target.parentRef = self.parentRef\r\n            target.level = self.level\r\n            parentChildrenData.splice(parentChildrenData.indexOf(self.data) + 1, 0, target.data)\r\n        },\r\n        unshiftChild: (self: Node, target: Node) => {\r\n            let childrenData = methods.getReactiveChildrenData(self)\r\n            target.parentRef = () => self\r\n            target.level = self.level + 1\r\n            childrenData.unshift(target.data)\r\n        },\r\n    }\r\n\r\n    return {\r\n        dataModel,\r\n        state,\r\n        utils,\r\n        methods,\r\n    }\r\n}","import {computed, nextTick, PropType} from 'vue';\r\nimport {SimpleObject} from \"../../../shims\";\r\nimport {useTreeNode} from \"./useTreeNode\";\r\nimport {TreeNodeCheckStatus} from \"../utils/tree-constant\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\n\r\nfunction use<Node extends {\r\n    key: string,\r\n    data: SimpleObject,\r\n    level: number,\r\n    parentRef: () => Node | null,\r\n    selfRef: () => Node,\r\n\r\n    index: number,\r\n\r\n    readonly childrenData?: SimpleObject[]\r\n    readonly label?: string,\r\n    children?: Node[],\r\n    readonly checkStatus: TreeNodeCheckStatus,\r\n\r\n    expand: boolean,\r\n    check: boolean,\r\n    loading: boolean,\r\n    loaded: boolean,\r\n\r\n    readonly isCheckable: boolean,\r\n    readonly isLeaf: boolean,\r\n    readonly isVisible: boolean,\r\n}>(\r\n    {\r\n        props,\r\n        emit,\r\n        keyManager,\r\n        getTreeNodeByDataAdjust,\r\n    }: {\r\n        props: {\r\n            /*useTreeNode*/\r\n            data?: SimpleObject[],\r\n            labelField?: string,\r\n            keyField?: string,\r\n            childrenField?: string,\r\n            filterNodeMethod?: (node: Node) => boolean,\r\n            isLeaf?: (node: Node) => boolean,\r\n            isCheckable?: (node: Node) => boolean,\r\n            getChildren?: (node: Node, cb: (data: SimpleObject[]) => void) => void,\r\n            lazy?: boolean,\r\n            showCheckbox?: boolean,\r\n            checkStrictly?: boolean,\r\n\r\n            /*useTree*/\r\n            according?: boolean,\r\n            autoExpandParent?: boolean,\r\n            expandOnClickNode?: boolean,\r\n            checkOnClickNode?: boolean,\r\n            defaultExpandAll?: boolean,\r\n            currentKey?: string,\r\n        },\r\n        emit: {\r\n            onExpand: (node: Node) => void,\r\n            onExpandChange: (keys: string[]) => void,\r\n            onCollapse: (node: Node) => void,\r\n            onCheck: (node: Node) => void,\r\n            onUncheck: (node: Node) => void,\r\n            onCheckChange: (keys: string[]) => void,\r\n            onClickNode: (node: Node) => void,\r\n            onUpdateData: (data?: SimpleObject[]) => void,\r\n            onUpdateCurrentKey: (key?: string) => void,\r\n        },\r\n        keyManager: (obj: any, keyField: string | undefined | null) => string,\r\n        getTreeNodeByDataAdjust?: (node: Node) => void,\r\n    }\r\n) {\r\n\r\n    const {dataModel, state, utils: treeNodeUtils, methods: treeNodeMethods} = useTreeNode<Node>({props, event: {emit}, keyManager, getTreeNodeByDataAdjust})\r\n    const current = useModel(() => props.currentKey, emit.onUpdateCurrentKey)\r\n\r\n    const utils = {\r\n        ...treeNodeUtils,\r\n        /*遍历key或者node*/\r\n        handleKeyOrNode: async (keyOrNode: string | Node | (string | Node)[], handler: (node: Node) => void | Promise<void>): Promise<void> => {\r\n            if (!keyOrNode) {\r\n                return\r\n            }\r\n            if (!Array.isArray(keyOrNode)) {\r\n                const node = baseMethods.getNode(keyOrNode)\r\n                if (!!node) {await handler(node)}\r\n            } else {\r\n                await Promise.all(keyOrNode.map(k => utils.handleKeyOrNode(k, handler)))\r\n            }\r\n        },\r\n        /*获取子节点数据异步方法*/\r\n        getChildrenAsync: (node: Node): Promise<SimpleObject[]> => {\r\n            return new Promise((resolve) => {\r\n                if (!props.getChildren) {\r\n                    console.error('getChildren is required when using lazy mode!')\r\n                    return\r\n                }\r\n                if (node.level === 0) {\r\n                    !!state.root && (state.root.loading = true);\r\n                } else {\r\n                    node.loading = true\r\n                }\r\n                props.getChildren(node, (results) => {\r\n                    if (node.level === 0) {\r\n                        !!state.root && (state.root.loading = false)\r\n                    } else {\r\n                        node.loading = false\r\n                        node.loaded = true\r\n                    }\r\n                    resolve(results)\r\n                })\r\n            })\r\n        },\r\n        /*获取Node所有的父节点*/\r\n        getParents: (keyOrNode: Node | string): Node[] => {\r\n            let node = baseMethods.getNode(keyOrNode)\r\n            if (!node) {return []}\r\n            let parents = [] as Node[]\r\n            let parent = node.parentRef()\r\n            /*root 是没有 parentRef的*/\r\n            while (!!parent && !!parent.parentRef) {\r\n                parents.push(parent)\r\n                parent = parent.parentRef()\r\n            }\r\n            return parents\r\n        },\r\n        /*初始化逻辑*/\r\n        init: () => {\r\n            props.lazy && utils.getChildrenAsync(state.root!).then(val => {dataModel.value = val});\r\n            props.defaultExpandAll && nextTick().then(() => expandMethods.expandAll());\r\n        },\r\n    }\r\n\r\n    /*展开的节点*/\r\n    const expandNodes = computed(() => {\r\n        if (!state.root) {return []}\r\n        let nodes: Node[] = []\r\n        utils.iterate({nodes: state.root.children, handler: (node) => node.expand && nodes.push(node),})\r\n        return nodes\r\n    })\r\n    /*选中的节点*/\r\n    const checkNodes = computed(() => {\r\n        if (!state.root) {return []}\r\n        let nodes: Node[] = []\r\n        utils.iterate({nodes: state.root.children, handler: (node) => node.check && nodes.push(node)})\r\n        return nodes\r\n    })\r\n    /*展开的keys*/\r\n    const expandKeys = computed(() => expandNodes.value.map(i => i.key))\r\n    /*选中的keys*/\r\n    const checkKeys = computed(() => checkNodes.value.map(i => i.key))\r\n\r\n    const baseMethods = {\r\n        /*设置子节点数据*/\r\n        setChildrenData: (node: Node, children: any[]) => !!props.childrenField && (node.data[props.childrenField] = children),\r\n        /*通过keyOrNode获取node*/\r\n        getNode: (keyOrNode: string | Node): Node | undefined => typeof keyOrNode === \"object\" ? keyOrNode : state.nodeMap[keyOrNode],\r\n        /*设置当前选中行*/\r\n        setCurrent: (keyOrNode: string | Node) => current.value = typeof keyOrNode === \"object\" ? keyOrNode.key : keyOrNode,\r\n        /*获取当前选中行*/\r\n        getCurrent: (): Node | undefined => current.value == null ? undefined : baseMethods.getNode(current.value),\r\n    }\r\n    const expandMethods = {\r\n        /*展开节点*/\r\n        expand: async (keyOrNode: string | Node | (string | Node)[]) => {\r\n            await utils.handleKeyOrNode(keyOrNode,\r\n                async (node) => {\r\n                    const parent = node.parentRef()\r\n                    if (!node.expand) {\r\n                        if (\r\n                            props.lazy &&                           // 懒加载模式\r\n                            !node.loaded &&                         // 未曾加载过子节点数据\r\n                            !node.isLeaf                            // 节点不是叶子节点\r\n                        ) {\r\n                            const childrenData = await utils.getChildrenAsync(node)\r\n                            baseMethods.setChildrenData(node, childrenData || [])\r\n                            await nextTick()\r\n                        }\r\n\r\n                        if (props.according) {\r\n                            // 手风琴模式，展开某一个节点的时候，关闭兄弟节点\r\n                            if (!!parent && !!parent.children) {\r\n                                parent.children.forEach((child) => child.key !== node.key && expandMethods.collapse(child))\r\n                            }\r\n                        }\r\n                        node.expand = true\r\n                        await nextTick()\r\n\r\n                        emit.onExpand(node)\r\n                        emit.onExpandChange(expandKeys.value)\r\n                    }\r\n                    if (!!props.autoExpandParent && !!parent && parent.level !== 0) {\r\n                        await expandMethods.expand(parent)\r\n                    }\r\n                })\r\n        },\r\n        /*收起节点*/\r\n        collapse: async (keyOrNode: string | Node | (string | Node)[]) => {\r\n            await utils.handleKeyOrNode(keyOrNode,\r\n                async (node) => {\r\n                    await utils.iterate({\r\n                        nodes: [node, ...(node.children || [])],\r\n                        handler: (node) => {\r\n                            if (node.expand) {\r\n                                node.expand = false\r\n                                emit.onCollapse(node)\r\n                            }\r\n                        }\r\n                    })\r\n                    await nextTick()\r\n                    emit.onExpandChange(expandKeys.value)\r\n                })\r\n        },\r\n        /*展开或者收起节点*/\r\n        toggleExpand: (keyOrNode: string | Node) => {\r\n            const node = baseMethods.getNode(keyOrNode)\r\n            if (!node) {return}\r\n            node.expand ? expandMethods.collapse(keyOrNode) : expandMethods.expand(keyOrNode)\r\n        },\r\n        /*展开所有节点*/\r\n        expandAll: () => utils.iterate({nodes: state.root!.children, handler: node => node.expand = true}),\r\n        /*收起所有节点*/\r\n        collapseAll: () => expandNodes.value.forEach(node => node.expand = false),\r\n    }\r\n\r\n    const checkMethods = {\r\n        /*选中节点*/\r\n        check: async (keyOrNode: string | Node | (string | Node)[]) => {\r\n            await utils.handleKeyOrNode(keyOrNode, async (node) => {\r\n                if (node.check || !node.isCheckable) {return}\r\n                node.check = true\r\n                // 父子关联模式下，改变子节点以及父节点状态\r\n                if (!props.checkStrictly) {\r\n                    // 选中所有子节点\r\n                    utils.iterate({nodes: node.children, handler: (child) => child.check = true,})\r\n                    // 更新父节点状态，如果父节点所有的子节点都处于选中状态，则更新父节点为选中状态\r\n                    let parent = node.parentRef()\r\n                    while (!!parent && !!parent.key) {\r\n                        if (!!parent.parentRef && parent.children!.every(child => child.check)) {\r\n                            parent.check = true\r\n                            parent = !!parent.parentRef ? parent.parentRef() : null\r\n                        } else {\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n                await nextTick()\r\n                emit.onCheck(node)\r\n                emit.onCheckChange(checkKeys.value)\r\n            })\r\n        },\r\n        /*取消选中节点*/\r\n        uncheck: async (keyOrNode: string | Node | (string | Node)[]) => {\r\n            await utils.handleKeyOrNode(keyOrNode, async node => {\r\n                if (!node.check || !node.isCheckable) {return}\r\n                node.check = false\r\n                // 父子关联模式下，改变子节点以及父节点状态\r\n                if (!props.checkStrictly) {\r\n                    // 取消选中所有子节点\r\n                    utils.iterate({nodes: node.children, handler: (child) => child.check = false,})\r\n                    // 更新父节点状态，如果父节点所有的子节点都处于非选中状态，则更新父节点为非选中状态\r\n                    let parent = node.parentRef()\r\n                    while (!!parent && !!parent.key) {\r\n                        if (parent.check) {\r\n                            parent.check = false\r\n                            parent = parent.parentRef()\r\n                        } else {\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n\r\n                await nextTick()\r\n                emit.onUncheck(node)\r\n                emit.onCheckChange(checkKeys.value)\r\n            })\r\n        },\r\n        /*选中或者取消选中节点*/\r\n        toggleCheck: (keyOrNode: string | Node) => {\r\n            const node = baseMethods.getNode(keyOrNode)\r\n            if (!node) return\r\n            node.check ? checkMethods.uncheck(keyOrNode) : checkMethods.check(keyOrNode)\r\n        },\r\n        /*选中所有节点*/\r\n        checkAll: () => utils.iterate({nodes: state.root!.children, handler: node => node.isCheckable && (node.check = true)}),\r\n        /*取消选中所有节点*/\r\n        uncheckAll: () => checkNodes.value.forEach(node => node.check = false),\r\n        /*获取所有选中的节点*/\r\n        getCheckedData: () => checkNodes.value,\r\n        /*刷新所有节点的选中状态*/\r\n        refreshCheckStatus: async (keyOrNode: string | Node) => {\r\n            if (!props.showCheckbox) return\r\n            if (props.checkStrictly) return;\r\n            await delay(0)\r\n            const node = baseMethods.getNode(keyOrNode)\r\n            if (!node) {return }\r\n            const nodes = [] as Node[]\r\n            utils.iterate({\r\n                nodes: node.children,\r\n                handler: node => {nodes.unshift(node)},\r\n                iterateChildrenFirst: true,\r\n            })\r\n            nodes.unshift(node)\r\n            nodes.unshift(...utils.getParents(node).reverse())\r\n            nodes.reverse().forEach(node => {\r\n                /*刷新选中状态的前提是有子节点数据*/\r\n                if (node.isLeaf || !node.children || node.children.length === 0) return\r\n                let hasCheck = false, hasUncheck = false;\r\n                /*console.log({\r\n                    node: node.label,\r\n                    children: node.children.map(child => child.label)\r\n                })*/\r\n                node.children.forEach(child => child.check ? hasCheck = true : hasUncheck = true)\r\n                if (node.check && hasUncheck) {\r\n                    // 自身选中而子节点有非选中,取消当前节点的选中状态\r\n                    node.check = false\r\n                }\r\n                if (!node.check && hasCheck && !hasUncheck) {\r\n                    // 自身非选中而子节点全部选中，选中当前节点\r\n                    node.check = true\r\n                }\r\n            })\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        /*点击展开图标*/\r\n        onClickExpandIcon: async (e: MouseEvent, node: Node) => {\r\n            e.stopPropagation()\r\n            await expandMethods.toggleExpand(node)\r\n        },\r\n        /*点击复选框*/\r\n        onClickCheckbox: async (e?: MouseEvent, node?: Node) => {\r\n            !!e && e.stopPropagation();\r\n            !!node && await checkMethods.toggleCheck(node)\r\n        },\r\n        /*点击行*/\r\n        onClickCell: async (e: MouseEvent, node: Node) => {\r\n            emit.onClickNode(node)\r\n            baseMethods.setCurrent(node)\r\n            props.expandOnClickNode && (await expandMethods.toggleExpand(node));\r\n            props.checkOnClickNode && (await checkMethods.toggleCheck(node));\r\n        },\r\n    }\r\n\r\n    utils.init()\r\n\r\n    return {\r\n        dataModel,\r\n        state,\r\n        current,\r\n        utils,\r\n        handler,\r\n        methods: {\r\n            ...baseMethods,\r\n            expandMethods,\r\n            checkMethods,\r\n            treeNodeMethods,\r\n        },\r\n    }\r\n}\r\n\r\nexport const useTree = Object.assign(use, {\r\n    createProps: <Node>() => {\r\n        return {\r\n            /*useTreeNode*/\r\n            data: {type: Array as PropType<SimpleObject[]>},            // 树形结构数据\r\n            keyField: {type: String},                                   // 每一个树节点用来标识的唯一树形\r\n            labelField: {type: String},                                 // 树节点展示文本对应字段\r\n            childrenField: {type: String},                              // 树节点对应子节点数据对应字段\r\n\r\n            filterNodeMethod: {type: Function as PropType<(node: Node) => boolean>},// 对树节点进行筛选的方法，返回true表示可以显示，返回false表示隐藏\r\n            isLeaf: {type: Function as PropType<(node: Node) => boolean>},// 判断树节点是否为叶子节点的函数，仅在lazy模式有效\r\n            isCheckable: {type: Function as PropType<(node: Node) => boolean>},     // 当即将选中树节点时，判断是否可以选中该树节点\r\n            getChildren: {type: Function as PropType<(node: Node, cb: (data: SimpleObject[]) => void) => void>},// 加载子节点数据的函数，仅当 lazy 为true时有效\r\n            lazy: {type: Boolean},                                      // 是否懒加载子节点数据\r\n            showCheckbox: {type: Boolean},                              // 是否展示勾选框\r\n            checkStrictly: {type: Boolean},                             // 在显示复选框的情况下，是否严格遵循父子互不关联的做法，默认为false\r\n\r\n            /*useTree*/\r\n            according: {type: Boolean},                                 // 是否每次只展开一个同级的树节点\r\n            autoExpandParent: {type: Boolean, default: true},           // 是否展开节点的时候，自动展开父节点\r\n            expandOnClickNode: {type: Boolean, default: true},          // 是否点击树节点的时候展开子节点\r\n            checkOnClickNode: {type: Boolean},                          // 是否点击树节点的时候选中节点\r\n            defaultExpandAll: {type: Boolean},                          // 是否默认展开所有节点\r\n            currentKey: {type: String},                                 // 当前选中节点的key\r\n        }\r\n    },\r\n    createEvent: <Node>() => {\r\n        return {\r\n            onClickNode: (node: Node) => true,                          // 点击节点事件\r\n            onUpdateCurrentKey: (current?: string) => true,                // 当前高亮节点key变化绑定事件\r\n            onUpdateData: (data?: SimpleObject[]) => true,              // 数据变化事件（拖拽排序、数据懒加载）\r\n\r\n            onExpandChange: (expandKeys: string[]) => true,             // 展开节点变化事件\r\n            onExpand: (node: Node) => true,                             // 展开事件\r\n            onCollapse: (node: Node) => true,                           // 关闭节点事件\r\n\r\n            onCheckChange: (checkKeys: string[]) => true,               // 选中节点变化事件\r\n            onCheck: (node: Node) => true,                              // 选中节点事件\r\n            onUncheck: (node: Node) => true,                            // 取消选中节点事件\r\n        }\r\n    }\r\n})\r\n\r\n","import {TreeNode, TreePropsType} from \"./type\";\r\nimport {PropType} from 'vue';\r\nimport {useTree} from \"../core/useTree\";\r\nimport nodeIcon = TreePropsType.nodeIcon;\r\nimport renderContent = TreePropsType.renderContent;\r\nimport allDrag = TreePropsType.allowDrag;\r\nimport allDrop = TreePropsType.allowDrop;\r\n\r\nexport const TreeProps = {\r\n    ...useTree.createProps<TreeNode>(),\r\n    /*基础属性*/\r\n    loading: {type: Boolean},                                   // 当前是否处于loading状态\r\n    nodeIcon: {type: Function as PropType<nodeIcon>},           // 节点图标\r\n    nodeHeight: {type: Number, default: 40},                    // 节点高度\r\n    height: {type: String, default: '100%'},                    // 容器高度\r\n    /*普通属性*/\r\n    renderContent: {type: Function as PropType<renderContent>}, // 树节点内容渲染函数\r\n    /*展开相关属性*/\r\n    emptyText: {type: String, default: '暂无数据'},              // 没有子节点的时候展示的文本\r\n    intent: {type: Number, default: 22},                        // 相邻级节点水平缩进距离，默认16，单位px\r\n    /*拖拽属性*/\r\n    draggable: {type: Boolean},                                 // 是否可拖拽\r\n    allowDrag: {type: Function as PropType<allDrag>},           // 判断节点是否可以拖拽\r\n    allowDrop: {type: Function as PropType<allDrop>},           // 判断目标节点能够被放置\r\n\r\n    folderCollapseIcon: {type: String, default: 'el-icon-folder-s'},//节点收起时展示的图标\r\n    folderExpandIcon: {type: String, default: 'el-icon-folder-opened'},//节点展开时显示的图标\r\n    leafIcon: {type: String, default: 'el-icon-document'},      // 叶子节点显示的图标\r\n\r\n    virtual: {type: Boolean},                                   // 是否开启虚拟滚动\r\n}","import {TreeNode} from \"./type\";\r\n\r\nconst basePadding = 8\r\n\r\nexport const TreeUtils = {\r\n    getPaddingLeft: (level: number, intent: number) => {\r\n        return basePadding + (level - 1) * intent\r\n    },\r\n    /**\r\n     * 计算treeNode的样式\r\n     * @author  韦胜健\r\n     * @date    2020/11/28 9:25\r\n     */\r\n    getTreeNodeStyles: (level: number, intent: number, nodeHeight: number) => {\r\n        const basePadding = 8\r\n        return {\r\n            paddingLeft: `${TreeUtils.getPaddingLeft(level, intent)}px`,\r\n            paddingRight: `${basePadding}px`,\r\n            height: `${nodeHeight}px`,\r\n        }\r\n    },\r\n    /**\r\n     * 计算tree node的class\r\n     * @author  韦胜健\r\n     * @date    2020/11/28 10:35\r\n     */\r\n    getTreeNodeClasses: (node: TreeNode, current?: string) => {\r\n        return [\r\n            'pl-tree-node',\r\n            {\r\n                'pl-tree-node-current': node.key === current,\r\n                'pl-tree-node-not-checkable': !node.isCheckable,\r\n            }\r\n        ]\r\n    },\r\n}","import {addClass} from \"plain-utils/dom/addClass\";\r\nimport {nextIndex} from \"../utils/nextIndex\";\r\nimport {StyleProperties} from \"../shims\";\r\nimport {PlScroll} from \"../packages/scroll/scroll\";\r\n\r\nfunction createIndicator(hostEl: HTMLElement, vertical: boolean) {\r\n\r\n    const indicatorSize = 15\r\n\r\n    const {top, height, left, width} = hostEl.getBoundingClientRect()\r\n\r\n    const indicator = {\r\n        start: document.createElement('div'),\r\n        end: document.createElement('div'),\r\n    }\r\n\r\n    addClass(indicator.start, `pl-auto-scroll-indicator-start pl-auto-scroll-indicator-${vertical ? 'vertical' : 'horizontal'}`)\r\n    addClass(indicator.end, `pl-auto-scroll-indicator-end pl-auto-scroll-indicator-${vertical ? 'vertical' : 'horizontal'}`)\r\n\r\n    const publicStyles = {\r\n        position: 'fixed',\r\n        left: `${left}px`,\r\n        top: `${top}px`,\r\n\r\n        width: `${vertical ? width : indicatorSize}px`,\r\n        height: `${vertical ? indicatorSize : height}px`,\r\n        zIndex: `${nextIndex()}`,\r\n    } as StyleProperties\r\n\r\n    Object.assign(indicator.start.style, publicStyles)\r\n\r\n    if (vertical) {\r\n        let bottomIndicatorTop = top + height - indicatorSize\r\n        bottomIndicatorTop = Math.min(bottomIndicatorTop, document.body.offsetHeight - indicatorSize)\r\n\r\n        Object.assign(indicator.end.style, {\r\n            ...publicStyles,\r\n            top: `${bottomIndicatorTop}px`,\r\n        } as StyleProperties)\r\n    } else {\r\n        let rightIndicatorLeft = left + width - indicatorSize\r\n        rightIndicatorLeft = Math.min(rightIndicatorLeft, document.body.offsetWidth - indicatorSize)\r\n        Object.assign(indicator.end.style, {\r\n            ...publicStyles,\r\n            left: `${rightIndicatorLeft}px`,\r\n        } as StyleProperties)\r\n    }\r\n\r\n    document.body.appendChild(indicator.start)\r\n    document.body.appendChild(indicator.end)\r\n\r\n    return indicator\r\n}\r\n\r\nexport function useAutoScroll(config: {\r\n    getScroll: () => typeof PlScroll.use.class,\r\n    vertical: boolean,\r\n}) {\r\n\r\n    let {getScroll, vertical} = config\r\n\r\n    const state = {\r\n        indicator: null as null | ReturnType<typeof createIndicator>\r\n    }\r\n\r\n    const methods = {\r\n        showHover() {\r\n\r\n            const scroll = getScroll()\r\n            state.indicator = createIndicator(scroll.refs.host, vertical)\r\n\r\n            const handler = {\r\n                enterStart: () => {\r\n                    vertical ? scroll.methods.autoScrollTop() : scroll.methods.autoScrollLeft()\r\n                },\r\n                enterEnd: () => {\r\n                    vertical ? scroll.methods.autoScrollBottom() : scroll.methods.autoScrollRight()\r\n                },\r\n                leave: () => {\r\n                    scroll.methods.stopAutoScroll()\r\n                }\r\n            }\r\n\r\n            state.indicator.start.addEventListener('mouseenter', handler.enterStart)\r\n            state.indicator.end.addEventListener('mouseenter', handler.enterEnd)\r\n\r\n            state.indicator.start.addEventListener('mouseleave', handler.leave)\r\n            state.indicator.end.addEventListener('mouseleave', handler.leave)\r\n        },\r\n        hideHover() {\r\n            if (!!state.indicator) {\r\n                state.indicator.start.parentNode!.removeChild(state.indicator.start)\r\n                state.indicator.end.parentNode!.removeChild(state.indicator.end)\r\n            }\r\n        },\r\n    }\r\n\r\n    return methods\r\n\r\n}","/**\r\n * 获取拖拽的rowEl对象\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:55\r\n */\r\nimport {hasClass} from \"plain-utils/dom/hasClass\";\r\n\r\nexport function getRowEl(e: MouseEvent, rowClass: string): HTMLElement {\r\n    let rowEl = e.target as HTMLElement\r\n    while (!!rowEl && !hasClass(rowEl, rowClass)) {\r\n        rowEl = rowEl.parentNode as HTMLElement\r\n    }\r\n    if (!rowEl) {\r\n        console.log({e, rowClass})\r\n        throw new Error(`can't find item element!`)\r\n    }\r\n    return rowEl\r\n}","/**\r\n * 获取可以滚动的父组件\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:50\r\n */\r\nexport function getScrollParent(el: HTMLElement): HTMLElement {\r\n    while (!!el && el.scrollHeight <= el.offsetHeight) {\r\n        el = el.parentNode as HTMLElement\r\n    }\r\n    return el\r\n}","import {TreeDropType} from \"../utils/tree-constant\";\r\nimport {useAutoScroll} from \"../../../use/useAutoScroll\";\r\nimport {PlScroll} from \"../../scroll/scroll\";\r\nimport {StyleProperties} from \"../../../shims\";\r\nimport {getRowEl} from \"../../../utils/getRowEl\";\r\nimport {getScrollParent} from \"../../../utils/getScrollParent\";\r\n\r\nconst indicatorSize = 3;\r\n\r\nexport function useTreeDraggier<T extends {\r\n    key: string,\r\n    index: number,\r\n    isLeaf: boolean,\r\n    level: number,\r\n    parentRef: () => T | null,\r\n    children?: T[],\r\n    check?: boolean,\r\n    empty: boolean,\r\n}>(\r\n    {\r\n        rowClass,\r\n        dragClass,\r\n        flatList,\r\n        getScroll,\r\n        props,\r\n        methods,\r\n    }: {\r\n        rowClass: string,                                   // 行 class 标识\r\n        dragClass: string,                                  // 拖拽的节点class标识\r\n        flatList: { value: T[] },                           // 拍平的数据\r\n        getScroll: () => typeof PlScroll.use.class,           // 获取 Scroll 组件实例引\r\n        props: {\r\n            intent: number,                                 // 层级偏移距离\r\n            allowDrag?: (node: T) => boolean | undefined,   // 判断元素是否可以拖拽\r\n            allowDrop?: (start: T, move: T, dropType: TreeDropType) => boolean | undefined,// 判断元素是否可以放置\r\n        },\r\n        methods: {\r\n            expand: (node: T) => void,                      // 展开某个元素\r\n            refreshCheckStatus: () => void,                 // 刷新所有元素的选中状态\r\n            removeSelf: (node: T) => void,\r\n            previousSibling: (self: T, target: T) => void,\r\n            nextSibling: (self: T, target: T) => void,\r\n            unshiftChild: (self: T, target: T) => void,\r\n        },\r\n    }\r\n) {\r\n\r\n    const state = {\r\n\r\n        startNode: null as null | T,                    // 拖拽开始的时候节点\r\n        moveNode: null as null | T,                     // 拖拽移动过程中的节点\r\n\r\n        startScrollTop: 0,                              // 开始拖拽的时候，滚动容器的scrollTop\r\n        moveScrollTop: 0,                               // 拖拽移动过程中，滚动容器的scrollTop\r\n\r\n        startClientY: 0,                                // 开始拖拽的时候，鼠标的clientY值\r\n        moveClientY: 0,                                 // 拖拽过程中，鼠标的clientY值\r\n\r\n        rowHeight: 0,                                   // 行高（不可变，每行高度都必须一样）\r\n        scrollParent: null as null | HTMLElement,       // 滚动容器节点\r\n        rowEl: null as null | HTMLElement,              // 拖拽开始的时候，节点的行dom对象\r\n        scrollParentRect: {                             // 滚动容器的位置属性\r\n            top: 0,\r\n            left: 0,\r\n            width: 0,\r\n            height: 0,\r\n        },\r\n        indicator: null as null | HTMLElement,          // 指示器dom对象\r\n        dragNodeBaseLeft: 0,                            // dragNode(dragClass标识的拖拽元素)的left属性\r\n\r\n        dropType: TreeDropType.inner,                   // 当前拖拽移动过程中的放置类型\r\n        droppable: false,                               // 当前拖拽过程中，是否可放置\r\n    }\r\n\r\n    const autoScroll = useAutoScroll({vertical: true, getScroll,})\r\n\r\n    const utils = {\r\n        /**\r\n         * 获取目标节点所有父节点\r\n         * @author  韦胜健\r\n         * @date    2020/8/25 16:33\r\n         */\r\n        getParents: (node: T | null) => {\r\n            const parents = [] as T[]\r\n            while (!!node && node.level > 0) {\r\n                parents.push(node)\r\n                node = node.parentRef()\r\n            }\r\n            return parents\r\n        },\r\n        allowRowDraggable: (node: T) => {\r\n            return !props.allowDrag || props.allowDrag(node) !== false\r\n        },\r\n        allowRowDroppable: (startNode: T, moveNode: T, dropType: TreeDropType) => {\r\n            return !props.allowDrop || props.allowDrop(startNode, moveNode, dropType) !== false\r\n        },\r\n        getIndicatorStyles(moveNode: T, droppable: boolean, dropType: TreeDropType) {\r\n\r\n            const styles: StyleProperties = {}\r\n\r\n            let top = moveNode.index * state.rowHeight + state.scrollParentRect.top - (state.moveScrollTop)\r\n            let paddingLeft = (moveNode.level - state.startNode!.level) * props.intent\r\n\r\n            styles.top = `${dropType === TreeDropType.next ? top + state.rowHeight - indicatorSize : top}px`\r\n            styles.left = `${state.dragNodeBaseLeft + paddingLeft}px`\r\n            styles.width = `${state.scrollParentRect.width - (state.dragNodeBaseLeft - state.scrollParentRect.left) - paddingLeft}px`\r\n            styles.height = `${dropType === TreeDropType.inner ? state.rowHeight : indicatorSize}px`\r\n            styles.backgroundColor = droppable ? '#12b4a5' : '#F38585'\r\n            styles.opacity = dropType === TreeDropType.inner ? '0.15' : ''\r\n\r\n            return styles\r\n        },\r\n        refresh() {\r\n            const top = state.startClientY - state.scrollParentRect.top + (state.moveScrollTop) + (state.moveClientY - state.startClientY)\r\n            let targetIndex = top / state.rowHeight\r\n            const external = targetIndex % 1\r\n            targetIndex = Math.floor(targetIndex)\r\n            let dropType: TreeDropType = external < 0.3 ? TreeDropType.prev : external > 0.7 ? TreeDropType.next : TreeDropType.inner\r\n            const moveNode = flatList.value[targetIndex]\r\n            if (!moveNode) {\r\n                return\r\n            }\r\n\r\n            let droppable = true\r\n\r\n            state.moveNode = moveNode\r\n            if (state.moveNode.empty) {\r\n                droppable = false\r\n            } else {\r\n                const parents = utils.getParents(state.moveNode)\r\n                if (parents.map(n => n.key).indexOf(state.startNode!.key) > -1) {\r\n                    droppable = false\r\n                }\r\n                if (!utils.allowRowDroppable(state.startNode!, moveNode, dropType)) {\r\n                    droppable = false\r\n                }\r\n            }\r\n\r\n            state.dropType = dropType\r\n            state.droppable = droppable\r\n\r\n            Object.assign(state.indicator!.style, utils.getIndicatorStyles(moveNode, droppable, dropType))\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n            state.startClientY = state.moveClientY = e.clientY\r\n\r\n            state.rowEl = getRowEl(e, rowClass)\r\n            state.rowHeight = state.rowEl.offsetHeight\r\n            const vid = Number(state.rowEl.getAttribute('vid'))\r\n            state.moveNode = state.startNode = flatList.value[vid]\r\n\r\n            if (!utils.allowRowDraggable(state.startNode)) {\r\n                return\r\n            }\r\n\r\n            const dragNode = state.rowEl.querySelector(`.${dragClass}`)!\r\n            state.dragNodeBaseLeft = Math.ceil(dragNode.getBoundingClientRect()!.left)\r\n\r\n            state.scrollParent = getScrollParent(state.rowEl)\r\n            state.startScrollTop = state.moveScrollTop = state.scrollParent.scrollTop\r\n            const {top, left, height, width} = (state.scrollParent.parentNode as HTMLElement).getBoundingClientRect()\r\n            state.scrollParentRect = {top, left, height, width}\r\n\r\n            state.indicator = document.createElement('div')\r\n            state.indicator.style.position = 'fixed'\r\n            state.indicator.style.pointerEvents = 'none'\r\n            state.indicator.style.height = `${indicatorSize}px`\r\n            state.indicator.style.width = `${state.scrollParentRect.width}px`\r\n            state.indicator.style.left = `${state.scrollParentRect.left}px`\r\n            state.indicator.style.backgroundColor = '#12b4a5'\r\n            document.body.appendChild(state.indicator)\r\n\r\n            state.scrollParent.addEventListener('scroll', handler.scroll)\r\n            document.addEventListener('mousemove', handler.mousemove)\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n\r\n            utils.refresh()\r\n            autoScroll.showHover()\r\n        },\r\n        scroll() {\r\n            state.moveScrollTop = state.scrollParent!.scrollTop\r\n            utils.refresh()\r\n        },\r\n        /**\r\n         * 在dragover中判断clientX以及clientY，如果这两个值没有变化，就不往下执行，节省性能\r\n         * @author  韦胜健\r\n         * @date    2020/8/25 22:22\r\n         */\r\n        mousemove: (e: MouseEvent) => {\r\n            const {top, height} = state.scrollParentRect\r\n            if (e.clientY < top || e.clientY > top + height) {\r\n                return;\r\n            }\r\n            state.moveClientY = e.clientY\r\n            utils.refresh()\r\n        },\r\n        mouseup: () => {\r\n\r\n            autoScroll.hideHover()\r\n\r\n            const {startNode, moveNode, dropType, droppable} = state\r\n\r\n            state.scrollParent!.removeEventListener('scroll', handler.scroll)\r\n            document.removeEventListener('mousemove', handler.mousemove)\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n\r\n            state.indicator!.parentNode!.removeChild(state.indicator!)\r\n            state.startClientY = state.moveClientY = 0\r\n            state.rowEl = null\r\n            state.rowHeight = 0\r\n            state.moveNode = null\r\n            state.dragNodeBaseLeft = 0\r\n            state.scrollParent = null\r\n            state.startScrollTop = 0\r\n            state.scrollParentRect = {top: 0, left: 0, height: 0, width: 0}\r\n\r\n            if (!droppable) {\r\n                return\r\n            }\r\n\r\n            methods.removeSelf(startNode!)\r\n\r\n            switch (dropType) {\r\n                case TreeDropType.prev:\r\n                    methods.previousSibling(moveNode!, startNode!)\r\n                    break\r\n                case TreeDropType.inner:\r\n                    methods.unshiftChild(moveNode!, startNode!)\r\n                    methods.expand(moveNode!)\r\n                    break\r\n                case TreeDropType.next:\r\n                    methods.nextSibling(moveNode!, startNode!)\r\n                    break\r\n            }\r\n            methods.refreshCheckStatus()\r\n        }\r\n    }\r\n\r\n    return {\r\n        handler,\r\n        utils,\r\n    }\r\n\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {computed, PropType} from 'vue';\r\nimport './tree.scss'\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {TreeProps} from \"./utils/props\";\r\nimport {TreeUtils} from \"./utils/tree.utils\";\r\nimport {TreeNode} from \"./utils/type\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useTreeDraggier} from './core/useTreeDraggier';\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {useTree} from \"./core/useTree\";\r\nimport {createKeyHandler} from \"../../utils/createKeyHandler\";\r\nimport {PlScroll} from \"../scroll/scroll\";\r\nimport {PlVirtualList} from \"../virtual-list/virtual-list\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {createEventListener} from \"../../utils/createEventListener\";\r\nimport {PlItem} from '../item/item';\r\nimport {PlCheckbox} from \"../checkbox/checkbox\";\r\nimport {PlLoading} from \"../loading/loading\";\r\nimport {PlList} from \"../list/list\";\r\n\r\nexport const PlTree = designComponent({\r\n    name: 'pl-tree',\r\n    props: {\r\n        ...TreeProps,\r\n    },\r\n    emits: useTree.createEvent<TreeNode>(),\r\n    setup({props, event}) {\r\n\r\n        const {emit} = event\r\n        const {refs} = useRefs({list: PlVirtualList, scroll: PlScroll,})\r\n        const {scopedSlots} = useScopedSlots({default: {node: Object as PropType<TreeNode>, index: Number},})\r\n        const {state, methods, current, handler, utils} = useTree<TreeNode>({props, emit, keyManager: createKeyHandler('tree'),})\r\n\r\n        /*tree node content公共的样式*/\r\n        const contentStyles = useStyles(style => {style.height = `${props.nodeHeight}px`})\r\n        /**\r\n         * 拍-平的树形数据（不拍平无法实现虚拟滚动）\r\n         * @author  韦胜健\r\n         * @date    2020/12/2 12:16\r\n         */\r\n        const flatList = computed(() => {\r\n            let result: (TreeNode)[] = []\r\n            if (!state.root) {\r\n                return []\r\n            }\r\n            utils.iterate({\r\n                nodes: state.root.children,\r\n                iterateChildren: (treeNode) => treeNode.expand,\r\n                handler: (treeNode) => {\r\n                    result.push(treeNode)\r\n                    // console.log(treeNode.label, {'!treeNode.isLeaf': !treeNode.isLeaf, 'treeNode.loaded': treeNode.loaded, 'treeNode.isVisible': treeNode.isVisible, 'treeNode.expand': treeNode.expand, 'treeNode.children': treeNode.children,})\r\n                    if (\r\n                        !treeNode.isLeaf &&\r\n                        treeNode.loaded &&\r\n                        treeNode.isVisible &&\r\n                        treeNode.expand &&\r\n                        treeNode.children!.length === 0\r\n                    ) {\r\n                        result.push({\r\n                            key: `@@empty_${treeNode.key}`,\r\n                            parentRef: () => treeNode,\r\n                            empty: true,\r\n                            level: treeNode.level + 1,\r\n                        } as TreeNode)\r\n                    }\r\n                },\r\n            },)\r\n            result = result.filter((treeNode) => treeNode.empty ? true : !!treeNode.isVisible)\r\n            result.forEach((node, index) => node.index = index)\r\n            return result\r\n        })\r\n\r\n        const exposeMethods = {\r\n            ...methods,\r\n            ...methods.expandMethods,\r\n            ...methods.checkMethods,\r\n            ...methods.treeNodeMethods,\r\n        }\r\n\r\n        /*---------------------------------------draggier-------------------------------------------*/\r\n\r\n        const draggier = useTreeDraggier<TreeNode>({\r\n            rowClass: 'pl-tree-node',\r\n            dragClass: 'pl-tree-node-draggier',\r\n            flatList,\r\n            getScroll: () => props.virtual ? refs.list!.refs.scroll! : refs.scroll!,\r\n            props,\r\n            methods: {\r\n                ...exposeMethods,\r\n                refreshCheckStatus: async () => {\r\n                    await delay(120)\r\n                    flatList.value.forEach(methods.checkMethods.refreshCheckStatus)\r\n                },\r\n            },\r\n        })\r\n\r\n        const render = {\r\n            node: (node: TreeNode, index: number) => {\r\n                if (node.empty) {\r\n                    return render.empty(node)\r\n                }\r\n                return (\r\n                    <PlItem\r\n                        key={node.key}\r\n                        class={TreeUtils.getTreeNodeClasses(node, current.value)}\r\n                        style={TreeUtils.getTreeNodeStyles(node.level, props.intent, props.nodeHeight)}\r\n                        {...{vid: index}}>\r\n\r\n                        <div class=\"pl-tree-node-operator\">\r\n                            {!!props.showCheckbox && <PlCheckbox\r\n                                checkStatus={node.checkStatus}\r\n                                disabled={!node.isCheckable}\r\n                                {...{onClick: (e?: MouseEvent) => handler.onClickCheckbox(e, node)}}\r\n                            />}\r\n                            <div class=\"pl-tree-node-expander\">\r\n                                {node.loading ?\r\n                                    <PlLoading type=\"gamma\"/> :\r\n                                    <PlIcon icon={node.isLeaf ? props.leafIcon : node.expand ? props.folderExpandIcon : props.folderCollapseIcon}\r\n                                            {...createEventListener({onClick: (e: MouseEvent) => handler.onClickExpandIcon(e, node)})}/>\r\n                                }\r\n                            </div>\r\n                            {!!props.draggable && <PlIcon icon=\"el-icon-list\" class=\"pl-tree-node-draggier\"\r\n                                                          {...createEventListener({onMousedown: draggier.handler.mousedown})}/>}\r\n                            {!!props.nodeIcon && <PlIcon icon={props.nodeIcon(node)}/>}\r\n                        </div>\r\n                        <div class=\"pl-tree-node-content\"\r\n                             style={contentStyles.value}\r\n                             onClick={(e: MouseEvent) => handler.onClickCell(e, node)}>\r\n                            {scopedSlots.default({node, index}, !!props.renderContent ? props.renderContent({node, index}) : node.label)}\r\n                        </div>\r\n                    </PlItem>\r\n                )\r\n            },\r\n            empty: (emptyNode: TreeNode) => {\r\n                const parent = emptyNode.parentRef()!\r\n                return (\r\n                    <PlItem\r\n                        key={`${parent.key}_empty`}\r\n                        class=\"pl-tree-node pl-tree-empty-node\"\r\n                        style={TreeUtils.getTreeNodeStyles(parent.level + 1, props.intent, props.nodeHeight)}>\r\n                        <div class=\"pl-tree-node-operator\">\r\n                            <div class=\"pl-tree-node-expander\">\r\n                                <PlIcon icon=\"el-icon-close-bold\"/>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"pl-tree-node-content\" style={contentStyles.value}>\r\n                            <span>{props.emptyText}</span>\r\n                        </div>\r\n                    </PlItem>\r\n                )\r\n            },\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                ...exposeMethods,\r\n            },\r\n            render: () => {\r\n                return (\r\n                    <div class=\"pl-tree\" style={{height: props.height}} v-loading={props.loading || (!!state.root && state.root.loading)}>\r\n                        {flatList.value.length === 0 ? (\r\n                            <div class=\"pl-tree-placeholder\" key=\"placeholder\">\r\n                                <PlIcon icon=\"el-icon-folder-opened\"/>\r\n                                <span>{props.emptyText}</span>\r\n                            </div>\r\n                        ) : (\r\n                            props.virtual ?\r\n                                (<PlVirtualList\r\n                                    ref=\"list\"\r\n                                    data={flatList.value}\r\n                                    size={props.nodeHeight}\r\n                                    v-slots={{\r\n                                        // default: ({item, index}: { item: TreeNode, index: number }) => render.node(item, index),\r\n                                        content: ({data}: { data: { item: TreeNode, index: number }[] }) => (\r\n                                            <PlList direction=\"top\" class=\"pl-tree-node-list\">\r\n                                                {data.map(({item, index}) => render.node(item, index))}\r\n                                            </PlList>\r\n                                        )\r\n                                    }}\r\n                                />) : (\r\n                                    <PlScroll ref=\"scroll\">\r\n                                        <PlList direction=\"top\" class=\"pl-tree-node-list\">\r\n                                            {flatList.value.map((node, index) => render.node(node, index))}\r\n                                        </PlList>\r\n                                    </PlScroll>\r\n                                )\r\n                        )}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {PlTree} from './tree'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlTree)","import {PlSelect} from './select'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlSelectPanel} from \"./select-panel\";\r\n\r\nexport default createComponentPlugin(PlSelect, {\r\n    exposeComponents: {\r\n        PlSelectPanel,\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlSelectOption} from \"../select/select-option\";\r\n\r\nexport default createComponentPlugin(PlSelectOption)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlSelectGroup} from \"../select/select-group\";\r\n\r\nexport default createComponentPlugin(PlSelectGroup)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useNumber} from \"../../use/useNumber\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {computed} from 'vue';\r\nimport {HTMLInputEvent} from \"../../shims\";\r\n\r\nexport const PlDateTimeInput = designComponent({\r\n    name: 'pl-date-time-input',\r\n    props: {\r\n        ...EditProps,\r\n        width: {type: [String, Number], default: 138},\r\n        modelValue: {type: String},\r\n        displayFormat: {type: String},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: string) => true,\r\n        onFocus: (e: Event) => true,\r\n        onBlur: (e: Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            input: HTMLInputElement,\r\n        })\r\n\r\n        const {editComputed} = useEdit()\r\n\r\n        const {numberState} = useNumber(props, ['width'])\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoEmit: false})\r\n\r\n        const styles = useStyles(style => {style.width = unit(numberState.width)})\r\n\r\n        const regexp = computed(() => new RegExp('^' + props.displayFormat!.replace(/[a-zA-Z]/g, '\\\\d') + '$'))\r\n\r\n        const methods = {\r\n            focus: () => {\r\n                refs.input.focus()\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            input: (e: HTMLInputEvent) => {\r\n                model.value = e.target.value\r\n                if (!model.value || regexp.value.test(model.value)) {\r\n                    emit.onUpdateModelValue(model.value)\r\n                }\r\n            },\r\n            blur: (e: Event) => {\r\n                model.value = props.modelValue\r\n                emit.onBlur(e)\r\n            },\r\n            focus: (e: Event) => {\r\n                emit.onFocus(e)\r\n            },\r\n        }\r\n\r\n\r\n        return {\r\n            refer: {\r\n                refs,\r\n                methods,\r\n            },\r\n            render: () => (\r\n                <input type=\"text\"\r\n                       ref=\"input\"\r\n                       class=\"pl-date-time-inner-input pl-input-custom-inner-input\"\r\n                       style={styles.value}\r\n                       value={model.value}\r\n                       onInput={handler.input as any}\r\n                       onBlur={handler.blur}\r\n                       onFocus={handler.focus}\r\n                       disabled={editComputed.value.disabled as any}\r\n                       readonly={editComputed.value.readonly as any}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import {PlDateTimeInput} from './date-time-input'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlDateTimeInput)","import {ModelType} from \"../../shims\";\r\nimport {useStyle} from \"../../use/useStyle\";\r\nimport {useEdit} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Input from '../input'\r\nimport {computed} from 'vue';\r\nimport {EditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {handleKeyboard} from \"../keyboard\";\r\nimport {PlDateTimeInput} from \"./date-time-input\";\r\n\r\nexport function useDateTime(\r\n    {\r\n        value,\r\n        start,\r\n        end,\r\n        props,\r\n        agentState,\r\n        emit,\r\n    }: {\r\n        value: ModelType,\r\n        start: ModelType,\r\n        end: ModelType,\r\n        props: {\r\n            range?: boolean,\r\n        },\r\n        agentState: EditPopperAgent,\r\n        emit: {\r\n            onBlur: Function\r\n        },\r\n    }\r\n) {\r\n\r\n    useStyle()\r\n\r\n    const {refs} = useRefs({\r\n        valueInput: PlDateTimeInput,\r\n        startInput: PlDateTimeInput,\r\n        endInput: PlDateTimeInput,\r\n        plInput: Input,\r\n    })\r\n\r\n    const inputValue = computed(() => {\r\n        return !props.range ? value.value : ((start.value || '') + (end.value || ''))\r\n    })\r\n\r\n    const handler = {\r\n        clearHandler: () => {\r\n            if (!props.range) {\r\n                value.value = null\r\n            } else {\r\n                start.value = null\r\n                end.value = null\r\n            }\r\n        },\r\n        clickInput() {\r\n            if (!props.range) {\r\n                agentState.methods.toggle()\r\n            } else {\r\n                agentState.methods.show()\r\n            }\r\n        },\r\n        customInputFocus(e: Event) {\r\n            agentState.inputHandler.onFocus(e)\r\n        },\r\n        async customInputBlur(e: Event) {\r\n            if (!props.range) {\r\n                agentState.inputHandler.onBlur(e)\r\n            } else {\r\n                await delay(0)\r\n                if ([\r\n                    refs.startInput!.refs.input,\r\n                    refs.endInput!.refs.input,\r\n                ].indexOf(document.activeElement as any) === -1) {\r\n                    agentState.state.focusCounter--\r\n                    if (agentState.state.focusCounter === 0) {\r\n                        emit.onBlur()\r\n                        agentState.methods.hide()\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        keydown: handleKeyboard({\r\n            enter: agentState.inputHandler.onEnter,\r\n            esc: agentState.inputHandler.onEsc,\r\n        })\r\n    }\r\n\r\n    return {\r\n        refs,\r\n        inputValue,\r\n        handler,\r\n    }\r\n\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {TimePanelProps} from \"./panel/time-panel\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {computed} from 'vue';\r\nimport {PlainDate} from \"../../utils/PlainDate\";\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {TimeServiceGetter} from \"./servce/time-service\";\r\nimport {TimeRangePanelType} from \"./panel/time-range-panel\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {useDateTime} from \"../date-time-input/useDateTime\";\r\nimport './time.scss'\r\nimport {PlInput} from \"../input/input\";\r\nimport {PlDateTimeInput} from \"../date-time-input/date-time-input\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\n\r\nexport const PlTime = designComponent({\r\n    name: 'pl-time',\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n        ...TimePanelProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: string) => true,\r\n        onUpdateStart: (val?: string) => true,\r\n        onUpdateEnd: (val?: string) => true,\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots(['foot'], true)\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const startModel = useModel(() => props.start, emit.onUpdateStart)\r\n        const endModel = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const formatData = computed(() => ({\r\n            value: new PlainDate(model.value, props.displayFormat, props.valueFormat),\r\n            start: new PlainDate(startModel.value, props.displayFormat, props.valueFormat),\r\n            end: new PlainDate(endModel.value, props.displayFormat, props.valueFormat),\r\n        }))\r\n\r\n        const serviceHandler = {\r\n            onChange: (val: string | undefined, type?: TimeRangePanelType) => {\r\n                // console.log('service change', {val, type})\r\n                if (!props.range) {\r\n                    model.value = val\r\n                } else {\r\n                    if (type === TimeRangePanelType.start) {\r\n                        startModel.value = val\r\n                    } else {\r\n                        endModel.value = val\r\n                    }\r\n                }\r\n            },\r\n            onMousedownBasePanel: async () => {\r\n                agentState.state.focusCounter++\r\n                await delay(0)\r\n                refs.valueInput!.methods.focus()\r\n            },\r\n            onMousedownStartPanel: async () => {\r\n                agentState.state.focusCounter++\r\n                await delay(0)\r\n                refs.startInput!.methods.focus()\r\n            },\r\n            onMousedownEndPanel: async () => {\r\n                agentState.state.focusCounter++\r\n                await delay(0)\r\n                refs.endInput!.methods.focus()\r\n            }\r\n        }\r\n\r\n        const agentState = useEditPopperAgent({\r\n            event: {emit},\r\n            serviceGetter: TimeServiceGetter,\r\n            option: {\r\n                reference: () => refs.plInput as any,\r\n                renderAttrs: () => ({\r\n                    ...(Object.keys(TimePanelProps).reduce((ret: any, key) => {\r\n                        ret[key] = (props as any)[key]\r\n                        return ret\r\n                    }, {})),\r\n                    modelValue: model.value,\r\n                    start: startModel.value,\r\n                    end: endModel.value,\r\n                    ...serviceHandler,\r\n                    foot: slots.foot.isExist() ? slots.foot : undefined,\r\n                })\r\n            },\r\n        })\r\n\r\n        const {\r\n            refs,\r\n            handler,\r\n            inputValue,\r\n        } = useDateTime({\r\n            value: model,\r\n            start: startModel,\r\n            end: endModel,\r\n            props,\r\n            agentState,\r\n            emit,\r\n        })\r\n\r\n        const customHandler = {\r\n            change: (val: string, type: 'start' | 'end' | 'value') => {\r\n                const {value: valuePd, start: startPd, end: endPd} = formatData.value\r\n\r\n                switch (type) {\r\n                    case \"value\":\r\n                        if (!val) {\r\n                            valuePd.setValue(undefined)\r\n                            model.value = undefined\r\n                            return;\r\n                        }\r\n                        if (valuePd.format(valuePd.parseDisplayString(val)) != val) {\r\n                            return;\r\n                        }\r\n\r\n                        valuePd.setDisplayValue(val)\r\n                        model.value = valuePd.valueString!\r\n\r\n                        break\r\n                    case \"start\":\r\n                        if (!val) {\r\n                            return;\r\n                        }\r\n                        if (startPd.format(startPd.parseDisplayString(val)) != val) {\r\n                            return;\r\n                        }\r\n\r\n                        startPd.setDisplayValue(val)\r\n                        startModel.value = startPd.valueString as string\r\n\r\n                        if (endPd.isNull || startPd.Hms! > endPd.Hms) {\r\n                            endModel.value = startModel.value\r\n                        }\r\n\r\n                        break\r\n\r\n                    case \"end\":\r\n                        if (!val) {\r\n                            return;\r\n                        }\r\n                        if (endPd.format(endPd.parseDisplayString(val)) != val) {\r\n                            return;\r\n                        }\r\n\r\n                        endPd.setDisplayValue(val)\r\n                        endModel.value = endPd.valueString as string\r\n\r\n                        if (startPd.isNull || endPd.Hms! < startPd.Hms) {\r\n                            startModel.value = endModel.value\r\n                        }\r\n\r\n                        break\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <PlInput\r\n                    ref=\"plInput\"\r\n                    class=\"pl-time pl-input-custom\"\r\n                    modelValue={inputValue.value}\r\n                    suffixIcon=\"el-icon-time\"\r\n                    clearIcon\r\n                    isFocus={agentState.state.focusCounter > 0}\r\n                    width={null as any}\r\n                    inputInnerTabindex={null as any}\r\n                    clearHandler={handler.clearHandler}\r\n                    onClickInput={handler.clickInput}\r\n                    onKeydown={handler.keydown}>\r\n                    <div{...{class: 'pl-input-custom-inner', range: String(props.range)}}>\r\n                        {!props.range ? (\r\n                            <PlDateTimeInput\r\n                                ref=\"valueInput\"\r\n                                modelValue={formatData.value.value.displayString!}\r\n                                displayFormat={props.displayFormat}\r\n                                {...{onChange: (val: string) => customHandler.change(val, 'value')}}\r\n                                onFocus={handler.customInputFocus}\r\n                                onBlur={handler.customInputBlur}/>\r\n                        ) : (\r\n                            <>\r\n                                <PlDateTimeInput\r\n                                    ref=\"startInput\"\r\n                                    width=\"100\"\r\n                                    modelValue={formatData.value.start.displayString!}\r\n                                    displayFormat={props.displayFormat}\r\n                                    {...{onChange: (val: string) => customHandler.change(val, 'start')}}\r\n                                    onFocus={handler.customInputFocus}\r\n                                    onBlur={handler.customInputBlur}/>\r\n                                <span>~</span>\r\n                                <PlDateTimeInput\r\n                                    ref=\"endInput\"\r\n                                    width=\"100\"\r\n                                    modelValue={formatData.value.end.displayString!}\r\n                                    displayFormat={props.displayFormat}\r\n                                    {...{onChange: (val: string) => customHandler.change(val, 'end')}}\r\n                                    onFocus={handler.customInputFocus}\r\n                                    onBlur={handler.customInputBlur}/>\r\n                            </>)\r\n                        }\r\n                    </div>\r\n                </PlInput>\r\n            )\r\n        }\r\n    },\r\n})","import {ExtractPropTypes, PropType} from 'vue';\r\nimport {PDate} from \"./plainDate\";\r\nimport {VNodeChild} from \"../../shims\";\r\n\r\n/**\r\n * 当前面板的视图\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:43\r\n */\r\nexport enum DateView {\r\n    year = 'year',\r\n    month = 'month',\r\n    date = 'date',\r\n    time = 'time',\r\n}\r\n\r\nexport enum DatePanel {\r\n    year = 'year',\r\n    month = 'month',\r\n    date = 'date',\r\n    week = 'week',\r\n    quarter = 'quarter',\r\n}\r\n\r\n/**\r\n * 跟节点切换动画的方向\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:43\r\n */\r\nexport enum SlideTransitionDirection {\r\n    next = 'next',\r\n    prev = 'prev'\r\n}\r\n\r\n/**\r\n * 在派发modelValue时，派发的start还是end事件\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:44\r\n */\r\nexport const enum DateEmitRangeType {\r\n    start = 'start',\r\n    end = 'end',\r\n}\r\n\r\n/**\r\n * 面板的默认格式化字符串\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:46\r\n */\r\nexport const DefaultDateFormatString = {\r\n    year: 'YYYY',\r\n    month: 'YYYY-MM',\r\n    date: 'YYYY-MM-DD',\r\n    datetime: 'YYYY-MM-DD HH:mm:ss',\r\n    week: 'YYYY-MM-DD',\r\n    Hms: 'HH:mm:ss',\r\n    quarter: 'YYYY年第ww季度',\r\n}\r\n\r\nexport const getDefaultDateFormatter = (() => {\r\n    function getDefaultDateValueFormat(panel: DatePanel, datetime?: boolean) {\r\n        switch (panel) {\r\n            case DatePanel.year:\r\n                return DefaultDateFormatString.year\r\n            case DatePanel.month:\r\n                return DefaultDateFormatString.month\r\n            case DatePanel.date:\r\n                return datetime ? DefaultDateFormatString.datetime : DefaultDateFormatString.date\r\n            case DatePanel.week:\r\n                return DefaultDateFormatString.date\r\n            case DatePanel.quarter:\r\n                return DefaultDateFormatString.month\r\n        }\r\n    }\r\n\r\n    function getDefaultDateDisplayFormat(panel: DatePanel, datetime?: boolean) {\r\n        switch (panel) {\r\n            case DatePanel.year:\r\n                return DefaultDateFormatString.year\r\n            case DatePanel.month:\r\n                return DefaultDateFormatString.month\r\n            case DatePanel.date:\r\n                return datetime ? DefaultDateFormatString.datetime : DefaultDateFormatString.date\r\n            case DatePanel.week:\r\n                return 'gggg年第ww周'\r\n            case DatePanel.quarter:\r\n                return 'YYYY年第Q季度'\r\n        }\r\n    }\r\n\r\n    return (panel: DatePanel, datetime?: boolean) => ({\r\n        displayFormat: getDefaultDateDisplayFormat(panel, datetime),\r\n        valueFormat: getDefaultDateValueFormat(panel, datetime),\r\n    })\r\n})();\r\n\r\nexport const DateViewSeq = {\r\n    year: 1,\r\n    month: 2,\r\n    date: 3,\r\n    time: 4,\r\n}\r\n\r\nexport const DatePublicProps = {\r\n    modelValue: {type: [String, Array] as PropType<string | string[]>},         // 双向绑定值，单选时为单个字符串，多选时为字符串数组\r\n    start: {type: String},                                                      // 范围选择，起始值绑定值\r\n    end: {type: String},                                                        // 范围选择，截止值绑定值\r\n    displayFormat: {type: String},                                              // 显示值格式化字符串\r\n    valueFormat: {type: String},                                                // 值格式化字符串\r\n    max: {type: String},                                                        // 最大值\r\n    min: {type: String},                                                        // 最小值\r\n    range: {type: Boolean},                                                     // 是否为范围选择，与multiple多选只能二选一\r\n    multiple: {type: Boolean},                                                  // 是否为 多选，与range多选只能二选一\r\n\r\n    firstWeekDay: {type: Number, default: 1},                                   // 一周的第一个是星期几，0是星期天，1是星期一\r\n    defaultTime: {type: String},                                                // 默认时间，如果没有初始值，选择日期的时候时间会取这里的默认时间\r\n    defaultStartTime: {type: String},                                           // 日期范围选择起始选择框日期面板，默认时间，如果没有初始值，选择日期的时候时间会取这里的默认时间\r\n    defaultEndTime: {type: String},                                             // 日期范围选择截止选择框日期面板，默认时间，如果没有初始值，选择日期的时候时间会取这里的默认时间\r\n\r\n    showQuarter: {type: Boolean},                                               // 月份面板是否显示季度\r\n    isQuarterActive: {type: Function as PropType<(did: DateItemData) => boolean>},// 季度是否高亮判断函数\r\n\r\n    /*inner props*/\r\n    direction: {type: String, default: 'horizontal'},                           // 根节点在 pl-transition-slide 动画下的动画方向，是horizontal还是vertical\r\n    view: {type: String as PropType<DateView>, default: DateView.month},        // 当前视图\r\n    selectDate: {type: Object as PropType<PDate>},                              // 当前面板的年月日期对象\r\n    datetime: {type: Boolean},                                                  // 是否为日期时间视图\r\n}\r\n\r\n/**\r\n * 所有面板的公共属性对象类型\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:45\r\n */\r\nexport type DatePublicPropsType = ExtractPropTypes<typeof DatePublicProps>\r\n\r\n/**\r\n * 所有面板的公共派发事件配置对象\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:45\r\n */\r\nexport const DatePublicEmits = {\r\n    onUpdateModelValue: (val?: string | string[], rangeType?: DateEmitRangeType) => true,\r\n    onUpdateStart: (val?: string) => true,\r\n    onUpdateEnd: (val?: string) => true,\r\n    onUpdateView: (view: DateView) => true,\r\n}\r\n\r\n/**\r\n * 单个日期选项的数据类型\r\n * @author  韦胜健\r\n * @date    2021/1/18 16:04\r\n */\r\nexport interface DateItemData {\r\n    label: string | number,\r\n    active: boolean,\r\n    now: boolean,\r\n    disabled: boolean,\r\n    start: boolean,\r\n    hover: boolean,\r\n    end: boolean,\r\n    clickable: boolean,\r\n    pd: PDate,\r\n    range: boolean,\r\n    externals?: any,\r\n}\r\n\r\nexport function DatePanelWrapper(slots: {\r\n    left?: VNodeChild,\r\n    center: VNodeChild,\r\n    right?: VNodeChild,\r\n    content: VNodeChild,\r\n    bodyAttrs?: any,\r\n}) {\r\n    return (\r\n        <div class=\"pl-date-base-panel\">\r\n            <div class=\"pl-date-base-panel-header\">\r\n                <div>{slots.left}</div>\r\n                <div>{slots.center}</div>\r\n                <div>{slots.right}</div>\r\n            </div>\r\n            <div class=\"pl-date-base-panel-body\" {...(slots.bodyAttrs || {})}>\r\n                {slots.content}\r\n            </div>\r\n        </div>\r\n    ) as any\r\n}\r\n\r\nexport function DatePanelItemWrapper(\r\n    {\r\n        Node,\r\n        item,\r\n        onClick,\r\n        onMouseenter,\r\n    }: {\r\n        Node: any,                                      // 容器节点\r\n        item: DateItemData,                             // item 数据\r\n        onClick: (item: DateItemData) => void,          // 点击item事件处理句柄\r\n        onMouseenter: (item: DateItemData) => void,     // 进入item事件处理句柄\r\n    }) {\r\n\r\n    let listener = {} as any;\r\n    item.clickable && (listener.onClick = () => onClick(item));\r\n    !item.disabled && (listener.onMouseenter = () => onMouseenter(item));\r\n\r\n    return (\r\n        <Node\r\n            {...listener}\r\n            class={[\r\n                'pl-date-base-panel-item',\r\n                {\r\n                    'pl-date-base-panel-item-active': item.active,\r\n                    'pl-date-base-panel-item-now': item.now,\r\n                    'pl-date-base-panel-item-disabled': item.disabled,\r\n                    'pl-date-base-panel-item-hover-start': item.start,\r\n                    'pl-date-base-panel-item-hover': item.hover,\r\n                    'pl-date-base-panel-item-hover-end': item.end,\r\n                }\r\n            ]}>\r\n            <div>\r\n                <span>{item.label}</span>\r\n            </div>\r\n        </Node>\r\n    )\r\n}","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlTime} from \"./time\";\r\n\r\nexport default createComponentPlugin(PlTime)","export function prefix(val: string | number, config?: { char?: string, len?: number }) {\r\n    if (typeof val !== \"string\") {\r\n        val = String(val)\r\n    }\r\n    let len = val.length\r\n    if (!config) config = {}\r\n    while (len < (config.len || 2)) {\r\n        val = (config.char || '0') + val\r\n        len++\r\n    }\r\n    return val\r\n}","import DayJs from 'dayjs';\r\nimport Format from 'dayjs/plugin/customParseFormat'\r\nimport WeekYear from 'dayjs/plugin/weekYear'\r\nimport WeekOfYear from 'dayjs/plugin/weekOfYear'\r\nimport AdvanceFormat from 'dayjs/plugin/advancedFormat'\r\nimport 'dayjs/locale/de'\r\nimport {prefix} from \"../../utils/prefix\";\r\n\r\nDayJs.locale('de')\r\nDayJs.extend(Format)\r\nDayJs.extend(WeekYear)\r\nDayJs.extend(WeekOfYear)\r\nDayJs.extend(AdvanceFormat)\r\n\r\ntype InitialValue = string | DayJs.Dayjs | Date | undefined;\r\n\r\n/**\r\n * 所有use开头的函数，都会返回一个新的PDate实例，不会修改原有基础的对象\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:26\r\n */\r\nexport interface PDate {\r\n    year: number\r\n    month: number\r\n    date: number\r\n    hour: number\r\n    minute: number\r\n    second: number\r\n    time: number\r\n    day: number\r\n    timeString: string\r\n    dateString: string\r\n    displayFormat: string\r\n    valueFormat: string\r\n    Y: number\r\n    YM: number\r\n    YMD: number\r\n    YMDHms: number\r\n    Hms: number\r\n\r\n    getDayJs: () => DayJs.Dayjs,\r\n    getDate: () => Date,\r\n    getDisplay: () => string\r\n    getValue: () => string\r\n\r\n    useValue: (value: string) => PDate\r\n    useDisplay: (display: string) => PDate\r\n    useYear: (year: number) => PDate\r\n    useMonthDate: (month: number, date: number) => PDate\r\n    useHour: (hour: number) => PDate\r\n    useMinute: (minute: number) => PDate\r\n    useSecond: (second: number) => PDate\r\n    useTime: (time: number) => PDate\r\n    useHms: (data: PDate | [number, number, number]) => PDate,\r\n    useYMD: (data: PDate | [number, number, number]) => PDate,\r\n\r\n    format: (value: InitialValue) => string\r\n    parseDisplay: (display: string) => PDate\r\n    parseValue: (value: string) => PDate\r\n    clone: () => PDate,\r\n}\r\n\r\nfunction wrapDate(initialValue: InitialValue, config: { displayFormat: string, valueFormat: string }): PDate {\r\n\r\n    const dj = DayJs(initialValue, typeof initialValue === \"string\" ? config.valueFormat : undefined)\r\n    const dateObj = dj.toDate()\r\n    const year = dj.year();\r\n    const month = dj.month();\r\n    const date = dj.date();\r\n    const hour = dj.hour();\r\n    const minute = dj.minute()\r\n    const second = dj.second()\r\n    const time = dateObj.getTime()\r\n    const day = dateObj.getDay()\r\n\r\n    const timeString = prefix(hour) + prefix(minute) + prefix(second)\r\n    const dateString = prefix(year) + prefix(month + 1) + prefix(date)\r\n\r\n    const Y = year\r\n    const YM = `${Y}${prefix(month + 1)}`\r\n    const YMD = `${YM}${prefix(date)}`\r\n    const YMDHms = `${YMD}${timeString}`\r\n    // const Hms = timeString\r\n    return {\r\n        year,\r\n        month,\r\n        date,\r\n        hour,\r\n        minute,\r\n        second,\r\n        day,\r\n        time,\r\n        timeString,\r\n        dateString,\r\n        Y: Y,\r\n        YM: Number(YM),\r\n        YMD: Number(YMD),\r\n        YMDHms: Number(YMDHms),\r\n        Hms: Number(timeString),\r\n        displayFormat: config.displayFormat!,\r\n        valueFormat: config.valueFormat!,\r\n\r\n        getDate: () => dateObj,\r\n        getDayJs: () => dj,\r\n        getDisplay: () => dj.format(config.displayFormat),\r\n        getValue: () => dj.format(config.valueFormat),\r\n\r\n        /*根据值修改*/\r\n        useValue: (value: InitialValue) => wrapDate(value, config),\r\n        /*根据显示值修改*/\r\n        useDisplay: (display: string) => wrapDate(DayJs(display, config!.displayFormat), config),\r\n        /*根据年份修改*/\r\n        useYear: (year: number) => wrapDate(dj.year(year), config),\r\n        /*根据月份日期修改*/\r\n        useMonthDate: (month: number, date: number) => {\r\n            const d = new Date(dj.toDate())\r\n            d.setMonth(month, date)\r\n            return wrapDate(d, config)\r\n        },\r\n        /*根据时间修改*/\r\n        useHour: (hour: number) => wrapDate(dj.hour(hour), config),\r\n        /*根据分钟修改*/\r\n        useMinute: (minute: number) => wrapDate(dj.minute(minute), config),\r\n        /*根据秒钟修改*/\r\n        useSecond: (second: number) => wrapDate(dj.second(second), config),\r\n        /*根据时间戳修改*/\r\n        useTime: (time: number) => wrapDate(new Date(time), config),\r\n        /*根据时分秒修改*/\r\n        useHms: (val) => {\r\n            const obj = new Date(dateObj)\r\n            if (Array.isArray(val)) {\r\n                obj.setHours(val[0], val[1], val[2])\r\n            } else {\r\n                obj.setHours(val.hour, val.minute, val.second)\r\n            }\r\n            return wrapDate(obj, config)\r\n        },\r\n        /*根据年月日修改*/\r\n        useYMD: (val) => {\r\n            const obj = new Date(dateObj)\r\n            if (Array.isArray(val)) {\r\n                obj.setFullYear(val[0], val[1], val[2])\r\n            } else {\r\n                obj.setFullYear(val.year, val.month, val.date)\r\n            }\r\n            return wrapDate(obj, config)\r\n        },\r\n        /*格式化值*/\r\n        format: (value) => DayJs(value, config.valueFormat).format(config.displayFormat),\r\n        /*根据格式化字符串解析字符串*/\r\n        parseDisplay: (display: string) => wrapDate(DayJs(display, config.displayFormat), config),\r\n        /*根据值格式化字符串解析字符串*/\r\n        parseValue: (value: string) => wrapDate(DayJs(value, config.valueFormat), config),\r\n        /*克隆一个新的对象*/\r\n        clone: () => wrapDate(initialValue, config)\r\n    }\r\n}\r\n\r\n/**\r\n * 获取一个默认日期\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:29\r\n */\r\nconst defaultDate = () => {\r\n    const date = new Date()\r\n    date.setMonth(0, 1)\r\n    date.setHours(0, 0, 0)\r\n    return date\r\n}\r\n/**\r\n * 格式化日期为字符串\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:29\r\n */\r\nconst format = (date: Date | undefined | null, format: string) => {\r\n    if (!date) return ''\r\n    return DayJs(date).format(format)\r\n}\r\n/**\r\n * 解析字符串为日期对象\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:30\r\n */\r\nconst parse = (str: string | undefined | null, format: string) => {\r\n    if (!str) return null\r\n    return DayJs(str, format)\r\n}\r\n\r\n/**\r\n * 获取当天的日期信息\r\n * @author  韦胜健\r\n * @date    2021/1/18 10:30\r\n */\r\nconst today = (displayFormat: string, valueFormat: string) => {\r\n    return wrapDate(new Date(), {displayFormat, valueFormat})\r\n}\r\n\r\nexport const plainDate = Object.assign(wrapDate, {defaultDate, format, parse, today, DayJs})","import {computed, inject, provide, reactive, watch} from 'vue';\r\nimport {DateEmitRangeType, DateItemData, DatePublicPropsType, DateView, DefaultDateFormatString, SlideTransitionDirection} from \"./date.utils\";\r\nimport {PDate, plainDate} from \"./plainDate\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {toArray} from \"../../utils/toArray\";\r\n\r\n/**\r\n * 日期子组件注入父组件提供的值的时候的唯一标识\r\n * @author  韦胜健\r\n * @date    2020/12/7 20:43\r\n */\r\nexport const DATE_PANEL_PROVIDER = '@@DATE_PANEL_PROVIDER'\r\n\r\n/**\r\n * 判断对比类型\r\n * @author  韦胜健\r\n * @date    2021/1/19 9:22\r\n */\r\nexport enum UseDateJudgementView {\r\n    'Y' = 'Y',\r\n    'YM' = 'YM',\r\n    'YMD' = 'YMD',\r\n}\r\n\r\ntype DateCustomStatus = {\r\n    active: () => PDate[],\r\n    disabled: () => { max: PDate | null, min: PDate | null },\r\n    start: () => PDate[],\r\n    end: () => PDate[],\r\n    hover: () => [PDate, PDate][],\r\n}\r\n\r\n/**\r\n * 顶层父面板向下提供的数据\r\n * @author  韦胜健\r\n * @date    2021/1/19 9:23\r\n */\r\ntype UseDateTopState = {\r\n    max: PDate | null,\r\n    min: PDate | null,\r\n    vpd: PDate | PDate[] | null,\r\n    range: {\r\n        hover: null | [PDate, PDate],\r\n        value: null | [PDate, PDate],\r\n    },\r\n    isRange: boolean,\r\n    customStatus?: DateCustomStatus,\r\n}\r\n\r\nexport type UseDateEmit = {\r\n    onUpdateModelValue: (val?: string | string[], rangeType?: DateEmitRangeType) => void,\r\n    onUpdateStart: (val?: string) => void,\r\n    onUpdateEnd: (val?: string) => void,\r\n    onUpdateView: (val: DateView) => void,\r\n}\r\n\r\n/**\r\n * useDate得到的数据对象\r\n * @author  韦胜健\r\n * @date    2021/1/19 9:23\r\n */\r\nexport type UseDateType = {\r\n    parent: UseDateType | null,\r\n    jdView: UseDateJudgementView,\r\n    today: PDate,\r\n    displayFormat: string,\r\n    valueFormat: string,\r\n\r\n    model: { value?: string | string[] },\r\n    startModel: { value?: string },\r\n    endModel: { value?: string },\r\n    viewModel: { value: DateView },\r\n\r\n    state: {\r\n        pd: {\r\n            vpd: null | PDate | PDate[],\r\n            spd: null | PDate,\r\n            epd: null | PDate,\r\n        },\r\n        selectDate: PDate,\r\n        range: {\r\n            hover: null | [PDate, PDate],\r\n            value: null | [PDate, PDate],\r\n        },\r\n        slide: SlideTransitionDirection,\r\n        topState: UseDateTopState,\r\n    },\r\n\r\n    setSelectDate: (pd: PDate) => void,\r\n    getStatus: (pd: PDate) => {\r\n        now: boolean,\r\n        disabled: boolean,\r\n        active: boolean,\r\n        start: boolean,\r\n        end: boolean,\r\n        hover: boolean,\r\n        range: boolean,\r\n        clickable: boolean,\r\n    },\r\n    handler: {\r\n        onClick: (did: DateItemData) => void,\r\n        onMouseenter: (did: DateItemData) => void,\r\n    },\r\n}\r\n\r\nexport function useDate(\r\n    {\r\n        props,\r\n        jdView,\r\n        getSlide,\r\n        processPd,\r\n        emit,\r\n        customStatus,\r\n    }: {\r\n        props: DatePublicPropsType,\r\n        jdView: UseDateJudgementView,\r\n        getSlide?: (pd: PDate) => SlideTransitionDirection,\r\n        /*process 不能处理多选的情况*/\r\n        processPd?: {\r\n            value?: (vpd: PDate) => PDate,\r\n            range?: (spd: PDate, vpd: PDate) => { spd: PDate, epd: PDate },\r\n        },\r\n        emit: UseDateEmit,\r\n        customStatus?: DateCustomStatus,\r\n    }): UseDateType {\r\n\r\n    const defaultFormat = (() => {\r\n        if (jdView === UseDateJudgementView.Y) return DefaultDateFormatString.year\r\n        if (jdView === UseDateJudgementView.YM) return DefaultDateFormatString.month\r\n        if (jdView === UseDateJudgementView.YMD) return props.datetime ? DefaultDateFormatString.datetime : DefaultDateFormatString.date\r\n    })();\r\n    const displayFormat = props.displayFormat || defaultFormat!\r\n    const valueFormat = props.valueFormat || defaultFormat!\r\n    const createPlainDate = (val: string) => plainDate(val, {displayFormat, valueFormat})\r\n\r\n    /**\r\n     * 顶层父面板\r\n     * @author  韦胜健\r\n     * @date    2020/12/7 20:48\r\n     */\r\n    const parent = inject<UseDateType | null>(DATE_PANEL_PROVIDER, null)\r\n\r\n    const today = plainDate.today(displayFormat, valueFormat)\r\n    const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {\r\n        onChange: (val) => {\r\n            if (!!props.selectDate) {return}\r\n            let pd: PDate;\r\n            if (!props.multiple) {\r\n                const value = val as string | undefined\r\n                pd = !value ? today : today.useValue(value)\r\n            } else {\r\n                const value = val as string[] | undefined\r\n                pd = !value || value.length === 0 ? today : today.useValue(value[0])\r\n            }\r\n            !!getSlide && (state.slide = getSlide(pd))\r\n            useDateData.setSelectDate(pd)\r\n        }\r\n    })\r\n    const startModel = (!props.range || !!parent) ? model as { value?: string } : useModel(() => props.start, emit.onUpdateStart, {\r\n        onChange: (val) => {\r\n            if (!!props.selectDate) {return}\r\n            const spd = !val ? null : today.useValue(val)\r\n            const epd = state.pd.epd\r\n            state.range = {\r\n                hover: null,\r\n                value: !!spd && !!epd ? [spd, epd] : null\r\n            }\r\n            !!getSlide && (state.slide = getSlide(spd || today))\r\n            useDateData.setSelectDate(spd || today)\r\n        }\r\n    })\r\n    const endModel = (!props.range || !!parent) ? model as { value?: string } : useModel(() => props.end, emit.onUpdateEnd, {\r\n        onChange: (val) => {\r\n            const spd = state.pd.spd\r\n            const epd = !val ? null : today.useValue(val)\r\n            state.range = {\r\n                hover: null,\r\n                value: !!spd && !!epd ? [spd, epd] : null\r\n            }\r\n        },\r\n    })\r\n    const viewModel = useModel(() => props.view, emit.onUpdateView)\r\n\r\n    const pd = computed(() => {\r\n        let vpd: null | PDate | PDate[];\r\n        if (!props.multiple) {\r\n            vpd = !model.value ? null : createPlainDate(model.value as string)\r\n        } else {\r\n            vpd = !model.value ? null : (model.value as string[]).map(item => createPlainDate(item))\r\n        }\r\n        return {\r\n            vpd,\r\n            spd: (!props.range || !!parent) ? null : (!startModel.value ? null : createPlainDate(startModel.value)),\r\n            epd: (!props.range || !!parent) ? null : (!endModel.value ? null : createPlainDate(endModel.value)),\r\n        }\r\n    })\r\n\r\n    const state = reactive({\r\n        pd,\r\n        selectDate: (() => {\r\n            let selectDate = props.selectDate\r\n            if (!selectDate) {\r\n                const {vpd, spd} = pd.value\r\n                if (!props.range) {\r\n                    if (!props.multiple) {\r\n                        const pd = vpd as PDate | null\r\n                        selectDate = pd || today\r\n                    } else {\r\n                        const pd = vpd as PDate[] | null\r\n                        selectDate = (!!pd && pd.length > 0) ? pd[0] : today\r\n                    }\r\n                } else {\r\n                    selectDate = spd || today\r\n                }\r\n            }\r\n            if (!!props.selectDate) {\r\n                watch(() => props.selectDate, pd => {\r\n                    if (!pd) {return}// 肯定会有值\r\n                    !!getSlide && (state.slide = getSlide(pd!))\r\n                    useDateData.setSelectDate(pd!)\r\n                })\r\n            }\r\n            return selectDate\r\n        })(),\r\n        range: (() => {\r\n            const {spd, epd} = pd.value\r\n            return {\r\n                hover: null as null | [PDate, PDate],\r\n                value: (!!spd && !!epd) ? [spd, epd] as [PDate, PDate] : null,\r\n            }\r\n        })(),\r\n        slide: SlideTransitionDirection.next,\r\n        topState: computed((): UseDateTopState => {\r\n            if (!!parent) {\r\n                return parent.state.topState\r\n            }\r\n            const {vpd} = pd.value\r\n            return {\r\n                max: !props.max ? null : createPlainDate(props.max),\r\n                min: !props.min ? null : createPlainDate(props.min),\r\n                vpd,\r\n                range: state.range,\r\n                isRange: props.range,\r\n                customStatus,\r\n            }\r\n        }),\r\n    })\r\n\r\n    const handler = {\r\n        onClick: (did: DateItemData) => {\r\n            if (!parent) {\r\n                /*\r\n                *  没有父面板，表明当前面板为顶层面板\r\n                */\r\n                if (props.multiple) {\r\n                    const display = did.pd.getDisplay()\r\n                    /*\r\n                    *  多选\r\n                    */\r\n                    let value = model.value as string[] | undefined\r\n                    if (!value || value.length === 0) {\r\n                        value = [display]\r\n                    } else {\r\n                        const existIndex = value.findIndex((item) => item === display)\r\n                        if (existIndex > -1) {\r\n                            value.splice(existIndex, 1)\r\n                        } else {\r\n                            value.unshift(display)\r\n                        }\r\n                    }\r\n                    model.value = [...value]\r\n                } else {\r\n                    /*\r\n                    *  非多选\r\n                    */\r\n                    if (!props.range) {\r\n                        /*\r\n                        *  单选\r\n                        */\r\n                        let {pd} = did\r\n                        if (!!processPd && !!processPd.value) pd = processPd.value(pd)\r\n                        model.value = pd.getDisplay()\r\n                    } else {\r\n                        /*\r\n                        *  范围选择\r\n                        */\r\n                        if (!state.range.hover) {\r\n                            const {pd} = did\r\n                            state.range = {\r\n                                hover: [pd, pd],\r\n                                value: [pd, pd],\r\n                            }\r\n                        } else {\r\n                            let [spd, epd] = state.range.hover\r\n                            if (!!processPd && !!processPd.range) {\r\n                                const data = processPd.range(spd, epd)\r\n                                spd = data.spd\r\n                                epd = data.epd\r\n                            }\r\n                            startModel.value = spd.getDisplay()\r\n                            endModel.value = epd.getDisplay()\r\n                            state.range = {\r\n                                hover: null,\r\n                                value: [spd, epd],\r\n                            }\r\n                            emit.onUpdateModelValue(startModel.value, DateEmitRangeType.start)\r\n                            emit.onUpdateModelValue(endModel.value, DateEmitRangeType.end)\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                let {pd} = did\r\n                if (!!processPd && !!processPd.value) pd = processPd.value(pd)\r\n                model.value = pd.getDisplay()\r\n            }\r\n        },\r\n        onMouseenter: (did: DateItemData) => {\r\n            if (!!parent) {\r\n                return\r\n            }\r\n            if (!!state.range.hover) {\r\n                const {pd} = did\r\n                const mid = state.range.value![0]!\r\n                state.range.hover = mid[jdView] > pd[jdView] ? [pd, mid] : [mid, pd]\r\n            }\r\n        },\r\n    }\r\n\r\n    const utils = {\r\n        active: (pd: PDate): boolean => {\r\n            const {isRange, vpd, range} = state.topState\r\n            let condition: PDate[] = []\r\n            if (!!state.topState.customStatus && state.topState.customStatus.active) {\r\n                condition = state.topState.customStatus.active()\r\n            } else {\r\n                if (!isRange) {\r\n                    if (!!vpd) {condition = toArray(vpd)}\r\n                } else {\r\n                    if (!!range.value) {condition = [range.value[0], range.value[1]]}\r\n                }\r\n            }\r\n            return !!condition.find(item => item[jdView] === pd[jdView])\r\n        },\r\n        disabled: (pd: PDate): boolean => {\r\n            const {max, min} = (!!state.topState.customStatus && !!state.topState.customStatus.disabled) ? state.topState.customStatus.disabled() : state.topState\r\n            if (!!max && max[jdView] < pd[jdView]) return true\r\n            if (!!min && min[jdView] > pd[jdView]) return true\r\n            return false\r\n        },\r\n        start: (pd: PDate) => {\r\n            const {isRange, range: {hover, value}} = state.topState\r\n            let condition: PDate[] = []\r\n            if (!!state.topState.customStatus && !!state.topState.customStatus.start) {\r\n                condition = state.topState.customStatus.start()\r\n            } else {\r\n                if (!!isRange) {\r\n                    if (!!hover) condition.push(hover[0])\r\n                    else if (!!value) condition.push(value[0])\r\n                }\r\n            }\r\n            return condition.some(item => item[jdView] === pd[jdView])\r\n        },\r\n        end: (pd: PDate) => {\r\n            const {isRange, range: {hover, value}} = state.topState\r\n            let condition: PDate[] = []\r\n            if (!!state.topState.customStatus && !!state.topState.customStatus.end) {\r\n                condition = state.topState.customStatus.end()\r\n            } else {\r\n                if (!!isRange) {\r\n                    if (!!hover) condition.push(hover[1])\r\n                    else if (!!value) condition.push(value[1])\r\n                }\r\n            }\r\n            return condition.some(item => item[jdView] === pd[jdView])\r\n        },\r\n        hover: (pd: PDate) => {\r\n            const {isRange, range: {hover, value}} = state.topState\r\n            let condition: [PDate, PDate][] = []\r\n            if (!!state.topState.customStatus && !!state.topState.customStatus.hover) {\r\n                condition = state.topState.customStatus.hover()\r\n            } else {\r\n                if (!!isRange) {\r\n                    if (!!hover || !!value) {\r\n                        condition.push((hover || value)!)\r\n                    }\r\n                }\r\n            }\r\n            return condition.some(([spd, epd]) => (spd[jdView] < pd[jdView] && epd[jdView] > pd[jdView]))\r\n        },\r\n    }\r\n\r\n    const useDateData: UseDateType = {\r\n        parent,\r\n        jdView,\r\n        state,\r\n        today,\r\n        displayFormat,\r\n        valueFormat,\r\n\r\n        model,\r\n        startModel,\r\n        endModel,\r\n        viewModel,\r\n\r\n        setSelectDate: (pd) => state.selectDate = pd || today,\r\n        getStatus: (pd) => {\r\n            const disabled = utils.disabled(pd)\r\n            return {\r\n                now: today[jdView] === pd[jdView],\r\n                active: utils.active(pd),\r\n                disabled,\r\n                start: utils.start(pd),\r\n                hover: utils.hover(pd),\r\n                end: utils.end(pd),\r\n                range: !!state.topState.range,\r\n                clickable: (!!parent && parent.jdView !== jdView) || !disabled\r\n            }\r\n        },\r\n        handler,\r\n    }\r\n\r\n    /*只有最顶层日期组件才有资格控制子组件*/\r\n    if (!parent) {\r\n        provide(DATE_PANEL_PROVIDER, useDateData)\r\n    }\r\n\r\n    return useDateData\r\n}","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateItemData, DatePanelItemWrapper, DatePanelWrapper, DatePublicEmits, DatePublicProps, DefaultDateFormatString, SlideTransitionDirection} from \"../date.utils\";\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\nimport {computed, Transition} from 'vue';\r\nimport {PlButton} from \"../../button/button\";\r\nimport {StyleSize} from \"../../../use/useStyle\";\r\n\r\nexport const PlDatePanelYear = designComponent({\r\n    name: 'pl-date-panel-year',\r\n    props: {\r\n        ...DatePublicProps,\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {\r\n            state,\r\n            setSelectDate,\r\n            today,\r\n            getStatus,\r\n            handler,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.Y,\r\n            getSlide: (pd) => pd.year > data.value.selectYear + 19 ? SlideTransitionDirection.next : SlideTransitionDirection.prev,\r\n        })\r\n\r\n        const data = computed(() => {\r\n            const {selectDate} = state\r\n            let selectYear = selectDate.year!\r\n            selectYear = selectYear - selectYear % 20\r\n            let list: DateItemData[] = []\r\n            for (let i = selectYear; i < selectYear + 20; i++) {\r\n                const pd = today.useYear(i)\r\n                let item: DateItemData = {label: i, pd, ...getStatus(pd),}\r\n                list.push(item)\r\n            }\r\n            return {\r\n                list,\r\n                /*年份面板标题，展示列表中年份的范围*/\r\n                title: `${selectYear}-${selectYear + 19}`,\r\n                /*当前选择的年份*/\r\n                selectYear,\r\n            }\r\n        })\r\n\r\n        const methods = {\r\n            /**\r\n             * 切换上一个年份列表\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:17\r\n             */\r\n            prevYearList() {\r\n                state.slide = SlideTransitionDirection.prev\r\n                setSelectDate(today.useYear(data.value.selectYear - 20))\r\n            },\r\n            /**\r\n             *\r\n             * @author  切换下一个年份列表\r\n             * @date    2020/4/15 11:18\r\n             */\r\n            nextYearList() {\r\n                state.slide = SlideTransitionDirection.next\r\n                setSelectDate(today.useYear(data.value.selectYear + 20))\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                const Wrapper = DatePanelWrapper({\r\n                    left: <PlButton icon=\"el-icon-d-arrow-left\" mode=\"text\" size={StyleSize.mini} onClick={methods.prevYearList}/>,\r\n                    center: <span class=\"pl-date-base-panel-header-static-label\">{data.value.title}</span>,\r\n                    right: <PlButton icon=\"el-icon-d-arrow-right\" mode=\"text\" size={StyleSize.mini} onClick={methods.nextYearList}/>,\r\n                    content: (<Transition name={`pl-transition-slide-${state.slide}`}>\r\n                        <ul{...{\r\n                            class: 'pl-date-base-panel-year-list',\r\n                            key: data.value.selectYear,\r\n                            direction: \"vertical\"\r\n                        }}>\r\n                            {data.value.list.map(item => DatePanelItemWrapper({\r\n                                item,\r\n                                Node: (<li key={item.label} class=\"pl-date-base-panel-year-item\"/>),\r\n                                onClick: handler.onClick,\r\n                                onMouseenter: handler.onMouseenter,\r\n                            }))}\r\n                        </ul>\r\n                    </Transition>)\r\n                })\r\n                return <Wrapper {...{class: 'pl-date-base-panel-year', direction: props.direction,}}/>\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateItemData, DatePanelItemWrapper, DatePanelWrapper, DatePublicEmits, DatePublicProps, DateView, DefaultDateFormatString, SlideTransitionDirection} from \"../date.utils\";\r\nimport {PropType, computed, Transition} from 'vue';\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\nimport {PlButton} from \"../../button/button\";\r\nimport {StyleSize} from \"../../../use/useStyle\";\r\nimport {PlDatePanelYear} from \"./date-panel-year\";\r\nimport {useClass} from \"../../../use/useClasses\";\r\n\r\nexport const PlDatePanelMonth = designComponent({\r\n    name: 'pl-date-panel-month',\r\n    props: {\r\n        ...DatePublicProps,\r\n        view: {type: String as PropType<DateView>, default: DateView.month},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        onClick: (did: DateItemData) => true,\r\n        onMouseenter: (did: DateItemData) => true,\r\n        onMouseleaveList: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const months = computed(() => ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月',])\r\n\r\n        const {\r\n            state,\r\n            setSelectDate,\r\n            today,\r\n            getStatus,\r\n            handler,\r\n            viewModel,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.YM,\r\n            getSlide: (pd) => pd.year > state.selectDate.year ? SlideTransitionDirection.next : SlideTransitionDirection.prev,\r\n        })\r\n\r\n        const methods = {\r\n            /**\r\n             * 切换到上一年\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:12\r\n             */\r\n            prevYear() {\r\n                state.slide = SlideTransitionDirection.prev\r\n                setSelectDate(state.selectDate.useYear(state.selectDate.year - 1))\r\n            },\r\n            /**\r\n             * 切换到下一年\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:12\r\n             */\r\n            nextYear() {\r\n                state.slide = SlideTransitionDirection.next\r\n                setSelectDate(state.selectDate.useYear(state.selectDate.year + 1))\r\n            },\r\n        }\r\n\r\n        const monthList = computed(() => {\r\n            const {selectDate} = state\r\n            let list: DateItemData[] = [];\r\n            [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11].forEach(i => {\r\n                const pd = today.useYMD([selectDate.year, i, 1]);\r\n                const item = {label: months.value[i], pd, ...getStatus(pd)}\r\n                list.push(item)\r\n            })\r\n            return list\r\n        })\r\n\r\n        const quarterList = computed(() => {\r\n            const {selectDate} = state\r\n            let list: DateItemData[] = [];\r\n            [0, 1, 2, 3].forEach(i => {\r\n                const pd = selectDate.useMonthDate(i * 3, 1);\r\n                list.push({label: `Q${i + 1}`, pd, ...getStatus(pd),})\r\n            })\r\n            return list\r\n        })\r\n\r\n        const listClasses = useClass(() => [\r\n            'pl-date-base-panel-month-list',\r\n            {\r\n                'pl-date-base-panel-month-list-show-quarter': props.showQuarter,\r\n            }\r\n        ])\r\n\r\n        const externalHandler = {\r\n            /**\r\n             * 处理年份面板选择年份变化动作\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:14\r\n             */\r\n            onSelectYearChange(val?: string | string[]) {\r\n                viewModel.value = DateView.month\r\n                setSelectDate(state.selectDate.useYear(val as any as number))\r\n            },\r\n            onClick: (did: DateItemData) => {\r\n                emit.onClick(did)\r\n                handler.onClick(did)\r\n            },\r\n            onMouseenter: (did: DateItemData) => {\r\n                emit.onMouseenter(did)\r\n                handler.onMouseenter(did)\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n\r\n                const Month = DatePanelWrapper({\r\n                    left: <PlButton icon=\"el-icon-d-arrow-left\" mode=\"text\" size={StyleSize.mini} onClick={methods.prevYear}/>,\r\n                    center: <span onClick={() => viewModel.value = DateView.year}>{state.selectDate.year}</span>,\r\n                    right: <PlButton icon=\"el-icon-d-arrow-right\" mode=\"text\" size={StyleSize.mini} onClick={methods.nextYear}/>,\r\n                    bodyAttrs: {onMouseleave: emit.onMouseleaveList},\r\n                    content: (<>\r\n                        {props.showQuarter && (\r\n                            <Transition name={`pl-transition-slide-${state.slide}`}>\r\n                                <ul {...{\r\n                                    class: 'pl-date-base-panel-month-quarter-list',\r\n                                    key: state.selectDate.year!,\r\n                                    direction: 'vertical'\r\n                                }}>\r\n                                    {quarterList.value.map(item => (DatePanelItemWrapper({\r\n                                        item,\r\n                                        onClick: externalHandler.onClick,\r\n                                        onMouseenter: externalHandler.onMouseenter,\r\n                                        Node: <li class=\"pl-date-base-panel-month-item\" key={item.label}/>,\r\n                                    })))}\r\n                                </ul>\r\n                            </Transition>\r\n                        )}\r\n                        <Transition name={`pl-transition-slide-${state.slide}`}>\r\n                            <ul {...{\r\n                                class: listClasses.value,\r\n                                key: state.selectDate.year!,\r\n                                direction: 'vertical'\r\n                            }}>\r\n                                {monthList.value.map(item => (DatePanelItemWrapper({\r\n                                    item,\r\n                                    onClick: externalHandler.onClick,\r\n                                    onMouseenter: externalHandler.onMouseenter,\r\n                                    Node: <li class=\"pl-date-base-panel-month-item\" key={item.label}/>,\r\n                                })))}\r\n                            </ul>\r\n                        </Transition>\r\n                    </>)\r\n                }) as any\r\n\r\n                const Wrapper = (\r\n                    <div {...{\r\n                        class: 'pl-date-base-panel pl-date-base-panel-month-wrapper',\r\n                        direction: props.direction,\r\n                    }}>\r\n                        <Transition name={`pl-transition-slide-${viewModel.value === DateView.year ? 'prev' : 'next'}`}>\r\n                            {viewModel.value === DateView.month ? <Month {...{class: 'pl-date-base-panel-month', direction: 'horizontal'}}/> : (\r\n                                <PlDatePanelYear\r\n                                    modelValue={String(state.selectDate.year)}\r\n                                    onUpdateModelValue={externalHandler.onSelectYearChange}\r\n                                    direction=\"horizontal\"/>\r\n                            )}\r\n                        </Transition>\r\n                    </div>\r\n                ) as any\r\n\r\n                return <Wrapper/>\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateItemData, DatePanelItemWrapper, DatePanelWrapper, DatePublicEmits, DatePublicProps, DateView, DateViewSeq, DefaultDateFormatString, SlideTransitionDirection} from \"../date.utils\";\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\nimport {computed, PropType, Transition, watch} from 'vue';\r\nimport {PDate, plainDate} from \"../plainDate\";\r\nimport {PlButton} from \"../../button/button\";\r\nimport {StyleSize} from \"../../../use/useStyle\";\r\nimport {prefix} from \"../../../utils/prefix\";\r\nimport {PlList} from \"../../list/list\";\r\nimport {createEventListener} from \"../../../utils/createEventListener\";\r\nimport {PlItem} from \"../../item/item\";\r\nimport {zeroize} from \"plain-utils/string/zeroize\";\r\nimport {PlDatePanelMonth} from \"./date-panel-month\";\r\nimport {PlTimePanel} from \"../../time/panel/time-panel\";\r\n\r\nexport const PlDatePanelDate = designComponent({\r\n    name: 'pl-date-panel-date',\r\n    props: {\r\n        ...DatePublicProps,\r\n        view: {type: String as PropType<DateView>, default: DateView.date},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        // onUpdateModelValue: (val?: string, ipd?: PDate) => true,\r\n        onClick: (did: DateItemData) => true,\r\n        onMouseenter: (did: DateItemData) => true,\r\n        onSelectTime: (val: string) => true,\r\n        onSelectDateChange: (pd: PDate) => true,\r\n        onMouseleaveDateList: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {\r\n            model,\r\n            state,\r\n            today,\r\n            getStatus,\r\n            displayFormat,\r\n            valueFormat,\r\n            viewModel,\r\n            setSelectDate,\r\n            handler,\r\n            parent,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.YMD,\r\n            processPd: {\r\n                value: (pd) => {\r\n                    if (!props.datetime) return pd\r\n                    pd = pd.useHms(showTimePd.value)\r\n                    if (!!state.topState.max && state.topState.max.YMDHms < pd.YMDHms) {pd = state.topState.max}\r\n                    if (!!state.topState.min && state.topState.min.YMDHms > pd.YMDHms) {pd = state.topState.min}\r\n                    return pd\r\n                }\r\n            },\r\n        })\r\n\r\n        const utils = {\r\n            setSelectDate: (val: PDate | string | undefined, autoEmit = true) => {\r\n                let pd: PDate;\r\n                if (!val) {\r\n                    pd = today\r\n                } else {\r\n                    pd = typeof val !== \"string\" ? val : today.useValue(val)\r\n                }\r\n                setSelectDate(pd)\r\n                if (autoEmit) {\r\n                    emit.onSelectDateChange(pd)\r\n                }\r\n            }\r\n        }\r\n\r\n        const weekList = computed(() => {\r\n            const weeks = ['日', '一', '二', '三', '四', '五', '六']\r\n            return weeks.slice(props.firstWeekDay).concat(weeks.slice(0, props.firstWeekDay))\r\n        })\r\n\r\n        const dateList = computed(() => {\r\n            const {selectDate} = state\r\n            let pd = today.useYMD([selectDate.year, selectDate.month, 1])\r\n            const currentMonthFirstDate = pd.clone()\r\n            let weekDayDuration = currentMonthFirstDate.day - props.firstWeekDay\r\n            let offsetDay = weekDayDuration === 0 ? 7 : weekDayDuration > 0 ? weekDayDuration : 7 + weekDayDuration\r\n            let firstDateTime = new Date(currentMonthFirstDate.time! - (offsetDay) * 24 * 60 * 60 * 1000).getTime()\r\n            let list: DateItemData[] = []\r\n            for (let i = 0; i < 42; i++) {\r\n                pd = pd.useTime(firstDateTime)\r\n                let item = {\r\n                    label: pd.date,\r\n                    pd,\r\n                    ...getStatus(pd),\r\n                    externals: {\r\n                        isSelectMonth: pd.YM === selectDate.YM,\r\n                    },\r\n                }\r\n                list.push(item)\r\n                firstDateTime += 24 * 60 * 60 * 1000\r\n            }\r\n            return list\r\n        })\r\n\r\n        const monthAttrs = computed(() => ({\r\n            modelValue: state.selectDate.getValue(),\r\n            displayFormat,\r\n            valueFormat,\r\n            view: viewModel.value,\r\n            onChange: externalHandler.onSelectMonthChange,\r\n        }))\r\n\r\n        const defaultTimePd = computed(() => {\r\n            const config = {displayFormat: DefaultDateFormatString.Hms, valueFormat: DefaultDateFormatString.Hms}\r\n            return !!props.defaultTime ?\r\n                plainDate(props.defaultTime, config) :\r\n                plainDate.today(config.displayFormat, config.valueFormat)\r\n        })\r\n\r\n        const showTimePd = computed(() => (state.pd.vpd as PDate | null) || defaultTimePd.value)\r\n\r\n        const timeAttrs = computed(() => {\r\n            const vpd = state.pd.vpd as PDate | null\r\n            const timePd = vpd || defaultTimePd.value\r\n            const attrs = {\r\n                modelValue: plainDate.format(timePd.getDate(), DefaultDateFormatString.Hms),\r\n                displayFormat: DefaultDateFormatString.Hms,\r\n                valueFormat: DefaultDateFormatString.Hms,\r\n                max: undefined as undefined | string,\r\n                min: undefined as undefined | string,\r\n                onChange: externalHandler.onSelectTime,\r\n            }\r\n            const {max, min} = state.topState\r\n            if (!!vpd) {\r\n                /*限制最大最小值*/\r\n                if (!!max) {\r\n                    if (max.YMD <= vpd.YMD) {\r\n                        const maxPd = timePd.useHms(max)\r\n                        attrs.max = plainDate.format(maxPd.getDate(), DefaultDateFormatString.Hms)\r\n                    }\r\n                }\r\n                if (!!min) {\r\n                    if (min.YMD >= vpd.YMD) {\r\n                        const minPd = timePd.useHms(min)\r\n                        attrs.min = plainDate.format(minPd.getDate(), DefaultDateFormatString.Hms)\r\n                    }\r\n                }\r\n            }\r\n            return attrs\r\n        })\r\n\r\n        const methods = {\r\n            /*上一年*/\r\n            prevYear() {utils.setSelectDate(state.selectDate.useYear(state.selectDate.year - 1))},\r\n            /*下一年*/\r\n            nextYear() {utils.setSelectDate(state.selectDate.useYear(state.selectDate.year + 1))},\r\n            /*上一月*/\r\n            prevMonth() {utils.setSelectDate(state.selectDate.useMonthDate(state.selectDate.month - 1, 1))},\r\n            /*下一月*/\r\n            nextMonth() {utils.setSelectDate(state.selectDate.useMonthDate(state.selectDate.month + 1, 1))},\r\n            /*切换视图*/\r\n            changeView: (view: DateView) => {\r\n                if (view === viewModel.value) return\r\n                const oldSeq = DateViewSeq[viewModel.value]\r\n                const newSeq = DateViewSeq[view]\r\n                state.slide = newSeq > oldSeq ? SlideTransitionDirection.next : SlideTransitionDirection.prev\r\n                viewModel.value = view\r\n            },\r\n        }\r\n\r\n        const externalHandler = {\r\n            onSelectMonthChange: (val: string) => {\r\n                utils.setSelectDate(state.selectDate.useValue(val))\r\n                methods.changeView(DateView.date)\r\n            },\r\n            onSelectTime: (val: string) => {\r\n                if (!!parent) {return emit.onSelectTime(val)}\r\n                const timePd = defaultTimePd.value.useValue(val)\r\n                let vpd = state.pd.vpd as PDate | undefined || today\r\n                vpd = vpd.useHms(timePd)\r\n                model.value = vpd.getValue()\r\n                emit.onSelectTime(val)\r\n            },\r\n            onClick: (did: DateItemData) => {\r\n                if (!!parent) {return emit.onClick(did)}\r\n                handler.onClick(did)\r\n            },\r\n            onMouseenter: (did: DateItemData) => {\r\n                if (!!parent) {return emit.onMouseenter(did)}\r\n                handler.onMouseenter(did)\r\n            },\r\n        }\r\n\r\n        const render = {\r\n            date: () => {\r\n                const Wrapper: any = DatePanelWrapper({\r\n                    left: (<>\r\n                        <PlButton icon=\"el-icon-d-arrow-left\" mode=\"text\" size={StyleSize.mini} onClick={methods.prevYear}/>\r\n                        <PlButton icon=\"el-icon-arrow-left\" mode=\"text\" size={StyleSize.mini} onClick={methods.prevMonth}/>\r\n                    </>),\r\n                    center: (<>\r\n                        <span onClick={() => methods.changeView(DateView.year)}>{state.selectDate.year}</span>\r\n                        -\r\n                        <span onClick={() => methods.changeView(DateView.month)}>{prefix(state.selectDate.month! + 1)}</span>\r\n                        {!!props.datetime && (<span class=\"pl-date-base-panel-date-time-label\" onClick={() => methods.changeView(DateView.time)}>\r\n                        {timeAttrs.value.modelValue}\r\n                    </span>)}\r\n                    </>),\r\n                    right: (<>\r\n                        <PlButton icon=\"el-icon-arrow-right\" mode=\"text\" size={StyleSize.mini} onClick={methods.nextMonth}/>\r\n                        <PlButton icon=\"el-icon-d-arrow-right\" mode=\"text\" size={StyleSize.mini} onClick={methods.nextYear}/>\r\n                    </>),\r\n                    content: (<>\r\n                        <ul class=\"pl-date-base-panel-date-week-list\">\r\n                            {weekList.value.map(item => (\r\n                                <li class=\"pl-date-base-panel-item pl-date-base-panel-date-week-item\" key={item}>\r\n                                    <div><span>{item}</span></div>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                        <PlList class=\"pl-date-base-panel-date-list\" tag=\"ul\" {...createEventListener({onMouseleave: emit.onMouseleaveDateList})}>\r\n                            {dateList.value.map((item, index) => (\r\n                                DatePanelItemWrapper({\r\n                                    item,\r\n                                    onClick: externalHandler.onClick,\r\n                                    onMouseenter: externalHandler.onMouseenter,\r\n                                    Node: <PlItem\r\n                                        {...{\r\n                                            tag: 'li',\r\n                                            class: ['pl-date-base-panel-date-item', {'pl-date-base-panel-date-item-other-month': !item.externals.isSelectMonth,}],\r\n                                            key: item.externals.isSelectMonth ? item.pd.date : `_${index}`,\r\n                                        }}\r\n                                    />,\r\n                                })\r\n                            ))}\r\n                        </PlList>\r\n                    </>),\r\n                })\r\n                return <Wrapper {...{class: 'pl-date-base-panel-date', direction: 'horizontal', key: 'date'}}/>\r\n            },\r\n            month: () => {\r\n                return <PlDatePanelMonth {...monthAttrs.value} direction=\"horizontal\" key={viewModel.value}/>\r\n            },\r\n            time: () => {\r\n                const Wrapper: any = DatePanelWrapper({\r\n                    center: (<>\r\n                        <span onClick={() => methods.changeView(DateView.date)}>\r\n                            {showTimePd.value.year}-{zeroize(showTimePd.value.month! + 1)}-{zeroize(showTimePd.value.date!)}\r\n                        </span>\r\n                    </>),\r\n                    content: <PlTimePanel {...timeAttrs.value}/>,\r\n                })\r\n                return <Wrapper {...{class: 'pl-date-base-panel-time', direction: 'horizontal', key: 'time'}}/>\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-date-base-panel-date-wrapper pl-date-base-panel\">\r\n                    <Transition name={`pl-transition-slide-${state.slide}`}>\r\n                        {render[viewModel.value === DateView.year ? DateView.month : viewModel.value]()}\r\n                    </Transition>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateEmitRangeType, DatePublicEmits, DatePublicProps, DateView, DefaultDateFormatString} from \"../date.utils\";\r\nimport {computed, PropType} from 'vue';\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\nimport {PDate, plainDate} from \"../plainDate\";\r\nimport {PlDatePanelDate} from \"./date-panel-date\";\r\n\r\nconst DefaultTime = {\r\n    start: '00:00:00',\r\n    end: '23:59:59'\r\n}\r\n\r\nexport const PlDatePanelRange = designComponent({\r\n    name: 'pl-date-panel-range',\r\n    props: {\r\n        ...DatePublicProps,\r\n        range: {type: Boolean, default: true},\r\n        view: {type: String as PropType<DateView>, default: DateView.date}\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        mousedown: (e: MouseEvent, type: DateEmitRangeType) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {\r\n            state,\r\n            displayFormat,\r\n            valueFormat,\r\n            startModel,\r\n            endModel,\r\n            handler,\r\n            setSelectDate,\r\n            today,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.YMD,\r\n            processPd: {\r\n                range: (spd, epd) => {\r\n                    spd = spd.useHms(state.pd.spd || defaultTimePd.value.start)\r\n                    epd = epd.useHms(state.pd.epd || defaultTimePd.value.end)\r\n                    return utils.processPd(spd, epd)\r\n                }\r\n            },\r\n        })\r\n\r\n        const defaultTimePd = computed(() => {\r\n            const config = {displayFormat: DefaultDateFormatString.Hms, valueFormat: DefaultDateFormatString.Hms}\r\n            return {\r\n                start: plainDate(props.defaultStartTime || DefaultTime.start, config),\r\n                end: plainDate(props.defaultEndTime || DefaultTime.end, config),\r\n            }\r\n        })\r\n\r\n        const utils = {\r\n            processPd: (argSpd: PDate | null, argEpd: PDate | null) => {\r\n                let spd = argSpd || argEpd!\r\n                let epd = argEpd || argSpd!\r\n                const {max, min} = state.topState\r\n                const jdView = props.datetime ? 'YMDHms' : 'YMD'\r\n                if (!!max) {\r\n                    if (max[jdView] < spd[jdView]) spd = max\r\n                    if (max[jdView] < epd[jdView]) epd = max\r\n                }\r\n                if (!!min) {\r\n                    if (min[jdView] > spd[jdView]) spd = min\r\n                    if (min[jdView] > epd[jdView]) epd = min\r\n                }\r\n                return spd[jdView] > epd[jdView] ? {\r\n                    spd: epd,\r\n                    epd: spd,\r\n                } : {\r\n                    spd, epd\r\n                }\r\n            },\r\n        }\r\n\r\n        const externalHandler = {\r\n            onSelectTime: (val: string, type: DateEmitRangeType) => {\r\n                let pd = (type === DateEmitRangeType.start ? state.pd.spd : state.pd.epd) || today\r\n                pd = pd.useHms(defaultTimePd.value.start.useValue(val))\r\n                const {spd, epd} = utils.processPd(type === DateEmitRangeType.start ? pd : state.pd.spd, type === DateEmitRangeType.end ? pd : state.pd.epd)\r\n                startModel.value = spd.getDisplay()\r\n                endModel.value = epd.getDisplay()\r\n                state.range = {\r\n                    hover: null,\r\n                    value: [spd, epd],\r\n                }\r\n                emit.onUpdateModelValue(startModel.value, DateEmitRangeType.start)\r\n                emit.onUpdateModelValue(endModel.value, DateEmitRangeType.end)\r\n            }\r\n        }\r\n\r\n        const binding = computed(() => {\r\n            const startSelectDate = state.selectDate\r\n            const publicProps = Object.keys(DatePublicProps).reduce((ret, key) => {\r\n                (ret as any)[key] = (props as any)[key]\r\n                return ret\r\n            }, {})\r\n            Object.assign(publicProps, {\r\n                displayFormat: displayFormat,\r\n                valueFormat: valueFormat,\r\n            })\r\n            const start = {\r\n                ...publicProps,\r\n                selectDate: startSelectDate,\r\n                modelValue: startModel.value,\r\n                defaultTime: props.defaultStartTime || DefaultTime.start,\r\n\r\n                onSelectDateChange: setSelectDate,\r\n                onMouseenter: handler.onMouseenter,\r\n                onClick: handler.onClick,\r\n                onSelectTime: (val: string) => externalHandler.onSelectTime(val, DateEmitRangeType.start),\r\n                onMousedown: (e: MouseEvent) => emit.mousedown(e, DateEmitRangeType.start),\r\n            }\r\n            const endSelectDate = startSelectDate.useMonthDate(startSelectDate.month + 1, 1)\r\n            const end = {\r\n                ...publicProps,\r\n                selectDate: endSelectDate,\r\n                modelValue: endModel.value,\r\n                defaultTime: props.defaultEndTime || DefaultTime.end,\r\n\r\n                onSelectDateChange: (val: PDate) => setSelectDate(val.useMonthDate(val.month - 1, 1)),\r\n                onMouseenter: handler.onMouseenter,\r\n                onClick: handler.onClick,\r\n                onSelectTime: (val: string) => externalHandler.onSelectTime(val, DateEmitRangeType.end),\r\n                onMousedown: (e: MouseEvent) => emit.mousedown(e, DateEmitRangeType.end),\r\n            }\r\n            return {start, end}\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-date-base-panel pl-date-panel-date-range\">\r\n                    <PlDatePanelDate {...binding.value.start}/>\r\n                    <PlDatePanelDate {...binding.value.end}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {PDate} from \"./plainDate\";\r\nimport {useDate, UseDateEmit, UseDateJudgementView} from \"./useDate\";\r\nimport {DateItemData, DatePublicPropsType} from \"./date.utils\";\r\nimport {toArray} from \"../../utils/toArray\";\r\nimport {reactive, computed} from 'vue';\r\n\r\nexport function useDateWeek(\r\n    {\r\n        props,\r\n        emit,\r\n        getDateData,\r\n        jdView,\r\n    }: {\r\n        props: DatePublicPropsType,\r\n        emit: UseDateEmit,\r\n        getDateData: (pd: PDate) => [PDate, PDate],\r\n        jdView: UseDateJudgementView,\r\n    }) {\r\n\r\n    const useDateData = useDate({\r\n        props,\r\n        emit,\r\n        jdView,\r\n        customStatus: {\r\n            active: () => {\r\n                let ret: PDate[] = []\r\n                if (!props.range) {\r\n                    if (!!dateData.value.value) {\r\n                        dateData.value.value.forEach((item) => ret.push(...item))\r\n                    }\r\n                } else {\r\n                    if (!!dateData.value.range.value) {\r\n                        ret.push(...dateData.value.range.value.start)\r\n                        ret.push(...dateData.value.range.value.end)\r\n                    }\r\n                }\r\n                return ret\r\n            },\r\n            disabled: () => maxmin.value,\r\n            start: () => {\r\n                let ret: PDate[] = []\r\n                if (!props.range) {\r\n                    if (!!dateData.value.current) {\r\n                        ret.push(dateData.value.current[0])\r\n                    }\r\n                    if (!!dateData.value.value) {\r\n                        dateData.value.value.forEach(([spd]) => ret.push(spd))\r\n                    }\r\n                } else {\r\n                    if (!!dateData.value.range.value) {\r\n                        ret.push(dateData.value.range.value.start[0])\r\n                        ret.push(dateData.value.range.value.end[0])\r\n                    } else if (!!dateData.value.range.hover) {\r\n                        ret.push(dateData.value.range.hover.start[0])\r\n                        ret.push(dateData.value.range.hover.end[0])\r\n                    }\r\n                }\r\n                return ret\r\n            },\r\n            end: () => {\r\n                let ret: PDate[] = []\r\n                if (!props.range) {\r\n                    if (!!dateData.value.current) {\r\n                        ret.push(dateData.value.current[1])\r\n                    }\r\n                    if (!!dateData.value.value) {\r\n                        dateData.value.value.forEach(([, epd]) => ret.push(epd))\r\n                    }\r\n                } else {\r\n                    if (!!dateData.value.range.value) {\r\n                        ret.push(dateData.value.range.value.start[1])\r\n                        ret.push(dateData.value.range.value.end[1])\r\n                    } else if (!!dateData.value.range.hover) {\r\n                        ret.push(dateData.value.range.hover.start[1])\r\n                        ret.push(dateData.value.range.hover.end[1])\r\n                    }\r\n                }\r\n                return ret\r\n            },\r\n            hover: () => {\r\n                let ret: [PDate, PDate][] = []\r\n                if (!props.range) {\r\n                    if (!!dateData.value.current) {\r\n                        ret.push(dateData.value.current)\r\n                    }\r\n                    if (!!dateData.value.value) {\r\n                        dateData.value.value.forEach((item) => ret.push(item))\r\n                    }\r\n                } else {\r\n                    if (!!dateData.value.range.value) {\r\n                        ret.push([dateData.value.range.value.start[0], dateData.value.range.value.end[1]])\r\n                    } else if (!!dateData.value.range.hover) {\r\n                        ret.push([dateData.value.range.hover.start[0], dateData.value.range.hover.end[1]])\r\n                    }\r\n                }\r\n                return ret\r\n            },\r\n        },\r\n    })\r\n\r\n    const {state, handler} = useDateData\r\n\r\n    const externalState = reactive({\r\n        current: null as null | DateItemData,\r\n    })\r\n\r\n    const maxmin = computed(() => {\r\n        return {\r\n            max: !state.topState.max ? null : getDateData(state.topState.max)[1],\r\n            min: !state.topState.min ? null : getDateData(state.topState.min)[0],\r\n        }\r\n    })\r\n\r\n    const dateData = computed(() => {\r\n        return {\r\n            value: !state.pd.vpd ? null : toArray(state.pd.vpd).map(item => getDateData(item)),\r\n            range: {\r\n                hover: !state.topState.range.hover ? null : {\r\n                    start: getDateData(state.topState.range.hover[0]),\r\n                    end: getDateData(state.topState.range.hover[1]),\r\n                },\r\n                value: !(!state.topState.range.hover && (!!state.pd.spd && !!state.pd.epd)) ? null : {\r\n                    start: getDateData(state.pd.spd),\r\n                    end: getDateData(state.pd.epd),\r\n                },\r\n            },\r\n            current: !!externalState.current ? getDateData(externalState.current.pd) : null,\r\n        }\r\n    })\r\n\r\n    const externalHandler = {\r\n        onClick: (did: DateItemData) => {\r\n            const [spd] = getDateData(did.pd)\r\n            handler.onClick({...did, pd: spd})\r\n        },\r\n        onMouseenter: (did: DateItemData) => {\r\n            if (!props.range) {\r\n                externalState.current = did\r\n            } else {\r\n                handler.onMouseenter(did)\r\n            }\r\n        },\r\n        onMouseleaveDateList: () => externalState.current = null,\r\n    }\r\n\r\n    return {\r\n        useDateData,\r\n        externalHandler,\r\n    }\r\n}","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DatePublicEmits, DatePublicProps} from \"../date.utils\";\r\nimport {PlDatePanelDate} from \"./date-panel-date\";\r\nimport {computed} from 'vue';\r\nimport {PDate} from \"../plainDate\";\r\nimport {useDateWeek} from \"../useDateWeek\";\r\nimport {UseDateJudgementView} from \"../useDate\";\r\n\r\nexport const PlDatePanelWeek = designComponent({\r\n    name: 'pl-date-panel-week',\r\n    props: {\r\n        ...DatePublicProps,\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {useDateData, externalHandler} = useDateWeek({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.YMD,\r\n            getDateData: (pd: PDate) => {\r\n                let day = pd.day\r\n                let firstWeekDay = props.firstWeekDay\r\n                const weekDayDuration = day - firstWeekDay\r\n                let offsetDay = weekDayDuration === 0 ? 0 : weekDayDuration > 0 ? weekDayDuration : 7 + weekDayDuration\r\n                const spd = pd.useMonthDate(pd.month, pd.date - offsetDay)\r\n                const epd = spd.useMonthDate(spd.month, spd.date + 6)\r\n                return [spd, epd]\r\n            },\r\n        })\r\n\r\n        const dateAttrs = computed(() => ({\r\n            class: 'pl-date-panel-week',\r\n            firstWeekDay: props.firstWeekDay,\r\n            selectDate: useDateData.state.selectDate,\r\n            onMouseenter: externalHandler.onMouseenter,\r\n            onClick: externalHandler.onClick,\r\n            onMouseleaveDateList: externalHandler.onMouseleaveDateList,\r\n            onSelectDateChange: useDateData.setSelectDate,\r\n        }))\r\n\r\n        return {\r\n            render: () => <PlDatePanelDate {...dateAttrs.value}/>\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DatePublicEmits, DatePublicProps} from \"../date.utils\";\r\nimport {PlDatePanelMonth} from \"./date-panel-month\";\r\nimport {PDate} from \"../plainDate\";\r\nimport {computed} from 'vue';\r\nimport {useDateWeek} from \"../useDateWeek\";\r\nimport {UseDateJudgementView} from \"../useDate\";\r\n\r\nexport const PlDatePanelQuarter = designComponent({\r\n    name: 'pl-date-panel-quarter',\r\n    props: {\r\n        ...DatePublicProps,\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {useDateData, externalHandler} = useDateWeek({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.YM,\r\n            getDateData: (pd: PDate) => {\r\n                let month = pd.month\r\n                let quarter = Math.floor(month / 3)\r\n                const spd = pd.useMonthDate(quarter * 3, 1)\r\n                const epd = pd.useMonthDate(spd.month + 2, 1)\r\n                return [spd, epd]\r\n            },\r\n        })\r\n\r\n        const monthAttrs = computed(() => ({\r\n            class: 'pl-date-panel-quarter',\r\n            selectDate: useDateData.state.selectDate,\r\n            onMouseenter: externalHandler.onMouseenter,\r\n            onClick: externalHandler.onClick,\r\n            onMouseleaveList: externalHandler.onMouseleaveDateList,\r\n            onSelectDateChange: useDateData.setSelectDate,\r\n            showQuarter: true,\r\n        }))\r\n\r\n        return {\r\n            render: () => <PlDatePanelMonth {...monthAttrs.value}/>\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateEmitRangeType, DatePanel, DatePublicEmits, DatePublicProps, DefaultDateFormatString} from \"../date.utils\";\r\nimport {PropType, computed} from 'vue';\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {PlDatePanelRange} from \"./date-panel-range\";\r\nimport {PlDatePanelDate} from \"./date-panel-date\";\r\nimport {PlDatePanelYear} from \"./date-panel-year\";\r\nimport {PlDatePanelMonth} from \"./date-panel-month\";\r\nimport {PlDatePanelWeek} from \"./date-panel-week\";\r\nimport {PlDatePanelQuarter} from \"./date-panel-quarter\";\r\nimport {VNodeChild} from \"../../../shims\";\r\n\r\nexport const PlDatePanel = designComponent({\r\n    name: 'pl-date-panel',\r\n    props: {\r\n        ...DatePublicProps,\r\n        panel: {type: String as PropType<DatePanel>, default: DatePanel.date},\r\n        foot: {type: Function as PropType<() => VNodeChild>},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        onMousedown: (e: MouseEvent, type?: DateEmitRangeType) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue as any, emit.onUpdateModelValue)\r\n        const startModel = useModel(() => props.start, emit.onUpdateStart)\r\n        const endModel = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const handler = {\r\n            onChange: (val: string | string[] | undefined, type?: DateEmitRangeType) => {\r\n                if (!props.range || props.multiple) {\r\n                    model.value = val\r\n                } else {\r\n                    if (type === DateEmitRangeType.start) {\r\n                        startModel.value = val as string | undefined\r\n                    } else {\r\n                        endModel.value = val as string | undefined\r\n                    }\r\n                    emit.onUpdateModelValue(val, type)\r\n                }\r\n            }\r\n        }\r\n\r\n        const binding = computed(() => {\r\n            const {range, max, min, displayFormat, valueFormat, firstWeekDay, defaultTime, defaultStartTime, defaultEndTime, datetime, multiple} = props\r\n            const panel = props.panel\r\n            const value = model.value\r\n            const start = startModel.value\r\n            const end = endModel.value\r\n            const publicProps = {range, modelValue: value, start, end, max, min, firstWeekDay, defaultTime, defaultStartTime, defaultEndTime, datetime, multiple}\r\n\r\n            return {\r\n                name: {\r\n                    [DatePanel.year]: PlDatePanelYear,\r\n                    [DatePanel.month]: PlDatePanelMonth,\r\n                    [DatePanel.date]: range ? PlDatePanelRange : PlDatePanelDate,\r\n                    [DatePanel.week]: PlDatePanelWeek,\r\n                    [DatePanel.quarter]: PlDatePanelQuarter,\r\n                }[panel] as any,\r\n                attrs: {\r\n                    ...publicProps,\r\n                    onChange: handler.onChange,\r\n                    onMousedown: emit.onMousedown,\r\n                    displayFormat: displayFormat || DefaultDateFormatString[panel],\r\n                    valueFormat: valueFormat || DefaultDateFormatString[panel],\r\n                },\r\n            }\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                const {name: Component, attrs} = binding.value\r\n                return <>\r\n                    <Component {...attrs}/>\r\n                    {!!props.foot && <div class=\"pl-date-panel-foot\" onMousedown={emit.onMousedown}>\r\n                        {props.foot()}\r\n                    </div>}\r\n                </>\r\n            }\r\n        }\r\n    },\r\n})","import {createAgentGetter} from \"../popper/edit/createAgentGetter\";\r\nimport {PlDatePanel} from \"./panel/date-panel\";\r\n\r\nexport const DateServiceGetter = createAgentGetter({\r\n    name: 'date',\r\n    render: (attrs) => <PlDatePanel {...attrs}/>,\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n    },\r\n    defaultRenderAttrs: {\r\n        async onChange() {\r\n            let renderAttrs: any = this.state.option.serviceOption.renderAttrs\r\n            if (typeof renderAttrs === \"function\") renderAttrs = renderAttrs()\r\n            if (!(\r\n                renderAttrs.datetime ||\r\n                renderAttrs.multiple ||\r\n                renderAttrs.range\r\n            )) {\r\n                this.hide()\r\n            }\r\n        },\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport './date.scss'\r\nimport {DateEmitRangeType, DatePanel, DatePublicEmits, DatePublicProps, getDefaultDateFormatter} from \"./date.utils\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {StyleProps} from \"../../use/useStyle\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {DateServiceGetter} from \"./date.service\";\r\nimport {useDateTime} from \"../date-time-input/useDateTime\";\r\nimport {computed, PropType} from 'vue';\r\nimport {PDate, plainDate} from \"./plainDate\";\r\nimport {PlInput} from \"../input/input\";\r\nimport {PlInputInnerTags} from \"../input/input-inner-tags\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlDateTimeInput} from \"../date-time-input/date-time-input\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\n\r\nexport const PlDate = designComponent({\r\n    name: 'pl-date',\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n        ...DatePublicProps,\r\n        panel: {type: String as PropType<DatePanel>, default: DatePanel.date},\r\n        collapseTags: {type: Boolean, default: true},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots(['foot'], true)\r\n\r\n        const model = useModel(() => props.modelValue as any, emit.onUpdateModelValue)\r\n        const startModel = useModel(() => props.start, emit.onUpdateStart)\r\n        const endModel = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const serviceHandler = {\r\n            onChange: (val: string | undefined, type: DateEmitRangeType) => {\r\n                if (!props.range || props.multiple) {\r\n                    model.value = val\r\n                } else {\r\n                    if (type === 'start') {\r\n                        startModel.value = val\r\n                    } else {\r\n                        endModel.value = val\r\n                        if (props.panel !== DatePanel.date || !props.datetime) {\r\n                            agentState.methods.hide()\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            onMousedown: async (e: MouseEvent, type: DateEmitRangeType) => {\r\n                agentState.state.focusCounter++\r\n                await delay(0)\r\n                if (props.multiple) {\r\n                    refs.plInput!.methods.focus()\r\n                } else if (!props.range) {\r\n                    refs.valueInput!.methods.focus()\r\n                } else {\r\n                    if (type === 'start') {\r\n                        refs.startInput!.methods.focus()\r\n                    } else {\r\n                        refs.endInput!.methods.focus()\r\n                    }\r\n                }\r\n            },\r\n        }\r\n\r\n        const agentState = useEditPopperAgent({\r\n            event: {emit},\r\n            serviceGetter: DateServiceGetter,\r\n            option: {\r\n                reference: () => refs.plInput as any,\r\n                renderAttrs: () => ({\r\n                    ...(Object.keys(DatePublicProps).reduce((ret: any, key) => {\r\n                        ret[key] = (props as any)[key]\r\n                        return ret\r\n                    }, {})),\r\n                    panel: props.panel,\r\n                    modelValue: model.value,\r\n                    start: startModel.value,\r\n                    end: endModel.value,\r\n                    ...format.value,\r\n                    ...serviceHandler,\r\n                    foot: slots.foot.isExist() ? slots.foot : undefined,\r\n                })\r\n            },\r\n        })\r\n\r\n        const {\r\n            refs,\r\n            handler,\r\n            inputValue,\r\n        } = useDateTime({\r\n            value: model,\r\n            start: startModel,\r\n            end: endModel,\r\n            props,\r\n            agentState,\r\n            emit,\r\n        })\r\n\r\n        const format = computed(() => {\r\n            const {displayFormat, valueFormat} = getDefaultDateFormatter(props.panel, props.datetime)\r\n            return {\r\n                displayFormat: props.displayFormat || displayFormat,\r\n                valueFormat: props.valueFormat || valueFormat,\r\n            }\r\n        })\r\n\r\n        const today = plainDate.today(format.value.displayFormat, format.value.valueFormat)\r\n\r\n        const formatData = computed(() => {\r\n            let vpd: PDate | null = null;\r\n            let vpds: PDate[] | null = null;\r\n            let spd: PDate | null = null;\r\n            let epd: PDate | null = null;\r\n            if (props.multiple) {\r\n                let value = model.value as string[] | undefined\r\n                if (!!value) {\r\n                    vpds = value.map(item => plainDate(item, format.value))\r\n                }\r\n            } else {\r\n                if (!props.range) {\r\n                    const value = model.value as string | undefined\r\n                    if (!!value) vpd = plainDate(value, format.value)\r\n                } else {\r\n                    if (!!startModel.value) spd = plainDate(startModel.value, format.value)\r\n                    if (!!endModel.value) epd = plainDate(endModel.value, format.value)\r\n                }\r\n            }\r\n            return {vpd, vpds, spd, epd}\r\n        })\r\n\r\n        const maxmin = computed(() => {\r\n            return {\r\n                max: !props.max ? null : plainDate(props.max, format.value),\r\n                min: !props.min ? null : plainDate(props.min, format.value),\r\n            }\r\n        })\r\n\r\n        const inputAttrs = computed(() => {\r\n            const isDates = props.multiple\r\n            return {\r\n                class: [\r\n                    'pl-date',\r\n                    {\r\n                        'pl-input-custom': !isDates,\r\n                        'pl-input-tags': isDates,\r\n                    },\r\n                ],\r\n                modelValue: Array.isArray(inputValue.value) ? inputValue.value.join('') : inputValue.value,\r\n                suffixIcon: 'el-icon-date',\r\n                clearIcon: true,\r\n                isFocus: agentState.state.focusCounter > 0,\r\n                width: isDates ? undefined : null,\r\n                inputInnerTabindex: isDates ? 0 : null,\r\n                clearHandler: handler.clearHandler,\r\n\r\n                ...agentState.inputHandler,\r\n                onClickInput: handler.clickInput,\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------custom handler-------------------------------------------*/\r\n\r\n        const customHandler = {\r\n            onInputChange(val: string | undefined, type: 'value' | 'start' | 'end') {\r\n                const {spd, epd} = formatData.value\r\n                let jdView = props.datetime ? 'YMDHms' as 'YMDHms' : 'YMD' as 'YMD'\r\n                /*没有值的话，如果是单值则请控值，否则什么也不做*/\r\n                if (!val) {\r\n                    if (type === 'value') {model.value = undefined}\r\n                    return\r\n                }\r\n                let pd = today.useDisplay(val)\r\n                /*输入值格式不正确，，什么是也不做*/\r\n                if (!pd.getDayJs().isValid()) {return;}\r\n                /*检查最大最小值*/\r\n                const {max, min} = maxmin.value\r\n                if (!!max && max[jdView] < pd[jdView]) pd = max\r\n                if (!!min && min[jdView] > pd[jdView]) pd = min\r\n                switch (type) {\r\n                    case 'value':\r\n                        model.value = pd.getValue()\r\n                        break\r\n                    case 'start':\r\n                        startModel.value = pd.getDisplay()\r\n                        if (!epd || (pd[jdView] > epd[jdView])) {endModel.value = startModel.value}\r\n                        break\r\n                    case 'end':\r\n                        endModel.value = pd.getDisplay()\r\n                        if (!spd || (pd[jdView] < spd[jdView])) {startModel.value = endModel.value}\r\n                        break\r\n                }\r\n            },\r\n            onClickItemCloseIcon(index: number, e: MouseEvent) {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                if (!agentState.editComputed.value.editable) {\r\n                    return\r\n                }\r\n                const value = model.value as string[]\r\n                value.splice(index, 1)\r\n                model.value = [...value]\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <PlInput ref=\"plInput\"{...inputAttrs.value as any}>\r\n                        <div {...{class: 'pl-input-custom-inner', range: props.range}}>\r\n                            {props.multiple && (<PlInputInnerTags\r\n                                data={formatData.value.vpds || []}\r\n                                collapseTags={props.collapseTags}\r\n                                v-slots={{\r\n                                    default: ({item, index}: { item: PDate, index: number }) => (<>\r\n                                        <span>{item.getDisplay()}</span>\r\n                                        <PlIcon icon=\"el-icon-close\" {...{onClick: (e: MouseEvent) => customHandler.onClickItemCloseIcon(index, e)}}/>\r\n                                    </>)\r\n                                }}\r\n                            />)}\r\n\r\n                            {!props.multiple && (\r\n                                !props.range ? (<PlDateTimeInput\r\n                                        modelValue={formatData.value.vpd ? formatData.value.vpd.getDisplay() : undefined}\r\n                                        ref=\"valueInput\"\r\n                                        {...{onChange: (val: string) => customHandler.onInputChange(val, 'value')}}\r\n                                        displayFormat={format.value.displayFormat}\r\n                                        onFocus={handler.customInputFocus}\r\n                                        onBlur={handler.customInputBlur}\r\n                                    />) :\r\n                                    <>\r\n                                        <PlDateTimeInput\r\n                                            width=\"100\"\r\n                                            modelValue={formatData.value.spd ? formatData.value.spd.getDisplay() : undefined}\r\n                                            ref=\"startInput\"\r\n                                            displayFormat={format.value.displayFormat}\r\n                                            {...{onChange: (val: string) => customHandler.onInputChange(val, 'start')}}\r\n                                            onFocus={handler.customInputFocus}\r\n                                            onBlur={handler.customInputBlur}\r\n                                        />\r\n                                        <span>~</span>\r\n                                        <PlDateTimeInput\r\n                                            width=\"100\"\r\n                                            modelValue={formatData.value.epd ? formatData.value.epd.getDisplay() : undefined}\r\n                                            ref=\"endInput\"\r\n                                            {...{onChange: (val: string) => customHandler.onInputChange(val, 'end')}}\r\n                                            displayFormat={format.value.displayFormat}\r\n                                            onFocus={handler.customInputFocus}\r\n                                            onBlur={handler.customInputBlur}\r\n                                        />\r\n                                    </>\r\n                            )}\r\n                        </div>\r\n                    </PlInput>\r\n                )\r\n            }\r\n        }\r\n    },\r\n}, {\r\n    plainDate,\r\n})","export const enum FormLabelAlign {\r\n    left = 'left',\r\n    center = 'center',\r\n    right = 'right',\r\n}\r\n\r\nexport const enum FormContentAlign {\r\n    'flex-start' = 'flex-start',\r\n    'flex-end' = 'flex-end',\r\n    'center' = 'center',\r\n    'space-around' = 'space-around',\r\n    'space-between' = 'space-between',\r\n    'space-evenly' = 'space-evenly',\r\n}\r\n\r\nexport const enum FormValidateMode {\r\n    form = 'form',\r\n    table = 'table',\r\n}","/**\r\n * 校验触发动作类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 15:41\r\n */\r\n\r\n/**\r\n * 校验触发器类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 22:02\r\n */\r\nimport {toArray} from \"../../utils/toArray\";\r\n\r\nexport enum FormValidateTrigger {\r\n    change = 'change',\r\n    blur = 'blur',\r\n    all = 'all',\r\n}\r\n\r\n/**\r\n * 校验的值类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 22:02\r\n */\r\nexport enum FormValueType {\r\n    string = 'string',\r\n    number = 'number',\r\n    boolean = 'boolean',\r\n    array = 'array',\r\n}\r\n\r\n/**\r\n * form以及formItem的rules属性类型\r\n * @author  韦胜健\r\n * @date    2020/7/18 12:39\r\n */\r\nexport interface FormRule {\r\n\r\n    field?: string | string[]                                                               // 绑定的字段\r\n    label?: string                                                                          // form item 的文本\r\n    options?: any | any[]                                                                   // 选项值校验\r\n\r\n    max?: number,                                                                           // 最大长度（字符串），最大值（数字），最大长度（数组）\r\n    min?: number,                                                                           // 最小长度（字符串），最小值（数字），最小长度（数组）\r\n    message?: string,                                                                       // 检验事变提示信息\r\n    pattern?: RegExp,                                                                       // 校验的正则表达式\r\n    required?: boolean,                                                                     // 是否必填\r\n    transform?: (val?: any) => any,                                                         // 将字段值转换成目标值之后校验\r\n    type?: FormValueType,                                                                   // 数据的类型\r\n    trigger?: FormValidateTrigger,                                                          // 触发器\r\n    validator?: (rule: FormRule, value: any, formData: object) => void | string | Promise<void | string>,// 自定义校验器\r\n\r\n}\r\n\r\n/**\r\n * pl-form组件 rules 属性对象类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 15:59\r\n */\r\nexport type FormComponentRules = FormRule[] | ({ [field: string]: FormRule | FormRule[] })\r\n\r\n/**\r\n * 关联校验字段\r\n * @author  韦胜健\r\n * @date    2020/12/28 12:07\r\n */\r\nexport type FormAssociateFields = Record<string, string | string[]>\r\n\r\n/**\r\n * pl-form-item 组件rules属性对象类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 15:59\r\n */\r\nexport interface FormComponentItemRules {\r\n    label?: string,\r\n    field?: string | string[]\r\n    required?: boolean,\r\n    rules?: FormRule | FormRule[]\r\n}\r\n\r\n/**\r\n * 校验单个字段的结果\r\n * @author  韦胜健\r\n * @date    2020/12/12 22:24\r\n */\r\nexport interface FormValidateResult {\r\n    label?: string,\r\n    message: string,\r\n    rule: FormRule,\r\n    value: any,\r\n}\r\n\r\n/**\r\n * 校验结果\r\n * @author  韦胜健\r\n * @date    2020/12/12 22:24\r\n */\r\nexport interface FormValidateResultMap {[k: string]: FormValidateResult | undefined}\r\n\r\n/**\r\n * 表单校验工具对象\r\n * @author  韦胜健\r\n * @date    2020/12/13 14:53\r\n */\r\nexport const FormValidateUtils = {\r\n    getValueByField(field: string, formData: Record<string, any> | undefined | null, transform?: (val: any) => any) {\r\n        if (!formData) {\r\n            return null\r\n        }\r\n        let val: any;\r\n        if (field.indexOf('.') === -1) {\r\n            val = formData[field]\r\n        } else {\r\n            const fields = field.split('.')\r\n            let index = 0, len = fields.length\r\n            let value = formData[fields[index]]\r\n\r\n            while (index < len - 1 && value != null) {\r\n                value = value[fields[++index]]\r\n            }\r\n            val = index == len - 1 ? value : null\r\n        }\r\n        return !transform ? val : transform(val)\r\n    },\r\n    /**\r\n     * 获取max校验失败信息\r\n     * @author  韦胜健\r\n     * @date    2020/12/13 14:54\r\n     */\r\n    getMaxMessage({value, max, type,}: { value: any, max: number, type?: FormValueType, }) {\r\n        if (Array.isArray(value)) {\r\n            return `最多选择 ${max} 个选项`\r\n        }\r\n        if (type == \"number\") {\r\n            return `最大值 ${max}`\r\n        }\r\n        return `最大文本长度 ${max} 个字符`\r\n    },\r\n    /**\r\n     * 获取min校验失败信息\r\n     * @author  韦胜健\r\n     * @date    2020/12/13 14:54\r\n     */\r\n    getMinMessage({value, min, type,}: { value: any, min: number, type?: FormValueType, }) {\r\n        if (Array.isArray(value)) {\r\n            return `最少选择 ${min} 个选项`\r\n        }\r\n        if (type == \"number\") {\r\n            return `最小值 ${min}`\r\n        }\r\n        return `最小文本长度 ${min} 个字符`\r\n    },\r\n    /**\r\n     * 获取有效值列表。如果值不存在则返回null\r\n     * @author  韦胜健\r\n     * @date    2020/12/13 14:55\r\n     */\r\n    getListValue<T>(val: T | T[] | null | undefined): T[] | null {\r\n        if (!val) {\r\n            return null\r\n        }\r\n        return Array.isArray(val) ? val : [val]\r\n    },\r\n    /**\r\n     * 执行校验规则，如果函数参数中有field，则只校验一个字段,否则校验rule中所有的字段\r\n     * @author  韦胜健\r\n     * @date    2020/12/13 14:56\r\n     * @param   rule                要校验的FormRule\r\n     * @param   formData            表单数据对象\r\n     * @param   fieldToLabel        字段映射label的对象\r\n     * @param   field               校验的字段\r\n     */\r\n    async checkRule({rule, formData, fieldToLabel, field}: { formData: Record<string, any> | null, rule: FormRule, fieldToLabel: Record<string, string>, field?: string }): Promise<null | FormValidateResult> {\r\n        const {\r\n            transform, type,\r\n            label, message,\r\n            required, options, max, min, pattern, validator\r\n        } = rule\r\n\r\n        let validList: { field: string, value: any }[] | null = null;\r\n\r\n        /*如果函数参数中有field，则只校验一个字段,否则校验rule中所有的字段*/\r\n        if (!!field) {\r\n            /*校验一个字段*/\r\n            validList = [{field, value: FormValidateUtils.getValueByField(field, formData, transform)}]\r\n        } else {\r\n            /*校验rule中所有的字段*/\r\n            const fields = FormValidateUtils.getListValue(rule.field)\r\n            if (!!fields) {\r\n                validList = fields.map(f => ({field: f, value: FormValidateUtils.getValueByField(f, formData, transform)}))\r\n            }\r\n        }\r\n        if (!validList || validList.length === 0) {\r\n            return null\r\n        }\r\n\r\n        /*---------------------------------------required 必填校验-------------------------------------------*/\r\n\r\n        if (required) {\r\n            const invalidValues = validList.filter(({value}) => {\r\n\r\n                //校验不通过才返回true\r\n\r\n                if (value == null) {\r\n                    return true\r\n                }\r\n                if (Array.isArray(value) && value.length === 0) {\r\n                    return true\r\n                }\r\n                if (typeof value === 'string') {\r\n                    return !value.trim()\r\n                } else {\r\n                    return false\r\n                }\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || '必填，不能为空！',\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------options 选项值校验-------------------------------------------*/\r\n\r\n        if (options != null) {\r\n            const optionList = Array.isArray(options) ? options : [options]\r\n            const invalidValues = validList.filter(({value}) => {\r\n\r\n                //校验不通过才返回true\r\n\r\n                if (value == null) {\r\n                    /*没有值，不校验*/\r\n                    return false\r\n                }\r\n                if (!Array.isArray(value)) {\r\n                    /*不是数组，判断值是否存在数组中*/\r\n                    const isExist = optionList.indexOf(value) > -1\r\n                    if (!isExist) {\r\n                        return true\r\n                    }\r\n                } else {\r\n                    /*是数组，判断value数组中是否存在值，不符合options*/\r\n                    return !!(value as any[]).find(v => optionList.indexOf(v) === -1)\r\n                }\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || '不符合特定选项！',\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------max-------------------------------------------*/\r\n\r\n        if (max != null) {\r\n            const invalidValues = validList.filter(({value, field}) => {\r\n\r\n                //校验不通过才返回true\r\n\r\n                if (value == null) {\r\n                    /*没有值，不校验*/\r\n                    return false\r\n                }\r\n                if (Array.isArray(value)) {\r\n                    return value.length > max\r\n                }\r\n                if (type == \"number\" || typeof value === \"number\") {\r\n                    value = typeof value === \"number\" ? value : Number(value)\r\n                    return value > max\r\n                }\r\n                // string\r\n                return String(value).length > max\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || FormValidateUtils.getMaxMessage({value, max, type}),\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------min-------------------------------------------*/\r\n\r\n        if (min != null) {\r\n            const invalidValues = validList.filter(({value}) => {\r\n\r\n                //校验不通过才返回true\r\n\r\n                if (value == null) {\r\n                    /*没有值，不校验*/\r\n                    return false\r\n                }\r\n                if (Array.isArray(value)) {\r\n                    return value.length < min\r\n                }\r\n                if (type == \"number\" || typeof value === \"number\") {\r\n                    value = typeof value === \"number\" ? value : Number(value)\r\n                    return value < min\r\n                }\r\n                // string\r\n                return String(value).length < min\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || FormValidateUtils.getMinMessage({value, min, type}),\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------pattern-------------------------------------------*/\r\n\r\n        if (!!pattern) {\r\n            const invalidValues = validList.filter(({value}) => {\r\n                if (value == null) {\r\n                    /*没有值，不校验*/\r\n                    return false\r\n                }\r\n                return !pattern.test(value)\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || '不符合特定模式',\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------validator-------------------------------------------*/\r\n\r\n        if (!!validator) {\r\n            const validateResultList = (await Promise.all(validList.map(async ({field, value}) => {\r\n                let message: string | void;\r\n                try {\r\n                    message = await validator(rule, value, formData || {})\r\n                } catch (e) {\r\n                    message = !!e.toString ? e.toString() : e\r\n                }\r\n                if (!message) {\r\n                    return null\r\n                }\r\n                return {\r\n                    rule,\r\n                    message,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                }\r\n            }))).filter(Boolean) as FormValidateResult[]\r\n            if (validateResultList.length > 0) {\r\n                return validateResultList[0]!\r\n            }\r\n        }\r\n\r\n        return null\r\n    }\r\n}\r\n\r\n/**\r\n * validateField校验返回结果\r\n * @author  韦胜健\r\n * @date    2020/12/16 11:49\r\n */\r\nexport type FormValidateFieldReturn = FormValidateResult | undefined\r\n/**\r\n * validate校验返回结果\r\n * @author  韦胜健\r\n * @date    2020/12/16 11:49\r\n */\r\nexport type FormValidateReturn = { validateResultMap: FormValidateResultMap, validateMessage: string | undefined, validateResult?: FormValidateResult }\r\n\r\n/**\r\n * 获取总的FormRules数组\r\n * @author  韦胜健\r\n * @date    2020/12/12 21:45\r\n */\r\nexport function formatFormRules(\r\n    formComponentRules?: FormComponentRules,\r\n    formItems?: FormComponentItemRules[]\r\n) {\r\n\r\n    /*field 转化为 label的映射*/\r\n    let fieldToLabel = {} as Record<string, string>\r\n    /*返回值，总的校验规则数组*/\r\n    let resultRules: FormRule[] = []\r\n\r\n    if (!!formItems && formItems.length > 0) {\r\n        formItems.forEach(formItem => {\r\n            const {label, field, required, rules} = formItem\r\n            const fields = FormValidateUtils.getListValue(field)\r\n            if (!!fields) {\r\n                !!label && (fields.forEach(item => fieldToLabel[item] = label));\r\n                required && (resultRules.push({field, label, required: true,}))\r\n            } else {\r\n                if (required) {\r\n                    /*如果 form-item设置了required，但是没有设置field，这里给出警告！*/\r\n                    console.error(\"form-item's props.field is required when props.required is true!\")\r\n                }\r\n            }\r\n            const formItemRules = FormValidateUtils.getListValue(rules)\r\n            if (!!formItemRules && formItemRules.length > 0) {\r\n                formItemRules.forEach(r => {resultRules.push({...r, label: r.label || label, field: r.field || field,})})\r\n            }\r\n        })\r\n    }\r\n\r\n    if (!!formComponentRules) {\r\n        let formComponentRulesList: FormRule[] = []\r\n        if (Array.isArray(formComponentRules)) {\r\n            formComponentRulesList = formComponentRules\r\n        } else {\r\n            Object.keys(formComponentRules).forEach(f => {\r\n                const value = FormValidateUtils.getListValue(formComponentRules[f])\r\n                !!value && value.forEach(r => formComponentRulesList.push({...r, field: r.field || f}))\r\n            })\r\n        }\r\n        resultRules.push(...formComponentRulesList)\r\n    }\r\n\r\n    async function validateField(\r\n        {\r\n            field,\r\n            formData,\r\n            trigger,\r\n            formValidateResultMap,\r\n            associateFields,\r\n        }: {\r\n            field: string,\r\n            formData: Record<string, any> | null,\r\n            trigger: FormValidateTrigger,\r\n            formValidateResultMap: FormValidateResultMap,\r\n            associateFields?: FormAssociateFields,\r\n        }): Promise<FormValidateFieldReturn> {\r\n\r\n        if (!!associateFields && !!associateFields[field]) {\r\n            toArray(associateFields[field]).forEach(f => validateField({\r\n                field: f,\r\n                formData,\r\n                trigger: FormValidateTrigger.all,\r\n                formValidateResultMap,\r\n            }))\r\n        }\r\n\r\n        const rules = resultRules.filter(r => {\r\n            const matchField = Array.isArray(r.field) ? r.field.indexOf(field) > -1 : r.field == field\r\n            if (!matchField) {\r\n                return false\r\n            }\r\n            if (trigger === FormValidateTrigger.all) {\r\n                return trigger\r\n            }\r\n            return (r.trigger || FormValidateTrigger.change) === trigger\r\n        })\r\n\r\n        if (rules.length > 0) {\r\n            const validateResult = (await Promise.all(rules.map(r => FormValidateUtils.checkRule({rule: r, formData, fieldToLabel, field}))))\r\n                .filter(Boolean) as FormValidateResult[];\r\n            formValidateResultMap[field] = validateResult[0]\r\n            return formValidateResultMap[field]\r\n        } else {\r\n            /*\r\n            *   如果没有可用的校验规则，则什么事也不做，不能清理掉现有的校验结果，比如\r\n            *   比如 没有change校验，但是只有blur校验。如果blur先执行。在校验change的时候会把blur的检验结果覆盖掉\r\n            */\r\n            return\r\n        }\r\n    }\r\n\r\n    async function validate(formData: Record<string, any> | null): Promise<FormValidateReturn> {\r\n        const validateResultList = (await Promise.all(resultRules.map(r => FormValidateUtils.checkRule({rule: r, formData, fieldToLabel}))))\r\n            .filter(Boolean) as FormValidateResult[];\r\n        const validateResultMap = validateResultList.reduce((prev, next) => {\r\n            const {rule: {field}} = next\r\n            const fields = FormValidateUtils.getListValue(field)\r\n            if (!!fields) {\r\n                fields.forEach(f => prev[f] = next)\r\n            }\r\n            return prev\r\n        }, {} as FormValidateResultMap)\r\n        let validateMessage: string | undefined;\r\n        let validateResult: FormValidateResult | undefined;\r\n        if (validateResultList.length > 0) {\r\n            const {label, message} = validateResultList[0]!\r\n            validateMessage = `“${label}” 校验不通过，${message}`\r\n            validateResult = validateResultList[0]\r\n        }\r\n        return {\r\n            validateResultMap,\r\n            validateResult,\r\n            validateMessage,\r\n        }\r\n    }\r\n\r\n    const fieldToRequired = resultRules.reduce((prev, next) => {\r\n        if (!!next.required) {\r\n            const fields = FormValidateUtils.getListValue(next.field)!\r\n            fields.forEach(f => prev[f] = true)\r\n        }\r\n        return prev\r\n    }, {} as Record<string, boolean>)\r\n\r\n    return {\r\n        /*通过field映射label文本*/\r\n        fieldToLabel,\r\n        /*所有的校验规则*/\r\n        resultRules,\r\n        /*通过field映射required*/\r\n        fieldToRequired,\r\n        methods: {\r\n            /*校验单个字段*/\r\n            validateField,\r\n            /*校验所有规则*/\r\n            validate,\r\n        },\r\n    }\r\n}\r\n\r\nexport type FormValidate = ReturnType<typeof formatFormRules>","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlDate} from \"./date\";\r\nimport {PlDatePanelYear} from \"./panel/date-panel-year\";\r\nimport {PlDatePanelMonth} from \"./panel/date-panel-month\";\r\nimport {PlDatePanelDate} from \"./panel/date-panel-date\";\r\nimport {PlDatePanelRange} from \"./panel/date-panel-range\";\r\nimport {PlDatePanelWeek} from \"./panel/date-panel-week\";\r\nimport {PlDatePanelQuarter} from \"./panel/date-panel-quarter\";\r\n\r\nexport default createComponentPlugin(PlDate, {\r\n    exposeComponents: {\r\n        PlDatePanelYear,\r\n        PlDatePanelMonth,\r\n        PlDatePanelDate,\r\n        PlDatePanelRange,\r\n        PlDatePanelWeek,\r\n        PlDatePanelQuarter,\r\n    }\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, StyleStatus, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useNumber} from \"../../use/useNumber\";\r\nimport {FormCollector} from \"./form\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {reactive, onMounted, computed, PropType, ComputedRef} from 'vue';\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {FormContentAlign, FormLabelAlign} from \"./form.utils\";\r\nimport {FormComponentItemRules, FormRule, FormValidateUtils} from \"./form.validate\";\r\n\r\nexport const PlFormItem = designComponent({\r\n    name: 'pl-form-item',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        field: {type: [String, Array] as PropType<string | string[]>},      // 绑定的属性字段名\r\n        rules: {type: [Array, Object] as PropType<FormRule | FormRule[]>},  // 校验规则\r\n        required: {type: Boolean},                                          // 不能为空\r\n\r\n        label: {type: String, default: ' '},                                // 显示文本\r\n        labelWidth: {type: [String, Number]},                               // 显示文本宽度\r\n        column: {type: [String, Number], default: 1},                       // 多列表单的列数\r\n        block: {type: Boolean},                                             // 占用一行\r\n        colon: {type: Boolean, default: null},                              // label的冒号\r\n        labelAlign: {type: String as PropType<FormLabelAlign>},             // label 对齐方式\r\n        contentAlign: {type: String as PropType<FormContentAlign>},         // content 对齐方式\r\n    },\r\n    emits: {\r\n        onBlur: () => true,\r\n        onChange: () => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit}}) {\r\n\r\n        const form = FormCollector.child()\r\n        const {slots} = useSlots(['label', 'suffix'], true)\r\n        const {refs} = useRefs({label: HTMLDivElement,})\r\n        const {styleComputed} = useStyle({adjust: ret => {!!invalidate.value && (ret.status = StyleStatus.error)}})\r\n\r\n        const handler = {\r\n            onEditChange: () => form.validateHandler.onEditChange(props.field),\r\n            onEditBlur: () => form.validateHandler.onBlurChange(props.field),\r\n        }\r\n        useEdit({\r\n            adjust: ret => {\r\n                ret.onChange = handler.onEditChange\r\n                ret.onBlur = handler.onEditBlur\r\n\r\n                if (!!form.props.disabledFields && !!props.field) {\r\n                    const fields = FormValidateUtils.getListValue(props.field)\r\n                    if (!!fields && !!fields.find(f => form.props.disabledFields![f])) {\r\n                        ret.disabled = true\r\n                    }\r\n                }\r\n                if (!!form.props.readonlyFields && !!props.field) {\r\n                    const fields = FormValidateUtils.getListValue(props.field)\r\n                    if (!!fields && !!fields.find(f => form.props.disabledFields![f])) {\r\n                        ret.readonly = true\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const {numberState} = useNumber(props, ['labelWidth', 'column'])\r\n        const state = reactive({\r\n            /*当前 form item的label宽度*/\r\n            labelWidth: 0,\r\n        })\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        /*是否显示冒号*/\r\n        const colon = computed(() => props.colon == null ? form.props.colon : props.colon)\r\n        /*label的目标宽度*/\r\n        const labelWidth = computed(() => numberState.labelWidth || form.numberState.labelWidth)\r\n        /*是否设置了label宽度*/\r\n        const staticWidth = computed(() => !!labelWidth.value)\r\n        /*是否存在label节点*/\r\n        const hasLabel = computed(() => !!props.label || slots.label.isExist())\r\n\r\n        const classes = useClass(() => [\r\n            'pl-form-item',\r\n            `pl-form-item-size-${styleComputed.value.size}`,\r\n            `pl-form-item-label-align-${props.labelAlign || form.childState.align.label}`,\r\n            `pl-form-item-content-align-${props.contentAlign || form.childState.align.content}`,\r\n            {\r\n                'pl-form-item-static-width': staticWidth.value,\r\n                'pl-form-item-required': isRequired.value && !form.props.hideRequiredAsterisk,\r\n                'pl-form-item-invalidate': !!invalidate.value && !form.props.hideValidateMessage,\r\n            }\r\n        ])\r\n        const isBlock = computed(() => {\r\n            const flag = !!props.block || numberState.column === form.numberState.column\r\n            return {\r\n                flag,\r\n                column: flag ? form.numberState.column : numberState.column\r\n            }\r\n        })\r\n\r\n        /*form-item的宽度，与下一个form-item的gutter*/\r\n        const styles = useStyles(style => {\r\n            if (form.props.inline) {\r\n                return style\r\n            }\r\n            const {col} = form.childState.width\r\n            const {column} = isBlock.value\r\n            const {columnGutter} = form.numberState\r\n            if (!!col) {\r\n                style.width = unit((col + columnGutter) * column)\r\n            }\r\n            if (form.numberState.column > 1) {\r\n                style.paddingRight = unit(form.numberState.columnGutter)\r\n            }\r\n        })\r\n\r\n        /*label节点宽度，如果有设置labelWidth的话*/\r\n        const labelStyles = useStyles(style => {\r\n            if (form.props.inline) {\r\n                return style\r\n            }\r\n            if (!!labelWidth.value) {\r\n                style.width = unit(labelWidth.value)\r\n            }\r\n        })\r\n\r\n        /*如果没有label的话，body应该占用百分百宽度，否则宽度为占用列数x列宽 - label宽度*/\r\n        const bodyStyles = useStyles(style => {\r\n            if (form.props.inline) {\r\n                return style\r\n            }\r\n            if (!hasLabel.value) {\r\n                style.width = '100%'\r\n            } else {\r\n                const {label, col} = form.childState.width\r\n                if (!!label) {\r\n                    const {columnGutter} = form.numberState\r\n                    const {column} = isBlock.value\r\n                    style.width = unit(col! * column + (column - 1) * columnGutter - label)\r\n                }\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------hook-------------------------------------------*/\r\n\r\n        /**\r\n         * 如果没有写死labelWidth，这mounted的时候计算label节点宽度\r\n         * @author  韦胜健\r\n         * @date    2020/12/11 21:32\r\n         */\r\n        if (!staticWidth.value && hasLabel.value) {\r\n            onMounted(() => {\r\n                state.labelWidth = refs.label.scrollWidth\r\n            })\r\n        }\r\n\r\n        /*---------------------------------------validate-------------------------------------------*/\r\n\r\n        const formItemComponentRules = computed((): FormComponentItemRules => ({\r\n            label: props.label,\r\n            field: props.field,\r\n            required: props.required,\r\n            rules: props.rules,\r\n        }))\r\n\r\n        /*当前是否必填校验*/\r\n        const isRequired = computed(() => {\r\n            const {fieldToRequired} = form.childState.formValidate\r\n            const fields = FormValidateUtils.getListValue(props.field)\r\n            if (!fields) {\r\n                return false\r\n            }\r\n            return !!fields.find(f => !!fieldToRequired[f])\r\n        }) as ComputedRef<boolean>\r\n\r\n        /*当前是否校验不通过*/\r\n        const invalidate = computed(() => {\r\n            const {validateResultMap} = form.childState\r\n            const fields = FormValidateUtils.getListValue(props.field)\r\n            if (!fields) {\r\n                return null\r\n            }\r\n            const invalidField = fields.find(f => !!validateResultMap[f])\r\n            return !invalidField ? null : validateResultMap[invalidField]!\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                state,\r\n                formItemComponentRules,\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {(!!props.label || slots.label.isExist()) && (\r\n                        <div class=\"pl-form-item-label\" style={labelStyles.value} ref=\"label\">\r\n                            {slots.label(props.label)} {!!props.label && !!props.label.trim() && !!colon.value && ':'}\r\n                        </div>\r\n                    )}\r\n                    <div class=\"pl-form-item-body\" style={bodyStyles.value}>\r\n                        {slots.default()}\r\n                        {slots.suffix.isExist() && (\r\n                            <div class=\"pl-form-item-suffix\">\r\n                                {slots.suffix()}\r\n                            </div>\r\n                        )}\r\n                        {!!invalidate.value && !form.props.hideValidateMessage && (<div class=\"pl-form-item-message\">\r\n                            {invalidate.value.message}\r\n                        </div>)}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import './form.scss'\r\nimport {computed, ComputedRef, onMounted, PropType, reactive, watch} from 'vue'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {FormContentAlign, FormLabelAlign, FormValidateMode} from \"./form.utils\";\r\nimport {useNumber} from \"../../use/useNumber\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {PlFormItem} from './form-item'\r\nimport {FormAssociateFields, formatFormRules, FormComponentRules, FormValidate, FormValidateResultMap, FormValidateTrigger, FormValidateUtils} from \"./form.validate\";\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\nimport {$$notice} from \"../notice-service\";\r\n\r\nexport const PlForm = designComponent({\r\n    name: 'pl-form',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n        disabledFields: {type: Object as PropType<Record<string, boolean>>},// 禁用的字段\r\n        readonlyFields: {type: Object as PropType<Record<string, boolean>>},// 只读的字段\r\n\r\n        modelValue: {type: Object},                                         // model绑定表单对象\r\n        rules: {type: Object as PropType<FormComponentRules>},              // 表单验证规则\r\n        validateResult: {type: Object},                                     // 校验结果信息\r\n        validateMode: {type: String as PropType<FormValidateMode>, default: FormValidateMode.form},// 校验模式\r\n        associateFields: {type: Object as PropType<FormAssociateFields>},   // 校验关联字段，一个对象，key为字段名，value为字段字符串或者字符串数组。当key变化时，会自动校验value中所列的字段\r\n\r\n        hideRequiredAsterisk: {type: Boolean, default: null},               // 是否隐藏文本旁边的红色必填星号\r\n        hideValidateMessage: {type: Boolean, default: null},                // 是否隐藏校验失败的信息\r\n        validateOnRulesChange: {type: Boolean, default: null},              // 是否当rules属性改变之后立即触发一次验证\r\n\r\n        column: {type: [String, Number], default: 1},                       // 多列表单的列数\r\n        labelWidth: {type: [String, Number]},                               // formItem 文本宽度\r\n        contentWidth: {type: [String, Number]},                             // formItem 内容宽度\r\n\r\n        labelAlign: {type: String as PropType<FormLabelAlign>},             // 文本对其方式\r\n        contentAlign: {type: String as PropType<FormContentAlign>, default: FormLabelAlign.left},// content 对齐方式\r\n        width: {type: [String, Number], default: '100%'},                   // 表单宽度\r\n        centerWhenSingleColumn: {type: Boolean},                            // 单列的时候会使得表单内容居中，表单文本标题不计宽度，设置该属性为true则使得文本宽度参与计算居中\r\n        colon: {type: Boolean, default: true},                              // label的冒号\r\n        columnGutter: {type: [Number, String], default: 16},                // 列之间的间距\r\n        inline: {type: Boolean},                                            // 行内表单\r\n    },\r\n    emits: {\r\n        /*字段值变化事件*/\r\n        onFieldValueChange: (field: string, newVal: any, oldVal: any) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        /*收集的子组件*/\r\n        const items = FormCollector.parent()\r\n\r\n        useStyle();\r\n        useEdit({adjust: data => {data.loading = false}});\r\n        const {numberState} = useNumber(props, ['labelWidth', 'contentWidth', 'column', 'width', 'columnGutter'])\r\n\r\n        /*---------------------------------------compute-------------------------------------------*/\r\n\r\n        /*form-item中最大的label节点宽度*/\r\n        const maxLabelWidth = computed(() => items.reduce((prev: number, next) => Math.max(next.state.labelWidth, prev), 0)) as ComputedRef<number>\r\n\r\n        /*form-item所需要的对齐方式信息*/\r\n        const align = computed(() => {\r\n            return {\r\n                label: props.labelAlign || (numberState.column === 1 ? FormLabelAlign.right : FormLabelAlign.left),\r\n                content: props.contentAlign,\r\n            }\r\n        })\r\n\r\n        /*form-item所需要的宽度信息*/\r\n        const width = computed(() => {\r\n            /*\r\n            *  如果没有设置contentWidth\r\n            *  如果是单列，默认contentWidth是400\r\n            *  多了则是220\r\n            */\r\n            const content = !!numberState.contentWidth ? numberState.contentWidth : numberState.column === 1 ? 400 : 220\r\n            const label = numberState.labelWidth || maxLabelWidth.value\r\n\r\n            if (!!label) {\r\n                return {\r\n                    col: label + content,\r\n                    label,\r\n                    content,\r\n                }\r\n            } else {\r\n                return {\r\n                    content,\r\n                }\r\n            }\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-form',\r\n            `pl-form-column-${numberState.column}`,\r\n            {\r\n                'pl-form-inline': props.inline,\r\n            }\r\n        ])\r\n\r\n        /*设置form宽度*/\r\n        const styles = useStyles((style) => {\r\n            if (props.inline) {\r\n                return style\r\n            }\r\n            style.width = unit(props.width)\r\n        })\r\n\r\n        /*body节点宽度。如果是单列，则左偏移 label/2 个像素，确保content在屏幕中间*/\r\n        const bodyStyles = useStyles(style => {\r\n            if (props.inline) {\r\n                return style\r\n            }\r\n            const {label, col} = width.value\r\n            if (!label) {return}\r\n            const {column, columnGutter} = numberState\r\n            style.width = unit((col! + columnGutter) * column)\r\n            style.left = `${(!props.centerWhenSingleColumn && column === 1) ? -label! / 2 : 0}px`\r\n        })\r\n        /*---------------------------------------validate-------------------------------------------*/\r\n\r\n        const formValidate = computed(() => formatFormRules(props.rules, items.map(item => item.formItemComponentRules.value))) as ComputedRef<FormValidate>\r\n\r\n        const loading = (() => {\r\n            let time: null | number;\r\n            return {\r\n                show: () => {\r\n                    time = setTimeout(() => {\r\n                        childState.loading = true\r\n                        time = null\r\n                    }, 500)\r\n                },\r\n                hide: () => {\r\n                    if (!!time) {\r\n                        clearTimeout(time)\r\n                    } else {\r\n                        childState.loading = false\r\n                    }\r\n                },\r\n            }\r\n        })();\r\n\r\n        const validateMethods = {\r\n            validate: async (config?: { autoLoading?: boolean, autoAlert?: boolean, }) => {\r\n                config = config || {}\r\n                if (config.autoLoading != false) {\r\n                    loading.show()\r\n                }\r\n                const {validateMessage, validateResultMap, validateResult} = await formValidate.value.methods.validate(props.modelValue!)\r\n                loading.hide()\r\n\r\n                childState.validateResultMap = validateResultMap\r\n                if (!!validateMessage) {\r\n                    if (config.autoAlert !== false) {\r\n                        $$notice.warn(validateMessage)\r\n                    }\r\n                    throw {\r\n                        validate: validateResult,\r\n                        message: validateMessage,\r\n                    }\r\n                } else {\r\n                    return null\r\n                }\r\n            },\r\n            clearValidate: () => {\r\n                childState.validateResultMap = {}\r\n            },\r\n            showError: (error: any) => {\r\n                if (!!error.message) {\r\n                    $$notice.warn(error.message)\r\n                } else {\r\n                    $$notice.warn(String(error))\r\n                }\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------end-------------------------------------------*/\r\n\r\n        onMounted(() => {\r\n            // console.log('formValidate.value', formValidate.value)\r\n        })\r\n\r\n        const childState = reactive({\r\n            align,\r\n            width,\r\n            formValidate,\r\n            validateResultMap: {} as FormValidateResultMap,\r\n            loading: false,\r\n        })\r\n\r\n        const freezeState = {\r\n            oldFormData: {...(props.modelValue || {})},\r\n        }\r\n\r\n        const validateHandler = {\r\n            onEditChange: async (field?: string | string[]) => {\r\n                if (props.validateMode === FormValidateMode.form) {\r\n                    return\r\n                }\r\n                const fields = FormValidateUtils.getListValue(field)\r\n                if (!fields) {return}\r\n                await Promise.all(fields.map(f => formValidate.value.methods.validateField({\r\n                    field: f,\r\n                    trigger: FormValidateTrigger.change,\r\n                    formValidateResultMap: childState.validateResultMap,\r\n                    formData: props.modelValue || {},\r\n                    associateFields: props.associateFields,\r\n                })))\r\n            },\r\n            onBlurChange: async (field?: string | string[]) => {\r\n                const fields = FormValidateUtils.getListValue(field)\r\n                if (!fields) {return}\r\n                await Promise.all(fields.map(f => formValidate.value.methods.validateField({\r\n                    field: f,\r\n                    trigger: FormValidateTrigger.blur,\r\n                    formValidateResultMap: childState.validateResultMap,\r\n                    formData: props.modelValue || {},\r\n                    associateFields: props.associateFields,\r\n                })))\r\n            },\r\n            onFieldChange: async (field: string) => {\r\n                await formValidate.value.methods.validateField({\r\n                    field,\r\n                    trigger: FormValidateTrigger.change,\r\n                    formValidateResultMap: childState.validateResultMap,\r\n                    formData: props.modelValue || {},\r\n                    associateFields: props.associateFields,\r\n                })\r\n            },\r\n            onFormDataChange: debounce((val: any) => {\r\n                const newFormData = val || {}\r\n                const oldFormData = freezeState.oldFormData || {}\r\n                const fields = Object.keys({...newFormData, ...oldFormData})\r\n\r\n                fields.forEach(field => {\r\n                    let newVal = newFormData[field]\r\n                    let oldVal = oldFormData[field]\r\n                    if (newVal !== oldVal) {\r\n                        emit.onFieldValueChange(field, newVal, oldVal)\r\n                        validateHandler.onFieldChange(field)\r\n                    }\r\n                })\r\n                freezeState.oldFormData = {...val || {}}\r\n            }, 150, false)\r\n        }\r\n\r\n        if (props.validateMode === FormValidateMode.form) {\r\n            watch(() => props.modelValue, validateHandler.onFormDataChange, {deep: true})\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n                childState,\r\n                numberState,\r\n                validateHandler,\r\n                ...validateMethods,\r\n            },\r\n            render: () => {\r\n                return (<div class={classes.value} style={styles.value} v-loading={childState.loading || !!props.loading}>\r\n                    <div class=\"pl-form-body\" style={bodyStyles.value}>\r\n                        {slots.default()}\r\n                    </div>\r\n                </div>)\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport default PlForm\r\n\r\nexport const FormCollector = useCollect(() => ({\r\n    parent: PlForm,\r\n    child: PlFormItem,\r\n}))","import PlForm from './form'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(PlForm)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlFormItem} from \"../form/form-item\";\r\n\r\nexport default createComponentPlugin(PlFormItem)","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {useSlots} from \"../../../../use/useSlots\";\r\nimport {ComponentPublicInstance, getCurrentInstance, inject, onBeforeUnmount, onMounted, provide, ref} from 'vue';\r\nimport {TablePlc} from \"./plc.type\";\r\n\r\nexport const TablePlcCollector = (() => {\r\n    const ProvideString = '@@TablePlcCollector'\r\n    const useParent = () => {\r\n        const children = ref([] as TablePlc[])\r\n        const refer = {\r\n            children: children.value,\r\n            add: (proxy: ComponentPublicInstance) => {\r\n                const el = proxy.$el as HTMLElement\r\n                const index = Array.from(el.parentElement!.childNodes)\r\n                    .filter((item: any) => item.nodeName !== '#comment' && item.nodeName !== '#text' && (!item.style || item.style.display !== 'none'))\r\n                    .indexOf(el)\r\n                children.value.splice(index, 0, proxy as any)\r\n            },\r\n            remove: (proxy: ComponentPublicInstance) => {\r\n                const index = children.value.indexOf(proxy as any)\r\n                if (index > -1) {\r\n                    children.value.splice(index, 1)\r\n                }\r\n            },\r\n        }\r\n        provide(ProvideString, refer)\r\n        return refer\r\n    }\r\n    const useChild = () => {\r\n        const {add, remove} = inject(ProvideString) as ReturnType<typeof useParent>\r\n        const ctx = getCurrentInstance()!\r\n        onMounted(() => add(ctx.proxy!))\r\n        onBeforeUnmount(() => remove(ctx.proxy!))\r\n        return ctx\r\n    }\r\n    return {\r\n        useParent,\r\n        useChild,\r\n    }\r\n})();\r\n\r\nexport default designComponent({\r\n    name: 'plc-collector',\r\n    setup() {\r\n        const {slots} = useSlots()\r\n        const {children} = TablePlcCollector.useParent()\r\n        return {\r\n            refer: {\r\n                children\r\n            },\r\n            render: () => (\r\n                <div class=\"plc-collector\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {Plc} from \"./plc.type\";\r\n\r\nexport function renderColgroup(flatPlcList: Plc[]) {\r\n    return (\r\n        <colgroup>\r\n            {flatPlcList.map((plc) => <col width={plc.props.width || ''}/>)}\r\n        </colgroup>\r\n    )\r\n}","/**\r\n * 处理表头拖拽调整宽度的功能\r\n * @author  韦胜健\r\n * @date    2020/8/18 16:17\r\n */\r\nimport {TablePlc} from \"../../plc/core/plc.type\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport {PlTable} from \"../../table\";\r\n\r\nexport function useHeadCellResize(table: typeof PlTable.use.class, plc: TablePlc) {\r\n\r\n    const state = {\r\n        indicatorEl: null as null | HTMLElement,\r\n        startX: null as null | number,\r\n        endX: null as null | number,\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n\r\n            const tableEl = table.refs.el\r\n\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n\r\n            window.addEventListener('mousemove', handler.mousemove)\r\n            window.addEventListener('mouseup', handler.mouseup)\r\n            disabledUserSelect()\r\n            state.startX = e.clientX\r\n\r\n            state.indicatorEl = document.createElement('div')\r\n\r\n            const cell = e.currentTarget as HTMLElement\r\n\r\n            const {left, width} = cell.getBoundingClientRect()\r\n            const {top, height} = tableEl.getBoundingClientRect()\r\n\r\n            Object.assign(state.indicatorEl.style, {\r\n                display: 'inline-block',\r\n                zIndex: 9999,\r\n                position: 'fixed',\r\n\r\n                width: `${width}px`,\r\n                backgroundColor: '#ddd',\r\n                height: `${height}px`,\r\n                top: `${top}px`,\r\n                left: `${left}px`,\r\n            })\r\n\r\n            document.body.appendChild(state.indicatorEl)\r\n        },\r\n        mousemove: (e: MouseEvent) => {\r\n            state.indicatorEl!.style.left = `${e.clientX}px`\r\n        },\r\n        mouseup: (e: MouseEvent) => {\r\n            window.removeEventListener('mousemove', handler.mousemove)\r\n            window.removeEventListener('mouseup', handler.mouseup)\r\n            enableUserSelect()\r\n            document.body.removeChild(state.indicatorEl!)\r\n            state.endX = e.clientX\r\n            let durWidth = state.endX - state.startX!\r\n            plc.setDurWidth(durWidth)\r\n        }\r\n    }\r\n\r\n    return {\r\n        resizeHandler: handler,\r\n    }\r\n}","import {Plc, TablePlc, TableRenderScope} from \"./plc.type\";\r\nimport {TableNode} from \"../../core/useTableNode\";\r\nimport {VNodeChild} from \"../../../../shims\";\r\n\r\nexport function renderHeadCell(plc: TablePlc) {\r\n    // 如果存在 head作用域插槽，渲染head作用域插槽\r\n    if (plc.scopedSlots.head.isExist()) {\r\n        return plc.scopedSlots.head({plc: plc as any})\r\n    }\r\n    // 如果存在 props.head 渲染函数，则渲染 props.head\r\n    if (!plc.group && !!plc.props.head) {\r\n        return plc.props.head({plc})\r\n    }\r\n    return plc.props.title\r\n}\r\n\r\nexport function renderBodyCell(\r\n    {\r\n        node,\r\n        plc,\r\n    }: {\r\n        node: TableNode,\r\n        plc: Plc,\r\n    }\r\n) {\r\n    const editable = getEditable(plc, node)\r\n    const body = getBodyCell({node, plc, editable})\r\n    return {\r\n        editable,\r\n        body,\r\n    }\r\n}\r\n\r\n/**\r\n * 判断当前是否可编辑\r\n * 1. 如果当前行非编辑状态，则不可编辑\r\n * 2. 如果列没有edit作用域插槽以及渲染函数，则不可编辑\r\n * 3. 如果列的editable属性为函数，则计算这个函数的值来定性是否可编辑\r\n *\r\n * 这个【是否可编辑】值用来设置 body-cell 的样式，以便body-cell清楚地知道当前是否处于可编辑状态，并且设置padding\r\n *\r\n * @author  韦胜健\r\n * @date    2020/7/21 21:16\r\n */\r\nfunction getEditable(plc: Plc, node: TableNode) {\r\n    // 行非编辑状态下，定性为不可编辑\r\n    if (!node.edit) {\r\n        return false\r\n    }\r\n    // 如果没有edit渲染函数以及作用域插槽，那么直接定性为不可编辑\r\n    if (!plc.props.edit && !plc.scopedSlots.edit.isExist()) {\r\n        return false\r\n    }\r\n    return typeof plc.props.editable === \"function\" ? plc.props.editable(node) : (plc.props.editable !== false)\r\n}\r\n\r\nfunction getBodyCell(\r\n    {\r\n        node,\r\n        plc,\r\n        editable,\r\n    }: {\r\n        node: TableNode,\r\n        plc: Plc,\r\n        editable: boolean,\r\n    }\r\n): VNodeChild {\r\n    let renderScope: TableRenderScope\r\n    if (node.isSummary) {\r\n        // 合计行中的row一直是原始的row对象\r\n        renderScope = {node, plc, row: node.data}\r\n        // 合计行，使用作用域插槽 summary渲染，没有则使用渲染函数summary渲染，么有则使用 default作用域插槽渲染，没有\r\n        // 则使用渲染函数default渲染，没有则直接渲染field对应的值\r\n        if (plc.scopedSlots.summary.isExist()) {\r\n            return plc.scopedSlots.summary(renderScope)\r\n        }\r\n        if (!!plc.props.summary) {\r\n            return plc.props.summary(renderScope)\r\n        }\r\n        if (plc.scopedSlots.default.isExist()) {\r\n            return plc.scopedSlots.default(renderScope)\r\n        }\r\n        if (!!plc.props.default) {\r\n            return plc.props.default(renderScope)\r\n        }\r\n        return !!plc.props.field ? renderScope.row[plc.props.field] : null\r\n    } else {\r\n        // 如果当前行处于可编辑状态，则渲染的行数据对象为 rowData.editRow，否则为 rowData.data\r\n        let row = node.edit ? node.editRow : node.data\r\n        renderScope = {node, plc, row}\r\n\r\n        if (editable) {\r\n            // 当前一定存在 plc.scopedSlots.edit 或者 plc.props.edit，否则 editable不可能为true\r\n            if (plc.scopedSlots.edit.isExist()) {\r\n                return plc.scopedSlots.edit(renderScope)\r\n            }\r\n            if (!!plc.props.edit) {\r\n                return plc.props.edit(renderScope)\r\n            }\r\n        } else {\r\n            // 当前单元格不可编辑，如果当前行处于编辑状态，则渲染的行数据为 tableNode.editRow，否则为 tableNode.data\r\n            // 使用作用域插槽default渲染，没有则使用渲染函数default渲染，没有则直接显示field对应的值\r\n            if (plc.scopedSlots.default.isExist()) {\r\n                return plc.scopedSlots.default(renderScope)\r\n            }\r\n            if (!!plc.props.default) {\r\n                return plc.props.default(renderScope)\r\n            }\r\n            return !!plc.props.field ? renderScope.row[plc.props.field] : null\r\n        }\r\n    }\r\n}","import {Plc, TablePlc} from \"../../plc/core/plc.type\";\r\nimport {useAutoScroll} from \"../../../../use/useAutoScroll\";\r\nimport {StyleProperties} from \"../../../../shims\";\r\nimport {addClass} from \"plain-utils/dom/addClass\";\r\nimport {nextIndex} from \"../../../../utils/nextIndex\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport {PlainScroll} from \"../../../scroll/scroll\";\r\nimport {PlTable} from \"../../table\";\r\n\r\ninterface DragData {\r\n    left: number\r\n    width: number\r\n    plc: TablePlc\r\n    droppable: boolean\r\n}\r\n\r\nenum HoverPart {\r\n    left = 'left',\r\n    right = 'right',\r\n}\r\n\r\n/**\r\n * 获取可以滚动的父组件\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:50\r\n */\r\nexport function getHorizontalScrollParent(el: HTMLElement): HTMLElement {\r\n    while (!!el && el.scrollWidth <= el.offsetWidth) {\r\n        el = el.parentElement!\r\n    }\r\n    return el\r\n}\r\n\r\n/**\r\n * 递归遍历plc数组数据\r\n * @author  韦胜健\r\n * @date    2020/9/6 11:24\r\n */\r\nfunction iteratePlc(plcList: TablePlc[], handler: (plc: TablePlc) => 'stop' | void): void {\r\n\r\n    for (let i = 0; i < plcList.length; i++) {\r\n        const item = plcList[i]\r\n        const flag = handler(item)\r\n        if (flag === 'stop') {\r\n            return\r\n        } else {\r\n            if (item.group) {\r\n                iteratePlc(item.children, handler)\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 或者plc对象的兄弟节点\r\n * @author  韦胜健\r\n * @date    2020/9/6 11:24\r\n */\r\nfunction getBroPlcList(plcList: TablePlc[], plc: TablePlc): TablePlc[] {\r\n\r\n    let broPlcList: TablePlc[] = []\r\n\r\n    if (plcList.indexOf(plc) > -1) {\r\n        broPlcList = plcList\r\n    } else {\r\n        iteratePlc(plcList, itarPlc => {\r\n            if (itarPlc.group) {\r\n                if (itarPlc.children.indexOf(plc) > -1) {\r\n                    broPlcList = itarPlc.children\r\n                    return 'stop'\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    if (broPlcList.length === 0) {\r\n        /*内部错误，找不到兄弟节点*/\r\n        throw new Error('Internal error! sibling node not found.')\r\n    }\r\n\r\n    return broPlcList\r\n}\r\n\r\n/**\r\n * 获取plc的宽度\r\n * @author  韦胜健\r\n * @date    2020/9/6 12:09\r\n */\r\nfunction getPlcWidth(plc: TablePlc) {\r\n    if (!plc.group) {\r\n        return Number(plc.props.width)\r\n    } else {\r\n        return plc.children.reduce((ret: number, item: TablePlc) => {\r\n            ret += getPlcWidth(item)\r\n            return ret\r\n        }, 0)\r\n    }\r\n}\r\n\r\n/**\r\n * 获取plc的高度，如果是plc，则高度为currentTarget的高度，如果是plcGroup，则高度等于所有后代层数乘以currentTarget的高度\r\n * @author  韦胜健\r\n * @date    2020/9/6 11:29\r\n */\r\nfunction getIndicatorHeight(\r\n    plc: TablePlc,\r\n    table: typeof PlTable.use.class,\r\n) {\r\n    if (plc.group) {\r\n        return (table.plcData.value!.maxLevel - plc.level!) * table.numberState.headRowHeight\r\n    } else {\r\n        return plc.rowspan! * table.numberState.headRowHeight\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 获取plcList中最底层的plc\r\n * @author  韦胜健\r\n * @date    2020/9/6 20:27\r\n */\r\nfunction getLowestPlcList(plcList: TablePlc[]): Plc[] {\r\n\r\n    return plcList.reduce((ret: Plc[], plc: TablePlc) => {\r\n        if (plc.group) {\r\n            ret.push(...getLowestPlcList(plc.children))\r\n        } else {\r\n            ret.push(plc)\r\n        }\r\n        return ret\r\n    }, [] as Plc[])\r\n\r\n}\r\n\r\n/**\r\n * 获取拖拽所需要的数据\r\n * @author  韦胜健\r\n * @date    2020/9/6 20:41\r\n */\r\nfunction getDragData(table: typeof PlTable.use.class, plc: TablePlc): {\r\n    broData: DragData[],\r\n    broList: TablePlc[]\r\n} {\r\n\r\n    const plcList = table.plcData.value!.plcList\r\n    const broList = getBroPlcList(plcList, plc)\r\n\r\n    const broLowestList = getLowestPlcList(broList)\r\n    const allLowestList = getLowestPlcList(plcList) as TablePlc[]\r\n\r\n    allLowestList.splice(allLowestList.indexOf(broLowestList[0]), broLowestList.length, ...broList)\r\n\r\n    const broData: DragData[] = []\r\n    let left = 0\r\n\r\n    allLowestList.forEach(plc => {\r\n        const item = {\r\n            left,\r\n            width: getPlcWidth(plc),\r\n            plc,\r\n            droppable: broList.indexOf(plc) > -1\r\n        }\r\n        left += item.width\r\n        broData.push(item)\r\n    })\r\n\r\n    // broData.forEach(bro => console.log(bro.plc.props.title, bro.left, bro.droppable))\r\n\r\n    return {\r\n        broList,\r\n        broData,\r\n    }\r\n\r\n}\r\n\r\nexport function useColDraggier(config: () => {\r\n    plc: TablePlc,\r\n    table: typeof PlTable.use.class,\r\n    scrollRefer: () => PlainScroll,\r\n}) {\r\n    const {plc, table, scrollRefer} = config()\r\n    const isDraggable = !!table.props.colDraggable && plc.props.colDraggable !== false\r\n    if (!isDraggable) {return {tdAttrs: {}}}\r\n    const autoScroller = useAutoScroll({\r\n        vertical: false,\r\n        getScroll: scrollRefer\r\n    })\r\n    const indicatorSize = 3\r\n    const state = {\r\n        startClientX: 0,\r\n        moveClientX: 0,\r\n\r\n        startScrollLeft: 0,\r\n        moveScrollLeft: 0,\r\n\r\n        scrollParent: null as null | HTMLElement,\r\n        currentRect: {\r\n            top: 0,\r\n            left: 0,\r\n            height: 0,\r\n            width: 0,\r\n        },\r\n        scrollRect: {\r\n            top: 0,\r\n            left: 0,\r\n            height: 0,\r\n            width: 0,\r\n        },\r\n        indicator: null as null | HTMLElement,\r\n        dragData: null as null | DragData[],\r\n        broList: null as null | TablePlc[],\r\n        refreshData: null as null | {\r\n            index: number,\r\n            dragData: DragData,\r\n            hover: HoverPart,\r\n        }\r\n    }\r\n\r\n    const utils = {\r\n        getDragData: (left: number): { index: number, dragData: DragData, hover: HoverPart } => {\r\n            for (let i = 0; i < state.dragData!.length; i++) {\r\n                const dd = state.dragData![i];\r\n                if (left >= dd.left && left <= dd.left + dd.width) {\r\n                    return {\r\n                        index: i,\r\n                        dragData: dd,\r\n                        hover: left - dd.left > dd.width / 2 ? HoverPart.right : HoverPart.left\r\n                    }\r\n                }\r\n            }\r\n            throw new Error(`Can not get dragData by left:${left}`)\r\n        },\r\n        refresh() {\r\n            const left = (state.moveClientX - state.scrollRect.left) + (state.moveScrollLeft)\r\n            state.refreshData = utils.getDragData(left)\r\n            const {dragData, hover} = state.refreshData\r\n\r\n            let indicatorLeft = (hover === HoverPart.left ? dragData.left : dragData.left + dragData.width - indicatorSize) + state.scrollRect.left - state.moveScrollLeft\r\n            indicatorLeft = Math.min(Math.max(state.scrollRect.left, indicatorLeft), state.scrollRect.left + state.scrollRect.width - indicatorSize)\r\n\r\n            Object.assign(state.indicator!.style, {\r\n                left: `${indicatorLeft}px`,\r\n            } as StyleProperties)\r\n\r\n            state.indicator!.setAttribute('droppable', dragData.droppable ? 'true' : 'false')\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n\r\n            const {broList, broData} = getDragData(table, plc)\r\n            state.dragData = broData\r\n            state.broList = broList\r\n\r\n            const currentTarget = e.currentTarget as HTMLElement\r\n            state.currentRect = currentTarget.getBoundingClientRect()!\r\n            const indicatorHeight = getIndicatorHeight(plc, table)\r\n\r\n            state.startClientX = state.moveClientX = e.clientX\r\n            state.scrollParent = getHorizontalScrollParent(currentTarget)\r\n            state.scrollRect = state.scrollParent.parentElement!.getBoundingClientRect()\r\n            state.startScrollLeft = state.moveScrollLeft = state.scrollParent.scrollLeft\r\n\r\n            state.indicator = document.createElement('div')\r\n            addClass(state.indicator, 'plt-col-draggier-indicator')\r\n            Object.assign(state.indicator.style, {\r\n                top: `${state.currentRect.top}px`,\r\n                left: `${state.currentRect.left}px`,\r\n                height: `${indicatorHeight}px`,\r\n                width: `${indicatorSize}px`,\r\n                position: 'fixed',\r\n                zIndex: `${nextIndex() + 100}`,  // 加100是为了不被 autoScroller 遮住；\r\n                pointerEvents: 'none',                  // indicator只是一个指示的作用，这里设置none为了不挡住autoScroller的鼠标事件\r\n            } as StyleProperties)\r\n            document.body.appendChild(state.indicator)\r\n\r\n            disabledUserSelect()\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n            state.scrollParent!.addEventListener('mousemove', handler.mousemove)\r\n            state.scrollParent!.addEventListener('scroll', handler.scroll)\r\n\r\n            utils.refresh()\r\n            autoScroller.showHover()\r\n        },\r\n        mousemove: (e: MouseEvent) => {\r\n            state.moveClientX = e.clientX\r\n            utils.refresh()\r\n        },\r\n        scroll: () => {\r\n            state.moveScrollLeft = state.scrollParent!.scrollLeft\r\n            utils.refresh()\r\n        },\r\n        mouseup: () => {\r\n\r\n            (() => {\r\n                if (!state.refreshData) {\r\n                    return\r\n                }\r\n                const {dragData, hover} = state.refreshData\r\n\r\n                if (!dragData.droppable) {\r\n                    return;\r\n                }\r\n\r\n                const startPlc = plc\r\n                const endPlc = dragData.plc\r\n                const broList = state.broList!\r\n\r\n                const startIndex = broList.indexOf(startPlc)\r\n                let endIndex = broList.indexOf(endPlc)\r\n                if (startIndex === endIndex) {\r\n                    return;\r\n                }\r\n\r\n                if (startPlc.props.fixed != endPlc.props.fixed) {\r\n                    startPlc.state.fixed = endPlc.props.fixed\r\n                }\r\n\r\n                broList.splice(startIndex, 1)\r\n                endIndex = broList.indexOf(endPlc)\r\n                endIndex = hover === HoverPart.right ? endIndex + 1 : endIndex\r\n                broList.splice(endIndex, 0, startPlc)\r\n\r\n                broList.forEach((plc, index) => plc.state.order = index)\r\n            })();\r\n\r\n            enableUserSelect()\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n            state.scrollParent!.removeEventListener('mousemove', handler.mousemove)\r\n            state.scrollParent!.removeEventListener('scroll', handler.scroll)\r\n            if (!!state.indicator) {\r\n                state.indicator.parentNode!.removeChild(state.indicator)\r\n                state.indicator = null\r\n            }\r\n            autoScroller.hideHover()\r\n        }\r\n    }\r\n\r\n    return {\r\n        tdAttrs: {onMousedown: handler.mousedown,}\r\n    }\r\n}","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {PropType} from 'vue';\r\nimport {TablePlc} from \"../../plc/core/plc.type\";\r\nimport {useHeadCellResize} from \"./useHeadCellResize\";\r\nimport {renderHeadCell} from \"../../plc/core/render\";\r\nimport {useColDraggier} from \"./useColDraggier\";\r\nimport {PlainScroll} from \"../../../scroll/scroll\";\r\n\r\nexport const PltHeadCell = designComponent({\r\n    name: 'plt-head-cell',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n        tablePlc: {type: Object as PropType<TablePlc>, required: true},\r\n        scroll: {type: Function as PropType<() => PlainScroll>, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {resizeHandler} = useHeadCellResize(props.table, props.tablePlc)\r\n        const {tdAttrs} = useColDraggier(() => ({\r\n            table: props.table,\r\n            plc: props.tablePlc,\r\n            scrollRefer: props.scroll,\r\n        }))\r\n\r\n        return {\r\n            render: () => {\r\n                const content = renderHeadCell(props.tablePlc)\r\n                return (\r\n                    <td\r\n                        class={[\r\n                            props.tablePlc.classes.head,\r\n                            props.tablePlc.props.headCls,\r\n                            !!props.table.props.headCellClassFunc ? props.table.props.headCellClassFunc(props.tablePlc) : null\r\n                        ]}\r\n                        style={{\r\n                            ...props.tablePlc.styles.head as any,\r\n                            ...(!!props.table.props.headCellStyleFunc ? props.table.props.headCellStyleFunc(props.tablePlc) : {})\r\n                        }}\r\n                        rowspan={props.tablePlc.rowspan}\r\n                        colspan={props.tablePlc.colspan}\r\n                        {...tdAttrs}\r\n                    >\r\n                        {content}\r\n                        <span class=\"plt-head-cell-indicator\" onMousedown={resizeHandler.mousedown}/>\r\n                    </td>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {StyleProps} from \"../../../use/useStyle\";\r\nimport {SimpleObject, StyleProperties} from \"../../../shims\";\r\nimport {PropType} from 'vue';\r\nimport {Plc, TablePlc} from \"../plc/core/plc.type\";\r\nimport {TableNode} from \"./useTableNode\";\r\nimport {MultipleClass} from \"../../../use/useClasses\";\r\nimport {FormAssociateFields, FormComponentRules} from \"../../form/form.validate\";\r\nimport {useTree} from \"../../tree/core/useTree\";\r\n\r\nexport type TablePropsConfig = (plcList: TablePlc[]) => Record<string, any>\r\n\r\nexport type TablePropsRowClassFunc = (node: TableNode) => MultipleClass\r\nexport type TablePropsCellClassFunc = (node: TableNode, plc: Plc) => MultipleClass\r\nexport type TablePropsCellStyleFunc = (node: TableNode, plc: Plc) => StyleProperties\r\nexport type TablePropsHeadCellClassFunc = (plc: TablePlc) => MultipleClass\r\nexport type TablePropsHeadCellStyleFunc = (plc: TablePlc) => StyleProperties\r\n\r\nexport type TablePropsSpanMethod = (socpe: { node: TableNode, plc: Plc }) => { rowspan: number, colspan: number }\r\n\r\nexport enum TablePlcAlign {\r\n    left = 'left',\r\n    center = 'center',\r\n    right = 'right',\r\n}\r\n\r\nexport enum TablePlcFixedType {\r\n    left = 'left',\r\n    center = 'center',\r\n    right = 'right',\r\n}\r\n\r\nexport const enum TableHoverPart {\r\n    body = 'body',\r\n    head = 'head'\r\n}\r\n\r\nexport const TableProps = {\r\n\r\n    /*---------------------------------------basic-------------------------------------------*/\r\n\r\n    ...StyleProps,\r\n\r\n    loading: {type: Boolean, default: null},                    // 是否开启表格的加载状态\r\n    virtual: {type: Boolean, default: false},                   // 虚拟滚动\r\n    summaryData: {type: Array as PropType<SimpleObject[]>},     // 表尾合计行数据\r\n    config: {type: Function as PropType<TablePropsConfig>},     // 配置列信息函数\r\n    rules: {type: Object as PropType<FormComponentRules>},      // 校验规则\r\n    associateFields: {type: Object as PropType<FormAssociateFields>},   // 校验关联字段，一个对象，key为字段名，value为字段字符串或者字符串数组。当key变化时，会自动校验value中所列的字段\r\n    colDraggable: {type: Boolean},                              // 列是否可以拖拽排序\r\n    spanMethod: {type: Function as PropType<TablePropsSpanMethod>},// 合并表体单元格的方法\r\n\r\n    /*---------------------------------------style-------------------------------------------*/\r\n\r\n    border: {type: Boolean},                                    // 是否带纵向边框\r\n    stripe: {type: Boolean},                                    // 是否为斑马纹table\r\n    hideHeader: {type: Boolean},                                // 是否隐藏表头\r\n    disabledStickyCompatible: {type: Boolean},                  // 是否禁用在ie下的sticky兼容\r\n    headRowHeight: {type: [String, Number], default: 45},       // 表头行高\r\n    bodyRowHeight: {type: [String, Number], default: 40},       // 表体行高\r\n    showRows: {type: Number, default: 10},                      // 表格显示的行数，当表体的行数超过这个值时，将会出现表体内部滚动，这个属性实际上就是用来设值表格高度\r\n\r\n    rowClassFunc: {type: Function as PropType<TablePropsRowClassFunc>},// 行 className 的计算函数\r\n    cellClassFunc: {type: Function as PropType<TablePropsCellClassFunc>},// 单元格 className 的计算函数\r\n    cellStyleFunc: {type: Function as PropType<TablePropsCellStyleFunc>},// 单元格 style 内联样式的计算函数\r\n    headCellClassFunc: {type: Function as PropType<TablePropsHeadCellClassFunc>},// 表头单元格的 className 的计算函数\r\n    headCellStyleFunc: {type: Function as PropType<TablePropsHeadCellStyleFunc>},// 表头单元格 style 内联样式计算函数\r\n\r\n    /*---------------------------------------tree-------------------------------------------*/\r\n    ...useTree.createProps<TableNode>(),\r\n    childrenField: {type: String, default: 'children'},         // 树节点对应子节点数据对应字段\r\n}","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {renderColgroup} from \"../../plc/core/renderColgroup\";\r\nimport {PltHeadCell} from \"./head-cell\";\r\nimport {useStyles} from \"../../../../use/useStyles\";\r\nimport {TableHoverPart} from \"../table.utils\";\r\nimport {useRefs} from \"../../../../use/useRefs\";\r\nimport {PlScroll} from \"../../../scroll/scroll\";\r\n\r\nexport const PltHead = designComponent({\r\n    name: 'plt-head',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            scroll: PlScroll,\r\n        })\r\n        /*Scroll的父节点需要固定高度*/\r\n        const styles = useStyles(style => {\r\n            style.height = `${props.table.plcData.value!.headPlcListArray.length * (props.table.numberState.headRowHeight + 1)}px`\r\n        })\r\n        /*当总的列宽度大于表格宽度时，设置宽度*/\r\n        const tableStyles = useStyles(style => {\r\n            const {targetTableWidth} = props.table.plcData.value!\r\n            if (!!targetTableWidth) {\r\n                style.width = `${targetTableWidth}px`\r\n            }\r\n        })\r\n        /*表头表体联动滚动*/\r\n        const bindScroll = props.table.bindScroll(\r\n            TableHoverPart.head,\r\n            (scrollLeft, part) => part !== TableHoverPart.head && refs.scroll!.methods.scroll({x: scrollLeft}, {noEmitScroll: true})\r\n        )\r\n        /*表头支持鼠标滚动横向滚动*/\r\n        const onMousewheel = (e: WheelEvent) => {\r\n            const {deltaX, deltaY} = e\r\n            if (Math.abs(deltaY) > Math.abs(deltaX)) {\r\n                e.preventDefault()\r\n                e.stopPropagation()\r\n                refs.scroll!.refs.wrapper.scrollLeft = refs.scroll!.refs.wrapper.scrollLeft + deltaY / 3\r\n            }\r\n        }\r\n        const scrollRef = () => refs.scroll!\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"plt-head\" style={styles.value} onMouseenter={bindScroll.onMouseenter}>\r\n                    <PlScroll hideScrollbar scrollX refreshState={props.table.plcData.value!.targetTableWidth} onScroll={bindScroll.onScroll} ref=\"scroll\">\r\n                        <table {...{\r\n                            cellspacing: 0,\r\n                            cellpadding: 0,\r\n                            border: 0,\r\n                            style: tableStyles.value,\r\n                            onMousewheel: onMousewheel,\r\n                            key: props.table.plcData.value!.plcKeyString,\r\n                        }}>\r\n                            {renderColgroup(props.table.plcData.value!.flatPlcList)}\r\n                            {props.table.plcData.value!.headPlcListArray.map((array, arrayIndex) => (\r\n                                <tr style={`height:${props.table.numberState.headRowHeight}px`} key={arrayIndex}>\r\n                                    {array.map((plc) => <PltHeadCell table={props.table} tablePlc={plc} scroll={scrollRef}/>)}\r\n                                </tr>\r\n                            ))}\r\n                        </table>\r\n                    </PlScroll>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {ComputedRef, PropType} from 'vue';\r\nimport {Plc} from \"../../plc/core/plc.type\";\r\nimport {TableNode} from \"../useTableNode\";\r\nimport {renderBodyCell} from \"../../plc/core/render\";\r\nimport {useEdit} from \"../../../../use/useEdit\";\r\nimport {StyleStatus, useStyle} from \"../../../../use/useStyle\";\r\nimport {FormAssociateFields, FormValidate, FormValidateTrigger} from \"../../../form/form.validate\";\r\nimport {useClass} from \"../../../../use/useClasses\";\r\nimport {useStyles} from \"../../../../use/useStyles\";\r\n\r\nfunction useCellFormItemValidate(props: { plc: Plc, node: TableNode }, validate: ComputedRef<FormValidate>, associateFields?: FormAssociateFields) {\r\n    const handler = {\r\n        onEditChange: async () => {\r\n            let {plc: {props: {field}}, node: {edit, data, editRow, validateResultMap}} = props\r\n            if (!validateResultMap) {props.node.validateResultMap = validateResultMap = {}}\r\n            if (!field) {return}\r\n            await validate.value.methods.validateField({\r\n                field,\r\n                formData: edit ? editRow : data,\r\n                trigger: FormValidateTrigger.change,\r\n                formValidateResultMap: validateResultMap,\r\n                associateFields,\r\n            })\r\n        },\r\n        onEditBlur: async () => {\r\n            let {plc: {props: {field}}, node: {edit, data, editRow, validateResultMap}} = props\r\n            if (!validateResultMap) {props.node.validateResultMap = validateResultMap = {}}\r\n            if (!field) {return}\r\n            await validate.value.methods.validateField({\r\n                field,\r\n                formData: edit ? editRow : data,\r\n                trigger: FormValidateTrigger.blur,\r\n                formValidateResultMap: validateResultMap,\r\n                associateFields,\r\n            })\r\n        },\r\n    }\r\n    useEdit({\r\n        adjust: ret => {\r\n            ret.disabled = null\r\n            ret.readonly = null\r\n            ret.loading = null\r\n            ret.onChange = handler.onEditChange\r\n            ret.onBlur = handler.onEditBlur\r\n        }\r\n    })\r\n    useStyle({\r\n        adjust: (ret) => {\r\n            const {node: {validateResultMap}, plc: {props: {field}}} = props\r\n            const {status} = ret\r\n            ret.status = status || ((!!field && validateResultMap && !!validateResultMap[field]) ? StyleStatus.error : undefined)\r\n            return ret\r\n        }\r\n    })\r\n}\r\n\r\nexport const PltCell = designComponent({\r\n    name: 'plt-cell',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n        node: {type: Object as PropType<TableNode>, required: true},\r\n        plc: {type: Object as PropType<Plc>, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        useCellFormItemValidate(props, props.table.formValidate, props.table.props.associateFields)\r\n\r\n        return {\r\n            render: () => {\r\n                const {node, plc} = props\r\n                const {body, editable} = renderBodyCell({node, plc})\r\n                const span = !!props.table.props.spanMethod ? props.table.props.spanMethod({node, plc}) : {rowspan: 1, colspan: 1}\r\n\r\n                if (span.rowspan === 0 || span.colspan === 0) {\r\n                    /*rowspan为0时，不会正确合并单元格，如果要合并单元格得不渲染这个td*/\r\n                    return null\r\n                }\r\n                const classes = useClass(() => {\r\n                    const ret = [\r\n                        props.plc.classes.body,\r\n                        props.plc.props.bodyCls,\r\n                        {'plt-cell-editing': editable,}\r\n                    ] as any[]\r\n                    if (!!props.table.props.cellClassFunc) {\r\n                        ret.push(props.table.props.cellClassFunc(node, plc))\r\n                    }\r\n                    return ret\r\n                })\r\n                const styles = useStyles(style => {\r\n                    Object.assign(style, plc.styles.body)\r\n                    if (!!props.table.props.cellStyleFunc) {\r\n                        Object.assign(style, props.table.props.cellStyleFunc(node, plc))\r\n                    }\r\n                })\r\n\r\n                return (\r\n                    <td{...span} class={classes.value} style={styles.value}>\r\n                        {body}\r\n                    </td>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","/**\r\n * 在遍历plc的时候，操作类型，remove意思是遍历完这一次之删除这个plc或者plc组\r\n * @author  韦胜健\r\n * @date    2020/8/14 17:26\r\n */\r\nimport {Plc, PlcGroup, TablePlc} from \"../../core/plc.type\";\r\n\r\nexport const enum IteratePlcHandleType {\r\n    remove = 'remove',                      // 移除当前节点\r\n    nothing = 'nothing'                     // 什么事也不做\r\n}\r\n\r\nexport function iteratePlcList(\r\n    {\r\n        plcList,\r\n        onPlc,\r\n        onGroup,\r\n    }: {\r\n        plcList: TablePlc[],\r\n        onPlc: (plc: Plc) => IteratePlcHandleType,\r\n        onGroup: (group: PlcGroup) => IteratePlcHandleType,\r\n    }\r\n) {\r\n\r\n    for (let i = 0; i < plcList.length; i++) {\r\n        const plc = plcList[i];\r\n        if (!plc.group) {\r\n            const handleType = onPlc(plc)\r\n            if (handleType === IteratePlcHandleType.remove) {\r\n                plcList.splice(i, 1)\r\n                i--\r\n            }\r\n        } else {\r\n            const handleType = onGroup(plc)\r\n            if (handleType === IteratePlcHandleType.remove) {\r\n                plcList.splice(i, 1)\r\n                i--\r\n            } else {\r\n                iteratePlcList({plcList: plc.children, onPlc, onGroup,})\r\n                // 当这个分组没有列的时候（可能都隐藏了），自动删除这个分组\r\n                if (plc.children.length === 0) {\r\n                    plcList.splice(i, 1)\r\n                    i--\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {PropType} from 'vue';\r\nimport {PltCell} from \"./cell\";\r\nimport {TableNode} from \"../useTableNode\";\r\nimport {useClass} from \"../../../../use/useClasses\";\r\n\r\nexport const PltRow = designComponent({\r\n    name: 'plt-row',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n        node: {type: Object as PropType<TableNode>, required: true},\r\n        vid: {type: [String, Number]},\r\n    },\r\n    setup({props}) {\r\n\r\n        const handler = {\r\n            onClick: (e: MouseEvent) => props.table.handler.onClickRow(e, props.node),\r\n            onDblclick: (e: MouseEvent) => props.table.handler.onDblclickRow(e, props.node),\r\n            vid: props.vid,\r\n        }\r\n\r\n        const classes = useClass(() => {\r\n            const ret = [\r\n                'plt-row',\r\n                {\r\n                    'plt-row-current': props.table.current.value == props.node.key\r\n                }\r\n            ] as any[]\r\n            if (!!props.table.props.rowClassFunc) {\r\n                ret.push(props.table.props.rowClassFunc(props.node))\r\n            }\r\n            return ret\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                const content = [\r\n                    (\r\n                        <tr class={classes.value} style={`height:${props.table.numberState.bodyRowHeight}px`} {...handler}>\r\n                            {props.table.plcData.value!.flatPlcList.map(plc => <PltCell table={props.table} node={props.node} plc={plc}/>)}\r\n                        </tr>\r\n                    ),\r\n                ]\r\n                if (props.table.plcData.value!.plcListHasRenderAfterRow) {\r\n                    content.push(...props.table.plcData.value!.plcListHasRenderAfterRow.map(plc => plc.props.renderAfterRow!({\r\n                        node: props.node,\r\n                        plc,\r\n                        row: props.node.data,\r\n                    }) as Element))\r\n                }\r\n\r\n                return content.filter(Boolean)\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {PropType} from 'vue';\r\nimport {SimpleObject} from \"../../shims\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {useVirtualList} from \"../virtual-list/useVirtualList\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {PlScroll} from \"../scroll/scroll\";\r\n\r\n// const scrollbarSize = 12;\r\n\r\nexport const PlVirtualTable = designComponent({\r\n    name: 'pl-virtual-table',\r\n    props: {\r\n        data: {type: Array as PropType<SimpleObject[]>, require: true, default: []},// 要渲染的长数据\r\n        size: {type: Number, require: true, default: 40},           // 每一行高度\r\n        dynamicSize: {type: Boolean},                               // 标识列表中的每一行高度不是固定的，但是还是需要提供 size 属性，而且size属性不能与每一行的高度差距太多；\r\n        disabled: {type: Boolean},                                  // 禁用虚拟滚动\r\n\r\n        summaryData: {type: Array as PropType<SimpleObject[]>},     // 合计行数据\r\n        width: {type: Number},                                      // 宽度\r\n        height: {type: Number},                                     // 高度\r\n    },\r\n    emits: {\r\n        onScroll: (e: Event) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots(['colgroup'])\r\n        const {scopedSlots} = useScopedSlots({default: {item: Object, index: Number}})\r\n        const {refs} = useRefs({\r\n            scroll: PlScroll,\r\n            content: HTMLDivElement,\r\n            summary: HTMLDivElement,\r\n        })\r\n\r\n        const {virtual} = useVirtualList({props, refs, emit, transform: false})\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n        const styles = useStyles(style => {\r\n            style.height = unit(props.height)\r\n        })\r\n        const tableStyles = useStyles((style) => {\r\n            !!props.width && (style.width = unit(props.width))\r\n        })\r\n\r\n        const summaryTableStyles = useStyles((styles) => {\r\n            Object.assign(styles, tableStyles.value)\r\n            styles.height = `${!props.summaryData ? 0 : props.summaryData.length * props.size}px`\r\n            styles.bottom = `0px`\r\n        })\r\n\r\n        const strutStyles = useStyles(style => {\r\n            Object.assign(style, virtual.strutStyles.value)\r\n            !!props.width && (style.width = unit(props.width));\r\n            style.paddingBottom = `${(props.summaryData || []).length * props.size + 8}px`\r\n        })\r\n\r\n        const handler = {\r\n            onScroll: (e: any) => {\r\n                virtual.handler.onScroll(e)\r\n                !!refs.summary && (refs.summary.scrollLeft = e.target.scrollLeft)\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                refs\r\n            },\r\n            render: () => {\r\n                const {list} = virtual.offsetData.value\r\n                return (\r\n                    <div style={styles.value} class=\"pl-virtual-table\">\r\n                        <PlScroll\r\n                            refreshState={props.width}\r\n                            ref=\"scroll\"\r\n                            disableListTransition\r\n                            onScroll={handler.onScroll}\r\n                            scrollX\r\n                            class={virtual.classes.value}\r\n                            horizontalScrollbarTooltip={'推荐【表头使用鼠标滚轮】，或者【表体Alt键+鼠标滚轮】横向滚动'}\r\n                            v-slots={{\r\n                                default: () => (<div class=\"pl-virtual-list-strut\" style={strutStyles.value}>\r\n                                    <div class=\"pl-virtual-list-content\" ref=\"content\" style={virtual.contentStyles.value}>\r\n                                        <table {...{cellpadding: 0, cellspacing: 0, border: 0, style: tableStyles.value}}>\r\n                                            {slots.colgroup()}\r\n                                            {list.map((node) => scopedSlots.default(node))}\r\n                                        </table>\r\n                                    </div>\r\n                                </div>),\r\n                                content: () => (\r\n                                    !props.summaryData || props.summaryData.length === 0 ? null :\r\n                                        <div class=\"pl-virtual-table-summary-table-wrapper\" ref=\"summary\">\r\n                                            <table {...{cellpadding: 0, cellspacing: 0, border: 0, style: summaryTableStyles.value}}\r\n                                                   class=\"pl-virtual-table-summary-table\">\r\n                                                {slots.colgroup()}\r\n                                                {!props.summaryData ? null : props.summaryData.map((item, index) => scopedSlots.default({item, index}))}\r\n                                            </table>\r\n                                        </div>\r\n                                ),\r\n                            }}/>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {PltRow} from \"./row\";\r\nimport {PlVirtualTable} from \"../../virtual-table\";\r\nimport {renderColgroup} from \"../../plc/core/renderColgroup\";\r\nimport {useRefs} from \"../../../../use/useRefs\";\r\nimport {TableHoverPart} from \"../table.utils\";\r\nimport {TableNode} from \"../useTableNode\";\r\nimport {PlainScroll} from \"../../../scroll/scroll\";\r\n\r\nexport const PltBody = designComponent({\r\n    name: 'plt-head',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            virtual: PlVirtualTable,\r\n        })\r\n        /*表头表体联动滚动*/\r\n        const bindScroll = props.table.bindScroll(\r\n            TableHoverPart.body,\r\n            (scrollLeft, part) => part !== TableHoverPart.body && refs.virtual!.refs.scroll!.methods.scroll({x: scrollLeft}, {noEmitScroll: true})\r\n        );\r\n\r\n        const handler = {\r\n            /*表体支持alt+鼠标滚动联动滚动*/\r\n            onMousewheel: (e: MouseWheelEvent) => {\r\n                const {deltaX, deltaY} = e\r\n                if (e.altKey && Math.abs(deltaY) > Math.abs(deltaX)) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    refs.virtual!.refs.scroll!.refs.wrapper.scrollLeft = refs.virtual!.refs.scroll!.refs.wrapper.scrollLeft + deltaY / 3\r\n                }\r\n            },\r\n            onVnodeMounted: () => {\r\n                props.table.event.emit.onVirtualMounted({scroll: refs.virtual!.refs.scroll as PlainScroll})\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <PlVirtualTable\r\n                    class=\"plt-body\"\r\n                    ref=\"virtual\"\r\n                    key={props.table.plcData.value!.plcKeyString}\r\n                    width={props.table.plcData.value!.targetTableWidth!}\r\n                    size={props.table.numberState.bodyRowHeight}\r\n                    data={props.table.flatNodes.value}\r\n                    summaryData={props.table.summaryNodes.value || undefined}\r\n                    height={props.table.props.showRows * props.table.numberState.bodyRowHeight + 12}\r\n                    disabled={props.table.disabledVirtual.value}\r\n                    {...bindScroll}\r\n                    {...handler}\r\n                    v-slots={{\r\n                        default: ({item, index}: { item: TableNode, index: number }) => (\r\n                            <PltRow\r\n                                {...{vid: index}}\r\n                                key={index}\r\n                                table={props.table}\r\n                                node={item}\r\n                            />\r\n                        ),\r\n                        colgroup: () => renderColgroup(props.table.plcData.value!.flatPlcList)\r\n                    }}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import {StyleProperties, VNodeChild} from \"../../../../shims\";\r\nimport {TablePlc, TableRenderScope} from \"./plc.type\";\r\nimport {TablePlcAlign, TablePlcFixedType} from \"../../core/table.utils\";\r\nimport {PropType} from 'vue';\r\nimport {TableNode} from \"../../core/useTableNode\";\r\nimport {MultipleClass} from \"../../../../use/useClasses\";\r\nimport {FormRule} from \"../../../form/form.validate\";\r\n\r\nexport type PlcRenderFunction = (scope: TableRenderScope) => VNodeChild\r\nexport type PlcPropsHead = (scope: { plc: TablePlc }) => VNodeChild\r\nexport type PlcPropsDefault = PlcRenderFunction\r\nexport type PlcPropsSummary = PlcRenderFunction\r\nexport type PlcPropsEdit = PlcRenderFunction\r\nexport type PlcPropsRenderAfterRow = PlcRenderFunction\r\nexport type PlcPropsEditable = boolean | ((node: TableNode) => boolean)\r\n\r\nexport const PlcGroupProps = {\r\n    title: {type: String},                                                  // 列标题\r\n    align: {type: String as PropType<TablePlcAlign>},                       // 非编辑状态下文本对其方式\r\n    noPadding: {type: Boolean},                                             // 是否不兼容表格的虚拟滚动功能\r\n    colDraggable: {type: Boolean, default: null},                           // 列是否可以拖拽排序\r\n\r\n    hide: {type: Boolean},                                                  // 是否隐藏\r\n    order: {type: [String, Number]},                                        // 列排序\r\n    fixed: {type: String as PropType<TablePlcFixedType>, default: TablePlcFixedType.center},// 冻结列位置：left、right、undefined\r\n    autoFixedLeft: {type: Boolean},                                         // 当出现左固定列的时候，是否自动设置为左固定列\r\n    autoFixedRight: {type: Boolean},                                        // 当出现右固定列的时候，是否自动设置为右固定列\r\n\r\n    headCls: {},                                                            // 给表头添加的class\r\n    bodyCls: {},                                                            // 给表体添加的class\r\n}\r\n\r\nexport const PlcProps = {\r\n    ...PlcGroupProps,\r\n    field: {type: String},                                                  // 列绑定字段\r\n    width: {type: [String, Number], default: 120},                          // 列宽度\r\n    fit: {type: Boolean},                                                   // 列宽自适应(只有一个列能够自适应)\r\n    notFitVirtual: {type: Boolean},                                         // 是否不兼容表格的虚拟滚动功能\r\n\r\n    // 渲染函数\r\n    head: {type: Function as PropType<PlcPropsHead>},                       // 列标题渲染函数\r\n    default: {type: Function as PropType<PlcPropsDefault>},                 // 列内容默认渲染函数\r\n    summary: {type: Function as PropType<PlcPropsSummary>},                 // 列内容在合计行上的渲染函数\r\n    edit: {type: Function as PropType<PlcPropsEdit>},                       // 列内容在编辑状态下的渲染函数\r\n    renderAfterRow: {type: Function as PropType<PlcPropsRenderAfterRow>},   // 行之后需要额外渲染的内容\r\n\r\n    // 编辑相关\r\n    required: {type: Boolean},                                              // 是否必填\r\n    rules: {type: [Object, Array] as PropType<FormRule | FormRule[]>},      // 校验规则\r\n    editable: {type: [Boolean, Function] as PropType<PlcPropsEditable>, default: true},// 是否可编辑\r\n    addEditPadding: {type: Boolean},                                        // 处于编辑状态的时候，是否添加内编辑，只有当行状态为编辑状态，并且列有edit渲染函数或者作用域插槽时，才符合“处于编辑状态”的条件\r\n}\r\n\r\nexport type PlcPublicAttrsType = {\r\n    level: number,                      // 分组表头层级\r\n    rowspan: number,                    // 表头td的rowspan\r\n    colspan: number,                    // 表头td的colspan\r\n    isLastFixedLeft: boolean,           // 是否为最后一个左固定列\r\n    isFirstFixedRight: boolean,         // 是否为第一个右固定列\r\n    fixedPosition: {                    // 固定列的sticky位置\r\n        left: number,\r\n        right: number,\r\n    },\r\n    // 列style公共内联样式\r\n    styles: {\r\n        head: StyleProperties,\r\n        body: StyleProperties,\r\n    },\r\n    // 列公共class样式\r\n    classes: {\r\n        head: MultipleClass,\r\n        body: MultipleClass,\r\n    },\r\n}\r\n\r\n/**\r\n * Plc以及PlcGroup公共的一些属性\r\n * @author  韦胜健\r\n * @date    2020/12/18 14:41\r\n */\r\nexport const PlcPublicAttrs: PlcPublicAttrsType = {\r\n    level: 0,\r\n    rowspan: 1,\r\n    colspan: 1,\r\n    isLastFixedLeft: false,\r\n    isFirstFixedRight: false,\r\n    fixedPosition: {\r\n        left: 0,\r\n        right: 0,\r\n    },\r\n    styles: {\r\n        head: {},\r\n        body: {},\r\n    },\r\n    classes: {\r\n        head: [],\r\n        body: [],\r\n    },\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\nimport {PlcPublicAttrs} from \"../../core/plc.utils\";\r\n\r\n/**\r\n * 浅复制一份plc数据，复制plc最外层对象以及plc.props数据，props数据是需要动态计算修改的。\r\n * state不能复制，因为需要其响应式属性。\r\n * @author  韦胜健\r\n * @date    2020/12/18 10:06\r\n */\r\nexport function copyPlcList(plcList: TablePlc[]) {\r\n    return plcList.map(plc => {\r\n        const refer = plc.refer()\r\n        const newPlc: TablePlc = {\r\n            ...refer,\r\n            ...deepcopy(PlcPublicAttrs),\r\n        }\r\n        newPlc.props = {...newPlc.props}\r\n        if (newPlc.group) {\r\n            newPlc.children = copyPlcList(newPlc.children)\r\n        }\r\n        return newPlc\r\n    })\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\nimport {TablePlcFixedType, TablePropsConfig} from \"../../../core/table.utils\";\r\nimport {IteratePlcHandleType, iteratePlcList} from \"../utils/iteratePlcList\";\r\n\r\n/**\r\n * 处理Plc以及PlcGroup公共的，逻辑\r\n * @author  韦胜健\r\n * @date    2020/12/18 11:18\r\n */\r\nfunction handleTablePlc(plc: TablePlc, configData: { [k: string]: any } | null) {\r\n    const props = plc.props as any\r\n    const state = plc.state as any\r\n    // 如果有config，将config中的属性覆盖props\r\n    const configPlc = !configData ? null : configData[`${!plc.group ? plc.props.field : 'group'}_${plc.props.title}`]\r\n    if (!!configPlc) {\r\n        Object.keys(configPlc).forEach(key => {\r\n            if (configPlc[key] != null) props[key] = configPlc[key]\r\n        })\r\n    }\r\n    // 如果有state，将state中的属性覆盖props\r\n    Object.keys(plc.state).forEach(key => {\r\n        if (state[key] != null) props[key] = state[key]\r\n    })\r\n}\r\n\r\n/**\r\n * 处理plc的数据，以state、config、props为顺序，优先级依次递减，\r\n * 得到一个最终的plc.props 对象\r\n * @author  韦胜健\r\n * @date    2020/12/18 11:08\r\n */\r\nexport function processStateConfigAndProps(\r\n    {\r\n        plcList,\r\n        config,\r\n    }: {\r\n        plcList: TablePlc[],\r\n        config?: TablePropsConfig,\r\n    }\r\n) {\r\n    const configData = !config ? null : config(plcList)\r\n\r\n    const configState = {\r\n        notFitVirtual: [] as TablePlc[],                        // 不能使用虚拟滚动的列\r\n        fixedLeft: [] as TablePlc[],                            // 左固定的列\r\n        fixedRight: [] as TablePlc[],                           // 右固定的列\r\n        autoFixedLeft: [] as TablePlc[],                        // 需要自动左固定的列\r\n        autoFixedRight: [] as TablePlc[],                       // 需要自动右固定的列\r\n    }\r\n\r\n    /**\r\n     * - 根基plc的config，计算plc的属性。\r\n     * - 计算出需要自动左固定的plc，自动右固定的plc，左固定的plc，右固定的plc；以及计算出不兼容虚拟滚动的plc；\r\n     * - 如果group设置了自动左右固定或者左右固定，那么他的子组件plc或者group也要改成和父group一致的值；\r\n     * - 将隐藏的plc从group的子节点数据中移除\r\n     * @author  韦胜健\r\n     * @date    2020/8/12 10:24\r\n     */\r\n    iteratePlcList({\r\n        plcList,\r\n        onPlc: plc => {\r\n            handleTablePlc(plc, configData)\r\n            // 如果是隐藏的列，则删除这一列\r\n            if (plc.props.hide) {\r\n                return IteratePlcHandleType.remove\r\n            }\r\n            if (plc.props.notFitVirtual) configState.notFitVirtual.push(plc)\r\n            if (plc.props.autoFixedLeft) configState.autoFixedLeft.push(plc)\r\n            if (plc.props.autoFixedRight) configState.autoFixedRight.push(plc)\r\n            if (plc.props.fixed === TablePlcFixedType.left) configState.fixedLeft.push(plc)\r\n            if (plc.props.fixed === TablePlcFixedType.right) configState.fixedRight.push(plc)\r\n            return IteratePlcHandleType.nothing\r\n        },\r\n        onGroup: group => {\r\n            handleTablePlc(group, configData)\r\n            if (group.props.hide) {\r\n                return IteratePlcHandleType.remove\r\n            }\r\n            // 表头分组，子节点的固定方式，以及左固定、右固定随父节点控制\r\n            group.children.forEach(plc => {\r\n                plc.props.fixed = group.props.fixed\r\n                plc.props.autoFixedLeft = group.props.autoFixedLeft\r\n                plc.props.autoFixedRight = group.props.autoFixedRight\r\n            })\r\n            return IteratePlcHandleType.nothing\r\n        },\r\n    })\r\n\r\n    /**\r\n     * 在最终排序的时候，要求fixed是正确的，而跟autoFixedLeft，autoFixedRight的值无关\r\n     * @author  韦胜健\r\n     * @date    2020/12/18 11:26\r\n     */\r\n\r\n    /*如果存在左固定列，则设置autoFixedLeft为左固定*/\r\n    if (configState.fixedLeft.length > 0) {configState.autoFixedLeft.forEach(plc => plc.props.fixed = TablePlcFixedType.left)}\r\n\r\n    /*如果存在右固定列，则设置autoFixedRight为右固定*/\r\n    if (configState.fixedRight.length > 0) {configState.autoFixedRight.forEach(plc => plc.props.fixed = TablePlcFixedType.right)}\r\n\r\n    return configState\r\n}","import {Plc, TablePlc} from \"../../core/plc.type\";\r\nimport {IteratePlcHandleType, iteratePlcList} from \"../utils/iteratePlcList\";\r\nimport {insertSort} from \"plain-utils/object/insertSort\";\r\nimport {TablePlcFixedType} from \"../../../core/table.utils\";\r\n\r\n/**\r\n * 获取plc的排序索引\r\n * @author  韦胜健\r\n * @date    2020/12/18 14:23\r\n */\r\nfunction getPlcOrder(item: TablePlc): number {\r\n    let order = item.props.order || 0\r\n    if (item.props.fixed === TablePlcFixedType.left) {\r\n        order -= 9999\r\n    } else if (item.props.fixed === TablePlcFixedType.right) {\r\n        order += 9999\r\n    }\r\n    return Number(order)\r\n}\r\n\r\n/**\r\n * 对plc进行排序\r\n * @author  韦胜健\r\n * @date    2020/8/15 19:18\r\n */\r\nexport function processPlcSort(\r\n    {\r\n        plcList,\r\n        tableWidth,\r\n    }: {\r\n        plcList: TablePlc[],\r\n        tableWidth: number,\r\n    }\r\n) {\r\n    insertSort(plcList, (a, b) => getPlcOrder(a) > getPlcOrder(b))\r\n    /*计算 flatPlcList 自己 targetTableWidth*/\r\n    const flatPlcList = [] as Plc[]\r\n    iteratePlcList({\r\n        plcList,\r\n        onPlc: plc => {\r\n            flatPlcList.push(plc)\r\n            return IteratePlcHandleType.nothing\r\n        },\r\n        onGroup: group => {\r\n            group.children = insertSort(group.children, (a, b) => getPlcOrder(a) > getPlcOrder(b))\r\n            return IteratePlcHandleType.nothing\r\n        }\r\n    })\r\n\r\n    /*计算表格需要固定的宽度*/\r\n    const {targetTableWidth, plcKeyString} = (() => {\r\n        let totalPlcWidth = 0;                                          // 总的plc宽度\r\n        let fitPlc = null as null | Plc                                 // 需要自适应宽度的plc\r\n        const plcKeyString = [] as string[]\r\n        flatPlcList.forEach(plc => {\r\n            totalPlcWidth += plc.props.width\r\n            if (plc.props.fit) {\r\n                fitPlc = plc\r\n            } else if ((!fitPlc || !fitPlc.props.fit) && plc.props.fixed === TablePlcFixedType.center) {\r\n                fitPlc = plc\r\n            }\r\n            plcKeyString.push(plc.props.field || 'empty')\r\n        })\r\n        /**\r\n         * 目标table宽度，当总宽度小于tableWidth时，table不设置width宽度。因为table设置了min-width为100%，此时fit的列会自适应宽度。\r\n         * 当总宽度大于tableWidth时，table需要设置width宽度，否则会导致列被压缩\r\n         * @author  韦胜健\r\n         * @date    2020/12/18 15:28\r\n         */\r\n        let targetTableWidth = totalPlcWidth > tableWidth ? totalPlcWidth : null\r\n        if (!targetTableWidth && !!fitPlc) {\r\n            fitPlc.props.width = 0\r\n        }\r\n        return {targetTableWidth, plcKeyString: plcKeyString.join('_')}\r\n    })();\r\n\r\n    return {\r\n        targetTableWidth,\r\n        flatPlcList,\r\n        plcKeyString,\r\n    }\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\nimport {TablePlcFixedType} from \"../../../core/table.utils\";\r\n\r\n/**\r\n * 计算渲染表头所需要的二维数组以及层数\r\n * @author  韦胜健\r\n * @date    2020/12/18 14:38\r\n */\r\nexport function processHeadPlcList({plcList}: { plcList: TablePlc[] }) {\r\n    // 最大表头层数\r\n    let maxLevel = 1\r\n    // 计算最大层数\r\n    const calculateLevel = (list: TablePlc[] | null, level: number) => {\r\n        if (!!list && list.length > 0) {\r\n            if (level > maxLevel) maxLevel = level\r\n            list.forEach((item) => {\r\n                item.level = level - 1\r\n                if (item.group) {\r\n                    calculateLevel((item).children, level + 1)\r\n                }\r\n            })\r\n        }\r\n    }\r\n    calculateLevel(plcList, 1)\r\n\r\n    // 计算多级表头每个单元格所占行数以及列数\r\n    const calculateSpan = (item: TablePlc) => {\r\n        if (item.group) {\r\n            const group = item\r\n            group.children.forEach(calculateSpan)\r\n            group.rowspan = 1\r\n            group.colspan = 0\r\n            group.children.forEach(i => group.colspan += i.colspan)\r\n        } else {\r\n            const plc = item\r\n            plc.rowspan = maxLevel - plc.level\r\n            plc.colspan = 1\r\n        }\r\n    }\r\n    plcList.forEach(plc => calculateSpan(plc))\r\n\r\n    // 计算结果\r\n    const headPlcListArray: TablePlc[][] = []\r\n\r\n    for (let j = 0; j < maxLevel; j++) headPlcListArray.push([])\r\n    // 收集多级表头渲染数据\r\n    const calculateHeadColumns = (list: TablePlc[]) => {\r\n        if (!!list && list.length > 0) {\r\n            list.forEach((item) => {\r\n                headPlcListArray[item.level!].push(item)\r\n                if (item.group) {\r\n                    calculateHeadColumns((item).children)\r\n                }\r\n            })\r\n        }\r\n    }\r\n    calculateHeadColumns(plcList)\r\n    setFixedFlag(headPlcListArray[0])\r\n\r\n    return {\r\n        headPlcListArray,\r\n        maxLevel,\r\n    }\r\n}\r\n\r\n/**\r\n * 对plc设置标记，是否为最后一个左固定列，是否为第一个右固定列\r\n * @author  韦胜健\r\n * @date    2020/8/15 23:06\r\n */\r\nfunction setFixedFlag(plcList: TablePlc[]) {\r\n    let lastFixedLeft: TablePlc | undefined;\r\n    let firstFixedRight: TablePlc | undefined;\r\n\r\n    plcList.forEach(plc => {\r\n        if (plc.props.fixed === TablePlcFixedType.left) {\r\n            lastFixedLeft = plc\r\n        }\r\n        if (!firstFixedRight && plc.props.fixed === TablePlcFixedType.right) {\r\n            firstFixedRight = plc\r\n        }\r\n    })\r\n\r\n    /**\r\n     * 递归设置，每一层的lastFixedLeft\r\n     * @author  韦胜健\r\n     * @date    2020/12/18 14:46\r\n     */\r\n    function setLastFixedLeft(plc: TablePlc) {\r\n        plc.isLastFixedLeft = true\r\n        if (plc.group) {\r\n            setLastFixedLeft(plc.children[plc.children.length - 1])\r\n        }\r\n    }\r\n\r\n    !!lastFixedLeft && setLastFixedLeft(lastFixedLeft);\r\n\r\n    /**\r\n     * 递归设置每一层的firstFixedRight\r\n     * @author  韦胜健\r\n     * @date    2020/12/18 14:46\r\n     */\r\n    function setFirstFixedRight(plc: TablePlc) {\r\n        plc.isFirstFixedRight = true\r\n        if (plc.group) {\r\n            setFirstFixedRight(plc.children[0])\r\n        }\r\n    }\r\n\r\n    !!firstFixedRight && setFirstFixedRight(firstFixedRight)\r\n}","import {Plc, TablePlc} from \"../../core/plc.type\";\r\nimport {TablePlcFixedType} from \"../../../core/table.utils\";\r\nimport {StyleProperties} from \"../../../../../shims\";\r\n\r\n/**\r\n * 处理plc的fixed定位\r\n * @author  韦胜健\r\n * @date    2020/12/19 16:50\r\n */\r\nexport function processPlcFixed(flatPlcList: Plc[]) {\r\n    const collect = (() => {\r\n        const left = [] as Plc[]\r\n        const right = [] as Plc[]\r\n        flatPlcList.forEach(plc => {\r\n            switch (plc.props.fixed) {\r\n                case TablePlcFixedType.left:\r\n                    left.push(plc)\r\n                    break\r\n                case TablePlcFixedType.right:\r\n                    right.push(plc)\r\n                    break\r\n            }\r\n        })\r\n        return {\r\n            left,\r\n            right,\r\n        }\r\n    })();\r\n    const width = {\r\n        left: 0,\r\n        right: 0,\r\n    };\r\n    Object.keys(collect).forEach((item) => {\r\n        const key = item as 'left' | 'right'\r\n        let list = collect[key]!\r\n        if (key === 'right') {list = list.reverse()}\r\n\r\n        for (let i = 0; i < list.length; i++) {\r\n            const element = list[i];\r\n            width[key] += element.props.width\r\n            if (i === 0) {\r\n                element.fixedPosition[key] = 0\r\n            } else {\r\n                const {props: {width: prevWidth}, fixedPosition: {[key]: prevValue}} = list[i - 1]!\r\n                element.fixedPosition[key] = Number(prevWidth) + prevValue\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\n/**\r\n * 获取plcFixed样式\r\n * @author  韦胜健\r\n * @date    2020/12/19 16:55\r\n */\r\nexport function getPlcFixedStyle(plc: TablePlc) {\r\n    const {props: {fixed}} = plc\r\n    const styles = {} as StyleProperties\r\n    if (fixed === TablePlcFixedType.center) {\r\n        return styles\r\n    }\r\n    styles.position = 'sticky'\r\n    styles.zIndex = 3\r\n\r\n    if (!plc.group) {\r\n        styles[fixed] = plc.fixedPosition[fixed] + 'px'\r\n    } else {\r\n        let count = 10\r\n        const isFixedLeft = fixed === TablePlcFixedType.left\r\n        while (!!plc && plc.group && count > 0) {\r\n            plc = plc.children[isFixedLeft ? 0 : plc.children.length - 1]\r\n            count--\r\n        }\r\n        if (count === 0 && !!plc) {\r\n            throw new Error('解析异常')\r\n        }\r\n        if (!!plc) {\r\n            styles[fixed] = plc.fixedPosition[fixed] + 'px'\r\n        }\r\n    }\r\n    return styles\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\n\r\nexport function getPltCellClass(plc: TablePlc) {\r\n    return {\r\n        // 'pl-cell-group': plc.group,\r\n        [`plt-cell-align-${plc.props.align}`]: !!plc.props.align,\r\n    }\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\nimport {getPlcFixedStyle} from \"./processPlcFixed\";\r\nimport {getPltCellClass} from \"./getPltCellClass\";\r\n\r\nexport function processPlcClassAndStyle(\r\n    {\r\n        headPlcListArray,\r\n    }: {\r\n        headPlcListArray: TablePlc[][],\r\n    }\r\n) {\r\n    headPlcListArray.forEach((list) => {\r\n        list.forEach((plc) => {\r\n            /*---------------------------------------head-------------------------------------------*/\r\n            plc.styles.head = getPlcFixedStyle(plc)\r\n            plc.classes.head = [\r\n                'plt-cell',\r\n                'plt-head-cell',\r\n                {\r\n                    ...getPltCellClass(plc),\r\n                    'plt-cell-last-fixed-left': plc.isLastFixedLeft,\r\n                    'plt-cell-first-fixed-right': plc.isFirstFixedRight,\r\n                    'plt-cell-no-padding': plc.props.noPadding,\r\n                }\r\n            ]\r\n            /*---------------------------------------body-------------------------------------------*/\r\n            if (!plc.group) {\r\n                plc.styles.body = getPlcFixedStyle(plc)\r\n                plc.classes.body = [\r\n                    'plt-cell',\r\n                    'plt-body-cell',\r\n                    {\r\n                        ...getPltCellClass(plc),\r\n                        'plt-cell-add-edit-padding': plc.props.addEditPadding,\r\n                        'plt-cell-last-fixed-left': plc.isLastFixedLeft,\r\n                        'plt-cell-first-fixed-right': plc.isFirstFixedRight,\r\n                        'plt-cell-no-padding': plc.props.noPadding,\r\n                    },\r\n                ]\r\n            }\r\n        })\r\n    })\r\n}","import {Plc, TablePlc} from \"../core/plc.type\";\r\nimport {copyPlcList} from \"./process/copyPlcList\";\r\nimport {processStateConfigAndProps} from \"./process/processStateConfigAndProps\";\r\nimport {ExtractPropTypes} from 'vue';\r\nimport {TableProps} from \"../../core/table.utils\";\r\nimport {processPlcSort} from \"./process/processPlcSort\";\r\nimport {processHeadPlcList} from \"./process/processHeadPlcList\";\r\nimport {processPlcFixed} from \"./process/processPlcFixed\";\r\nimport {processPlcClassAndStyle} from \"./process/processPlcClassAndStyle\";\r\n\r\nexport function formatPlcList(\r\n    {\r\n        plcList,\r\n        props,\r\n        tableWidth,\r\n    }: {\r\n        plcList: TablePlc[],\r\n        props: ExtractPropTypes<typeof TableProps>,\r\n        tableWidth: number,\r\n    }\r\n) {\r\n    /*复制一份plc数据*/\r\n    plcList = copyPlcList(plcList)\r\n    /*处理state、config以及props*/\r\n    const {notFitVirtual} = processStateConfigAndProps({plcList, config: props.config})\r\n    /*对plc进行排序*/\r\n    const {flatPlcList, targetTableWidth, plcKeyString} = processPlcSort({plcList, tableWidth})\r\n    /*计算表头渲染需要的数据*/\r\n    const {headPlcListArray, maxLevel} = processHeadPlcList({plcList})\r\n    /*计算固定列所需要的left，right值*/\r\n    processPlcFixed(flatPlcList)\r\n    /*计算plc的class以及style*/\r\n    processPlcClassAndStyle({headPlcListArray})\r\n\r\n    /*需要在行之后渲染其他内容的plcList*/\r\n    let plcListHasRenderAfterRow = flatPlcList.filter(plc => plc.props.renderAfterRow) as (Plc[] | null)\r\n    if (!!plcListHasRenderAfterRow && plcListHasRenderAfterRow.length === 0) {plcListHasRenderAfterRow = null}\r\n\r\n    return {\r\n        plcList,                                                // 列数组数据，树形结构的数据\r\n        flatPlcList,                                            // 展开之后最底层的列数组\r\n        targetTableWidth,                                       // 表格设置的样式宽度\r\n        tableWidth,                                             // 表格容器宽度\r\n        notFitVirtual,                                          // 不兼容虚拟列表的列数组\r\n        headPlcListArray,                                       // 表头渲染的二维数组\r\n        plcKeyString,                                           // 当列排序或者其他属性变化之后，需要刷新body，否则会出现部分节点没有更新的问题\r\n        maxLevel,                                               // 表头层级\r\n        plcListHasRenderAfterRow,                               // 列需要在行之后多渲染的数据\r\n    }\r\n}","import {computed, ExtractPropTypes, onMounted, reactive} from 'vue';\r\nimport {useRefs} from \"../../../../use/useRefs\";\r\nimport {TableProps} from \"../../core/table.utils\";\r\nimport {useNumber} from \"../../../../use/useNumber\";\r\nimport PlcCollector from \"../core/plc-collector\";\r\nimport {formatPlcList} from \"./formatPlcList\";\r\n\r\nexport function usePlcList(\r\n    {\r\n        props,\r\n    }: {\r\n        props: ExtractPropTypes<typeof TableProps>\r\n    }\r\n) {\r\n\r\n    const {refs} = useRefs({\r\n        collector: PlcCollector,\r\n        el: HTMLDivElement,\r\n    })\r\n\r\n    /*---------------------------------------state-------------------------------------------*/\r\n\r\n    const state = reactive({\r\n        /*表格宽度*/\r\n        tableWidth: null as null | number,\r\n    })\r\n    const {numberState} = useNumber(props, ['bodyRowHeight', 'headRowHeight'])\r\n\r\n    /*---------------------------------------computed-------------------------------------------*/\r\n\r\n    const plcData = computed(() => {\r\n        if (!state.tableWidth) {\r\n            return null\r\n        }\r\n        const {children} = refs.collector!\r\n        return formatPlcList({\r\n            plcList: children,\r\n            props,\r\n            tableWidth: state.tableWidth,\r\n        })\r\n    })\r\n\r\n    onMounted(() => {\r\n        state.tableWidth = refs.el.offsetWidth\r\n    })\r\n\r\n    return {\r\n        numberState,\r\n        plcData,\r\n    }\r\n}","import {TableHoverPart} from \"./table.utils\";\r\nimport {ref} from 'vue';\r\n\r\n/**\r\n * 绑定表头表体联动滚动\r\n * @author  韦胜健\r\n * @date    2020/12/18 16:27\r\n */\r\nexport function useBindScroll(\r\n    event: {\r\n        emit: {\r\n            onScrollLeft: (scrollLeft: number, part: TableHoverPart) => void,\r\n        },\r\n        on: {\r\n            onScrollLeft: (cb: (scrollLeft: number, part: TableHoverPart) => void) => void,\r\n        },\r\n    }\r\n) {\r\n    const hoverPart = ref(null as null | TableHoverPart)\r\n    return {\r\n        bindScroll: (part: TableHoverPart, updateLeft: (left: number, part: TableHoverPart) => void) => {\r\n            event.on.onScrollLeft((left, part) => updateLeft(left, part))\r\n            return {\r\n                onMouseenter: () => hoverPart.value = part,\r\n                onScroll: (e: Event) => hoverPart.value === part && event.emit.onScrollLeft((e as any).target.scrollLeft, part)\r\n            }\r\n        }\r\n    }\r\n}","import {SimpleObject} from \"../../../shims\";\r\nimport {TreeNodeCheckStatus} from \"../../tree/utils/tree-constant\";\r\nimport {FormValidate, FormValidateResultMap, FormValidateReturn} from \"../../form/form.validate\";\r\nimport {computed, ExtractPropTypes} from 'vue';\r\nimport {TableProps} from \"./table.utils\";\r\nimport {createKeyHandler} from \"../../../utils/createKeyHandler\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\nimport {useTree} from \"../../tree/core/useTree\";\r\n\r\nexport function useTableNode(\r\n    {\r\n        props,\r\n        emit,\r\n        getValidate,\r\n    }: {\r\n        props: ExtractPropTypes<typeof TableProps>,\r\n        getValidate: () => FormValidate,\r\n        emit: {\r\n            onExpand: (node: TableNode) => void,\r\n            onExpandChange: (keys: string[]) => void,\r\n            onCollapse: (node: TableNode) => void,\r\n            onCheck: (node: TableNode) => void,\r\n            onUncheck: (node: TableNode) => void,\r\n            onCheckChange: (keys: string[]) => void,\r\n            onClickNode: (node: TableNode) => void,\r\n            onUpdateData: (data?: SimpleObject[]) => void,\r\n            onUpdateCurrentKey: (key?: string) => void,\r\n        },\r\n    }\r\n) {\r\n    const {state, dataModel, utils, methods, current, handler} = useTree<TableNode>({\r\n        props,\r\n        keyManager: createKeyHandler('table'),\r\n        emit,\r\n        getTreeNodeByDataAdjust: node => {\r\n            node.isSummary = false\r\n            node.edit = false\r\n            node.editRow = node.data\r\n            node.validateResultMap = null\r\n            node.openEdit = function () {this.edit = true}\r\n            node.closeEdit = function () {this.edit = false}\r\n            node.enableEdit = function () {\r\n                if (this.edit) return\r\n                this.editRow = deepcopy(this.data)\r\n                this.openEdit()\r\n                this.validate()\r\n            }\r\n            node.cancelEdit = function () {this.edit && this.closeEdit()}\r\n            node.validate = async function () {\r\n                const {methods: {validate}} = getValidate()\r\n                const {validateMessage, validateResult, validateResultMap} = await validate(this.editRow)\r\n                this.validateResultMap = validateResultMap || null\r\n                return !validateMessage ? null : {\r\n                    validateMessage,\r\n                    validateResult,\r\n                    validateResultMap,\r\n                    node: this,\r\n                }\r\n            }\r\n            node.saveEdit = async function (newRow) {\r\n                if (!this.edit) return\r\n                let {data, editRow} = this\r\n                newRow = newRow || this.editRow\r\n                Object.keys({...data, ...editRow, ...newRow}).forEach(k => this.data[k] = newRow[k])\r\n            }\r\n        }\r\n    })\r\n    /*拍平的数组*/\r\n    const flatNodes = computed(() => {\r\n        let list: TableNode[] = []\r\n        if (!state.root) {\r\n            return []\r\n        }\r\n        utils.iterate({\r\n            nodes: state.root.children,\r\n            iterateChildren: (treeNode) => treeNode.expand,\r\n            handler: (treeNode) => list.push(treeNode),\r\n        },)\r\n        list = list.filter((treeNode) => !!treeNode.isVisible)\r\n        list.forEach((node, index) => node.index = index)\r\n        return list\r\n    })\r\n    const summaryNodes = computed(() => !props.summaryData ? null : props.summaryData.map((data) => utils.getTreeNodeByData({data, level: 1, parentRef: null as any, adjust: node => node.isSummary = true})))\r\n    return {state, dataModel, flatNodes, summaryNodes, methods, current, handler, utils}\r\n}\r\n\r\nexport type TableNode = {\r\n\r\n    key: string,                                        // 节点唯一标识\r\n    data: SimpleObject,                                 // 节点数据\r\n    level: number,                                      // 节点层级\r\n    parentRef: () => TableNode | null,                  // 父节点引用\r\n    selfRef: () => TableNode,                           // 自身引用\r\n    index: number,                                      // 节点索引\r\n    children?: TableNode[],                             // 子节点数组\r\n\r\n    expand: boolean,                                    // 节点是否已经展开\r\n    check: boolean,                                     // 节点是够已经选中\r\n    loading: boolean,                                   // 节点是否处于加载状态\r\n    loaded: boolean,                                    // 节点是否已经加载完毕\r\n\r\n    readonly childrenData?: SimpleObject[]              // 子节点数据数组\r\n    readonly checkStatus: TreeNodeCheckStatus,          // 节点选中状态\r\n    readonly isCheckable: boolean,                      // 节点是否可以选择\r\n    readonly isLeaf: boolean,                           // 节点是否为叶子节点\r\n    readonly isVisible: boolean,                        // 节点是否可见\r\n\r\n    /*---------------------------------------edit-------------------------------------------*/\r\n\r\n    isSummary: boolean,                                 // 当前是否为合计行数据\r\n    edit: boolean,                                      // 当前是否处于可编辑状态\r\n    editRow: SimpleObject,                              // 编辑行对象\r\n    validateResultMap: FormValidateResultMap | null,    // 当前行的校验结果\r\n\r\n    openEdit: () => void,                               // 开启编辑状态（不做任何处理）\r\n    closeEdit: () => void,                              // 关闭编辑状态（不做任何处理）\r\n    enableEdit: () => void,                             // 开启编辑状态（先判断当前是否可编辑，深度赋值一份data赋值给editRow，并且立即执行校验）\r\n    cancelEdit: () => void,                             // 取消编辑状态\r\n    validate: () => Promise<(FormValidateReturn & { node: TableNode }) | null>, // 校验数据\r\n    saveEdit: (newRow: SimpleObject) => Promise<void>,  // 保存编辑，将editRow以及newRow（请求得到的新对象）覆盖data\r\n\r\n}","import {PlainScroll} from \"../../scroll/scroll\";\r\n\r\nexport function useTableGetScroll(onVirtualMounted: (cb: (data: { scroll: PlainScroll }) => void) => void, onChange?: (scroll: PlainScroll) => void) {\r\n    let val: PlainScroll\r\n    onVirtualMounted(({scroll}) => {\r\n        val = scroll;\r\n        !!onChange && onChange(scroll)\r\n    })\r\n    return {\r\n        getScroll: () => val!\r\n    }\r\n}","import {PlainScroll} from \"../../scroll/scroll\";\r\nimport {computed, reactive} from 'vue';\r\nimport {useTableGetScroll} from \"./useTableGetScroll\";\r\n\r\nexport function useFixedShadow(event: {\r\n    on: {\r\n        onVirtualMounted: (cb: (data: { scroll: PlainScroll }) => void) => void,\r\n    }\r\n}) {\r\n    const state = reactive({\r\n        showFixedLeft: false,\r\n        showFixedRight: false,\r\n    })\r\n    const freeState = {\r\n        scroll: null as null | PlainScroll,\r\n        onScroll: () => {\r\n            const {freezeState: {wrapperScrollLeft}, state: {hostWidth, contentWidth}} = freeState.scroll!\r\n            state.showFixedLeft = contentWidth > hostWidth && wrapperScrollLeft > 0\r\n            state.showFixedRight = contentWidth > hostWidth && Math.abs(wrapperScrollLeft + hostWidth - contentWidth) > 5\r\n        }\r\n    }\r\n    useTableGetScroll(event.on.onVirtualMounted, (scroll) => {\r\n        if (!!freeState.scroll) {freeState.scroll.off.onScroll(freeState.onScroll)}\r\n        freeState.scroll = scroll\r\n        scroll.on.onScroll(freeState.onScroll)\r\n        freeState.onScroll()\r\n    })\r\n    const classes = computed(() => [\r\n        {\r\n            'plt-table-hide-fixed-left': !state.showFixedLeft,\r\n            'plt-table-hide-fixed-right': !state.showFixedRight,\r\n        }\r\n    ])\r\n    return {\r\n        fixedShadowClass: classes,\r\n    }\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport PlcCollector from './plc/core/plc-collector'\r\nimport {PltHead} from \"./core/head/head\";\r\nimport {PltBody} from \"./core/body/body\";\r\nimport './table.scss'\r\nimport {TableHoverPart, TableProps} from './core/table.utils';\r\nimport {usePlcList} from \"./plc/format/usePlcList\";\r\nimport {computed, ComputedRef, inject, onMounted, PropType} from 'vue';\r\nimport {useBindScroll} from \"./core/useBindScroll\";\r\nimport {TableNode, useTableNode} from \"./core/useTableNode\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {PlainScroll} from \"../scroll/scroll\";\r\nimport {useFixedShadow} from \"./core/useFixedShadow\";\r\nimport {StyleShape, StyleSize, useStyle} from \"../../use/useStyle\";\r\nimport {formatFormRules, FormValidate} from \"../form/form.validate\";\r\nimport {useTree} from \"../tree/core/useTree\";\r\nimport {hasClass} from \"plain-utils/dom/hasClass\";\r\n\r\nexport const PlTable = designComponent({\r\n    name: 'pl-table',\r\n    props: {\r\n        ...TableProps,\r\n    },\r\n    provideRefer: true,\r\n    emits: {\r\n        ...useTree.createEvent<TableNode>(),\r\n        onScrollLeft: (scrollLeft: number, part: TableHoverPart) => true,\r\n        onVirtualMounted: (data: { scroll: PlainScroll }) => true,\r\n\r\n        onClickRow: (node: TableNode, e: MouseEvent) => true,\r\n        onDblclickRow: (node: TableNode, e: MouseEvent) => true,\r\n        onClickCell: (node: TableNode, e: MouseEvent) => true,\r\n        onDblclickCell: (node: TableNode, e: MouseEvent) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        const {styleComputed} = useStyle({\r\n            adjust: config => {\r\n                config.shape = props.shape || StyleShape.square\r\n                config.size = props.size || StyleSize.normal\r\n                config.status = props.status\r\n            }\r\n        })\r\n        const {emit} = event\r\n        const {slots} = useSlots()\r\n        const {numberState, plcData} = usePlcList({props})\r\n        const {bindScroll} = useBindScroll(event)\r\n        const {state, flatNodes, summaryNodes, dataModel, methods, current, handler, utils} = useTableNode({props, emit, getValidate: () => formValidate.value})\r\n        const {fixedShadowClass} = useFixedShadow(event)\r\n        const formValidate = computed(() => formatFormRules(\r\n            props.rules,\r\n            !plcData.value ? undefined : plcData.value.flatPlcList.map(plc => ({\r\n                label: plc.props.title,\r\n                field: plc.props.field,\r\n                required: plc.props.required,\r\n                rules: plc.props.rules,\r\n            })))) as ComputedRef<FormValidate>\r\n\r\n        /*是否可以启用虚拟滚动*/\r\n        const disabledVirtual = computed(() => props.virtual == false || (!!plcData.value && plcData.value.notFitVirtual.length > 0))\r\n\r\n        const classes = computed(() => [\r\n            'pl-table',\r\n            `pl-table-size-${styleComputed.value.size}`,\r\n            `pl-table-shape-${styleComputed.value.shape}`,\r\n            {\r\n                'pl-table-border': props.border,\r\n                'pl-table-stripe': props.stripe,\r\n            },\r\n            ...fixedShadowClass.value,\r\n        ])\r\n\r\n        const exposeHandler = {\r\n            ...handler,\r\n            onClickRow: (e: MouseEvent, node: TableNode) => {\r\n                methods.setCurrent(node.key);\r\n                emit.onClickRow(node, e);\r\n                hasClass(e.target as HTMLElement, 'plt-cell') && emit.onClickCell(node, e);\r\n            },\r\n            onDblclickRow: (e: MouseEvent, node: TableNode) => {\r\n                emit.onDblclickRow(node, e)\r\n                hasClass(e.target as HTMLElement, 'plt-cell') && emit.onDblclickCell(node, e);\r\n            }\r\n        }\r\n\r\n        const refer = {\r\n            refs,\r\n            props,\r\n            numberState,\r\n            plcData,\r\n            bindScroll,\r\n            event,\r\n            dataModel,\r\n            state, flatNodes, summaryNodes,\r\n            disabledVirtual,\r\n            handler: exposeHandler,\r\n            ...methods,\r\n            formValidate,\r\n            current,\r\n            utils,\r\n        }\r\n\r\n        onMounted(() => {\r\n            // console.log(refer.nodeState)\r\n        })\r\n\r\n        return {\r\n            refer,\r\n            render: () => (\r\n                <div class={classes.value} ref=\"el\" v-loading={props.loading || state.root.loading}>\r\n                    <PlcCollector ref=\"collector\">{slots.default()}</PlcCollector>\r\n                    {!!plcData.value && <>\r\n                        {!props.hideHeader && <PltHead table={refer}/>}\r\n                        <PltBody table={refer}/>\r\n                    </>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const PlainTable = Object as PropType<typeof PlTable.use.class>\r\n\r\nexport function injectPlainTable() {return inject('@@pl-table') as typeof PlTable.use.class}","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlTable} from './table'\r\n\r\nexport default createComponentPlugin(PlTable)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlVirtualTable} from \"../table/virtual-table\";\r\n\r\nexport default createComponentPlugin(PlVirtualTable)","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlcProps, PlcPublicAttrs} from \"./plc.utils\";\r\nimport {TablePlcCollector} from './plc-collector';\r\nimport {Plc, TablePlc} from \"./plc.type\";\r\nimport {useNumber} from \"../../../../use/useNumber\";\r\nimport {computed, ExtractPropTypes, PropType, reactive} from 'vue';\r\nimport {useScopedSlots} from \"../../../../use/useScopedSlots\";\r\nimport {TableNode} from \"../../core/useTableNode\";\r\n\r\nexport function usePlc(props: ExtractPropTypes<typeof PlcProps>) {\r\n\r\n    const {scopedSlots} = useScopedSlots({\r\n        head: {plc: Object as PropType<TablePlc>},\r\n        default: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>},\r\n        edit: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>},\r\n        summary: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>},\r\n    }, true)\r\n    /*collector收集列信息*/\r\n    TablePlcCollector.useChild()\r\n    /*格式化props*/\r\n    const {numberState} = useNumber(props, ['order', 'width'])\r\n    /*目标props*/\r\n    const formatProps = computed(() => ({\r\n        ...props,\r\n        ...numberState,\r\n    }) as Omit<typeof props, 'order' | 'width'> & typeof numberState)\r\n    /*props的一个副本，不过如果有值的情况下，优先级比props中的值高（比config值也高）*/\r\n    const propsState = reactive(Object.keys(PlcProps).reduce((ret: any, key: string) => {\r\n        ret[key] = null\r\n        return ret\r\n    }, {}) as { [k in keyof typeof formatProps.value]: typeof formatProps.value[k] | null })\r\n\r\n    const plc: Plc = reactive({\r\n        /*PlcPublicAttrs 在 copyPlc中会深度复制一遍，这里适配类型即可*/\r\n        ...PlcPublicAttrs,\r\n        group: false,\r\n        props: formatProps,\r\n        state: propsState,\r\n        refer: () => plc,\r\n        setDurWidth: (durWidth: number) => propsState.width = Number((formatProps.value.width)) + durWidth,\r\n        scopedSlots,\r\n    })\r\n\r\n    return {\r\n        refer: plc,\r\n        render: () => (<i {...{title: props.title, field: props.field}}/>)\r\n    }\r\n}\r\n\r\nexport default designComponent({\r\n    name: 'plc',\r\n    props: {\r\n        ...PlcProps,\r\n    },\r\n    setup({props}) {\r\n        return usePlc(props)\r\n    },\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlcProps} from \"./plc.utils\";\r\nimport {usePlc} from \"./plc\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\nimport {ComponentInternalInstance, ComponentPropsOptions, ExtractPropTypes} from 'vue';\r\nimport {VNodeChild} from \"../../../../shims\";\r\nimport {Plc} from \"./plc.type\";\r\nimport {TableNode} from \"../../core/useTableNode\";\r\n\r\nexport function designPlc<_,\r\n    ExternalProps extends Readonly<ComponentPropsOptions> = {},\r\n    TargetProps = ExtractPropTypes<typeof PlcProps & ExternalProps>,\r\n    ExternalRefer = {},\r\n    >(\r\n    {\r\n        name,\r\n        standardProps,\r\n        externalProps,\r\n        setup,\r\n    }: {\r\n        name: string,\r\n        standardProps?: Partial<{ [k in keyof typeof PlcProps]: any }>,\r\n        externalProps?: ExternalProps,\r\n        setup?: (props: TargetProps, ctx: ComponentInternalInstance) => ExternalRefer,\r\n    },\r\n    render?: {\r\n        head?: (scope: { plc: Plc, props: TargetProps, refer: ExternalRefer }) => VNodeChild,\r\n        default?: (scope: { node: TableNode, plc: Plc, row: any, props: TargetProps, refer: ExternalRefer }) => VNodeChild,\r\n        summary?: (scope: { node: TableNode, plc: Plc, row: any, props: TargetProps, refer: ExternalRefer }) => VNodeChild,\r\n        edit?: (scope: { node: TableNode, plc: Plc, row: any, props: TargetProps, refer: ExternalRefer }) => VNodeChild,\r\n    },\r\n) {\r\n    const OptionProps = deepcopy(PlcProps)\r\n\r\n    Object.entries(OptionProps).map(([key, value]) => {\r\n        if (!!standardProps && !!(standardProps as any)[key]) {\r\n            Object.assign(value, (standardProps as any)[key])\r\n        }\r\n        if (!!(render as any)[key]) {\r\n            (value as any).default = function (scope: any) {\r\n                return (render as any)[key]({\r\n                    ...scope,\r\n                    refer: !scope.plc.externalRefer ? null : scope.plc.externalRefer(),\r\n                    props: scope.plc.props\r\n                })\r\n            }\r\n        }\r\n    })\r\n\r\n    return designComponent({\r\n        name,\r\n        props: {\r\n            ...OptionProps,\r\n            ...(externalProps || {}),\r\n        },\r\n        setup({props, ctx}) {\r\n            const {render, refer} = usePlc(props)\r\n            if (!!setup) {\r\n                const externalRefer = setup(props as any, ctx!)\r\n                Object.assign(refer, {externalRefer: () => externalRefer})\r\n            }\r\n            return {\r\n                refer,\r\n                render,\r\n            }\r\n        },\r\n    })\r\n}","import {designPlc} from \"../core/designPlc\";\r\nimport {PlInput} from \"../../../input/input\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-input',\r\n}, {\r\n    edit: ({row, plc}) => !plc.props.field ? null : <PlInput v-model={row[plc.props.field]}/>\r\n},)","import {designPlc} from \"../core/designPlc\";\r\nimport {PlNumber} from \"../../../number/number\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-number',\r\n}, {\r\n    edit: ({row, plc}) => !plc.props.field ? null : <PlNumber v-model={row[plc.props.field]}/>\r\n},)","import {designPlc} from \"../core/designPlc\";\r\n// import {PlDate} from \"../../../date/date\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-date',\r\n}, {\r\n    edit: ({row, plc}) => !plc.props.field ? null : <pl-date v-model={row[plc.props.field]}/>\r\n},)","import {designPlc} from \"../core/designPlc\";\r\nimport {PlColorButton} from \"../../../color-picker/color-button\";\r\nimport {PlColorPicker} from \"../../../color-picker/color-picker\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-color-picker',\r\n}, {\r\n    default: ({row, plc}) => {\r\n        return !!plc.props.field && <>\r\n            <PlColorButton color={row[plc.props.field]} style=\"margin-right:6px;\"/>\r\n            {row[plc.props.field]}\r\n        </>\r\n    },\r\n    edit: ({row, plc}) => !plc.props.field ? null : <PlColorPicker v-model={row[plc.props.field]}/>\r\n},)","import {designPlc} from \"../core/designPlc\";\r\nimport {PlToggle} from \"../../../toggle/toggle\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-toggle',\r\n    standardProps: {\r\n        addEditPadding: {default: true},\r\n    },\r\n}, {\r\n    summary: () => null,\r\n    default: ({row, plc}) => !plc.props.field ? null : <PlToggle disabled v-model={row[plc.props.field]} trueValue=\"Y\" falseValue=\"N\"/>,\r\n    edit: ({row, plc}) => !plc.props.field ? null : <PlToggle v-model={row[plc.props.field]} trueValue=\"Y\" falseValue=\"N\"/>,\r\n})","import {designPlc} from \"../core/designPlc\";\r\nimport {PlRate} from \"../../../rate/rate\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-rate',\r\n    standardProps: {\r\n        addEditPadding: {default: true},\r\n    },\r\n}, {\r\n    default: ({row, plc}) => !plc.props.field ? null : <PlRate disabled v-model={row[plc.props.field]}/>,\r\n    edit: ({row, plc}) => !plc.props.field ? null : <PlRate v-model={row[plc.props.field]}/>,\r\n})","import {designPlc} from \"../core/designPlc\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-index',\r\n    standardProps: {\r\n        autoFixedLeft: {default: true},\r\n        order: {default: -9999},\r\n        width: {default: 45},\r\n        align: {default: 'center'},\r\n        noPadding: {default: true},\r\n    },\r\n    externalProps: {\r\n        summaryText: {type: String, default: '合计'},\r\n    },\r\n}, {\r\n    head: () => '#',\r\n    default: ({node}) => node.index + 1,\r\n    summary: ({props}) => <span class=\"plc-index-summary-text\">{props.summaryText}</span>,\r\n})","import {designPlc} from \"../core/designPlc\";\r\nimport {reactive, computed, ComputedRef, PropType, onBeforeUnmount} from 'vue';\r\nimport {injectPlainTable} from \"../../table\";\r\nimport {TableNode} from \"../../core/useTableNode\";\r\nimport {SimpleObject, VNodeChild} from \"../../../../shims\";\r\nimport {Plc, TableRenderScope} from \"../core/plc.type\";\r\nimport {useScopedSlots} from \"../../../../use/useScopedSlots\";\r\nimport {PlButton} from \"../../../button/button\";\r\nimport {PlDropdown} from \"../../../dropdown/dropdown\";\r\nimport {PlDropdownMenu} from \"../../../dropdown/dropdown-menu\";\r\nimport {PlDropdownOption} from \"../../../dropdown/dropdown-option\";\r\n\r\ninterface ExpandRefer {\r\n    isExpand: (node: TableNode) => boolean,\r\n    totalSpan: ComputedRef<number>,\r\n    state: { expandKeys: Record<string, boolean> },\r\n    toggle: (node: TableNode) => void,\r\n    scopedSlots: {\r\n        expand: ((scope: TableRenderScope, vnode: VNodeChild) => VNodeChild)\r\n    },\r\n    width: () => number,\r\n    methods: {\r\n        expandAll: () => void,\r\n        collapseAll: () => void,\r\n    },\r\n}\r\n\r\nexport default designPlc(\r\n    {\r\n        name: 'plc-expand',\r\n        standardProps: {\r\n            autoFixedLeft: {default: true},\r\n            order: {default: -9997},\r\n            width: {default: 60},\r\n            align: {default: 'center'},\r\n            notFitVirtual: {default: true},\r\n            noPadding: {default: true},\r\n            renderAfterRow: {\r\n                default: ({plc, node, row}: { plc: Plc & { externalRefer: () => ExpandRefer }, node: TableNode, row: SimpleObject }) => {\r\n                    const refer = plc.externalRefer()\r\n                    if (!refer.isExpand(node)) {return null}\r\n                    return (\r\n                        <tr class=\"plt-row plt-expand-row\">\r\n                            <td class=\"plt-cell\" rowspan={1} colspan={refer.totalSpan.value}>\r\n                                <div class=\"plt-expand-body\" style={`width:${refer.width() - 20}px`}>\r\n                                    {refer.scopedSlots.expand({node, plc, row})}\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    )\r\n                }\r\n            },\r\n        },\r\n        externalProps: {\r\n            toggleOnClickRow: {type: Boolean},                      // 是否在点击行的时候触发点击动作\r\n            summaryExpand: {type: Boolean},                         // 合计行是否可以展开\r\n        },\r\n        setup: (props) => {\r\n            const table = injectPlainTable()\r\n            const {scopedSlots} = useScopedSlots({\r\n                expand: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>, row: Object as PropType<SimpleObject>},\r\n            })\r\n            const state = reactive({\r\n                expandKeys: {} as Record<string, boolean>,\r\n            })\r\n            const totalSpan = computed(() => !table.plcData.value ? 1 : table.plcData.value.flatPlcList.length)\r\n            const isExpand = (node: TableNode) => state.expandKeys[node.key]\r\n            const toggle = (node: TableNode) => isExpand(node) ? close(node) : expand(node)\r\n            const expand = (node: TableNode) => state.expandKeys[node.key] = true\r\n            const close = (node: TableNode) => state.expandKeys[node.key] = false\r\n            if (props.toggleOnClickRow) {\r\n                table.event.on.onClickCell(toggle)\r\n                onBeforeUnmount(() => table.event.off.onClickRow(toggle))\r\n            }\r\n            const methods = {\r\n                expandAll: () => {\r\n                    state.expandKeys = {}\r\n                    Object.values(table.state.nodeMap).forEach(node => expand(node))\r\n                },\r\n                collapseAll: () => {\r\n                    state.expandKeys = {}\r\n                },\r\n            }\r\n            const refer: ExpandRefer = {\r\n                state,\r\n                totalSpan,\r\n                isExpand,\r\n                toggle,\r\n                scopedSlots,\r\n                width: () => table.plcData.value!.tableWidth,\r\n                methods,\r\n            }\r\n            return refer\r\n        }\r\n    },\r\n    {\r\n        head: ({refer}) => (\r\n            <PlDropdown\r\n                {...{placement: \"bottom-center\"}}\r\n                v-slots={{\r\n                    default: () => <PlButton icon=\"el-icon-menu\" mode=\"text\"/>,\r\n                    popper: () => <PlDropdownMenu>\r\n                        <PlDropdownOption label=\"全部展开\" onClick={refer.methods.expandAll} icon=\"el-icon-zoom-full\"/>\r\n                        <PlDropdownOption label=\"全部收起\" onClick={refer.methods.collapseAll} icon=\"el-icon-zoom-scale\"/>\r\n                    </PlDropdownMenu>\r\n                }}\r\n            />\r\n        ),\r\n        default: ({refer, node, props}) => {\r\n            return (!node.isSummary || props.summaryExpand) && (<PlButton{...{\r\n                icon: 'el-icon-arrow-down',\r\n                mode: 'text',\r\n                class: [\r\n                    'plc-expand-icon',\r\n                    {'plc-expand-icon-active': refer.isExpand(node)},\r\n                ],\r\n                onClick: (e: MouseEvent) => refer.toggle(node)\r\n            }}/>)\r\n        }\r\n    },\r\n)","import {designPlc} from \"../core/designPlc\";\r\nimport {computed, onBeforeUnmount, PropType, reactive} from 'vue';\r\nimport {TableNode} from \"../../core/useTableNode\";\r\nimport {injectPlainTable} from \"../../table\";\r\nimport {CheckboxStatus} from \"../../../../utils/constant\";\r\nimport {toArray} from \"../../../../utils/toArray\";\r\nimport {PlCheckbox} from \"../../../checkbox/checkbox\";\r\nimport {PlDropdown} from \"../../../dropdown/dropdown\";\r\nimport {PlDropdownMenu} from \"../../../dropdown/dropdown-menu\";\r\nimport {PlDropdownOption} from \"../../../dropdown/dropdown-option\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-check',\r\n    standardProps: {\r\n        autoFixedLeft: {default: true},\r\n        order: {default: -9998},\r\n        width: {default: 40},\r\n        align: {default: 'center'},\r\n        noPadding: {default: true},\r\n    },\r\n    externalProps: {\r\n        toggleOnClickRow: {type: Boolean},                      // 是否在点击行的时候触发点击动作\r\n        isCheckable: Function as PropType<(node: TableNode) => boolean>,// 是否可选\r\n    },\r\n    setup(props, ctx) {\r\n        const table = injectPlainTable()\r\n        const proxy = ctx.proxy!\r\n        const state = reactive({\r\n            selected: [] as TableNode[],\r\n        })\r\n        const selectedKeys = computed(() => {\r\n            return state.selected.map(item => item.key)\r\n        })\r\n        const status = computed(() => {\r\n            if (state.selected.length === 0) return CheckboxStatus.uncheck\r\n            if (table.flatNodes.value.every((item) => selectedKeys.value.indexOf(item.key) > -1)) {\r\n                return CheckboxStatus.check\r\n            } else {\r\n                return CheckboxStatus.minus\r\n            }\r\n        })\r\n        const isCheckable = (node: TableNode) => !props.isCheckable || (props.isCheckable(node) !== false)\r\n        const isCheck = (node: TableNode) => selectedKeys.value.indexOf(node.key) > -1\r\n        const toggle = (node: TableNode) => {\r\n            const index = selectedKeys.value.indexOf(node.key)\r\n            index > -1 ? state.selected.splice(index, 1) : state.selected.push(node)\r\n        }\r\n        const handler = {\r\n            onClickCheckbox: (node: TableNode) => isCheckable(node) && toggle(node),\r\n        }\r\n        const methods = {\r\n            getSelected: () => state.selected,\r\n            clearAll: () => state.selected = [],\r\n            checkAll: () => {\r\n                const availableSelectItems = table.flatNodes.value\r\n                    .filter(isCheckable)\r\n                    .map((item: TableNode) => item)\r\n                if (state.selected.length === availableSelectItems.length) {\r\n                    state.selected = []\r\n                } else {\r\n                    state.selected = availableSelectItems\r\n                }\r\n            },\r\n            reverse: () => {\r\n                state.selected = table.flatNodes.value\r\n                    .filter(node => isCheckable(node) && selectedKeys.value.indexOf(node.key) === -1)\r\n            },\r\n            addSelected: (key: string | string[]) => {\r\n                const keys = toArray(key)\r\n                const nodes = keys.map(k => table.state.nodeMap[k]).filter(Boolean)\r\n                state.selected = [...state.selected, ...nodes]\r\n            },\r\n            removeSelected: (key: string | string[]) => {\r\n                const keys = toArray(key)\r\n                state.selected = state.selected.filter(node => keys.indexOf(node.key) === -1)\r\n            },\r\n        }\r\n        if (props.toggleOnClickRow) {\r\n            table.event.on.onClickCell(handler.onClickCheckbox)\r\n            onBeforeUnmount(() => table.event.off.onClickRow(handler.onClickCheckbox))\r\n        }\r\n        Object.assign(proxy, methods)\r\n        return {\r\n            state,\r\n            selectedKeys,\r\n            status,\r\n            handler,\r\n            isCheck,\r\n            isCheckable,\r\n            methods,\r\n        }\r\n    },\r\n}, {\r\n    summary: () => null,\r\n    default: ({refer, node}) => <PlCheckbox\r\n        customReadonly\r\n        modelValue={refer.isCheck(node)}\r\n        onClick={() => refer.handler.onClickCheckbox(node)}\r\n        disabled={!refer.isCheckable(node)}\r\n    />,\r\n    head: ({refer}) => (\r\n        <PlDropdown\r\n            {...{placement: 'bottom-center'}}\r\n            v-slots={{\r\n                default: () => <PlCheckbox checkStatus={refer.status.value}/>,\r\n                popper: () => <PlDropdownMenu>\r\n                    <PlDropdownOption label=\"全部选中\" icon=\"el-icon-check-bold\" onClick={refer.methods.checkAll}/>\r\n                    <PlDropdownOption label=\"全部取消\" icon=\"el-icon-close-bold\" onClick={refer.methods.clearAll}/>\r\n                    <PlDropdownOption label=\"全部反选\" icon=\"el-icon-refresh\" onClick={refer.methods.reverse}/>\r\n                </PlDropdownMenu>\r\n            }}\r\n        />\r\n    )\r\n})","/**\r\n * 获取拖拽的rowEl对象\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:55\r\n */\r\nimport {hasClass} from \"plain-utils/dom/hasClass\";\r\n\r\nexport function getRowEl(e: MouseEvent, rowClass: string): HTMLElement {\r\n    let rowEl = e.target as HTMLElement\r\n    while (!!rowEl && !hasClass(rowEl, rowClass)) {\r\n        rowEl = rowEl.parentNode as HTMLElement\r\n    }\r\n    if (!rowEl) {\r\n        throw new Error(`can't find item element!`)\r\n    }\r\n    return rowEl\r\n}\r\n\r\n/**\r\n * 获取可以滚动的父组件\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:50\r\n */\r\nexport function getScrollParent(el: HTMLElement): HTMLElement {\r\n    while (!!el && el.scrollHeight <= el.offsetHeight) {\r\n        el = el.parentNode as HTMLElement\r\n    }\r\n    return el\r\n}\r\n\r\n/**\r\n * 获取行el对象的所有兄弟节点\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:57\r\n */\r\nexport function getRowElList(el: HTMLElement, rowClass: string): HTMLElement[] {\r\n    return Array.from(el.parentNode!.querySelectorAll(`.${rowClass}`))\r\n}","/**\r\n * 拖拽排序实现（非虚拟滚动）\r\n * @author  韦胜健\r\n * @date    2020/8/21 10:07\r\n */\r\nimport {UseListDraggierType} from \"./index\";\r\nimport {getRowEl, getRowElList, getScrollParent} from \"./utils\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {nextTick} from 'vue';\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport {useAutoScroll} from \"../../../../../../use/useAutoScroll\";\r\n\r\nexport const useListDraggierNotVirtual: UseListDraggierType = ({rowClass, onChange, getScroll}) => {\r\n\r\n    const autoScroll = useAutoScroll({vertical: true, getScroll,})\r\n\r\n    const state = {\r\n        startIndex: 0,                              // 拖拽的dragEl在数组中的索引\r\n        endIndex: 0,                                // 拖拽结束的时候，dragEl应该所在的索引位置\r\n        startClientY: 0,                            // 拖拽dragEl起始的时候，e.clientY，与mousemove的时候的e.clientY做差值，以便得到dragEl的偏移距离\r\n        moveClientY: 0,                             // 拖拽move的时候，e.clientY\r\n        dragEl: null as null | HTMLElement,         // 拖拽的时候的dragEl的dom对象\r\n        dragHeight: 0,                              // 拖拽的时候的dragEl高度，当在下方移动时，下方需要移动的rowEl都应该往上偏移 dragHeight距离，在上方移动时，上方需要移动的rowEl需要往下偏移 dragHeight距离\r\n        dragOffsetTop: 0,                           // dragEl拖拽开始的时候，距离滚动顶部距离\r\n        scrollParent: null as null | HTMLElement,   // 可以滚动的父元素\r\n        dragStartScrollTop: 0,                      // 拖拽开始的时候，scrollParent 的scrollTop位置\r\n        dragScrollTop: 0,                           // scrollParent 的 scroll偏移距离\r\n        rowList: [] as HTMLElement[],               // dragEl的兄弟节点，包含dragEl\r\n    }\r\n    const utils = {\r\n        /**\r\n         * 根据startIndex以及endIndex，设置这个index范围内的row的dom对象进行上下平移；\r\n         * 如果startIndex大于endIndex，则范围内的row对象，除了startIndex，其他的应该向上平移；\r\n         * 反之，如果startIndex小于endIndex，则范围内的row对象，除了startIndex，其他的应该向下平移；\r\n         *\r\n         * @author  韦胜健\r\n         * @date    2020/8/19 21:09\r\n         */\r\n        refresh() {\r\n            const {dragHeight, startIndex, endIndex} = state\r\n            // 是否为向下移动\r\n            const movedown = startIndex < endIndex\r\n            const [start, end] = movedown ? [startIndex, endIndex] : [endIndex, startIndex]\r\n\r\n            state.rowList.forEach((el, index) => {\r\n                if (index < start || index > end) {\r\n                    el.style.transform = ``\r\n                    return;\r\n                }\r\n                if (el === state.dragEl) {\r\n                    return\r\n                }\r\n                el.style.transform = `translateY(${movedown ? '-' : ''}${dragHeight}px)`\r\n            })\r\n        },\r\n        /**\r\n         * 刷新dragEl的位置，同时刷新兄弟节点的位置\r\n         * @author  韦胜健\r\n         * @date    2020/8/20 23:29\r\n         */\r\n        refreshDragElPosition() {\r\n            state.dragEl!.style.transform = `translateY(${state.moveClientY - state.startClientY + state.dragScrollTop}px)`\r\n            const top = (state.moveClientY - state.startClientY) + state.dragScrollTop + state.dragOffsetTop\r\n            state.endIndex = Math.ceil(Math.max(0, top / state.dragHeight - 0.5))\r\n\r\n            utils.refresh()\r\n        },\r\n    }\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n            disabledUserSelect()\r\n\r\n            state.startClientY = e.clientY\r\n            state.dragEl = getRowEl(e, rowClass)\r\n            state.dragHeight = state.dragEl.offsetHeight\r\n            state.dragOffsetTop = state.dragEl.offsetTop\r\n            state.rowList = getRowElList(state.dragEl!, rowClass)\r\n            state.startIndex = state.rowList.indexOf(state.dragEl)\r\n            state.scrollParent = getScrollParent(state.dragEl)\r\n            state.dragStartScrollTop = state.scrollParent!.scrollTop\r\n\r\n            state.scrollParent!.addEventListener('scroll', handler.parentScroll)\r\n            document.addEventListener('mousemove', handler.mousemove)\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n\r\n            state.rowList.forEach((rowEl: any) => {\r\n                // 如果是当前拖拽的el，则不监听事件，不做任何处理\r\n                if (rowEl === state.dragEl) {\r\n                    return\r\n                }\r\n                // 兄弟节点自动进行上下平移\r\n                rowEl.style.transition = `transform 300ms cubic-bezier(0.23, 1, 0.32, 1)`\r\n            })\r\n\r\n            autoScroll.showHover()\r\n        },\r\n        mousemove: (e: MouseEvent) => {\r\n            state.moveClientY = e.clientY\r\n            utils.refreshDragElPosition()\r\n        },\r\n        mouseup: async () => {\r\n\r\n            autoScroll.hideHover()\r\n\r\n            await nextTick()\r\n            enableUserSelect()\r\n\r\n            state.dragEl!.style.transform = ''\r\n            document.removeEventListener('mousemove', handler.mousemove)\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n            state.scrollParent!.removeEventListener('scroll', handler.parentScroll)\r\n\r\n            state.rowList.forEach((rowEl: any) => {\r\n                if (rowEl === state.dragEl) {\r\n                    return\r\n                }\r\n                rowEl.style.transition = ''\r\n                rowEl.style.transform = ''\r\n            })\r\n\r\n            state.startClientY = 0\r\n            state.moveClientY = 0\r\n            state.dragEl = null\r\n            state.dragHeight = 0\r\n            state.dragOffsetTop = 0\r\n            state.scrollParent = null\r\n            state.dragStartScrollTop = 0\r\n            state.dragScrollTop = 0\r\n            state.rowList = []\r\n            await onChange(state.startIndex, state.endIndex)\r\n            state.startIndex = 0\r\n            state.endIndex = 0\r\n        },\r\n        parentScroll: () => {\r\n            state.dragScrollTop = state.scrollParent!.scrollTop - state.dragStartScrollTop\r\n            utils.refreshDragElPosition()\r\n        }\r\n    }\r\n\r\n    return {\r\n        handler,\r\n    }\r\n}","/**\r\n * 拖拽排序组合函数，适用于虚拟滚动版本的\r\n * @author  韦胜健\r\n * @date    2020/8/21 10:27\r\n */\r\nimport {UseListDraggierType} from \"./index\";\r\nimport {getRowEl, getScrollParent} from \"./utils\";\r\nimport {useAutoScroll} from \"../../../../../../use/useAutoScroll\";\r\n\r\nexport const useListDraggierWithVirtual: UseListDraggierType = (\r\n    {\r\n        rowClass,\r\n        onChange,\r\n        getScroll,\r\n    }) => {\r\n\r\n    const dragElHeight = 3\r\n\r\n    const state = {\r\n        startDragIndex: 0,                                              // 开始拖拽的时候，的行索引\r\n        endDragIndex: 0,                                                // 拖拽结束的时候，应该移动到的索引位置\r\n\r\n        startDragOffsetTop: 0,                                          // 开始拖拽的时候，dragEl距离top值（距离可以滚动的父组件的顶部距离）\r\n        startDragHeight: 0,                                             // 拖拽开始的时候，dragEl的高度，虚拟滚动情况下，认为所有row的高度都是一致的，所以这个相当于行高\r\n\r\n        startClientY: 0,                                                // 拖拽开始的时候鼠标位置\r\n        moveClientY: 0,                                                 // 拖拽移动的时候鼠标的位置\r\n\r\n        scrollParent: null as null | HTMLElement,                       // 可以滚动的父元素\r\n        startScrollTopOfScrollParent: 0,                                // 拖拽开始的时候，滚动父元素的滚动距离 \r\n        scrollTopOfScrollParent: 0,                              // 拖拽开始的时候，滚动父元素的滚动差值\r\n        scrollParentBoundingRect: {\r\n            top: 0,                                                     // 滚动父元素在页面上的top值\r\n            left: 0,                                                    // 滚动父元素在页面上的left值\r\n            width: 0,                                                   // 滚动父元素在页面上的显示宽度\r\n            height: 0,                                                  // 滚动父元素在页面上的显示高度\r\n        },\r\n\r\n        dragEl: null as null | HTMLElement,                             // 拖拽的时候，显示的标志元素\r\n    }\r\n\r\n    const autoScroll = useAutoScroll({getScroll, vertical: true,})\r\n\r\n    const utils = {\r\n        refresh() {\r\n            /*拖拽元素在scrollParent中的top值*/\r\n            const top = state.startDragOffsetTop + (state.moveClientY - state.startClientY) + (state.scrollTopOfScrollParent - state.startScrollTopOfScrollParent) + state.startDragHeight / 2\r\n\r\n            /*如果top处于目标index的上方，则index为目标index，在下方则为index+1*/\r\n            let endDragIndex = top / state.startDragHeight\r\n            const external = endDragIndex % 1\r\n            if (external > 0.5) {\r\n                endDragIndex = Math.ceil(endDragIndex)\r\n            } else {\r\n                endDragIndex = Math.floor(endDragIndex)\r\n            }\r\n\r\n            /*刷新指示器的位置*/\r\n            state.dragEl!.style.transform = `translateY(${(endDragIndex) * state.startDragHeight - dragElHeight - state.scrollTopOfScrollParent + state.scrollParentBoundingRect.top}px)`\r\n\r\n            if (endDragIndex === state.startDragIndex || endDragIndex === state.startDragIndex + 1) {\r\n                state.endDragIndex = state.startDragIndex\r\n            } else if (endDragIndex > state.startDragIndex) {\r\n                state.endDragIndex = endDragIndex - 1\r\n            } else {\r\n                state.endDragIndex = endDragIndex\r\n            }\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n            const dragEl = getRowEl(e, rowClass)\r\n            // 每一行dom对象应该加上一个vid属性，表示这一行为第几个行，否则虚拟滚动情况下，无法知道是哪一行\r\n            const vid = Number(dragEl.getAttribute('vid'))\r\n\r\n            // 虚拟滚动下，每一行的行高一致\r\n            const {offsetHeight} = dragEl\r\n\r\n            state.startDragIndex = vid\r\n            state.startDragHeight = offsetHeight\r\n            state.startDragOffsetTop = state.startDragIndex * offsetHeight\r\n            state.startClientY = e.clientY\r\n            state.moveClientY = e.clientY\r\n\r\n            // 初始化scrollParent\r\n            const scrollParent = getScrollParent(dragEl)\r\n            state.scrollParent = scrollParent\r\n            state.startScrollTopOfScrollParent = scrollParent!.scrollTop\r\n            state.scrollTopOfScrollParent = scrollParent!.scrollTop\r\n            const {top, left, height, width} = state.scrollParent!.parentElement!.getBoundingClientRect()\r\n            state.scrollParentBoundingRect = {top, left, height, width}\r\n\r\n            // 初始化监听事件\r\n            scrollParent!.addEventListener('scroll', handler.scroll)\r\n            document.addEventListener('mousemove', handler.mousemove)\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n\r\n            //\r\n            state.dragEl = document.createElement('div')\r\n            document.body.appendChild(state.dragEl)\r\n            state.dragEl.style.position = 'fixed'\r\n            state.dragEl.style.left = `${state.scrollParentBoundingRect.left}px`\r\n            state.dragEl.style.height = `${dragElHeight}px`\r\n            state.dragEl.style.width = `0`\r\n            state.dragEl.style.top = '0'\r\n            state.dragEl.style.backgroundColor = '#12b4a5'\r\n            utils.refresh()\r\n\r\n            setTimeout(() => {\r\n                state.dragEl!.style.width = `${state.scrollParentBoundingRect.width}px`\r\n                autoScroll.showHover()\r\n            }, 23)\r\n        },\r\n        scroll: () => {\r\n            state.scrollTopOfScrollParent = state.scrollParent!.scrollTop\r\n            utils.refresh()\r\n        },\r\n        mousemove: (e: MouseEvent) => {\r\n            if (e.clientY < state.scrollParentBoundingRect.top) {\r\n                return\r\n            }\r\n            if (e.clientY > state.scrollParentBoundingRect.top + state.scrollParentBoundingRect.height - 10) {\r\n                return\r\n            }\r\n            state.moveClientY = e.clientY\r\n            utils.refresh()\r\n        },\r\n        mouseup: (e: MouseEvent) => {\r\n\r\n            autoScroll.hideHover()\r\n\r\n            document.removeEventListener('mousemove', handler.mousemove)\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n            state.scrollParent!.removeEventListener('scroll', handler.scroll)\r\n\r\n            const {startDragIndex, endDragIndex} = state\r\n\r\n            onChange(startDragIndex, endDragIndex)\r\n\r\n            state.startDragIndex = 0\r\n            state.endDragIndex = 0\r\n            state.startDragOffsetTop = 0\r\n            state.startDragHeight = 0\r\n            state.startClientY = 0\r\n            state.moveClientY = 0\r\n            state.scrollParent = null\r\n            state.startScrollTopOfScrollParent = 0\r\n            state.scrollTopOfScrollParent = 0\r\n            state.scrollParentBoundingRect = {\r\n                top: 0,\r\n                left: 0,\r\n                width: 0,\r\n                height: 0,\r\n            }\r\n            state.dragEl!.parentNode!.removeChild(state.dragEl!)\r\n            state.dragEl = null\r\n\r\n        }\r\n    }\r\n\r\n    return {\r\n        handler\r\n    }\r\n\r\n}","/**\r\n * 拖拽排序实现函数的类型\r\n * @author  韦胜健\r\n * @date    2020/8/21 10:07\r\n */\r\nimport {useListDraggierNotVirtual} from \"./use-list-draggier\";\r\nimport {useListDraggierWithVirtual} from \"./use-list-draggier.virtual\";\r\nimport {PlainScroll} from \"../../../../../scroll/scroll\";\r\n\r\nexport interface UseListDraggierType {\r\n    (option: {\r\n        rowClass: string,                                                               // 行的class，要确保只有行所在的dom对象有这个class，其子节点是没有这个class的\r\n        onChange: (start: number, end: number) => void | Promise<void>,                 // 拖拽导致排序变化动作\r\n        virtual?: boolean,                                                              // 是否为虚拟滚动\r\n        getScroll: () => PlainScroll,\r\n    }): {\r\n        handler: {\r\n            mousedown: (e: MouseEvent) => void,\r\n        }\r\n    }\r\n}\r\n\r\nexport const useListDraggier: UseListDraggierType = (option) => {\r\n    if (option.virtual) {\r\n        return useListDraggierWithVirtual(option)\r\n    } else {\r\n        return useListDraggierNotVirtual(option)\r\n    }\r\n}","import {designPlc} from \"../../core/designPlc\";\r\nimport {injectPlainTable} from \"../../../table\";\r\nimport {computed} from 'vue';\r\nimport {useListDraggier} from \"./core\";\r\nimport {ie} from \"plain-utils/utils/ie\";\r\nimport {useTableGetScroll} from \"../../../core/useTableGetScroll\";\r\nimport {PlButton} from \"../../../../button/button\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-draggier',\r\n    standardProps: {\r\n        autoFixedLeft: {default: true},\r\n        order: {default: -9998},\r\n        width: {default: 40},\r\n        align: {default: 'center'},\r\n        noPadding: {type: Boolean, default: true},\r\n    },\r\n    setup: (props) => {\r\n        const {disabledVirtual, dataModel, event} = injectPlainTable()\r\n        const {getScroll} = useTableGetScroll(event.on.onVirtualMounted)\r\n        const handler = computed(() => useListDraggier({\r\n            virtual: !disabledVirtual.value && !ie,\r\n            // virtual: true,\r\n            rowClass: 'plt-row',\r\n            getScroll,\r\n            onChange: async (start, end) => {\r\n                dataModel.value!.splice(end, 0, dataModel.value!.splice(start, 1)[0])\r\n            },\r\n        }))\r\n        return {\r\n            onMousedown: handler.value.handler.mousedown,\r\n            onClick: (e: MouseEvent) => {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n            },\r\n        }\r\n    }\r\n}, {\r\n    default: ({refer}) => <PlButton\r\n        icon=\"el-icon-list\"\r\n        mode=\"text\"\r\n        class=\"plc-draggier-handler\"\r\n        {...refer}\r\n    />\r\n})","import {TableNode} from \"../../../core/useTableNode\";\r\nimport {TreeDropType} from \"../../../../tree/utils/tree-constant\";\r\nimport {useAutoScroll} from \"../../../../../use/useAutoScroll\";\r\nimport {PlainScroll} from \"../../../../scroll/scroll\";\r\nimport {StyleProperties} from \"../../../../../shims\";\r\nimport {getRowEl, getScrollParent} from '../draggier/core/utils';\r\n\r\nconst indicatorSize = 3;\r\n\r\nexport function usePlcTreeDraggier(\r\n    {\r\n        rowClass,\r\n        dragClass,\r\n        flatDataList,\r\n        levelPadding,\r\n        props,\r\n        methods,\r\n        getScroll,\r\n        getParents,\r\n    }: {\r\n        rowClass: string,                                                           // 行class\r\n        dragClass?: string,                                                         // 拖拽元素的class\r\n        flatDataList: { value: TableNode[] },                                       // 拍平的数据\r\n        levelPadding: number,\r\n        props: {\r\n            rowDraggable?: boolean,\r\n            allowRowDraggable?: (node: TableNode) => boolean,\r\n            allowRowDroppable?: (start: TableNode, move: TableNode, type: TreeDropType) => boolean,\r\n        },\r\n        methods: {\r\n            expand: (node: TableNode) => void,                      // 展开某个元素\r\n            refreshCheckStatus: () => void,                 // 刷新所有元素的选中状态\r\n            removeSelf: (node: TableNode) => void,\r\n            previousSibling: (self: TableNode, target: TableNode) => void,\r\n            nextSibling: (self: TableNode, target: TableNode) => void,\r\n            unshiftChild: (self: TableNode, target: TableNode) => void,\r\n        },\r\n        getScroll: () => PlainScroll,\r\n        getParents: (node: TableNode) => TableNode[]\r\n    }\r\n) {\r\n\r\n    const state = {\r\n\r\n        startNode: null as null | TableNode,\r\n        moveNode: null as null | TableNode,\r\n\r\n        startScrollTop: 0,\r\n        moveScrollTop: 0,\r\n\r\n        startClientY: 0,\r\n        moveClientY: 0,\r\n\r\n        rowHeight: 0,\r\n        scrollParent: null as null | HTMLElement,\r\n        rowEl: null as null | HTMLElement,\r\n        scrollParentRect: {\r\n            top: 0,\r\n            left: 0,\r\n            width: 0,\r\n            height: 0,\r\n        },\r\n        indicator: null as null | HTMLElement,\r\n        dragNodeBaseLeft: 0,\r\n\r\n        dropType: TreeDropType.inner,\r\n        droppable: false,\r\n    }\r\n\r\n    const autoScroll = useAutoScroll({vertical: true, getScroll,})\r\n\r\n    const utils = {\r\n        allowDrag: (node: TableNode) => {\r\n            return !props.allowRowDraggable || props.allowRowDraggable(node) !== false\r\n        },\r\n        allowDrop: (startNode: TableNode, moveNode: TableNode, dropType: TreeDropType) => {\r\n            return !props.allowRowDroppable || props.allowRowDroppable(startNode, moveNode, dropType) !== false\r\n        },\r\n        getIndicatorStyles(moveNode: TableNode, droppable: boolean, dropType: TreeDropType) {\r\n\r\n            const styles: StyleProperties = {}\r\n\r\n            let top = moveNode.index * state.rowHeight + state.scrollParentRect.top - (state.moveScrollTop)\r\n            let paddingLeft = (moveNode.level - state.startNode!.level) * levelPadding\r\n\r\n            styles.top = `${dropType === TreeDropType.next ? top + state.rowHeight - indicatorSize : top}px`\r\n            styles.left = `${state.dragNodeBaseLeft + paddingLeft}px`\r\n            styles.width = `${state.scrollParentRect.width - (state.dragNodeBaseLeft - state.scrollParentRect.left) - paddingLeft}px`\r\n            styles.height = `${dropType === TreeDropType.inner ? state.rowHeight : indicatorSize}px`\r\n            styles.backgroundColor = droppable ? '#12b4a5' : '#F38585'\r\n            styles.opacity = dropType === TreeDropType.inner ? '0.15' : ''\r\n\r\n            return styles\r\n        },\r\n        refresh() {\r\n            const top = state.startClientY - state.scrollParentRect.top + (state.moveScrollTop) + (state.moveClientY - state.startClientY)\r\n            let targetIndex = top / state.rowHeight\r\n            const external = targetIndex % 1\r\n            targetIndex = Math.floor(targetIndex)\r\n            let dropType: TreeDropType = external < 0.3 ? TreeDropType.prev : external > 0.7 ? TreeDropType.next : TreeDropType.inner\r\n            const moveNode = flatDataList.value[targetIndex]\r\n            if (!moveNode) {\r\n                return\r\n            }\r\n\r\n            let droppable = true\r\n\r\n            state.moveNode = moveNode\r\n            const parents = getParents(state.moveNode)\r\n            parents.push(state.moveNode)\r\n            if (parents.indexOf(state.startNode!) > -1) {\r\n                droppable = false\r\n            }\r\n            if (!utils.allowDrop(state.startNode!, moveNode, dropType)) {\r\n                droppable = false\r\n            }\r\n\r\n            state.dropType = dropType\r\n            state.droppable = droppable\r\n\r\n            Object.assign(state.indicator!.style, utils.getIndicatorStyles(moveNode, droppable, dropType))\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n            state.startClientY = state.moveClientY = e.clientY\r\n\r\n            state.rowEl = getRowEl(e, rowClass)\r\n            state.rowHeight = state.rowEl.offsetHeight\r\n            const vid = Number(state.rowEl.getAttribute('vid'))\r\n            state.moveNode = state.startNode = flatDataList.value[vid]\r\n\r\n            if (!utils.allowDrag(state.startNode)) {\r\n                return\r\n            }\r\n\r\n            const dragNode = state.rowEl.querySelector(`.${dragClass}`)!\r\n            state.dragNodeBaseLeft = Math.ceil(dragNode.getBoundingClientRect()!.left)\r\n\r\n            state.scrollParent = getScrollParent(state.rowEl)\r\n            state.startScrollTop = state.moveScrollTop = state.scrollParent.scrollTop\r\n            const {top, left, height, width} = (state.scrollParent.parentNode as HTMLElement).getBoundingClientRect()\r\n            state.scrollParentRect = {top, left, height, width}\r\n\r\n            state.indicator = document.createElement('div')\r\n            state.indicator.style.position = 'fixed'\r\n            state.indicator.style.pointerEvents = 'none'\r\n            state.indicator.style.height = `${indicatorSize}px`\r\n            state.indicator.style.width = `${state.scrollParentRect.width}px`\r\n            state.indicator.style.left = `${state.scrollParentRect.left}px`\r\n            state.indicator.style.backgroundColor = '#12b4a5'\r\n            document.body.appendChild(state.indicator)\r\n\r\n            state.scrollParent.addEventListener('scroll', handler.scroll)\r\n            document.addEventListener('mousemove', handler.mousemove)\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n\r\n            utils.refresh()\r\n            autoScroll.showHover()\r\n        },\r\n        scroll() {\r\n            state.moveScrollTop = state.scrollParent!.scrollTop\r\n            utils.refresh()\r\n        },\r\n        /**\r\n         * 在dragover中判断clientX以及clientY，如果这两个值没有变化，就不往下执行，节省性能\r\n         * @author  韦胜健\r\n         * @date    2020/8/25 22:22\r\n         */\r\n        mousemove: (e: MouseEvent) => {\r\n            const {top, height} = state.scrollParentRect\r\n            if (e.clientY < top || e.clientY > top + height) {\r\n                return;\r\n            }\r\n            state.moveClientY = e.clientY\r\n            utils.refresh()\r\n        },\r\n        mouseup: () => {\r\n\r\n            autoScroll.hideHover()\r\n\r\n            const {startNode, moveNode, dropType, droppable} = state\r\n\r\n            state.scrollParent!.removeEventListener('scroll', handler.scroll)\r\n            document.removeEventListener('mousemove', handler.mousemove)\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n\r\n            state.indicator!.parentNode!.removeChild(state.indicator!)\r\n            state.startClientY = state.moveClientY = 0\r\n            state.rowEl = null\r\n            state.rowHeight = 0\r\n            state.moveNode = null\r\n            state.dragNodeBaseLeft = 0\r\n            state.scrollParent = null\r\n            state.startScrollTop = 0\r\n            state.scrollParentRect = {top: 0, left: 0, height: 0, width: 0}\r\n\r\n            if (!droppable) {\r\n                return\r\n            }\r\n\r\n            methods.removeSelf(startNode!)\r\n\r\n            switch (dropType) {\r\n                case TreeDropType.prev:\r\n                    methods.previousSibling(moveNode!, startNode!)\r\n                    break\r\n                case TreeDropType.inner:\r\n                    methods.unshiftChild(moveNode!, startNode!)\r\n                    methods.expand(moveNode!)\r\n                    break\r\n                case TreeDropType.next:\r\n                    methods.nextSibling(moveNode!, startNode!)\r\n                    break\r\n            }\r\n            methods.refreshCheckStatus()\r\n        }\r\n    }\r\n\r\n    return {\r\n        utils,\r\n        handler: {onMousedown: handler.mousedown}\r\n    }\r\n}","import {designPlc} from \"../../core/designPlc\";\r\nimport {computed, onBeforeUnmount, onMounted, PropType, watch} from 'vue';\r\nimport {TableNode} from \"../../../core/useTableNode\";\r\nimport {TreeDropType} from \"../../../../tree/utils/tree-constant\";\r\nimport {useScopedSlots} from \"../../../../../use/useScopedSlots\";\r\nimport {Plc} from \"../../core/plc.type\";\r\nimport {SimpleFunction, SimpleObject} from \"../../../../../shims\";\r\nimport {injectPlainTable} from \"../../../table\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useTableGetScroll} from \"../../../core/useTableGetScroll\";\r\nimport {usePlcTreeDraggier} from \"./plc-tree.draggier\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {PlButton} from \"../../../../button/button\";\r\nimport {StyleSize} from \"../../../../../use/useStyle\";\r\nimport {createEventListener} from \"../../../../../utils/createEventListener\";\r\nimport {PlDropdown} from \"../../../../dropdown/dropdown\";\r\nimport {PlDropdownMenu} from \"../../../../dropdown/dropdown-menu\";\r\nimport {PlDropdownOption} from \"../../../../dropdown/dropdown-option\";\r\nimport {PlCheckbox} from \"../../../../checkbox/checkbox\";\r\n\r\n/*只显示展开收起按钮的时候的基本宽度，不算content宽度*/\r\nconst size = 30\r\n\r\nexport default designPlc({\r\n    name: 'plc-tree',\r\n    standardProps: {\r\n        autoFixedLeft: {default: true},\r\n        order: {default: -9996},\r\n        width: {default: size},\r\n        noPadding: {default: true},\r\n        bodyCls: {default: 'plc-tree-node'},\r\n    },\r\n    externalProps: {\r\n        contentWidth: {type: Number, default: 100},                         // 显示的内容宽度\r\n        rowDraggable: {type: Boolean},                                      // 行是否可以拖拽排序\r\n        allowRowDraggable: {type: Function as PropType<(node: TableNode) => boolean>},// 行是否可以被拖拽放置到其他位置\r\n        allowRowDroppable: {type: Function as PropType<(startNode: TableNode, moveNode: TableNode, dropType: TreeDropType) => boolean>},// 行是否可以被放置（放到子节点中，放到前面，放到后面）\r\n\r\n        folderCollapseIcon: {type: String, default: 'el-icon-folder-s'},\r\n        folderExpandIcon: {type: String, default: 'el-icon-folder-opened'},\r\n        leafIcon: {type: String, default: 'el-icon-document'},\r\n    },\r\n    setup(props, ctx) {\r\n\r\n        const plc = ctx.proxy as any as Plc;\r\n        const table = injectPlainTable()\r\n        const {getScroll} = useTableGetScroll(table.event.on.onVirtualMounted)\r\n\r\n        const {scopedSlots} = useScopedSlots({content: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>, row: Object as PropType<SimpleObject>},}, true)\r\n\r\n        const maxShowLevel = computed(() => {\r\n            let ret = 0\r\n            table.flatNodes.value.forEach(node => node.level > ret ? (ret = node.level) : null)\r\n            return ret\r\n        })\r\n        /**\r\n         * 动态列宽，当展开收起的时候，自动更新列宽\r\n         * @author  韦胜健\r\n         * @date    2020/8/24 9:35\r\n         */\r\n        const width = computed(() => {\r\n            // 展开按钮的基本宽度\r\n            let expand = size\r\n            // 内容宽度，如果有content插槽，则加上props.contentWidth\r\n            let content = scopedSlots.content.isExist() ? props.contentWidth : 0\r\n            // 如果显示复选框，则宽度再加上size\r\n            let check = table.props.showCheckbox ? size : 0\r\n            // 如果显示拖拽排序按钮，则宽度再加上size\r\n            let draggable = props.rowDraggable ? size : 0\r\n\r\n            // 每一层都增加一个左边距 (expand + check) * level，所以每一层都加上这个宽度\r\n            const level = maxShowLevel.value\r\n            // 最后最大层的宽度\r\n            return expand * (level - 1) + (content + expand + check + draggable)\r\n        })\r\n\r\n        const methods = {\r\n            ...table.expandMethods,\r\n            ...table.checkMethods,\r\n            ...table.treeNodeMethods,\r\n        }\r\n\r\n        const handler = {\r\n            ...table.handler,\r\n        }\r\n\r\n        const draggier = usePlcTreeDraggier({\r\n            rowClass: 'plt-row',\r\n            dragClass: 'plc-tree-node-drag-btn',\r\n            levelPadding: size,\r\n            flatDataList: table.flatNodes,\r\n            props,\r\n            getScroll,\r\n            getParents: table.utils.getParents,\r\n            methods: {\r\n                ...methods,\r\n                refreshCheckStatus: async () => {\r\n                    await delay(120)\r\n                    table.flatNodes.value.forEach(methods.refreshCheckStatus)\r\n                },\r\n            },\r\n        })\r\n\r\n        const utils = {\r\n            getExpanderAttrs: (node: TableNode) => {\r\n                return {\r\n                    style: {marginLeft: unit((node.level - 1) * size)} as any,\r\n                }\r\n            },\r\n        }\r\n\r\n        onMounted(() => {\r\n            watch(() => maxShowLevel.value, () => {\r\n                plc.state.width = width.value\r\n            }, {immediate: true})\r\n        })\r\n\r\n        Object.assign(ctx.proxy, methods)\r\n\r\n        let unmountListener = [] as SimpleFunction[]\r\n        if (table.props.expandOnClickNode) {\r\n            const listener = (node: TableNode) => methods.toggleExpand(node)\r\n            table.event.on.onClickCell(listener)\r\n            unmountListener.push(listener)\r\n        }\r\n        if (table.props.checkOnClickNode) {\r\n            const listener = (node: TableNode) => methods.toggleCheck(node)\r\n            table.event.on.onClickCell(listener)\r\n            unmountListener.push(listener)\r\n        }\r\n        if (unmountListener.length > 0) {\r\n            onBeforeUnmount(() => unmountListener.forEach(listener => table.event.off.onClickCell(listener)))\r\n        }\r\n\r\n        return {\r\n            tableProps: table.props,\r\n            props,\r\n            scopedSlots,\r\n            handler,\r\n            utils,\r\n            draggier,\r\n            methods,\r\n        }\r\n    },\r\n}, {\r\n    summary: () => null,\r\n    head: ({refer, plc}) => (<>\r\n        <PlDropdown\r\n            {...{placement: \"bottom\"}}\r\n            v-slots={{\r\n                default: () => <PlButton icon=\"el-icon-menu\" mode=\"text\"/>,\r\n                popper: () => <PlDropdownMenu>\r\n                    <PlDropdownOption label=\"全部展开\" icon=\"el-icon-zoom-full\" onClick={refer.methods.expandAll}/>\r\n                    <PlDropdownOption label=\"全部收起\" icon=\"el-icon-zoom-scale\" onClick={refer.methods.collapseAll}/>\r\n                    {refer.tableProps.showCheckbox && <>\r\n                        <PlDropdownOption label=\"全部选中\" icon=\"el-icon-check\" onClick={refer.methods.checkAll}/>\r\n                        <PlDropdownOption label=\"取消选中\" icon=\"el-icon-close\" onClick={refer.methods.uncheckAll}/>\r\n                    </>}\r\n                </PlDropdownMenu>\r\n            }}\r\n        />\r\n        <div class=\"plc-tree-node-content\">{plc.props.title}</div>\r\n    </>),\r\n    default: ({refer, node, plc, row}) => {\r\n        return (\r\n            <>\r\n                <div class=\"plc-tree-node-expander\" {...refer.utils.getExpanderAttrs(node)}>\r\n                    <PlButton\r\n                        loading={node.loading}\r\n                        mode=\"text\"\r\n                        size={StyleSize.normal}\r\n                        icon={node.isLeaf ? refer.props.leafIcon : node.expand ? refer.props.folderExpandIcon : refer.props.folderCollapseIcon}\r\n                        onClick={(e: MouseEvent) => !node.isLeaf && refer.handler.onClickExpandIcon(e, node)}/>\r\n                </div>\r\n                {refer.tableProps.showCheckbox && (\r\n                    <div class=\"plc-tree-node-check\">\r\n                        <PlCheckbox\r\n                            key={node.key}\r\n                            size={StyleSize.normal}\r\n                            modelValue={node.check}\r\n                            customReadonly={true}\r\n                            checkStatus={node.checkStatus}\r\n                            disabled={!node.isCheckable}\r\n                            {...{onClick: (e?: MouseEvent) => refer.handler.onClickCheckbox(e, node)}}\r\n                        />\r\n                    </div>\r\n                )}\r\n                {refer.props.rowDraggable && (\r\n                    <PlButton mode=\"text\"\r\n                              icon=\"el-icon-list\"\r\n                              class=\"plc-tree-node-drag-btn\"\r\n                              disabled={!refer.draggier.utils.allowDrag(node)}\r\n                              {...createEventListener({onMousedown: refer.draggier.handler.onMousedown})}/>\r\n                )}\r\n                {refer.scopedSlots.content.isExist() && (\r\n                    <div class=\"plc-tree-node-content\" style={`width:${unit(refer.props.contentWidth)}`}>\r\n                        {refer.scopedSlots.content({node, row, plc}, !plc.props.field ? null : row[plc.props.field])}\r\n                    </div>\r\n                )}\r\n            </>\r\n        )\r\n    }\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {$$file, FileServiceDefaultAccept, FileServiceSingleFile, FileServiceValidator} from \"../file-service/file-service\";\r\nimport {computed, PropType} from 'vue';\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {toArray} from \"../../utils/toArray\";\r\nimport './upload.scss'\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {createCounter} from \"../../utils/createCounter\";\r\nimport {VNodeChild} from \"../../shims\";\r\nimport {$$dialog} from \"../dialog-service\";\r\nimport {$$message} from \"../message\";\r\nimport {defer} from \"../../utils/defer\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {PlButton} from \"../button/button\";\r\nimport {PlButtonGroup} from \"../button-group/button-group\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlLoading} from \"../loading/loading\";\r\n\r\nconst nextFileId = createCounter('upload')\r\n\r\nexport enum UploadStatus {\r\n    ready = 'ready',                        // 刚添加，还未上传\r\n    success = 'success',                    // 已上传完毕\r\n    error = 'error',                        // 上传失败\r\n    uploading = 'uploading',                // 正在上传\r\n    remove = 'remove',                      // 已删除\r\n    empty = 'empty',                        // 无文件\r\n}\r\n\r\ntype UploadFile = {\r\n    status?: UploadStatus,\r\n    id: string,\r\n    name: string,\r\n    response?: any,\r\n    file?: FileServiceSingleFile,\r\n    percent?: number,\r\n}\r\n\r\ntype BeforeRemove = (file: UploadFile) => boolean\r\ntype BeforeUpload = (file: UploadFile) => void | Promise<void>\r\ntype HandleRemove = (file: UploadFile) => Promise<void>\r\ntype HandleUpload = (files: UploadFile | UploadFile[]) => Promise<void>\r\ntype HandlePreview = (file: UploadFile) => void\r\n\r\ntype UploadData = Record<string, string> | (() => Record<string, string>)\r\ntype UploadModelValue = UploadFile | UploadFile[]\r\n\r\nexport const PlUpload = designComponent({\r\n    name: 'pl-upload',\r\n    props: {\r\n        ...EditProps,\r\n        modelValue: {type: Array as PropType<UploadModelValue>},        // 双向绑定值，文件对象\r\n        /*chooseFile*/\r\n        accept: {type: String},                                         // FileServiceChooseFileConfig.accept, 接收上传的文件类型\r\n        multiple: {type: Boolean, default: true},                       // FileServiceChooseFileConfig.multiple, 是否上传多个文件\r\n        validator: {type: Function as PropType<FileServiceValidator>},  // FileServiceChooseFileConfig.validator, 选择文件的校验函数\r\n        max: {type: Number},                                            // 最多上传文件个数\r\n        /*upload*/\r\n        action: {type: String, required: true},                         // 文件上传地址\r\n        data: {type: [Object, Function] as PropType<UploadData>},       // 上传时的额外参数，或者获取额外参数的函数\r\n        headers: {type: Object as PropType<Record<string, string>>,},   // 上传时的请求头\r\n        withCredentials: {type: Boolean},                               // 带cookie凭证信息\r\n        filename: {type: String, required: true},                       // 文件上传的的时候接收的文件名\r\n        /*other*/\r\n        draggable: {type: Boolean},                                     // 支持拖拽上传\r\n        // request: {type: Function as PropType<CustomRequest>},           // 自定义上传行为\r\n        // method: {type: String, default: 'post'},                        // 上传时的method方法\r\n        autoUpload: {type: Boolean, default: true},                     // 获取到文件之后，自动上传文件\r\n        removeConfirm: {type: Boolean, default: true},                  // 删除前的确认提示\r\n\r\n        beforeUpload: {type: Function as PropType<BeforeUpload>},       // 上传前校验文件\r\n        beforeRemove: {type: Function as PropType<BeforeRemove>},       // 删除前校验\r\n        handleRemove: {type: Function as PropType<HandleRemove>},       // 执行删除逻辑\r\n        handleUpload: {type: Function as PropType<HandleUpload>},       // 自定义上传逻辑\r\n        handlePreview: {type: Function as PropType<HandlePreview>},     // 处理预览文件逻辑\r\n    },\r\n    emits: {\r\n        updateModelValue: (val?: UploadModelValue) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {editComputed} = useEdit()\r\n        const {slots} = useSlots(['button'])\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {item: Object as PropType<UploadFile>, index: Number}\r\n        })\r\n\r\n        const singleModel = useModel(() => props.modelValue as undefined | UploadFile, emit.updateModelValue)\r\n        const multipleModel = useModel(() => props.modelValue as undefined | UploadFile[], emit.updateModelValue)\r\n\r\n        const renderIcon = {\r\n            [UploadStatus.success]: <PlIcon icon=\"el-icon-check-bold\"/>,\r\n            [UploadStatus.ready]: <PlIcon icon=\"el-icon-upload1\"/>,\r\n            [UploadStatus.error]: <PlIcon icon=\"el-icon-close-bold\"/>,\r\n            [UploadStatus.uploading]: <PlLoading type='beta' status=\"primary\"/>,\r\n            [UploadStatus.remove]: null,\r\n\r\n            [UploadStatus.empty]: <PlIcon icon=\"el-icon-upload1\"/>,\r\n        }\r\n        const singleEmptyFile: UploadFile = {\r\n            name: '未上传',\r\n            status: UploadStatus.empty,\r\n            id: 'nothing'\r\n        }\r\n\r\n        const classes = useClass(() => [\r\n            'pl-upload',\r\n            `pl-upload-${props.multiple ? 'multiple' : 'single'}`,\r\n            {\r\n                'pl-upload-remove': !!props.handleRemove,\r\n                'pl-upload-disabled': editComputed.value.disabled,\r\n                'pl-upload-preview': !!props.handlePreview,\r\n            }\r\n        ])\r\n\r\n        const utils = {\r\n            getItemClass: (item: UploadFile) => [\r\n                'pl-upload-item',\r\n                {\r\n                    [`pl-upload-item-status-${item.status}`]: !!item.status\r\n                }\r\n            ],\r\n        }\r\n\r\n        const handler = {\r\n            onSelectFile: async (files: File | File[]) => {\r\n\r\n                const selectFiles = toArray(files).filter(file => {\r\n                    const f = file as FileServiceSingleFile\r\n                    f.calcSize = Number((file.size / (1024 * 1024)).toFixed(2))\r\n                    /*validator*/\r\n                    if (props.validator != null) {\r\n                        const flag = props.validator(f)\r\n                        if (flag === false) {\r\n                            return false\r\n                        }\r\n                    }\r\n                    /*max*/\r\n                    if (props.max != null) {\r\n                        if (f.calcSize > props.max) {\r\n                            $$message.error(`[${file.name}]大小为${f.calcSize}MB，超过最大限制${props.max}MB`, {time: 5000})\r\n                            return false\r\n                        }\r\n                    }\r\n                    return true\r\n                }) as FileServiceSingleFile[]\r\n\r\n                if (!props.multiple) {\r\n                    const file = selectFiles[0]!\r\n                    singleModel.value = {\r\n                        id: nextFileId(),\r\n                        name: file.name,\r\n                        file,\r\n                        status: UploadStatus.ready,\r\n                    }\r\n                } else {\r\n                    const addFiles = toArray(selectFiles).map(f => ({\r\n                        id: nextFileId(),\r\n                        status: UploadStatus.ready,\r\n                        name: f.name,\r\n                        file: f,\r\n                    } as UploadFile))\r\n                    multipleModel.value = [...addFiles, ...multipleModel.value || []]\r\n                }\r\n                if (props.autoUpload) {\r\n                    await methods.upload()\r\n                }\r\n            },\r\n        }\r\n\r\n        const dropHandler = {\r\n            onDragover: (e: DragEvent) => {\r\n                e.preventDefault()\r\n            },\r\n            onDragLeave: (e: DragEvent) => {\r\n                e.preventDefault()\r\n            },\r\n            onDrop: async (e: DragEvent) => {\r\n                e.preventDefault()\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n\r\n                const accept = !props.accept ? undefined : FileServiceDefaultAccept[props.accept] || props.accept\r\n                let files: File[] = Array.from(e.dataTransfer!.files)\r\n                if (!!accept) {\r\n                    files = Array.from(e.dataTransfer!.files).filter(file => {\r\n                        const {type, name} = file;\r\n                        const extension = name.indexOf('.') > -1\r\n                            ? `.${name.split('.').pop()}`\r\n                            : '';\r\n                        const baseType = type.replace(/\\/.*$/, '');\r\n                        return accept.split(',')\r\n                            .map(type => type.trim())\r\n                            .filter(type => type)\r\n                            .some(acceptedType => {\r\n                                if (/\\..+$/.test(acceptedType)) {\r\n                                    return extension === acceptedType;\r\n                                }\r\n                                if (/\\/\\*$/.test(acceptedType)) {\r\n                                    return baseType === acceptedType.replace(/\\/\\*$/, '');\r\n                                }\r\n                                if (/^[^/]+\\/[^/]+$/.test(acceptedType)) {\r\n                                    return type === acceptedType;\r\n                                }\r\n                                return false;\r\n                            });\r\n                    })\r\n                }\r\n                if (files.length > 0) {\r\n                    await handler.onSelectFile(files)\r\n                }\r\n            },\r\n        }\r\n\r\n        const methods = {\r\n            chooseFile: async () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                const files = await $$file.chooseFile({\r\n                    multiple: props.multiple,\r\n                    accept: props.accept,\r\n                    /*validator以及max不在这里校验，因为 drop file的时候不走这里，在onSelectFile中统一处理*/\r\n                    // validator: props.validator,\r\n                    // max: props.max,\r\n                })\r\n                await handler.onSelectFile(files)\r\n            },\r\n            removeFile: async (file: UploadFile) => {\r\n\r\n                // 状态不存在或者状态为success表示需要用户处理删除文件在后端的逻辑，否则其他状态直接前端删除\r\n                if (!file.status || file.status === UploadStatus.success) {\r\n                    if (props.removeConfirm) {\r\n                        await $$dialog.confirm(`确认要删除文件：${file.name} 吗？`)\r\n                    }\r\n                    if (!!props.beforeRemove) {await props.beforeRemove(file)}\r\n                    await props.handleRemove!(file)\r\n                }\r\n\r\n                // 前端删除\r\n                if (!props.multiple) {\r\n                    singleModel.value = undefined\r\n                } else {\r\n                    const index = multipleModel.value!.indexOf(file)\r\n                    if (index > -1) {\r\n                        multipleModel.value!.splice(index, 1)\r\n                    }\r\n                }\r\n            },\r\n            upload: () => {\r\n                let files = props.multiple ? multipleModel.value : (singleModel.value ? [singleModel.value] : undefined)\r\n                if (!files) return\r\n                /*上传 准备就绪或者上传失败的文件*/\r\n                files = files.filter(f => f.status === UploadStatus.ready || f.status === UploadStatus.error)\r\n                if (files.length === 0) return\r\n                return methods.uploadFile(props.multiple ? files : files[0])\r\n            },\r\n            uploadFile: async (uploadFiles: UploadFile | UploadFile[]) => {\r\n\r\n                toArray(uploadFiles).forEach(file => {\r\n                    file.percent = 0\r\n                    file.status = UploadStatus.uploading\r\n                })\r\n\r\n                if (!!props.beforeUpload) {\r\n                    await Promise.all(toArray(uploadFiles).map(file => props.beforeUpload!(file)))\r\n                }\r\n\r\n                const handler = {\r\n                    onSuccess: () => {\r\n                        toArray(uploadFiles).forEach(file => {\r\n                            file.status = UploadStatus.success\r\n                            file.percent = undefined\r\n                        })\r\n                        dfd.resolve()\r\n                    },\r\n                    onError: () => {\r\n                        toArray(uploadFiles).forEach(file => file.status = UploadStatus.error)\r\n                        dfd.reject()\r\n                    },\r\n                }\r\n\r\n                const dfd = defer()\r\n                if (!!props.handleUpload) {\r\n                    const promise = props.handleUpload(uploadFiles)\r\n                    if (!promise) {\r\n                        console.error('pl-upload: handleUpload must return promise object!')\r\n                    } else {\r\n                        promise.then(handler.onSuccess, handler.onError)\r\n                    }\r\n                } else {\r\n                    $$file.upload({\r\n                        action: props.action,\r\n                        data: typeof props.data === \"function\" ? props.data() : props.data,\r\n                        headers: props.headers,\r\n                        withCredentials: props.withCredentials,\r\n                        file: Array.isArray(uploadFiles) ? uploadFiles.map(f => f.file!) : uploadFiles.file!,\r\n                        filename: props.filename,\r\n                        ...handler,\r\n                        onProgress: (percent) => {\r\n                            toArray(uploadFiles).forEach(file => file.percent = percent)\r\n                        },\r\n                    })\r\n                }\r\n                return dfd.promise\r\n            },\r\n        }\r\n\r\n        const renderItem = (file: UploadFile, index: number, custom?: () => VNodeChild) => (\r\n            <div class={utils.getItemClass(file)} key={file.id}>\r\n                <div class=\"pl-upload-item-inner\">\r\n                    {!!custom ? custom() : <>\r\n                        {file.status ? renderIcon[file.status] : <PlIcon icon=\"el-icon-document\"/>}\r\n                        {file.status === UploadStatus.ready ? '(待上传) ' : ''}\r\n                        <div class=\"pl-upload-item-content\" onClick={() => !!props.handlePreview && props.handlePreview(file)}>\r\n                            {scopedSlots.default({item: file, index}, file.name)}\r\n                        </div>\r\n                    </>}\r\n                    {(\r\n                        !!props.handleRemove\r\n                        && file.status !== UploadStatus.empty\r\n                        && file.status !== UploadStatus.uploading\r\n                        && editComputed.value.editable\r\n                    ) && (\r\n                        <div class=\"pl-upload-item-remove\" onClick={() => methods.removeFile(file)}>\r\n                            <PlIcon icon=\"el-icon-delete-solid\"/>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {file.percent != null && (\r\n                    <div class=\"pl-upload-item-progress\">\r\n                        <div class=\"pl-upload-item-progress-inner\" style={{width: `${file.percent}%`}}/>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        )\r\n\r\n        const singleRender = computed(() => <>\r\n            <PlButtonGroup>\r\n                <PlButton label=\"选择文件\" icon=\"el-icon-upload\" onClick={methods.chooseFile}/>\r\n                {!props.autoUpload && <PlButton label=\"上传\" icon=\"el-icon-connection\" onClick={methods.upload}/>}\r\n                {slots.button()}\r\n            </PlButtonGroup>\r\n            {renderItem(singleModel.value || singleEmptyFile, 0)}\r\n        </>)\r\n        const multipleRender = computed(() => <>\r\n            <div class=\"pl-upload-button\">\r\n                {!props.draggable ? (\r\n                    <PlButtonGroup>\r\n                        <PlButton label=\"选择文件\" icon=\"el-icon-upload\" onClick={methods.chooseFile}/>\r\n                        {!props.autoUpload && <PlButton label=\"上传\" icon=\"el-icon-connection\" onClick={methods.upload}/>}\r\n                        {slots.button()}\r\n                    </PlButtonGroup>\r\n                ) : (\r\n                    <div class=\"pl-upload-drop-area\" onClick={methods.chooseFile} {...dropHandler}>\r\n                        <PlIcon icon=\"el-icon-upload\"/>\r\n                        <div>\r\n                            <span>将文件拖拽至此处，或者</span>\r\n                            <PlButton mode=\"text\" class=\"pl-upload-drop-upload-button\" onClick={methods.chooseFile}>\r\n                                <span>点击上传</span>\r\n                                <PlIcon icon=\"el-icon-upload1\"/>\r\n                            </PlButton>\r\n                            {slots.button()}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <div class=\"pl-upload-list\">\r\n                {!!multipleModel.value && multipleModel.value\r\n                    .filter(item => item.status !== UploadStatus.remove)\r\n                    .map((file, index) => renderItem(file, index))}\r\n            </div>\r\n        </>)\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <div class={classes.value}>\r\n                        {props.multiple ? multipleRender.value : singleRender.value}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import Plc from '../table/plc/core/plc'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport PlcInput from \"../table/plc/edit/plc-input\";\r\nimport PlcNumber from \"../table/plc/edit/plc-number\";\r\nimport PlcDate from \"../table/plc/edit/plc-date\";\r\nimport PlcColorPicker from \"../table/plc/edit/plc-color-picker\";\r\nimport PlcToggle from \"../table/plc/edit/plc-toggle\";\r\nimport PlcRate from \"../table/plc/edit/plc-rate\";\r\nimport PlcIndex from \"../table/plc/standard/plc-index\";\r\nimport PlcExpand from \"../table/plc/standard/plc-expand\";\r\nimport PlcCheck from \"../table/plc/standard/plc-check\";\r\nimport PlcDraggier from \"../table/plc/standard/draggier/plc-draggier\";\r\nimport PlcTree from \"../table/plc/standard/tree/plc-tree\";\r\n\r\nexport default createComponentPlugin(Plc, {\r\n    exposeComponents: {\r\n        /*---------------------------------------standard-------------------------------------------*/\r\n        PlcIndex,\r\n        PlcExpand,\r\n        PlcCheck,\r\n        PlcDraggier,\r\n        PlcTree,\r\n        /*---------------------------------------edit-------------------------------------------*/\r\n        PlcInput,\r\n        PlcNumber,\r\n        PlcDate,\r\n        PlcColorPicker,\r\n        PlcToggle,\r\n        PlcRate,\r\n    },\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlcGroupProps, PlcPublicAttrs} from \"./plc.utils\";\r\nimport {TablePlcCollector} from './plc-collector';\r\nimport {useSlots} from \"../../../../use/useSlots\";\r\nimport {PlcGroup} from \"./plc.type\";\r\nimport {useNumber} from \"../../../../use/useNumber\";\r\nimport {computed, PropType, reactive} from 'vue';\r\nimport {useScopedSlots} from \"../../../../use/useScopedSlots\";\r\n\r\nexport default designComponent({\r\n    name: 'plc-group',\r\n    props: {\r\n        ...PlcGroupProps,\r\n    },\r\n    setup({props}) {\r\n        /*插槽*/\r\n        const {slots} = useSlots()\r\n        const {scopedSlots} = useScopedSlots({\r\n            head: {plc: Object as PropType<PlcGroup>},\r\n        }, true)\r\n        /*collector收集列信息*/\r\n        TablePlcCollector.useChild()\r\n        /*子列信息*/\r\n        const {children} = TablePlcCollector.useParent()\r\n        /*格式化props*/\r\n        const {numberState} = useNumber(props, ['order'])\r\n        /*目标props*/\r\n        const formatProps = computed(() => ({\r\n            ...props,\r\n            ...numberState,\r\n        }) as Omit<typeof props, 'order'> & typeof numberState)\r\n        /*props的一个副本，不过如果有值的情况下，优先级比props中的值高（比config值也高）*/\r\n        const propsState = reactive(Object.keys(PlcGroupProps).reduce((ret: any, key: string) => {\r\n            ret[key] = null\r\n            return ret\r\n        }, {}) as { [k in keyof typeof formatProps.value]: typeof formatProps.value[k] | null })\r\n\r\n        /*核心暴露对象*/\r\n        const group: PlcGroup = reactive({\r\n            /*PlcPublicAttrs 在 copyPlc中会深度复制一遍，这里适配类型即可*/\r\n            ...PlcPublicAttrs,\r\n            group: true,\r\n            children,\r\n            props: formatProps,\r\n            state: propsState,\r\n            refer: () => group,\r\n            setDurWidth: (durWidth: number) => {\r\n                const itemDurWidth = Math.floor(durWidth / (children.length))\r\n                children.forEach(item => item.setDurWidth(itemDurWidth))\r\n            },\r\n            scopedSlots,\r\n        })\r\n\r\n        return {\r\n            refer: group,\r\n            render: () => (\r\n                <div>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport PlcGroup from \"../table/plc/core/plc-group\";\r\n\r\nexport default createComponentPlugin(PlcGroup)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlUpload} from './upload'\r\n\r\nexport default createComponentPlugin(PlUpload)","import Nav from './nav'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Nav, {})","import {App} from 'vue'\r\nimport {$$file} from \"./file-service\";\r\n\r\nexport default {\r\n    install: (app: App) => {\r\n        app.config.globalProperties.$$file = $$file\r\n    }\r\n}","import {defer} from \"../../../utils/defer\";\r\nimport {$$file} from \"../../file-service/file-service\";\r\n\r\n/**\r\n * 将url转成image对象\r\n * @author  韦胜健\r\n * @date    2021/1/21 11:46\r\n */\r\nexport function urlToImage(url: string) {\r\n    const dfd = defer<HTMLImageElement>()\r\n    const image = new Image()\r\n    image.setAttribute('crossOrigin', 'anonymous');\r\n    image.onload = () => dfd.resolve(image)\r\n    image.onerror = dfd.reject\r\n    image.src = url\r\n    return dfd.promise\r\n}\r\n\r\n/**\r\n * 将image转化为canvas\r\n * @author  韦胜健\r\n * @date    2021/1/21 11:50\r\n */\r\nexport function imageToCanvas(image: HTMLImageElement) {\r\n    const canvas = document.createElement('canvas') as HTMLCanvasElement\r\n    const ctx = canvas.getContext('2d')!\r\n    canvas.width = image.width\r\n    canvas.height = image.height\r\n    ctx.drawImage(image, 0, 0, canvas.width, canvas.height)\r\n    return canvas\r\n}\r\n\r\n/**\r\n * 将canvas转化为File对象\r\n * @author  韦胜健\r\n * @date    2021/1/21 11:50\r\n * @param   canvas              画布对象\r\n * @param   type                文件类型，比如 image/jpeg\r\n * @param   quality             图片压缩质量，0-1\r\n * @param   filename            文件名称\r\n */\r\nexport function canvasToFile(canvas: HTMLCanvasElement, type: string, quality: number, filename: string) {\r\n    const dfd = defer<File | null>()\r\n    canvas.toBlob(blob => {\r\n        dfd.resolve(!blob ? null : new File([blob], filename))\r\n    }, type, quality)\r\n    return dfd.promise\r\n}\r\n\r\n/**\r\n * 将canvas转化为base64\r\n * @author  韦胜健\r\n * @date    2021/1/21 11:52\r\n * @param   type            文件类型\r\n * @param   quality         图片压缩质量，0-1\r\n */\r\nexport function canvasToDataURL(canvas: HTMLCanvasElement, type: string, quality: number): string {\r\n    return canvas.toDataURL(type, quality)\r\n}\r\n\r\n\r\n/**\r\n * 将file转化为base64\r\n * @author  韦胜健\r\n * @date    2021/1/21 11:54\r\n */\r\nexport const fileToDataURL = $$file.readAsDataURL\r\n\r\n/**\r\n * 将dataURL转化为File对象\r\n * @author  韦胜健\r\n * @date    2021/1/21 11:54\r\n */\r\nexport function dataURLToFile(dataUrl: string) {\r\n    const arr = dataUrl.split(',');\r\n    const mime = arr[0].match(/:(.*?);/)![1]\r\n    const bstr = atob(arr[1]);\r\n    let n = bstr.length, u8arr = new Uint8Array(n);\r\n    while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    return new Blob([u8arr], {type: mime});\r\n}\r\n\r\n/**\r\n * 将blob转化为file\r\n * @author  韦胜健\r\n * @date    2021/1/21 15:19\r\n */\r\nexport function blobToFile(blob: Blob, filename: string, option?: FilePropertyBag) {\r\n    return new File([blob], filename, option)\r\n}\r\n\r\nexport const imageCompress = (() => {\r\n    /**\r\n     * 根据尺寸压缩图片\r\n     * @author  韦胜健\r\n     * @date    2021/1/21 16:11\r\n     */\r\n    const compressByMeasure = async (image: HTMLImageElement, config: { maxHeight?: number, maxWidth?: number }, filename: string) => {\r\n        const canvas = document.createElement('canvas') as HTMLCanvasElement\r\n        const ctx = canvas.getContext('2d')!\r\n        let height = image.height, width = image.width;\r\n        if (!!config.maxHeight && height > config.maxHeight) {\r\n            width = config.maxHeight / height * width\r\n            height = config.maxHeight\r\n        }\r\n        if (!!config.maxWidth && width > config.maxWidth) {\r\n            height = config.maxWidth / width * height\r\n            width = config.maxWidth\r\n        }\r\n        canvas.width = width\r\n        canvas.height = height\r\n        ctx.drawImage(image, 0, 0, width, height)\r\n        return canvasToFile(canvas, 'image/png', 1, filename)\r\n    }\r\n    /**\r\n     * 根据图片容量大小压缩图片\r\n     * @author  韦胜健\r\n     * @date    2021/1/21 16:11\r\n     */\r\n    const compressByMaxSize = async (image: HTMLImageElement, maxSize: number, filename: string) => {\r\n        const max = maxSize * 1000 * 1000\r\n        let rate = 1\r\n        const canvas = document.createElement('canvas') as HTMLCanvasElement\r\n        const ctx = canvas.getContext('2d')!\r\n        canvas.height = image.height\r\n        canvas.width = image.width\r\n        ctx.drawImage(image, 0, 0, image.width, image.height)\r\n\r\n        let file = await canvasToFile(canvas, 'image/png', 1, filename)\r\n        while (!!file && file.size > max && rate > 0.1) {\r\n            ctx.clearRect(0, 0, image.width * rate, image.height * rate)\r\n            rate -= 0.3\r\n            canvas.height = image.height * rate\r\n            canvas.width = image.width * rate\r\n            ctx.drawImage(image, 0, 0, image.width * rate, image.height * rate)\r\n            file = await canvasToFile(canvas, 'image/png', 1, filename)\r\n        }\r\n        return file\r\n    }\r\n    return async (url: string, config: { maxSize?: number, maxHeight?: number, maxWidth?: number }): Promise<string | ArrayBuffer | null> => {\r\n        if (!url) {\r\n            throw new Error('compress: url is empty!')\r\n        }\r\n        /*if (/^https?/.test(url) && url.indexOf('?') === -1) {\r\n            url += `?timestamp=${Date.now()}`\r\n        }*/\r\n        let image = await urlToImage(url)\r\n        if (!!config.maxHeight || !!config.maxWidth) {\r\n            let file = await compressByMeasure(image, config, '根据尺寸压缩图片.png')\r\n            return !file ? null : fileToDataURL(file)\r\n        }\r\n        if (!!config.maxSize) {\r\n            let file = await compressByMaxSize(image, config.maxSize, '根据文件大小压缩图片.png')\r\n            return !file ? null : fileToDataURL(file)\r\n        }\r\n        throw new Error('compress: maxSize, maxHeight, maxWidth is empty!')\r\n    }\r\n})();","import {registryRootService} from \"../../root/registryRootService\";\r\nimport {createDefaultService} from \"../../root/createDefaultService\";\r\nimport {onMounted, reactive, ref, Transition, withDirectives, computed} from 'vue';\r\nimport {createDefaultManager} from \"../../root/createDefaultManager\";\r\nimport {$$file} from \"../../file-service/file-service\";\r\nimport {getServiceWithoutContext} from \"../../../utils/getServiceWithoutContext\";\r\nimport {imageCompress} from \"./image.service.utils\";\r\nimport {PlIcon} from \"../../icon/icon\";\r\nimport {TooltipDirective} from \"../../tooltip/tooltip-directive\";\r\nimport {useStyles} from \"../../../use/useStyles\";\r\nimport {PlImage} from \"../image\";\r\n\r\ninterface ImageServicePreviewOption {\r\n    urls: string[],\r\n    current: number,\r\n}\r\n\r\nconst Service = createDefaultService({\r\n    name: 'pl-image-preview-service',\r\n    setup: (option: ImageServicePreviewOption) => {\r\n\r\n        const step = {scale: 0.2, rotate: 90,}\r\n\r\n        const isShow = ref(false)\r\n\r\n        const state = reactive({\r\n            option,\r\n            adjust: {\r\n                scale: null as null | number,           // 当前图片缩放大小\r\n                top: null as null | number,             // 当前图片拖拽top距离\r\n                left: null as null | number,            // 当前图片拖拽left距离\r\n                rotate: null as null | number,          // 当前图片旋转距离\r\n            },\r\n            mounted: new Promise(resolve => onMounted(resolve))\r\n        })\r\n\r\n        const imgStyles = useStyles(style => {\r\n            const {scale, top, left, rotate} = state.adjust\r\n            let transform: string[] = []\r\n            if (!!scale) {\r\n                transform.push(`scale(${scale})`)\r\n            }\r\n            if (!!rotate) {\r\n                transform.push(`rotate(${rotate}deg)`)\r\n            }\r\n            if (transform.length > 0) {\r\n                style.transform = transform.join(' ')\r\n            }\r\n            if (!!top) {\r\n                style.top = `${top}px`\r\n            }\r\n            if (!!left) {\r\n                style.left = `${left}px`\r\n            }\r\n        })\r\n\r\n        const show = async () => {\r\n            resetAdjust()\r\n            await state.mounted\r\n            isShow.value = true\r\n        }\r\n\r\n        const hide = () => isShow.value = false\r\n\r\n        const resetAdjust = () => state.adjust = {\r\n            scale: null as null | number,           // 当前图片缩放大小\r\n            top: null as null | number,             // 当前图片拖拽top距离\r\n            left: null as null | number,            // 当前图片拖拽left距离\r\n            rotate: null as null | number,          // 当前图片旋转距离\r\n        }\r\n\r\n        const service = async (option: ImageServicePreviewOption) => {\r\n            state.option = option\r\n            await show()\r\n            return hide\r\n        }\r\n\r\n        const isMultipleImages = computed(() => state.option.urls.length > 1)\r\n\r\n        const buttons = [\r\n            {\r\n                label: '逆时针旋转90°',\r\n                icon: 'el-icon-rotate-left',\r\n                onClick: () => {\r\n                    let {rotate} = state.adjust\r\n                    rotate = (rotate == null ? 0 : rotate) + step.rotate;\r\n                    (rotate === 360) && (rotate = 0);\r\n                    state.adjust.rotate = rotate\r\n                }\r\n            },\r\n            {\r\n                label: '顺时针旋转90°',\r\n                icon: 'el-icon-rotate-right',\r\n                onClick: () => {\r\n                    let {rotate} = state.adjust\r\n                    rotate = (rotate == null ? 0 : rotate) - step.rotate;\r\n                    (rotate === -360) && (rotate = 0);\r\n                    state.adjust.rotate = rotate\r\n                }\r\n            },\r\n            {\r\n                label: '放大',\r\n                icon: 'el-icon-zoom-in',\r\n                onClick: () => {\r\n                    let {scale} = state.adjust\r\n                    state.adjust.scale = (scale == null ? 1 : scale) + step.scale\r\n                }\r\n            },\r\n            {\r\n                label: '缩小',\r\n                icon: 'el-icon-zoom-out',\r\n                onClick: () => {\r\n                    let {scale} = state.adjust\r\n                    state.adjust.scale = (scale == null ? 1 : scale) - step.scale\r\n                }\r\n            },\r\n            {\r\n                label: '上一张',\r\n                icon: 'el-icon-arrow-left',\r\n                show: () => isMultipleImages.value,\r\n                onClick: () => {\r\n                    resetAdjust()\r\n                    let current = state.option.current - 1\r\n                    if (current < 0) current = state.option.urls.length - 1\r\n                    state.option.current = current\r\n                },\r\n            },\r\n            {\r\n                label: '下一张',\r\n                icon: 'el-icon-arrow-right',\r\n                show: () => isMultipleImages.value,\r\n                onClick: () => {\r\n                    resetAdjust()\r\n                    let current = state.option.current + 1\r\n                    if (current > state.option.urls.length - 1) current = 0\r\n                    state.option.current = current\r\n                },\r\n            },\r\n            {\r\n                label: '重置',\r\n                icon: 'el-icon-refresh',\r\n                onClick: resetAdjust,\r\n            },\r\n            {\r\n                label: '关闭',\r\n                icon: 'el-icon-close',\r\n                onClick: hide,\r\n            },\r\n        ]\r\n\r\n        const dragImg = (() => {\r\n            let freezeState = {\r\n                startTop: 0,\r\n                startLeft: 0,\r\n                startX: 0,\r\n                startY: 0,\r\n            }\r\n            const mousedown = (e: MouseEvent) => {\r\n                freezeState = {\r\n                    startTop: state.adjust.top || 0,\r\n                    startLeft: state.adjust.left || 0,\r\n                    startX: e.clientX,\r\n                    startY: e.clientY,\r\n                }\r\n                document.addEventListener('mousemove', mousemove)\r\n                document.addEventListener('mouseup', mouseup)\r\n            }\r\n            const mousemove = (e: MouseEvent) => {\r\n                state.adjust.left = e.clientX - freezeState.startX + freezeState.startLeft\r\n                state.adjust.top = e.clientY - freezeState.startY + freezeState.startTop\r\n            }\r\n            const mouseup = (e: MouseEvent) => {\r\n                document.removeEventListener('mousemove', mousemove)\r\n                document.removeEventListener('mouseup', mouseup)\r\n            }\r\n            const dragstart = (e: DragEvent) => {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n            }\r\n            return {\r\n                mousedown,\r\n                dragstart,\r\n                imgStyles,\r\n            }\r\n        })();\r\n\r\n        const handler = {\r\n            stopPropagation: (e: MouseEvent) => e.stopPropagation(),\r\n            onDblclickImg: hide,\r\n            onClickMask: hide,\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                isShow,\r\n                isOpen: isShow,\r\n                service,\r\n            },\r\n            render: () => (\r\n                <Transition name=\"pl-image-preview\">\r\n                    <div class=\"pl-image-preview-service\" v-show={isShow.value} onClick={handler.onClickMask}>\r\n                        <div class=\"pl-image-preview-service-img-wrapper\">\r\n                            <Transition name=\"pl-transition-scale\" mode=\"out-in\">\r\n                                <PlImage\r\n                                    style={imgStyles.value}\r\n                                    previewOnClick={false}\r\n                                    class=\"pl-image-preview-service-img\"\r\n                                    src={state.option.urls[state.option.current]}\r\n                                    key={state.option.urls[state.option.current]}\r\n                                    {...{\r\n                                        onClick: handler.stopPropagation,\r\n                                        onDblclick: handler.onDblclickImg,\r\n                                        onMousedown: dragImg.mousedown,\r\n                                        onDragstart: dragImg.dragstart,\r\n                                    }}\r\n                                />\r\n                            </Transition>\r\n                        </div>\r\n                        {isMultipleImages.value && <div class=\"pl-image-preview-service-indicator\">\r\n                            {state.option.urls.map((item, index) => <div class={`pl-image-preview-service-indicator-item ${index === state.option.current ? 'pl-image-preview-service-indicator-item-active' : ''}`} key={index}/>)}\r\n                        </div>}\r\n                        <div class=\"pl-image-preview-service-button-group\" onClick={handler.stopPropagation}>\r\n                            {buttons.map(btn => {\r\n                                if (!!btn.show && !btn.show()) {\r\n                                    return null\r\n                                }\r\n                                return withDirectives(\r\n                                    <div class=\"pl-image-preview-service-button\" key={btn.label} onClick={() => !!btn.onClick && btn.onClick()}>\r\n                                        <PlIcon icon={btn.icon}/>\r\n                                    </div> as any,\r\n                                    [[TooltipDirective, btn.label]]\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </Transition>\r\n            )\r\n        }\r\n    }\r\n})\r\n\r\nconst getImageService = registryRootService(\r\n    'image',\r\n    createDefaultManager('pl-image-manager', Service),\r\n    (getManager) => {\r\n        const preview = (urls: string | string[], current?: number) => {\r\n            let option: ImageServicePreviewOption = {\r\n                urls: Array.isArray(urls) ? urls : [urls],\r\n                current: current == null ? 0 : current,\r\n            };\r\n            getManager().then(manager => manager.service(option))\r\n        }\r\n        return {\r\n            choose: $$file.chooseImage,\r\n            compress: imageCompress,\r\n            preview,\r\n        }\r\n    }\r\n)\r\n\r\nexport const $image = getServiceWithoutContext(getImageService)\r\n","export enum ImageStatus {\r\n    success = 'success',\r\n    error = 'error',\r\n    pending = 'pending',\r\n    empty = 'empty',\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {$image} from \"./service\";\r\nimport './image.scss'\r\nimport {computed, PropType, reactive, watch} from 'vue';\r\nimport {ImageStatus} from \"./image.utils\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {PlLoadingMask} from \"../loading-mask/loading-mask\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\n\r\nexport enum ImageFit {\r\n    fill = 'fill',\r\n    contain = 'contain',\r\n    cover = 'cover',\r\n    none = 'none',\r\n    'scale-down' = 'scale-down',\r\n}\r\n\r\nexport const PlImageProps = {\r\n    alt: {type: String},                                                        // 图片描述\r\n    fit: {type: String as PropType<ImageFit>, default: ImageFit.cover},         // 图片 object-fit 属性\r\n    position: {type: String, default: 'top center'},                            // 图片 object-position 属性\r\n}\r\n\r\nexport const PlImage = designComponent({\r\n    name: 'pl-image',\r\n    props: {\r\n        src: {type: String},                                                     // 图片地址\r\n        status: {type: String as PropType<ImageStatus>},                         // 当前转股固态，fill, container, cover, none, scale-down\r\n        previewOnClick: {type: Boolean, default: true},                          // 是否点击的时候放大预览图片\r\n        maxHeight: {type: [String, Number]},                                     // 最大高度\r\n        minHeight: {type: [String, Number]},                                     // 最小高度\r\n        maxWidth: {type: [String, Number]},                                      // 最大宽度\r\n        minWidth: {type: [String, Number]},                                      // 最小宽度\r\n        width: {type: [String, Number]},                                         // 图片宽度\r\n        height: {type: [String, Number]},                                        // 图片高度\r\n        ...PlImageProps,\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n        onSuccess: (val: string) => true,\r\n        onError: (e: string | Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const state = reactive({\r\n            src: undefined as string | undefined,\r\n            status: ImageStatus.empty,\r\n        })\r\n\r\n        const status = computed(() => props.status == null ? state.status : props.status)\r\n\r\n        watch(() => props.src, val => {\r\n            state.src = val\r\n            if (!val) {\r\n                return state.status = ImageStatus.empty\r\n            }\r\n            state.status = ImageStatus.pending\r\n            const image = new Image()\r\n            image.onload = () => {\r\n                state.status = ImageStatus.success\r\n                emit.onSuccess(val)\r\n            }\r\n            image.onerror = (e) => {\r\n                state.status = ImageStatus.error\r\n                emit.onError(e)\r\n            }\r\n            image.src = val\r\n        }, {immediate: true})\r\n\r\n        const classes = useClass(() => [\r\n            'pl-image',\r\n            `pl-image-status-${status.value}`,\r\n            {\r\n                'pl-image-preview-on-click': props.previewOnClick,\r\n            },\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            if (!!props.height) style.height = unit(props.height)\r\n            if (!!props.width) style.width = unit(props.width)\r\n            if (!!props.minHeight) style.minHeight = unit(props.minHeight)\r\n            if (!!props.minWidth) style.minWidth = unit(props.minWidth)\r\n            if (!!props.maxHeight) style.maxHeight = unit(props.maxHeight)\r\n            if (!!props.maxWidth) style.maxWidth = unit(props.maxWidth)\r\n            if (!!props.fit) style.objectFit = props.fit\r\n            if (!!props.position) style.objectPosition = props.position\r\n        })\r\n\r\n        const tip = {\r\n            [ImageStatus.empty]: '无图片',\r\n            [ImageStatus.pending]: '加载中',\r\n            [ImageStatus.error]: '加载失败',\r\n        }\r\n\r\n        const handler = {\r\n            onClick: (e: MouseEvent) => {\r\n                if (state.status === ImageStatus.success && props.previewOnClick) {\r\n                    $image.preview(state.src!)\r\n                }\r\n                emit.onClick(e)\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                if (status.value === ImageStatus.empty || status.value === ImageStatus.pending || status.value === ImageStatus.error) {\r\n                    return (\r\n                        <div class={classes.value} style={styles.value} onClick={handler.onClick}>\r\n                            <PlIcon icon=\"el-icon-picture\"/>\r\n                            <span>{tip[status.value]}</span>\r\n                            {status.value === ImageStatus.pending && (<PlLoadingMask modelValue={true} background=\"rgba(255,255,255,0.5)\"/>)}\r\n                        </div>\r\n                    )\r\n                }\r\n                if (status.value === ImageStatus.success) {\r\n                    return (\r\n                        <img src={state.src} class={classes.value} style={styles.value} onClick={handler.onClick}/>\r\n                    )\r\n                }\r\n            }\r\n        }\r\n    },\r\n}, {\r\n    $image,\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport './image.scss'\r\nimport {PropType, reactive, watch} from 'vue';\r\nimport {$$file, FileServiceDefaultAccept, FileServiceUploadConfig} from \"../file-service/file-service\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {PlIcon} from \"../icon/icon\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\nimport {defer} from \"../../utils/defer\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {PlImage, PlImageProps} from \"./image\";\r\nimport {ImageStatus} from \"./image.utils\";\r\nimport {$image} from \"./service\";\r\n\r\nenum ImageUploaderStatus {\r\n    /*加载*/\r\n    empty = 'empty',                                        // 当前无图片\r\n    pending = 'pending',                                    // 加载中\r\n    success = 'success',                                    // 图片加载成功或者上传成功\r\n    error = 'error',                                        // 图片加载失败\r\n    /*上传*/\r\n    fail = 'fail',                                          // 图片上传失败\r\n    upload = 'upload',                                      // 图片加载中\r\n}\r\n\r\nexport const PlImageUploader = designComponent({\r\n    name: 'pl-image-uploader',\r\n    props: {\r\n        ...EditProps,\r\n        ...PlImageProps,\r\n        modelValue: {type: String},                                                             // 图片路径\r\n        width: {type: [String, Number], default: '80px'},                                       // 图片宽度\r\n        height: {type: [String, Number], default: '80px'},                                      // 图片高度\r\n        accept: {type: String, default: FileServiceDefaultAccept.image},                        // 选择文件的时候，图片类型\r\n        uploadConfig: {type: Object as PropType<Omit<FileServiceUploadConfig, 'file'>>},        // 上传配置信息对象\r\n        previewImage: {type: String},                                                           // 预览的时候显示的图片\r\n        handleDelete: {type: Function as PropType<() => void | Promise<void>>},                 // 自定义删除图片逻辑\r\n        handleUpload: {type: Function as PropType<(file: File) => void | Promise<void>>},       // 自定义上传图片逻辑\r\n        handlePreview: {type: Function as PropType<(url?: string) => void>},                    // 自定义预览逻辑\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: string) => true,\r\n        onLoadSuccess: (url: string) => true,\r\n        onLoadError: (e: string | Event) => true,\r\n        onUploadSuccess: (resp: object | string) => true,\r\n        onUploadProgress: (percent: number, e: ProgressEvent) => true,\r\n        onUploadFail: (e: any) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoWatch: false})\r\n\r\n        const {editComputed} = useEdit()\r\n\r\n        const state = reactive({\r\n            status: ImageUploaderStatus.empty,\r\n            percent: null as null | number,\r\n            chooseBase64: undefined as string | undefined,\r\n        })\r\n\r\n        watch(() => props.modelValue, val => {\r\n            model.value = val\r\n            state.chooseBase64 = undefined\r\n            if (!val) {\r\n                return state.status = ImageUploaderStatus.empty\r\n            }\r\n            state.status = ImageUploaderStatus.pending\r\n            const image = new Image()\r\n            image.onload = () => {\r\n                state.status = ImageUploaderStatus.success\r\n                emit.onLoadSuccess(val)\r\n            }\r\n            image.onerror = (e) => {\r\n                state.status = ImageUploaderStatus.error\r\n                emit.onLoadError(e)\r\n            }\r\n            image.src = val\r\n        }, {immediate: true})\r\n\r\n        const classes = useClass(() => [\r\n            'pl-image-uploader',\r\n            `pl-image-uploader-status-${state.status}`,\r\n            {\r\n                'pl-image-disabled': editComputed.value.disabled,\r\n                'pl-image-editable': editComputed.value.editable,\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            if (!!props.height) {style.height = unit(props.height)}\r\n            if (!!props.width) {style.width = unit(props.width)}\r\n        })\r\n\r\n        const methods = {\r\n            choose: async () => {\r\n                const dfd = defer<void | string | Record<string, string>>()\r\n                const file = await $$file.chooseImage() as File\r\n                state.chooseBase64 = await $$file.readAsDataURL(file) as string\r\n\r\n                if (!!props.uploadConfig) {\r\n                    const config = deepcopy(props.uploadConfig)\r\n                    state.status = ImageUploaderStatus.upload\r\n                    $$file.upload({\r\n                        ...config,\r\n                        file,\r\n                        onProgress: (percent, e) => {\r\n                            if (!!config.onProgress) config.onProgress(percent, e)\r\n                            console.log('percent', percent)\r\n                            state.percent = percent\r\n                            emit.onUploadProgress(percent, e)\r\n                        },\r\n                        onSuccess: (resp) => {\r\n                            if (!!config.onSuccess) config.onSuccess(resp)\r\n                            console.log('upload success, resp:', resp)\r\n                            model.value = String(state.chooseBase64)\r\n                            state.chooseBase64 = undefined\r\n                            state.status = ImageUploaderStatus.success\r\n                            emit.onUploadSuccess(resp)\r\n                            dfd.resolve(resp)\r\n                        },\r\n                        onError: (e) => {\r\n                            if (!!config.onError) config.onError(e)\r\n                            console.log('upload fail, e:', e)\r\n                            state.status = ImageUploaderStatus.fail\r\n                            emit.onUploadFail(e)\r\n                            dfd.reject(e)\r\n                        },\r\n                    })\r\n                } else if (!!props.handleUpload) {\r\n                    await props.handleUpload(file)\r\n                    dfd.resolve()\r\n                } else {\r\n                    dfd.reject('image-uploader: no props.uploadConfig and props.handleUpload, do nothing')\r\n                }\r\n\r\n                return dfd.promise\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            onClick: async () => {\r\n                if (!editComputed.value.editable) return\r\n                await methods.choose()\r\n            },\r\n            onClickImage: async () => {\r\n                if (state.status === ImageUploaderStatus.error) {\r\n                    return await handler.onClick()\r\n                }\r\n                const url = props.previewImage || model.value || state.chooseBase64\r\n                if (!!props.handlePreview) {\r\n                    return props.handlePreview(url)\r\n                } else {\r\n                    !!url && $image.preview(url)\r\n                }\r\n            },\r\n            onClickDelete: async () => {\r\n                if (!!props.handleDelete) {\r\n                    await props.handleDelete()\r\n                }\r\n                model.value = undefined\r\n                state.chooseBase64 = undefined\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {(!!model.value || !!state.chooseBase64) && (\r\n                        <PlImage\r\n                            src={model.value || state.chooseBase64}\r\n                            fit={props.fit}\r\n                            alt={props.alt}\r\n                            position={props.position}\r\n                            previewOnClick={false}\r\n                            height={props.height}\r\n                            width={props.width}\r\n                            onClick={handler.onClickImage}\r\n                        />\r\n                    )}\r\n                    {state.status === ImageUploaderStatus.empty && <div class=\"pl-image-uploader-empty\" onClick={handler.onClick}>\r\n                        <PlIcon icon=\"el-icon-picture\"/>\r\n                        <span>待上传</span>\r\n                    </div>}\r\n                    {state.status === ImageUploaderStatus.fail && <div class=\"pl-image-uploader-fail\" onClick={handler.onClick}>\r\n                        <PlIcon icon=\"el-icon-close\"/>\r\n                        <span>上传失败</span>\r\n                    </div>}\r\n                    <div class=\"pl-image-uploader-button-group\">\r\n                        <div class=\"pl-image-uploader-button\" onClick={handler.onClick}>\r\n                            <PlIcon icon=\"el-icon-upload\"/>\r\n                        </div>\r\n                        <div class=\"pl-image-uploader-button\" onClick={handler.onClickDelete}>\r\n                            <PlIcon icon=\"el-icon-close-bold\"/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlImage} from \"./image\";\r\n\r\nexport default createComponentPlugin(PlImage)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlImageUploader} from \"../image/image-uploader\";\r\n\r\nexport default createComponentPlugin(PlImageUploader)","import {registryRootService} from \"../root/registryRootService\";\r\nimport {VNodeChild} from \"../../shims\";\r\nimport {onBeforeUnmount, onMounted, reactive, ref, Transition, provide} from 'vue';\r\nimport {createDefaultService} from \"../root/createDefaultService\";\r\nimport {createDefaultManager} from \"../root/createDefaultManager\";\r\nimport {getServiceWithoutContext} from \"../../utils/getServiceWithoutContext\";\r\nimport './contextmenu-service.scss'\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {PlDropdownOption} from \"../dropdown/dropdown-option\";\r\nimport {PlDropdownMenu} from \"../dropdown/dropdown-menu\";\r\n\r\ntype ContextmenuReference = MouseEvent | HTMLElement | { $el: HTMLElement } | { x: number, y: number }\r\ntype ContextContent = (() => VNodeChild) | { label: string, icon?: string, disabled?: string }[]\r\n\r\ninterface ContextmenuServiceOption {\r\n    reference: ContextmenuReference,\r\n    content: ContextContent,\r\n    width?: number,\r\n    height?: number,\r\n}\r\n\r\nfunction getReferencePosition(reference: ContextmenuReference): { top: number, left: number } {\r\n    if ('addEventListener' in reference || '$el' in reference) {\r\n        let el = '$el' in reference ? reference.$el : reference\r\n        const {top, left, height} = el.getBoundingClientRect()\r\n        return {\r\n            top: top + height,\r\n            left: left,\r\n        }\r\n    } else if ('clientX' in reference) {\r\n        const {clientX, clientY} = reference\r\n        return {\r\n            top: clientY,\r\n            left: clientX,\r\n        }\r\n    } else {\r\n        return {\r\n            top: reference.y,\r\n            left: reference.x,\r\n        }\r\n    }\r\n}\r\n\r\nconst Service = createDefaultService({\r\n    name: 'pl-contextmenu-service',\r\n    components: {\r\n        'pl-dropdown-option': PlDropdownOption,\r\n        'pl-dropdown-menu': PlDropdownMenu,\r\n    },\r\n    setup(option: ContextmenuServiceOption) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n        const isShow = ref(false)\r\n        const isOpen = ref(false)\r\n        const state = reactive({\r\n            option,\r\n            zIndex: nextIndex(),\r\n        })\r\n        const mounted = new Promise(resolve => onMounted(resolve))\r\n        let hideTimer: number | null = null\r\n        let onTransitionEnd: (() => void) | null = null\r\n\r\n        const methods = {\r\n            service: (option: ContextmenuServiceOption) => {\r\n                state.option = option\r\n                methods.show()\r\n                return methods.hide\r\n            },\r\n            show: async () => {\r\n                if (!!hideTimer) clearTimeout(hideTimer)\r\n                state.zIndex = nextIndex()\r\n                await mounted;\r\n                isShow.value = true\r\n                onTransitionEnd = () => {\r\n                    isOpen.value = true\r\n                    onTransitionEnd = null\r\n                }\r\n            },\r\n            hide: () => {\r\n                isShow.value = false\r\n                onTransitionEnd = () => {\r\n                    isOpen.value = false\r\n                    onTransitionEnd = null\r\n                }\r\n            },\r\n        }\r\n\r\n        const styles = useStyles(style => {\r\n            const {top, left} = getReferencePosition(state.option.reference)\r\n            style.top = `${top}px`\r\n            style.left = `${left}px`\r\n            style.zIndex = state.zIndex\r\n        })\r\n\r\n        const bodyStyles = useStyles(style => {\r\n            const {width, height} = state.option\r\n            !!width && (style.width = `${width}px`);\r\n            !!height && (style.height = `${height}px`);\r\n        })\r\n\r\n        const handler = {\r\n            onTransitionEnd: () => !!onTransitionEnd && onTransitionEnd(),\r\n            onMousedownWindow: (e: MouseEvent) => {\r\n                if (!refs.el.contains(e.target as HTMLDivElement)) {\r\n                    hideTimer = setTimeout(() => methods.hide(), 50)\r\n                }\r\n            },\r\n            clickDropdownOption: () => {\r\n                methods.hide()\r\n            },\r\n        }\r\n\r\n        document.body.addEventListener('mouseup', handler.onMousedownWindow)\r\n        onBeforeUnmount(() => document.body.removeEventListener('mouseup', handler.onMousedownWindow))\r\n\r\n        provide('@@pl-dropdown', {handler})\r\n\r\n        return {\r\n            refer: {\r\n                state,\r\n                isShow,\r\n                isOpen,\r\n                ...methods,\r\n            },\r\n            render: () => {\r\n\r\n                let content: VNodeChild;\r\n                if (typeof state.option.content === \"function\") {\r\n                    content = state.option.content()\r\n                } else {\r\n                    content = state.option.content.map(item => <div>\r\n                        {item.label}\r\n                    </div>)\r\n                }\r\n\r\n                return (\r\n                    <div class=\"pl-contextmenu-service\" style={styles.value} ref=\"el\" {...{show: String(isShow.value)} as any}>\r\n                        <Transition name=\"pl-transition-scale\" onAfterEnter={handler.onTransitionEnd} onAfterLeave={handler.onTransitionEnd}>\r\n                            <div class=\"pl-contextmenu-service-body\" v-show={isShow.value} style={bodyStyles.value}>\r\n                                {content}\r\n                            </div>\r\n                        </Transition>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\ntype ServiceComponent = typeof Service.use.class\r\n\r\nexport const getContextmenuService = registryRootService(\r\n    'contextmenu',\r\n    createDefaultManager('pl-contextmenu-service-manager', Service, ((items: ServiceComponent[], option: ContextmenuServiceOption) => {\r\n\r\n        const newPos = getReferencePosition(option.reference)\r\n        let exist: ServiceComponent | null = null\r\n        let available: ServiceComponent | null = null\r\n        items.forEach(item => {\r\n            if (!!exist) {\r\n                return\r\n            }\r\n            if (item.state.option === option) {\r\n                exist = item\r\n                return;\r\n            }\r\n            const oldPos = getReferencePosition(item.state.option.reference)\r\n            if (oldPos.top === newPos.top && oldPos.left === newPos.left) {\r\n                exist = item\r\n                return;\r\n            }\r\n            if (!item.isShow.value && !item.isOpen.value) {\r\n                available = item\r\n            }\r\n        })\r\n        return exist || available\r\n    }) as any),\r\n    (getManager) => {\r\n        return async (reference: ContextmenuReference, content: ContextContent) => {\r\n            const option = {reference, content}\r\n            const manager = await getManager()\r\n            return manager.service(option)\r\n        }\r\n    }\r\n)\r\n\r\nexport const $$contextmenu = getServiceWithoutContext(getContextmenuService)","import {PlTabComponent} from \"./tab\";\r\n\r\nexport enum TabHeadType {\r\n    text = 'text',\r\n    card = 'card',\r\n}\r\n\r\nexport enum TabHeadPosition {\r\n    top = 'top',\r\n    bottom = 'bottom',\r\n    left = 'left',\r\n    right = 'right',\r\n}\r\n\r\nexport type TabData = { item: PlTabComponent, index: number, active: boolean }","import {App} from \"vue\";\r\nimport {getContextmenuService} from \"./contextmenu-service\";\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            computed: {\r\n                $contextmenu() {return getContextmenuService(this)},\r\n            },\r\n        })\r\n    },\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {TabCollector} from \"./tabs\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\n\r\nexport const PlTab = designComponent({\r\n    name: 'pl-tab',\r\n    props: {\r\n        title: {type: String},                              // 页签标题\r\n        init: {type: Boolean},                              // 是否立即初始化（默认第一次点击页签的时候才会初始化内容）\r\n        val: {type: [String, Number]},                      // 页签唯一标识，用于 pl-tabs 绑定值\r\n        destroyOnHide: {type: Boolean},                     // 是否再隐藏页签的时候销毁页签页面(重新打开页签的时候，页签内容会重新初始化)\r\n    },\r\n    setup({props}) {\r\n        const {refs} = useRefs({\r\n            el: HTMLSpanElement,\r\n        })\r\n        const {slots} = useSlots()\r\n        const {scopedSlots} = useScopedSlots({\r\n            head: {active: Boolean},\r\n        })\r\n        TabCollector.child({sort: () => refs.el})\r\n\r\n        return {\r\n            refer: {\r\n                slots,\r\n                scopedSlots,\r\n                props,\r\n            },\r\n            render: () => (<span ref=\"el\">{props.title}</span>)\r\n        }\r\n    },\r\n})\r\n\r\nexport type PlTabComponent = typeof PlTab.use.class","import {designComponent} from \"../../use/designComponent\";\r\nimport {PropType, reactive, onMounted, onBeforeUnmount, computed} from 'vue';\r\nimport {TabData} from \"./tabs.utils\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\n\r\nexport const PlTabsHeader = designComponent({\r\n    props: {\r\n        tabs: {type: Array as PropType<TabData[]>, required: true},\r\n    },\r\n    emits: {\r\n        onClickTabHead: (tab: TabData) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n            list: HTMLDivElement,\r\n        })\r\n\r\n        const state = reactive({\r\n            offsetData: {\r\n                listLeft: 0,                    // list元素当前left值\r\n                hostWidth: 0,                   // 容器宽度\r\n                totalWidth: 0,                  // 总的item宽度\r\n                children: [] as { left: number, width: number }[],\r\n            },\r\n        })\r\n\r\n        const utils = {\r\n            refreshOffsetData: () => {\r\n                const {offsetWidth} = refs.el\r\n                const {children} = refs.list\r\n                state.offsetData.hostWidth = offsetWidth;\r\n                state.offsetData.children = (Array.from(children) as HTMLDivElement[]).reduce((prev, item, index) => {\r\n                    const {offsetLeft, offsetWidth} = item\r\n                    /*最后一个是 indicator，所以这里找最后一个child是-2*/\r\n                    if (index === children.length - 2) {state.offsetData.totalWidth = offsetLeft + offsetWidth}\r\n                    prev.push({left: offsetLeft, width: offsetWidth})\r\n                    return prev\r\n                }, [] as { left: number, width: number }[])\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            onMousewheel: (e: MouseWheelEvent) => {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                const {totalWidth, hostWidth, listLeft} = state.offsetData\r\n                if (totalWidth < hostWidth) {return}\r\n                const delta = ((Math.abs(e.deltaX) > Math.abs(e.deltaY) ? e.deltaX : e.deltaY))\r\n                let target = listLeft - delta\r\n                if (target > 0) {\r\n                    target = 0\r\n                } else if (target < (hostWidth - totalWidth)) {\r\n                    target = hostWidth - totalWidth\r\n                }\r\n                state.offsetData.listLeft = target\r\n            }\r\n        }\r\n\r\n        const listStyles = useStyles(style => {\r\n            style.left = `${state.offsetData.listLeft}px`\r\n        })\r\n        const indicatorStyle = useStyles(style => {\r\n            const index = props.tabs.findIndex(i => i.active)\r\n            if (index == null || index === -1) return\r\n            const el = state.offsetData.children[index]\r\n            if (!el) return;\r\n            const {left, width} = el\r\n            style.left = `${left}px`\r\n            style.width = `${width}px`\r\n        })\r\n\r\n        let refreshTimer: number;\r\n        onMounted(() => {\r\n            refreshTimer = setInterval(() => utils.refreshOffsetData(), 1000)\r\n        })\r\n        onBeforeUnmount(() => {\r\n            clearInterval(refreshTimer)\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-tabs-header\" onWheel={handler.onMousewheel} ref=\"el\">\r\n                    <div class=\"pl-tabs-header-list\" style={listStyles.value} ref=\"list\">\r\n                        {props.tabs.map((tab, index) => (\r\n                            <div class={[\r\n                                'pl-tabs-header-item',\r\n                                {'pl-tabs-header-item-active': tab.active}\r\n                            ]} key={index}\r\n                                 onClick={() => emit.onClickTabHead(tab)}\r\n                            >\r\n                                {tab.item.scopedSlots.head({active: false}, tab.item.props.title)}\r\n                            </div>\r\n                        ))}\r\n                        <i class=\"pl-tabs-header-indicator\" style={indicatorStyle.value}/>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {PropType, reactive, nextTick, watch, Transition} from 'vue';\r\nimport {PlTabComponent} from \"./tab\";\r\n\r\nexport const PlInnerTab = designComponent({\r\n    props: {\r\n        item: {type: Object as PropType<PlTabComponent>, required: true},\r\n        active: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n\r\n        const state = reactive({\r\n            show: false,\r\n            init: props.item.props.init,\r\n        })\r\n\r\n        const methods = {\r\n            show: async () => {\r\n                if (state.show) return\r\n                else {\r\n                    if (!state.init) {\r\n                        state.init = true\r\n                        await nextTick()\r\n                    }\r\n                    state.show = true\r\n                }\r\n            },\r\n            hide: async () => {\r\n                if (!state.show) return\r\n                else {\r\n                    state.show = false\r\n                    if (props.item!.props.destroyOnHide) {\r\n                        await nextTick()\r\n                        state.init = false\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        watch(() => props.active, async (val) => {val ? await methods.show() : await methods.hide()}, {immediate: true})\r\n\r\n        return {\r\n            render: () => (\r\n                <Transition name=\"pl-transition-tab\">\r\n                    <div class=\"pl-inner-tab\" v-show={props.active}>\r\n                        {!!state.init && props.item.slots.default()}\r\n                    </div>\r\n                </Transition>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {PropType, onMounted, computed} from 'vue';\r\nimport {TabData, TabHeadPosition, TabHeadType} from \"./tabs.utils\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {PlTab, PlTabComponent} from \"./tab\";\r\nimport {PlTabsHeader} from \"./tabs-header\";\r\nimport './tab.scss'\r\nimport {PlInnerTab} from \"./inner-tab\";\r\n\r\nexport const PlTabs = designComponent({\r\n    name: 'pl-tabs',\r\n    props: {\r\n        modelValue: {type: [String, Number]},\r\n        headType: {type: String as PropType<TabHeadType>, default: TabHeadType.text},\r\n        headPosition: {type: String as PropType<TabHeadType>, default: TabHeadPosition.top},\r\n        closeable: {type: Boolean},\r\n    },\r\n    emits: {\r\n        updateModelValue: (val?: string | number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n        const model = useModel(() => props.modelValue, emit.updateModelValue)\r\n        const items = TabCollector.parent()\r\n\r\n        const tabs = computed(() => items.map((item, index) => ({\r\n            item,\r\n            index,\r\n            active: (() => {\r\n                const {val} = item.props\r\n                if (val != null) {\r\n                    return model.value == val\r\n                }\r\n                if (model.value != null) {\r\n                    return model.value == index\r\n                }\r\n                return index == 0\r\n            })(),\r\n        })))\r\n\r\n        const handler = {\r\n            onClickTabHeader: ({item, index, active}: TabData) => {\r\n                const {props: {val}} = item\r\n                if (active) {return}\r\n                model.value = val == null ? index : val\r\n            }\r\n        }\r\n\r\n        onMounted(() => {\r\n            // console.log(items, model)\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <div class=\"pl-tabs\">\r\n                        <div class=\"pl-tabs-collector\">{slots.default()}</div>\r\n                        <PlTabsHeader tabs={tabs.value} onClickTabHead={handler.onClickTabHeader}/>\r\n                        <div class=\"pl-tabs-body\">\r\n                            {tabs.value.map((tab, index) => (\r\n                                <PlInnerTab item={tab.item} key={index} active={tab.active}/>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport const TabCollector = useCollect(() => ({\r\n    parent: PlTabs,\r\n    child: PlTab,\r\n}))","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlTabs} from \"../tab/tabs\";\r\n\r\nexport default createComponentPlugin(PlTabs)","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PlTab} from \"./tab\";\r\n\r\nexport default createComponentPlugin(PlTab)","import {App} from \"vue\"\r\nimport {ComponentPlugin} from \"./shims\";\r\nimport {installPlugin} from \"./utils/installPlugin\";\r\n\r\nimport Root from './packages/root'\r\nimport Button from \"./packages/button\";\r\nimport ButtonGroup from './packages/button-group'\r\nimport Input from \"./packages/input\";\r\nimport InputInnerTags from './packages/input-inner-tags'\r\nimport Icon from './packages/icon';\r\nimport Loading from './packages/loading'\r\nimport LoadingMask from './packages/loading-mask'\r\nimport Checkbox from './packages/checkbox'\r\nimport CheckboxGroup from './packages/checkbox-group'\r\nimport CheckboxInner from './packages/checkbox-inner'\r\nimport MessageService from './packages/message'\r\nimport List from './packages/list'\r\nimport Item from './packages/item'\r\nimport Grid from './packages/grid'\r\nimport Row from './packages/row'\r\nimport Col from './packages/col'\r\nimport Radio from './packages/radio'\r\nimport RadioInner from './packages/radio-inner'\r\nimport RadioGroup from './packages/radio-group'\r\nimport Dialog from './packages/dialog'\r\nimport DialogService from './packages/dialog-service'\r\nimport Scroll from './packages/scroll'\r\nimport NoticeService from './packages/notice-service'\r\nimport LoadingService from './packages/loading-service'\r\nimport Number from './packages/number'\r\nimport Toggle from './packages/toggle'\r\nimport Slider from './packages/slider'\r\nimport Tag from './packages/tag'\r\nimport TagInput from './packages/tag-input'\r\nimport Rate from './packages/rate'\r\nimport VirtualList from './packages/virtual-list'\r\nimport Progress from './packages/progress'\r\nimport ProgressBar from './packages/progress-bar'\r\nimport ProgressCircle from './packages/progress-circle'\r\nimport ProgressMini from './packages/progress-mini'\r\nimport Pagination from './packages/pagination'\r\nimport Badge from './packages/badge'\r\nimport Step from './packages/step'\r\nimport StepGroup from './packages/step-group'\r\nimport ArrowStep from './packages/arrow-step'\r\nimport ArrowStepGroup from './packages/arrow-step-group'\r\nimport Popper from './packages/popper'\r\nimport Dropdown from './packages/dropdown'\r\nimport DropdownGroup from './packages/dropdown-group'\r\nimport DropdownMenu from './packages/dropdown-menu'\r\nimport DropdownOption from './packages/dropdown-option'\r\nimport Tooltip from './packages/tooltip'\r\nimport Alert from './packages/alert'\r\nimport Collapse from './packages/collapse'\r\nimport CollapseGroup from './packages/collapse-group'\r\nimport CollapseTransition from './packages/collapse-transition'\r\nimport Card from './packages/card'\r\nimport Carousel from './packages/carousel'\r\nimport CarouselItem from './packages/carousel-item'\r\nimport ColorPicker from './packages/color-picker'\r\nimport ColorButton from './packages/color-button'\r\nimport Cascade from './packages/cascade'\r\nimport Tree from './packages/tree'\r\nimport Select from './packages/select'\r\nimport SelectOption from './packages/select-option'\r\nimport SelectGroup from './packages/select-group'\r\nimport DateTimeInput from './packages/date-time-input'\r\nimport Time from './packages/time'\r\nimport Date from './packages/date'\r\nimport Form from './packages/form'\r\nimport FormItem from './packages/form-item'\r\nimport Table from './packages/table'\r\nimport VirtualTable from './packages/virtual-table'\r\nimport Plc from './packages/plc'\r\nimport PlcGroup from './packages/plc-group'\r\nimport Upload from './packages/upload'\r\nimport Nav from './packages/nav'\r\nimport FileService from './packages/file-service'\r\nimport Image from './packages/image'\r\nimport ImageUploader from './packages/image-uploader'\r\nimport Contextmenu from './packages/contextmenu'\r\nimport Tabs from './packages/tabs'\r\nimport Tab from './packages/tab'\r\n\r\nfunction install(app: App) {\r\n    installPlugin(app, plugins)\r\n}\r\n\r\nconst plugins: ComponentPlugin[] = [\r\n    Root,\r\n\r\n    Button, ButtonGroup, Icon, Loading, LoadingMask,\r\n    List, Item, Grid, Dialog, Scroll, VirtualList, Progress, ProgressBar,\r\n    ProgressCircle, ProgressMini, Pagination, Badge,\r\n    Step, StepGroup, ArrowStep, ArrowStepGroup, Popper, Dropdown, DropdownGroup,\r\n    DropdownMenu, DropdownOption, InputInnerTags,\r\n    Tooltip, Alert, Collapse, CollapseGroup, CollapseTransition, Card,\r\n    Carousel, CarouselItem, Table, VirtualTable, Plc, PlcGroup, Nav, Row, Col, Tabs, Tab,\r\n\r\n    Input, CheckboxInner, Checkbox, CheckboxGroup, Radio, RadioInner, RadioGroup, Number, Toggle, Slider,\r\n    Tag, TagInput, Rate, ColorPicker, ColorButton, Cascade, Tree, Select, SelectOption, SelectGroup, Time,\r\n    DateTimeInput, Date, Form, FormItem, Upload, Image, ImageUploader,\r\n\r\n    MessageService, DialogService, NoticeService, LoadingService, FileService, Contextmenu,\r\n]\r\n\r\nexport {\r\n    install, Root,\r\n\r\n    Button, ButtonGroup, Icon, Loading, LoadingMask,\r\n    List, Item, Grid, Dialog, Scroll, VirtualList, Progress, ProgressBar,\r\n    ProgressCircle, ProgressMini, Pagination, Badge,\r\n    Step, StepGroup, ArrowStep, ArrowStepGroup, Popper, Dropdown, DropdownGroup,\r\n    DropdownMenu, DropdownOption, InputInnerTags,\r\n    Tooltip, Alert, Collapse, CollapseGroup, CollapseTransition, Card,\r\n    Carousel, CarouselItem, Table, VirtualTable, Plc, PlcGroup, Nav, Row, Col, Tabs, Tab,\r\n\r\n    Input, CheckboxInner, Checkbox, CheckboxGroup, Radio, RadioInner, RadioGroup, Number, Toggle, Slider,\r\n    Tag, TagInput, Rate, ColorPicker, ColorButton, Cascade, Tree, Select, SelectOption, SelectGroup, Time,\r\n    DateTimeInput, Date, Form, FormItem, Upload, Image, ImageUploader,\r\n\r\n    MessageService, DialogService, NoticeService, LoadingService, FileService, Contextmenu,\r\n}\r\n\r\nexport default {\r\n    install,\r\n}"],"sourceRoot":""}