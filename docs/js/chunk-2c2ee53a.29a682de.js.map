{"version":3,"sources":["webpack://CustomApplicationmain-application/./story/pages/use/useEvent/demo-use-event.vue?6324","webpack://CustomApplicationmain-application/./story/pages/use/useEvent/demo-use-event.vue","webpack://CustomApplicationmain-application/./story/pages/use/useEvent/DemoUseEventTable.tsx","webpack://CustomApplicationmain-application/./story/pages/use/useEvent/DemoUseEventTableHead.tsx","webpack://CustomApplicationmain-application/./story/pages/use/useEvent/DemoUseEventTableBody.tsx","webpack://CustomApplicationmain-application/./story/pages/use/useEvent/DemoParent.tsx","webpack://CustomApplicationmain-application/./story/pages/use/useEvent/demo-use-event.vue?7514"],"names":["class","style","for","state","currentPart","count","type","id","showHeader","onScroll","tips","item","key","label","done","log","title","init","popper","DemoUseEventTablePart","DemoUseEventTableHead","designComponent","emits","onClickHeader","tag","setup","wrapperEl","table","DemoUseEventTable","use","inject","handler","scroll","e","part","body","value","scrollLeft","target","wrapperScroll","hoverPart","head","event","emit","mousewheel","deltaY","on","off","render","onMousewheel","DemoUseEventTableBody","altKey","preventDefault","stopPropagation","name","props","Boolean","default","provideRefer","refer","toFixed","createEventListener","onMouseenter","DemoParent","destroy","open","close","show","hide","val","setupContext","components","console"],"mappings":"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","file":"js/chunk-2c2ee53a.29a682de.js","sourcesContent":["export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./demo-use-event.vue?vue&type=style&index=0&id=7935ff92&lang=scss\"","<template>\r\n    <div class=\"demo-use-event\">\r\n        <div style=\"display: inline-block;width: 360px\">\r\n            <div>\r\n                当前滚动位置:{{!!state.currentPart?`${state.currentPart} (${state.count})`:'无'}}\r\n            </div>\r\n            <h3>\r\n                <input type=\"checkbox\" id=\"showHeader\" v-model=\"state.showHeader\">\r\n                <label for=\"showHeader\">showHeader</label>\r\n            </h3>\r\n            <demo-use-event-table @scroll=\"onScroll\" :showHeader=\"state.showHeader\"/>\r\n        </div>\r\n        <ul style=\"display: inline-block; vertical-align: top\">\r\n            <li v-for=\"item in state.tips\" :key=\"item.label\">\r\n                <button v-if=\"!item.done\" style=\"margin-right: 8px\" @click=\"()=>item.done = true\">done</button>\r\n                <span>{{item.label}}</span>\r\n            </li>\r\n        </ul>\r\n        <demo-parent\r\n                @click-body=\"log('click-body parent')\"\r\n        >\r\n\r\n        </demo-parent>\r\n        <demo-row title=\"测试组件销毁之后，监听的事件是否已经销毁\">\r\n            <pl-checkbox v-model=\"state.init\" label=\"init\"/>\r\n            <demo-parent v-if=\"state.init\" @click-body=\"log('click body')\">\r\n                <pl-button label=\"click激活\"/>\r\n                <template #popper>\r\n                    <div class=\"demo-popper-content\">\r\n                        这里是popper的内容\r\n                    </div>\r\n                </template>\r\n            </demo-parent>\r\n        </demo-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {DemoUseEventTable} from \"./DemoUseEventTable\";\r\n    import {reactive} from 'vue'\r\n    import {DemoParent} from \"./DemoParent\";\r\n\r\n    export default {\r\n        name: \"demo-use-event\",\r\n        components: {\r\n            DemoUseEventTable,\r\n            DemoParent,\r\n        },\r\n        setup() {\r\n            const state = reactive({\r\n                showHeader: true,\r\n                currentPart: null,\r\n                count: 0,\r\n                init: true,\r\n\r\n                tips: [\r\n                    {label: '使用鼠标的滚轮进行纵向滚动', done: false},\r\n                    {label: '拖拽横向滚动条横向联动滚动', done: false},\r\n                    {label: '在表头、表体使用触摸板横向，以及纵向滚动', done: false},\r\n                    {label: '在表头使用鼠标滚动横向滚动', done: false},\r\n                    {label: '在表体使用 alt+鼠标滚动 横向滚动', done: false},\r\n                ],\r\n            })\r\n\r\n\r\n            return {\r\n                state,\r\n                onScroll: (e, part) => {\r\n                    if (part === state.currentPart) {\r\n                        state.count++\r\n                    } else {\r\n                        state.currentPart = part\r\n                        state.count = 0\r\n                    }\r\n                },\r\n                log(...args) {\r\n                    console.log(...args)\r\n                },\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .demo-use-event-table {\r\n        width: 300px;\r\n\r\n        .demo-use-event-table-head {\r\n            width: 100%;\r\n            overflow-x: auto;\r\n\r\n            .demo-use-event-table-head-inner {\r\n                width: 600px;\r\n                height: 60px;\r\n                background-color: #f6f6f6;\r\n                font-size: 40px;\r\n            }\r\n        }\r\n\r\n        .demo-use-event-table-body {\r\n            width: 100%;\r\n            overflow-x: auto;\r\n            height: 300px;\r\n\r\n            .demo-use-event-table-body-inner {\r\n                width: 600px;\r\n                height: 600px;\r\n                background-color: #f2f2f2;\r\n                font-size: 120px;\r\n            }\r\n        }\r\n    }\r\n</style>","import {designComponent} from \"../../../../src/use/designComponent\";\r\nimport {DemoUseEventTableHead} from \"./DemoUseEventTableHead\";\r\nimport {DemoUseEventTableBody} from \"./DemoUseEventTableBody\";\r\nimport {reactive} from 'vue';\r\nimport {createEventListener} from \"../../../../src/utils/createEventListener\";\r\n\r\nexport enum DemoUseEventTablePart {\r\n    head = 'head',\r\n    body = 'body',\r\n}\r\n\r\nexport const DemoUseEventTable = designComponent({\r\n    name: 'demo-sue-event-table',\r\n    props: {\r\n        showHeader: {type: Boolean, default: true},\r\n    },\r\n    emits: {\r\n        scroll: (e: Event, part: DemoUseEventTablePart) => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event}) {\r\n\r\n        const state = reactive({\r\n            hoverPart: null as null | DemoUseEventTablePart\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                state,\r\n                event,\r\n            },\r\n            render: () => (\r\n                <div class=\"demo-use-event-table\" onMouseleave={() => state.hoverPart = null}>\r\n\r\n                    {!!props.showHeader &&\r\n                    <DemoUseEventTableHead\r\n                        onClickHeader={(name) => {\r\n                            name.toFixed(1)\r\n                        }}\r\n                        {...createEventListener({\r\n                            onMouseenter: () => state.hoverPart = DemoUseEventTablePart.head,\r\n                        })}\r\n                    />}\r\n\r\n                    <DemoUseEventTableBody {...createEventListener({\r\n                        onMouseenter: () => state.hoverPart = DemoUseEventTablePart.body\r\n                    })}/>\r\n\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../../src/use/designComponent\";\r\nimport {DemoUseEventTable, DemoUseEventTablePart} from \"./DemoUseEventTable\";\r\nimport {onBeforeUnmount, ref} from 'vue';\r\n\r\nexport const DemoUseEventTableHead = designComponent({\r\n    emits: {\r\n        onClickHeader: (tag: number) => true,\r\n    },\r\n    setup() {\r\n\r\n        const wrapperEl = ref(null as null | HTMLDivElement)\r\n        const table = DemoUseEventTable.use.inject()\r\n\r\n        const handler = {\r\n            /**\r\n             * 组件销毁的时候，如果不取消监听事件，则监听的事件一直有效\r\n             * 此时 wrapperEl  节点已经销毁，会导致一直报错\r\n             * @author  韦胜健\r\n             * @date    2020/10/29 16:14\r\n             */\r\n            scroll: (e: Event, part: DemoUseEventTablePart) => {\r\n                // console.log('head handle scroll', Date.now())\r\n                if (part === DemoUseEventTablePart.body) {\r\n                    wrapperEl.value!.scrollLeft = (e.target as HTMLDivElement).scrollLeft\r\n                }\r\n            },\r\n            wrapperScroll: (e: Event) => {\r\n                if (table.state.hoverPart === DemoUseEventTablePart.head) {\r\n                    table.event.emit.scroll(e, DemoUseEventTablePart.head)\r\n                }\r\n            },\r\n            mousewheel: (e: MouseWheelEvent) => {\r\n                wrapperEl.value!.scrollLeft = wrapperEl.value!.scrollLeft + e.deltaY\r\n            }\r\n        }\r\n\r\n        table.event.on.scroll(handler.scroll)\r\n        onBeforeUnmount(() => table.event.off.scroll(handler.scroll))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"demo-use-event-table-head\"\r\n                     ref={wrapperEl}\r\n                     onScroll={handler.wrapperScroll}\r\n                     {...{onMousewheel: handler.mousewheel}}>\r\n                    <div class=\"demo-use-event-table-head-inner\">\r\n                        table head\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../../src/use/designComponent\";\r\nimport {DemoUseEventTable, DemoUseEventTablePart} from \"./DemoUseEventTable\";\r\nimport {onBeforeUnmount, ref} from 'vue';\r\n\r\nexport const DemoUseEventTableBody = designComponent({\r\n    setup() {\r\n\r\n        const wrapperEl = ref(null as null | HTMLDivElement)\r\n        const table = DemoUseEventTable.use.inject()\r\n\r\n        const handler = {\r\n            scroll: (e: Event, part: DemoUseEventTablePart) => {\r\n                if (part === DemoUseEventTablePart.head) {\r\n                    wrapperEl.value!.scrollLeft = (e.target as HTMLDivElement).scrollLeft\r\n                }\r\n            },\r\n            wrapperScroll: (e: Event) => {\r\n                if (table.state.hoverPart === DemoUseEventTablePart.body) {\r\n                    table.event.emit.scroll(e, DemoUseEventTablePart.body)\r\n                }\r\n            },\r\n            mousewheel: (e: MouseWheelEvent) => {\r\n                if (e.altKey) {\r\n                    wrapperEl.value!.scrollLeft = wrapperEl.value!.scrollLeft + e.deltaY\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                }\r\n            }\r\n        }\r\n\r\n        table.event.on.scroll(handler.scroll)\r\n        onBeforeUnmount(() => table.event.off.scroll(handler.scroll))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"demo-use-event-table-body\"\r\n                     ref={wrapperEl}\r\n                     onScroll={handler.wrapperScroll}\r\n                     {...{onMousewheel: handler.mousewheel}}>\r\n                    <div class=\"demo-use-event-table-body-inner\">\r\n                        table <br/> body\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {defineComponent} from 'vue';\r\n\r\nexport const DemoParent = defineComponent({\r\n    emits: {\r\n        init: () => true,\r\n        destroy: () => true,\r\n        open: () => true,\r\n        close: () => true,\r\n        show: () => true,\r\n        hide: () => true,\r\n\r\n        'update:modelValue': (val: boolean) => true,\r\n        'update:open': (val: boolean) => true,\r\n\r\n        'click-reference': (e: MouseEvent) => true,\r\n        'click-popper': (e: MouseEvent) => true,\r\n        'click-body': (e: MouseEvent) => true,\r\n        'mousedown-popper': (e: MouseEvent) => true,\r\n\r\n        'enter-reference': (e: MouseEvent) => true,\r\n        'leave-reference': (e: MouseEvent) => true,\r\n        'enter-popper': (e: MouseEvent) => true,\r\n        'leave-popper': (e: MouseEvent) => true,\r\n        'reference-focus': (e: FocusEvent) => true,\r\n        'reference-blur': (e: Event) => true,\r\n    },\r\n    setup(props, setupContext) {\r\n        return () => (\r\n            <>\r\n                <span>SPAN</span>\r\n                <button onClick={(e) => {\r\n                    setupContext.emit('click-reference', e)\r\n                    setupContext.emit('click-body', e)\r\n                }}>PARENT BUTTON\r\n                </button>\r\n            </>\r\n        )\r\n    },\r\n})","import { render } from \"./demo-use-event.vue?vue&type=template&id=7935ff92\"\nimport script from \"./demo-use-event.vue?vue&type=script&lang=js\"\nexport * from \"./demo-use-event.vue?vue&type=script&lang=js\"\n\nimport \"./demo-use-event.vue?vue&type=style&index=0&id=7935ff92&lang=scss\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}