{"version":3,"sources":["webpack://CustomApplicationmain-application/./src/utils/PlainDate.ts","webpack://CustomApplicationmain-application/./src/packages/time/servce/time-service.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/refershPopperReference.tsx","webpack://CustomApplicationmain-application/./src/packages/button/button.tsx","webpack://CustomApplicationmain-application/./src/packages/button/index.ts","webpack://CustomApplicationmain-application/./src/use/useStyle.ts","webpack://CustomApplicationmain-application/./src/use/useEdit.ts","webpack://CustomApplicationmain-application/./src/utils/createEventListener.ts","webpack://CustomApplicationmain-application/./src/packages/form/form.validate.tsx","webpack://CustomApplicationmain-application/./src/utils/nextIndex.ts","webpack://CustomApplicationmain-application/./src/use/useModel.ts","webpack://CustomApplicationmain-application/./src/packages/notice-service/notice.tsx","webpack://CustomApplicationmain-application/./src/packages/notice-service/notice-container.tsx","webpack://CustomApplicationmain-application/./src/packages/notice-service/index.ts","webpack://CustomApplicationmain-application/./src/packages/notice-service/notice-manager.tsx","webpack://CustomApplicationmain-application/./src/packages/file-service/file-service.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/edit/createPopperServiceComponent.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/edit/createAgentGetter.tsx","webpack://CustomApplicationmain-application/./src/utils/installPlugin.ts","webpack://CustomApplicationmain-application/./src/packages/icon/icon.tsx","webpack://CustomApplicationmain-application/./src/packages/icon/index.ts","webpack://CustomApplicationmain-application/./src/packages/button-group/button-group.tsx","webpack://CustomApplicationmain-application/./src/utils/getServiceWithoutContext.tsx","webpack://CustomApplicationmain-application/./src/use/useNumber.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/sub/opacity.png","webpack://CustomApplicationmain-application/./src/use/useRefs.ts","webpack://CustomApplicationmain-application/./src/packages/list/list.tsx","webpack://CustomApplicationmain-application/./src/packages/list/index.ts","webpack://CustomApplicationmain-application/./src/use/useFunctionWrapper.ts","webpack://CustomApplicationmain-application/./src/utils/getSlotExists.ts","webpack://CustomApplicationmain-application/./src/packages/root/createDefaultManager.tsx","webpack://CustomApplicationmain-application/./src/use/useEvent.ts","webpack://CustomApplicationmain-application/./src/utils/renderNothing.ts","webpack://CustomApplicationmain-application/./src/use/designComponent.ts","webpack://CustomApplicationmain-application/./src/packages/item/item.tsx","webpack://CustomApplicationmain-application/./src/packages/item/index.ts","webpack://CustomApplicationmain-application/./src/packages/root/root.tsx","webpack://CustomApplicationmain-application/./src/packages/root/index.ts","webpack://CustomApplicationmain-application/./src/utils/constant.ts","webpack://CustomApplicationmain-application/./src/use/useSlots.ts","webpack://CustomApplicationmain-application/./src/utils/createComponentPlugin.ts","webpack://CustomApplicationmain-application/./src/packages/root/createDefaultService.tsx","webpack://CustomApplicationmain-application/./src/packages/form/form.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/form/form.tsx","webpack://CustomApplicationmain-application/./src/utils/createCounter.ts","webpack://CustomApplicationmain-application/./src/packages/loading/loading.tsx","webpack://CustomApplicationmain-application/./src/packages/loading/index.ts","webpack://CustomApplicationmain-application/./src/packages/date/date.utils.tsx","webpack://CustomApplicationmain-application/./src/use/useCollect.ts","webpack://CustomApplicationmain-application/./src/utils/createError.ts","webpack://CustomApplicationmain-application/./src/use/useRefList.ts","webpack://CustomApplicationmain-application/./src/utils/defer.ts","webpack://CustomApplicationmain-application/./src/use/useProps.ts","webpack://CustomApplicationmain-application/./src/plugins/Event.ts","webpack://CustomApplicationmain-application/./src/packages/message/message.tsx","webpack://CustomApplicationmain-application/./src/packages/message/message-container.tsx","webpack://CustomApplicationmain-application/./src/packages/message/index.ts","webpack://CustomApplicationmain-application/./src/packages/message/message-manager.tsx","webpack://CustomApplicationmain-application/./src/use/useStyles.ts","webpack://CustomApplicationmain-application/./src/utils/toArray.ts","webpack://CustomApplicationmain-application/./src/packages/nav/nav-page.tsx","webpack://CustomApplicationmain-application/./src/packages/nav/nav-stack.tsx","webpack://CustomApplicationmain-application/./src/packages/root/registryRootService.ts","webpack://CustomApplicationmain-application/./src/packages/form/form-item.tsx","webpack://CustomApplicationmain-application/./src/packages/icon/icons lazy ^\\.\\/.*\\.json$ namespace object","webpack://CustomApplicationmain-application/./src/packages/click-wave/click-wave-directive.tsx","webpack://CustomApplicationmain-application/./src/use/useScopedSlots.ts","webpack://CustomApplicationmain-application/./src/packages/nav/nav.tsx","webpack://CustomApplicationmain-application/./src/use/useClasses.ts","webpack://CustomApplicationmain-application/./src/packages/keyboard/index.ts","webpack://CustomApplicationmain-application/./src/packages/button-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/input/input.tsx","webpack://CustomApplicationmain-application/./src/packages/input/input-inner-tags.tsx","webpack://CustomApplicationmain-application/./src/packages/input/index.ts","webpack://CustomApplicationmain-application/./src/packages/loading-mask/loading-mask.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-mask/index.tsx","webpack://CustomApplicationmain-application/./src/packages/checkbox-inner/checkbox-inner.tsx","webpack://CustomApplicationmain-application/./src/packages/checkbox-inner/index.ts","webpack://CustomApplicationmain-application/./src/packages/checkbox-group/checkbox-group.tsx","webpack://CustomApplicationmain-application/./src/packages/checkbox/checkbox.tsx","webpack://CustomApplicationmain-application/./src/packages/grid/row.tsx","webpack://CustomApplicationmain-application/./src/packages/checkbox/index.ts","webpack://CustomApplicationmain-application/./src/packages/checkbox-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/grid/col.tsx","webpack://CustomApplicationmain-application/./src/packages/grid/index.ts","webpack://CustomApplicationmain-application/./src/packages/radio-inner/radio-inner.tsx","webpack://CustomApplicationmain-application/./src/packages/radio-inner/index.ts","webpack://CustomApplicationmain-application/./src/packages/radio-group/radio-group.tsx","webpack://CustomApplicationmain-application/./src/packages/radio-group/index.ts","webpack://CustomApplicationmain-application/./src/packages/radio/radio.tsx","webpack://CustomApplicationmain-application/./src/packages/radio/index.ts","webpack://CustomApplicationmain-application/./src/packages/dialog/dialog.tsx","webpack://CustomApplicationmain-application/./src/packages/dialog-service/index.ts","webpack://CustomApplicationmain-application/./src/packages/dialog/index.ts","webpack://CustomApplicationmain-application/./src/packages/dialog-service/dialog-service.tsx","webpack://CustomApplicationmain-application/./src/use/useMounted.ts","webpack://CustomApplicationmain-application/./src/plugins/ResizeDetector.ts","webpack://CustomApplicationmain-application/./src/utils/getElement.ts","webpack://CustomApplicationmain-application/./src/packages/popper/trigger/BaseTrigger.ts","webpack://CustomApplicationmain-application/./src/packages/popper/trigger/PopperTrigger.ts","webpack://CustomApplicationmain-application/./src/packages/popper/popper.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/service/popper-service.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/service/index.tsx","webpack://CustomApplicationmain-application/./src/packages/popper/index.ts","webpack://CustomApplicationmain-application/./src/packages/scroll/vertical-scrollbar.tsx","webpack://CustomApplicationmain-application/./src/packages/scroll/horizontal-scrollbar.tsx","webpack://CustomApplicationmain-application/./src/packages/scroll/scroll.tsx","webpack://CustomApplicationmain-application/./src/packages/scroll/index.ts","webpack://CustomApplicationmain-application/./src/utils/newInstance.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-service/mask/loading-mask-directive.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-service/bar/index.ts","webpack://CustomApplicationmain-application/./src/packages/loading-service/mask/loading-mask-service.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-service/mask/index.ts","webpack://CustomApplicationmain-application/./src/packages/loading-service/bar/loading-bar-service.tsx","webpack://CustomApplicationmain-application/./src/packages/loading-service/index.ts","webpack://CustomApplicationmain-application/./src/packages/number/number.tsx","webpack://CustomApplicationmain-application/./src/packages/number/index.ts","webpack://CustomApplicationmain-application/./src/packages/toggle/toggle.tsx","webpack://CustomApplicationmain-application/./src/packages/toggle/index.ts","webpack://CustomApplicationmain-application/./src/packages/slider/slider.tsx","webpack://CustomApplicationmain-application/./src/packages/slider/index.ts","webpack://CustomApplicationmain-application/./src/packages/tag/tag.tsx","webpack://CustomApplicationmain-application/./src/packages/tag/index.ts","webpack://CustomApplicationmain-application/./src/packages/tag-input/tag-input.tsx","webpack://CustomApplicationmain-application/./src/packages/tag-input/index.ts","webpack://CustomApplicationmain-application/./src/packages/rate/rate.tsx","webpack://CustomApplicationmain-application/./src/packages/rate/index.ts","webpack://CustomApplicationmain-application/./src/packages/virutal-list/useVirtualList.tsx","webpack://CustomApplicationmain-application/./src/packages/virutal-list/virtual-list.tsx","webpack://CustomApplicationmain-application/./src/packages/virutal-list/index.ts","webpack://CustomApplicationmain-application/./src/packages/progress/progress.utils.ts","webpack://CustomApplicationmain-application/./src/packages/progress/progress-bar.tsx","webpack://CustomApplicationmain-application/./src/utils/createAnimate.ts","webpack://CustomApplicationmain-application/./src/packages/progress/progress-circle.tsx","webpack://CustomApplicationmain-application/./src/packages/progress/progress-mini.tsx","webpack://CustomApplicationmain-application/./src/packages/progress/index.ts","webpack://CustomApplicationmain-application/./src/packages/pagination/pagination.tsx","webpack://CustomApplicationmain-application/./src/packages/step/step.utils.ts","webpack://CustomApplicationmain-application/./src/packages/pagination/index.ts","webpack://CustomApplicationmain-application/./src/packages/badge/badge.tsx","webpack://CustomApplicationmain-application/./src/packages/badge/index.ts","webpack://CustomApplicationmain-application/./src/packages/step/step/step.tsx","webpack://CustomApplicationmain-application/./src/packages/step/step/step-group.tsx","webpack://CustomApplicationmain-application/./src/packages/step/arrow-step/arrow-step.tsx","webpack://CustomApplicationmain-application/./src/packages/step/arrow-step/arrow-step-group.tsx","webpack://CustomApplicationmain-application/./src/packages/triangle/triangle.tsx","webpack://CustomApplicationmain-application/./src/packages/triangle/index.ts","webpack://CustomApplicationmain-application/./src/packages/step/index.ts","webpack://CustomApplicationmain-application/./src/packages/dropdown/dropdown.tsx","webpack://CustomApplicationmain-application/./src/packages/dropdown/dropdown-menu.tsx","webpack://CustomApplicationmain-application/./src/packages/dropdown/dropdown-group.tsx","webpack://CustomApplicationmain-application/./src/packages/dropdown/dropdown-option.tsx","webpack://CustomApplicationmain-application/./src/packages/dropdown/index.ts","webpack://CustomApplicationmain-application/./src/packages/tooltip/tooltip.tsx","webpack://CustomApplicationmain-application/./src/packages/tooltip/tooltip-directive.tsx","webpack://CustomApplicationmain-application/./src/packages/tooltip/index.ts","webpack://CustomApplicationmain-application/./src/packages/collapse/collapse-group.tsx","webpack://CustomApplicationmain-application/./src/packages/collapse/collapse.tsx","webpack://CustomApplicationmain-application/./src/packages/collapse/collapse-transition.tsx","webpack://CustomApplicationmain-application/./src/packages/collapse/index.ts","webpack://CustomApplicationmain-application/./src/packages/alert/alert.tsx","webpack://CustomApplicationmain-application/./src/packages/alert/index.ts","webpack://CustomApplicationmain-application/./src/packages/card/card.tsx","webpack://CustomApplicationmain-application/./src/packages/card/index.ts","webpack://CustomApplicationmain-application/./src/packages/carousel/carousel-item.tsx","webpack://CustomApplicationmain-application/./src/packages/carousel/carousel.tsx","webpack://CustomApplicationmain-application/./src/packages/carousel/index.ts","webpack://CustomApplicationmain-application/./src/packages/popper/edit/useEditPopperAgent.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/service/color-picker.service.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/utils/ColorUtils.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/color-picker.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/color-button.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/utils/Color.ts","webpack://CustomApplicationmain-application/./src/packages/color-picker/sub/color-alpha-slider.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/sub/color-hue-slider.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/sub/color-sv-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/color-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/color-picker/index.ts","webpack://CustomApplicationmain-application/./src/packages/cascade/utils/CascadeNode.ts","webpack://CustomApplicationmain-application/./src/utils/createKeyHandler.ts","webpack://CustomApplicationmain-application/./src/utils/createFlagManager.ts","webpack://CustomApplicationmain-application/./src/packages/cascade/utils/CascadMark.ts","webpack://CustomApplicationmain-application/./src/packages/cascade/panel/cascade-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/tree/utils/tree-constant.ts","webpack://CustomApplicationmain-application/./src/packages/cascade/service/cascade-service.tsx","webpack://CustomApplicationmain-application/./src/packages/cascade/cascade.tsx","webpack://CustomApplicationmain-application/./src/packages/cascade/index.ts","webpack://CustomApplicationmain-application/./src/packages/tree/core/useTreeNode.ts","webpack://CustomApplicationmain-application/./src/packages/tree/core/useTree.ts","webpack://CustomApplicationmain-application/./src/packages/tree/utils/props.ts","webpack://CustomApplicationmain-application/./src/packages/tree/utils/tree.utils.ts","webpack://CustomApplicationmain-application/./src/use/useAutoScroll.ts","webpack://CustomApplicationmain-application/./src/utils/getRowEl.ts","webpack://CustomApplicationmain-application/./src/utils/getScrollParent.ts","webpack://CustomApplicationmain-application/./src/packages/tree/core/useTreeDraggier.ts","webpack://CustomApplicationmain-application/./src/packages/tree/tree.tsx","webpack://CustomApplicationmain-application/./src/packages/tree/index.ts","webpack://CustomApplicationmain-application/./src/packages/select/select-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/select/select-group.tsx","webpack://CustomApplicationmain-application/./src/packages/select/select-option.tsx","webpack://CustomApplicationmain-application/./src/packages/select/select-service.tsx","webpack://CustomApplicationmain-application/./src/packages/select/select.tsx","webpack://CustomApplicationmain-application/./src/packages/select/index.ts","webpack://CustomApplicationmain-application/./src/packages/date-time-input/date-time-input.tsx","webpack://CustomApplicationmain-application/./src/packages/date-time-input/useDateTime.ts","webpack://CustomApplicationmain-application/./src/packages/date-time-input/index.ts","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-range-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-panel.utils.ts","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/time/time.tsx","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-base-column.tsx","webpack://CustomApplicationmain-application/./src/packages/time/panel/time-base-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/date/useDate.ts","webpack://CustomApplicationmain-application/./src/packages/time/index.ts","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-base-panel-year.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel.tsx","webpack://CustomApplicationmain-application/./src/packages/date/service/date-service.tsx","webpack://CustomApplicationmain-application/./src/packages/date/date.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-base-panel-month.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-base-panel-date.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-date-range.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel-dates.tsx","webpack://CustomApplicationmain-application/./src/packages/date/panel/date-panel.week.tsx","webpack://CustomApplicationmain-application/./src/packages/date/index.ts","webpack://CustomApplicationmain-application/./src/packages/form/index.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/plc-collector.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/renderColgroup.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/head/useHeadCellResize.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/render.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/head/useColDraggier.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/head/head-cell.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/table.utils.ts","webpack://CustomApplicationmain-application/./src/packages/table/core/head/head.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/body/cell.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/utils/iteratePlcList.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/body/row.tsx","webpack://CustomApplicationmain-application/./src/packages/table/virtual-table.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/body/body.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/plc.utils.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/copyPlcList.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processStateConfigAndProps.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processPlcSort.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processHeadPlcList.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processPlcFixed.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/getPltCellClass.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/process/processPlcClassAndStyle.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/formatPlcList.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/format/usePlcList.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/useBindScroll.ts","webpack://CustomApplicationmain-application/./src/packages/table/core/useTableNode.ts","webpack://CustomApplicationmain-application/./src/packages/table/core/useTableGetScroll.tsx","webpack://CustomApplicationmain-application/./src/packages/table/core/useFixedShadow.ts","webpack://CustomApplicationmain-application/./src/packages/table/table.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/plc.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/plc-group.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/core/designPlc.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/plc-index.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/plc-expand.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/plc-check.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/core/utils.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/core/use-list-draggier.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/core/use-list-draggier.virtual.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/core/index.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/draggier/plc-draggier.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/tree/plc-tree.draggier.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/tree/plc-tree.tsx","webpack://CustomApplicationmain-application/./src/packages/upload/upload.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/standard/index.ts","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-input.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-number.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-date.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-color-picker.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-toggle.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/plc-rate.tsx","webpack://CustomApplicationmain-application/./src/packages/table/plc/edit/index.ts","webpack://CustomApplicationmain-application/./src/packages/table/index.ts","webpack://CustomApplicationmain-application/./src/packages/upload/index.ts","webpack://CustomApplicationmain-application/./src/packages/nav/index.ts","webpack://CustomApplicationmain-application/./src/packages/file-service/index.ts","webpack://CustomApplicationmain-application/./src/index.ts"],"names":["CompareMode","WrapDate","value","displayFormat","valueFormat","dateObject","this","setValue","parse","String","year","isNull","defaultDate","setFullYear","month","date","setMonth","hour","setHours","minute","setMinutes","second","setSeconds","time","setTime","setHour","setMinute","setSecond","pd","setYear","Y","setMonthDate","format","displayString","valueString","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","getTime","Number","dateString","timeString","Date","formatString","today","PlainDate","TimeServiceGetter","name","render","attrs","defaultPopperAttrs","transition","REFRESH_POPPER_REFERENCE","refreshPopperReference","provide","refresh","inject","defaultValue","freshPopperReference","console","log","designComponent","directives","ClickWave","props","mode","type","default","label","Object","width","icon","active","Boolean","noPadding","block","throttleClick","asyncHandler","Function","nativeAttrs","emits","onClick","e","setup","emit","event","useSlots","slots","useProps","NUMBER","PROMISE","propsState","useStyle","status","styleComputed","useEdit","editState","editComputed","buttonGroup","otherComputed","state","handleClick","handleClickInner","stopPropagation","editable","loading","error","val","throttle","trailing","immediate","classes","shape","size","disabled","styles","useStyles","style","unit","createComponentPlugin","StyleMode","StyleShape","StyleSize","StyleStatus","StyleProps","USE_STYLE_PROVIDER","ctx","option","parent","defaultData","assign","fillet","normal","parentData","data","adjust","EDIT_PROVIDER","EditProps","readonly","placeholder","customReadonly","parentEditComputed","_event","onBlur","on","off","onChange","createEventListener","config","FormValidateTrigger","FormValueType","FormValidateUtils","getValueByField","field","formData","transform","indexOf","fields","split","index","len","length","getMaxMessage","max","Array","isArray","getMinMessage","min","getListValue","checkRule","rule","fieldToLabel","message","required","options","pattern","validator","validList","map","f","invalidValues","filter","trim","optionList","find","v","isExist","test","Promise","all","toString","validateResultList","formatFormRules","formComponentRules","formItems","resultRules","forEach","formItem","rules","item","push","formItemRules","r","formComponentRulesList","keys","validateField","trigger","formValidateResultMap","associateFields","matchField","change","validateResult","validate","validateResultMap","reduce","prev","next","validateMessage","fieldToRequired","methods","nextIndex","useModel","getter","emitter","autoWatch","autoEmit","onClose","zIndex","close","handler","onClickCloseIcon","onMouseenter","closeTimer","clearTimeout","onMouseleave","setTimeout","renderHead","title","noClose","renderContent","renderFoot","NoticeServiceDirection","horizontal","vertical","duration","refs","useRefList","padding","utils","i","splice","refer","getNotice","messages","start","id","proxy","containers","end","getContainer","ref","container","formatOption","idCount","getNoticeService","registryRootService","getManager","service","o","fo","then","manager","$$notice","getServiceWithoutContext","install","app","mixin","beforeCreate","defineProperty","get","FileServiceDefaultAccept","image","excel","createFileService","chooseFile","input","getInput","multiple","setAttribute","removeAttribute","accept","defaultInputAccept","dfd","__change","removeEventListener","targetFiles","target","files","file","calcSize","toFixed","resolve","addEventListener","click","promise","chooseImage","readAsDataURL","fr","FileReader","onloadend","result","onerror","reject","upload","uploadConfig","xhr","window","XMLHttpRequest","Window","ActiveXObject","open","action","percent","loaded","total","onProgress","withCredentials","headers","entries","key","setRequestHeader","onError","onload","getError","onSuccess","getResponseBody","FormData","append","filename","send","document","createElement","display","body","appendChild","response","responseText","Error","method","url","JSON","$$file","counter","createCounter","mergeAttrs","LISTENER_MATCH_REG","agent","defaultAttrs","args","apply","createPopperServiceComponent","createDefaultService","isShow","isOpen","renderKey","getService","getRefer","undefined","show","hide","popperAttrs","defaultOption","serviceOption","renderAttrs","defaultRenderAttrs","onClickBody","hideOnClickBody","noContentPadding","reference","popper","createAgentGetter","scope","root","create","ins","popperServiceGetter","createDefaultManager","toggle","destroy","cacheMap","WeakMap","cacheKey","$root","set","installMap","installPlugin","plugins","installedPlugins","plugin","use","registry","icons","prefix","unshift","module","getIconVNode","iconName","registryIcon","reset","Icon","BUTTON_GROUP_PROVIDER","ButtonModeProvider","fill","parentGroup","getIns","mount","serviceGetter","toNumber","replace","useNumber","ret","numberState","exports","useRefs","refName","direction","tag","Component","class","useFunctionWrapper","func","_use","getSlotExist","prevState","slotNames","slotName","managerName","serviceComponent","ServiceComponent","opt","getComponentEmit","emitObject","match","kebabCaseName","kebabCase","updateName","toLowerCase","useEvent","once","onUpdateModelValue","fn","clear","renderNothing","createError","expose","provideRefer","leftOptions","setupContext","duplicateKey","Tag","managers","getManagerInstance","managerComponent","managerInstance","$attrs","attrName","attrComponent","RenderComponent","rootRef","initRoot","CheckboxStatus","DEFAULT_STATUS","primary","STATUS","white","black","success","warn","info","names","makeReactive","exist","vnode","slot","component","exposeComponents","wrapExposeComponents","componentList","values","comp","FormLabelAlign","FormContentAlign","FormValidateMode","Form","disabledFields","readonlyFields","modelValue","validateMode","form","hideRequiredAsterisk","hideValidateMessage","validateOnRulesChange","column","labelWidth","contentWidth","labelAlign","contentAlign","left","centerWhenSingleColumn","colon","columnGutter","inline","onFieldValueChange","newVal","oldVal","items","FormCollector","maxLabelWidth","Math","align","right","content","col","bodyStyles","formValidate","formItemComponentRules","childState","validateMethods","autoLoading","autoAlert","clearValidate","showError","freezeState","oldFormData","validateHandler","onEditChange","onBlurChange","blur","onFieldChange","onFormDataChange","debounce","newFormData","deep","useCollect","child","prefixString","count","el","HTMLElement","innerHTML","delay","outerHTML","DateView","SlideTransitionDirection","DateEmitRangeType","DatePublicProps","range","view","selectDate","datetime","firstWeekDay","defaultTime","defaultStartTime","defaultEndTime","DefaultDateFormatString","week","dates","DatePublicEmits","rangeType","onUpdateStart","onUpdateEnd","onUpdateView","DatePanelWrapper","center","DatePanelItemWrapper","Node","listener","clickable","now","hoverStart","hover","hoverEnd","DateViewSeq","WeekUtils","getLastPdOfWeek","copy","weekDayDuration","day","offsetDay","getWeekNumber","vpd","valueLastWeekPd","setYMD","yearFirstDayLastWeekPd","num","getWeekZhcnString","useCollectInParentInner","indexMap","addItem","sort","from","parentNode","childNodes","nodeName","a","b","removeItem","parentName","provideString","injectDefaultValue","msg","isLog","reactive","defer","FormatPropType","usePropsFormatter","types","formatTypes","FUNCTION","lastIndexOf","usePropsInner","configKeys","formatConfig","configKey","createPlainEvent","getListenMap","events","Map","hasListener","listenName","listenMap","listeners","MessageServiceDirection","closeMessage","getMessage","getMessageService","charAt","$$message","toArray","NavPage","page","isLast","HTMLDivElement","PageComponent","renderEl","unmountHandler","nav","getAppLoader","pageConfig","loader","getPage","mountData","unmount","PROVIDE_NAV_CONSTANT","provideNavPage","stack","$nav","tabMethods","pageMethods","back","redirect","getCurrentPage","useNav","NavStack","provideNav","pages","RootServiceScope","RootController","getRoot","createService","mapKey","invalidate","onEditBlur","staticWidth","hasLabel","isRequired","isBlock","flag","paddingRight","labelStyles","scrollWidth","invalidField","suffix","webpackAsyncContext","req","__webpack_require__","code","ids","t","ClickWaveData","wavingTimer","updateOption","mounted","binding","updated","beforeUnmount","unbind","useScopedSlots","scopedSlots","height","stacks","useClass","KEY","KeyBoardMap","16","17","18","8","9","13","27","32","46","37","38","39","40","189","187","48","49","50","51","52","53","54","55","56","57","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","112","113","114","115","116","117","118","119","120","121","122","123","getKey","keyCode","KeyboardService","listen","unbindListener","cancelActiveElement","activeElement","_onkeydown","currentTarget","ctrlKey","shiftKey","altKey","compositionKeyName","join","preventDefault","handleKeyboard","placeValue","minHeight","maxHeight","textarea","suffixIcon","prefixIcon","clearIcon","clearHandler","autoHeight","isFocus","inputReadonly","throttleEnter","inputInnerTabindex","onFocus","onKeydown","onEnter","onEsc","onClickInput","onClickPrefixIcon","onClickSuffixIcon","onClickClearIcon","HTMLInputElement","hiddenInput","HTMLTextAreaElement","handlerEnter","handleEnterInner","model","enter","clickPrefixIcon","clickSuffixIcon","clickClearIcon","clearValue","publicProps","onInput","esc","focus","resetTextAreaHeight","scrollHeight","hidden","prepend","collapseTags","slice","InputInnerTags","loadingType","background","unlock","fixedPosition","inDirective","isMounted","resetParentPosition","getComputedStyle","position","checkStatus","check","minus","CheckboxGroup","itemWidth","children","CheckboxGroupCollector","activeChildren","innerState","checkboxForAll","allKeys","hasCheck","hasUncheck","uncheck","getCheckStatus","checkbox","exceed","changeValue","add","delete","clickCheckbox","GridAlign","GridJustify","trueValue","falseValue","checkboxGroup","checked","targetWidth","clickEl","Row","justify","gutter","marginLeft","marginRight","Col","span","order","offset","pull","className","xs","sm","md","lg","row","classList","sizeProps","obj","paddingLeft","onClickRadio","group","keydown","space","DialogServiceEditType","minWidth","maxWidth","fullHeight","fullWidth","wrapperPadding","contentPadding","showHead","fullscreen","mask","dialogClass","serviceClass","cancelOnClickMask","showClose","beforeClose","destroyOnClose","confirmButton","cancelButton","closeOnConfirm","closeOnCancel","confirmButtonText","cancelButtonText","confirmOnEnter","cancelOnEsc","disabledCancel","disabledConfirm","onConfirm","onCancel","isLoading","wrapperStyles","alignItems","justifyContent","wrapperClasses","bodyClasses","hasHead","hasFoot","foot","contentStyle","keyboardEventOption","confirm","cancel","clickWrapper","contains","clickClose","Wrapper","head","round","large","OptionKeys","editValue","targetOption","editType","editReadonly","getDialogService","$$dialog","useMounted","callback","detect","oldWidth","oldHeight","runCallback","observer","MutationObserver","observe","childList","subtree","ceil","disconnect","ResizeDetectorDirective","__resizedetextor__","getElement","$el","nodeType","nextElementSibling","getBaseTrigger","triggerName","openModel","hoverOpenDelay","hoverCloseDelay","PopperTriggerType","getHoverTrigger","getClickTrigger","getFocusTrigger","manual","getManualTrigger","openTimer","onEnterReference","leave","onLeaveReference","onEnterPopper","onLeavePopper","onClickReference","oldTabIndex","onReferenceFocus","onReferenceBlur","getAttribute","init","getPopperTrigger","cb","onClickPopper","popperClass","Element","placement","arrow","boundary","sizeEqual","scrollAttrs","onUpdateOpen","onInit","onDestroy","onOpen","onShow","onHide","onMousedownPopper","comment","referenceEl","onTransitionend","referenceVNode","popperClasses","popperStyles","sizeStyles","offsetWidth","offsetHeight","fitHostWidth","onPopperContentTransitionend","bindEvents","unbindEvents","initPopper","arrowSize","shouldUpdate","shouldEmit","refreshReference","setPlacement","popperConfigChangeHandler","isUnmounted","Comment","ReferenceVNode","PopperService","getPopperService","UnmountListener","EVENT_NAME","_","uid","VerticalScrollbar","tooltip","scroll","dragState","top","clientY","scrollTop","contentHeight","hostHeight","targetScrollbarSize","backgroundColor","scrollbarColor","onScroll","onMousedown","isDragging","onMousemove","onMouseup","disabledUserSelect","deltaY","scrollAfterDragEnd","wrapper","enableUserSelect","TooltipDirective","PLAIN_SCROLL_VERTICAL_POSITION","HorizontalScrollbar","clientX","scrollLeft","hostWidth","deltaX","Scroll","resize","refreshState","scrollbarSize","scrollX","scrollY","hideScrollbar","alwaysShowScrollbar","fitContentWidth","fitContentHeight","fitHostHeight","topThreshold","bottomThreshold","autoScrollSpeed","disableListTransition","horizontalScrollbarTooltip","verticalScrollbarTooltip","onVerticalScrollTop","onVerticalScrollBottom","onVerticalScrollCenter","host","verticalPosition","cancelAnimate","wrapperScrollTop","wrapperScrollLeft","emitScroll","_isDragging","hostStyles","contentStyles","overflowX","overflowY","width1","height1","contentResize","width2","height2","hostResize","point","configOrTime","noEmitScroll","done","x","y","cancelAnimationFrame","ny","nx","ky","kx","startTime","run","nowTime","delta","requestAnimationFrame","scrollEnd","autoScrollTop","autoScrollBottom","autoScrollLeft","autoScrollRight","stopAutoScroll","disabledQueueAnimation","windowResize","popperOpen","popperShow","wrapperMousewheel","wrapperScroll","bottom","onMousewheel","newInstance","LoadingBarStatus","Mask","update","directive","loadingMask","inactive","LoadingMaskDirective","getLoadingMaskService","wait","interval","autoLoadingStep","startDelayer","color","process","doneColor","fail","failColor","opacity","startAutoLoading","setInterval","stopAutoLoading","clearInterval","autoProcess","complete","autoStart","getLoadingBarService","bar","NAN","step","stepStrictly","precision","hideButton","inputProps","getValue","isNaN","getEffectiveValue","formatModelValue","formatValue","checkValue","intervalAdd","intervalMinus","up","down","isActive","isChecked","mousedown","mouseup","alignEnd","full","showSteps","tooltipFormatter","dragStart","touching","tempStart","tempEnd","startX","startY","totalLength","transferValueToLength","transferLengthToValue","setStart","setEnd","startPosition","endPosition","progressStyles","startTooltip","endTooltip","steps","stepItemStyles","removeUnit","dragstart","mousemove","durX","durY","temp","dur","stepLength","divisor","beforeAdd","beforeRemove","noInput","isEditing","inputValue","clickWindow","clickEditButton","inputEnter","tagClose","activeIcon","inactiveIcon","totalWidth","elLeft","activeStyles","getBoundingClientRect","half","useVirtualList","current","pageIndex","nodes","pageSize","offsetData","list","startPageIndex","getPageIndex","strutStyles","dynamicSize","getIndex","middle","floor","middleBottom","scrollIndex","resetData","elNodes","node","vid","prevNode","prevHeight","deltaHeight","j","virtual","require","virtualIndex","PROGRESS_DEFAULT_PROPS","outerColor","innerColor","speed","successColor","errorColor","ProgressBar","inlineText","iconColor","outerStyles","borderRadius","innerStyles","createAnimate","initValue","n","k","deltaTime","stop","ProgressCircle","lineSize","startAngle","antiClockwise","animate","radius","pathD","d","p","degrees","PI","sin","cos","pathStroke","circleStroke","pathStyles","ProgressMini","StepStatus","SizesWidth","mini","totalPage","pagerCount","currentPage","layout","pageSizes","prevText","nextText","jumperNumberWidth","onJump","onPrev","onNext","onCurrentChange","onSizeChange","jumperValue","totalPageData","pageInfo","midPagerCount","showPrevMore","showNextMore","pagers","array","startPage","getPagerButtonClass","changeCurrent","sizes","jumper","pager","blank","parts","part","dot","contentClass","showValue","badge","StepUtils","getCurrentIndex","getStepStatus","currentStatus","currentIndex","finish","Step","stepGroup","StepCollector","isTitleAlignBottom","dotIcon","StepGroup","titleAlignBottom","ArrowStep","hideIndex","ArrowStepCollector","isFirst","ArrowStepGroup","DirectionMap","uppercaseFirstLetter","toUpperCase","targetStyles","border","disabledHideOnClickOption","clickDropdownOption","onClickOption","dropdown","clickOption","menu","DropdownMenu","DropdownGroup","DropdownOption","showWidth","theme","HTMLSpanElement","oldOption","deepEqual","Tooltip","DEFAULT_OPTION","unmounted","limit","clickCollapseTitle","valCounter","detail","noArrow","selfVal","isDisabled","onClickTitle","onAfterLeave","beforeEnter","addClass","dataset","oldPaddingTop","paddingTop","oldPaddingBottom","paddingBottom","oldOverflow","overflow","afterEnter","removeClass","beforeLeave","transitionProperty","afterLeave","onBeforeEnter","onAfterEnter","onBeforeLeave","onLeave","CollapseTransition","CollapseGroup","desc","isClosed","onClickClosed","shadow","poster","operator","carousel","CarouselCollector","itemVal","getItemStyles","isAnimating","Carousel","autoplay","disabledOperator","disabledIndicator","indicatorTrigger","card","cardScale","indicator","autoplayTimer","prevActiveIndex","vals","activeVal","activeIndex","sortVals","valArray","abs","shift","pop","sortIndex","activeSortIndex","resetAutoplayTimer","leading","onIndicator","cover","CarouselItem","useEditPopperAgent","focusCounter","inputHandler","ColorPickerServiceGetter","INT_HEX_MAP","10","11","12","14","15","hexOne","high","low","rgb2hex","g","isOnePointZero","parseFloat","isPercentage","bound01","processPercent","parseInt","rgb2hsv","h","s","hsv2rgb","hue","saturation","q","mod","HEX_INT_MAP","A","B","C","D","E","F","parseHexChannel","hex","isEffectiveColorString","ColorPickerType","opacityBg","backgroundImage","ColorFormat","ColorPicker","enableAlpha","button","agentState","scopedSlotsOnClick","emitValue","variable","bg","ColorAlphaSlider","thumbSize","tempTop","shadowStyles","thumbStyles","setTop","offsetY","ColorHueSlider","tempLeft","setLeft","offsetX","ColorSvPanel","onDblclick","tempSaturation","tempValue","updatePosition","isMouseDown","dblclick","red","green","blue","alpha","updateByString","needInitializedEnableAlpha","_value","setRgb","substring","setHex","currentColor","setHsv","rgbColor","getDefaultColor","ColorPanel","onBblclickSvPanel","defaultColor","svChange","updateByHsv","hueChange","alphaChange","updateByAlpha","dblclickSvPanel","inputChange","formatVal","inputBlur","updateByHex","updateByRgb","ColorButton","ColorPickerService","level","parentRef","markRef","ctxState","selfGetter","childrenField","labelField","childrenData","isLeaf","expandKeys","selfExpandKeys","nodeDisabled","filterData","filterText","filterMethod","some","createKeyHandler","keyField","createFlagManager","getActiveKeys","generator","getList","TreeDropType","TreeNodeCheckStatus","CascadePanelProps","hoverDebounce","emptyText","selectBranch","lazy","getChildren","expandNodes","onClickItem","onGetChildren","onUpdateData","cascadeMark","formatData","cascadeData","checkProps","iterateAll","iterateChildren","getChildrenAsync","initLazy","isPassFilter","mouseenterItem","expand","clickItem","isExpand","isLoaded","setChildren","empty","filterList","cascadeList","listIndex","nodeIndex","isEmpty","CascadeServiceGetter","showLast","separator","filterable","showFormat","inputAttrs","cacheData","onServiceChange","sourceKey","onInputChange","ie","CascadePanel","CascadeService","iteratorTreeData","useTreeNode","keyManager","getTreeNodeByDataAdjust","dataModel","showCheckbox","iterate","iterateChildrenFirst","checkStrictly","every","getTreeNodeByData","selfRef","isCheckable","filterNodeMethod","isVisible","nodeMap","iterator","dataEffectTrigger","stopWatchEffect","getReactiveChildrenData","removeSelf","parentChildrenData","previousSibling","self","nextSibling","unshiftChild","treeNodeUtils","treeNodeMethods","currentKey","onUpdateCurrentKey","handleKeyOrNode","keyOrNode","baseMethods","getNode","results","getParents","parents","defaultExpandAll","expandMethods","expandAll","checkNodes","checkKeys","setChildrenData","setCurrent","getCurrent","according","collapse","onExpand","onExpandChange","autoExpandParent","onCollapse","toggleExpand","collapseAll","checkMethods","onCheck","onCheckChange","onUncheck","toggleCheck","checkAll","uncheckAll","getCheckedData","refreshCheckStatus","reverse","onClickExpandIcon","onClickCheckbox","onClickCell","onClickNode","expandOnClickNode","checkOnClickNode","useTree","createProps","createEvent","TreeProps","nodeIcon","nodeHeight","intent","draggable","allowDrag","allowDrop","folderCollapseIcon","folderExpandIcon","leafIcon","basePadding","TreeUtils","getPaddingLeft","getTreeNodeStyles","getTreeNodeClasses","createIndicator","hostEl","indicatorSize","publicStyles","bottomIndicatorTop","rightIndicatorLeft","useAutoScroll","getScroll","showHover","enterStart","enterEnd","hideHover","removeChild","getRowEl","rowClass","rowEl","hasClass","getScrollParent","useTreeDraggier","dragClass","flatList","startNode","moveNode","startScrollTop","moveScrollTop","startClientY","moveClientY","rowHeight","scrollParent","scrollParentRect","dragNodeBaseLeft","dropType","inner","droppable","autoScroll","allowRowDraggable","allowRowDroppable","getIndicatorStyles","targetIndex","external","dragNode","querySelector","pointerEvents","treeNode","exposeMethods","draggier","emptyNode","Panel","multipleMaxLimit","multipleMinLimit","noMatchText","noDataText","showDebug","SelectPanelCollector","showOptions","isSelected","optionProps","newValue","highlightPrev","offsetTop","highlightNext","selectHighlight","Group","SelectGroupCollector","panel","Option","SelectCollector","SelectServiceGetter","Props","Select","onSpace","onUp","onDown","popperHeight","displayValue","strings","placeholderValue","inputBinding","onInputClear","onInputKeydown","multipleTags","onClickItemCloseIcon","SelectOption","SelectGroup","SelectPanel","SelectService","regexp","RegExp","useDateTime","valueInput","startInput","endInput","plInput","clickInput","customInputFocus","customInputBlur","TimeRangePanelType","TimePublicProps","custom","checkDisabled","onMousedownStartPanel","onMousedownEndPanel","onStartChange","endPd","startPd","Hms","onEndChange","publicBinding","disableChangeOnScroll","TimePanelProps","onMousedownBasePanel","onBaseChange","onRangeChange","base","startModel","endModel","serviceHandler","customHandler","valuePd","parseDisplayString","setDisplayValue","TimePanelLayout","liList","resetPosition","zeroize","findOne","UseDateJudgementView","maxmin","maxpd","minpd","Infinity","columnChange","TimeBaseColumn","TimeBasePanel","TimeRangePanel","TimePanel","DATE_PANEL_PROVIDER","getFormatString","useDate","judgementForChild","useModelConfig","jdView","topState","hoverRange","valueRange","tempPd","viewModel","slide","ipd","provideData","setSelectDate","getStatus","DatePanelType","selectYear","prevYearList","nextYearList","onMouseenterItem","mid","DateServiceGetter","customWeekString","valuePds","datesString","isDates","YMDHms","YMD","months","setSelectYear","YM","prevYear","nextYear","monthList","onMouseEnterItem","midPd","onSelectYearChange","Month","onSelectTime","onSelectDateChange","onMouseleaveDateList","weekList","weeks","concat","dateList","currentMonthFirstDate","firstDateTime","isSelectMonth","defaultTimePd","setHms","monthAttrs","onSelectMonthChange","timeAttrs","timePd","tempDefaultTime","showTimePd","prevMonth","nextMonth","changeView","oldSeq","newSeq","DefaultTime","pdStart","pdEnd","pdStartTime","pdEndTime","endSelectDate","valueModel","hoverPd","WeekGetData","isHover","getWeekPdByPlainDate","weekPd","dateAttrs","itemStart","itemStartPd","DateBasePanelYear","DateBasePanelMonth","DateBasePanelDate","DatePanelDateRange","DatePanelDates","DatePanelWeek","DatePanel","FormItem","TablePlcCollector","ProvideString","useParent","parentElement","remove","useChild","renderColgroup","flatPlcList","plc","useHeadCellResize","table","indicatorEl","endX","tableEl","cell","durWidth","setDurWidth","resizeHandler","renderHeadCell","renderBodyCell","getEditable","getBodyCell","edit","renderScope","isSummary","summary","editRow","HoverPart","getHorizontalScrollParent","iteratePlc","plcList","getBroPlcList","broPlcList","itarPlc","getPlcWidth","getIndicatorHeight","plcData","maxLevel","headRowHeight","rowspan","getLowestPlcList","getDragData","broList","broLowestList","allLowestList","broData","useColDraggier","scrollRefer","isDraggable","colDraggable","tdAttrs","autoScroller","startClientX","moveClientX","startScrollLeft","moveScrollLeft","currentRect","scrollRect","dragData","refreshData","dd","indicatorLeft","indicatorHeight","startPlc","endPlc","startIndex","endIndex","fixed","TablePlcAlign","TablePlcFixedType","TableHoverPart","PltHeadCell","PlainTable","tablePlc","headCls","headCellClassFunc","headCellStyleFunc","colspan","TableProps","summaryData","spanMethod","stripe","hideHeader","disabledStickyCompatible","bodyRowHeight","showRows","rowClassFunc","cellClassFunc","cellStyleFunc","PltHead","headPlcListArray","tableStyles","targetTableWidth","bindScroll","scrollRef","cellspacing","cellpadding","plcKeyString","arrayIndex","useCellFormItemValidate","IteratePlcHandleType","PltCell","bodyCls","PltRow","onClickRow","onDblclickRow","plcListHasRenderAfterRow","renderAfterRow","VirtualTable","summaryTableStyles","colgroup","PltBody","onVnodeMounted","onVirtualMounted","flatNodes","summaryNodes","disabledVirtual","PlcGroupProps","autoFixedLeft","autoFixedRight","PlcProps","fit","notFitVirtual","addEditPadding","PlcPublicAttrs","isLastFixedLeft","isFirstFixedRight","copyPlcList","newPlc","deepcopy","iteratePlcList","onPlc","onGroup","handleType","handleTablePlc","configData","configPlc","processStateConfigAndProps","configState","fixedLeft","fixedRight","nothing","getPlcOrder","processPlcSort","tableWidth","insertSort","totalPlcWidth","fitPlc","processHeadPlcList","calculateLevel","calculateSpan","calculateHeadColumns","setFixedFlag","lastFixedLeft","firstFixedRight","setLastFixedLeft","setFirstFixedRight","processPlcFixed","collect","element","prevWidth","prevValue","getPlcFixedStyle","isFixedLeft","getPltCellClass","processPlcClassAndStyle","formatPlcList","usePlcList","collector","useBindScroll","hoverPart","updateLeft","onScrollLeft","useTableNode","getValidate","openEdit","closeEdit","enableEdit","cancelEdit","saveEdit","newRow","useTableGetScroll","useFixedShadow","showFixedLeft","showFixedRight","freeState","fixedShadowClass","Table","onDblclickCell","square","exposeHandler","injectPlainTable","usePlc","formatProps","itemDurWidth","designPlc","standardProps","externalProps","OptionProps","externalRefer","summaryText","totalSpan","toggleOnClickRow","summaryExpand","selected","selectedKeys","isCheck","getSelected","clearAll","availableSelectItems","addSelected","removeSelected","getRowElList","querySelectorAll","dragEl","dragHeight","dragOffsetTop","dragStartScrollTop","dragScrollTop","rowList","movedown","refreshDragElPosition","parentScroll","dragElHeight","startDragIndex","endDragIndex","startDragOffsetTop","startDragHeight","startScrollTopOfScrollParent","scrollTopOfScrollParent","scrollParentBoundingRect","usePlcTreeDraggier","flatDataList","levelPadding","UploadStatus","rowDraggable","maxShowLevel","getExpanderAttrs","unmountListener","tableProps","components","PlcStandard","c","PlcEdit","Plc","PlcGroup","nextFileId","autoUpload","removeConfirm","beforeUpload","handleRemove","handleUpload","handlePreview","updateModelValue","singleModel","multipleModel","renderIcon","ready","uploading","singleEmptyFile","getItemClass","onSelectFile","selectFiles","addFiles","dropHandler","onDragover","onDragLeave","onDrop","dataTransfer","extension","baseType","acceptedType","removeFile","uploadFile","uploadFiles","renderItem","singleRender","multipleRender","globalProperties"],"mappings":"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ACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,2BAA4B,CAC3B,OACA,kBAED,gCAAiC,CAChC,OACA,kBAED,iCAAkC,CACjC,QACA,kBAED,iCAAkC,CACjC,OACA,kBAED,kCAAmC,CAClC,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,qCAAsC,CACrC,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,oCAAqC,CACpC,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,gCAAiC,CAChC,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,+BAAgC,CAC/B,QACA,kBAED,sBAAuB,CACtB,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,kCAAmC,CAClC,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,8BAA+B,CAC9B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,gCAAiC,CAChC,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sCAAuC,CACtC,OACA,kBAED,kCAAmC,CAClC,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,4BAA6B,CAC5B,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,2BAA4B,CAC3B,OACA,kBAED,iCAAkC,CACjC,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,sBAAuB,CACtB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,gCAAiC,CAChC,QACA,kBAED,wBAAyB,CACxB,OACA,kBAED,uBAAwB,CACvB,OACA,kBAED,2BAA4B,CAC3B,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,+BAAgC,CAC/B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,6BAA8B,CAC7B,OACA,kBAED,wBAAyB,CACxB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,yBAA0B,CACzB,OACA,kBAED,0BAA2B,CAC1B,OACA,kBAED,wBAAyB,CACxB,O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HskB,IAAK,CAACpkB,KAAMG,OAAsCwG,UAAU,GAC5D8gB,OAAQ,CAACxnB,QAAS,SAClBG,MAAO,CAACH,QAAS,UAErBgB,MAR2B,YAQd,IAANnB,EAAM,EAANA,MACH,MAAO,CACH2L,MAAO,CACH3L,SAEJhB,OAAQ,WACJ,OACI,4BAAW,SAAX,MAA2B,CAACsB,MAAON,EAAMM,MAAOqnB,OAAQ3nB,EAAM2nB,SAA9D,CACK3nB,EAAMskB,IAAIliB,MAAMwlB,OACZ1gB,KAAI,SAAA6d,GAAK,OAAK,6BAAiBA,EAAjB,IAA6BA,EAAMhZ,IAAnC,iB,kCCvB3C,kDAKM,SAAU8b,EAAwC3P,GACpD,OAAO,eAASA,K,sICJR4P,E,4DCEG,SAAAvkB,EAAA,MAAsB,OAAa,CAACqR,QAAS,CAAC,U,6ODF7D,SAAYkT,GACR,mBACA,iBACA,eACA,2BACA,eACA,mBACA,eACA,mBACA,eACA,iBACA,aACA,mBACA,iBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,eACA,eACA,gBA/DJ,CAAYA,MAAG,KAkER,IAAMC,EAAc,CACvBC,GAAI,QACJC,GAAI,OACJC,GAAI,MAEJC,EAAG,YACHC,EAAG,MACHC,GAAI,QACJC,GAAI,MACJC,GAAI,QACJC,GAAI,MAEJC,GAAI,OACJC,GAAI,KACJC,GAAI,QACJC,GAAI,OAEJC,IAAK,QACLC,IAAK,QAELC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QAEJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC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","file":"js/chunk-common.d3e48c32.js","sourcesContent":["import fecha from 'fecha'\r\nimport {zeroize} from \"plain-utils/string/zeroize\";\r\n\r\nenum CompareMode {\r\n    time = 'time',\r\n    date = 'date',\r\n    datetime = 'datetime',\r\n    yearmonth = 'yearmonth',\r\n}\r\n\r\ntype Pub = {\r\n    displayFormat: string\r\n    valueFormat: string\r\n\r\n    setValue(value: string | undefined): void,\r\n    setDisplayValue(value: string): void,\r\n    setYear(year: number): void,\r\n    setMonthDate(month: number, date: number): void,\r\n    setHour(hour: number): void,\r\n    setMinute(minute: number): void,\r\n    setSecond(second: number): void,\r\n    setTime(time: number): void,\r\n    setHms(hour: number | PlainDateType, minute?: number, second?: number): void,\r\n    setYMD(year: number | PlainDateType, month?: number, date?: number): void,\r\n\r\n    format(dateObject: Date | null): string | null,\r\n    parseDisplayString(displayString: string | null): Date | null,\r\n    parseValueString(valueString: string | null): Date | null,\r\n    copy(): PlainDateType,\r\n}\r\n\r\ntype Diff =\r\n    {\r\n        dateObject: Date\r\n        isNull: false\r\n        year: number\r\n        month: number\r\n        date: number\r\n        hour: number\r\n        minute: number\r\n        second: number\r\n        day: number\r\n        time: number\r\n        displayString: string\r\n        valueString: string\r\n        timeString: string\r\n        dateString: string\r\n        Y: number\r\n        YM: number\r\n        YMD: number\r\n        YMDHms: number\r\n        Hms: number\r\n    } |\r\n    {\r\n        dateObject: null\r\n        isNull: true\r\n        year: null\r\n        month: null\r\n        date: null\r\n        hour: null\r\n        minute: null\r\n        second: null\r\n        day: null\r\n        time: null\r\n        displayString: null\r\n        valueString: null\r\n        timeString: null\r\n        dateString: null\r\n        Y: null\r\n        YM: null\r\n        YMD: null\r\n        YMDHms: null\r\n        Hms: null\r\n    };\r\n\r\nexport type PlainDateType = Diff & Pub\r\n\r\nclass WrapDate {\r\n\r\n    displayFormat: string                                                       // 显示值格式字符串\r\n    valueFormat: string                                                         // 实际值格式字符串\r\n    dateObject: Date | null = null                                              // 日期对象\r\n\r\n    constructor(value: string | undefined | null, displayFormat: string, valueFormat: string) {\r\n        this.displayFormat = displayFormat\r\n        this.valueFormat = valueFormat\r\n\r\n        if (value != null) {\r\n            this.setValue(value)\r\n        }\r\n    }\r\n\r\n    /*---------------------------------------attrs-------------------------------------------*/\r\n\r\n    get isNull(): boolean {return !this.dateObject}\r\n\r\n    get year() {return this.isNull ? null : this.dateObject!.getFullYear()}\r\n\r\n    get month() {return this.isNull ? null : this.dateObject!.getMonth()}\r\n\r\n    get date() {return this.isNull ? null : this.dateObject!.getDate()}\r\n\r\n    get hour() {return this.isNull ? null : this.dateObject!.getHours()}\r\n\r\n    get minute() {return this.isNull ? null : this.dateObject!.getMinutes()}\r\n\r\n    get second() {return this.isNull ? null : this.dateObject!.getSeconds()}\r\n\r\n    get day() {return this.isNull ? null : this.dateObject!.getDay()}\r\n\r\n    get time() {return this.isNull ? null : this.dateObject!.getTime()}\r\n\r\n    get displayString() {return this.isNull ? null : fecha.format(this.dateObject!, this.displayFormat)}\r\n\r\n    get valueString() {return this.isNull ? null : fecha.format(this.dateObject!, this.valueFormat)}\r\n\r\n    get timeString() {return this.isNull ? null : `${zeroize(this.hour!)}${zeroize(this.minute!)}${zeroize(this.second!)}`}\r\n\r\n    get dateString() {return this.isNull ? null : `${zeroize(this.year!)}${zeroize(this.month! + 1)}${zeroize(this.date!)}`}\r\n\r\n    get Y() {return this.isNull ? null : this.year}\r\n\r\n    get YM() {return this.isNull ? null : Number(`${this.year}${zeroize(this.month! + 1)}`)}\r\n\r\n    get YMD() {return this.isNull ? null : Number(this.dateString)}\r\n\r\n    get YMDHms() {return this.isNull ? null : Number(this.dateString! + this.timeString!)}\r\n\r\n    get Hms() {return this.isNull ? null : Number(this.timeString)}\r\n\r\n    /*---------------------------------------methods-------------------------------------------*/\r\n\r\n    setValue(value: string | undefined) {this.dateObject = !value ? null : WrapDate.parse(String(value), this.valueFormat)}\r\n\r\n    setDisplayValue(value: string) {this.dateObject = !value ? null : this.dateObject = WrapDate.parse(String(value), this.displayFormat)}\r\n\r\n    setYear(year: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setFullYear(year)\r\n    }\r\n\r\n    setMonthDate(month: number, date: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setMonth(month, date)\r\n    }\r\n\r\n    setHour(hour: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setHours(hour)\r\n    }\r\n\r\n    setMinute(minute: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setMinutes(minute)\r\n    }\r\n\r\n    setSecond(second: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setSeconds(second)\r\n    }\r\n\r\n    setTime(time: number): void {\r\n        if (this.isNull) this.dateObject = WrapDate.defaultDate()\r\n        this.dateObject!.setTime(time)\r\n    }\r\n\r\n    setHms(hour: number | WrapDate, minute?: number, second?: number): void {\r\n        if (typeof hour === \"number\") {\r\n            this.setHour(hour)\r\n            if (minute != null) this.setMinute(minute)\r\n            if (second != null) this.setSecond(second)\r\n        } else {\r\n            const pd = hour as WrapDate\r\n            this.setHour(pd.hour!)\r\n            this.setMinute(pd.minute!)\r\n            this.setSecond(pd.second!)\r\n        }\r\n    }\r\n\r\n    setYMD(year: number | WrapDate, month?: number, date?: number) {\r\n        if (typeof year == \"object\") {\r\n            this.setYear(year.Y!)\r\n            this.setMonthDate(year.month!, year.date!)\r\n        } else {\r\n            this.setYear(year)\r\n            if (month != null && date != null) this.setMonthDate(month, date)\r\n        }\r\n    }\r\n\r\n    format(dateObject: Date | null): string | null {\r\n        if (!dateObject) return null\r\n        return WrapDate.format(dateObject, this.displayFormat)\r\n    }\r\n\r\n    parseDisplayString(displayString: string | null): Date | null {\r\n        if (!displayString) return null\r\n        return WrapDate.parse(displayString, this.displayFormat)\r\n    }\r\n\r\n    parseValueString(valueString: string | null): Date | null {\r\n        if (!valueString) return null\r\n        return WrapDate.parse(valueString, this.valueFormat)\r\n    }\r\n\r\n    copy(): WrapDate {\r\n        return new WrapDate(this.valueString, this.displayFormat, this.valueFormat)\r\n    }\r\n\r\n    /*---------------------------------------static-------------------------------------------*/\r\n\r\n    static defaultDate(): Date {\r\n        const date = new Date()\r\n        date.setMonth(0, 1)\r\n        date.setHours(0, 0, 0)\r\n        return date\r\n    }\r\n\r\n    static format(dateObject: Date, formatString: string) {\r\n        if (!dateObject) return null\r\n        return fecha.format(dateObject, formatString)\r\n    }\r\n\r\n    static parse(dateString: string, formatString: string) {\r\n        if (!dateString) return null\r\n        return fecha.parse(dateString, formatString)\r\n    }\r\n\r\n    static today(displayFormat: string, valueFormat: string): PlainDateType {\r\n        let today = new WrapDate(null, displayFormat, valueFormat)\r\n        today.setTime(new Date().getTime())\r\n        return today as PlainDateType\r\n    }\r\n\r\n    static CompareMode = CompareMode\r\n}\r\n\r\nexport const PlainDate = WrapDate as any as (new(...args: ConstructorParameters<typeof WrapDate>) => PlainDateType) & {\r\n    defaultDate(): Date,\r\n    format(dateObject: Date, formatString: string): string,\r\n    parse(dateString: string, formatString: string): Date | null,\r\n    today(displayFormat: string, valueFormat: string): PlainDateType,\r\n    CompareMode: typeof CompareMode,\r\n}\r\n","import {createAgentGetter} from \"../../popper/edit/createAgentGetter\";\r\n\r\nexport const TimeServiceGetter = createAgentGetter({\r\n    name: 'time',\r\n    render: (attrs) => <pl-time-panel {...attrs}/>,\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n    },\r\n})","import {provide, inject} from 'vue'\r\nimport {SimpleFunction} from \"../../shims\";\r\n\r\nconst REFRESH_POPPER_REFERENCE = '@@REFRESH_POPPER_REFERENCE'\r\n\r\n/**\r\n * 因为 Popper 是无根节点，所以比较难检测到reference节点变化的情况。为了优化这一块的内容\r\n * 有两种方式，一种是在使用Popper组件的时候，reference包裹一层不变的节点，缺点是会破坏无根\r\n * 节点的结构。另一种是，提供一个 refreshPopperReference 函数，子组件可以注入这个函数，当子组件\r\n * 知道自己的reference节点变化之后调用这个函数通知Popper重新reference。\r\n *\r\n * @author  韦胜健\r\n * @date    2020/11/19 11:00\r\n */\r\nexport const refreshPopperReference = {\r\n    provide: (refresh: () => void) => {\r\n        provide(REFRESH_POPPER_REFERENCE, refresh)\r\n    },\r\n    inject: (defaultValue = null) => {\r\n        const refresh = inject(REFRESH_POPPER_REFERENCE, defaultValue) as null | SimpleFunction\r\n        return {\r\n            freshPopperReference: () => !!refresh && refresh()\r\n        }\r\n    },\r\n}","import {computed, PropType, reactive, watch} from \"vue\";\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport './button.scss'\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {ButtonModeProvider} from \"../button-group/button-group\";\r\nimport {SimpleFunction} from \"../../shims\";\r\nimport {throttle} from 'plain-utils/utils/throttle'\r\nimport {unit} from 'plain-utils/string/unit'\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport Icon from '../icon'\r\nimport Loading from '../loading'\r\n\r\nconsole.log('load button component')\r\n\r\nexport default designComponent({\r\n    name: 'pl-button',\r\n    directives: {ClickWave},\r\n    props: {\r\n        mode: {type: String, default: 'fill'},                  // fill,stroke,text\r\n        label: {type: [String, Object]},                        // 按钮文本\r\n        width: {type: [String, Number]},                        // 按钮宽度\r\n        icon: {type: String},                                   // 按钮图标\r\n        active: {type: Boolean},                                // 按钮是否高亮\r\n        noPadding: {type: Boolean},                             // 按钮是否无边距\r\n        block: {type: Boolean},                                 // 块级元素\r\n        throttleClick: {type: [Boolean, Number]},               // click节流\r\n        asyncHandler: {type: Function as PropType<(e: MouseEvent) => void>},    // 异步处理函数，会自动开启关闭loading状态\r\n\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        /*native*/\r\n        type: {type: String, default: 'button'},\r\n        nativeAttrs: {type: Object},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n        const {propsState} = useProps(props, {\r\n            width: useProps.NUMBER,\r\n            label: useProps.PROMISE,\r\n        })\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        const {editState, editComputed} = useEdit()\r\n        const buttonGroup = ButtonModeProvider.inject()\r\n        const otherComputed = computed(() => ({\r\n            mode: !!buttonGroup ? buttonGroup.value.mode : props.mode\r\n        }))\r\n        const state = reactive({\r\n            handleClick: null as SimpleFunction | null,\r\n            handleClickInner: async (e: MouseEvent) => {\r\n                e.stopPropagation()\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                if (!props.asyncHandler) {\r\n                    return emit.onClick(e)\r\n                }\r\n                editState.loading = true\r\n                try {\r\n                    await props.asyncHandler(e)\r\n                } catch (e) {\r\n                    console.error(e)\r\n                } finally {\r\n                    editState.loading = null\r\n                }\r\n            },\r\n        })\r\n\r\n        watch(\r\n            () => props.throttleClick,\r\n            (val) => {\r\n                if (!val) {\r\n                    return state.handleClick = state.handleClickInner\r\n                }\r\n                if (val === true) {\r\n                    val = 1000\r\n                }\r\n                state.handleClick = throttle(state.handleClickInner, val, {trailing: false})\r\n            },\r\n            {immediate: true}\r\n        )\r\n\r\n        const classes = computed(() => ([\r\n            'pl-button',\r\n            'plain-click-node',\r\n\r\n            `pl-button-mode-${otherComputed.value.mode}`,\r\n            `pl-button-status-${styleComputed.value.status}`,\r\n            `pl-button-shape-${styleComputed.value.shape}`,\r\n            `pl-button-size-${styleComputed.value.size}`,\r\n\r\n            {\r\n                'pl-button-icon': !!props.icon,\r\n                'pl-button-active': !!props.active,\r\n                'pl-button-noPadding': !!props.noPadding,\r\n\r\n                'pl-button-loading': !!editComputed.value.loading,\r\n                'pl-button-has-icon': !!props.icon,\r\n                'pl-button-block': !!props.block,\r\n                'pl-button-disabled': !!editComputed.value.disabled,\r\n                'pl-button-icon-only': !!props.icon && !propsState.label,\r\n            },\r\n        ]))\r\n\r\n        const styles = useStyles(style => {\r\n            style.width = unit(propsState.width)\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <button\r\n                        style={styles.value}\r\n                        class={classes.value}\r\n                        type={props.type as any}\r\n                        disabled={editComputed.value.disabled!}\r\n                        v-click-wave={\"large\"}\r\n                        {...{\r\n                            ...(props.nativeAttrs || {}),\r\n                            onClick: state.handleClick!,\r\n                        }}\r\n                    >\r\n                        {!!editComputed.value.loading && <Loading type=\"gamma\"/>}\r\n                        {\r\n                            slots.default(<>\r\n                                {(!!props.icon && !editComputed.value.loading) ? <Icon icon={props.icon}/> : null}\r\n                                {propsState.label ? <span>{propsState.label}</span> : null}\r\n                            </>)\r\n                        }\r\n                    </button>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import Button from './button'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Button)","import {useFunctionWrapper} from \"./useFunctionWrapper\";\r\nimport {computed, inject, PropType, provide} from 'vue';\r\n\r\nexport enum StyleMode {\r\n    fill = 'fill',\r\n    stroke = 'stroke',\r\n    text = 'text',\r\n}\r\n\r\nexport enum StyleShape {\r\n    fillet = 'fillet',\r\n    round = 'round',\r\n    square = 'square',\r\n}\r\n\r\nexport enum StyleSize {\r\n    normal = 'normal',\r\n    large = 'large',\r\n    mini = 'mini',\r\n}\r\n\r\nexport enum StyleStatus {\r\n    primary = 'primary',\r\n    success = 'success',\r\n    error = 'error',\r\n    warn = 'warn',\r\n    info = 'info',\r\n}\r\n\r\nexport const StyleProps = {\r\n    shape: {type: String as PropType<StyleShape>},                      // fillet,round,square\r\n    size: {type: String as PropType<StyleSize>},                       // normal,large,mini\r\n    status: {type: String as PropType<StyleStatus>},                     // primary,success,error,warn,info\r\n}\r\n\r\ninterface UseStyleProvideData {\r\n    shape: StyleShape,\r\n    size: StyleSize,\r\n    status?: StyleStatus,\r\n}\r\n\r\ninterface UseStyleOption {\r\n    shape?: StyleShape,\r\n    size?: StyleSize,\r\n    status?: StyleStatus,\r\n    adjust?: (data: UseStyleProvideData) => void | UseStyleProvideData\r\n}\r\n\r\nconst USE_STYLE_PROVIDER = '@@USE_STYLE_PROVIDER'\r\n\r\nexport const useStyle = useFunctionWrapper('style', (ctx, option: UseStyleOption = {}): { styleComputed: { value: UseStyleProvideData } } => {\r\n\r\n    const parent = inject(USE_STYLE_PROVIDER, null) as null | { value: UseStyleProvideData }\r\n    const defaultData = Object.assign({shape: StyleShape.fillet, size: StyleSize.normal}, option)\r\n\r\n    const styleComputed = computed(() => {\r\n        const {shape, size, status} = ctx.props\r\n        const parentData = !!parent ? parent.value : {} as any\r\n        let data: UseStyleProvideData = {\r\n            shape: shape || parentData.shape || defaultData.shape,\r\n            size: size || parentData.size || defaultData.size,\r\n            status: status || parentData.status || defaultData.status,\r\n        }\r\n        if (!!defaultData.adjust) {\r\n            data = defaultData.adjust(data) || data\r\n        }\r\n        (data as any).ctx = ctx;\r\n        (data as any).parent = parent\r\n        return data\r\n    })\r\n\r\n    provide(USE_STYLE_PROVIDER, styleComputed)\r\n\r\n    return {styleComputed}\r\n})","import {useFunctionWrapper} from \"./useFunctionWrapper\";\r\nimport {computed, inject, onBeforeUnmount, provide, reactive} from 'vue';\r\nimport {ComponentEvent} from \"./useEvent\";\r\n\r\nexport const EDIT_PROVIDER = '@@EDIT_PROVIDER'\r\n\r\nexport const EditProps = {\r\n    disabled: {type: Boolean, default: null},\r\n    readonly: {type: Boolean, default: null},\r\n    loading: {type: Boolean, default: null},\r\n    placeholder: {type: String, default: null},\r\n    customReadonly: {type: Boolean, default: null},\r\n}\r\n\r\ninterface EditProvideData {\r\n    disabled: boolean | null,\r\n    readonly: boolean | null,\r\n    loading: boolean | null,\r\n    placeholder: string | null,\r\n\r\n    onBlur?: (...args: any[]) => void,\r\n    onChange?: (...args: any[]) => void,\r\n}\r\n\r\nexport const useEdit = useFunctionWrapper(\r\n    'edit',\r\n    (ctx, option: { adjust?: (data: EditProvideData) => void | EditProvideData } = {}) => {\r\n\r\n        const parentEditComputed = inject(EDIT_PROVIDER, null) as null | { value: EditProvideData }\r\n\r\n        const editState = reactive({loading: null as null | boolean})\r\n\r\n        const editComputed = computed(() => {\r\n            const {\r\n                disabled,\r\n                readonly,\r\n                loading,\r\n                placeholder\r\n            } = ctx.props as any as EditProvideData\r\n\r\n            let data = {disabled, readonly, loading, placeholder}\r\n\r\n            if (data.disabled == null) data.disabled = !!parentEditComputed ? parentEditComputed.value.disabled : false\r\n            if (data.readonly == null) data.readonly = !!parentEditComputed ? parentEditComputed.value.readonly : false\r\n            if (data.placeholder == null) data.placeholder = !!parentEditComputed ? parentEditComputed.value.placeholder : null\r\n            if (editState.loading == null) {\r\n                data.loading = data.loading != null ? data.loading : (!!parentEditComputed ? parentEditComputed.value.loading : false)\r\n            } else {\r\n                data.loading = editState.loading\r\n            }\r\n\r\n            if (!!option.adjust) data = option.adjust(data) || data\r\n\r\n            return {\r\n                ...data,\r\n                editable: !data.disabled && !data.readonly && !data.loading\r\n            }\r\n        });\r\n\r\n        provide(EDIT_PROVIDER, editComputed)\r\n\r\n        const event = (ctx as any)._event as ComponentEvent<any> | undefined\r\n\r\n        if (!!parentEditComputed) {\r\n            if (!!parentEditComputed.value.onBlur && !!event && !!event.on.onBlur) {\r\n                event.on.onBlur(parentEditComputed.value.onBlur)\r\n                onBeforeUnmount(() => event.off.onBlur(parentEditComputed.value.onBlur!))\r\n            }\r\n            if (!!parentEditComputed.value.onChange && !!event && !!event.on.onChange) {\r\n                event.on.onChange(parentEditComputed.value.onChange)\r\n                onBeforeUnmount(() => event.off.onChange(parentEditComputed.value.onChange!))\r\n            }\r\n        }\r\n\r\n        return {\r\n            editState,\r\n            editComputed,\r\n        }\r\n    })","import {Events} from 'vue'\r\n\r\n/**\r\n * 方便创建监听原生事件的监听函数\r\n * @author  韦胜健\r\n * @date    2020/12/14 17:47\r\n */\r\nexport function createEventListener<Config extends Partial<{ [k in keyof Events]: (e: Events[k]) => void }>>(config: Config): Config {\r\n    return config\r\n}","/**\r\n * 校验触发动作类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 15:41\r\n */\r\n\r\n/**\r\n * 校验触发器类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 22:02\r\n */\r\nimport {toArray} from \"../../utils/toArray\";\r\n\r\nexport enum FormValidateTrigger {\r\n    change = 'change',\r\n    blur = 'blur',\r\n    all = 'all',\r\n}\r\n\r\n/**\r\n * 校验的值类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 22:02\r\n */\r\nexport enum FormValueType {\r\n    string = 'string',\r\n    number = 'number',\r\n    boolean = 'boolean',\r\n    array = 'array',\r\n}\r\n\r\n/**\r\n * form以及formItem的rules属性类型\r\n * @author  韦胜健\r\n * @date    2020/7/18 12:39\r\n */\r\nexport interface FormRule {\r\n\r\n    field?: string | string[]                                                               // 绑定的字段\r\n    label?: string                                                                          // form item 的文本\r\n    options?: any | any[]                                                                   // 选项值校验\r\n\r\n    max?: number,                                                                           // 最大长度（字符串），最大值（数字），最大长度（数组）\r\n    min?: number,                                                                           // 最小长度（字符串），最小值（数字），最小长度（数组）\r\n    message?: string,                                                                       // 检验事变提示信息\r\n    pattern?: RegExp,                                                                       // 校验的正则表达式\r\n    required?: boolean,                                                                     // 是否必填\r\n    transform?: (val?: any) => any,                                                         // 将字段值转换成目标值之后校验\r\n    type?: FormValueType,                                                                   // 数据的类型\r\n    trigger?: FormValidateTrigger,                                                          // 触发器\r\n    validator?: (rule: FormRule, value: any, formData: object) => void | string | Promise<void | string>,// 自定义校验器\r\n\r\n}\r\n\r\n/**\r\n * pl-form组件 rules 属性对象类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 15:59\r\n */\r\nexport type FormComponentRules = FormRule[] | ({ [field: string]: FormRule | FormRule[] })\r\n\r\n/**\r\n * 关联校验字段\r\n * @author  韦胜健\r\n * @date    2020/12/28 12:07\r\n */\r\nexport type FormAssociateFields = Record<string, string | string[]>\r\n\r\n/**\r\n * pl-form-item 组件rules属性对象类型\r\n * @author  韦胜健\r\n * @date    2020/12/12 15:59\r\n */\r\nexport interface FormComponentItemRules {\r\n    label?: string,\r\n    field?: string | string[]\r\n    required?: boolean,\r\n    rules?: FormRule | FormRule[]\r\n}\r\n\r\n/**\r\n * 校验单个字段的结果\r\n * @author  韦胜健\r\n * @date    2020/12/12 22:24\r\n */\r\nexport interface FormValidateResult {\r\n    label?: string,\r\n    message: string,\r\n    rule: FormRule,\r\n    value: any,\r\n}\r\n\r\n/**\r\n * 校验结果\r\n * @author  韦胜健\r\n * @date    2020/12/12 22:24\r\n */\r\nexport interface FormValidateResultMap {[k: string]: FormValidateResult | undefined}\r\n\r\n/**\r\n * 表单校验工具对象\r\n * @author  韦胜健\r\n * @date    2020/12/13 14:53\r\n */\r\nexport const FormValidateUtils = {\r\n    getValueByField(field: string, formData: Record<string, any> | undefined | null, transform?: (val: any) => any) {\r\n        if (!formData) {\r\n            return null\r\n        }\r\n        let val: any;\r\n        if (field.indexOf('.') === -1) {\r\n            val = formData[field]\r\n        } else {\r\n            const fields = field.split('.')\r\n            let index = 0, len = fields.length\r\n            let value = formData[fields[index]]\r\n\r\n            while (index < len - 1 && value != null) {\r\n                value = value[fields[++index]]\r\n            }\r\n            val = index == len - 1 ? value : null\r\n        }\r\n        return !transform ? val : transform(val)\r\n    },\r\n    /**\r\n     * 获取max校验失败信息\r\n     * @author  韦胜健\r\n     * @date    2020/12/13 14:54\r\n     */\r\n    getMaxMessage({value, max, type,}: { value: any, max: number, type?: FormValueType, }) {\r\n        if (Array.isArray(value)) {\r\n            return `最多选择 ${max} 个选项`\r\n        }\r\n        if (type == \"number\") {\r\n            return `最大值 ${max}`\r\n        }\r\n        return `最大文本长度 ${max} 个字符`\r\n    },\r\n    /**\r\n     * 获取min校验失败信息\r\n     * @author  韦胜健\r\n     * @date    2020/12/13 14:54\r\n     */\r\n    getMinMessage({value, min, type,}: { value: any, min: number, type?: FormValueType, }) {\r\n        if (Array.isArray(value)) {\r\n            return `最少选择 ${min} 个选项`\r\n        }\r\n        if (type == \"number\") {\r\n            return `最小值 ${min}`\r\n        }\r\n        return `最小文本长度 ${min} 个字符`\r\n    },\r\n    /**\r\n     * 获取有效值列表。如果值不存在则返回null\r\n     * @author  韦胜健\r\n     * @date    2020/12/13 14:55\r\n     */\r\n    getListValue<T>(val: T | T[] | null | undefined): T[] | null {\r\n        if (!val) {\r\n            return null\r\n        }\r\n        return Array.isArray(val) ? val : [val]\r\n    },\r\n    /**\r\n     * 执行校验规则，如果函数参数中有field，则只校验一个字段,否则校验rule中所有的字段\r\n     * @author  韦胜健\r\n     * @date    2020/12/13 14:56\r\n     * @param   rule                要校验的FormRule\r\n     * @param   formData            表单数据对象\r\n     * @param   fieldToLabel        字段映射label的对象\r\n     * @param   field               校验的字段\r\n     */\r\n    async checkRule({rule, formData, fieldToLabel, field}: { formData: Record<string, any> | null, rule: FormRule, fieldToLabel: Record<string, string>, field?: string }): Promise<null | FormValidateResult> {\r\n        const {\r\n            transform, type,\r\n            label, message,\r\n            required, options, max, min, pattern, validator\r\n        } = rule\r\n\r\n        let validList: { field: string, value: any }[] | null = null;\r\n\r\n        /*如果函数参数中有field，则只校验一个字段,否则校验rule中所有的字段*/\r\n        if (!!field) {\r\n            /*校验一个字段*/\r\n            validList = [{field, value: FormValidateUtils.getValueByField(field, formData, transform)}]\r\n        } else {\r\n            /*校验rule中所有的字段*/\r\n            const fields = FormValidateUtils.getListValue(rule.field)\r\n            if (!!fields) {\r\n                validList = fields.map(f => ({field: f, value: FormValidateUtils.getValueByField(f, formData, transform)}))\r\n            }\r\n        }\r\n        if (!validList || validList.length === 0) {\r\n            return null\r\n        }\r\n\r\n        /*---------------------------------------required 必填校验-------------------------------------------*/\r\n\r\n        if (required) {\r\n            const invalidValues = validList.filter(({value}) => {\r\n\r\n                //校验不通过才返回true\r\n\r\n                if (value == null) {\r\n                    return true\r\n                }\r\n                if (Array.isArray(value) && value.length === 0) {\r\n                    return true\r\n                }\r\n                if (typeof value === 'string') {\r\n                    return !value.trim()\r\n                } else {\r\n                    return false\r\n                }\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || '必填，不能为空！',\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------options 选项值校验-------------------------------------------*/\r\n\r\n        if (options != null) {\r\n            const optionList = Array.isArray(options) ? options : [options]\r\n            const invalidValues = validList.filter(({value}) => {\r\n\r\n                //校验不通过才返回true\r\n\r\n                if (value == null) {\r\n                    /*没有值，不校验*/\r\n                    return false\r\n                }\r\n                if (!Array.isArray(value)) {\r\n                    /*不是数组，判断值是否存在数组中*/\r\n                    const isExist = optionList.indexOf(value) > -1\r\n                    if (!isExist) {\r\n                        return true\r\n                    }\r\n                } else {\r\n                    /*是数组，判断value数组中是否存在值，不符合options*/\r\n                    return !!(value as any[]).find(v => optionList.indexOf(v) === -1)\r\n                }\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || '不符合特定选项！',\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------max-------------------------------------------*/\r\n\r\n        if (max != null) {\r\n            const invalidValues = validList.filter(({value, field}) => {\r\n\r\n                //校验不通过才返回true\r\n\r\n                if (value == null) {\r\n                    /*没有值，不校验*/\r\n                    return false\r\n                }\r\n                if (Array.isArray(value)) {\r\n                    return value.length > max\r\n                }\r\n                if (type == \"number\" || typeof value === \"number\") {\r\n                    value = typeof value === \"number\" ? value : Number(value)\r\n                    return value > max\r\n                }\r\n                // string\r\n                return String(value).length > max\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || FormValidateUtils.getMaxMessage({value, max, type}),\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------min-------------------------------------------*/\r\n\r\n        if (min != null) {\r\n            const invalidValues = validList.filter(({value}) => {\r\n\r\n                //校验不通过才返回true\r\n\r\n                if (value == null) {\r\n                    /*没有值，不校验*/\r\n                    return false\r\n                }\r\n                if (Array.isArray(value)) {\r\n                    return value.length < min\r\n                }\r\n                if (type == \"number\" || typeof value === \"number\") {\r\n                    value = typeof value === \"number\" ? value : Number(value)\r\n                    return value < min\r\n                }\r\n                // string\r\n                return String(value).length < min\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || FormValidateUtils.getMinMessage({value, min, type}),\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------pattern-------------------------------------------*/\r\n\r\n        if (!!pattern) {\r\n            const invalidValues = validList.filter(({value}) => {\r\n                if (value == null) {\r\n                    /*没有值，不校验*/\r\n                    return false\r\n                }\r\n                return !pattern.test(value)\r\n            })\r\n            if (invalidValues.length > 0) {\r\n                const {field, value} = invalidValues[0]!\r\n                return {\r\n                    rule,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                    message: message || '不符合特定模式',\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------validator-------------------------------------------*/\r\n\r\n        if (!!validator) {\r\n            const validateResultList = (await Promise.all(validList.map(async ({field, value}) => {\r\n                let message: string | void;\r\n                try {\r\n                    message = await validator(rule, value, formData || {})\r\n                } catch (e) {\r\n                    message = !!e.toString ? e.toString() : e\r\n                }\r\n                if (!message) {\r\n                    return null\r\n                }\r\n                return {\r\n                    rule,\r\n                    message,\r\n                    value,\r\n                    label: label || fieldToLabel[field],\r\n                }\r\n            }))).filter(Boolean) as FormValidateResult[]\r\n            if (validateResultList.length > 0) {\r\n                return validateResultList[0]!\r\n            }\r\n        }\r\n\r\n        return null\r\n    }\r\n}\r\n\r\n/**\r\n * validateField校验返回结果\r\n * @author  韦胜健\r\n * @date    2020/12/16 11:49\r\n */\r\nexport type FormValidateFieldReturn = FormValidateResult | undefined\r\n/**\r\n * validate校验返回结果\r\n * @author  韦胜健\r\n * @date    2020/12/16 11:49\r\n */\r\nexport type FormValidateReturn = { validateResultMap: FormValidateResultMap, validateMessage: string | undefined, validateResult?: FormValidateResult }\r\n\r\n/**\r\n * 获取总的FormRules数组\r\n * @author  韦胜健\r\n * @date    2020/12/12 21:45\r\n */\r\nexport function formatFormRules(\r\n    formComponentRules?: FormComponentRules,\r\n    formItems?: FormComponentItemRules[]\r\n) {\r\n\r\n    /*field 转化为 label的映射*/\r\n    let fieldToLabel = {} as Record<string, string>\r\n    /*返回值，总的校验规则数组*/\r\n    let resultRules: FormRule[] = []\r\n\r\n    if (!!formItems && formItems.length > 0) {\r\n        formItems.forEach(formItem => {\r\n            const {label, field, required, rules} = formItem\r\n            const fields = FormValidateUtils.getListValue(field)\r\n            if (!!fields) {\r\n                !!label && (fields.forEach(item => fieldToLabel[item] = label));\r\n                required && (resultRules.push({field, label, required: true,}))\r\n            } else {\r\n                if (required) {\r\n                    /*如果 form-item设置了required，但是没有设置field，这里给出警告！*/\r\n                    console.error(\"form-item's props.field is required when props.required is true!\")\r\n                }\r\n            }\r\n            const formItemRules = FormValidateUtils.getListValue(rules)\r\n            if (!!formItemRules && formItemRules.length > 0) {\r\n                formItemRules.forEach(r => {resultRules.push({...r, label: r.label || label, field: r.field || field,})})\r\n            }\r\n        })\r\n    }\r\n\r\n    if (!!formComponentRules) {\r\n        let formComponentRulesList: FormRule[] = []\r\n        if (Array.isArray(formComponentRules)) {\r\n            formComponentRulesList = formComponentRules\r\n        } else {\r\n            Object.keys(formComponentRules).forEach(f => {\r\n                const value = FormValidateUtils.getListValue(formComponentRules[f])\r\n                !!value && value.forEach(r => formComponentRulesList.push({...r, field: r.field || f}))\r\n            })\r\n        }\r\n        resultRules.push(...formComponentRulesList)\r\n    }\r\n\r\n    async function validateField(\r\n        {\r\n            field,\r\n            formData,\r\n            trigger,\r\n            formValidateResultMap,\r\n            associateFields,\r\n        }: {\r\n            field: string,\r\n            formData: Record<string, any> | null,\r\n            trigger: FormValidateTrigger,\r\n            formValidateResultMap: FormValidateResultMap,\r\n            associateFields?: FormAssociateFields,\r\n        }): Promise<FormValidateFieldReturn> {\r\n\r\n        if (!!associateFields && !!associateFields[field]) {\r\n            toArray(associateFields[field]).forEach(f => validateField({\r\n                field: f,\r\n                formData,\r\n                trigger: FormValidateTrigger.all,\r\n                formValidateResultMap,\r\n            }))\r\n        }\r\n\r\n        const rules = resultRules.filter(r => {\r\n            const matchField = Array.isArray(r.field) ? r.field.indexOf(field) > -1 : r.field == field\r\n            if (!matchField) {\r\n                return false\r\n            }\r\n            if (trigger === FormValidateTrigger.all) {\r\n                return trigger\r\n            }\r\n            return (r.trigger || FormValidateTrigger.change) === trigger\r\n        })\r\n\r\n        if (rules.length > 0) {\r\n            const validateResult = (await Promise.all(rules.map(r => FormValidateUtils.checkRule({rule: r, formData, fieldToLabel, field}))))\r\n                .filter(Boolean) as FormValidateResult[];\r\n            formValidateResultMap[field] = validateResult[0]\r\n            return formValidateResultMap[field]\r\n        } else {\r\n            /*\r\n            *   如果没有可用的校验规则，则什么事也不做，不能清理掉现有的校验结果，比如\r\n            *   比如 没有change校验，但是只有blur校验。如果blur先执行。在校验change的时候会把blur的检验结果覆盖掉\r\n            */\r\n            return\r\n        }\r\n    }\r\n\r\n    async function validate(formData: Record<string, any> | null): Promise<FormValidateReturn> {\r\n        const validateResultList = (await Promise.all(resultRules.map(r => FormValidateUtils.checkRule({rule: r, formData, fieldToLabel}))))\r\n            .filter(Boolean) as FormValidateResult[];\r\n        const validateResultMap = validateResultList.reduce((prev, next) => {\r\n            const {rule: {field}} = next\r\n            const fields = FormValidateUtils.getListValue(field)\r\n            if (!!fields) {\r\n                fields.forEach(f => prev[f] = next)\r\n            }\r\n            return prev\r\n        }, {} as FormValidateResultMap)\r\n        let validateMessage: string | undefined;\r\n        let validateResult: FormValidateResult | undefined;\r\n        if (validateResultList.length > 0) {\r\n            const {label, message} = validateResultList[0]!\r\n            validateMessage = `“${label}” 校验不通过，${message}`\r\n            validateResult = validateResultList[0]\r\n        }\r\n        return {\r\n            validateResultMap,\r\n            validateResult,\r\n            validateMessage,\r\n        }\r\n    }\r\n\r\n    const fieldToRequired = resultRules.reduce((prev, next) => {\r\n        if (!!next.required) {\r\n            const fields = FormValidateUtils.getListValue(next.field)!\r\n            fields.forEach(f => prev[f] = true)\r\n        }\r\n        return prev\r\n    }, {} as Record<string, boolean>)\r\n\r\n    return {\r\n        /*通过field映射label文本*/\r\n        fieldToLabel,\r\n        /*所有的校验规则*/\r\n        resultRules,\r\n        /*通过field映射required*/\r\n        fieldToRequired,\r\n        methods: {\r\n            /*校验单个字段*/\r\n            validateField,\r\n            /*校验所有规则*/\r\n            validate,\r\n        },\r\n    }\r\n}\r\n\r\nexport type FormValidate = ReturnType<typeof formatFormRules>","export const nextIndex = (() => {\r\n    let index = 1500\r\n    return () => index++\r\n})()","import {ref, watch} from 'vue';\r\n\r\nexport type UseModelConfig<T = any> = {\r\n    autoEmit?: boolean | undefined,\r\n    autoWatch?: boolean | undefined,\r\n    onChange?: (newVal: T, oldVal: T) => void,\r\n}\r\n\r\n/**\r\n * 双向绑定组合函数\r\n * @author  韦胜健\r\n * @date    2020/10/19 9:21\r\n */\r\nexport function useModel<T>(\r\n    getter: () => T,\r\n    emitter: (val: T) => void,\r\n    config?: UseModelConfig<T>\r\n) {\r\n\r\n    const state = ref(getter()) as { value: T }\r\n    config = config || {}\r\n\r\n    if (config.autoWatch !== false) {\r\n        watch(getter, (val: T) => {\r\n            if (val != state.value) {\r\n                if (config!.onChange) {\r\n                    config!.onChange(val, state.value)\r\n                }\r\n                state.value = val\r\n            }\r\n        })\r\n    }\r\n\r\n    return {\r\n        get value() {\r\n            return state.value\r\n        },\r\n        set value(val: T) {\r\n            state.value = val\r\n            if (config!.autoEmit !== false) {\r\n                emitter((val))\r\n            }\r\n        }\r\n    }\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {NoticeServiceFormatOption} from \"./index\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport './notice-service.scss'\r\nimport {PropType} from 'vue';\r\nimport Icon from '../icon'\r\nimport Button from '../button'\r\n\r\nexport default designComponent({\r\n    name: 'pl-notice',\r\n    props: {\r\n        option: {type: Object as PropType<NoticeServiceFormatOption>, required: true}\r\n    },\r\n    emits: {\r\n        onClose: () => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const classes = useClass(() => [\r\n            'pl-notice',\r\n            `pl-notice-status-${props.option.status}`\r\n        ])\r\n        const styles = {zIndex: nextIndex()}\r\n        const close = () => {\r\n            emit.onClose()\r\n            !!props.option.onClose && props.option.onClose()\r\n        }\r\n        props.option.close = close\r\n        const handler = {\r\n            onClick: (e: MouseEvent) => {\r\n                !!props.option.onClick && props.option.onClick(e)\r\n            },\r\n            onClickCloseIcon: (e: MouseEvent) => {\r\n                close()\r\n            },\r\n            onMouseenter: () => {\r\n                if (!!closeTimer) {\r\n                    clearTimeout(closeTimer)\r\n                }\r\n            },\r\n            onMouseleave: () => {\r\n                !!props.option.time && (closeTimer = setTimeout(close, props.option.time))\r\n            }\r\n        }\r\n        let closeTimer: number | null = null\r\n        !!props.option.time && (closeTimer = setTimeout(close, props.option.time))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}\r\n                     style={styles}\r\n                     onMouseenter={handler.onMouseenter}\r\n                     onMouseleave={handler.onMouseleave}\r\n                     onClick={handler.onClick}>\r\n                    <div class=\"pl-notice-head\">\r\n                        {!!props.option.icon && <Icon class=\"pl-notice-head-icon\" icon={props.option.icon}/>}\r\n                        {(!!props.option.renderHead || !!props.option.title) && (\r\n                            <div class=\"pl-notice-title\">\r\n                                {!!props.option.renderHead ? props.option.renderHead() : props.option.title}\r\n                            </div>\r\n                        )}\r\n                        {!props.option.noClose && (\r\n                            <Button mode=\"text\" icon=\"el-icon-close\" class=\"pl-notice-close\" onClick={handler.onClickCloseIcon}/>\r\n                        )}\r\n                    </div>\r\n                    {(!!props.option.renderContent || !!props.option.message) && (\r\n                        <div class=\"pl-notice-content\">\r\n                            {!!props.option.renderContent ? props.option.renderContent() : props.option.message}\r\n                        </div>\r\n                    )}\r\n                    {!!props.option.renderFoot && (\r\n                        <div class=\"pl-notice-foot\">\r\n                            {props.option.renderFoot()}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {NoticeServiceDirection, NoticeServiceFormatOption} from \"./index\";\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport {nextTick, reactive} from 'vue';\r\nimport Notice from \"./notice\";\r\nimport List from '../list'\r\nimport Item from '../item'\r\n\r\nexport default designComponent({\r\n    name: 'pl-notice-container',\r\n    props: {\r\n        horizontal: {type: String, required: true},\r\n        vertical: {type: String, required: true},\r\n        duration: {type: String, default: \"30px\"},\r\n    },\r\n    setup({props}) {\r\n        const classes = useClass(() => [\r\n            'pl-notice-container',\r\n            `pl-notice-container-${props.horizontal}-${props.vertical}`\r\n        ])\r\n        const state = reactive({\r\n            options: [] as NoticeServiceFormatOption[]\r\n        })\r\n        const refs = useRefList<{ option: NoticeServiceFormatOption }>()\r\n        const styles = {padding: props.duration}\r\n        const utils = {\r\n            close: (i: number) => {\r\n                state.options.splice(i, 1)\r\n            }\r\n        }\r\n        return {\r\n            refer: {\r\n                props,\r\n                getNotice: async (option: NoticeServiceFormatOption) => {\r\n                    state.options.push(option)\r\n                    await nextTick()\r\n                    const messages = refs.filter(Boolean)\r\n                    for (let i = 0; i < messages.length; i++) {\r\n                        const message = messages[i];\r\n                        if (message.option === option) {\r\n                            return message\r\n                        }\r\n                    }\r\n                    return null\r\n                },\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles}>\r\n                    <List direction={props.horizontal === NoticeServiceDirection.start ? 'left' : 'right'}>\r\n                        <Item key=\"placeholder\"/>\r\n                        {state.options.map((option, index) =>\r\n                            <Item key={option.id}>\r\n                                <Notice option={option}\r\n                                        ref={(proxy: any) => refs[index] = proxy}\r\n                                        onClose={() => utils.close(index)}\r\n                                />\r\n                            </Item>\r\n                        )}\r\n                    </List>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {StyleStatus} from \"../../use/useStyle\";\r\nimport {registryRootService} from \"../root/registryRootService\";\r\nimport {RequireFormat, SimpleFunction, VNodeChild} from \"../../shims\";\r\nimport ManagerComponent from './notice-manager'\r\nimport {App} from 'vue';\r\nimport {STATUS} from \"../../utils/constant\";\r\nimport {getServiceWithoutContext} from \"../../utils/getServiceWithoutContext\";\r\n\r\nexport enum NoticeServiceDirection {\r\n    start = 'start',\r\n    end = 'end',\r\n}\r\n\r\nexport interface NoticeServiceOption {\r\n    title?: string | null,                              // 标题\r\n    message?: string,                                   // 通知消息\r\n    time?: number | null,                               // 停留时间\r\n    status?: StyleStatus,                               // 状态\r\n    icon?: string,                                      // 显示图标\r\n    noClose?: boolean,                                  // 不显示关闭按钮\r\n    renderHead?: () => VNodeChild,                      // 自定义头部内容\r\n    renderContent?: () => VNodeChild,                   // 自定义内容\r\n    renderFoot?: () => VNodeChild,                      // 自定义底部内容\r\n    onClick?: SimpleFunction,                           // 点击事件处理函数\r\n    onClose?: SimpleFunction,                           // 关闭处理函数\r\n    vertical?: NoticeServiceDirection,                  // 纵向位置\r\n    horizontal?: NoticeServiceDirection,                // 横向位置\r\n}\r\n\r\nexport type NoticeServiceFormatOption = RequireFormat<NoticeServiceOption, 'time' | 'status' | 'vertical' | 'horizontal'> & {\r\n    id: string,\r\n    close: () => void,\r\n}\r\n\r\n/**\r\n * 格式化消息配置参数\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:21\r\n */\r\nconst formatOption = (() => {\r\n    let idCount = 0\r\n    return (option: NoticeServiceOption): NoticeServiceFormatOption => {\r\n\r\n        const status = option.status === null ? null : (option.status || 'primary')\r\n\r\n        return Object.assign(option as NoticeServiceFormatOption, {\r\n            title: option.title === null ? null : (option.title || '消息提示'),\r\n            id: `message_${idCount++}`,\r\n            time: option.time === null ? null : (option.time || 3 * 1000),\r\n            status,\r\n            icon: option.icon || (!status ? null : STATUS[status].icon),\r\n            horizontal: option.horizontal || NoticeServiceDirection.end,\r\n            vertical: option.vertical || NoticeServiceDirection.start,\r\n            close: () => undefined,\r\n        })\r\n    }\r\n})()\r\n\r\nexport interface NoticeServiceFunction {\r\n    (message: string | NoticeServiceOption, option?: NoticeServiceOption): void\r\n}\r\n\r\nexport type NoticeService = NoticeServiceFunction & { [k in 'primary' | 'success' | 'warn' | 'error' | 'info']: NoticeServiceFunction }\r\n\r\nconst getNoticeService = registryRootService(\r\n    'notice',\r\n    ManagerComponent,\r\n    (getManager) => {\r\n        const service: NoticeServiceFunction = (message: string | NoticeServiceOption, option?: NoticeServiceOption): NoticeServiceFormatOption => {\r\n            let o = typeof message === \"object\" ? message : {message}\r\n            if (!!option) {\r\n                Object.assign(o, option)\r\n            }\r\n            const fo = formatOption(o);\r\n            getManager().then(manager => manager.getContainer(fo).then(container => container.getNotice(fo)))\r\n            return fo\r\n        };\r\n\r\n        return Object.assign(service, [\r\n            'lite',\r\n            'dark',\r\n            'primary',\r\n            'success',\r\n            'warn',\r\n            'error',\r\n            'info',\r\n        ].reduce((prev: any, status: any) => {\r\n            prev[status] = function (message: string | NoticeServiceOption, option?: NoticeServiceOption) {\r\n                const o = typeof message === \"object\" ? message : {message}\r\n                if (!!option) {\r\n                    Object.assign(o, option)\r\n                }\r\n                o.status = status\r\n                return service(o)\r\n            }\r\n            return prev\r\n        }, {})) as NoticeService\r\n    }\r\n)\r\n\r\nexport const $$notice = getServiceWithoutContext(getNoticeService)\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            beforeCreate(): void {\r\n                Object.defineProperty(this, '$notice', {\r\n                    get() {\r\n                        return getNoticeService(this)\r\n                    },\r\n                })\r\n            }\r\n        })\r\n    },\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {NoticeServiceDirection} from \"./index\";\r\nimport {nextTick, reactive} from 'vue';\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport Container from \"./notice-container\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-notice-manager',\r\n    setup() {\r\n\r\n        const state = reactive({\r\n            containers: [\r\n                {\r\n                    horizontal: NoticeServiceDirection.end,\r\n                    vertical: NoticeServiceDirection.start,\r\n                }] as { horizontal: NoticeServiceDirection, vertical: NoticeServiceDirection }[]\r\n        })\r\n\r\n        const refs = useRefList<typeof Container.use.class>()\r\n\r\n        const getContainer = async (config: { horizontal: NoticeServiceDirection, vertical: NoticeServiceDirection }): Promise<typeof Container.use.class> => {\r\n            for (let i = 0; i < refs.length; i++) {\r\n                const ref = refs[i];\r\n                if (ref.props.horizontal === config.horizontal && ref.props.vertical === config.vertical) {\r\n                    return ref\r\n                }\r\n            }\r\n            state.containers.push(config);\r\n            await nextTick()\r\n            return getContainer(config)\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                name: 'I am notice controller',\r\n                getContainer,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-notice-manager\">\r\n                    {state.containers.map((container, index) =>\r\n                        <Container horizontal={container.horizontal}\r\n                                   vertical={container.vertical}\r\n                                   ref={(proxy: any) => refs[index] = proxy}/>)}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {defer} from \"../../utils/defer\";\r\nimport {$$message} from \"../message\";\r\n\r\nexport type FileServiceSingleFile = File & { calcSize: number }\r\nexport type FileServiceValidator = (file: FileServiceSingleFile) => boolean\r\n\r\nexport type FileServiceChooseFileConfig = {\r\n    multiple?: boolean,                 // 是否多选\r\n    accept?: string,                    // 选择的文件类型， input组件的accept属性值\r\n    validator?: FileServiceValidator,   // 自定义校验函数\r\n    max?: number,                       // 最大文件大小\r\n}\r\n\r\nexport type FileServiceUploadErrorEvent = Error & {\r\n    status: number,\r\n    method: string,\r\n    url: string,\r\n    config: FileServiceUploadConfig,\r\n}\r\n\r\nexport type FileServiceUploadConfig = {\r\n    action: string,                             // 上传地址\r\n    file: File | File[],                        // 上传的文件\r\n    filename: string,                           // 上传文件接收的文件名\r\n    data?: Record<string, string>,               // 上传的额外数据\r\n    headers?: Record<string, string>,           // 请求头\r\n    withCredentials?: boolean,                  // 是否带cookies凭证\r\n    onProgress?: (percent: number, e: ProgressEvent) => void,\r\n    onSuccess?: (data: string | Record<string, string>) => void,\r\n    onError?: (e: FileServiceUploadErrorEvent | ProgressEvent) => void,\r\n}\r\n\r\nexport const FileServiceDefaultAccept = {\r\n    image: 'image/gif, image/jpeg, image/png, image/jpg',\r\n    excel: 'application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\r\n} as Record<string, string>\r\n\r\nexport function createFileService() {\r\n\r\n    /**\r\n     * 选择文件\r\n     * @author  韦胜健\r\n     * @date    2021/1/1 17:03\r\n     */\r\n    const chooseFile = (config?: FileServiceChooseFileConfig) => {\r\n        config = config || {}\r\n        const input = getInput()\r\n\r\n        /*multiple*/\r\n        if (config.multiple) {\r\n            input.setAttribute('multiple', 'multiple')\r\n        } else {\r\n            input.removeAttribute('multiple')\r\n        }\r\n        /*accept*/\r\n        if (!!config.accept) {\r\n            const defaultInputAccept = FileServiceDefaultAccept[config.accept]\r\n            input.setAttribute('accept', defaultInputAccept || config.accept)\r\n        } else {\r\n            input.removeAttribute('accept')\r\n        }\r\n        const dfd = defer<FileServiceSingleFile | FileServiceSingleFile[]>()\r\n\r\n        if (!!input.__change) {\r\n            input.value = null as any\r\n            input.removeEventListener('change', input.__change)\r\n        }\r\n        input.__change = (e) => {\r\n            const targetFiles = (e as any).target.files as FileServiceSingleFile[]\r\n            const files = []\r\n            for (let i = 0; i < targetFiles.length; i++) {\r\n                const file = targetFiles[i];\r\n                file.calcSize = Number((file.size / (1024 * 1024)).toFixed(2))\r\n                if (!!config!.validator && !config!.validator(file)) return\r\n                if (!!config!.max && file.calcSize > config!.max) {\r\n                    return $$message.error(`[${file.name}]大小为${file.calcSize}MB，超过最大限制${config!.max}MB`, {time: 5000})\r\n                }\r\n                files.push(file)\r\n            }\r\n            dfd.resolve(config!.multiple ? files : files[0])\r\n        }\r\n        input.addEventListener('change', input.__change)\r\n        input.click()\r\n\r\n        return dfd.promise\r\n    }\r\n\r\n    /**\r\n     * 选择tupiuan\r\n     * @author  韦胜健\r\n     * @date    2021/1/1 17:03\r\n     */\r\n    const chooseImage = (multiple?: boolean) => {\r\n        const config: FileServiceChooseFileConfig = {accept: \"image\", multiple}\r\n        return chooseFile(config)\r\n    }\r\n\r\n    /**\r\n     * 读取文件为base64字符串\r\n     * @author  韦胜健\r\n     * @date    2021/1/1 17:04\r\n     */\r\n    const readAsDataURL = (file: File) => {\r\n        const dfd = defer<string | ArrayBuffer | null>()\r\n        let fr = new FileReader()\r\n        fr.onloadend = e => dfd.resolve(e.target!.result)\r\n        fr.onerror = () => dfd.reject()\r\n        fr.readAsDataURL(file)\r\n        return dfd.promise\r\n    }\r\n\r\n    /**\r\n     * 上传文件\r\n     * @author  韦胜健\r\n     * @date    2021/1/1 17:07\r\n     */\r\n    const upload = (uploadConfig: FileServiceUploadConfig) => {\r\n        const xhr = ('XMLHttpRequest' in window ? new XMLHttpRequest() : new (Window as any).ActiveXObject('Microsoft.XMLHTTP')) as XMLHttpRequest\r\n        xhr.open('post', uploadConfig.action, true)\r\n\r\n        if (!!xhr.upload) {\r\n            xhr.upload.addEventListener('progress', (e) => {\r\n                const percent = Number((e.loaded / e.total * 100).toFixed(2))\r\n                !!uploadConfig.onProgress && uploadConfig.onProgress(percent, e)\r\n            })\r\n        }\r\n\r\n        if (uploadConfig.withCredentials != null && 'withCredentials' in xhr) {\r\n            xhr.withCredentials = uploadConfig.withCredentials\r\n        }\r\n\r\n        if (!!uploadConfig.headers)\r\n            Object.entries(uploadConfig.headers)\r\n                .forEach(([key, value]) => xhr.setRequestHeader(key, value))\r\n\r\n        xhr.onerror = (e) => !!uploadConfig.onError && uploadConfig.onError(e)\r\n        xhr.onload = () => {\r\n            if (xhr.status < 200 || xhr.status > 300) {\r\n                !!uploadConfig.onError && uploadConfig.onError(getError(uploadConfig, xhr))\r\n            } else {\r\n                !!uploadConfig.onSuccess && uploadConfig.onSuccess(getResponseBody(xhr))\r\n            }\r\n        }\r\n        const formData = new FormData()\r\n        if (!!uploadConfig.data) Object.entries(uploadConfig.data).forEach(([key, value]) => formData.append(key, value))\r\n        if (Array.isArray(uploadConfig.file)) {\r\n            uploadConfig.file.forEach(f => formData.append(uploadConfig.filename, f))\r\n        } else {\r\n            formData.append(uploadConfig.filename, uploadConfig.file);\r\n        }\r\n        xhr.send(formData)\r\n        return xhr\r\n    }\r\n\r\n    return {\r\n        chooseFile,\r\n        chooseImage,\r\n        readAsDataURL,\r\n        upload,\r\n    }\r\n}\r\n\r\nconst getInput = (() => {\r\n    let input: HTMLInputElement & { __change?: (e: Event) => void };\r\n    return () => {\r\n        if (!input) {\r\n            input = document.createElement('input')\r\n            input.setAttribute('type', 'file')\r\n            input.style.display = 'none'\r\n            document.body.appendChild(input)\r\n        }\r\n        return input\r\n    }\r\n})();\r\n\r\nfunction getError(config: FileServiceUploadConfig, xhr: XMLHttpRequest) {\r\n    let message: string\r\n    console.log(xhr)\r\n    if (!!xhr.response) {\r\n        message = xhr.response.error || xhr.response\r\n    } else if (!!xhr.responseText) {\r\n        message = xhr.responseText\r\n    } else {\r\n        message = `file to post ${config.action} ${xhr.status}`\r\n    }\r\n\r\n    const error = new Error(message) as FileServiceUploadErrorEvent\r\n    error.status = xhr.status\r\n    error.method = 'post'\r\n    error.url = config.action\r\n    error.config = config\r\n\r\n    return error\r\n}\r\n\r\nfunction getResponseBody(xhr: XMLHttpRequest) {\r\n    let result = xhr.responseText || xhr.response\r\n    if (!result) return result\r\n    try {\r\n        return JSON.parse(result)\r\n    } catch (e) {\r\n        return result\r\n    }\r\n}\r\n\r\nexport const $$file = createFileService()","import {createDefaultService} from \"../../root/createDefaultService\";\r\nimport {nextTick, reactive, ref, computed} from 'vue';\r\nimport {PopperServiceComponentOption} from \"./utils\";\r\nimport {createCounter} from \"../../../utils/createCounter\";\r\n\r\n/**\r\n * 生成id的计数器，每次show的时候获取一个新的计数器，一遍令render重新渲染\r\n * @author  韦胜健\r\n * @date    2020/11/27 9:31\r\n */\r\nconst counter = createCounter('popper-service-component')\r\n\r\n/**\r\n * 合并attrs\r\n * @author  韦胜健\r\n * @date    2020/11/27 9:31\r\n */\r\nconst mergeAttrs = (() => {\r\n    const LISTENER_MATCH_REG = /on[A-Z]/\r\n    return (config: { attrs: any, defaultAttrs: any, agent: any }) => {\r\n        const {agent} = config\r\n        let attrs = config.attrs || {}\r\n        let defaultAttrs = config.defaultAttrs || {}\r\n        if (typeof attrs === \"function\") {attrs = attrs()}\r\n        if (typeof defaultAttrs === \"function\") {defaultAttrs = defaultAttrs()}\r\n\r\n        const result = {} as any\r\n        Object.keys({...attrs, ...defaultAttrs}).forEach(key => {\r\n            if (LISTENER_MATCH_REG.test(key)) {\r\n                result[key] = (...args: any[]) => {\r\n                    !!(attrs as any)[key] && (attrs as any)[key].apply(agent, args);\r\n                    !!(defaultAttrs as any)[key] && (defaultAttrs as any)[key].apply(agent, args);\r\n                }\r\n            } else {\r\n                if (key in attrs) {\r\n                    result[key] = attrs[key]\r\n                } else {\r\n                    result[key] = defaultAttrs[key]\r\n                }\r\n            }\r\n        })\r\n        return result\r\n    }\r\n})();\r\n\r\n/**\r\n * 创建一个基于 pl-popper 的service 组件\r\n * @author  韦胜健\r\n * @date    2020/11/27 9:31\r\n */\r\nexport function createPopperServiceComponent(name: string) {\r\n    return createDefaultService({\r\n        name,\r\n        setup(option: PopperServiceComponentOption) {\r\n\r\n            /*当前是否显示/隐藏*/\r\n            const isShow = ref(false)\r\n            /*当前是否已经显示/隐藏*/\r\n            const isOpen = ref(false)\r\n\r\n            const state = reactive({\r\n                option,                                 // 当前服务的option\r\n                renderKey: counter(),                   // 用于刷新render的key\r\n            })\r\n\r\n            /**\r\n             * 开始服务\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:32\r\n             */\r\n            async function service(option: PopperServiceComponentOption) {\r\n                if (!option.getService || option.getService !== getRefer) {\r\n                    /*clear*/\r\n                    state.option.getService = undefined\r\n                    /*init*/\r\n                    state.option = option\r\n                    state.option.getService = getRefer\r\n                    await nextTick()\r\n                }\r\n                await show()\r\n            }\r\n\r\n            /**\r\n             * 显示服务\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:33\r\n             */\r\n            async function show() {\r\n                state.renderKey = counter()\r\n                await nextTick()\r\n                isShow.value = true\r\n            }\r\n\r\n            /**\r\n             * 隐藏服务\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:33\r\n             */\r\n            function hide() {isShow.value = false}\r\n\r\n            /**\r\n             * service本身暴露的对象\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:39\r\n             */\r\n            const refer = {state, isShow, isOpen, service, show, hide,}\r\n\r\n            /**\r\n             * service本身暴露对象的引用，保存在option.getService中，用于标记service与option的绑定关系\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:39\r\n             */\r\n            const getRefer = () => refer\r\n\r\n            /**\r\n             * 合并后的popper属性\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:40\r\n             */\r\n            const popperAttrs = computed(() => {\r\n                let {defaultOption: {defaultPopperAttrs}, serviceOption: {popperAttrs}} = state.option\r\n                return mergeAttrs({agent: refer, attrs: popperAttrs, defaultAttrs: defaultPopperAttrs,})\r\n            })\r\n\r\n            /**\r\n             * 合并之后的render属性\r\n             * @author  韦胜健\r\n             * @date    2020/11/27 9:40\r\n             */\r\n            const renderAttrs = computed(() => {\r\n                let {defaultOption: {defaultRenderAttrs}, serviceOption: {renderAttrs}} = state.option\r\n                return {\r\n                    ...mergeAttrs({agent: refer, attrs: renderAttrs, defaultAttrs: defaultRenderAttrs,}),\r\n                    key: state.renderKey,\r\n                }\r\n            })\r\n\r\n            const handler = {\r\n                onClickBody: () => {\r\n                    if (state.option.serviceOption.hideOnClickBody !== false) {\r\n                        refer.hide()\r\n                    }\r\n                },\r\n            }\r\n\r\n            return {\r\n                refer,\r\n                render: () => (\r\n                    <pl-popper\r\n                        v-model={isShow.value}\r\n                        onClickBody={handler.onClickBody}\r\n                        popperAttrs={{['service-name']: name}}\r\n                        {...{\r\n                            transition: 'pl-transition-scale',\r\n                            noContentPadding: true,\r\n                            trigger: 'manual',\r\n                            reference: state.option.serviceOption.reference,\r\n                            'onUpdate:open': (val: boolean) => isOpen.value = val,\r\n                            ...popperAttrs.value,\r\n                        }}\r\n                        v-slots={{\r\n                            popper: () => state.option.defaultOption.render(renderAttrs.value),\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        },\r\n    })\r\n}","import {ComponentPublicInstance, computed, reactive} from 'vue';\r\nimport {registryRootService, RootServiceScope} from \"../../root/registryRootService\";\r\nimport {createDefaultManager} from \"../../root/createDefaultManager\";\r\nimport {createPopperServiceComponent} from \"./createPopperServiceComponent\";\r\nimport {CreateAgentGetterOption, PopperAgent, PopperServiceComponentOption, SpecificPopperServiceOption} from './utils';\r\n\r\n/**\r\n * 创建一个获取popper agent的函数\r\n * @author  韦胜健\r\n * @date    2020/11/26 21:15\r\n */\r\nexport function createAgentGetter(defaultOption: CreateAgentGetterOption, scope = RootServiceScope.root) {\r\n\r\n    /**\r\n     * 创建一个生成service的函数\r\n     * @author  韦胜健\r\n     * @date    2020/11/27 9:30\r\n     */\r\n    function create(ins: ComponentPublicInstance) {\r\n        const name = defaultOption.name\r\n        /*---------------------------------------Specific Popper Service-------------------------------------------*/\r\n        const popperServiceGetter = registryRootService(\r\n            name,\r\n            createDefaultManager(\r\n                `pl-popper-service-${name}-manager`,\r\n                createPopperServiceComponent(`pl-popper-service-${name}`)\r\n            ),\r\n            (getManager) => {\r\n                return (serviceOption: SpecificPopperServiceOption): PopperAgent => {\r\n\r\n                    const option: PopperServiceComponentOption = {\r\n                        defaultOption,\r\n                        serviceOption,\r\n                        getService: undefined,\r\n                    }\r\n\r\n                    /*---------------------------------------create popper agent-------------------------------------------*/\r\n                    const state = reactive({option})\r\n                    const service = computed(() => !state.option.getService ? null : state.option.getService())\r\n                    const isShow = computed(() => !!service.value && service.value.isShow.value)\r\n                    const isOpen = computed(() => !!service.value && service.value.isShow.value)\r\n                    const agent = reactive({\r\n                        state,\r\n                        isShow,\r\n                        isOpen,\r\n                        service,\r\n                        show: () => {!!agent.service ? agent.service.show() : getManager().then(manager => manager.service(option))},\r\n                        hide: () => {!!agent.service && agent.service.hide()},\r\n                        toggle: () => isShow.value ? agent.hide() : agent.show(),\r\n                        destroy: () => {\r\n                            agent.hide()\r\n                            state.option.getService = undefined\r\n                        }\r\n                    })\r\n                    return agent\r\n                }\r\n            },\r\n        )\r\n\r\n        return popperServiceGetter(ins)\r\n    }\r\n\r\n    /*缓存 service，scope为缓存的作用域*/\r\n    const cacheMap = new WeakMap<ComponentPublicInstance, ReturnType<typeof create>>()\r\n\r\n    return (ins: ComponentPublicInstance) => {\r\n        const cacheKey = scope === RootServiceScope.ins ? ins : ins.$root!\r\n        let service = cacheMap.get(cacheKey)\r\n        if (!!service) {\r\n            return service\r\n        }\r\n        service = create(ins)\r\n        cacheMap.set(cacheKey, service)\r\n        return service\r\n    }\r\n}","import {ComponentPlugin} from \"../shims\";\r\nimport {App} from 'vue';\r\n\r\nconst installMap = new WeakMap<App, ComponentPlugin[]>()\r\n\r\nexport function installPlugin(app: App, plugins: ComponentPlugin | ComponentPlugin[]) {\r\n    /*已经安装过的插件*/\r\n    let installedPlugins = installMap.get(app)\r\n    if (!installedPlugins) {\r\n        /*这个app第一次注册*/\r\n        installedPlugins = []\r\n        installMap.set(app, installedPlugins)\r\n    }\r\n    (Array.isArray(plugins) ? plugins : [plugins]).forEach(plugin => {\r\n        if (installedPlugins!.indexOf(plugin) === -1) {\r\n            installedPlugins!.push(plugin)// 这句代码一定要在app.use面前\r\n            app.use(plugin)\r\n        }\r\n    });\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {markRaw, ref, watch, computed} from 'vue';\r\nimport './icon.scss'\r\nimport {VNodeChild} from \"../../shims\";\r\nimport {refreshPopperReference} from \"../popper/refershPopperReference\";\r\n\r\ninterface IconGetter {\r\n    (icon: string): VNodeChild | Promise<VNodeChild>\r\n}\r\n\r\n/**\r\n * prefix必须为全小写，可以有横杠下划线\r\n * @author  韦胜健\r\n * @date    2020/11/1 12:59\r\n */\r\nconst registry = (() => {\r\n    const icons: { prefix: string, getter: IconGetter }[] = []\r\n    return Object.assign((prefix: string, getter: IconGetter) => {\r\n        icons.unshift({prefix, getter})\r\n    }, {\r\n        icons,\r\n    })\r\n})()\r\n\r\nregistry('el-icon-', async (icon) => {\r\n    try {\r\n        const module = await import('./icons/' + icon + '.json')\r\n        // console.log(module)\r\n        return (\r\n            <svg\r\n                class={`el-svg-icon ${icon}`}\r\n                viewBox=\"0 0 1024 1024\"\r\n                version=\"1.1\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                innerHTML={module.default[0]}\r\n            />\r\n        )\r\n    } catch (e) {\r\n        console.error(e)\r\n        throw e\r\n    }\r\n})\r\n\r\nexport default designComponent({\r\n    name: 'pl-icon',\r\n    props: {\r\n        icon: {type: String},                       // 图标名称\r\n        status: {type: String},                     // 图标状态\r\n    },\r\n    setup({props}) {\r\n\r\n        const {freshPopperReference} = refreshPopperReference.inject()\r\n\r\n        const icon = ref(null as any)\r\n\r\n        const classes = computed(() => [\r\n            'pl-icon',\r\n            {\r\n                [`pl-icon-status-${props.status}`]: !!props.status\r\n            }\r\n        ])\r\n\r\n        const utils = {\r\n            getIconVNode: async (iconName: string) => {\r\n                for (let i = 0; i < registry.icons.length; i++) {\r\n                    const registryIcon = registry.icons[i];\r\n                    if (iconName.indexOf(registryIcon.prefix) === 0) {\r\n                        return await registryIcon.getter(iconName)\r\n                    }\r\n                }\r\n                return null\r\n            },\r\n            reset: async (iconName: string) => {\r\n                const Icon = await utils.getIconVNode(iconName)\r\n                icon.value = !!Icon ? markRaw(Icon) : null\r\n                freshPopperReference()\r\n            }\r\n        }\r\n\r\n        watch(() => props.icon, val => !!val && utils.reset(val), {immediate: true})\r\n\r\n        return {\r\n            render: () => {\r\n                const {value: Icon} = icon\r\n                return !!Icon ? <Icon class={classes.value}/> : <i class=\"pl-icon\"/>\r\n            }\r\n        }\r\n    },\r\n}, {registry})","import Icon from './icon'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Icon)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleMode, StyleProps, StyleStatus, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {computed, provide, inject} from 'vue';\r\nimport './button-group.scss'\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\n\r\ninterface ButtonModeProviderValue {\r\n    value: { mode: string }\r\n}\r\n\r\nexport const BUTTON_GROUP_PROVIDER = '@@BUTTON_GROUP_PROVIDER'\r\n\r\nexport const ButtonModeProvider = (() => {\r\n    return {\r\n        provide: (data: ButtonModeProviderValue) => {\r\n            provide(BUTTON_GROUP_PROVIDER, data)\r\n        },\r\n        inject: () => {\r\n            return inject(BUTTON_GROUP_PROVIDER, null) as ButtonModeProviderValue | null\r\n        }\r\n    }\r\n})()\r\n\r\nexport default designComponent({\r\n    name: 'pl-button-group',\r\n    props: {\r\n        mode: {type: String, default: StyleMode.fill},                  // fill,stroke,text\r\n        vertical: {type: Boolean},                                      // 是否为纵向按钮组\r\n\r\n        ...EditProps,\r\n        ...StyleProps,\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        const {editComputed} = useEdit()\r\n\r\n        const parentGroup = ButtonModeProvider.inject()\r\n        const otherComputed = computed(() => ({mode: !!parentGroup ? parentGroup.value.mode : props.mode}))\r\n        ButtonModeProvider.provide(otherComputed)\r\n\r\n        const classes = computed(() => ([\r\n            `pl-button-group`,\r\n            `pl-button-group-status-${styleComputed.value.status}`,\r\n            `pl-button-group-mode-${otherComputed.value.mode}`,\r\n            `pl-button-group-shape-${styleComputed.value.shape}`,\r\n            `pl-button-group-size-${styleComputed.value.size}`,\r\n            `pl-button-group-direction-${props.vertical ? 'vertical' : 'horizontal'}`,\r\n            {\r\n                'pl-button-group-disabled': !!editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {ComponentPublicInstance, createApp} from 'vue';\r\nimport Root from '../packages/root'\r\nimport {installPlugin} from \"./installPlugin\";\r\nimport {addClass} from \"plain-utils/dom/addClass\";\r\n\r\nconst getIns = (() => {\r\n    let ins: ComponentPublicInstance | undefined;\r\n    return () => {\r\n        if (!ins) {\r\n            const container = document.createElement('div')\r\n            addClass(container, 'service-without-context')\r\n            document.body.appendChild(container)\r\n            const app = createApp({render() {return <pl-root/>}})\r\n            installPlugin(app, Root)\r\n            ins = app.mount(container)\r\n        }\r\n        return ins\r\n    }\r\n})();\r\n\r\nexport function getServiceWithoutContext<Service>(serviceGetter: (ins: ComponentPublicInstance) => Service) {\r\n    return serviceGetter(getIns())\r\n}","import {reactive, watch} from 'vue'\r\n\r\nfunction toNumber(val: null | string | number) {\r\n    if (val == null) {\r\n        return\r\n    }\r\n    if (typeof val === \"string\") {\r\n        return Number(val.replace('px', ''))\r\n    }\r\n    return val\r\n}\r\n\r\nexport function useNumber<Props extends { [k: string]: any },\r\n    K extends string,\r\n    >(\r\n    props: Props,\r\n    keys: K[]\r\n): { numberState: { [k in K]: Exclude<Props[k], string> } } {\r\n\r\n    const state = reactive((() => {\r\n        const ret = {} as Record<string, number | undefined>\r\n        keys.forEach(key => {\r\n            ret[key] = toNumber(props[key])\r\n        })\r\n        return ret\r\n    })())\r\n\r\n    keys.forEach(key => {\r\n        watch(() => props[key], val => state[key] = toNumber(val))\r\n    })\r\n\r\n    return {\r\n        numberState: state as any,\r\n    }\r\n}\r\n\r\n/*const {numberState} = useNumber({\r\n    noField: 11,\r\n    level: 1,\r\n    age: 2 as number | undefined,\r\n    limit: '2' as string | number | undefined,\r\n}, [\r\n    'level',\r\n    'age',\r\n    'limit',\r\n])\r\n\r\nnumberState.level.toFixed(0)\r\nnumberState.age.toFixed(0)\r\nnumberState.limit.toFixed(0)*/\r\n\r\n\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAWElEQVRIiWM8fubkfwYygKWJOSM5+mCAhRLNoxaPWjxq8ajFoxbTyeL/DAfJ0Xjs3Cl7Siwmu4Yht1aDgZEYx6MWj1o8avGoxaMWD3qLya5X//4nqx6HAQC7RBGFzolqTAAAAABJRU5ErkJggg==\"","import {getCurrentInstance} from 'vue';\r\n\r\nexport function useRefs<T extends { [k: string]: any }>(config: T): {\r\n    refs: {\r\n        [k in keyof T]: T[k] extends { use: { ref: (refName: string) => { value: infer Refer } } } ? Refer :\r\n            T[k] extends new (...args: any[]) => infer Refer ? Refer : T\r\n    }\r\n} {\r\n    const ctx = getCurrentInstance() as any\r\n    return {\r\n        refs: Object.keys(config).reduce((prev, refName) => {\r\n            Object.defineProperty(prev, refName, {\r\n                get(): any {\r\n                    return ctx.refs[refName]\r\n                }\r\n            })\r\n            return prev\r\n        }, {} as any)\r\n    }\r\n}\r\n","import './list.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {TransitionGroup} from 'vue'\r\nimport {useSlots} from \"../../use/useSlots\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-list',\r\n    props: {\r\n        direction: {                            //item入场出场动画 'left', 'right', 'top', 'bottom', 'left-top', 'top-left', 'right-top', 'top-right', 'left-bottom', 'bottom-left', 'right-bottom', 'bottom-right'\r\n            type: String,\r\n            default: 'bottom-right',\r\n        },\r\n        tag: {type: String, default: 'div'},\r\n        disabled: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        return {\r\n            render: () => {\r\n                const Component = (props.disabled ? props.tag : TransitionGroup) as any\r\n                return (\r\n                    <Component {...{\r\n                        class: \"pl-list\",\r\n                        name: `pl-list-move-${props.direction}`,\r\n                        tag: props.tag,\r\n                    }}>\r\n                        {slots.default()}\r\n                    </Component>\r\n                )\r\n            }\r\n        }\r\n    }\r\n})","import list from './list'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(list)","import {getCurrentInstance, ComponentInternalInstance} from 'vue'\r\n\r\nexport function useFunctionWrapper<P extends any[],\r\n    T extends (ctx: ComponentInternalInstance, ...args: P) => any>(\r\n    key: string,\r\n    func: T,\r\n): (...args: P) => ReturnType<T> {\r\n    return (...args) => {\r\n        const ctx = getCurrentInstance() as any\r\n        if (!ctx._use) ctx._use = {}\r\n\r\n        if (!!ctx._use[key]) {\r\n            throw new Error(`use ${key} can only be executed once!`)\r\n        }\r\n\r\n        return (ctx._use[key] = func(ctx, ...args))\r\n    }\r\n}\r\n\r\n/*const func = useFunctionWrapper('', (ctx, name: string, age: number) => {\r\n    return {\r\n        sayHello: () => {},\r\n    }\r\n})\r\n\r\nconst data = func('111', 111)\r\ndata.sayHello()*/\r\n\r\n","import {ComponentInternalInstance} from \"vue\"\r\n\r\nexport function getSlotExist(prevState: { [k: string]: boolean } | null, slotNames: string[], ctx: ComponentInternalInstance) {\r\n    if (!prevState) {\r\n        prevState = {}\r\n    }\r\n    slotNames.forEach((slotName) => {\r\n        prevState![slotName] = !!ctx.slots[slotName]\r\n    })\r\n    return prevState\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {nextTick, ref} from 'vue';\r\nimport {useRefList} from \"../../use/useRefList\";\r\n\r\n/**\r\n * 创建一个默认的 root service manager组件\r\n * @author  韦胜健\r\n * @date    2020/11/26 9:20\r\n */\r\nexport function createDefaultManager<Option>(\r\n    managerName: string,\r\n    serviceComponent: {\r\n        use: {\r\n            class: {\r\n                isShow: { value: boolean },\r\n                isOpen: { value: boolean },\r\n                service: (option: Option) => any,\r\n            }\r\n        }\r\n    }) {\r\n    return designComponent({\r\n        name: managerName,\r\n        setup() {\r\n\r\n            const options = ref([] as Option[])\r\n            const refs = useRefList<typeof serviceComponent[\"use\"][\"class\"]>()\r\n\r\n            /**\r\n             * 获取一个 非show以及open的 service提供服务，如果存在\r\n             * 符合这个条件的service，直接调用service函数，否则创建\r\n             * 一个service，这个service在setup末尾需要调用一次service\r\n             * 函数；\r\n             * @author  韦胜健\r\n             * @date    2020/11/26 9:23\r\n             */\r\n            const service = async (option: Option): Promise<void> => {\r\n                for (let i = 0; i < refs.length; i++) {\r\n                    const item = refs[i];\r\n                    const {isShow, isOpen} = item\r\n                    if (!isShow.value && !isOpen.value) {\r\n                        return item.service(option)\r\n                    }\r\n                }\r\n                options.value.push(option as any)\r\n                await nextTick()\r\n            }\r\n\r\n            return {\r\n                refer: {\r\n                    managerName,\r\n                    service,\r\n                },\r\n                render: () => {\r\n                    const ServiceComponent = serviceComponent as any\r\n                    return (\r\n                        <div class={managerName}>\r\n                            {options.value.map((opt, i) => <ServiceComponent\r\n                                key={i}\r\n                                option={opt}\r\n                                ref={(proxy: any) => refs[i] = proxy}\r\n                            />)}\r\n                        </div>\r\n                    )\r\n                }\r\n            }\r\n        },\r\n    })\r\n}","import {getCurrentInstance, onBeforeUnmount} from 'vue'\r\nimport {createPlainEvent, PlainEvent} from \"../plugins/Event\";\r\nimport {SimpleFunction} from \"../shims\";\r\nimport {kebabCase} from 'plain-utils/string/kebabCase'\r\n\r\ntype EventListener<EmitsValue> = EmitsValue extends (...args: any[]) => any ? Parameters<EmitsValue> : never\r\n\r\nexport type ComponentEvent<Emit> = {\r\n    emit: { [key in keyof Emit]: (...args: EventListener<Emit[key]>) => void },\r\n    on: { [key in keyof Emit]: (cb: (...args: EventListener<Emit[key]>) => void) => void },\r\n    once: { [key in keyof Emit]: (cb: (...args: EventListener<Emit[key]>) => void) => void },\r\n    off: { [key in keyof Emit]: (cb: (...args: EventListener<Emit[key]>) => void) => void },\r\n}\r\n\r\nexport function getComponentEmit<T>(emitObject: T): T {\r\n    return Object.keys(emitObject || {}).reduce((prev, key) => {\r\n        const emitter = (emitObject as any)[key];\r\n        const match = key.match(/onUpdate([A-Z])(.*)/)\r\n        const kebabCaseName = kebabCase(key).replace('on-', '')\r\n        if (!!match) {\r\n            const updateName = `update:${match[1].toLowerCase()}${match[2]}`\r\n            prev[updateName] = emitter\r\n            if (key === 'onUpdateModelValue') {\r\n                prev['change'] = emitter\r\n            }\r\n        }\r\n        prev[kebabCaseName] = emitter\r\n        return prev\r\n    }, {} as any)\r\n}\r\n\r\nexport function useEvent<T>(emitObject: T): ComponentEvent<T> {\r\n\r\n    const ctx = getCurrentInstance()!\r\n    const event = createPlainEvent()\r\n\r\n    const emit = {} as any;\r\n    const on = {} as any;\r\n    const once = {} as any;\r\n    const off = {} as any;\r\n\r\n    const keys = Object.keys(emitObject || {})\r\n    if (!!emitObject && !!(emitObject as any).onUpdateModelValue) {keys.push('onChange')}\r\n\r\n    keys.forEach(key => {\r\n        /*派发事件名称，横杠命名*/\r\n        const match = key.match(/onUpdate([A-Z])(.*)/)\r\n        const kebabCaseName = kebabCase(key).replace('on-', '')\r\n        if (!!match) {\r\n            const updateName = `update:${match[1].toLowerCase()}${match[2]}`\r\n            emit[key] = (...args: any[]) => {\r\n                ctx.emit(kebabCaseName, ...args)\r\n                event.emit(kebabCaseName, ...args)\r\n                ctx.emit(updateName, ...args)\r\n                event.emit(updateName, ...args)\r\n                if (key === 'onUpdateModelValue') {\r\n                    ctx.emit('change', ...args)\r\n                    event.emit('change', ...args)\r\n                }\r\n            }\r\n        } else {\r\n            emit[key] = (...args: any[]) => {\r\n                ctx.emit(kebabCaseName, ...args)\r\n                event.emit(kebabCaseName, ...args)\r\n            }\r\n        }\r\n        on[key] = (fn: SimpleFunction) => event.on(kebabCaseName, fn)\r\n        once[key] = (fn: SimpleFunction) => event.once(kebabCaseName, fn)\r\n        off[key] = (fn: SimpleFunction) => event.off(kebabCaseName, fn)\r\n    })\r\n\r\n    onBeforeUnmount(event.clear)\r\n\r\n    return {\r\n        emit, on, once, off,\r\n    }\r\n}","export const renderNothing = () => null","import {Component, ComponentInternalInstance, ComponentOptionsMixin, ComponentPropsOptions, ComputedOptions, defineComponent, DefineComponent, Directive, EmitsOptions, ExtractPropTypes, getCurrentInstance, inject, MethodOptions, PropType, provide, Ref, ref, SetupContext,} from 'vue'\r\nimport {ComponentEvent, getComponentEmit, useEvent} from \"./useEvent\";\r\nimport {createError} from \"../utils/createError\";\r\nimport {renderNothing} from \"../utils/renderNothing\";\r\n\r\nconst error = createError('designComponent')\r\n\r\ninterface RefValue<T> {\r\n    (): Ref<null | T>\r\n\r\n    (refName?: string): Readonly<{ value: null | T }>\r\n}\r\n\r\ninterface InjectValue<Refer> {\r\n    (): Refer,\r\n\r\n    <DefaultValue>(defaultValue?: DefaultValue): Refer | DefaultValue\r\n}\r\n\r\ninterface UseType<Refer, Props> {\r\n    ref: RefValue<Refer>,\r\n    inject: InjectValue<Refer>\r\n    class: Refer,\r\n    props: Props,\r\n}\r\n\r\ntype EmitToProp<E extends Record<string, any>> = {\r\n    [k in keyof E]: { type: PropType<E[k] extends ((...args: any[]) => any) ? (...args: Parameters<E[k]>) => void : E[k]>, }\r\n}\r\n\r\nexport function designComponent<RawBindings,\r\n    D,\r\n    Refer,\r\n    Expose extends object,\r\n    Props extends Readonly<ExtractPropTypes<PropsOptions>>,\r\n    PropsOptions extends Readonly<ComponentPropsOptions> = {},\r\n    C extends ComputedOptions = {},\r\n    M extends MethodOptions = {},\r\n    Mixin extends ComponentOptionsMixin = ComponentOptionsMixin,\r\n    Extends extends ComponentOptionsMixin = ComponentOptionsMixin,\r\n    E extends EmitsOptions = {},\r\n    EE extends string = string,\r\n    >(\r\n    options: {\r\n        provideRefer?: boolean,\r\n        emits?: E,\r\n        setup?: (parameter: { props: Props, event: ComponentEvent<E>, setupContext: SetupContext<E>, ctx: ComponentInternalInstance }) => {\r\n            refer?: Refer\r\n            render: () => any,\r\n        },\r\n\r\n        name?: string,\r\n        props?: PropsOptions,\r\n        mixins?: any[],\r\n        components?: Record<string, Component>;\r\n        directives?: Record<string, Directive>;\r\n    },\r\n    expose?: Expose,\r\n): DefineComponent<PropsOptions & EmitToProp<E>, RawBindings, D, C, M, Mixin, Extends, E, EE> & {\r\n    use: UseType<Refer, Props>\r\n} & Expose {\r\n\r\n    const {provideRefer, emits, setup, ...leftOptions} = options\r\n\r\n    const use: UseType<Refer, Props> = {\r\n        inject: (defaultValue?: any) => {\r\n            return inject(`@@${options.name}`, defaultValue) as Refer\r\n        },\r\n        class: Object as any as Refer,\r\n        ref: (refName?: string) => {\r\n            if (!!refName) {\r\n                const ctx = getCurrentInstance()!\r\n                return {\r\n                    get value() {\r\n                        return ctx.refs[refName!]\r\n                    }\r\n                } as any\r\n            } else {\r\n                return ref(null)\r\n            }\r\n        },\r\n        props: Object as any as Props,\r\n    }\r\n\r\n    /*if (leftOptions.name === 'pl-popper') {\r\n        console.log(leftOptions.name, getComponentEmit(emits), emits)\r\n    }*/\r\n\r\n    return Object.assign(\r\n        defineComponent({\r\n            ...(leftOptions as any || {}),\r\n            props: leftOptions.props as PropsOptions,\r\n            emits: getComponentEmit(emits),\r\n            setup(props: any, setupContext: any) {\r\n                if (!setup) {\r\n                    error('setup is necessary!')\r\n                    return renderNothing\r\n                }\r\n                const ctx = getCurrentInstance()!\r\n                const event = useEvent<E>(emits!);\r\n                (ctx as any)._event = event;\r\n\r\n                const {refer, render} = setup({\r\n                    ctx,\r\n                    props,\r\n                    event,\r\n                    setupContext,\r\n                })\r\n\r\n                if (!!refer) {\r\n                    const duplicateKey = Object.keys(refer || {}).find(i => i in ctx.proxy!)\r\n                    if (!!duplicateKey) {\r\n                        console.error(`designComponent:${leftOptions.name} key '${duplicateKey}' in refer is not allow here!`)\r\n                    } else {\r\n                        Object.assign(ctx.proxy, refer)\r\n                    }\r\n                }\r\n\r\n                if (provideRefer) {\r\n                    if (!options.name) {\r\n                        error('component name is necessary when provideRefer is true!')\r\n                    } else {\r\n                        provide(`@@${options.name}`, refer)\r\n                    }\r\n                }\r\n                return render\r\n            },\r\n        }),\r\n        {use, ...(expose || {})}\r\n    ) as any\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-item',\r\n    props: {\r\n        block: {type: Boolean},\r\n        tag: {type: String, default: 'div'},\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        return {\r\n            render: () => {\r\n                const {tag: Tag} = props as any\r\n                return (\r\n                    <Tag {...{class: `pl-item ${!!props.block ? 'pl-item-block' : ''}`}}>\r\n                        {slots.default()}\r\n                    </Tag>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import item from './item'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(item)","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {ComponentPublicInstance, getCurrentInstance, markRaw, nextTick, reactive, Teleport} from 'vue';\r\nimport {RootController} from \"./registryRootService\";\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport './root.scss'\r\n\r\nexport default designComponent({\r\n    name: 'pl-root',\r\n    props: {\r\n        ...StyleProps,\r\n    },\r\n    setup() {\r\n\r\n        /*全局样式定义*/\r\n        useStyle()\r\n        /*默认插槽*/\r\n        const {slots} = useSlots()\r\n        /*controller代理对象引用*/\r\n        let refs = useRefList<ComponentPublicInstance>()\r\n        /*当前状态*/\r\n        const state = reactive({\r\n            managers: [] as {\r\n                name: string,\r\n                Component: { use: { class: any } },\r\n                RenderComponent: any,\r\n            }[],\r\n        })\r\n\r\n        /**\r\n         * 获取一个Controller实例\r\n         * @author  韦胜健\r\n         * @date    2020/11/5 10:19\r\n         */\r\n        async function getManagerInstance<ManagerComponent extends { use: { class: any } }>(\r\n            name: string,\r\n            managerComponent: ManagerComponent\r\n        ): Promise<ManagerComponent[\"use\"][\"class\"]> {\r\n            if (!!refs) {\r\n                for (let i = 0; i < refs.length; i++) {\r\n                    const managerInstance = refs[i];\r\n                    if (!!managerInstance) {\r\n                        const {name: attrName, Component: attrComponent} = managerInstance.$attrs\r\n                        if (name === attrName && managerComponent === attrComponent) {\r\n                            return managerInstance as any\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            /*当前引用中没有该实例，手动创建一个*/\r\n            state.managers.push({\r\n                name,\r\n                Component: managerComponent,\r\n                RenderComponent: markRaw(managerComponent),\r\n            })\r\n            await nextTick()\r\n            return getManagerInstance(name, managerComponent)\r\n        }\r\n\r\n        const ctx = getCurrentInstance()!\r\n        const refer = {\r\n            rootRef: () => ctx.proxy!.$root!,\r\n            getManagerInstance,\r\n        }\r\n        RootController.initRoot(refer)\r\n\r\n        return {\r\n            refer,\r\n            render: () => [\r\n                slots.default(),\r\n                <Teleport to=\"body\">\r\n                    <div class=\"pl-root-service-container\">\r\n                        {state.managers.map(({name, Component, RenderComponent}, index) => (\r\n                            <RenderComponent key={index} {...{name, Component}} ref={proxy => refs[index] = proxy as any}/>\r\n                        ))}\r\n                    </div>\r\n                </Teleport>\r\n            ]\r\n        }\r\n    },\r\n})","import Root from './root'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Root)","import {StyleStatus} from \"../use/useStyle\";\r\n\r\nexport enum CheckboxStatus {\r\n    uncheck = 'uncheck',\r\n    check = 'check',\r\n    minus = 'minus',\r\n}\r\n\r\nexport const DEFAULT_STATUS = StyleStatus.primary\r\n\r\nexport const STATUS = {\r\n    white: {icon: 'el-icon-info', status: 'white'},\r\n    black: {icon: 'el-icon-info', status: 'black'},\r\n    primary: {icon: 'el-icon-info', status: 'primary'},\r\n    success: {icon: 'el-icon-success', status: 'success'},\r\n    warn: {icon: 'el-icon-warning', status: 'warn'},\r\n    error: {icon: 'el-icon-error', status: 'error'},\r\n    info: {icon: 'el-icon-info', status: 'info'},\r\n} as { [k: string]: { icon: string, status: string } }","import {getCurrentInstance, onBeforeUpdate, reactive} from 'vue'\r\nimport {VNodeChild} from \"../shims\";\r\nimport {getSlotExist} from \"../utils/getSlotExists\";\r\n\r\ntype SlotFunction = ((vnode?: VNodeChild) => VNodeChild)\r\ntype SlotObject = { isExist: () => boolean }\r\n\r\ninterface UseSlots {\r\n    <T extends string>(names?: T[]): {\r\n        slots: { default: SlotFunction } & { [k in T]: SlotFunction }\r\n    }\r\n\r\n    <T extends string>(names?: T[], makeReactive?: boolean): {\r\n        slots: { default: SlotFunction & SlotObject } & { [k in T]: SlotFunction & SlotObject }\r\n    }\r\n}\r\n\r\n/**\r\n * 规范插槽用法\r\n * @author  韦胜健\r\n * @date    2020/11/18 17:48\r\n * @param   names                   插槽名称\r\n * @param   makeReactive            是否需要 isExist具备响应式的能力，以便在computed、watch以及render中判断\r\n */\r\nexport const useSlots: UseSlots = (names?: string[], makeReactive?: boolean) => {\r\n\r\n    const ctx = getCurrentInstance()!\r\n    const slotNames = [...(names || []), 'default']\r\n\r\n    /**\r\n     * 因为ctx.slots,ctx.ctx.$slots都不是响应式属性，无法触发computed以及watch中的变化，这里做一个手动更新处理\r\n     * 每次beforeUpdate打补丁之前，先更新ctxSlots响应式变量，render函数只会触发一次；\r\n     * @author  韦胜健\r\n     * @date    2020/10/19 11:36\r\n     */\r\n    const state = reactive({exist: getSlotExist(null, slotNames, ctx)})\r\n\r\n    /*如果需要响应式，则需要设置 makeReactive，会自动在updated之后更新slots的isExist值*/\r\n    if (makeReactive) {\r\n        onBeforeUpdate(() => {\r\n            getSlotExist(state.exist, slotNames, ctx)\r\n        })\r\n    }\r\n\r\n    /*slots.***是一个函数，参数是插槽后备内容。当插槽不存在时，渲染后备内容，否则渲染插槽内容*/\r\n    let slots = slotNames.reduce((prev: any, slotName: string) => {\r\n        prev[slotName] = Object.assign((vnode: VNodeChild) => {\r\n            const slot = ctx.slots[slotName]\r\n            return !!slot ? slot() : vnode\r\n        }, {\r\n            isExist() {\r\n                return state.exist[slotName]\r\n            }\r\n        })\r\n        return prev\r\n    }, {} as any)\r\n\r\n    return {\r\n        slots,\r\n    }\r\n}","import {App} from 'vue'\r\nimport {ComponentPlugin} from \"../shims\";\r\nimport {installPlugin} from \"./installPlugin\";\r\nimport Root from '../packages/root'\r\n\r\ninterface InstallComponent {\r\n    name: string\r\n}\r\n\r\nexport function createComponentPlugin<Component extends InstallComponent,\r\n    Expose extends Record<string, any>,\r\n    ExposeComponents extends { [k: string]: InstallComponent },\r\n    >(\r\n    component: Component,                               // 导出的主组件\r\n    option?: {\r\n        exposeComponents?: ExposeComponents,            // 额外需要安装的组件（一并导出挂载的component组件上）\r\n        plugins?: ComponentPlugin[],                    // 依赖的其他插件\r\n        expose?: Expose                                 // 需要导出的额外内容\r\n    },\r\n) {\r\n    const {exposeComponents, plugins, expose} = option || {}\r\n    const wrapExposeComponents: { [k in keyof ExposeComponents]: ExposeComponents[k] & ComponentPlugin } = !exposeComponents ?\r\n        {} :\r\n        Object.keys(exposeComponents || {})\r\n            .reduce((prev, next) => {\r\n                prev[next] = createComponentPlugin(exposeComponents[next])\r\n                return prev\r\n            }, {} as any)\r\n\r\n    return Object.assign(component, {\r\n        install(app: App) {\r\n            installPlugin(app, Root)\r\n            const componentList = [component] as InstallComponent[]\r\n            if (!!exposeComponents) {componentList.push(...Object.values(exposeComponents))}\r\n            componentList.forEach(comp => app.component(comp.name, comp))\r\n            !!plugins && (installPlugin(app, plugins))\r\n        },\r\n        ...wrapExposeComponents,\r\n        ...expose,\r\n    })\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {VNodeChild} from \"../../shims\";\r\n\r\n/**\r\n * 创建一个默认的root service组件\r\n * 这个组件最后返回的refer，必须含有isShow、isOpen、service三个属性。\r\n * isShow：当前是否已经显示，因为存在过渡动画，所以如果值为true，但是此时在页面可能没有完全显示。值为false，可能在页面上没有完全隐藏；\r\n * isOpen：当前是否已经在页面上完全打开或者消失。值为true，表示当前已经完全显示，但是此时isShow可能为false。因为隐藏过渡动画没有结束的时候就是这种情况、同理isOpen为true的时候也是这样。\r\n * 只有当isShow以及isOpen都是false的情况下，这个service才是处于闲置可以服用的状态。\r\n *\r\n * @author  韦胜健\r\n * @date    2020/11/26 9:24\r\n */\r\nexport function createDefaultService<Option extends object, Refer extends {\r\n    isShow: { value: boolean },\r\n    isOpen: { value: boolean },\r\n    service: (optoin: Option) => void\r\n}>\r\n(\r\n    {\r\n        name,\r\n        setup,\r\n    }: {\r\n        name: string,\r\n        setup: (option: Option) => {\r\n            refer: Refer,\r\n            render: () => VNodeChild,\r\n        },\r\n    }\r\n) {\r\n    return designComponent({\r\n        name: `pl-${name}-service`,\r\n        props: {\r\n            option: {type: Object, required: true}\r\n        },\r\n        setup({props}) {\r\n            const option = props.option as Option\r\n            const {render, refer} = setup(option)\r\n            refer.service(option)\r\n            return {\r\n                render, refer\r\n            }\r\n        },\r\n    })\r\n}","export const enum FormLabelAlign {\r\n    left = 'left',\r\n    center = 'center',\r\n    right = 'right',\r\n}\r\n\r\nexport const enum FormContentAlign {\r\n    'flex-start' = 'flex-start',\r\n    'flex-end' = 'flex-end',\r\n    'center' = 'center',\r\n    'space-around' = 'space-around',\r\n    'space-between' = 'space-between',\r\n    'space-evenly' = 'space-evenly',\r\n}\r\n\r\nexport const enum FormValidateMode {\r\n    form = 'form',\r\n    table = 'table',\r\n}","import './form.scss'\r\nimport {computed, ComputedRef, onMounted, PropType, reactive, watch} from 'vue'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {FormContentAlign, FormLabelAlign, FormValidateMode} from \"./form.utils\";\r\nimport {useNumber} from \"../../use/useNumber\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport FormItem from './form-item'\r\nimport {FormAssociateFields, formatFormRules, FormComponentRules, FormValidate, FormValidateResultMap, FormValidateTrigger, FormValidateUtils} from \"./form.validate\";\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\nimport {$$notice} from \"../notice-service\";\r\n\r\nconst Form = designComponent({\r\n    name: 'pl-form',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n        disabledFields: {type: Object as PropType<Record<string, boolean>>},// 禁用的字段\r\n        readonlyFields: {type: Object as PropType<Record<string, boolean>>},// 只读的字段\r\n\r\n        modelValue: {type: Object},                                         // model绑定表单对象\r\n        rules: {type: Object as PropType<FormComponentRules>},              // 表单验证规则\r\n        validateResult: {type: Object},                                     // 校验结果信息\r\n        validateMode: {type: String as PropType<FormValidateMode>, default: FormValidateMode.form},// 校验模式\r\n        associateFields: {type: Object as PropType<FormAssociateFields>},   // 校验关联字段，一个对象，key为字段名，value为字段字符串或者字符串数组。当key变化时，会自动校验value中所列的字段\r\n\r\n        hideRequiredAsterisk: {type: Boolean, default: null},               // 是否隐藏文本旁边的红色必填星号\r\n        hideValidateMessage: {type: Boolean, default: null},                // 是否隐藏校验失败的信息\r\n        validateOnRulesChange: {type: Boolean, default: null},              // 是否当rules属性改变之后立即触发一次验证\r\n\r\n        column: {type: [String, Number], default: 1},                       // 多列表单的列数\r\n        labelWidth: {type: [String, Number]},                               // formItem 文本宽度\r\n        contentWidth: {type: [String, Number]},                             // formItem 内容宽度\r\n\r\n        labelAlign: {type: String as PropType<FormLabelAlign>},             // 文本对其方式\r\n        contentAlign: {type: String as PropType<FormContentAlign>, default: FormLabelAlign.left},// content 对齐方式\r\n        width: {type: [String, Number], default: '100%'},                   // 表单宽度\r\n        centerWhenSingleColumn: {type: Boolean},                            // 单列的时候会使得表单内容居中，表单文本标题不计宽度，设置该属性为true则使得文本宽度参与计算居中\r\n        colon: {type: Boolean, default: true},                              // label的冒号\r\n        columnGutter: {type: [Number, String], default: 16},                // 列之间的间距\r\n        inline: {type: Boolean},                                            // 行内表单\r\n    },\r\n    emits: {\r\n        /*字段值变化事件*/\r\n        onFieldValueChange: (field: string, newVal: any, oldVal: any) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        /*收集的子组件*/\r\n        const items = FormCollector.parent()\r\n\r\n        useStyle();\r\n        useEdit({adjust: data => {data.loading = false}});\r\n        const {numberState} = useNumber(props, ['labelWidth', 'contentWidth', 'column', 'width', 'columnGutter'])\r\n\r\n        /*---------------------------------------compute-------------------------------------------*/\r\n\r\n        /*form-item中最大的label节点宽度*/\r\n        const maxLabelWidth = computed(() => items.reduce((prev: number, next) => Math.max(next.state.labelWidth, prev), 0)) as ComputedRef<number>\r\n\r\n        /*form-item所需要的对齐方式信息*/\r\n        const align = computed(() => {\r\n            return {\r\n                label: props.labelAlign || (numberState.column === 1 ? FormLabelAlign.right : FormLabelAlign.left),\r\n                content: props.contentAlign,\r\n            }\r\n        })\r\n\r\n        /*form-item所需要的宽度信息*/\r\n        const width = computed(() => {\r\n            /*\r\n            *  如果没有设置contentWidth\r\n            *  如果是单列，默认contentWidth是400\r\n            *  多了则是220\r\n            */\r\n            const content = !!numberState.contentWidth ? numberState.contentWidth : numberState.column === 1 ? 400 : 220\r\n            const label = numberState.labelWidth || maxLabelWidth.value\r\n\r\n            if (!!label) {\r\n                return {\r\n                    col: label + content,\r\n                    label,\r\n                    content,\r\n                }\r\n            } else {\r\n                return {\r\n                    content,\r\n                }\r\n            }\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-form',\r\n            `pl-form-column-${numberState.column}`,\r\n            {\r\n                'pl-form-inline': props.inline,\r\n            }\r\n        ])\r\n\r\n        /*设置form宽度*/\r\n        const styles = useStyles((style) => {\r\n            if (props.inline) {\r\n                return style\r\n            }\r\n            style.width = unit(props.width)\r\n        })\r\n\r\n        /*body节点宽度。如果是单列，则左偏移 label/2 个像素，确保content在屏幕中间*/\r\n        const bodyStyles = useStyles(style => {\r\n            if (props.inline) {\r\n                return style\r\n            }\r\n            const {label, col} = width.value\r\n            if (!label) {return}\r\n            const {column, columnGutter} = numberState\r\n            style.width = unit((col! + columnGutter) * column)\r\n            style.left = `${(!props.centerWhenSingleColumn && column === 1) ? -label! / 2 : 0}px`\r\n        })\r\n        /*---------------------------------------validate-------------------------------------------*/\r\n\r\n        const formValidate = computed(() => formatFormRules(props.rules, items.map(item => item.formItemComponentRules.value))) as ComputedRef<FormValidate>\r\n\r\n        const loading = (() => {\r\n            let time: null | number;\r\n            return {\r\n                show: () => {\r\n                    time = setTimeout(() => {\r\n                        childState.loading = true\r\n                        time = null\r\n                    }, 500)\r\n                },\r\n                hide: () => {\r\n                    if (!!time) {\r\n                        clearTimeout(time)\r\n                    } else {\r\n                        childState.loading = false\r\n                    }\r\n                },\r\n            }\r\n        })();\r\n\r\n        const validateMethods = {\r\n            validate: async (config?: { autoLoading?: boolean, autoAlert?: boolean, }) => {\r\n                config = config || {}\r\n                if (config.autoLoading != false) {\r\n                    loading.show()\r\n                }\r\n                const {validateMessage, validateResultMap, validateResult} = await formValidate.value.methods.validate(props.modelValue!)\r\n                loading.hide()\r\n\r\n                childState.validateResultMap = validateResultMap\r\n                if (!!validateMessage) {\r\n                    if (config.autoAlert !== false) {\r\n                        $$notice.warn(validateMessage)\r\n                    }\r\n                    throw {\r\n                        validate: validateResult,\r\n                        message: validateMessage,\r\n                    }\r\n                } else {\r\n                    return null\r\n                }\r\n            },\r\n            clearValidate: () => {\r\n                childState.validateResultMap = {}\r\n            },\r\n            showError: (error: any) => {\r\n                if (!!error.message) {\r\n                    $$notice.warn(error.message)\r\n                } else {\r\n                    $$notice.warn(String(error))\r\n                }\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------end-------------------------------------------*/\r\n\r\n        onMounted(() => {\r\n            // console.log('formValidate.value', formValidate.value)\r\n        })\r\n\r\n        const childState = reactive({\r\n            align,\r\n            width,\r\n            formValidate,\r\n            validateResultMap: {} as FormValidateResultMap,\r\n            loading: false,\r\n        })\r\n\r\n        const freezeState = {\r\n            oldFormData: {...(props.modelValue || {})},\r\n        }\r\n\r\n        const validateHandler = {\r\n            onEditChange: async (field?: string | string[]) => {\r\n                if (props.validateMode === FormValidateMode.form) {\r\n                    return\r\n                }\r\n                const fields = FormValidateUtils.getListValue(field)\r\n                if (!fields) {return}\r\n                await Promise.all(fields.map(f => formValidate.value.methods.validateField({\r\n                    field: f,\r\n                    trigger: FormValidateTrigger.change,\r\n                    formValidateResultMap: childState.validateResultMap,\r\n                    formData: props.modelValue || {},\r\n                    associateFields: props.associateFields,\r\n                })))\r\n            },\r\n            onBlurChange: async (field?: string | string[]) => {\r\n                const fields = FormValidateUtils.getListValue(field)\r\n                if (!fields) {return}\r\n                await Promise.all(fields.map(f => formValidate.value.methods.validateField({\r\n                    field: f,\r\n                    trigger: FormValidateTrigger.blur,\r\n                    formValidateResultMap: childState.validateResultMap,\r\n                    formData: props.modelValue || {},\r\n                    associateFields: props.associateFields,\r\n                })))\r\n            },\r\n            onFieldChange: async (field: string) => {\r\n                await formValidate.value.methods.validateField({\r\n                    field,\r\n                    trigger: FormValidateTrigger.change,\r\n                    formValidateResultMap: childState.validateResultMap,\r\n                    formData: props.modelValue || {},\r\n                    associateFields: props.associateFields,\r\n                })\r\n            },\r\n            onFormDataChange: debounce((val: any) => {\r\n                const newFormData = val || {}\r\n                const oldFormData = freezeState.oldFormData || {}\r\n                const fields = Object.keys({...newFormData, ...oldFormData})\r\n\r\n                fields.forEach(field => {\r\n                    let newVal = newFormData[field]\r\n                    let oldVal = oldFormData[field]\r\n                    if (newVal !== oldVal) {\r\n                        emit.onFieldValueChange(field, newVal, oldVal)\r\n                        validateHandler.onFieldChange(field)\r\n                    }\r\n                })\r\n                freezeState.oldFormData = {...val || {}}\r\n            }, 150, false)\r\n        }\r\n\r\n        if (props.validateMode === FormValidateMode.form) {\r\n            watch(() => props.modelValue, validateHandler.onFormDataChange, {deep: true})\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n                childState,\r\n                numberState,\r\n                validateHandler,\r\n                ...validateMethods,\r\n            },\r\n            render: () => {\r\n                return (<div class={classes.value} style={styles.value} v-loading={childState.loading || !!props.loading}>\r\n                    <div class=\"pl-form-body\" style={bodyStyles.value}>\r\n                        {slots.default()}\r\n                    </div>\r\n                </div>)\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport default Form\r\n\r\nexport const FormCollector = useCollect(() => ({\r\n    parent: Form,\r\n    child: FormItem,\r\n}))","export function createCounter(prefixString?: string) {\r\n    let count = 0\r\n    return () => (!!prefixString ? `${prefixString}_` : '') + count++\r\n}","import {PlainLoading} from 'plain-loading/src/index'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {computed, nextTick, watch} from 'vue';\r\nimport './loading.scss'\r\nimport {delay} from \"plain-utils/utils/delay\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-loading',\r\n    props: {\r\n        type: {type: String, default: 'alpha'},\r\n        status: {type: String, default: null},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLElement,\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-loading',\r\n            !!props.status ? `pl-loading-status-${props.status}` : null,\r\n        ])\r\n\r\n        watch(() => props.type, async val => {\r\n            if (!val) {\r\n                return refs.el.innerHTML = ''\r\n            }\r\n            await delay(23)\r\n            if (!(PlainLoading as any)[val]) {\r\n                throw new Error(`pl-loading: un recognise type:${val}`)\r\n            }\r\n            !!refs.el && (refs.el.innerHTML = (PlainLoading as any)[val]().outerHTML)\r\n        }, {immediate: true})\r\n\r\n        return {\r\n            render: () => {\r\n                return <i class={classes.value} ref=\"el\"/>\r\n            }\r\n        }\r\n    },\r\n})","import Loading from './loading'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Loading)","/**\r\n * 基础视图类型\r\n * @author  韦胜健\r\n * @date    2020/12/7 20:34\r\n */\r\nimport {PlainDate, PlainDateType} from \"../../utils/PlainDate\";\r\nimport {ExtractPropTypes} from 'vue';\r\nimport {VNodeChild} from \"../../shims\";\r\n\r\nexport const enum DateView {\r\n    year = 'year',\r\n    month = 'month',\r\n    date = 'date',\r\n    time = 'time',\r\n}\r\n\r\nexport const enum SlideTransitionDirection {\r\n    next = 'next',\r\n    prev = 'prev'\r\n}\r\n\r\nexport const DatePublicProps = {\r\n    modelValue: {type: String},\r\n    start: {type: String},\r\n    end: {type: String},\r\n\r\n    displayFormat: {type: String},\r\n    valueFormat: {type: String},\r\n    max: {type: String},\r\n    min: {type: String},\r\n    range: {type: Boolean},\r\n\r\n    direction: {type: String, default: 'horizontal'},                                   // 根节点在 pl-transition-slide 动画下的动画方向，是horizontal还是vertical\r\n    view: {type: String, default: DateView.month},                                      // 当前视图\r\n    selectDate: {type: PlainDate},                                                      // 当前面板的年月日期对象\r\n\r\n    /* base panel date 专用*/\r\n    datetime: {type: Boolean},                                                          // 是否为日期时间视图\r\n    firstWeekDay: {type: Number, default: 1},                                           // 一周的第一个是星期几，0是星期天，1是星期一\r\n    defaultTime: {type: String},                                                        // 默认时间，如果没有初始值，选择日期的时候时间会取这里的默认时间\r\n    /* date range 专用*/\r\n    defaultStartTime: {type: String},                                                   // 日期范围选择起始选择框日期面板，默认时间，如果没有初始值，选择日期的时候时间会取这里的默认时间\r\n    defaultEndTime: {type: String},                                                     // 日期范围选择截止选择框日期面板，默认时间，如果没有初始值，选择日期的时候时间会取这里的默认时间\r\n}\r\n\r\n/**\r\n * 日期公共属性解析后的类型\r\n * @author  韦胜健\r\n * @date    2020/12/7 20:37\r\n */\r\nexport type DatePublicPropsType = ExtractPropTypes<typeof DatePublicProps>;\r\n\r\nexport const DefaultDateFormatString = {\r\n    year: 'YYYY',\r\n    month: 'YYYY-MM',\r\n    date: 'YYYY-MM-DD',\r\n    datetime: 'YYYY-MM-DD HH:mm:ss',\r\n    week: 'YYYY-MM-DD',\r\n    dates: 'YYYY-MM-DD',\r\n}\r\n\r\nexport const DatePublicEmits = {\r\n    onUpdateModelValue: (val?: string, rangeType?: DateEmitRangeType) => true,\r\n    onUpdateStart: (val?: string) => true,\r\n    onUpdateEnd: (val?: string) => true,\r\n    onUpdateView: (view: DateView) => true,\r\n}\r\n\r\n/*DateBasePanelItemData*/\r\nexport interface Dbpid {\r\n    label: string | number\r\n    active: boolean\r\n    now: boolean\r\n    disabled: boolean\r\n    hoverStart: boolean\r\n    hover: boolean\r\n    hoverEnd: boolean\r\n    clickable: boolean\r\n    ipd: PlainDateType\r\n\r\n    range: boolean\r\n\r\n    [key: string]: any\r\n}\r\n\r\nexport const enum DateEmitRangeType {\r\n    start = 'start',\r\n    end = 'end',\r\n}\r\n\r\nexport function DatePanelWrapper(slots: {\r\n    left?: VNodeChild,\r\n    center: VNodeChild,\r\n    right?: VNodeChild,\r\n    content: VNodeChild,\r\n}) {\r\n    return (\r\n        <div class=\"pl-date-base-panel\">\r\n            <div class=\"pl-date-base-panel-header\">\r\n                <div>{slots.left}</div>\r\n                <div>{slots.center}</div>\r\n                <div>{slots.right}</div>\r\n            </div>\r\n            <div class=\"pl-date-base-panel-body\">\r\n                {slots.content}\r\n            </div>\r\n        </div>\r\n    ) as any\r\n}\r\n\r\nexport function DatePanelItemWrapper(\r\n    {\r\n        Node,\r\n        item,\r\n        onClick,\r\n        onMouseenter,\r\n    }: {\r\n        Node: any,                              // 容器节点\r\n        item: Dbpid,                            // item 数据\r\n        onClick: (item: Dbpid) => void,         // 点击item事件处理句柄\r\n        onMouseenter: (item: Dbpid) => void,    // 进入item事件处理句柄\r\n    }) {\r\n\r\n    let listener = {} as any;\r\n    item.clickable && (listener.onClick = () => onClick(item));\r\n    !item.disabled && (listener.onMouseenter = () => onMouseenter(item));\r\n\r\n    return (\r\n        <Node\r\n            {...listener}\r\n            class={[\r\n                'pl-date-base-panel-item',\r\n                {\r\n                    'pl-date-base-panel-item-active': item.active,\r\n                    'pl-date-base-panel-item-now': item.now,\r\n                    'pl-date-base-panel-item-disabled': item.disabled,\r\n                    'pl-date-base-panel-item-hover-start': item.hoverStart,\r\n                    'pl-date-base-panel-item-hover': item.hover,\r\n                    'pl-date-base-panel-item-hover-end': item.hoverEnd,\r\n                }\r\n            ]}>\r\n            <div>\r\n                <span>{item.label}</span>\r\n            </div>\r\n        </Node>\r\n    )\r\n\r\n}\r\n\r\nexport const DateViewSeq = {\r\n    year: 1,\r\n    month: 2,\r\n    date: 3,\r\n    time: 4,\r\n}\r\n\r\nexport const WeekUtils = {\r\n    /**\r\n     * 获取特定日期，在一周中的最后一天\r\n     * @author  韦胜健\r\n     * @date    2020/12/10 9:42\r\n     */\r\n    getLastPdOfWeek: (pd: PlainDateType, firstWeekDay?: number) => {\r\n        if (pd.isNull) {\r\n            return null\r\n        }\r\n        pd = pd.copy()\r\n        firstWeekDay = firstWeekDay == null ? 1 : firstWeekDay\r\n        const weekDayDuration = pd.day! - firstWeekDay\r\n        let offsetDay = weekDayDuration === 0 ? 0 : weekDayDuration > 0 ? weekDayDuration : 7 + weekDayDuration\r\n        pd.setMonthDate(pd.month!, pd.date! - offsetDay + 6)\r\n        return pd\r\n    },\r\n    /**\r\n     * 获取日期在第几周\r\n     * @author  韦胜健\r\n     * @date    2020/12/10 10:19\r\n     */\r\n    getWeekNumber: (value?: string, config?: { valueFormat?: string, firstWeekDay?: number }) => {\r\n        let ret = {\r\n            year: null as null | number,\r\n            week: null as null | number,\r\n        }\r\n        if (!value) {return ret}\r\n\r\n        config = config || {}\r\n        const valueFormat = config.valueFormat || DefaultDateFormatString.date\r\n        const firstWeekDay = config.firstWeekDay == null ? 1 : config.firstWeekDay\r\n        let vpd = new PlainDate(value, valueFormat, valueFormat)\r\n        if (vpd.isNull) {return ret}\r\n\r\n        const valueLastWeekPd = WeekUtils.getLastPdOfWeek(vpd, firstWeekDay)!\r\n        vpd = valueLastWeekPd.copy()\r\n        vpd.setYMD(valueLastWeekPd.Y!, 0, 1)\r\n        const yearFirstDayLastWeekPd = WeekUtils.getLastPdOfWeek(vpd, firstWeekDay)\r\n\r\n        if (!!yearFirstDayLastWeekPd && !yearFirstDayLastWeekPd.isNull && !!valueLastWeekPd && !valueLastWeekPd.isNull) {\r\n            const num = (valueLastWeekPd.time - yearFirstDayLastWeekPd.time) / (24 * 60 * 60 * 1000 * 7)\r\n            ret.year = yearFirstDayLastWeekPd.year\r\n            ret.week = num + 1\r\n        }\r\n\r\n        return ret\r\n    },\r\n    /**\r\n     * 获取周字符串\r\n     * @author  韦胜健\r\n     * @date    2020/12/10 17:03\r\n     */\r\n    getWeekZhcnString: (value?: string, config?: { valueFormat?: string, firstWeekDay?: number }) => {\r\n        const {year, week} = WeekUtils.getWeekNumber(value, config)\r\n        if (!!year) {\r\n            return `${year}年 第${week}周`\r\n        } else {\r\n            return null\r\n        }\r\n    },\r\n}","import {ref, getCurrentInstance, provide, inject, onMounted, onBeforeUnmount, markRaw, Ref} from 'vue';\r\nimport {createCounter} from \"../utils/createCounter\";\r\n\r\ntype UseCollectComponent = { name?: string, use: { class: any } }\r\ntype UseCollectSort = (() => HTMLElement) | number\r\n\r\nconst counter = createCounter('use_collector')\r\n\r\nfunction useCollectInParentInner() {\r\n\r\n    const indexMap = new WeakMap<any, number>()\r\n\r\n    const items = ref([] as any[])\r\n    const utils = {\r\n        addItem: (item: any, sort?: UseCollectSort) => {\r\n            if (!!sort) {\r\n                if (typeof sort !== \"number\") {\r\n                    const el = sort()\r\n                    sort = Array\r\n                        .from(el!.parentNode!.childNodes)\r\n                        .filter((item: any) => item.nodeName !== '#comment' && (!item.style || item.style.display !== 'none'))\r\n                        .indexOf(el)\r\n                    // console.log(el, sort)\r\n                }\r\n                indexMap.set(item, sort as number)\r\n\r\n                items.value.splice(\r\n                    0,\r\n                    items.value.length,\r\n                    ...[...items.value, item]\r\n                        .sort((a, b) => indexMap.get(a)! - indexMap.get(b)!))\r\n            } else {\r\n                items.value.push(item)\r\n            }\r\n        },\r\n        removeItem: (item: any) => {\r\n            const index = items.value.indexOf(item)\r\n            if (index > -1) items.value.splice(index, 1)\r\n        }\r\n    }\r\n    return {\r\n        parent: {} as any,  // 类型提示，实际上无用处\r\n        items,\r\n        utils,\r\n    }\r\n}\r\n\r\nexport function useCollect<Parent extends UseCollectComponent, Child extends UseCollectComponent>\r\n(config: () => {\r\n    parent: Parent,\r\n    child: Child,\r\n}) {\r\n\r\n    const {parent} = config()\r\n    const parentName = parent.name || counter()\r\n    const provideString = `@@Collector_${parentName}`\r\n\r\n    return {\r\n        parent: (): (Child['use']['class'])[] => {\r\n            const ctx = getCurrentInstance()!\r\n            const {items, utils} = useCollectInParentInner()\r\n            const data: ReturnType<typeof useCollectInParentInner> = {\r\n                items,\r\n                utils,\r\n                parent: ctx.proxy,\r\n            }\r\n            provide(provideString, data)\r\n            return items.value\r\n        },\r\n        child: (\r\n            {\r\n                injectDefaultValue,\r\n                sort,\r\n            }: {\r\n                injectDefaultValue?: any,\r\n                sort?: UseCollectSort,\r\n            } = {}): Parent['use']['class'] => {\r\n            const data = inject(provideString, injectDefaultValue) as ReturnType<typeof useCollectInParentInner>\r\n            if (!!data) {\r\n                const ctx = getCurrentInstance()!\r\n                const child = markRaw(ctx.proxy as any)\r\n                onMounted(() => data.utils.addItem(child, sort))\r\n                onBeforeUnmount(() => data.utils.removeItem(child))\r\n                return data.parent\r\n            } else {\r\n                return null\r\n            }\r\n        }\r\n    }\r\n}","/**\r\n * 创建一个报错对象\r\n * @author  韦胜健\r\n * @date    2020/10/15 10:33\r\n */\r\nexport function createError(tag: string) {\r\n    return (msg: string, isLog?: boolean) => {\r\n        const message = `${tag}:${msg}`\r\n        const log = isLog == null ? true : isLog\r\n        if (log) {\r\n            console.error(message)\r\n        } else {\r\n            throw new Error(message)\r\n        }\r\n    }\r\n}","import {ref, onBeforeUpdate, Ref} from 'vue';\r\n\r\ninterface UseRefList {\r\n    <T = any>(reactive: true): Ref<T[]>\r\n\r\n    <T = any>(): T[]\r\n}\r\n\r\nexport const useRefList: UseRefList = <T>(reactive?: boolean) => {\r\n    if (reactive) {\r\n        const refs = ref([] as T[])\r\n        onBeforeUpdate(() => refs.value = [])\r\n        return refs\r\n    } else {\r\n        const refs = [] as any\r\n        onBeforeUpdate(() => refs.splice(0, refs.length))\r\n        return refs\r\n    }\r\n}\r\n","interface Defer {\r\n    (): {\r\n        resolve: () => void,\r\n        reject: () => void,\r\n        promise: Promise<void>\r\n    },\r\n\r\n    <T>(): {\r\n        resolve: (val: T) => void,\r\n        reject: () => void,\r\n        promise: Promise<T>\r\n    },\r\n}\r\n\r\nexport const defer: Defer = () => {\r\n    const dfd = {} as any\r\n    dfd.promise = new Promise((resolve, reject) => {\r\n        dfd.resolve = resolve as any\r\n        dfd.reject = reject\r\n    })\r\n    return dfd\r\n}","import {reactive, watch} from 'vue'\r\nimport {toArray} from \"../utils/toArray\";\r\n\r\nexport enum FormatPropType {\r\n    PROMISE = 'PROMISE',\r\n    FUNCTION = 'FUNCTION',\r\n    NUMBER = 'NUMBER',\r\n}\r\n\r\n/**\r\n * ignorePromise:第一次获取值的时候，忽略Promise格式化，而是通过 watch immediate 来实现赋值\r\n * @author  韦胜健\r\n * @date    2020/10/30 15:29\r\n */\r\nasync function usePropsFormatter(state: any, key: string, val: any, types: FormatPropType | FormatPropType[]): Promise<void> {\r\n\r\n    if (val == null) {\r\n        state[key] = val\r\n        return\r\n    }\r\n\r\n    const formatTypes = toArray(types)\r\n\r\n    if (formatTypes.indexOf(FormatPropType.PROMISE) > -1 && !!val.then && typeof val.then === 'function') {\r\n        val = await val\r\n    }\r\n\r\n    if (formatTypes.indexOf(FormatPropType.FUNCTION) > -1 && typeof val === \"function\") {\r\n        val = val()\r\n    }\r\n\r\n    if (formatTypes.indexOf(FormatPropType.NUMBER) > -1 && typeof val === \"string\") {\r\n        if (/^[\\d]+$/.test(val)) {\r\n            val = Number(val)\r\n        } else {\r\n            if (val.lastIndexOf('px') === val.length - 2) {\r\n                val = Number(val.replace('px', ''))\r\n            }\r\n        }\r\n    }\r\n\r\n    state[key] = val\r\n}\r\n\r\nfunction usePropsInner<Props extends { [k: string]: any },\r\n    Config extends Partial<{ [k in keyof Props]: FormatPropType | FormatPropType[] }>>\r\n(\r\n    props: Props,\r\n    config: Config\r\n) {\r\n\r\n    const configKeys = Object.keys(config)\r\n\r\n    const formatConfig: { [k in keyof Props]: FormatPropType[] } = configKeys.reduce((prev, key) => {\r\n        prev[key] = toArray(config[key])\r\n        return prev\r\n    }, {} as any)\r\n\r\n    const state = reactive((() =>\r\n        configKeys.reduce((prev: any, configKey) => {\r\n            prev[configKey] = null\r\n            const formatTypes = formatConfig[configKey]\r\n            /**\r\n             * 如果是Promise，则跳过处理，在watch immediate中初始化\r\n             * @author  韦胜健\r\n             * @date    2020/11/3 20:10\r\n             */\r\n            if (formatTypes.indexOf(FormatPropType.PROMISE) === -1) {\r\n                usePropsFormatter(prev, configKey, props[configKey], formatTypes)\r\n            }\r\n            return prev\r\n        }, {}) as { [k in Exclude<keyof Props, Exclude<keyof Props, keyof Config>>]: Props[k] })\r\n    ())\r\n\r\n    configKeys.forEach(configKey => {\r\n        watch(() => props[configKey], val => {\r\n            // @ts-ignore\r\n            usePropsFormatter(state, configKey, val, config[configKey])\r\n        }, {immediate: formatConfig[configKey].indexOf(FormatPropType.PROMISE) > -1})\r\n    })\r\n\r\n    return {\r\n        propsState: state,\r\n    }\r\n}\r\n\r\nexport const useProps = Object.assign(usePropsInner, FormatPropType)","import {SimpleFunction} from \"../shims\";\r\n\r\ntype Listener = (SimpleFunction & { fn?: any })\r\ntype ListenName = string | symbol\r\nexport type PlainEvent = ReturnType<typeof createPlainEvent>\r\n\r\nexport function createPlainEvent() {\r\n\r\n    /**\r\n     * 第一次调用getEvents的时候才创建map对象\r\n     * @author  韦胜健\r\n     * @date    2020/10/17 11:27\r\n     */\r\n    const getListenMap = (() => {\r\n        let events: Map<ListenName, Listener[]>;\r\n        return () => {\r\n            if (!events) {\r\n                events = new Map<ListenName, Listener[]>()\r\n            }\r\n            return events\r\n        }\r\n    })()\r\n\r\n    let hasListener = false\r\n\r\n    const event = {\r\n        on: (listenName: ListenName, fn: SimpleFunction) => {\r\n\r\n            hasListener = true\r\n\r\n            const listenMap = getListenMap()\r\n            const map = listenMap.get(listenName)\r\n            if (!!map) {\r\n                map.push(fn)\r\n            } else {\r\n                listenMap.set(listenName, [fn])\r\n            }\r\n            return () => event.off(listenName, fn)\r\n        },\r\n        once: (listenName: ListenName, fn: SimpleFunction) => {\r\n\r\n            hasListener = true\r\n\r\n            const on: Listener = (...args: any[]) => {\r\n                event.off(listenName, fn)\r\n                fn(...args)\r\n            }\r\n            on.fn = fn\r\n            event.on(listenName, on)\r\n            return () => event.off(listenName, on)\r\n        },\r\n        off: (listenName: ListenName, fn?: SimpleFunction) => {\r\n            const listenMap = getListenMap()\r\n\r\n            const listeners = listenMap.get(listenName)\r\n            if (!listeners) {\r\n                return;\r\n            }\r\n\r\n            /*移除listenName的所有监听器*/\r\n            if (!fn) {\r\n                listenMap.set(listenName, [])\r\n                return\r\n            }\r\n\r\n            for (let i = 0; i < listeners.length; i++) {\r\n                const listener = listeners[i];\r\n                if (fn === listener || (!!listener.fn && fn === listener.fn)) {\r\n                    listeners.splice(i, 1)\r\n                    break\r\n                }\r\n            }\r\n        },\r\n        emit: (listenName: ListenName, ...args: any[]) => {\r\n            const listeners = getListenMap().get(listenName)\r\n            if (!!listeners) {\r\n                listeners.forEach(listener => listener(...args))\r\n            }\r\n        },\r\n        clear: () => {\r\n            if (hasListener) {\r\n                getListenMap().clear()\r\n            }\r\n        }\r\n    }\r\n\r\n    return event\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {MessageServiceFormatOption} from \"./index\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {PropType} from 'vue';\r\nimport Icon from '../icon'\r\nimport {createEventListener} from \"../../utils/createEventListener\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-message',\r\n    props: {\r\n        option: {type: Object as PropType<MessageServiceFormatOption>, required: true}\r\n    },\r\n    emits: {\r\n        onClose: () => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const classes = useClass(() => [\r\n            'pl-message',\r\n            `pl-message-status-${props.option.status}`\r\n        ])\r\n        const styles = {zIndex: nextIndex()}\r\n\r\n        const close = () => {\r\n            emit.onClose()\r\n            !!props.option.onClose && props.option.onClose()\r\n        }\r\n\r\n        props.option.close = close\r\n\r\n        const handler = {\r\n            onClick: (e: MouseEvent) => {\r\n                !!props.option.onClick && props.option.onClick(e)\r\n            },\r\n            onClickCloseIcon: (e: MouseEvent) => {\r\n                close()\r\n            },\r\n            onMouseenter: () => {\r\n                if (!!closeTimer) {\r\n                    clearTimeout(closeTimer)\r\n                }\r\n            },\r\n            onMouseleave: () => {\r\n                !!props.option.time && (closeTimer = setTimeout(close, props.option.time))\r\n            }\r\n        }\r\n\r\n        let closeTimer: number | null = null\r\n        !!props.option.time && (closeTimer = setTimeout(close, props.option.time))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}\r\n                     style={styles}\r\n                     onMouseenter={handler.onMouseenter}\r\n                     onMouseleave={handler.onMouseleave}\r\n                     onClick={handler.onClick}>\r\n                    {!!props.option.icon && <pl-icon icon={props.option.icon}/>}\r\n                    <div class=\"pl-message-content\">{!!props.option.render ? props.option.render() : props.option.message}</div>\r\n                    <Icon icon=\"el-icon-close\" class=\"pl-message-close\" {...createEventListener({onClick: handler.onClickCloseIcon})}/>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n    ,\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {MessageServiceFormatOption} from \"./index\";\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport {nextTick, reactive} from 'vue';\r\nimport Message from \"./message\";\r\nimport List from '../list'\r\nimport Item from '../item'\r\n\r\nexport default designComponent({\r\n    name: 'pl-message-container',\r\n    props: {\r\n        horizontal: {type: String, required: true},\r\n        vertical: {type: String, required: true},\r\n        duration: {type: String, default: \"30px\"},\r\n    },\r\n    setup({props}) {\r\n        const classes = useClass(() => [\r\n            'pl-message-container',\r\n            `pl-message-container-${props.horizontal}-${props.vertical}`\r\n        ])\r\n        const state = reactive({\r\n            options: [] as MessageServiceFormatOption[]\r\n        })\r\n        const refs = useRefList<{ option: MessageServiceFormatOption }>()\r\n        const styles = {padding: props.duration}\r\n\r\n        const utils = {\r\n            closeMessage: (i: number) => {\r\n                state.options.splice(i, 1)\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n                getMessage: async (option: MessageServiceFormatOption) => {\r\n                    state.options.push(option)\r\n                    await nextTick()\r\n                    const messages = refs.filter(Boolean)\r\n                    for (let i = 0; i < messages.length; i++) {\r\n                        const message = messages[i];\r\n                        if (message.option === option) {\r\n                            return message\r\n                        }\r\n                    }\r\n                    return null\r\n                },\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles}>\r\n                    <List direction=\"top\">\r\n                        <Item key=\"placeholder\"/>\r\n                        {state.options.map((option, index) =>\r\n                            <Item key={option.id}>\r\n                                <Message option={option}\r\n                                         ref={(proxy: any) => refs[index] = proxy}\r\n                                         {...{onClose: () => utils.closeMessage(index)}}\r\n                                />\r\n                            </Item>\r\n                        )}\r\n                    </List>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {App} from \"vue\";\r\nimport {RequireFormat, VNodeChild} from \"../../shims\";\r\nimport {registryRootService} from \"../root/registryRootService\";\r\nimport ManagerComponent from './message-manager'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport './message.scss'\r\nimport Icon from '../icon'\r\nimport List from '../list'\r\nimport Item from '../item'\r\nimport {getServiceWithoutContext} from \"../../utils/getServiceWithoutContext\";\r\n\r\n/**\r\n * 消息位置\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:20\r\n */\r\nexport enum MessageServiceDirection {\r\n    start = 'start',\r\n    center = 'center',\r\n    end = 'end',\r\n}\r\n\r\n/**\r\n * 消息状态\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:20\r\n */\r\nexport type MessageServiceStatus = \"lite\" | \"dark\" | \"primary\" | \"success\" | \"warn\" | \"error\" | \"info\"\r\n\r\n/**\r\n * 消息配置对象类型\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:20\r\n */\r\nexport interface MessageServiceOption {\r\n    message?: string,                                                                               // 消息文本\r\n\r\n    horizontal?: MessageServiceDirection,                                                           // 横向位置\r\n    vertical?: MessageServiceDirection,                                                             // 纵向位置\r\n    time?: number | null,                                                                           // 显示的时间\r\n    status?: MessageServiceStatus,                                                                  // 消息状态\r\n    render?: () => VNodeChild,                                                                      // 自定义内容渲染函数\r\n    icon?: string | null,                                                                           // 显示的图标\r\n    onClick?: (e: MouseEvent) => void,                                                              // 自定义点击处理动作\r\n    onClose?: () => void,                                                                           // 处理消息关闭之后的动作\r\n}\r\n\r\n/**\r\n * 消息配置对象类型格式化后的类型\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:20\r\n */\r\nexport type MessageServiceFormatOption = RequireFormat<MessageServiceOption, 'horizontal' | 'vertical' | 'time' | 'status'> & {\r\n    id: string,\r\n    close: () => void,\r\n}\r\n\r\n/**\r\n * 格式化消息配置参数\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:21\r\n */\r\nconst formatOption = (() => {\r\n    let idCount = 0\r\n    return (option: MessageServiceOption): MessageServiceFormatOption => {\r\n        return Object.assign(option as MessageServiceFormatOption, {\r\n            id: `message_${idCount++}`,\r\n            close: () => null,\r\n            horizontal: option.horizontal || MessageServiceDirection.center,\r\n            vertical: option.vertical || MessageServiceDirection.start,\r\n            time: option.time === null ? null : (option.time || 3 * 1000),\r\n            status: option.status || 'dark'\r\n        })\r\n    }\r\n})()\r\n\r\n/**\r\n * 消息服务函数类型\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:21\r\n */\r\ninterface MessageServiceFunction {\r\n    (message: string | MessageServiceOption, option?: MessageServiceOption): void\r\n}\r\n\r\n/**\r\n * 消息服务对象类型\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:21\r\n */\r\nexport type MessageService = MessageServiceFunction & {\r\n    [k in MessageServiceStatus]: MessageServiceFunction\r\n}\r\n\r\n/**\r\n * 通过应用实例获取消息服务对象函数\r\n * @author  韦胜健\r\n * @date    2020/11/7 18:22\r\n */\r\nconst getMessageService = registryRootService(\r\n    'message',\r\n    ManagerComponent,\r\n    (getManager) => {\r\n        const service: MessageServiceFunction = (message: string | MessageServiceOption, option?: MessageServiceOption) => {\r\n            let o = typeof message === \"object\" ? message : {message}\r\n            if (!!option) {\r\n                Object.assign(o, option)\r\n            }\r\n            const fo = formatOption(o)\r\n            fo.horizontal.charAt(0)\r\n            getManager().then(manager => manager.getContainer(fo).then(container => container.getMessage(fo)))\r\n            return fo\r\n        };\r\n\r\n        return Object.assign(service, [\r\n            'lite',\r\n            'dark',\r\n            'primary',\r\n            'success',\r\n            'warn',\r\n            'error',\r\n            'info',\r\n        ].reduce((prev: any, status: any) => {\r\n            prev[status] = function (message: string | MessageServiceOption, option?: MessageServiceOption) {\r\n                const o = typeof message === \"object\" ? message : {message}\r\n                if (!!option) {\r\n                    Object.assign(o, option)\r\n                }\r\n                o.status = status\r\n                return service(o)\r\n            }\r\n            return prev\r\n        }, {})) as MessageService\r\n    }\r\n)\r\n\r\nexport const $$message = getServiceWithoutContext(getMessageService)\r\n\r\nexport default createComponentPlugin({\r\n    ...ManagerComponent,\r\n    getMessageService,\r\n}, {\r\n    plugins: [\r\n        Icon, List, Item,\r\n        {\r\n            install: (app: App) => {\r\n                app.mixin({\r\n                    beforeCreate() {\r\n                        /*第一次调用 $message 的时候才调用 getMessageService*/\r\n                        Object.defineProperty(this, '$message', {\r\n                            get() {\r\n                                return getMessageService(this)\r\n                            },\r\n                        })\r\n                    },\r\n                })\r\n            }\r\n        }\r\n    ]\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {nextTick, reactive} from 'vue';\r\nimport {MessageServiceDirection} from \"./index\";\r\nimport {useRefList} from \"../../use/useRefList\";\r\nimport Container from './message-container'\r\n\r\nexport default designComponent({\r\n    name: 'pl-message-manager',\r\n    setup() {\r\n\r\n        const state = reactive({\r\n            containers: [\r\n                {\r\n                    horizontal: MessageServiceDirection.center,\r\n                    vertical: MessageServiceDirection.start,\r\n                }] as { horizontal: MessageServiceDirection, vertical: MessageServiceDirection }[]\r\n        })\r\n        const refs = useRefList<typeof Container.use.class>()\r\n\r\n        const getContainer = async (config: { horizontal: MessageServiceDirection, vertical: MessageServiceDirection }): Promise<typeof Container.use.class> => {\r\n            for (let i = 0; i < refs.length; i++) {\r\n                const ref = refs[i];\r\n                if (ref.props.horizontal === config.horizontal && ref.props.vertical === config.vertical) {\r\n                    return ref\r\n                }\r\n            }\r\n            state.containers.push(config);\r\n            await nextTick()\r\n            return getContainer(config)\r\n        }\r\n        return {\r\n            refer: {\r\n                name: 'I am message controller',\r\n                getContainer,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-message-manager\">\r\n                    {state.containers.map((container, index) =>\r\n                        <Container horizontal={container.horizontal}\r\n                                   vertical={container.vertical}\r\n                                   ref={(proxy: any) => refs[index] = proxy}/>)}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {StyleProperties} from '../shims';\r\nimport {computed} from 'vue';\r\n\r\nexport function useStyles(\r\n    getter: (styles: StyleProperties) => StyleProperties | void\r\n) {\r\n    return computed(() => {\r\n        const style = {}\r\n        return getter(style) || style\r\n    })\r\n}","export function toArray<T>(data: T | T[]): T[] {\r\n    return Array.isArray(data) ? data : [data]\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {markRaw, PropType, reactive, watch, nextTick, onBeforeUnmount} from 'vue';\r\nimport {Page} from \"./NavigatorManager\";\r\nimport Nav from './nav'\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {SimpleFunction} from \"../../shims\";\r\n\r\nexport const NavPage = designComponent({\r\n    name: 'pl-nav-page',\r\n    props: {\r\n        page: {type: Object as PropType<Page>, required: true},\r\n        isLast: {type: Boolean, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement\r\n        })\r\n\r\n        const parent = Nav.use.inject()\r\n\r\n        const state = reactive({\r\n            PageComponent: null as any,\r\n            renderEl: false,\r\n        });\r\n\r\n        let unmountHandler: null | SimpleFunction = null;\r\n\r\n        (async () => {\r\n            const loader = await parent.props.nav.utils.getAppLoader(props.page.pageConfig)\r\n            if (!!loader) {\r\n                if ('getPage' in loader) {\r\n                    const Component = await loader.getPage(props.page.pageConfig)\r\n                    state.PageComponent = markRaw(Component)\r\n                } else {\r\n                    state.renderEl = true\r\n                    await nextTick()\r\n                    const mountData = await loader.mount(refs.el!, props.page.pageConfig)\r\n                    unmountHandler = () => loader.unmount(mountData)\r\n                }\r\n            }\r\n        })();\r\n\r\n        onBeforeUnmount(() => {\r\n            !!unmountHandler && unmountHandler()\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                const {PageComponent} = state\r\n                return (\r\n                    <div class=\"pl-nav-page\" v-show={props.isLast}>\r\n                        {state.renderEl && <div ref=\"el\"/>}\r\n                        {PageComponent && <PageComponent/>}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {PropType, provide, inject} from 'vue';\r\nimport {NavigatorManager, PageConfig, Stack} from \"./NavigatorManager\";\r\nimport {NavPage} from \"./nav-page\";\r\nimport Nav from \"./nav\";\r\n\r\nexport const PROVIDE_NAV_CONSTANT = '@@PROVIDE_NAV_CONSTANT'\r\n\r\nfunction provideNavPage({nav, stack}: { nav: NavigatorManager, stack: Stack }) {\r\n    const $nav = {\r\n        /*---------------------------------------tab methods-------------------------------------------*/\r\n        ...nav.tabMethods,\r\n        /*---------------------------------------path methods-------------------------------------------*/\r\n        /*push一个页面*/\r\n        push: (pageConfig: PageConfig) => {\r\n            return nav.pageMethods.push(stack, pageConfig)\r\n        },\r\n        /*pop一个页面*/\r\n        back: () => {\r\n            return nav.pageMethods.back(stack)\r\n        },\r\n        /*重定向到一个页面*/\r\n        redirect: () => {/*todo*/},\r\n        /*刷新页面*/\r\n        refresh: () => {/*todo*/},\r\n        /*开启/关闭页面的加载状态*/\r\n        loading: () => {/*todo*/},\r\n        /*获取当前页面信息*/\r\n        getCurrentPage: () => {/*todo*/},\r\n        /*监听事件*/\r\n        on: () => {/*todo*/},\r\n        /*解除监听事件*/\r\n        off: () => {/*todo*/},\r\n        /*监听一次事件*/\r\n        once: () => {/*todo*/},\r\n        /*派发事件*/\r\n        emit: () => {/*todo*/},\r\n    }\r\n    provide(PROVIDE_NAV_CONSTANT, $nav)\r\n    return $nav\r\n}\r\n\r\nexport function useNav() {\r\n    return inject(PROVIDE_NAV_CONSTANT) as ReturnType<typeof provideNavPage>\r\n}\r\n\r\nexport const NavStack = designComponent({\r\n    name: \"pl-nav-stack\",\r\n    props: {\r\n        stack: {type: Object as PropType<Stack>, required: true},\r\n    },\r\n    setup({props}) {\r\n        const parent = Nav.use.inject()\r\n        const provideNav = provideNavPage({stack: props.stack, nav: parent.props.nav})\r\n\r\n        return {\r\n            refer: {\r\n                provideNav,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-nav-stack\" v-show={props.stack.show}>\r\n                    {props.stack.pages.map((page, index) => {\r\n                        return (\r\n                            <NavPage\r\n                                key={page.id}\r\n                                page={page}\r\n                                isLast={index === props.stack.pages.length - 1}\r\n                            />\r\n                        )\r\n                    })}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import Root from \"./root\";\r\nimport {ComponentPublicInstance} from 'vue';\r\n\r\n/**\r\n * 用来注册root组件，建立 root 与 app中的 $root根实例的唯一对应关系\r\n * @author  韦胜健\r\n * @date    2020/11/26 9:32\r\n */\r\nexport const RootController = (() => {\r\n    const map = new WeakMap<ComponentPublicInstance, typeof Root.use.class>()\r\n    return {\r\n        initRoot: (root: typeof Root.use.class) => {\r\n            const $root = root.rootRef()\r\n            map.set($root, root)\r\n        },\r\n        getRoot: (ins: ComponentPublicInstance) => {\r\n            const root = map.get(ins.$root!)\r\n            if (!root) {\r\n                throw new Error(`pl-root is not found, you have to wrap the entire application with <pl-root/>!`)\r\n            }\r\n            return root\r\n        }\r\n    }\r\n})()\r\n\r\nexport enum RootServiceScope {\r\n    root = 'root',\r\n    ins = 'ins',\r\n}\r\n\r\n/**\r\n * 注册一个应用服务\r\n * @author  韦胜健\r\n * @date    2020/11/26 9:34\r\n * @param   name                        服务名称\r\n * @param   managerComponent            Manager组件，由root实例创建，Manager负责创建Service组件实例\r\n * @param   createService               负责通过得到的manager实例，获取service实例，调用service实例的service方法提供服务\r\n * @param   scope                       应用服务的作用范围，root表示整个应用只有一个服务，ins表示每个组件都有自己的服务。\r\n */\r\nexport function registryRootService<\r\n    ManagerComponent extends { use: { class: any } },\r\n    CreateService extends (getManager: () => Promise<ManagerComponent[\"use\"][\"class\"]>, ins: ComponentPublicInstance) => any>\r\n(\r\n    name: string,\r\n    managerComponent: ManagerComponent,\r\n    createService: CreateService,\r\n    scope = RootServiceScope.root\r\n) {\r\n    let map = new WeakMap<ComponentPublicInstance, ReturnType<CreateService>>()\r\n\r\n    return (ins: ComponentPublicInstance): ReturnType<CreateService> => {\r\n        const mapKey = scope === RootServiceScope.root ? ins.$root! : ins\r\n        let service = map.get(mapKey)\r\n        /*如果在作用域范围内存在已经创建的服务，则直接返回这个服务函数*/\r\n        if (!!service) {\r\n            return service\r\n        }\r\n        /*否则调用创建服务函数，创建一个新的服务函数提供服务*/\r\n        service = createService(async () => {\r\n            const root = RootController.getRoot(mapKey)\r\n            /*获取一个 Controller 实例，没有就给我创建一个*/\r\n            return await root.getManagerInstance(name, managerComponent)\r\n        }, ins)\r\n        map.set(mapKey, service!)\r\n        return service!\r\n    }\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, StyleStatus, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useNumber} from \"../../use/useNumber\";\r\nimport {FormCollector} from \"./form\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {reactive, onMounted, computed, PropType, ComputedRef} from 'vue';\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {FormContentAlign, FormLabelAlign} from \"./form.utils\";\r\nimport {FormComponentItemRules, FormRule, FormValidateUtils} from \"./form.validate\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-form-item',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        field: {type: [String, Array] as PropType<string | string[]>},      // 绑定的属性字段名\r\n        rules: {type: [Array, Object] as PropType<FormRule | FormRule[]>},  // 校验规则\r\n        required: {type: Boolean},                                          // 不能为空\r\n\r\n        label: {type: String, default: ' '},                                // 显示文本\r\n        labelWidth: {type: [String, Number]},                               // 显示文本宽度\r\n        column: {type: [String, Number], default: 1},                       // 多列表单的列数\r\n        block: {type: Boolean},                                             // 占用一行\r\n        colon: {type: Boolean, default: null},                              // label的冒号\r\n        labelAlign: {type: String as PropType<FormLabelAlign>},             // label 对齐方式\r\n        contentAlign: {type: String as PropType<FormContentAlign>},         // content 对齐方式\r\n    },\r\n    emits: {\r\n        onBlur: () => true,\r\n        onChange: () => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit}}) {\r\n\r\n        const form = FormCollector.child()\r\n        const {slots} = useSlots(['label', 'suffix'], true)\r\n        const {refs} = useRefs({label: HTMLDivElement,})\r\n        const {styleComputed} = useStyle({adjust: ret => {!!invalidate.value && (ret.status = StyleStatus.error)}})\r\n\r\n        const handler = {\r\n            onEditChange: () => form.validateHandler.onEditChange(props.field),\r\n            onEditBlur: () => form.validateHandler.onBlurChange(props.field),\r\n        }\r\n        useEdit({\r\n            adjust: ret => {\r\n                ret.onChange = handler.onEditChange\r\n                ret.onBlur = handler.onEditBlur\r\n\r\n                if (!!form.props.disabledFields && !!props.field) {\r\n                    const fields = FormValidateUtils.getListValue(props.field)\r\n                    if (!!fields && !!fields.find(f => form.props.disabledFields![f])) {\r\n                        ret.disabled = true\r\n                    }\r\n                }\r\n                if (!!form.props.readonlyFields && !!props.field) {\r\n                    const fields = FormValidateUtils.getListValue(props.field)\r\n                    if (!!fields && !!fields.find(f => form.props.disabledFields![f])) {\r\n                        ret.readonly = true\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const {numberState} = useNumber(props, ['labelWidth', 'column'])\r\n        const state = reactive({\r\n            /*当前 form item的label宽度*/\r\n            labelWidth: 0,\r\n        })\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        /*是否显示冒号*/\r\n        const colon = computed(() => props.colon == null ? form.props.colon : props.colon)\r\n        /*label的目标宽度*/\r\n        const labelWidth = computed(() => numberState.labelWidth || form.numberState.labelWidth)\r\n        /*是否设置了label宽度*/\r\n        const staticWidth = computed(() => !!labelWidth.value)\r\n        /*是否存在label节点*/\r\n        const hasLabel = computed(() => !!props.label || slots.label.isExist())\r\n\r\n        const classes = useClass(() => [\r\n            'pl-form-item',\r\n            `pl-form-item-size-${styleComputed.value.size}`,\r\n            `pl-form-item-label-align-${props.labelAlign || form.childState.align.label}`,\r\n            `pl-form-item-content-align-${props.contentAlign || form.childState.align.content}`,\r\n            {\r\n                'pl-form-item-static-width': staticWidth.value,\r\n                'pl-form-item-required': isRequired.value && !form.props.hideRequiredAsterisk,\r\n                'pl-form-item-invalidate': !!invalidate.value && !form.props.hideValidateMessage,\r\n            }\r\n        ])\r\n        const isBlock = computed(() => {\r\n            const flag = !!props.block || numberState.column === form.numberState.column\r\n            return {\r\n                flag,\r\n                column: flag ? form.numberState.column : numberState.column\r\n            }\r\n        })\r\n\r\n        /*form-item的宽度，与下一个form-item的gutter*/\r\n        const styles = useStyles(style => {\r\n            if (form.props.inline) {\r\n                return style\r\n            }\r\n            const {col} = form.childState.width\r\n            const {column} = isBlock.value\r\n            const {columnGutter} = form.numberState\r\n            if (!!col) {\r\n                style.width = unit((col + columnGutter) * column)\r\n            }\r\n            if (form.numberState.column > 1) {\r\n                style.paddingRight = unit(form.numberState.columnGutter)\r\n            }\r\n        })\r\n\r\n        /*label节点宽度，如果有设置labelWidth的话*/\r\n        const labelStyles = useStyles(style => {\r\n            if (form.props.inline) {\r\n                return style\r\n            }\r\n            if (!!labelWidth.value) {\r\n                style.width = unit(labelWidth.value)\r\n            }\r\n        })\r\n\r\n        /*如果没有label的话，body应该占用百分百宽度，否则宽度为占用列数x列宽 - label宽度*/\r\n        const bodyStyles = useStyles(style => {\r\n            if (form.props.inline) {\r\n                return style\r\n            }\r\n            if (!hasLabel.value) {\r\n                style.width = '100%'\r\n            } else {\r\n                const {label, col} = form.childState.width\r\n                if (!!label) {\r\n                    const {columnGutter} = form.numberState\r\n                    const {column} = isBlock.value\r\n                    style.width = unit(col! * column + (column - 1) * columnGutter - label)\r\n                }\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------hook-------------------------------------------*/\r\n\r\n        /**\r\n         * 如果没有写死labelWidth，这mounted的时候计算label节点宽度\r\n         * @author  韦胜健\r\n         * @date    2020/12/11 21:32\r\n         */\r\n        if (!staticWidth.value && hasLabel.value) {\r\n            onMounted(() => {\r\n                state.labelWidth = refs.label.scrollWidth\r\n            })\r\n        }\r\n\r\n        /*---------------------------------------validate-------------------------------------------*/\r\n\r\n        const formItemComponentRules = computed((): FormComponentItemRules => ({\r\n            label: props.label,\r\n            field: props.field,\r\n            required: props.required,\r\n            rules: props.rules,\r\n        }))\r\n\r\n        /*当前是否必填校验*/\r\n        const isRequired = computed(() => {\r\n            const {fieldToRequired} = form.childState.formValidate\r\n            const fields = FormValidateUtils.getListValue(props.field)\r\n            if (!fields) {\r\n                return false\r\n            }\r\n            return !!fields.find(f => !!fieldToRequired[f])\r\n        }) as ComputedRef<boolean>\r\n\r\n        /*当前是否校验不通过*/\r\n        const invalidate = computed(() => {\r\n            const {validateResultMap} = form.childState\r\n            const fields = FormValidateUtils.getListValue(props.field)\r\n            if (!fields) {\r\n                return null\r\n            }\r\n            const invalidField = fields.find(f => !!validateResultMap[f])\r\n            return !invalidField ? null : validateResultMap[invalidField]!\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                state,\r\n                formItemComponentRules,\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {(!!props.label || slots.label.isExist()) && (\r\n                        <div class=\"pl-form-item-label\" style={labelStyles.value} ref=\"label\">\r\n                            {slots.label(props.label)} {!!props.label && !!props.label.trim() && !!colon.value && ':'}\r\n                        </div>\r\n                    )}\r\n                    <div class=\"pl-form-item-body\" style={bodyStyles.value}>\r\n                        {slots.default()}\r\n                        {slots.suffix.isExist() && (\r\n                            <div class=\"pl-form-item-suffix\">\r\n                                {slots.suffix()}\r\n                            </div>\r\n                        )}\r\n                        {!!invalidate.value && !form.props.hideValidateMessage && (<div class=\"pl-form-item-message\">\r\n                            {invalidate.value.message}\r\n                        </div>)}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","var map = {\n\t\"./el-icon-alarm-clock.json\": [\n\t\t\"cb35\",\n\t\t\"chunk-2d2217f7\"\n\t],\n\t\"./el-icon-arrow-down.json\": [\n\t\t\"6c41\",\n\t\t\"chunk-2d0da720\"\n\t],\n\t\"./el-icon-arrow-left.json\": [\n\t\t\"cfb7\",\n\t\t\"chunk-2d222cae\"\n\t],\n\t\"./el-icon-arrow-right.json\": [\n\t\t\"adb0\",\n\t\t\"chunk-2d213c67\"\n\t],\n\t\"./el-icon-arrow-up.json\": [\n\t\t\"94ea\",\n\t\t\"chunk-2d0e59ed\"\n\t],\n\t\"./el-icon-back.json\": [\n\t\t\"3c66\",\n\t\t\"chunk-2d0c4a46\"\n\t],\n\t\"./el-icon-bell.json\": [\n\t\t\"e25d\",\n\t\t\"chunk-2d224cf2\"\n\t],\n\t\"./el-icon-bottom-left.json\": [\n\t\t\"4a3f\",\n\t\t\"chunk-2d0cb6f6\"\n\t],\n\t\"./el-icon-bottom-right.json\": [\n\t\t\"1917\",\n\t\t\"chunk-2d0ac344\"\n\t],\n\t\"./el-icon-bottom.json\": [\n\t\t\"6976\",\n\t\t\"chunk-2d0d09d8\"\n\t],\n\t\"./el-icon-brush.json\": [\n\t\t\"5133\",\n\t\t\"chunk-2d0c76f2\"\n\t],\n\t\"./el-icon-camera-solid.json\": [\n\t\t\"b8dc\",\n\t\t\"chunk-2d210c0b\"\n\t],\n\t\"./el-icon-camera.json\": [\n\t\t\"6fe1\",\n\t\t\"chunk-2d0db852\"\n\t],\n\t\"./el-icon-caret-bottom.json\": [\n\t\t\"3442\",\n\t\t\"chunk-2d0b9995\"\n\t],\n\t\"./el-icon-caret-left.json\": [\n\t\t\"e67c\",\n\t\t\"chunk-2d225c33\"\n\t],\n\t\"./el-icon-caret-right.json\": [\n\t\t\"54bc\",\n\t\t\"chunk-2d0c8816\"\n\t],\n\t\"./el-icon-caret-top.json\": [\n\t\t\"afd3\",\n\t\t\"chunk-2d21442a\"\n\t],\n\t\"./el-icon-chat-dot-round.json\": [\n\t\t\"76c6\",\n\t\t\"chunk-2d0d7848\"\n\t],\n\t\"./el-icon-chat-dot-square.json\": [\n\t\t\"e8b52\",\n\t\t\"chunk-772aaef6\"\n\t],\n\t\"./el-icon-chat-line-round.json\": [\n\t\t\"f439\",\n\t\t\"chunk-2d22c86a\"\n\t],\n\t\"./el-icon-chat-line-square.json\": [\n\t\t\"ec88\",\n\t\t\"chunk-2d230514\"\n\t],\n\t\"./el-icon-chat-round.json\": [\n\t\t\"be43\",\n\t\t\"chunk-2d21aef8\"\n\t],\n\t\"./el-icon-chat-square.json\": [\n\t\t\"fe43\",\n\t\t\"chunk-2d238074\"\n\t],\n\t\"./el-icon-check-bold.json\": [\n\t\t\"f9a6\",\n\t\t\"chunk-2d22e0be\"\n\t],\n\t\"./el-icon-check.json\": [\n\t\t\"4e52\",\n\t\t\"chunk-2d0cc604\"\n\t],\n\t\"./el-icon-circle-check.json\": [\n\t\t\"3c3b\",\n\t\t\"chunk-2d0c4a15\"\n\t],\n\t\"./el-icon-circle-close.json\": [\n\t\t\"3728\",\n\t\t\"chunk-2d0ba4a0\"\n\t],\n\t\"./el-icon-circle-plus-outline.json\": [\n\t\t\"5b87\",\n\t\t\"chunk-2d0d2f82\"\n\t],\n\t\"./el-icon-circle-plus.json\": [\n\t\t\"2bcd\",\n\t\t\"chunk-2d0bd7c7\"\n\t],\n\t\"./el-icon-close-bold.json\": [\n\t\t\"8b35\",\n\t\t\"chunk-2d0e8c02\"\n\t],\n\t\"./el-icon-close-notification.json\": [\n\t\t\"84d2\",\n\t\t\"chunk-2d0de540\"\n\t],\n\t\"./el-icon-close.json\": [\n\t\t\"b7c2\",\n\t\t\"chunk-2d2107fa\"\n\t],\n\t\"./el-icon-cloudy.json\": [\n\t\t\"4230\",\n\t\t\"chunk-2d0c0651\"\n\t],\n\t\"./el-icon-code.json\": [\n\t\t\"711f\",\n\t\t\"chunk-2d0d5fa5\"\n\t],\n\t\"./el-icon-coffee-cup.json\": [\n\t\t\"831a\",\n\t\t\"chunk-2d0ddb81\"\n\t],\n\t\"./el-icon-collection-tag.json\": [\n\t\t\"0ff2\",\n\t\t\"chunk-2d0afe38\"\n\t],\n\t\"./el-icon-connection.json\": [\n\t\t\"6a3d\",\n\t\t\"chunk-2d0d9fb2\"\n\t],\n\t\"./el-icon-crop.json\": [\n\t\t\"94f4\",\n\t\t\"chunk-2d0e59df\"\n\t],\n\t\"./el-icon-d-arrow-left.json\": [\n\t\t\"3194\",\n\t\t\"chunk-2d0b8eef\"\n\t],\n\t\"./el-icon-d-arrow-right.json\": [\n\t\t\"56ef3\",\n\t\t\"chunk-74856f3b\"\n\t],\n\t\"./el-icon-date.json\": [\n\t\t\"ca53\",\n\t\t\"chunk-2d221472\"\n\t],\n\t\"./el-icon-debug-s.json\": [\n\t\t\"241e\",\n\t\t\"chunk-2d0b250c\"\n\t],\n\t\"./el-icon-debug.json\": [\n\t\t\"5696\",\n\t\t\"chunk-2d0c8a74\"\n\t],\n\t\"./el-icon-delete-location.json\": [\n\t\t\"e918\",\n\t\t\"chunk-2d226691\"\n\t],\n\t\"./el-icon-delete-solid.json\": [\n\t\t\"ed66\",\n\t\t\"chunk-2d230895\"\n\t],\n\t\"./el-icon-delete.json\": [\n\t\t\"4add\",\n\t\t\"chunk-2d0cbce3\"\n\t],\n\t\"./el-icon-document-add.json\": [\n\t\t\"b7c1\",\n\t\t\"chunk-2d2107f9\"\n\t],\n\t\"./el-icon-document-checked.json\": [\n\t\t\"af1c\",\n\t\t\"chunk-2d213e2d\"\n\t],\n\t\"./el-icon-document-copy.json\": [\n\t\t\"764e\",\n\t\t\"chunk-2d0d72c6\"\n\t],\n\t\"./el-icon-document-delete.json\": [\n\t\t\"a8d2\",\n\t\t\"chunk-2d20977b\"\n\t],\n\t\"./el-icon-document-remove.json\": [\n\t\t\"dd28\",\n\t\t\"chunk-2d2293bc\"\n\t],\n\t\"./el-icon-document.json\": [\n\t\t\"2b65\",\n\t\t\"chunk-2d0bd225\"\n\t],\n\t\"./el-icon-download.json\": [\n\t\t\"9065\",\n\t\t\"chunk-2d0e450c\"\n\t],\n\t\"./el-icon-edit-outline.json\": [\n\t\t\"f8e0\",\n\t\t\"chunk-2d22dd73\"\n\t],\n\t\"./el-icon-edit.json\": [\n\t\t\"0caa\",\n\t\t\"chunk-2d0af289\"\n\t],\n\t\"./el-icon-error.json\": [\n\t\t\"16c6\",\n\t\t\"chunk-2d0abe0e\"\n\t],\n\t\"./el-icon-female.json\": [\n\t\t\"9937\",\n\t\t\"chunk-2d0e667a\"\n\t],\n\t\"./el-icon-first-aid-kit.json\": [\n\t\t\"9a63\",\n\t\t\"chunk-2d0efcfb\"\n\t],\n\t\"./el-icon-folder-add.json\": [\n\t\t\"e0c3\",\n\t\t\"chunk-2d224ad1\"\n\t],\n\t\"./el-icon-folder-checked.json\": [\n\t\t\"6eb2\",\n\t\t\"chunk-2d0db435\"\n\t],\n\t\"./el-icon-folder-delete.json\": [\n\t\t\"5ca1\",\n\t\t\"chunk-2d0d3834\"\n\t],\n\t\"./el-icon-folder-opened.json\": [\n\t\t\"08b5\",\n\t\t\"chunk-2d0a5111\"\n\t],\n\t\"./el-icon-folder-remove.json\": [\n\t\t\"dcfa\",\n\t\t\"chunk-2d229670\"\n\t],\n\t\"./el-icon-folder-s.json\": [\n\t\t\"59d9\",\n\t\t\"chunk-2d0c9aef\"\n\t],\n\t\"./el-icon-folder.json\": [\n\t\t\"f98f\",\n\t\t\"chunk-2d22dbf7\"\n\t],\n\t\"./el-icon-full-screen.json\": [\n\t\t\"5d5a\",\n\t\t\"chunk-2d0d36d1\"\n\t],\n\t\"./el-icon-info.json\": [\n\t\t\"36b6\",\n\t\t\"chunk-2d0ba6ad\"\n\t],\n\t\"./el-icon-jiahao.json\": [\n\t\t\"da7d\",\n\t\t\"chunk-2d228940\"\n\t],\n\t\"./el-icon-link.json\": [\n\t\t\"90ff\",\n\t\t\"chunk-2d0e4b0d\"\n\t],\n\t\"./el-icon-list.json\": [\n\t\t\"66d9\",\n\t\t\"chunk-2d0d040b\"\n\t],\n\t\"./el-icon-location-information.json\": [\n\t\t\"e752\",\n\t\t\"chunk-2d225f85\"\n\t],\n\t\"./el-icon-location-outline.json\": [\n\t\t\"e518\",\n\t\t\"chunk-2d22578d\"\n\t],\n\t\"./el-icon-location.json\": [\n\t\t\"c034\",\n\t\t\"chunk-2d215c44\"\n\t],\n\t\"./el-icon-lock.json\": [\n\t\t\"4e03\",\n\t\t\"chunk-2d0cc56a\"\n\t],\n\t\"./el-icon-male.json\": [\n\t\t\"469c\",\n\t\t\"chunk-2d0c1642\"\n\t],\n\t\"./el-icon-menu.json\": [\n\t\t\"0a5a\",\n\t\t\"chunk-2d0ae5b3\"\n\t],\n\t\"./el-icon-message-solid.json\": [\n\t\t\"b1c9\",\n\t\t\"chunk-2d20f17b\"\n\t],\n\t\"./el-icon-message.json\": [\n\t\t\"d4ee\",\n\t\t\"chunk-2d21e5e6\"\n\t],\n\t\"./el-icon-microphone.json\": [\n\t\t\"1722\",\n\t\t\"chunk-2d0abbdc\"\n\t],\n\t\"./el-icon-minus.json\": [\n\t\t\"a53c\",\n\t\t\"chunk-2d20867a\"\n\t],\n\t\"./el-icon-more.json\": [\n\t\t\"af8e\",\n\t\t\"chunk-2d213f08\"\n\t],\n\t\"./el-icon-nodata.json\": [\n\t\t\"1e28\",\n\t\t\"chunk-2d0b6890\"\n\t],\n\t\"./el-icon-paperclip.json\": [\n\t\t\"011a\",\n\t\t\"chunk-2d0a3107\"\n\t],\n\t\"./el-icon-picture-outline.json\": [\n\t\t\"9618\",\n\t\t\"chunk-2d0e5afa\"\n\t],\n\t\"./el-icon-picture.json\": [\n\t\t\"dbd7\",\n\t\t\"chunk-2d229247\"\n\t],\n\t\"./el-icon-place.json\": [\n\t\t\"f20d\",\n\t\t\"chunk-2d22c0b6\"\n\t],\n\t\"./el-icon-plus.json\": [\n\t\t\"26b6\",\n\t\t\"chunk-2d0b324e\"\n\t],\n\t\"./el-icon-position.json\": [\n\t\t\"0bbe\",\n\t\t\"chunk-2d0aeeeb\"\n\t],\n\t\"./el-icon-question.json\": [\n\t\t\"84cd\",\n\t\t\"chunk-2d0de553\"\n\t],\n\t\"./el-icon-rank.json\": [\n\t\t\"8661\",\n\t\t\"chunk-2d0de72f\"\n\t],\n\t\"./el-icon-refresh-right.json\": [\n\t\t\"ed12\",\n\t\t\"chunk-2d2307f6\"\n\t],\n\t\"./el-icon-refresh.json\": [\n\t\t\"33ab\",\n\t\t\"chunk-2d0b9b77\"\n\t],\n\t\"./el-icon-remove-outline.json\": [\n\t\t\"c6b69\",\n\t\t\"chunk-770d975c\"\n\t],\n\t\"./el-icon-remove.json\": [\n\t\t\"0103\",\n\t\t\"chunk-2d0a30ba\"\n\t],\n\t\"./el-icon-right.json\": [\n\t\t\"6be0\",\n\t\t\"chunk-2d0da94d\"\n\t],\n\t\"./el-icon-s-comment.json\": [\n\t\t\"849a\",\n\t\t\"chunk-2d0de03a\"\n\t],\n\t\"./el-icon-s-custom.json\": [\n\t\t\"4001\",\n\t\t\"chunk-2d0bfe73\"\n\t],\n\t\"./el-icon-s-fold.json\": [\n\t\t\"01f3\",\n\t\t\"chunk-2d0a3744\"\n\t],\n\t\"./el-icon-s-grid.json\": [\n\t\t\"8efd\",\n\t\t\"chunk-2d0e9da1\"\n\t],\n\t\"./el-icon-s-opportunity.json\": [\n\t\t\"acd7\",\n\t\t\"chunk-2d2138eb\"\n\t],\n\t\"./el-icon-s-order.json\": [\n\t\t\"b5e1\",\n\t\t\"chunk-2d2100b5\"\n\t],\n\t\"./el-icon-s-promotion.json\": [\n\t\t\"8e1e\",\n\t\t\"chunk-2d0e9737\"\n\t],\n\t\"./el-icon-s-shop.json\": [\n\t\t\"a48f\",\n\t\t\"chunk-2d208357\"\n\t],\n\t\"./el-icon-s-ticket.json\": [\n\t\t\"471a\",\n\t\t\"chunk-2d0c1909\"\n\t],\n\t\"./el-icon-s-tools.json\": [\n\t\t\"49e0\",\n\t\t\"chunk-2d0c26a6\"\n\t],\n\t\"./el-icon-s-unfold.json\": [\n\t\t\"2d66\",\n\t\t\"chunk-2d0bd9a8\"\n\t],\n\t\"./el-icon-search.json\": [\n\t\t\"37aa\",\n\t\t\"chunk-2d0baa7a\"\n\t],\n\t\"./el-icon-setting.json\": [\n\t\t\"70db\",\n\t\t\"chunk-2d0d620d\"\n\t],\n\t\"./el-icon-share.json\": [\n\t\t\"75e3\",\n\t\t\"chunk-2d0d74c2\"\n\t],\n\t\"./el-icon-sort.json\": [\n\t\t\"e450\",\n\t\t\"chunk-2d225440\"\n\t],\n\t\"./el-icon-star-off.json\": [\n\t\t\"c7d3\",\n\t\t\"chunk-2d217c79\"\n\t],\n\t\"./el-icon-star-on.json\": [\n\t\t\"ce5c\",\n\t\t\"chunk-2d2223a6\"\n\t],\n\t\"./el-icon-success.json\": [\n\t\t\"b819\",\n\t\t\"chunk-2d2105b4\"\n\t],\n\t\"./el-icon-switch-button.json\": [\n\t\t\"e677\",\n\t\t\"chunk-2d225c07\"\n\t],\n\t\"./el-icon-thumb.json\": [\n\t\t\"681e\",\n\t\t\"chunk-2d0d058c\"\n\t],\n\t\"./el-icon-time.json\": [\n\t\t\"d831\",\n\t\t\"chunk-2d21eea8\"\n\t],\n\t\"./el-icon-tools.json\": [\n\t\t\"3f79\",\n\t\t\"chunk-2d0c55ab\"\n\t],\n\t\"./el-icon-top-left.json\": [\n\t\t\"d8d8\",\n\t\t\"chunk-2d21f49e\"\n\t],\n\t\"./el-icon-top-right.json\": [\n\t\t\"ddd4\",\n\t\t\"chunk-2d2299c6\"\n\t],\n\t\"./el-icon-top.json\": [\n\t\t\"aca8\",\n\t\t\"chunk-2d21388f\"\n\t],\n\t\"./el-icon-turn-off-microphone.json\": [\n\t\t\"0bd6\",\n\t\t\"chunk-2d0aeefa\"\n\t],\n\t\"./el-icon-unlock.json\": [\n\t\t\"f7ea\",\n\t\t\"chunk-2d22d9e3\"\n\t],\n\t\"./el-icon-upload.json\": [\n\t\t\"0bce\",\n\t\t\"chunk-2d0aef0a\"\n\t],\n\t\"./el-icon-upload1.json\": [\n\t\t\"d889\",\n\t\t\"chunk-2d21ef4b\"\n\t],\n\t\"./el-icon-video-pause.json\": [\n\t\t\"c6a5\",\n\t\t\"chunk-2d21785d\"\n\t],\n\t\"./el-icon-video-play.json\": [\n\t\t\"4016\",\n\t\t\"chunk-2d0bfe97\"\n\t],\n\t\"./el-icon-view-not-s.json\": [\n\t\t\"f49d\",\n\t\t\"chunk-2d22c94f\"\n\t],\n\t\"./el-icon-view.json\": [\n\t\t\"c3a4\",\n\t\t\"chunk-2d216d19\"\n\t],\n\t\"./el-icon-warning-outline.json\": [\n\t\t\"93f8\",\n\t\t\"chunk-2d0e5622\"\n\t],\n\t\"./el-icon-warning.json\": [\n\t\t\"80f1\",\n\t\t\"chunk-2d0dd679\"\n\t],\n\t\"./el-icon-zoom-full.json\": [\n\t\t\"450c\",\n\t\t\"chunk-2d0c116a\"\n\t],\n\t\"./el-icon-zoom-in.json\": [\n\t\t\"2731\",\n\t\t\"chunk-2d0b3059\"\n\t],\n\t\"./el-icon-zoom-out.json\": [\n\t\t\"1141\",\n\t\t\"chunk-2d0aa593\"\n\t],\n\t\"./el-icon-zoom-scale.json\": [\n\t\t\"616d\",\n\t\t\"chunk-2d0cebdf\"\n\t],\n\t\"./index.json\": [\n\t\t\"9aae\",\n\t\t\"chunk-2d0f0262\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"e51c\";\nmodule.exports = webpackAsyncContext;","import {Directive} from 'vue'\r\nimport './click-wave.scss'\r\n\r\nconst map = new WeakMap()\r\n\r\nclass ClickWaveData {\r\n\r\n    option: any\r\n    on: () => void\r\n    wavingTimer: number | null = null\r\n    el: HTMLElement\r\n    updateOption: (option: any) => void\r\n\r\n    constructor(el: HTMLElement, option: any) {\r\n        this.option = {}\r\n        this.on = () => {\r\n            // console.log(this.option,this.option.disabled === true)\r\n            if (this.option.disabled === true) return;\r\n            if (!!this.wavingTimer) return\r\n\r\n            this.el.setAttribute('plain-click-node-waving', 'active')\r\n            this.wavingTimer = setTimeout(() => {\r\n                this.el.removeAttribute('plain-click-node-waving')\r\n                this.wavingTimer = null\r\n            }, 500) as any as number\r\n        }\r\n        this.updateOption = (option) => {\r\n            option = option || {}\r\n            if (typeof option === \"string\") {\r\n                option = {\r\n                    size: option\r\n                }\r\n            }\r\n            option.size = option.size || 'normal'\r\n            this.option = option\r\n        }\r\n        this.updateOption(option)\r\n        this.el = el\r\n        this.el.setAttribute(`plain-click-node-${this.option.size}`, 'active')\r\n\r\n        el.addEventListener('click', this.on, true)\r\n    }\r\n\r\n    unbind() {\r\n        this.el.removeEventListener('click', this.on, true)\r\n    }\r\n}\r\n\r\nexport const ClickWave: Directive = {\r\n    mounted(el, binding) {\r\n        map.set(el, new ClickWaveData(el, binding.value))\r\n    },\r\n    updated(el, binding) {\r\n        const data = map.get(el)\r\n        if (!!data) {\r\n            data.updateOption(binding.value)\r\n        }\r\n    },\r\n    beforeUnmount(el) {\r\n        const data = map.get(el)\r\n        if (!!data) {\r\n            data.unbind()\r\n        }\r\n    },\r\n}","import {VNodeChild} from \"../shims\";\r\nimport {getCurrentInstance, onBeforeUpdate, reactive} from 'vue';\r\nimport {getSlotExist} from \"../utils/getSlotExists\";\r\n\r\ntype ScopedSlotsOptionType = { [SlotName: string]: { [ScopeKey: string]: any } }\r\n\r\ntype ExtractScopedSlotsDataValue<ScopeValue> = ScopeValue extends new (...args: any[]) => infer R ? R : ScopeValue;\r\n\r\ntype ExtractScopedSlotsData<Scope extends { [ScopeKey: string]: any }> = {\r\n    [k in keyof Scope]: ExtractScopedSlotsDataValue<Scope[k]>\r\n}\r\n\r\ninterface UseScopedSlots {\r\n    <T extends ScopedSlotsOptionType>(options: T): {\r\n        scopedSlots: {\r\n            [k in keyof T]: ((scope: ExtractScopedSlotsData<T[k]>, vnode: VNodeChild) => void)\r\n        }\r\n    }\r\n\r\n    <T extends ScopedSlotsOptionType>(options: T, makeReactive?: boolean): {\r\n        scopedSlots: {\r\n            [k in keyof T]: ((scope: ExtractScopedSlotsData<T[k]>, vnode: VNodeChild) => void) & { isExist: () => boolean }\r\n        }\r\n    }\r\n}\r\n\r\nexport const useScopedSlots: UseScopedSlots = <T extends ScopedSlotsOptionType>(options: T, makeReactive?: boolean) => {\r\n\r\n    const ctx = getCurrentInstance()!\r\n    const slotNames = Object.keys(options)\r\n\r\n    const state = reactive({exist: getSlotExist(null, slotNames, ctx)})\r\n    /*如果需要响应式，则需要设置 makeReactive，会自动在updated之后更新slots的isExist值*/\r\n    if (makeReactive) {\r\n        onBeforeUpdate(() => {\r\n            getSlotExist(state.exist, slotNames, ctx)\r\n        })\r\n    }\r\n\r\n    const scopedSlots = slotNames.reduce((prev: any, slotName: string) => {\r\n        prev[slotName] = Object.assign((scope: any, vnode: VNodeChild) => {\r\n            const slot = ctx.slots[slotName]\r\n            return !!slot ? slot(scope) : vnode\r\n        }, {\r\n            isExist() {\r\n                return state.exist[slotName]\r\n            },\r\n        })\r\n        return prev\r\n    }, {} as any)\r\n\r\n    return {\r\n        scopedSlots,\r\n    }\r\n}\r\n","import {designComponent} from \"../../use/designComponent\";\r\nimport {PropType} from 'vue';\r\nimport {NavigatorManager} from \"./NavigatorManager\";\r\nimport './nav.scss'\r\nimport {NavStack} from \"./nav-stack\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-nav',\r\n    provideRefer: true,\r\n    props: {\r\n        nav: {type: Object as PropType<NavigatorManager>, required: true},\r\n        height: {default: '100vh'},\r\n        width: {default: '100vw'},\r\n    },\r\n    setup({props}) {\r\n        return {\r\n            refer: {\r\n                props,\r\n            },\r\n            render: () => {\r\n                return (\r\n                    <div class=\"pl-nav\" style={{width: props.width, height: props.height}}>\r\n                        {props.nav.state.stacks\r\n                            .map(stack => (<NavStack stack={stack} key={stack.id}/>))}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {computed} from 'vue'\r\n\r\nexport type SingleClass = null | undefined | string | { [k: string]: boolean | null | undefined }\r\nexport type MultipleClass = SingleClass | SingleClass[]\r\n\r\nexport function useClass<T extends () => MultipleClass>(fn: T) {\r\n    return computed(fn)\r\n}","import {App} from 'vue'\r\n\r\nexport enum KEY {\r\n    'shift' = 'shift',\r\n    'ctrl' = 'ctrl',\r\n    'alt' = 'alt',\r\n    'backspace' = 'backspace',\r\n    'tab' = 'tab',\r\n    'enter' = 'enter',\r\n    'esc' = 'esc',\r\n    'space' = 'space',\r\n    'del' = 'del',\r\n    'left' = 'left',\r\n    'up' = 'up',\r\n    'right' = 'right',\r\n    'down' = 'down',\r\n    'minus' = 'minus',\r\n    'equal' = 'equal',\r\n    'num_0' = 'num_0',\r\n    'num_1' = 'num_1',\r\n    'num_2' = 'num_2',\r\n    'num_3' = 'num_3',\r\n    'num_4' = 'num_4',\r\n    'num_5' = 'num_5',\r\n    'num_6' = 'num_6',\r\n    'num_7' = 'num_7',\r\n    'num_8' = 'num_8',\r\n    'num_9' = 'num_9',\r\n    'a' = 'a',\r\n    'b' = 'b',\r\n    'c' = 'c',\r\n    'd' = 'd',\r\n    'e' = 'e',\r\n    'f' = 'f',\r\n    'g' = 'g',\r\n    'h' = 'h',\r\n    'i' = 'i',\r\n    'j' = 'j',\r\n    'k' = 'k',\r\n    'l' = 'l',\r\n    'm' = 'm',\r\n    'n' = 'n',\r\n    'o' = 'o',\r\n    'p' = 'p',\r\n    'q' = 'q',\r\n    'r' = 'r',\r\n    's' = 's',\r\n    't' = 't',\r\n    'u' = 'u',\r\n    'v' = 'v',\r\n    'w' = 'w',\r\n    'x' = 'x',\r\n    'y' = 'y',\r\n    'z' = 'z',\r\n    'F1' = 'F1',\r\n    'F2' = 'F2',\r\n    'F3' = 'F3',\r\n    'F4' = 'F4',\r\n    'F5' = 'F5',\r\n    'F6' = 'F6',\r\n    'F7' = 'F7',\r\n    'F8' = 'F8',\r\n    'F9' = 'F9',\r\n    'F10' = 'F10',\r\n    'F11' = 'F11',\r\n    'F12' = 'F12',\r\n}\r\n\r\nexport const KeyBoardMap = {\r\n    16: 'shift',\r\n    17: 'ctrl',\r\n    18: 'alt',\r\n\r\n    8: 'backspace',\r\n    9: 'tab',\r\n    13: 'enter',\r\n    27: 'esc',\r\n    32: 'space',\r\n    46: 'del',\r\n\r\n    37: 'left',\r\n    38: 'up',\r\n    39: 'right',\r\n    40: 'down',\r\n\r\n    189: 'minus',\r\n    187: 'equal',\r\n\r\n    48: 'num_0',\r\n    49: 'num_1',\r\n    50: 'num_2',\r\n    51: 'num_3',\r\n    52: 'num_4',\r\n    53: 'num_5',\r\n    54: 'num_6',\r\n    55: 'num_7',\r\n    56: 'num_8',\r\n    57: 'num_9',\r\n\r\n    65: 'a',\r\n    66: 'b',\r\n    67: 'c',\r\n    68: 'd',\r\n    69: 'e',\r\n    70: 'f',\r\n    71: 'g',\r\n    72: 'h',\r\n    73: 'i',\r\n    74: 'j',\r\n    75: 'k',\r\n\r\n    76: 'l',\r\n    77: 'm',\r\n    78: 'n',\r\n    79: 'o',\r\n    80: 'p',\r\n    81: 'q',\r\n    82: 'r',\r\n    83: 's',\r\n    84: 't',\r\n    85: 'u',\r\n    86: 'v',\r\n    87: 'w',\r\n    88: 'x',\r\n    89: 'y',\r\n    90: 'z',\r\n\r\n    112: 'F1',\r\n    113: 'F2',\r\n    114: 'F3',\r\n    115: 'F4',\r\n    116: 'F5',\r\n    117: 'F6',\r\n    118: 'F7',\r\n    119: 'F8',\r\n    120: 'F9',\r\n    121: 'F10',\r\n    122: 'F11',\r\n    123: 'F12',\r\n}\r\n\r\nexport function getKey(e: KeyboardEvent): KEY | null {\r\n    // @ts-ignore\r\n    let key = KeyBoardMap[e.keyCode] as KEY\r\n    if (!!KEY[key]) {\r\n        return KEY[key]\r\n    } else {\r\n        /*if (e.keyCode !== 229) {\r\n            console.warn(`Can't recognise key`, e)\r\n        }*/\r\n        return null\r\n    }\r\n}\r\n\r\nexport class KeyboardServiceOption {\r\n    [key: string]: (e?: KeyboardEvent) => (void | undefined | boolean)\r\n}\r\n\r\nexport const KeyboardService = {\r\n    options: [] as KeyboardServiceOption[],\r\n    /*订阅点击事件*/\r\n    listen(option: KeyboardServiceOption) {\r\n        if (!option) return\r\n        this.options.push(option)\r\n    },\r\n    /*取消订阅事件*/\r\n    unbindListener(option: KeyboardServiceOption) {\r\n        let index = this.options.indexOf(option)\r\n        if (index > -1) {\r\n            this.options.splice(index, 1)\r\n        }\r\n    },\r\n    /*取消当前激活的元素*/\r\n    cancelActiveElement() {\r\n        const activeElement = document.activeElement as HTMLElement\r\n        if (!!activeElement) activeElement.blur()\r\n        return activeElement\r\n    },\r\n    /*处理window的点击事件*/\r\n    _onkeydown(e: KeyboardEvent) {\r\n        if (e.currentTarget !== e.target) return\r\n        const names = [] as string[];\r\n        e.ctrlKey && names.push('ctrl')\r\n        e.shiftKey && names.push('shift')\r\n        e.altKey && names.push('alt')\r\n        // @ts-ignore\r\n        names.push(KeyBoardMap[e.keyCode])\r\n        const compositionKeyName = names.join('+')\r\n\r\n        const option = this.options[this.options.length - 1]\r\n        if (!!option && !!option[compositionKeyName]) {\r\n            const flag = option[compositionKeyName](e)\r\n            /*默认阻止事件冒泡*/\r\n            if (flag !== false) {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n            }\r\n        }\r\n    },\r\n}\r\n\r\nexport function handleKeyboard(option: { [key in KEY]?: (e: KeyboardEvent) => any }) {\r\n    return (e: KeyboardEvent) => {\r\n        const key = getKey(e)\r\n        if (!!key && !!option[key]) {\r\n            return option[key]!(e)\r\n        }\r\n    }\r\n}\r\n\r\ndocument.body.addEventListener('keydown', e => KeyboardService._onkeydown(e))\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.config.globalProperties.$keyboard = KeyboardService\r\n    },\r\n}","import Button from '../button'\r\nimport ButtonGroup from '../button-group/button-group'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(ButtonGroup, {plugins: [Button]})","import {computed, onMounted, reactive, watch} from 'vue';\r\nimport './input.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {StyleProperties} from \"../../shims\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport {throttle} from 'plain-utils/utils/throttle';\r\n\r\nconsole.log('load input component')\r\n\r\nexport default designComponent({\r\n    name: 'pl-input',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: [String, Number]},\r\n        placeValue: {type: [String, Number]},\r\n\r\n        width: {type: [Number, String, Object, Function], default: null,},        // 输入框默认宽度\r\n        minHeight: {type: [Number, String], default: 100},      // 文本域最小高度\r\n        maxHeight: {type: [Number, String], default: 156},      // 文本域最大高度\r\n        block: {type: Boolean},                                 // 块级元素\r\n        textarea: {type: Boolean},                              // 当前是否为文本域输入框\r\n        suffixIcon: {type: [String, Function]},                 // 右侧图标\r\n        prefixIcon: {type: String},                             // 左侧图标\r\n        clearIcon: {type: Boolean},                             // 清除图标\r\n        clearHandler: Function,                         // 点击清除图标处理逻辑\r\n\r\n        autoHeight: {type: Boolean},                            // 自适应高度\r\n        isFocus: {type: Boolean},                               // 当前是否处于激活状态\r\n        inputReadonly: {type: Boolean},                         // 输入框只读\r\n        throttleEnter: {type: [Boolean, Number]},               // enter按键事件节流\r\n        asyncHandler: {type: Function},                         // 异步处理函数，会自动开启关闭loading状态\r\n\r\n        /*---------------------------------------原生属性-------------------------------------------*/\r\n        inputInnerTabindex: {type: Number, default: 0},\r\n        type: {type: String, default: 'text'},\r\n        placeholder: {type: String},\r\n        nativeAttrs: {type: Object, default: () => ({})},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onFocus: (e: FocusEvent) => true,\r\n        onBlur: (e: Event) => true,\r\n        onKeydown: (e: KeyboardEvent) => true,\r\n        onEnter: (e: KeyboardEvent) => true,\r\n        onEsc: (e: KeyboardEvent) => true,\r\n\r\n        onClickInput: (e: MouseEvent) => true,\r\n        onClickPrefixIcon: (e: MouseEvent) => true,\r\n        onClickSuffixIcon: (e: MouseEvent) => true,\r\n        onClickClearIcon: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots([\r\n            'prepend', 'append', 'hidden'\r\n        ], true)\r\n        const {refs} = useRefs({\r\n            input: HTMLInputElement,\r\n            hiddenInput: HTMLTextAreaElement,\r\n        })\r\n        const {propsState} = useProps(props, {\r\n            width: [useProps.NUMBER, useProps.PROMISE, useProps.FUNCTION],\r\n            minHeight: useProps.NUMBER,\r\n            maxHeight: useProps.NUMBER,\r\n        })\r\n        const {styleComputed} = useStyle({status: undefined})\r\n        const {editComputed, editState} = useEdit()\r\n        const state = reactive({\r\n            autoHeight: null as null | number,\r\n            handlerEnter: null as null | Function,\r\n            handleEnterInner: async (e: KeyboardEvent) => {\r\n                if (editComputed.value.editable) {\r\n                    if (!!props.asyncHandler) {\r\n                        editState.loading = true\r\n                        try {\r\n                            await props.asyncHandler()\r\n                        } catch (e) {\r\n                            console.error(e)\r\n                        } finally {\r\n                            editState.loading = null\r\n                        }\r\n                    } else {\r\n                        emit.onEnter(e)\r\n                    }\r\n                }\r\n            },\r\n        })\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            input: (e: Event) => {\r\n                model.value = (e.target as HTMLInputElement).value\r\n            },\r\n            enter: (e: KeyboardEvent) => {\r\n                state.handlerEnter!(e)\r\n            },\r\n            clickPrefixIcon: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                emit.onClickPrefixIcon(e)\r\n            },\r\n            clickSuffixIcon: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                emit.onClickSuffixIcon(e)\r\n            },\r\n            clickClearIcon: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n                emit.onClickClearIcon(e)\r\n                if (!!props.clearHandler) {\r\n                    props.clearHandler(e)\r\n                } else {\r\n                    methods.clearValue()\r\n                }\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        const classes = useClass(() => [\r\n            `pl-input-shape-${styleComputed.value.shape}`,\r\n            `pl-input-size-${styleComputed.value.size}`,\r\n            {\r\n                [`pl-input-status-${styleComputed.value.status}`]: !!styleComputed.value.status,\r\n                'pl-input-block': props.block,\r\n                'pl-input-disabled': !!editComputed.value.disabled,\r\n                'pl-input-prefix-padding': !!props.prefixIcon,\r\n                'pl-input-suffix-padding': !!props.suffixIcon || !!props.clearIcon || editComputed.value.loading,\r\n                'pl-input-prefix': !!props.prefixIcon,\r\n                'pl-input-suffix': !!props.suffixIcon || editComputed.value.loading,\r\n                'pl-input-clear': !!props.clearIcon,\r\n                'pl-input-empty': !model.value && !props.placeValue,\r\n                'pl-input-focus': props.isFocus,\r\n                'pl-input-not-editable': !editComputed.value.editable,\r\n            }\r\n        ])\r\n\r\n        const styles = computed(() => {\r\n            const styles: StyleProperties = {}\r\n            /*没有前置以及后置插槽以及非块级元素的情况下，设置宽度*/\r\n            if (propsState.width !== null && !props.block) {\r\n                styles.width = unit(propsState.width)\r\n            }\r\n            /*textarea自动高度的时候，取最大高度最小高度以及滚动高度*/\r\n            if (!!props.textarea) {\r\n                if (!props.autoHeight || state.autoHeight == null) {\r\n                    styles.height = unit(state.autoHeight)\r\n                } else {\r\n                    if (propsState.maxHeight != null && state.autoHeight > propsState.maxHeight) {\r\n                        styles.height = unit(propsState.maxHeight)\r\n                    } else if (state.autoHeight < propsState.minHeight) {\r\n                        styles.height = unit(propsState.minHeight)\r\n                    } else {\r\n                        styles.height = unit(state.autoHeight)\r\n                    }\r\n                }\r\n            }\r\n            return styles\r\n        })\r\n\r\n        const publicProps = computed(() => ({\r\n            style: styles.value,\r\n            disabled: editComputed.value.disabled,\r\n            readonly: props.inputReadonly || editComputed.value.readonly || editComputed.value.loading,\r\n            value: model.value,\r\n            placeholder: props.placeholder,\r\n            ...(props.nativeAttrs || {}),\r\n\r\n            // 发现一个非常奇怪的现象，div.pl-input-inner 里面的input、派发的input事件，居然也能够在 div.pl-input-inner这个div节点上监听到。神奇\r\n            ...(!slots.default.isExist() ? {\r\n                onInput: (e: Event) => {\r\n                    /*ie 下不知道为什么页面初始化的之后这里默认就执行了一次，这里判断绕过这个问题*/\r\n                    if (e.target === document.activeElement) {\r\n                        handler.input(e)\r\n                    }\r\n                },\r\n            } : {}),\r\n\r\n            onClick: emit.onClickInput,\r\n            onFocus: emit.onFocus,\r\n            onBlur: emit.onBlur,\r\n            onKeydown: (e: KeyboardEvent) => {\r\n                emit.onKeydown(e)\r\n                switch (getKey(e)) {\r\n                    case KEY.enter:\r\n                        return handler.enter(e)\r\n                    case KEY.esc:\r\n                        return emit.onEsc(e)\r\n                }\r\n            },\r\n            ref: \"input\",\r\n        } as any))\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            clearValue: () => {\r\n                model.value = undefined\r\n            },\r\n            focus: () => {\r\n                if (!!refs.input && !!refs.input.focus) {\r\n                    refs.input.focus()\r\n                }\r\n            },\r\n            blur: () => {\r\n                if (!!refs.input && !!refs.input.blur) {\r\n                    refs.input.blur()\r\n                }\r\n            },\r\n            /*重置文本域高度*/\r\n            resetTextAreaHeight: throttle(() => {\r\n                if (!!props.autoHeight && !!props.textarea) {\r\n                    setTimeout(() => state.autoHeight = refs.hiddenInput!.scrollHeight + 12, 0)\r\n                }\r\n            }, 300),\r\n        }\r\n\r\n        /*---------------------------------------watcher-------------------------------------------*/\r\n\r\n        watch(() => model.value, () => {\r\n            methods.resetTextAreaHeight()\r\n        })\r\n        watch(() => props.throttleEnter, (val) => {\r\n            if (!val) {\r\n                state.handlerEnter = state.handleEnterInner\r\n            }\r\n            if (val === true) {\r\n                val = 1000\r\n            }\r\n            state.handlerEnter = throttle(state.handleEnterInner, val as number, {trailing: true})\r\n        }, {immediate: true})\r\n\r\n        onMounted(() => {\r\n            if (props.textarea) {\r\n                methods.resetTextAreaHeight()\r\n            }\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                refs,\r\n                state,\r\n                propsState,\r\n                methods,\r\n                model,\r\n            },\r\n            render: () => {\r\n\r\n                if (props.textarea) {\r\n                    /*渲染文本域*/\r\n                    return (\r\n                        <div class={['pl-textarea', classes.value]}>\r\n                            <textarea class=\"pl-textarea-inner\" {...publicProps.value}/>\r\n                            <textarea class=\"pl-textarea-inner pl-textarea-hidden\" ref=\"hiddenInput\" value={model.value}/>\r\n                        </div>\r\n                    )\r\n                } else {\r\n                    /*普通输入框*/\r\n                    const input = (\r\n                        <div class={['pl-input', classes.value]}>\r\n                            {!!props.prefixIcon && <span class=\"pl-input-prefix-icon\" onClick={handler.clickPrefixIcon}><pl-icon icon={props.prefixIcon}/></span>}\r\n\r\n                            {slots.default.isExist() ?\r\n                                <div tabIndex={props.inputInnerTabindex} class=\"pl-input-inner\" {...publicProps.value}>\r\n                                    {slots.default()}\r\n                                </div>\r\n                                :\r\n                                <input class=\"pl-input-inner\" {...publicProps.value}/>}\r\n\r\n                            {!!props.suffixIcon && <span class=\"pl-input-suffix-icon\">\r\n                                {typeof props.suffixIcon === 'function' ? (props.suffixIcon as any)() : <pl-icon onMousedown={handler.clickSuffixIcon} icon={props.suffixIcon}/>}\r\n                            </span>}\r\n                            {!!props.clearIcon && (<span class=\"pl-input-suffix-icon pl-input-clear-icon\"><pl-icon onMousedown={handler.clickClearIcon} icon=\"el-icon-error\"/></span>)}\r\n                            {!!editComputed.value.loading && <pl-loading class=\"pl-input-suffix-icon\"/>}\r\n                            {slots.hidden.isExist() && <div class=\"pl-input-inner-hidden\">{slots.hidden()}</div>}\r\n                        </div>\r\n                    )\r\n\r\n                    if (!slots.prepend.isExist() && !slots.append.isExist()) {\r\n                        return input\r\n                    } else {\r\n                        /*输入框组*/\r\n                        return (\r\n                            <div class=\"pl-input-group\">\r\n                                {slots.prepend.isExist() && <div class=\"pl-input-prepend\">{slots.prepend()}</div>}\r\n                                {input}\r\n                                {slots.append.isExist() && <div class=\"pl-input-append\">{slots.append()}</div>}\r\n                            </div>\r\n                        )\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-input-inner-tags',\r\n    props: {\r\n        data: {type: Array},\r\n        collapseTags: {type: Boolean, default: true},\r\n    },\r\n    setup({props}) {\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {item: Object, index: Number},\r\n        })\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-input-inner-tags\">\r\n                    <span class=\"pl-input-inner-tag-item pl-input-inner-tag-item-takeover\">&nbsp;</span>\r\n                    {\r\n                        (props.collapseTags ? props.data!.slice(0, 3) : props.data!).map((item: any, index) => (\r\n                            <span key={index} class=\"pl-input-inner-tag-item\">\r\n                            {scopedSlots.default({item, index}, null)}\r\n                        </span>\r\n                        ))\r\n                    }\r\n                    {props.collapseTags && props.data!.length > 3 && <span class=\"pl-input-inner-tag-item\">+{props.data!.length - 3}</span>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import Input from \"./input\";\r\nimport Icon from '../icon'\r\nimport InputInnerTags from './input-inner-tags'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(\r\n    Input,\r\n    {\r\n        plugins: [Icon],\r\n        exposeComponents: {InputInnerTags}\r\n    },\r\n)","import './loading-mask.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {computed, nextTick, reactive, watch, Transition, onMounted} from 'vue';\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Loading from '../loading'\r\n\r\nexport default designComponent({\r\n    name: 'pl-loading-mask',\r\n    props: {\r\n        modelValue: {type: Boolean},                                    // 是否打开loading遮罩\r\n        message: {type: String},                                        // 提示信息\r\n        loadingType: {type: String, default: 'delta'},                  // loading类型\r\n        background: {type: String, default: 'rgba(255,255,255,0.85)'},  // 遮罩背景色\r\n        unlock: {type: Boolean},                                        // 取消阻止点击事件\r\n        fixedPosition: {type: Boolean},                                 // 是否为根节点的加载遮罩\r\n        inDirective: {type: Boolean},                                   // 是否为遮罩指令服务的实例\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean | undefined) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLElement\r\n        })\r\n\r\n        const modelValue = useModel(() => props.modelValue, event.emit.onUpdateModelValue)\r\n\r\n        const state = reactive({\r\n            isMounted: false,\r\n            zIndex: nextIndex() + (!props.fixedPosition ? -1500 : 0) + 1,\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-loading-mask',\r\n            {\r\n                'pl-loading-mask-unlock': props.unlock,\r\n                'pl-loading-mask-fixed-position': props.fixedPosition\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            style.background = props.background\r\n            style.zIndex = state.zIndex\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 检查父节点的position是否为 absolute，relative或者fixed，不是的话，设置为 relative\r\n             * @author  韦胜健\r\n             * @date    2020/11/3 16:42\r\n             */\r\n            resetParentPosition: async () => {\r\n                if (props.fixedPosition) {\r\n                    return\r\n                }\r\n                await nextTick()\r\n                const el = refs.el\r\n                if (el) {\r\n                    let parentNode = el.parentNode as HTMLElement\r\n                    if (props.inDirective) {\r\n                        parentNode = parentNode.parentNode as HTMLElement\r\n                    }\r\n                    if (!!parentNode) {\r\n                        const styles = window.getComputedStyle(parentNode)\r\n                        const position = styles.position\r\n                        if (['absolute', 'relative', 'fixed'].indexOf(position) === -1) {\r\n                            parentNode.style.position = 'relative'\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        watch(() => modelValue.value && state.isMounted, async val => {\r\n            !!val && (state.zIndex = nextIndex() + (!props.fixedPosition ? -1500 : 0) + 1);\r\n            await utils.resetParentPosition()\r\n        })\r\n\r\n        onMounted(() => {\r\n            utils.resetParentPosition()\r\n            setTimeout(() => {\r\n                state.isMounted = true\r\n            }, 23)\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <Transition name=\"pl-transition-loading-mask\">\r\n                    {!!modelValue.value && state.isMounted && (\r\n                        <div style={styles.value} class={classes.value} ref=\"el\">\r\n                            <Loading type={props.loadingType}/>\r\n                            {!!props.message && <span>{props.message}</span>}\r\n                        </div>\r\n                    )}\r\n                </Transition>\r\n            )\r\n        }\r\n    },\r\n})","import Loading from '../loading'\r\nimport LoadingMask from './loading-mask'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(LoadingMask, {\r\n    plugins: [\r\n        Loading,\r\n    ]\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport './checkbox-inner.scss'\r\nimport {CheckboxStatus} from \"../../utils/constant\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-checkbox-inner',\r\n    props: {\r\n        disabled: {type: Boolean},\r\n        checkStatus: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const classes = useClass(() => [\r\n            'pl-checkbox-inner',\r\n            `pl-checkbox-inner-status-${props.checkStatus}`,\r\n            {\r\n                'pl-checkbox-inner-disabled': props.disabled,\r\n            }\r\n        ])\r\n\r\n        return {\r\n            render: () => (\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" class={classes.value}>\r\n                    {props.checkStatus === CheckboxStatus.check && <polyline points=\"22,50 45,75 75,25\" class=\"pl-checkbox-inner-check-polyline\"/>}\r\n                    {props.checkStatus === CheckboxStatus.minus && <rect x=\"15\" y=\"15\" width=\"70\" height=\"70\" class=\"pl-checkbox-inner-minus-polyline\"/>}\r\n                </svg>\r\n            )\r\n        }\r\n    },\r\n})","import inner from './checkbox-inner'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(inner)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from '../../use/useEdit';\r\nimport {StyleProps, useStyle} from '../../use/useStyle';\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport Checkbox from '../checkbox/checkbox'\r\nimport {CheckboxStatus, DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {computed, inject, PropType} from 'vue';\r\nimport {$$notice} from \"../notice-service\";\r\n\r\nconst CheckboxGroup = designComponent({\r\n    name: 'pl-checkbox-group',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: Array as PropType<(string | number)[]>},\r\n\r\n        min: {type: Number},                                        // 最大勾选个数\r\n        max: {type: Number},                                        // 最小勾选个数\r\n        itemWidth: {type: [String, Number]},                        // 文本宽度\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: (string | number)[] | undefined) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const formItem = inject('@@pl-form-item', null)\r\n\r\n        /*插槽*/\r\n        const {slots} = useSlots()\r\n        /*可编辑控制*/\r\n        const {editComputed} = useEdit()\r\n        /*样式控制*/\r\n        useStyle({status: DEFAULT_STATUS})\r\n        /*格式化属性*/\r\n        const {propsState} = useProps(props, {\r\n            min: useProps.NUMBER,\r\n            max: useProps.NUMBER,\r\n            itemWidth: useProps.NUMBER,\r\n        })\r\n        /*绑定值*/\r\n        const modelValue = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        /*子组件Checkbox*/\r\n        const children = CheckboxGroupCollector.parent()\r\n        /*可用子组件*/\r\n        const activeChildren = computed(() => children.filter(({innerState: {props: {checkboxForAll, customReadonly}}}) => !checkboxForAll && !customReadonly))\r\n\r\n        /*可用子组件keys*/\r\n        const allKeys = computed((() => activeChildren.value.map(({innerState: {props: {val}}}) => val)))\r\n\r\n        /*当前选择状态*/\r\n        const checkStatus = computed(() => {\r\n            let hasCheck = false\r\n            let hasUncheck = false\r\n            if (!modelValue.value) {\r\n                return CheckboxStatus.uncheck\r\n            }\r\n            activeChildren\r\n                .value\r\n                .forEach(child => modelValue.value!\r\n                    .indexOf(child.innerState.props.val!) > -1 ? hasCheck = true : hasUncheck = true)\r\n\r\n            if (hasCheck && !hasUncheck) {\r\n                return CheckboxStatus.check\r\n            }\r\n            if (!hasCheck && hasUncheck) {\r\n                return CheckboxStatus.uncheck\r\n            }\r\n            return CheckboxStatus.minus\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 子组件用来获取状态工具函数\r\n             * @author  韦胜健\r\n             * @date    2020/11/4 11:26\r\n             */\r\n            getCheckStatus: (checkbox: typeof Checkbox.use.class): CheckboxStatus => {\r\n                const {innerState: {props: {checkboxForAll, val}}} = checkbox\r\n                if (checkboxForAll) {\r\n                    return checkStatus.value\r\n                } else {\r\n                    return !!modelValue.value && modelValue.value.indexOf(val!) > -1 ? CheckboxStatus.check : CheckboxStatus.uncheck\r\n                }\r\n            },\r\n            exceed: {\r\n                /**\r\n                 * 是否已经超出了max\r\n                 * @author  韦胜健\r\n                 * @date    2020/11/4 11:26\r\n                 */\r\n                max: (val: (string | number)[] | undefined) => {\r\n                    if (propsState.max == null) {\r\n                        return false\r\n                    }\r\n                    return !!val && val.length > propsState.max\r\n                },\r\n                /**\r\n                 * 是否已经超出了min\r\n                 * @author  韦胜健\r\n                 * @date    2020/11/4 11:26\r\n                 */\r\n                min: (val: (string | number)[] | undefined) => {\r\n                    if (propsState.min == null) {\r\n                        return false\r\n                    }\r\n                    return !val || val.length < propsState.min\r\n                }\r\n            },\r\n            changeValue: {\r\n                /**\r\n                 * 添加选项赋值\r\n                 * @author  韦胜健\r\n                 * @date    2020/11/4 11:26\r\n                 */\r\n                add: (val: (string | number)[]) => {\r\n                    if (utils.exceed.max(val)) {\r\n                        $$notice.warn(`最多可选 ${propsState.max} 个选项！`)\r\n                    } else {\r\n                        modelValue.value = val\r\n                    }\r\n                },\r\n                /**\r\n                 * 删除选项赋值\r\n                 * @author  韦胜健\r\n                 * @date    2020/11/4 11:26\r\n                 */\r\n                delete: (val: (string | number)[]) => {\r\n                    if (utils.exceed.min(val)) {\r\n                        $$notice.warn(`最少选择 ${propsState.min} 个选项！`)\r\n                    } else {\r\n                        modelValue.value = val\r\n                    }\r\n                }\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            /**\r\n             * 处理点击按钮事件\r\n             * @author  韦胜健\r\n             * @date    2020/11/4 11:27\r\n             */\r\n            clickCheckbox: (checkbox: typeof Checkbox.use.class) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                const {innerState: {props: {val, checkboxForAll}}} = checkbox\r\n\r\n                /*全选按钮*/\r\n                if (checkboxForAll) {\r\n                    if (checkStatus.value !== CheckboxStatus.check) {\r\n                        /*全选*/\r\n                        utils.changeValue.add([...allKeys.value as string[]])\r\n                    } else {\r\n                        /*取消全选*/\r\n                        utils.changeValue.delete([])\r\n                    }\r\n                    return\r\n                }\r\n\r\n                /*单个按钮*/\r\n                if (!val) {\r\n                    throw new Error('Checkbox: val is necessary when Checkbox in CheckboxGroup')\r\n                }\r\n                if (!modelValue.value) {\r\n                    return utils.changeValue.add([val])\r\n                }\r\n                const value = [...modelValue.value]\r\n                const index = value.indexOf(val)\r\n                if (index > -1) {\r\n                    /*删除*/\r\n                    value.splice(index, 1)\r\n                    utils.changeValue.delete(value)\r\n                } else {\r\n                    /*添加*/\r\n                    utils.changeValue.add([...value, val])\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                utils,\r\n                handler,\r\n                propsState,\r\n            },\r\n            render: () => !formItem ? slots.default() : (\r\n                <div class=\"pl-checkbox-group\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const CheckboxGroupCollector = useCollect(() => ({\r\n    parent: CheckboxGroup,\r\n    child: Checkbox,\r\n}))\r\n\r\nexport default CheckboxGroup","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {computed, Transition} from 'vue';\r\nimport {CheckboxStatus, DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {CheckboxGroupCollector} from \"../checkbox-group/checkbox-group\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {useStyles} from \"../../use/useStyles\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-checkbox',\r\n    directives: {ClickWave},\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {},\r\n        val: {type: [String, Number]},                              // 多选时选中值\r\n        label: {type: String},                                      // 显示文本\r\n        width: {type: [String, Number]},                            // 宽度\r\n        trueValue: {default: true},                                 // 选中实际值\r\n        falseValue: {default: false},                               // 非选中值\r\n\r\n        checkboxForAll: {type: Boolean},                            // 是否为 checkbox 全选按钮\r\n        checkStatus: {type: String},                                // checkbox 自定义状态\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onClick: (e?: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        /*group父组件*/\r\n        const checkboxGroup = CheckboxGroupCollector.child({injectDefaultValue: null})\r\n        /*绑定值*/\r\n        const modelValue = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        /*格式化属性值*/\r\n        const {propsState} = useProps(props, {\r\n            label: useProps.PROMISE,\r\n            width: useProps.NUMBER,\r\n        })\r\n        /*插槽*/\r\n        const {slots} = useSlots(['label'])\r\n        /*作用域插槽*/\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {checked: Boolean, status: String, click: Function},\r\n        })\r\n        /*可编辑控制*/\r\n        const {editComputed} = useEdit()\r\n        /*样式控制*/\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        /*当前组件内部变量引用*/\r\n        const refer = {innerState: {props, editComputed}}\r\n        /*当前选中状态*/\r\n        const checkStatus = computed((): CheckboxStatus => {\r\n            if (!!props.checkStatus) {\r\n                return props.checkStatus as CheckboxStatus\r\n            }\r\n            if (!!checkboxGroup) {\r\n                return checkboxGroup.utils.getCheckStatus(refer)\r\n            } else {\r\n                return modelValue.value === props.trueValue ? CheckboxStatus.check : CheckboxStatus.uncheck\r\n            }\r\n        })\r\n\r\n        const classes = useClass(() => [\r\n            'pl-checkbox',\r\n            `pl-checkbox-status-${styleComputed.value.status}`,\r\n            `pl-checkbox-size-${styleComputed.value.size}`,\r\n            `pl-checkbox-check-status-${checkStatus.value}`,\r\n            {'pl-checkbox-disabled': editComputed.value.disabled},\r\n        ])\r\n\r\n        /*当前选项宽度*/\r\n        const targetWidth = computed(() => {\r\n            if (!!propsState.width) return propsState.width\r\n            if (!!checkboxGroup && !!checkboxGroup.propsState.itemWidth) return checkboxGroup.propsState.itemWidth\r\n            return null\r\n        })\r\n\r\n        const styles = useStyles(style => {\r\n            style.width = unit(targetWidth.value)\r\n        })\r\n\r\n        const handler = {\r\n            clickEl: (e?: MouseEvent) => {\r\n                if (!!e) {\r\n                    e.stopPropagation()\r\n                }\r\n                emit.onClick(e)\r\n                if (!editComputed.value.editable || props.customReadonly) {\r\n                    return\r\n                }\r\n                if (!!checkboxGroup) {\r\n                    return checkboxGroup.handler.clickCheckbox(refer)\r\n                }\r\n                modelValue.value = checkStatus.value === CheckboxStatus.check ? props.falseValue : props.trueValue\r\n\r\n                if (!!e) {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer,\r\n            render: () => scopedSlots.default(\r\n                {\r\n                    checked: checkStatus.value === CheckboxStatus.check,\r\n                    status: checkStatus.value,\r\n                    click: handler.clickEl,\r\n                },\r\n                (\r\n                    <div class={classes.value}\r\n                         style={styles.value}\r\n                         onClick={handler.clickEl}\r\n                         v-click-wave={{disabled: !editComputed.value.editable}}>\r\n                        <span class=\"plain-click-node\">\r\n                            <Transition name=\"pl-transition-scale\" mode=\"out-in\">\r\n                                <pl-checkbox-inner\r\n                                    checkStatus={checkStatus.value}\r\n                                    key={checkStatus.value}\r\n                                    disabled={editComputed.value.disabled}/>\r\n                            </Transition>\r\n                        </span>\r\n                        {slots.label(!!propsState.label ? <span class=\"pl-checkbox-label\">{propsState.label}</span> : null)}\r\n                    </div>\r\n                ))\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport './grid.scss'\r\nimport {PropType} from 'vue';\r\n\r\nexport enum GridAlign {\r\n    left = 'left',\r\n    center = 'center',\r\n    right = 'right',\r\n}\r\n\r\nexport enum GridJustify {\r\n    start = \"start\",\r\n    end = \"start\",\r\n    center = \"start\",\r\n    'space-around' = \"space-around\",\r\n    'space-between' = \"space-between\",\r\n}\r\n\r\nexport const Row = designComponent({\r\n    name: 'pl-row',\r\n    props: {\r\n        type: {type: String as PropType<undefined | null | string>},        //类型,type\r\n        align: {type: String as PropType<GridAlign>},                       //对其方式,left|center|right\r\n        justify: {type: String as PropType<GridJustify>},                   //内容弹性布局方式,start,end,center,space-around,space-between\r\n        gutter: {type: [Number, String], default: 0},                       //间隔\r\n    },\r\n    provideRefer: true,\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots()\r\n        const classes = useClass(() => [\r\n            'pl-row',\r\n            {\r\n                [`pl-row-${props.type}`]: !!props.type,\r\n                [`pl-row-${props.type}-${props.align}`]: !!props.align,\r\n                [`pl-row-${props.type}-${props.justify}`]: !!props.justify,\r\n            }\r\n        ])\r\n        const styles = useStyles(style => {\r\n            const gutter = Number(props.gutter)\r\n            if (gutter !== 0) {\r\n                style = {\r\n                    marginLeft: unit(gutter / -2),\r\n                    marginRight: unit(gutter / -2)\r\n                };\r\n            }\r\n            return style\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport default createComponentPlugin(Row)","import inner from '../checkbox-inner'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport checkbox from './checkbox'\r\nimport './checkbox.scss'\r\n\r\nexport default createComponentPlugin(checkbox, {\r\n    plugins: [inner]\r\n})","import checkbox from '../checkbox'\r\nimport group from './checkbox-group'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(group, {plugins: [checkbox]})","import {designComponent} from \"../../use/designComponent\";\r\nimport {Row} from './row'\r\nimport {SingleClass, useClass} from \"../../use/useClasses\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {PropType} from 'vue';\r\n\r\nexport type GridColSize = number | {\r\n    span: number,\r\n    offset: number,\r\n}\r\n\r\nexport const Col = designComponent({\r\n    name: 'pl-col',\r\n    props: {\r\n        span: {type: [Number, String] as PropType<string | number>},\r\n        order: {type: [Number, String] as PropType<string | number>},\r\n        offset: {type: [Number, String] as PropType<string | number>},\r\n        push: {type: [Number, String] as PropType<string | number>},\r\n        pull: {type: [Number, String] as PropType<string | number>},\r\n        className: String,\r\n        xs: {type: [Number, Object] as PropType<GridColSize>},\r\n        sm: {type: [Number, Object] as PropType<GridColSize>},\r\n        md: {type: [Number, Object] as PropType<GridColSize>},\r\n        lg: {type: [Number, Object] as PropType<GridColSize>},\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        const row = Row.use.inject()\r\n        const classes = useClass(() => {\r\n            let classList = [\r\n                'pl-col',\r\n                {\r\n                    [`pl-col-span-${props.span}`]: props.span,\r\n                    [`pl-col-order-${props.order}`]: props.order,\r\n                    [`pl-col-offset-${props.offset}`]: props.offset,\r\n                    [`pl-col-push-${props.push}`]: props.push,\r\n                    [`pl-col-pull-${props.pull}`]: props.pull,\r\n                    [`${props.className}`]: !!props.className\r\n                }\r\n            ] as SingleClass[];\r\n\r\n            const sizeProps = props;\r\n            (['xs', 'sm', 'md', 'lg'] as ['xs', 'sm', 'md', 'lg']).forEach(size => {\r\n                if (typeof sizeProps[size] === 'number') {\r\n                    classList.push(`pl-col-${size}-${sizeProps[size]}`);\r\n                } else if (typeof sizeProps[size] === 'object') {\r\n                    let obj = sizeProps[size];\r\n                    !!obj && Object.entries(obj).forEach(([key, val]) => classList.push(key !== 'span' ? `pl-col-${size}-${key}-${val}` : `pl-col-span-${size}-${val}`))\r\n                }\r\n            });\r\n            return classList;\r\n        })\r\n        const styles = useStyles(style => {\r\n            if ((Number(row.props.gutter)) !== 0) {\r\n                style = {\r\n                    paddingLeft: (Number(row.props.gutter)) / 2 + 'px',\r\n                    paddingRight: (Number(row.props.gutter)) / 2 + 'px'\r\n                };\r\n            }\r\n            return style;\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport default createComponentPlugin(Col)","import Row from \"./row\";\r\nimport Col from './col'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Row, {exposeComponents: {Col}})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport './radio-inner.scss'\r\n\r\nexport default designComponent({\r\n    name: 'pl-radio-inner',\r\n    props: {\r\n        checkStatus: {type: String},                // check,uncheck\r\n    },\r\n    setup({props}) {\r\n\r\n        const classes = useClass(() => [\r\n            'pl-radio-inner',\r\n            `pl-radio-inner-${props.checkStatus}`,\r\n        ])\r\n\r\n        return {\r\n            render: () => (\r\n                <svg class={classes.value} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\">\r\n                    {props.checkStatus === 'check' && <circle cx=\"50\" cy=\"50\" r=\"30\"/>}\r\n                </svg>\r\n            )\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport inner from './radio-inner'\r\n\r\nexport default createComponentPlugin(inner)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {CheckboxStatus, DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {inject} from 'vue';\r\n\r\nexport default designComponent({\r\n    name: 'pl-radio-group',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {},\r\n        itemWidth: {type: [String, Number]},                       // 每一个单选框的宽度\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit}}) {\r\n\r\n        const formItem = inject('@@pl-form-item', null)\r\n\r\n        const {slots} = useSlots()\r\n        useEdit()\r\n        useStyle({status: DEFAULT_STATUS})\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const {propsState} = useProps(props, {\r\n            itemWidth: useProps.NUMBER,\r\n        })\r\n\r\n        const handler = {\r\n            onClickRadio: (val: any) => {\r\n                model.value = val\r\n            },\r\n        }\r\n        const utils = {\r\n            getCheckStatus: (val: any) => {\r\n                return val === model.value ? CheckboxStatus.check : CheckboxStatus.uncheck\r\n            }\r\n        }\r\n        return {\r\n            refer: {\r\n                propsState,\r\n                handler,\r\n                utils,\r\n            },\r\n            render: () => !formItem ? slots.default() : (\r\n                <div class=\"pl-radio-group\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import group from './radio-group'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(group)","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, StyleStatus, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {computed, Transition} from 'vue';\r\nimport {CheckboxStatus, DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport './radio.scss'\r\nimport Group from '../radio-group'\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-radio',\r\n    directives: {ClickWave},\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {},                                             // 双向绑定值\r\n        val: {type: [String, Number]},                              // 在group中的唯一标识\r\n        label: {type: String},                                      // 显示文本\r\n        width: {type: [String, Number]},                            // 宽度\r\n        trueValue: {default: true},                                 // 真值\r\n        falseValue: {default: false},                               // 假值\r\n        checkStatus: {type: String},                                // 自定义选中状态\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onClick: (e?: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const group = Group.use.inject(null)\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {checked: Boolean, status: String, click: Function},\r\n        })\r\n        const {slots} = useSlots(['label'])\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        const {propsState} = useProps(props, {\r\n            width: useProps.NUMBER,\r\n        })\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const checkStatus = computed(() => {\r\n            if (!!props.checkStatus) {\r\n                return props.checkStatus as CheckboxStatus\r\n            }\r\n            if (!!group) {\r\n                return group.utils.getCheckStatus(props.val)\r\n            } else {\r\n                return model.value === props.trueValue ? CheckboxStatus.check : CheckboxStatus.uncheck\r\n            }\r\n        })\r\n\r\n        const classes = useClass(() => [\r\n            'pl-radio',\r\n            `pl-radio-status-${styleComputed.value.status}`,\r\n            `pl-radio-size-${styleComputed.value.size}`,\r\n            {\r\n                'pl-radio-checked': checkStatus.value === CheckboxStatus.check,\r\n                'pl-radio-disabled': editComputed.value.disabled,\r\n            },\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            let width: number | null = null;\r\n            if (!!propsState.width) {\r\n                width = propsState.width as number\r\n            }\r\n            if (!!group && !!group.propsState.itemWidth) {\r\n                width = group.propsState.itemWidth as number\r\n            }\r\n            if (width != null) {\r\n                style.width = unit(width)\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            click: (e?: MouseEvent) => {\r\n                if (!!e) {\r\n                    e.stopPropagation()\r\n                }\r\n                emit.onClick(e)\r\n                if (!editComputed.value.editable || props.customReadonly) {\r\n                    return\r\n                }\r\n                if (!!group) {\r\n                    group.handler.onClickRadio(props.val)\r\n                } else {\r\n                    model.value = checkStatus.value === CheckboxStatus.check ? props.falseValue : props.trueValue\r\n                }\r\n\r\n                if (!!e) {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                }\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n                if (getKey(e) === KEY.space) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    handler.click(e as any)\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                return scopedSlots.default({\r\n                    checked: checkStatus.value === CheckboxStatus.check,\r\n                    status: checkStatus.value,\r\n                    click: handler.click,\r\n                }, (\r\n                    <div\r\n                        class={classes.value}\r\n                        style={styles.value}\r\n                        tabindex={0}\r\n                        v-click-wave={{disabled: !editComputed.value.editable}}\r\n                        onClick={handler.click}\r\n                        onKeydown={handler.keydown}\r\n                    >\r\n                        <span class=\"plain-click-node\">\r\n                            <Transition name=\"pl-transition-fade\" mode=\"out-in\">\r\n                                <pl-radio-inner checkStatus={checkStatus.value}\r\n                                                key={checkStatus.value}\r\n                                                disabled={editComputed.value.disabled}/>\r\n                            </Transition>\r\n                        </span>\r\n                        {slots.label(<span class=\"pl-radio-label\">{props.label}</span>)}\r\n                    </div>\r\n                ))\r\n            }\r\n        }\r\n    },\r\n})","import inner from '../radio-inner'\r\nimport radio from './radio'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(radio, {plugins: [inner]})","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, StyleShape, StyleSize, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {computed, onBeforeUnmount, reactive, ref, Teleport, Transition, watch} from 'vue';\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {KeyboardService, KeyboardServiceOption} from \"../keyboard\";\r\nimport './dialog.scss'\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport Button from '../button'\r\nimport LoadingMask from '../loading-mask'\r\n\r\nexport default designComponent({\r\n    name: 'pl-dialog',\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n\r\n        modelValue: {type: Boolean},                                            // model绑定是否打开对话框\r\n\r\n        height: {type: [String, Number]},                                       // 对话框高度\r\n        width: {type: [String, Number]},                                        // 对话框宽度\r\n        minHeight: {type: [String, Number]},                                    // 最小高度\r\n        minWidth: {type: [String, Number]},                                     // 最小宽度\r\n        maxHeight: {type: [String, Number]},                                    // 最大高度\r\n        maxWidth: {type: [String, Number]},                                     // 最大宽度\r\n        fullHeight: {type: Boolean},                                            // 撑满高度\r\n        fullWidth: {type: Boolean},                                             // 撑满宽度\r\n\r\n        wrapperPadding: {type: [String, Boolean], default: '15vh 5vw'},         // body的内边距\r\n        contentPadding: {type: Boolean, default: true},                         // 内容内边距\r\n        showHead: {type: Boolean, default: true},                               // 是否展示对话框标题栏\r\n        transition: {type: String, default: 'pl-transition-dialog'},            // 弹框动画, pl-transition-dialog，pl-transition-dialog-top,pl-transition-dialog-left,pl-transition-dialog-right,pl-transition-dialog-bottom\r\n\r\n        title: {type: [String, Object], default: '提示'},                        // 对话框标题\r\n        fullscreen: {type: Boolean},                                            // 是否全屏\r\n        mask: {type: Boolean, default: true},                                   // 是否需要遮罩\r\n        dialogClass: {type: String},                                            // 对话框内容自定义类名\r\n        serviceClass: {type: String},                                           // 对话框服务内容自定义类名\r\n        cancelOnClickMask: {type: Boolean, default: true},                      // 是否在点击遮罩的时候关闭对话框\r\n        showClose: {type: Boolean, default: true},                              // 是否展示关闭按钮\r\n        beforeClose: Function,                                                  // 关闭之前的回调\r\n        center: {type: Boolean},                                                // 是否纵向居中对其\r\n        destroyOnClose: {type: Boolean, default: true},                         // 关闭的时候是否销毁内容\r\n\r\n        confirmButton: {type: Boolean},                                         // 是否显示确认按钮\r\n        cancelButton: {type: Boolean},                                          // 是否显示取消按钮\r\n        closeOnConfirm: {type: Boolean, default: true},                         // 是否点击确认按钮之后自动关闭\r\n        closeOnCancel: {type: Boolean, default: true},                          // 是否点击取消按钮之后自动关闭\r\n        confirmButtonText: {type: [String, Object], default: '确认'},            // 确认按钮文本\r\n        cancelButtonText: {type: [String, Object], default: '取消'},             // 取消按钮文本\r\n        confirmOnEnter: {type: Boolean, default: true},                         // 是否在点击 enter 按键的时候触发 confirm 事件\r\n        cancelOnEsc: {type: Boolean, default: true},                            // 是否在点击 esc 按键的时候出发 cancel事件\r\n        disabledCancel: {type: Boolean},                                        // 禁用cancel，当任何动作触发cancel时，不做任何处理，适用于开发者完全控制对话框的情况，对话框内置的按钮以及键盘事件不做任何处理\r\n        disabledConfirm: {type: Boolean},                                       // 禁用confirm，当任何动作触发confirm时，不做任何处理,适用于开发者完全控制对话框的情况,对话框内置的按钮以及键盘事件不做任何处理\r\n\r\n        vertical: {type: String, default: 'start'},                             // 纵向对其方式：start,center,end\r\n        horizontal: {type: String, default: 'center'},                          // 横向对其方式：start,center,end\r\n        loading: {type: Boolean},                                               // 弹出框添加 加载中的遮罩\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true,\r\n        onConfirm: () => true,\r\n        onCancel: () => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {slots} = useSlots(['head', 'foot'], true)\r\n        const {refs} = useRefs({\r\n            body: HTMLDivElement,\r\n        })\r\n        const state = reactive({\r\n            zIndex: nextIndex(),\r\n            loading: false,\r\n        })\r\n        const isLoading = computed(() => state.loading || props.loading)\r\n        const {styleComputed} = useStyle({status: undefined})\r\n        const model = ref(false)\r\n        const {propsState} = useProps(props, {\r\n            height: useProps.NUMBER,\r\n            width: useProps.NUMBER,\r\n            minHeight: useProps.NUMBER,\r\n            minWidth: useProps.NUMBER,\r\n            maxHeight: useProps.NUMBER,\r\n            maxWidth: useProps.NUMBER,\r\n            title: useProps.PROMISE,\r\n        }) as {\r\n            propsState: {\r\n                height: number,\r\n                width: number,\r\n                minHeight: number,\r\n                minWidth: number,\r\n                maxHeight: number,\r\n                maxWidth: number,\r\n                title: string,\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n        const wrapperStyles = computed(() => ({\r\n            alignItems: props.center ? null : `flex-${props.vertical}`.replace('flex-center', 'center'),\r\n            justifyContent: `flex-${props.horizontal}`.replace('flex-center', 'center'),\r\n            zIndex: state.zIndex,\r\n            padding: !!props.center ? null : props.wrapperPadding,\r\n        }))\r\n\r\n        const wrapperClasses = useClass(() => [\r\n            'pl-dialog',\r\n            props.transition,\r\n            props.dialogClass,\r\n            props.serviceClass,\r\n            {\r\n                'pl-dialog-fullscreen': props.fullscreen,\r\n                'pl-dialog-no-mask': !props.mask,\r\n                'pl-dialog-vertical-center': props.center,\r\n                'pl-dialog-no-content-padding': !props.contentPadding,\r\n            }\r\n        ])\r\n\r\n        const bodyClasses = computed(() => [\r\n            'pl-dialog-body',\r\n            `pl-dialog-body-shape-${styleComputed.value.shape}`,\r\n        ])\r\n\r\n        const hasHead = computed(() => {\r\n            return props.showHead\r\n        })\r\n        const hasFoot = computed(() => {\r\n            return slots.foot.isExist() || props.confirmButton || props.cancelButton\r\n        })\r\n\r\n        const contentStyle = computed(() => {\r\n            let height = props.fullHeight ? `calc(100vh - ${(!!hasHead.value ? 40 : 0) + (hasFoot.value ? 60 : 0)}px)` : propsState.height\r\n            let width = props.fullWidth ? '100vw' : propsState.width\r\n\r\n            let minHeight = propsState.minHeight !== undefined ? propsState.minHeight : height !== undefined ? null : '15vh'\r\n            let minWidth = propsState.minWidth !== undefined ? propsState.minWidth : width !== undefined ? null : '30vw'\r\n            let maxHeight = propsState.maxHeight !== undefined ? propsState.maxHeight : height !== undefined ? null : '80vh'\r\n            let maxWidth = propsState.maxWidth !== undefined ? propsState.maxWidth : width !== undefined ? null : '60vw'\r\n\r\n            return {\r\n                height: unit(height),\r\n                width: unit(width),\r\n                minHeight: unit(minHeight),\r\n                minWidth: unit(minWidth),\r\n                maxHeight: unit(maxHeight),\r\n                maxWidth: unit(maxWidth),\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n        const handler = {\r\n            keyboardEventOption: {\r\n                \"enter\": () => {\r\n                    if (isLoading.value) return\r\n                    if (!!props.confirmOnEnter) {\r\n                        methods.confirm()\r\n                    }\r\n                },\r\n                \"esc\": () => {\r\n                    if (isLoading.value) return\r\n                    if (!!props.cancelOnEsc) {\r\n                        methods.cancel()\r\n                    }\r\n                }\r\n            } as KeyboardServiceOption,\r\n            clickWrapper: (e: MouseEvent) => {\r\n                if (isLoading.value) {\r\n                    return\r\n                }\r\n                if (!!props.cancelOnClickMask) {\r\n                    if (!!refs.body && !refs.body.contains(e.target as HTMLElement)) {\r\n                        methods.cancel()\r\n                    }\r\n                }\r\n            },\r\n            clickClose: () => {\r\n                if (isLoading.value) {\r\n                    return\r\n                }\r\n                methods.cancel()\r\n            }\r\n        }\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n        const methods = {\r\n            show: async () => {\r\n                if (model.value) return\r\n                KeyboardService.listen(handler.keyboardEventOption)\r\n                KeyboardService.cancelActiveElement()\r\n                state.zIndex = nextIndex()\r\n                await methods.open()\r\n            },\r\n            async hide() {\r\n                if (!model.value) return\r\n                KeyboardService.unbindListener(handler.keyboardEventOption)\r\n                await this.close()\r\n            },\r\n            confirm() {\r\n                if (props.disabledConfirm) {\r\n                    return\r\n                }\r\n                if (props.closeOnConfirm) {\r\n                    methods.hide()\r\n                }\r\n                emit.onConfirm()\r\n            },\r\n            cancel() {\r\n                if (props.disabledCancel) {\r\n                    return\r\n                }\r\n                if (props.closeOnCancel) {\r\n                    methods.hide()\r\n                }\r\n                emit.onCancel()\r\n            },\r\n            open() {\r\n                model.value = true\r\n                emit.onUpdateModelValue(model.value)\r\n            },\r\n            async close() {\r\n                try {\r\n                    if (!!props.beforeClose) {\r\n                        state.loading = true\r\n                        let flag = await props.beforeClose!()\r\n                        if (flag === false) return\r\n                    }\r\n                    model.value = false\r\n                    emit.onUpdateModelValue(model.value)\r\n                } catch (e) {\r\n                    console.error(e)\r\n                } finally {\r\n                    state.loading = false\r\n                }\r\n            },\r\n        }\r\n        /*---------------------------------------watch-------------------------------------------*/\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            val ? setTimeout(methods.show, 100) : methods.hide()\r\n        }, {immediate: true})\r\n\r\n        onBeforeUnmount(() => {\r\n            KeyboardService.unbindListener(handler.keyboardEventOption)\r\n            if (model.value) {\r\n                methods.hide()\r\n            }\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n\r\n                const Wrapper: any = props.destroyOnClose ? <div/> : <div v-show={model.value}/>\r\n\r\n                return (\r\n                    <Teleport to=\".pl-root-service-container\">\r\n                        <Transition name={props.transition}>\r\n                            {(!props.destroyOnClose ? true : model.value) && <Wrapper onClick={handler.clickWrapper} style={wrapperStyles.value as any} class={wrapperClasses.value}>\r\n                                <div class={bodyClasses.value} ref=\"body\">\r\n                                    {hasHead.value && <div class=\"pl-dialog-head\">\r\n                                        {slots.head(<span class=\"pl-dialog-head-title\">{propsState.title}</span>)}\r\n                                        {!!props.showClose && (\r\n                                            <div class=\"pl-dialog-head-close\">\r\n                                                <Button icon=\"el-icon-close\"\r\n                                                        shape={StyleShape.round}\r\n                                                        mode=\"text\"\r\n                                                        size={StyleSize.large}\r\n                                                        onClick={handler.clickClose}/>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>}\r\n                                    <div class=\"pl-dialog-content\" style={contentStyle.value as any}>\r\n                                        {slots.default()}\r\n                                    </div>\r\n                                    {hasFoot.value && <div class=\"pl-dialog-foot\">\r\n                                        {slots.foot()}\r\n\r\n                                        {!!props.cancelButton && <Button label={props.cancelButtonText} mode=\"stroke\" onClick={methods.cancel}/>}\r\n                                        {!!props.confirmButton && <Button label={props.confirmButtonText} onClick={methods.confirm}/>}\r\n                                    </div>}\r\n                                    <LoadingMask v-model={isLoading.value}/>\r\n                                </div>\r\n                            </Wrapper>}\r\n                        </Transition>\r\n                    </Teleport>\r\n                )\r\n            }\r\n        }\r\n    }\r\n})","import {StyleStatus} from \"../../use/useStyle\";\r\nimport {RequireFormat, VNodeChild} from \"../../shims\";\r\nimport Dialog from '../dialog'\r\nimport {registryRootService} from \"../root/registryRootService\";\r\nimport {createDefaultManager} from \"../root/createDefaultManager\";\r\nimport Service from './dialog-service'\r\nimport {App} from 'vue';\r\nimport {DialogService} from \"../../index\";\r\nimport {installPlugin} from \"../../utils/installPlugin\";\r\nimport {defer} from \"../../utils/defer\";\r\nimport {getServiceWithoutContext} from \"../../utils/getServiceWithoutContext\";\r\n\r\nexport enum DialogServiceEditType {\r\n    input = 'input',\r\n    textarea = 'textarea'\r\n}\r\n\r\nexport interface DialogServiceOption {\r\n    title?: string,                                                 // 标题\r\n    message?: string,                                               // 提示的消息\r\n    editType?: DialogServiceEditType,                               // 输入类型\r\n    editValue?: string | number,                                    // 输入初始内容\r\n    editReadonly?: boolean,                                         // 输入框只读\r\n    status?: StyleStatus | null,                                    // 对话框状态\r\n    render?: () => VNodeChild,                                      // 自定义对话框内容\r\n    renderHead?: () => VNodeChild,                                  // 自定义对话框标题内容\r\n    renderFoot?: () => VNodeChild,                                  // 自定义对话框底部内容\r\n    confirmButton?: boolean,                                        // 是否显示确认按钮\r\n    confirmButtonText?: string,                                     // 确认按钮文本\r\n    onConfirm?: (editValue?: string) => void | Promise<void>,       // 确认按钮处理函数\r\n    cancelButton?: boolean,                                         // 是否显示删除按钮\r\n    cancelButtonText?: string,                                      // 删除按钮文本\r\n    onCancel?: () => void | Promise<void>,                          // 删除按钮文本\r\n    dialogProps?: Partial<typeof Dialog.use.props>,                 // 对话框属性\r\n}\r\n\r\nexport type DialogServiceFormatOption = RequireFormat<DialogServiceOption, 'status'> & {\r\n    close: () => void\r\n}\r\n\r\ntype DialogServiceFunction = (message: string | DialogServiceOption, option?: DialogServiceOption) => void\r\ntype DialogService = { [k in StyleStatus]: DialogServiceFunction } & { confirm: DialogServiceFunction }\r\n\r\nfunction formatOption(o: DialogServiceOption): DialogServiceFormatOption {\r\n    return Object.assign(o, {\r\n        status: o.status === null ? null : (o.status || 'primary'),\r\n    }) as DialogServiceFormatOption\r\n}\r\n\r\nconst getDialogService = registryRootService(\r\n    'dialog',\r\n    createDefaultManager('pl-dialog-manager', Service),\r\n    (getManager) => {\r\n        const service = (message: string | DialogServiceOption, option?: DialogServiceOption) => {\r\n            const o: DialogServiceOption = typeof message === \"string\" ? {message} : message\r\n            if (!!option) {\r\n                Object.assign(o, option)\r\n            }\r\n            const fo = formatOption(o)\r\n            getManager().then(manager => manager.service(fo))\r\n            return fo\r\n        }\r\n\r\n        return {\r\n            ...Object.assign(service, Object.keys(StyleStatus).reduce((prev: any, status: any) => {\r\n                prev[status] = function (message: string | DialogServiceOption, option?: DialogServiceOption) {\r\n                    const o = typeof message === \"object\" ? message : {message}\r\n                    if (!!option) {\r\n                        Object.assign(o, option)\r\n                    }\r\n                    o.status = status\r\n                    return service(o)\r\n                }\r\n                return prev\r\n            }, {})),\r\n            confirm: (message, option) => {\r\n                const dfd = defer()\r\n                const o = typeof message === \"object\" ? message : {message}\r\n                if (!!option) {\r\n                    Object.assign(o, option)\r\n                }\r\n                o.status = o.status || StyleStatus.info\r\n                o.confirmButton = true\r\n                o.cancelButton = true\r\n                const {onConfirm} = o\r\n                o.onConfirm = () => {\r\n                    dfd.resolve();\r\n                    onConfirm && onConfirm()\r\n                }\r\n                service(o)\r\n                return dfd.promise\r\n            }\r\n        } as DialogService\r\n    }\r\n)\r\n\r\nexport const $$dialog = getServiceWithoutContext(getDialogService)\r\n\r\nexport default {\r\n    install(app: App) {\r\n        installPlugin(app, Dialog)\r\n        app.mixin({\r\n            beforeCreate() {\r\n                Object.defineProperty(this, '$dialog', {\r\n                    get() {\r\n                        return getDialogService(this)\r\n                    },\r\n                })\r\n            },\r\n        })\r\n    },\r\n}","import button from '../button'\r\nimport icon from '../icon'\r\nimport mask from '../loading-mask'\r\n\r\nimport dialog from './dialog'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(dialog, {\r\n    plugins: [\r\n        button,\r\n        icon,\r\n        mask,\r\n    ]\r\n})","import {computed, reactive, ref} from 'vue';\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {DialogServiceFormatOption} from \"./index\";\r\nimport Input from '../input'\r\nimport Dialog from '../dialog'\r\nimport Icon from '../icon'\r\nimport {STATUS} from \"../../utils/constant\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport './dialog-service.scss'\r\nimport {VNodeChild} from \"../../shims\";\r\nimport {createDefaultService} from \"../root/createDefaultService\";\r\n\r\n/**\r\n * 用来区分 DialogServiceOption中的选项与pl-dialog组件的属性\r\n * @author  韦胜健\r\n * @date    2020/11/7 20:04\r\n */\r\nconst OptionKeys = [\r\n    'message',\r\n    'editType',\r\n    'editValue',\r\n    'editReadonly',\r\n    'status',\r\n    'render',\r\n    'onConfirm',\r\n    'onCancel',\r\n    'close',\r\n]\r\n\r\nexport default createDefaultService({\r\n    name: 'pl-dialog-service',\r\n    setup(option: DialogServiceFormatOption) {\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n        })\r\n\r\n        const isShow = ref(false)\r\n\r\n        const state = reactive({\r\n            key: 0,\r\n            option,\r\n            editValue: null as null | string,\r\n        })\r\n\r\n        const targetOption = computed(() => {\r\n            let option = {} as DialogServiceFormatOption\r\n            let binding = {} as Partial<typeof Dialog.use.props>\r\n\r\n            Object.keys(state.option).forEach((key) => {\r\n                if (OptionKeys.indexOf(key) > -1) {\r\n                    (option as any)[key] = (state.option as any)[key]\r\n                } else {\r\n                    (binding as any)[key] = (state.option as any)[key]\r\n                }\r\n            })\r\n\r\n            return {\r\n                option,\r\n                binding,\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            confirm: () => {\r\n                if (!!targetOption.value.option.onConfirm) {\r\n                    targetOption.value.option.onConfirm(!targetOption.value.option.editType ? undefined : state.editValue as string)\r\n                }\r\n            },\r\n            cancel: () => {\r\n                if (!!targetOption.value.option.onCancel) {\r\n                    targetOption.value.option.onCancel()\r\n                }\r\n            },\r\n        }\r\n\r\n        async function service(option: DialogServiceFormatOption) {\r\n            option.close = hide\r\n            state.option = option\r\n            state.key++\r\n            isShow.value = true\r\n            if (!!option.editType) {\r\n                state.editValue = option.editValue as string\r\n                await delay(300)\r\n                refs.input!.methods.focus()\r\n            }\r\n            return hide\r\n        }\r\n\r\n        function hide() {\r\n            isShow.value = false\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                service,\r\n                hide,\r\n                isShow,\r\n                isOpen: isShow,\r\n            },\r\n            render: () => {\r\n                let {option, binding} = targetOption.value\r\n                let status = option.status\r\n                let serviceClass = 'pl-dialog-service';\r\n\r\n                if (!!status) {\r\n                    serviceClass += ` pl-dialog-service-status-${status}`\r\n                }\r\n\r\n                /*---------------------------------------head-------------------------------------------*/\r\n                let head = <div class=\"pl-dialog-service-head\">\r\n                    {!!status && STATUS[status] && <Icon class=\"pl-dialog-service-status-icon\" icon={STATUS[status].icon}/>}\r\n                    {!!option.renderHead ? option.renderHead() : (option.title || '提示')}\r\n                </div>\r\n                /*---------------------------------------content-------------------------------------------*/\r\n                let content: VNodeChild;\r\n                if (!!option.editType) {\r\n                    binding = {...binding}\r\n                    if (option.editType !== 'input') {\r\n                        (binding as any).height = binding.height || '500px'\r\n                    } else {\r\n                        (binding as any).minHeight = null\r\n                    }\r\n                    serviceClass += ` pl-dialog-service-edit`\r\n                    content = <Input ref=\"input\"\r\n                                     block\r\n                                     minHeight={null as any}\r\n                                     maxHeight={null as any}\r\n                                     autoHeight={false}\r\n                                     v-model={state.editValue}\r\n                                     readonly={option.editReadonly}\r\n                                     textarea={option.editType === 'textarea'}/>\r\n                } else if (!!option.message) {\r\n                    content = (\r\n                        <div class=\"pl-dialog-service-item-message\">\r\n                            {option.message}\r\n                        </div>\r\n                    )\r\n                } else if (!!option.render) {\r\n                    content = option.render()\r\n                }\r\n                /*---------------------------------------foot-------------------------------------------*/\r\n                let foot = !option.renderFoot ? null : option.renderFoot()\r\n\r\n                return (\r\n                    <Dialog\r\n                        serviceClass={serviceClass}\r\n                        v-model={isShow.value}\r\n                        key={state.key}\r\n\r\n                        onConfirm={handler.confirm}\r\n                        onCancel={handler.cancel}\r\n\r\n                        {...binding}\r\n                        v-slots={{\r\n                            default: !!content ? () => content : null,\r\n                            head: !!head ? () => head : null,\r\n                            foot: !!foot ? () => foot : null,\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n","import {ref, onMounted, onBeforeUnmount} from 'vue';\r\n\r\nexport function useMounted() {\r\n    const isMounted = ref(false)\r\n    onMounted(() => isMounted.value = true)\r\n    onBeforeUnmount(() => isMounted.value = false)\r\n    return isMounted\r\n}","import {Directive} from 'vue'\r\n\r\nexport interface ResizeDetectFuncParam {\r\n    width?: number\r\n    height?: number\r\n    oldWidth?: number\r\n    oldHeight?: number\r\n    el?: HTMLElement\r\n\r\n    [key: string]: any\r\n}\r\n\r\nexport interface ResizeDetectFunc {\r\n    (option: ResizeDetectFuncParam): void\r\n}\r\n\r\nexport default class ResizeDetector {\r\n\r\n    observer?: MutationObserver\r\n    width?: number\r\n    height?: number\r\n\r\n    constructor(public el: HTMLElement, public callback: ResizeDetectFunc) {\r\n\r\n        if (!el) {\r\n            console.error(`el is ${typeof el}`)\r\n            return\r\n        }\r\n\r\n        this.observer = new MutationObserver(this.detect)\r\n\r\n        this.observer.observe(el, {\r\n            childList: true,\r\n            subtree: true\r\n        })\r\n\r\n        // const {width, height} = el.getBoundingClientRect()\r\n        const {scrollHeight: height, scrollWidth: width} = el\r\n        this.width = width\r\n        this.height = height\r\n        this.runCallback({\r\n            width,\r\n            height,\r\n            el\r\n        })\r\n    }\r\n\r\n    detect = () => {\r\n        // const {width, height} = this.el.getBoundingClientRect()\r\n        const {scrollHeight: height, scrollWidth: width} = this.el\r\n        if (width === this.width && height === this.height) return\r\n        const ret = {} as ResizeDetectFuncParam\r\n        if (width !== this.width) {\r\n            ret.width = width\r\n            ret.oldWidth = this.width\r\n            this.width = width\r\n        }\r\n        if (height !== this.height) {\r\n            ret.height = height\r\n            ret.oldHeight = this.height\r\n            this.height = height\r\n        }\r\n        this.runCallback(ret)\r\n    }\r\n\r\n    runCallback(data: ResizeDetectFuncParam) {\r\n        Object.keys(data).forEach(key => {\r\n            if (data[key] != null && typeof data[key] === 'number') data[key] = Math.ceil(data[key])\r\n        })\r\n        this.callback(data)\r\n    }\r\n\r\n    destroy() {\r\n        if (!!this.observer) {\r\n            this.observer.disconnect();\r\n            this.observer = undefined\r\n        }\r\n    }\r\n}\r\n\r\nexport const ResizeDetectorDirective: Directive = {\r\n    mounted(el: any, binding: any, vnode: any) {\r\n        el.__resizedetextor__ = new ResizeDetector(el, (data) => binding.value(data))\r\n    },\r\n    beforeUnmount(el: any) {\r\n        (el.__resizedetextor__ as ResizeDetector).destroy()\r\n        delete el.__resizedetextor__\r\n    },\r\n}\r\n\r\n","export function getElement(ref: any): HTMLElement | null {\r\n\r\n    if (!ref) {\r\n        return null\r\n    }\r\n\r\n    if (!!ref.$el) {\r\n        return getElement(ref.$el)\r\n    }\r\n\r\n    if (ref.nodeType !== 3) {\r\n        return ref\r\n    }\r\n\r\n    return !!ref.data ? ref : ref.nextElementSibling\r\n\r\n}","import {PopperTrigger, PopperTriggerType} from \"./PopperTrigger\";\r\nimport {SimpleFunction} from \"../../../shims\";\r\n\r\nexport function getBaseTrigger(\r\n    triggerName: PopperTriggerType,\r\n    {\r\n        model,\r\n        openModel,\r\n\r\n        show,\r\n        hide,\r\n\r\n        hoverOpenDelay,\r\n        hoverCloseDelay,\r\n        reference,\r\n\r\n        on,\r\n        off,\r\n        emit,\r\n    }: {\r\n        model: { value: boolean | undefined },\r\n        openModel: { value: boolean | undefined },\r\n\r\n        show: SimpleFunction,\r\n        hide: SimpleFunction,\r\n\r\n        hoverOpenDelay: number,\r\n        hoverCloseDelay: number,\r\n        reference: HTMLElement,\r\n\r\n        on: {\r\n            onEnterReference: SimpleFunction,\r\n            onLeaveReference: SimpleFunction,\r\n\r\n            onEnterPopper: SimpleFunction,\r\n            onLeavePopper: SimpleFunction,\r\n\r\n            onReferenceFocus: SimpleFunction,\r\n            onReferenceBlur: SimpleFunction,\r\n\r\n            onClickReference: SimpleFunction,\r\n            onClickBody: SimpleFunction,\r\n            onClickPopper: SimpleFunction,\r\n        },\r\n        off: {\r\n            onEnterReference: SimpleFunction,\r\n            onLeaveReference: SimpleFunction,\r\n\r\n            onEnterPopper: SimpleFunction,\r\n            onLeavePopper: SimpleFunction,\r\n\r\n            onReferenceFocus: SimpleFunction,\r\n            onReferenceBlur: SimpleFunction,\r\n\r\n            onClickReference: SimpleFunction,\r\n            onClickBody: SimpleFunction,\r\n            onClickPopper: SimpleFunction,\r\n        },\r\n        emit: {\r\n            onReferenceFocus: SimpleFunction,\r\n            onReferenceBlur: SimpleFunction,\r\n\r\n            onEnterReference: SimpleFunction,\r\n            onLeaveReference: SimpleFunction,\r\n\r\n            onEnterPopper: SimpleFunction,\r\n            onLeavePopper: SimpleFunction,\r\n        },\r\n    },\r\n) {\r\n    switch (triggerName) {\r\n        case PopperTriggerType.hover:\r\n            return getHoverTrigger({\r\n                model,\r\n                show,\r\n                hide,\r\n                hoverOpenDelay,\r\n                hoverCloseDelay,\r\n                on,\r\n                off,\r\n                emit,\r\n            })\r\n        case PopperTriggerType.click:\r\n            return getClickTrigger({\r\n                model,\r\n                show,\r\n                hide,\r\n                openModel,\r\n                on,\r\n                off,\r\n            })\r\n        case PopperTriggerType.focus:\r\n            return getFocusTrigger({\r\n                show,\r\n                hide,\r\n                reference,\r\n                on,\r\n                off,\r\n                emit,\r\n            })\r\n        case PopperTriggerType.manual:\r\n            return getManualTrigger()\r\n    }\r\n}\r\n\r\nfunction getHoverTrigger({\r\n                             model,\r\n                             show,\r\n                             hide,\r\n                             hoverOpenDelay,\r\n                             hoverCloseDelay,\r\n\r\n                             on,\r\n                             off,\r\n                             emit,\r\n                         }: {\r\n    model: { value: boolean | undefined },\r\n    show: Function,\r\n    hide: Function,\r\n    hoverOpenDelay: number,\r\n    hoverCloseDelay: number,\r\n\r\n    on: {\r\n        onEnterReference: Function,\r\n        onLeaveReference: Function,\r\n\r\n        onEnterPopper: Function,\r\n        onLeavePopper: Function,\r\n\r\n        onReferenceFocus: Function,\r\n        onReferenceBlur: Function,\r\n\r\n        onClickReference: Function,\r\n        onClickPopper: Function,\r\n    },\r\n    off: {\r\n        onEnterReference: Function,\r\n        onLeaveReference: Function,\r\n\r\n        onEnterPopper: Function,\r\n        onLeavePopper: Function,\r\n\r\n        onReferenceFocus: Function,\r\n        onReferenceBlur: Function,\r\n\r\n        onClickReference: Function,\r\n        onClickPopper: Function,\r\n    },\r\n    emit: {\r\n        onReferenceFocus: Function,\r\n        onReferenceBlur: Function,\r\n\r\n        onEnterReference: Function,\r\n        onLeaveReference: Function,\r\n\r\n        onEnterPopper: Function,\r\n        onLeavePopper: Function,\r\n    },\r\n}) {\r\n    let closeTimer: number | undefined;\r\n    let openTimer: number | undefined;\r\n\r\n    const handler = {\r\n        reference: {\r\n            enter: () => {\r\n                if (!!closeTimer) {\r\n                    clearTimeout(closeTimer)\r\n                    closeTimer = undefined\r\n                }\r\n                openTimer = setTimeout(() => {\r\n                    show()\r\n                    openTimer = undefined\r\n                    emit.onEnterReference(model.value)\r\n                }, hoverOpenDelay)\r\n            },\r\n            leave: () => {\r\n                if (!!openTimer) {\r\n                    clearTimeout(openTimer)\r\n                    openTimer = undefined\r\n                }\r\n                closeTimer = setTimeout(() => {\r\n                    hide()\r\n                    closeTimer = undefined\r\n                    emit.onLeaveReference(model.value)\r\n                }, hoverCloseDelay)\r\n            },\r\n        },\r\n        popper: {\r\n            enter: () => {\r\n                if (!!closeTimer) {\r\n                    clearTimeout(closeTimer)\r\n                    closeTimer = undefined\r\n                }\r\n                openTimer = setTimeout(() => {\r\n                    show()\r\n                    openTimer = undefined\r\n                    emit.onEnterPopper(model.value)\r\n                }, hoverOpenDelay)\r\n            },\r\n            leave: () => {\r\n                if (!!openTimer) {\r\n                    clearTimeout(openTimer)\r\n                    openTimer = undefined\r\n                }\r\n                closeTimer = setTimeout(() => {\r\n                    hide()\r\n                    closeTimer = undefined\r\n                    emit.onLeavePopper(model.value)\r\n                }, hoverCloseDelay)\r\n            },\r\n        },\r\n    }\r\n\r\n    return new PopperTrigger(\r\n        PopperTriggerType.hover,\r\n        () => {\r\n            on.onEnterReference(handler.reference.enter)\r\n            on.onLeaveReference(handler.reference.leave)\r\n\r\n            on.onEnterPopper(handler.popper.enter)\r\n            on.onLeavePopper(handler.popper.leave)\r\n        },\r\n        () => {\r\n            off.onEnterReference(handler.reference.enter)\r\n            off.onLeaveReference(handler.reference.leave)\r\n\r\n            off.onEnterPopper(handler.popper.enter)\r\n            off.onLeavePopper(handler.popper.leave)\r\n        }\r\n    )\r\n}\r\n\r\nfunction getClickTrigger({\r\n                             model,\r\n                             show,\r\n                             hide,\r\n                             openModel,\r\n                             on,\r\n                             off,\r\n                         }: {\r\n    model: { value: boolean | undefined },\r\n    show: Function,\r\n    hide: Function,\r\n    openModel: { value: boolean | undefined },\r\n\r\n    on: {\r\n        onClickReference: Function,\r\n        onClickBody: Function,\r\n    },\r\n    off: {\r\n        onClickReference: Function,\r\n        onClickBody: Function,\r\n    },\r\n\r\n}) {\r\n\r\n    const handler = {\r\n        onClickReference: () => {\r\n            if (model.value) {\r\n                hide()\r\n            } else {\r\n                show()\r\n            }\r\n        },\r\n        onClickBody: () => {\r\n            if (openModel.value) {\r\n                hide()\r\n            }\r\n        },\r\n    }\r\n\r\n    return new PopperTrigger(\r\n        PopperTriggerType.click,\r\n        () => {\r\n            on.onClickReference(handler.onClickReference)\r\n            on.onClickBody(handler.onClickBody)\r\n        },\r\n        () => {\r\n            off.onClickReference(handler.onClickReference)\r\n            off.onClickBody(handler.onClickBody)\r\n        },\r\n    )\r\n}\r\n\r\nfunction getFocusTrigger(\r\n    {\r\n        show,\r\n        hide,\r\n        reference,\r\n        on,\r\n        off,\r\n        emit,\r\n    }: {\r\n        show: Function,\r\n        hide: Function,\r\n        reference: HTMLElement,\r\n\r\n        on: {\r\n            onReferenceFocus: Function,\r\n            onReferenceBlur: Function,\r\n        },\r\n        off: {\r\n            onReferenceFocus: Function,\r\n            onReferenceBlur: Function,\r\n        },\r\n        emit: {\r\n            onReferenceFocus: Function,\r\n            onReferenceBlur: Function,\r\n        },\r\n    }\r\n) {\r\n\r\n    let oldTabIndex: string | null;\r\n    const handler = {\r\n        focus: (e: FocusEvent) => {\r\n            emit.onReferenceFocus(e)\r\n            show()\r\n        },\r\n        blur: (e: Event) => {\r\n            emit.onReferenceBlur(e)\r\n            hide()\r\n        },\r\n    }\r\n\r\n    return new PopperTrigger(PopperTriggerType.focus,\r\n        () => {\r\n            oldTabIndex = reference.getAttribute('tabindex')\r\n            if (oldTabIndex == null) {\r\n                reference.setAttribute('tabindex', '0')\r\n            }\r\n            on.onReferenceFocus(handler.focus)\r\n            on.onReferenceBlur(handler.blur)\r\n        },\r\n        () => {\r\n            if (oldTabIndex == null) {\r\n                reference.removeAttribute('tabindex')\r\n            } else {\r\n                reference.setAttribute('tabindex', oldTabIndex)\r\n            }\r\n            off.onReferenceFocus(handler.focus)\r\n            off.onReferenceBlur(handler.blur)\r\n        },\r\n    )\r\n}\r\n\r\nfunction getManualTrigger() {\r\n    return new PopperTrigger(PopperTriggerType.manual,\r\n        () => undefined,\r\n        () => undefined,\r\n    )\r\n}","import {getBaseTrigger} from \"./BaseTrigger\";\r\nimport {SimpleFunction} from \"../../../shims\";\r\n\r\nexport class PopperTrigger {\r\n    data: any\r\n\r\n    constructor(\r\n        public name: PopperTriggerType,     // 触发器名称\r\n        public init: Function,              // 触发器初始化的时候执行函数\r\n        public destroy: Function            // 触发器销毁的时候执行函数\r\n    ) {\r\n    }\r\n}\r\n\r\nexport enum PopperTriggerType {\r\n    hover = 'hover',\r\n    click = 'click',\r\n    focus = 'focus',\r\n    manual = 'manual'\r\n}\r\n\r\nexport function getPopperTrigger(triggerName: PopperTriggerType, {\r\n    model,\r\n    openModel,\r\n\r\n    show,\r\n    hide,\r\n\r\n    hoverOpenDelay,\r\n    hoverCloseDelay,\r\n    reference,\r\n\r\n    on,\r\n    off,\r\n    emit,\r\n}: {\r\n    model: { value: boolean | undefined },\r\n    openModel: { value: boolean | undefined },\r\n\r\n    show: SimpleFunction,\r\n    hide: SimpleFunction,\r\n\r\n    hoverOpenDelay: number,\r\n    hoverCloseDelay: number,\r\n    reference: HTMLElement,\r\n\r\n    on: {\r\n        onClickReference: SimpleFunction,\r\n        onClickBody: SimpleFunction,\r\n        onClickPopper: SimpleFunction,\r\n        onEnterPopper: SimpleFunction,\r\n        onLeavePopper: SimpleFunction,\r\n    },\r\n    off: {\r\n        onClickReference: SimpleFunction,\r\n        onClickBody: SimpleFunction,\r\n        onClickPopper: SimpleFunction,\r\n        onEnterPopper: SimpleFunction,\r\n        onLeavePopper: SimpleFunction,\r\n    },\r\n    emit: {\r\n        onReferenceFocus: SimpleFunction,\r\n        onReferenceBlur: SimpleFunction,\r\n        onEnterReference: SimpleFunction,\r\n        onLeaveReference: SimpleFunction,\r\n        onEnterPopper: SimpleFunction,\r\n        onLeavePopper: SimpleFunction,\r\n    },\r\n\r\n}) {\r\n    return getBaseTrigger(triggerName, {\r\n        model,\r\n        openModel,\r\n        show,\r\n        hide,\r\n\r\n        hoverOpenDelay,\r\n        hoverCloseDelay,\r\n        reference,\r\n\r\n        on: {\r\n            onEnterReference: (cb) => reference.addEventListener('mouseenter', cb),\r\n            onLeaveReference: (cb) => reference.addEventListener('mouseleave', cb),\r\n            onReferenceFocus: (cb) => reference.addEventListener('focus', cb),\r\n            onReferenceBlur: (cb) => reference.addEventListener('blur', cb),\r\n\r\n            onEnterPopper: on.onEnterPopper,\r\n            onLeavePopper: on.onLeavePopper,\r\n            onClickReference: on.onClickReference,\r\n            onClickBody: on.onClickBody,\r\n            onClickPopper: on.onClickPopper,\r\n        },\r\n        off: {\r\n            onEnterReference: (cb) => reference.removeEventListener('mouseenter', cb),\r\n            onLeaveReference: (cb) => reference.removeEventListener('mouseleave', cb),\r\n            onReferenceFocus: (cb) => reference.removeEventListener('focus', cb),\r\n            onReferenceBlur: (cb) => reference.removeEventListener('blur', cb),\r\n\r\n            onEnterPopper: off.onEnterPopper,\r\n            onLeavePopper: off.onLeavePopper,\r\n            onClickReference: off.onClickReference,\r\n            onClickBody: off.onClickBody,\r\n            onClickPopper: off.onClickPopper,\r\n        },\r\n        emit: emit,\r\n    })\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {computed, onMounted, createCommentVNode, Teleport, reactive, markRaw, nextTick, watch, getCurrentInstance, onBeforeUnmount} from 'vue';\r\nimport {createError} from \"../../utils/createError\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {getElement} from \"../../utils/getElement\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {nextIndex} from \"../../utils/nextIndex\";\r\nimport {PlainPopper} from 'plain-popper'\r\nimport {SimpleFunction} from \"../../shims\";\r\nimport {getPopperTrigger, PopperTrigger, PopperTriggerType} from \"./trigger/PopperTrigger\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\nimport './popper.scss'\r\nimport {refreshPopperReference} from \"./refershPopperReference\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\n\r\nconst error = createError('pl-popper')\r\n\r\nexport default designComponent({\r\n    name: 'pl-popper',\r\n    props: {\r\n        modelValue: {type: Boolean},                                // 双向绑定值，当前是否打开\r\n        open: {type: Boolean},                                      // 双向绑定值，当前是否已经打开\r\n        trigger: {type: String, default: 'hover'},                  // 触发动作， hover,click,focus,manual,always\r\n\r\n        title: {type: String},                                      // 标题文本\r\n        message: {type: String},                                    // 内容文本\r\n        disabled: {type: Boolean},                                  // 禁用\r\n        transition: {type: String, default: 'pl-transition-fade'},  // 动画名称：pl-transition-fade, pl-transition-scale, pl-transition-scale-y, pl-transition-popper-drop\r\n        popperClass: {type: [String, Array, Object]},               // popper容器节点样式\r\n        offset: {type: [Number, String]},                           // 偏移量\r\n        width: {type: [Number, String]},                            // 宽度\r\n        height: {type: [Number, String]},                           // 高度\r\n        hoverOpenDelay: {type: [Number, String], default: 0},       // hover触发条件下，打开延迟时间\r\n        hoverCloseDelay: {type: [Number, String], default: 200},    // hover触发条件下，关闭延迟时间\r\n        noContentPadding: {type: Boolean},                          // 去掉默认内容内边距\r\n\r\n        reference: {type: [Function, Element]},                     // 目标dom元素\r\n        placement: {type: String, default: 'bottom-start'},         // 位置\r\n        arrow: {type: Boolean, default: true},                      // 是否需要箭头\r\n\r\n        boundary: {default: 'window'},                              // 边界元素\r\n        sizeEqual: {type: Boolean},                                 // 与reference在方向上大小相等\r\n        scrollAttrs: {type: Object},                                // pl-scroll 属性配置\r\n        popperAttrs: {type: Object},                                // 给popper dom节点传递的属性\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true,\r\n        onUpdateOpen: (val: boolean) => true,\r\n        onInit: () => true,\r\n        onDestroy: () => true,\r\n        onOpen: () => true,\r\n        onClose: () => true,\r\n        onShow: () => true,\r\n        onHide: () => true,\r\n\r\n        onClickReference: (e: MouseEvent) => true,\r\n        onClickPopper: (e: MouseEvent) => true,\r\n        onClickBody: (e: MouseEvent) => true,\r\n        onMousedownPopper: (e: MouseEvent) => true,\r\n\r\n        onEnterReference: (e: MouseEvent) => true,\r\n        onLeaveReference: (e: MouseEvent) => true,\r\n        onEnterPopper: (e: MouseEvent) => true,\r\n        onLeavePopper: (e: MouseEvent) => true,\r\n        onReferenceFocus: (e: FocusEvent) => true,\r\n        onReferenceBlur: (e: Event) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {emit, on, off} = event\r\n\r\n        const {slots} = useSlots([\r\n            'popper',\r\n            'title',\r\n        ], true)\r\n\r\n        const {refs} = useRefs({\r\n            comment: HTMLElement,                                               // 注释节点，用来查找reference的第一个节点\r\n            popper: HTMLDivElement,                                             // popper div 节点\r\n            content: HTMLDivElement,                                            // popper content 节点\r\n        });\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const {propsState} = useProps(props, {\r\n            hoverOpenDelay: useProps.NUMBER,\r\n            hoverCloseDelay: useProps.NUMBER,\r\n            offset: useProps.NUMBER,\r\n            width: useProps.NUMBER,\r\n            height: useProps.NUMBER,\r\n        })\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoEmit: false, autoWatch: false})\r\n        const openModel = useModel(() => props.open, emit.onUpdateOpen, {autoEmit: false, autoWatch: false})\r\n\r\n        const state = reactive({\r\n            el: {\r\n                popper: null as null | HTMLElement,                             // popper 节点\r\n                comment: null as null | HTMLElement,                            // comment 节点\r\n                reference: null as null | HTMLElement,                          // comment.nextElementSibling，也就是 reference 的第一个节点\r\n            },\r\n            referenceEl: null as null | HTMLElement,                            // 真正的 reference 对象获取方法\r\n            zIndex: nextIndex(),                                                // popper zIndex值\r\n            onTransitionend: null as null | ((e: Event) => void),               // 当show或者hide，需要监听一次 transitionend事件，所以这里有可能是null\r\n            init: false,                                                        // 当前是否已经初始化popper content及其Popper对象\r\n            popper: null as null | PlainPopper,                                 // PlainPopper 对象\r\n            trigger: null as null | PopperTrigger,                              // 触发类型\r\n        })\r\n\r\n        /**\r\n         * 检查默认插槽中是否存在多个节点，如果是则发出警告\r\n         * @author  韦胜健\r\n         * @date    2020/11/17 9:45\r\n         */\r\n        const referenceVNode = computed(() => {\r\n            const slot = slots.default() as any\r\n            if (!slot) {\r\n                return null\r\n            }\r\n            if (slot.length > 1) {\r\n                error('allows only one child node!')\r\n            }\r\n            return slot[0]\r\n        })\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        /**\r\n         * 当前方向，用来配置sizeEqual使用\r\n         * @author  韦胜健\r\n         * @date    2020/11/17 10:49\r\n         */\r\n        const direction = computed(() => {\r\n            const [direction] = props.placement.split('-')\r\n            return direction as 'top' | 'bottom' | 'left' | 'right'\r\n        })\r\n\r\n        const popperClasses = computed(() => [\r\n            'pl-popper',\r\n            'plain-popper',\r\n            props.transition,\r\n            props.popperClass,\r\n            {\r\n                'pl-popper-show': model.value,\r\n                'pl-popper-open': openModel.value,\r\n                // 'pl-popper-ready': state.ready,\r\n                'pl-popper-show-arrow': props.arrow,\r\n                'pl-popper-no-content-padding': props.noContentPadding,\r\n            }\r\n        ])\r\n\r\n        const popperStyles = useStyles(style => {\r\n            style.zIndex = state.zIndex\r\n        })\r\n\r\n        const sizeStyles = useStyles(styles => {\r\n            propsState.height != null && (styles.height = `${propsState.height}px`);\r\n            propsState.width != null && (styles.width = `${propsState.width}px`);\r\n            if (!!props.sizeEqual && !!state.referenceEl) {\r\n                if (['top', 'bottom'].indexOf(direction.value) > -1) {\r\n                    styles.width = (state.referenceEl as HTMLElement).offsetWidth + 'px'\r\n                } else if (['left', 'right'].indexOf(direction.value) > -1) {\r\n                    styles.height = (state.referenceEl as HTMLElement).offsetHeight + 'px'\r\n                }\r\n            }\r\n            return styles\r\n        })\r\n\r\n        const scrollAttrs = computed(() => {\r\n            if (!propsState.height) {\r\n                return null\r\n            } else {\r\n                return Object.assign({\r\n                    fitHostWidth: true,\r\n                }, props.scrollAttrs)\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            onPopperContentTransitionend: (e: Event) => !!state.onTransitionend && state.onTransitionend(e),\r\n            onClickReference: (e: MouseEvent) => {\r\n                emit.onClickReference(e)\r\n            },\r\n            onClickPopper: (e: MouseEvent) => {\r\n                emit.onClickPopper(e)\r\n            },\r\n            onClickBody: (e: MouseEvent) => {\r\n                if (!model.value && !openModel.value) {\r\n                    return;\r\n                }\r\n                if (state.referenceEl!.contains(e.target as Node)) {\r\n                    /*点击了reference*/\r\n                    return\r\n                }\r\n                if (!!refs.content && refs.content!.contains(e.target as Node)) {\r\n                    /*点击了content*/\r\n                    return\r\n                }\r\n                emit.onClickBody(e)\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            init: (): boolean => {\r\n                let {comment, reference} = state.el\r\n                if (!!comment && !!reference) {\r\n                    state.referenceEl = reference\r\n                } else if (!!props.reference) {\r\n                    state.referenceEl = getElement(typeof props.reference === \"function\" ? (props.reference as SimpleFunction)() : props.reference)\r\n                } else {\r\n                    /*没有reference，等待reference初始化在初始化popper*/\r\n                    return false\r\n                }\r\n                utils.bindEvents()\r\n\r\n                state.trigger = getPopperTrigger(props.trigger as PopperTriggerType, {\r\n                    model,\r\n                    openModel: openModel,\r\n                    show: methods.show,\r\n                    hide: methods.hide,\r\n\r\n                    hoverOpenDelay: propsState.hoverOpenDelay as number,\r\n                    hoverCloseDelay: propsState.hoverCloseDelay as number,\r\n\r\n                    reference: state.referenceEl as HTMLElement,\r\n\r\n                    on,\r\n                    off,\r\n                    emit,\r\n                })\r\n\r\n                state.trigger.init()\r\n                emit.onInit()\r\n\r\n                return true\r\n            },\r\n            destroy: () => {\r\n                utils.unbindEvents()\r\n                if (!!state.trigger) {\r\n                    state.trigger.destroy()\r\n                }\r\n                if (!!state.popper) {\r\n                    state.popper.destroy()\r\n                }\r\n                emit.onDestroy()\r\n            },\r\n            bindEvents: () => {\r\n                if (!!state.referenceEl) {\r\n                    state.referenceEl.addEventListener('click', handler.onClickReference)\r\n                }\r\n                document.body.addEventListener('click', handler.onClickBody, true)\r\n            },\r\n            unbindEvents: () => {\r\n                if (!!state.referenceEl) {\r\n                    state.referenceEl.removeEventListener('click', handler.onClickReference)\r\n                }\r\n                document.body.removeEventListener('click', handler.onClickBody, true)\r\n            },\r\n            initPopper: () => {\r\n                state.popper = new PlainPopper({\r\n                    popper: refs.popper,\r\n                    reference: state.referenceEl!,\r\n                    padding: 50,\r\n                    placement: props.placement as any,\r\n                    offset: Number(props.offset || (!!props.arrow ? 0 : 2)),\r\n                    boundary: props.boundary,\r\n                    arrowSize: !props.arrow ? 0 : undefined,\r\n                    shouldUpdate: () => !!model.value\r\n                })\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            show: async (shouldEmit = true) => {\r\n                if (props.disabled) {\r\n                    return\r\n                }\r\n                if (!state.init) {\r\n                    state.init = true\r\n                    await nextTick()\r\n                    await utils.initPopper()\r\n                }\r\n                state.popper!.refresh()\r\n\r\n                /*这里要有一定的延迟，否则popper的属性 direction以及align更新没有结束，导致动画的方向不对*/\r\n                await nextTick()\r\n                await delay(50)\r\n\r\n                state.zIndex = nextIndex()\r\n                model.value = true\r\n                emit.onShow()\r\n                if (shouldEmit) {\r\n                    emit.onUpdateModelValue(model.value)\r\n                }\r\n                state.onTransitionend = () => {\r\n                    openModel.value = true\r\n                    state.onTransitionend = null\r\n                }\r\n            },\r\n            hide: (shouldEmit = true) => {\r\n                model.value = false\r\n                emit.onHide()\r\n                if (shouldEmit) {\r\n                    emit.onUpdateModelValue(model.value)\r\n                }\r\n                state.onTransitionend = () => {\r\n                    openModel.value = false\r\n                    state.onTransitionend = null\r\n                }\r\n            },\r\n            toggle: async () => {\r\n                model.value ? await methods.hide() : await methods.show()\r\n            },\r\n            refresh: () => {\r\n                if (!state.referenceEl) return\r\n                state.popper!.refresh()\r\n            },\r\n            refreshReference: async () => {\r\n                await nextTick()\r\n                const comment = getElement(refs.comment)\r\n                const reference = !!comment ? comment!.nextElementSibling as HTMLElement : null\r\n                // console.log(reference, state.el.reference)\r\n                if (!!reference && reference !== state.el.reference) {\r\n                    await utils.destroy()\r\n                    state.el.reference = markRaw(reference)\r\n                    await utils.init()\r\n                }\r\n            }\r\n        }\r\n\r\n        onMounted(async () => {\r\n\r\n            const popper = getElement(refs.popper)\r\n            const comment = getElement(refs.comment)\r\n            const reference = !!comment ? comment!.nextElementSibling as HTMLElement : null\r\n            // console.log({popper, comment, reference})\r\n\r\n            state.el = markRaw({popper, comment, reference})\r\n\r\n            await utils.init()\r\n            if (model.value) {\r\n                await methods.show(false)\r\n            }\r\n        })\r\n\r\n        onBeforeUnmount(() => utils.destroy())\r\n        refreshPopperReference.provide(methods.refreshReference)\r\n\r\n        /*---------------------------------------watch-------------------------------------------*/\r\n        watch(() => props.modelValue, (val) => {\r\n            if (val === model.value) {\r\n                return\r\n            }\r\n            if (val) {\r\n                methods.show(false)\r\n            } else {\r\n                methods.hide(false)\r\n            }\r\n        })\r\n        // watch(() => model.value, (val) => {})\r\n        watch(() => openModel.value, (val) => {\r\n            if (!!val) {\r\n                emit.onUpdateOpen(true)\r\n                emit.onOpen()\r\n            } else {\r\n                emit.onUpdateOpen(false)\r\n                emit.onClose()\r\n            }\r\n        })\r\n        watch(() => props.placement, (val) => {\r\n            if (!!state.popper) {\r\n                state.popper.setPlacement(val as any)\r\n            }\r\n        })\r\n\r\n        const ctx = getCurrentInstance()!\r\n        const popperConfigChangeHandler = debounce(async () => {\r\n            // console.log('popperConfigChangeHandler')\r\n            await nextTick()\r\n            if (ctx.isUnmounted) {\r\n                return\r\n            }\r\n            await utils.destroy()\r\n            await utils.init()\r\n            if (!state.referenceEl) {\r\n                if (!!state.popper) {\r\n                    state.popper.destroy()\r\n                    state.popper = null\r\n                }\r\n                return\r\n            }\r\n            if (!!state.popper) {\r\n                await utils.initPopper()\r\n            }\r\n        }, 50)\r\n        watch(() => props.reference, popperConfigChangeHandler)\r\n        watch(() => props.arrow, popperConfigChangeHandler)\r\n        watch(() => props.trigger, popperConfigChangeHandler)\r\n\r\n        /*---------------------------------------render-------------------------------------------*/\r\n\r\n        const Comment = createCommentVNode('') as any\r\n\r\n        return {\r\n            refer: {\r\n                event,\r\n                state,\r\n                ...methods,\r\n            },\r\n            render: () => {\r\n                const {value: ReferenceVNode} = referenceVNode\r\n                return (\r\n                    <>\r\n                        {/*如果没有reference，则不渲染comment节点*/}\r\n                        {!!ReferenceVNode && <>\r\n                            <Comment ref=\"comment\"/>\r\n                            <ReferenceVNode/>\r\n                        </>}\r\n\r\n                        {state.init && <Teleport to=\".pl-root-service-container\">\r\n                            <div class={popperClasses.value}\r\n                                 style={popperStyles.value}\r\n                                 {...(props.popperAttrs || {})}\r\n                                 ref=\"popper\">\r\n                                <div class=\"plain-popper-content\"\r\n                                     ref=\"content\"\r\n\r\n                                     onClick={emit.onClickPopper}\r\n                                     onTransitionend={handler.onPopperContentTransitionend}\r\n                                     onMousedown={emit.onMousedownPopper}\r\n                                     {...(props.trigger === 'hover' ? {\r\n                                         onMouseenter: emit.onEnterPopper,\r\n                                         onMouseleave: emit.onLeavePopper,\r\n                                     } : {})}\r\n                                >\r\n                                    <div class=\"plain-popper-arrow\"/>\r\n                                    {(props.title || slots.title.isExist()) && <div class=\"pl-popper-title\">\r\n                                        {props.title || slots.title()}\r\n                                    </div>}\r\n                                    {(props.message || slots.popper.isExist()) && <div class=\"pl-popper-content-inner\" style={sizeStyles.value}>\r\n                                        {!!scrollAttrs.value ? (\r\n                                            <pl-scroll {...scrollAttrs.value}>\r\n                                                {props.message || slots.popper()}\r\n                                            </pl-scroll>\r\n                                        ) : (props.message || slots.popper())}\r\n                                    </div>}\r\n                                </div>\r\n                            </div>\r\n                        </Teleport>}\r\n                    </>\r\n                )\r\n            }\r\n        }\r\n    },\r\n}, {\r\n    refreshPopperReference,\r\n})","import {createDefaultService} from \"../../root/createDefaultService\";\r\nimport {PopperServiceOption} from \"./index\";\r\nimport {nextTick, reactive, ref} from 'vue';\r\n\r\nexport const PopperService = createDefaultService({\r\n    name: 'pl-popper-service',\r\n    setup(option: PopperServiceOption) {\r\n\r\n        const isShow = ref(false)\r\n        const isOpen = ref(false)\r\n\r\n        const state = reactive({\r\n            option,\r\n        })\r\n\r\n        async function service(option: PopperServiceOption) {\r\n            if (!option.getService || option.getService !== getRefer) {\r\n                /*clear*/\r\n                state.option.getService = undefined\r\n                /*init*/\r\n                state.option = option\r\n                state.option.getService = getRefer\r\n                await nextTick()\r\n            }\r\n            show()\r\n        }\r\n\r\n        function show() {\r\n            isShow.value = true\r\n        }\r\n\r\n        function hide() {\r\n            isShow.value = false\r\n        }\r\n\r\n        const refer = {\r\n            state,\r\n            isShow,\r\n            isOpen,\r\n            service,\r\n            show,\r\n            hide,\r\n        }\r\n\r\n        const getRefer = () => refer\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            onClickBody: (e: MouseEvent) => {\r\n                if (state.option.hideOnClickBody !== false) {\r\n                    hide()\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer,\r\n            render: () => (\r\n                <pl-popper\r\n                    v-model={isShow.value}\r\n                    {...{\r\n                        trigger: 'manual',\r\n                        reference: state.option.reference,\r\n                        'onUpdate:open': (val: boolean) => isOpen.value = val,\r\n                        ...handler,\r\n                        ...(state.option.popperAttrs || {}),\r\n                    }}\r\n                    v-slots={{\r\n                        popper: state.option.render,\r\n                    }}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import {SimpleFunction, VNodeChild} from \"../../../shims\";\r\nimport {registryRootService, RootServiceScope} from \"../../root/registryRootService\";\r\nimport {createDefaultManager} from \"../../root/createDefaultManager\";\r\nimport {PopperService} from \"./popper-service\";\r\nimport {App, computed, reactive} from 'vue';\r\nimport {createPlainEvent, PlainEvent} from \"../../../plugins/Event\";\r\n\r\nexport interface PopperServiceOption {\r\n    reference: () => any,                                                   // popper reference 目标元素\r\n    render: () => VNodeChild,                                               // popper content 内容\r\n    popperAttrs: () => any,                                                 // pl-popper 属性或者监听的事件\r\n    getService?: () => typeof PopperService.use.class,                      // option被提供服务之后，service与option绑定关系\r\n    hideOnClickBody?: boolean,                                              // 是否点击外部body的时候自动关闭\r\n}\r\n\r\nconst getPopperService = registryRootService(\r\n    'popper',\r\n    createDefaultManager('pl-popper-manager', PopperService),\r\n    (getManager, ins) => {\r\n\r\n        return (option: PopperServiceOption) => {\r\n\r\n            /*---------------------------------------create popper agent-------------------------------------------*/\r\n            const state = reactive({option})\r\n            const service = computed(() => !state.option.getService ? null : state.option.getService())\r\n            const isShow = computed(() => !!service.value && service.value.isShow.value)\r\n            const isOpen = computed(() => !!service.value && service.value.isShow.value)\r\n            const agent = reactive({\r\n                isShow,\r\n                isOpen,\r\n                service,\r\n                show: () => !!agent.service ? agent.service.show() : getManager().then(manager => manager.service(state.option)),\r\n                hide: () => !!agent.service && agent.service.hide(),\r\n                toggle: () => isShow.value ? agent.hide() : agent.show(),\r\n                destroy: () => {\r\n                    agent.hide()\r\n                    state.option.getService = undefined\r\n                }\r\n            })\r\n\r\n            UnmountListener.on(ins, () => {\r\n                agent.hide()\r\n                state.option.getService = undefined\r\n            })\r\n\r\n            return agent\r\n        }\r\n    },\r\n    RootServiceScope.ins,\r\n)\r\n\r\nconst UnmountListener = (() => {\r\n\r\n    const map = new Map<string, PlainEvent>()\r\n    const EVENT_NAME = 'UnmountListener'\r\n\r\n    return {\r\n        /**\r\n         * 派发了beforeUnmount事件之后，组件已经销毁，所以event已经没有必要了，这里也要销毁event\r\n         * @author  韦胜健\r\n         * @date    2020/11/25 21:28\r\n         */\r\n        emit: (ctx: any) => {\r\n            const event = map.get(ctx._.uid)\r\n            if (!!event) {\r\n                event.emit(EVENT_NAME)\r\n                event.clear()\r\n                map.delete(ctx)\r\n            }\r\n        },\r\n        on: (ctx: any, handler: SimpleFunction) => {\r\n            let event = map.get(ctx._.uid)\r\n            if (!event) {\r\n                event = createPlainEvent()\r\n                map.set(ctx._.uid, event)\r\n            }\r\n            event.on(EVENT_NAME, handler)\r\n        },\r\n    }\r\n})();\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            beforeCreate() {\r\n                Object.defineProperty(this, '$popper', {\r\n                    get() {\r\n                        return getPopperService(this)\r\n                    },\r\n                })\r\n            },\r\n            beforeUnmount() {\r\n                UnmountListener.emit(this)\r\n            }\r\n        })\r\n    },\r\n}","import Popper from './popper'\r\nimport PopperService from './service'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Popper, {expose: {PopperService}, plugins: [PopperService]})","import {designComponent} from \"../../use/designComponent\";\r\nimport Scroll from './scroll'\r\nimport {reactive, computed, resolveDirective, withDirectives} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\n\r\nexport const VerticalScrollbar = designComponent({\r\n    props: {\r\n        tooltip: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const scroll = Scroll.use.inject()\r\n\r\n        const dragState = {\r\n            top: 0,\r\n            clientY: 0,\r\n        }\r\n\r\n        const state = reactive({\r\n            scrollTop: 0,\r\n        })\r\n\r\n        const height = computed(() => {\r\n            return scroll.state.contentHeight > scroll.state.hostHeight ?\r\n                (scroll.state.hostHeight * scroll.state.hostHeight / scroll.state.contentHeight)\r\n                : 0\r\n        })\r\n        const top = computed(() => {\r\n            return (scroll.state.hostHeight - height.value) * state.scrollTop / (scroll.state.contentHeight - scroll.state.hostHeight)\r\n        })\r\n\r\n        const styles = useStyles(() => {\r\n            return {\r\n                height: `${height.value}px`,\r\n                width: `${scroll.targetScrollbarSize.value}px`,\r\n                top: `${top.value}px`,\r\n                backgroundColor: scroll.props.scrollbarColor,\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            onScroll: (e: Event) => {\r\n                state.scrollTop = (e.target as HTMLElement).scrollTop\r\n            },\r\n            onMousedown: (e: MouseEvent) => {\r\n                scroll.freezeState.isDragging = true\r\n                dragState.top = top.value\r\n                dragState.clientY = e.clientY\r\n                document.addEventListener('mousemove', handler.onMousemove)\r\n                document.addEventListener('mouseup', handler.onMouseup)\r\n                disabledUserSelect()\r\n            },\r\n            onMousemove: (e: MouseEvent) => {\r\n                let deltaY = e.clientY - dragState.clientY\r\n                let top = dragState.top + deltaY\r\n                let scrollTop = top * (scroll.state.contentHeight - scroll.state.hostHeight) / (scroll.state.hostHeight - height.value)\r\n                scrollTop = Math.max(0, Math.min(scrollTop, scroll.state.contentHeight - scroll.state.hostHeight))\r\n                if (!scroll.props.scrollAfterDragEnd) {\r\n                    scroll.refs.wrapper.scrollTop = scrollTop\r\n                } else {\r\n                    /*滚动条发生位移，但是内容scrollTop暂时不变*/\r\n                    state.scrollTop = scrollTop\r\n                }\r\n            },\r\n            onMouseup: (e: MouseEvent) => {\r\n                scroll.freezeState.isDragging = false\r\n                document.removeEventListener('mousemove', handler.onMousemove)\r\n                document.removeEventListener('mouseup', handler.onMouseup)\r\n                enableUserSelect()\r\n\r\n                if (scroll.props.scrollAfterDragEnd) {\r\n                    let deltaY = e.clientY - dragState.clientY\r\n                    let top = dragState.top + deltaY\r\n                    scroll.refs.wrapper.scrollTop = top * (scroll.state.contentHeight - scroll.state.hostHeight) / (scroll.state.hostHeight - height.value)\r\n                }\r\n            },\r\n        }\r\n\r\n        scroll.on.onScroll(handler.onScroll)\r\n\r\n        return {\r\n            render: () => {\r\n\r\n                let content = <div class=\"pl-vertical-scrollbar\" style={styles.value} onMousedown={handler.onMousedown}/> as any\r\n                if (!!props.tooltip) {\r\n                    const TooltipDirective = resolveDirective('tooltip')\r\n                    if (!!TooltipDirective) {\r\n                        content = withDirectives(content, [[TooltipDirective, props.tooltip]])\r\n                    }\r\n                }\r\n\r\n                return (\r\n                    <div class=\"pl-vertical-scrollbar-wrapper\">\r\n                        {content}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport Scroll from \"./scroll\";\r\nimport {reactive, computed, withDirectives, resolveDirective} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\n\r\nexport const HorizontalScrollbar = designComponent({\r\n    props: {\r\n        tooltip: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const dragState = {\r\n            left: 0,\r\n            clientX: 0,\r\n        }\r\n\r\n        const scroll = Scroll.use.inject()\r\n\r\n        const state = reactive({\r\n            scrollLeft: 0,\r\n        })\r\n\r\n        const width = computed(() => {\r\n            return scroll.state.contentWidth > scroll.state.hostWidth ? (scroll.state.hostWidth * scroll.state.hostWidth) / scroll.state.contentWidth : 0\r\n        })\r\n        const left = computed(() => {\r\n            return (scroll.state.hostWidth - width.value) * state.scrollLeft / (scroll.state.contentWidth - scroll.state.hostWidth)\r\n        })\r\n        const styles = useStyles(() => ({\r\n            height: `${scroll.targetScrollbarSize.value}px`,\r\n            width: `${width.value}px`,\r\n            left: `${left.value}px`,\r\n            backgroundColor: scroll.props.scrollbarColor,\r\n        }))\r\n\r\n        const handler = {\r\n            onScroll: (e: Event) => {\r\n                state.scrollLeft = (e.target as HTMLElement).scrollLeft\r\n            },\r\n            onMousedown: (e: MouseEvent) => {\r\n                scroll.freezeState.isDragging = true\r\n                dragState.left = left.value\r\n                dragState.clientX = e.clientX\r\n                document.addEventListener('mousemove', handler.onMousemove)\r\n                document.addEventListener('mouseup', handler.onMouseup)\r\n                disabledUserSelect()\r\n            },\r\n            onMousemove: (e: MouseEvent) => {\r\n                let deltaX = e.clientX - dragState.clientX\r\n                const left = dragState.left + deltaX\r\n                let scrollLeft = left * (scroll.state.contentWidth - scroll.state.hostWidth) / (scroll.state.hostWidth - width.value)\r\n                scrollLeft = Math.max(0, Math.min(scrollLeft, scroll.state.contentWidth - scroll.state.hostWidth))\r\n                if (!scroll.props.scrollAfterDragEnd) {\r\n                    scroll.refs.wrapper.scrollLeft = scrollLeft\r\n                } else {\r\n                    state.scrollLeft = scrollLeft\r\n                }\r\n            },\r\n            onMouseup: (e: MouseEvent) => {\r\n                scroll.freezeState.isDragging = false\r\n                document.removeEventListener('mousemove', handler.onMousemove)\r\n                document.removeEventListener('mouseup', handler.onMouseup)\r\n                enableUserSelect()\r\n\r\n                if (scroll.props.scrollAfterDragEnd) {\r\n                    let deltaX = e.clientX - dragState.clientX\r\n                    const left = dragState.left + deltaX\r\n                    scroll.refs.wrapper.scrollLeft = left * (scroll.state.contentWidth - scroll.state.hostWidth) / (scroll.state.hostWidth - width.value)\r\n                }\r\n            },\r\n        }\r\n\r\n        scroll.on.onScroll(handler.onScroll)\r\n\r\n        return {\r\n            render: () => {\r\n                let content = <div class=\"pl-horizontal-scrollbar\" style={styles.value} onMousedown={handler.onMousedown}/> as any\r\n                if (!!props.tooltip) {\r\n                    const TooltipDirective = resolveDirective('tooltip')\r\n                    if (!!TooltipDirective) {\r\n                        content = withDirectives(content, [[TooltipDirective, props.tooltip]])\r\n                    }\r\n                }\r\n                return (\r\n                    <div class=\"pl-horizontal-scrollbar-wrapper\">\r\n                        {content}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useMounted} from \"../../use/useMounted\";\r\nimport {computed, nextTick, onBeforeUnmount, onMounted, reactive, watch} from 'vue';\r\nimport {throttle} from 'plain-utils/utils/throttle';\r\nimport {ResizeDetectFuncParam, ResizeDetectorDirective} from \"../../plugins/ResizeDetector\";\r\nimport Popper from '../popper'\r\nimport './scroll.scss'\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {VerticalScrollbar} from \"./vertical-scrollbar\";\r\nimport {HorizontalScrollbar} from \"./horizontal-scrollbar\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\n\r\nexport const enum PLAIN_SCROLL_VERTICAL_POSITION {\r\n    top = 'top',\r\n    center = 'center',\r\n    bottom = 'bottom'\r\n}\r\n\r\nconst Scroll = designComponent({\r\n    name: 'pl-scroll',\r\n    directives: {resize: ResizeDetectorDirective},\r\n    props: {\r\n        refreshState: {},                                                                               // 监听改属性，以便自动执行refresh刷新\r\n        scrollbarSize: {type: Number},                                                                  // 滚动条大小\r\n        scrollbarColor: {type: String, default: 'rgba(144,147,153,.3)'},                                // 滚动条颜色\r\n        scrollX: {type: Boolean},                                                                       // 可以横向滚动\r\n        scrollY: {type: Boolean, default: true},                                                        // 可以纵向滚动\r\n        hideScrollbar: {type: Boolean},                                                                 // 隐藏滚动条\r\n        alwaysShowScrollbar: {type: Boolean},                                                           // 一直显示滚动条\r\n        fitContentWidth: {type: Boolean},                                                               // 适配内容宽度\r\n        fitContentHeight: {type: Boolean},                                                              // 适配内容高度\r\n        fitHostWidth: {type: Boolean},                                                                  // 适配容器宽度\r\n        fitHostHeight: {type: Boolean},                                                                 // 适配容器高度\r\n        topThreshold: {type: Number, default: 20},                                                      // 距离顶部多少距离派发滚动到顶部事件\r\n        bottomThreshold: {type: Number, default: 20},                                                   // 距离底部多少距离派发滚动到底部事件\r\n        autoScrollSpeed: {type: Number, default: 400},                                                  // 自动滚动的时候的速度，每秒钟滚动的距离\r\n        scrollAfterDragEnd: {type: Boolean,},                                                           // 是否拖拽结束后才刷新滚动位置\r\n        disableListTransition: {type: Boolean,},                                                        // 是否股弄懂的时候禁用pl-list的队列动画\r\n        horizontalScrollbarTooltip: {type: String},                                                     // 横向滚动条tooltip显示文本\r\n        verticalScrollbarTooltip: {type: String},                                                       // 纵向滚动条tooltip显示文本\r\n    },\r\n    emits: {\r\n        onScroll: (e: Event) => true,\r\n        onVerticalScrollTop: (e: Event) => true,\r\n        onVerticalScrollBottom: (e: Event) => true,\r\n        onVerticalScrollCenter: (e: Event) => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit, on, off}}) {\r\n\r\n        const {slots} = useSlots(['content'])\r\n\r\n        /*---------------------------------------ref-------------------------------------------*/\r\n\r\n        const {refs} = useRefs({\r\n            host: HTMLDivElement,\r\n            wrapper: HTMLDivElement,\r\n            content: HTMLDivElement,\r\n        })\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const mounted = useMounted()\r\n        const popper = Popper.use.inject(null)\r\n        /*非响应式状态*/\r\n        const freezeState = {\r\n            verticalPosition: PLAIN_SCROLL_VERTICAL_POSITION.top,               // 当前滚动纵向位置，top，center，right\r\n            cancelAnimate: null as null | number,                               // 自动滚动动画计时器\r\n            wrapperScrollTop: 0,                                                // 容器 scrollTop\r\n            wrapperScrollLeft: 0,                                               // 容器 scrollLeft\r\n            emitScroll: true,                                                   // 当前是否派发scroll事件\r\n\r\n            _isDragging: false,\r\n            get isDragging() {\r\n                return this._isDragging\r\n            },\r\n            set isDragging(val: boolean) {\r\n                this._isDragging = val\r\n                if (val) {\r\n                    refs.host.setAttribute('is-dragging', '')\r\n                } else {\r\n                    refs.host.removeAttribute('is-dragging')\r\n                }\r\n            },\r\n        }\r\n        const state = reactive({\r\n            contentWidth: 0,                                                    // 内容宽度\r\n            contentHeight: 0,                                                   // 内容高度\r\n            hostWidth: 0,                                                       // 容器宽度\r\n            hostHeight: 0,                                                      // 容器高度\r\n        })\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        const targetScrollbarSize = computed(() => {\r\n            if (!props.scrollX) {\r\n                return props.scrollbarSize || 6\r\n            } else {\r\n                return props.scrollbarSize || 9\r\n            }\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            `pl-scroll`,\r\n            {\r\n                'pl-scroll-always-show-scroll-bar': props.alwaysShowScrollbar,\r\n            }\r\n        ])\r\n\r\n        const hostStyles = useStyles(style => {\r\n            if (!mounted.value) return style\r\n            if (props.fitContentHeight) {\r\n                style.height = `${state.contentHeight}px`\r\n            }\r\n            return style\r\n        })\r\n\r\n        const wrapperStyles = useStyles(style => {\r\n            if (!mounted.value) return style\r\n            if (props.fitContentHeight) {\r\n                style.height = `${state.contentHeight + 17}px`\r\n            }\r\n            return style\r\n        })\r\n\r\n        const contentStyles = useStyles(style => {\r\n            if (!mounted.value) return style\r\n            if (!props.scrollX) {\r\n                style.width = props.fitContentWidth && state.contentWidth > 0 ? `${state.contentWidth}px` : `100%`;\r\n                style.overflowX = 'hidden'\r\n            }\r\n\r\n            if (!props.scrollY) {\r\n                style.height = props.fitContentHeight && state.contentHeight > 0 ? `${state.contentHeight}px` : `100%`;\r\n                style.overflowY = 'hidden'\r\n            }\r\n\r\n            if (props.fitHostHeight) {\r\n                style.height = '100%'\r\n            }\r\n            if (props.fitHostWidth) {\r\n                style.width = '100%'\r\n            }\r\n            if (props.fitContentWidth) {\r\n                style.width = `${state.contentWidth}px`\r\n            }\r\n            if (props.fitContentHeight) {\r\n                style.height = `${state.contentHeight}px`\r\n            }\r\n\r\n            return style\r\n        })\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n\r\n        const methods = {\r\n            refresh: async () => {\r\n                await nextTick()\r\n\r\n                const {scrollWidth: width1, scrollHeight: height1} = refs.content\r\n                handler.contentResize({\r\n                    width: Math.ceil(width1),\r\n                    height: Math.ceil(height1),\r\n                })\r\n\r\n                const {scrollWidth: width2, scrollHeight: height2} = refs.host\r\n                handler.hostResize({\r\n                    width: Math.ceil(width2),\r\n                    height: Math.ceil(height2),\r\n                })\r\n            },\r\n            /**\r\n             * 滚动到指定位置\r\n             * @author  韦胜健\r\n             * @date    2020/12/7 12:20\r\n             * @param   point\r\n             * @param   point.x             // 滚动scrollLeft值\r\n             * @param   point.y             // 滚动scrollTop值\r\n             * @param   configOrTime        // number|{ time?: number, noEmitScroll?: boolean }\r\n             * @param   configOrTime.time   // 滚动的时间\r\n             * @param   configOrTime.noEmitScroll //滚动期间不派发scroll事件\r\n             */\r\n            async scroll(point: { x?: number, y?: number }, configOrTime?: number | { time?: number, noEmitScroll?: boolean }) {\r\n\r\n                if (!refs.wrapper) return\r\n\r\n                const config = typeof configOrTime === \"number\" ? {time: configOrTime} : configOrTime\r\n                const {time, noEmitScroll} = (config || {})\r\n\r\n                // if (point.x != null) this.wrapper!.scrollLeft = point.x\r\n                // if (point.y != null) this.wrapper!.scrollTop = point.y\r\n\r\n                if (noEmitScroll) {\r\n                    freezeState.emitScroll = false\r\n                }\r\n                const done = () => noEmitScroll && (freezeState.emitScroll = true)\r\n\r\n                if (!time) {\r\n                    if (point.x != null) refs.wrapper!.scrollLeft = point.x\r\n                    if (point.y != null) refs.wrapper!.scrollTop = point.y\r\n                    await delay(23)\r\n                    done()\r\n                } else {\r\n\r\n                    if (!!freezeState.cancelAnimate) {\r\n                        cancelAnimationFrame(freezeState.cancelAnimate)\r\n                        freezeState.cancelAnimate = null\r\n                    }\r\n\r\n                    let ny = refs.wrapper!.scrollTop\r\n                    let nx = refs.wrapper!.scrollLeft\r\n\r\n                    let ky = (point.y! - ny) / time\r\n                    let kx = (point.x! - nx) / time\r\n\r\n                    let startTime = Date.now()\r\n                    const run = async () => {\r\n                        let nowTime = Date.now()\r\n                        let delta = nowTime - startTime\r\n                        let top;\r\n                        let left;\r\n\r\n                        if (delta >= time) {\r\n                            freezeState.cancelAnimate = null\r\n                            top = time * ky + ny\r\n                            left = time * kx + nx\r\n\r\n                            if (!!refs.wrapper) {\r\n                                refs.wrapper.scrollTop = top\r\n                                refs.wrapper.scrollLeft = left\r\n                                await delay(23)\r\n                                done()\r\n                            }\r\n                        } else {\r\n                            top = delta * ky + ny\r\n                            left = delta * kx + nx\r\n\r\n                            if (!!refs.wrapper) {\r\n                                refs.wrapper.scrollTop = top\r\n                                refs.wrapper.scrollLeft = left\r\n                            }\r\n                            freezeState.cancelAnimate = requestAnimationFrame(run)\r\n                        }\r\n                    }\r\n                    run()\r\n                }\r\n            },\r\n            scrollTop(scrollTop: number, time?: number) {\r\n                methods.scroll({y: scrollTop}, {time})\r\n            },\r\n            scrollLeft(scrollLeft: number, time?: number) {\r\n                methods.scroll({x: scrollLeft}, {time})\r\n            },\r\n            scrollEnd(point: { x: boolean, y?: boolean } = {x: true, y: true}) {\r\n                methods.scroll({\r\n                    x: point.x ? refs.wrapper!.scrollWidth : undefined,\r\n                    y: point.y ? refs.wrapper!.scrollHeight : undefined,\r\n                })\r\n            },\r\n            autoScrollTop() {\r\n                const {hostHeight, contentHeight} = state\r\n                const {wrapperScrollTop} = freezeState\r\n                const scrollHeight = contentHeight - hostHeight\r\n                if (scrollHeight <= 0) {\r\n                    return\r\n                }\r\n                const height = wrapperScrollTop\r\n                if (height <= 0) {\r\n                    return\r\n                }\r\n                const duration = (height / props.autoScrollSpeed) * 1000\r\n                methods.scrollTop(0, duration)\r\n            },\r\n            autoScrollBottom() {\r\n                const {hostHeight, contentHeight} = state\r\n                const {wrapperScrollTop} = freezeState\r\n                const scrollHeight = contentHeight - hostHeight\r\n                if (scrollHeight <= 0) {\r\n                    return\r\n                }\r\n                const height = scrollHeight - wrapperScrollTop\r\n                if (height <= 0) {\r\n                    return\r\n                }\r\n                const duration = (height / props.autoScrollSpeed) * 1000\r\n                methods.scrollTop(scrollHeight, duration)\r\n            },\r\n            autoScrollLeft() {\r\n                const {hostWidth, contentWidth} = state\r\n                const {wrapperScrollLeft} = freezeState\r\n                const scrollWidth = contentWidth - hostWidth\r\n                if (scrollWidth <= 0) {\r\n                    return\r\n                }\r\n                const width = wrapperScrollLeft\r\n                if (width <= 0) {\r\n                    return\r\n                }\r\n                const duration = (width / props.autoScrollSpeed) * 1000\r\n                methods.scrollLeft(0, duration)\r\n            },\r\n            autoScrollRight() {\r\n                const {hostWidth, contentWidth} = state\r\n                const {wrapperScrollLeft} = freezeState\r\n                const scrollWidth = contentWidth - hostWidth\r\n                if (scrollWidth <= 0) {\r\n                    return\r\n                }\r\n                const width = scrollWidth - wrapperScrollLeft\r\n                if (width <= 0) {\r\n                    return\r\n                }\r\n                const duration = (width / props.autoScrollSpeed) * 1000\r\n                methods.scrollLeft(scrollWidth, duration)\r\n            },\r\n            stopAutoScroll() {\r\n                if (!!freezeState.cancelAnimate) {\r\n                    cancelAnimationFrame(freezeState.cancelAnimate)\r\n                    freezeState.cancelAnimate = null\r\n                }\r\n            },\r\n            /**\r\n             * 禁用pl-list的队列动画，300ms后恢复正常\r\n             * @author  韦胜健\r\n             * @date    2020/12/15 10:16\r\n             */\r\n            disableListTransition: (() => {\r\n                const disabledQueueAnimation = debounce(() => refs.host.removeAttribute('virtual-scrolling'), 300, true)\r\n                return () => {\r\n                    refs.host.setAttribute('virtual-scrolling', '')\r\n                    disabledQueueAnimation();\r\n                }\r\n            })(),\r\n        }\r\n\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            windowResize: throttle(() => methods.refresh(), 500),\r\n            popperOpen: () => methods.refresh(),\r\n            popperShow: async () => {\r\n                await nextTick()\r\n                methods.scroll({y: 0})\r\n            },\r\n            contentResize: (data: ResizeDetectFuncParam) => {\r\n                if (data.width != null) state.contentWidth = data.width\r\n                if (data.height != null) state.contentHeight = data.height\r\n            },\r\n            hostResize: (data: ResizeDetectFuncParam) => {\r\n                if (data.width != null) state.hostWidth = data.width - 16\r\n                if (data.height != null) state.hostHeight = data.height - 16\r\n            },\r\n            wrapperMousewheel: (e: WheelEvent) => {\r\n                if (!!freezeState.cancelAnimate) {\r\n                    cancelAnimationFrame(freezeState.cancelAnimate)\r\n                    freezeState.cancelAnimate = null\r\n                }\r\n            },\r\n            wrapperScroll: (e: Event) => {\r\n                const target = e.target as HTMLElement\r\n                freezeState.wrapperScrollTop = target.scrollTop\r\n                freezeState.wrapperScrollLeft = target.scrollLeft\r\n\r\n                if (freezeState.emitScroll) {\r\n                    emit.onScroll(e)\r\n                }\r\n\r\n                if (freezeState.verticalPosition === PLAIN_SCROLL_VERTICAL_POSITION.top && freezeState.wrapperScrollTop > props.topThreshold!) {\r\n                    /*进入center*/\r\n                    emit.onVerticalScrollCenter(e)\r\n                    freezeState.verticalPosition = PLAIN_SCROLL_VERTICAL_POSITION.center\r\n                } else if (freezeState.verticalPosition === PLAIN_SCROLL_VERTICAL_POSITION.center) {\r\n                    // console.log(this.contentHeight - this.hostHeight - this.contentWrapperScrollTop, this.bottomScrollDuration)\r\n                    if (freezeState.wrapperScrollTop < props.topThreshold!) {\r\n                        /*进入top*/\r\n                        emit.onVerticalScrollTop(e)\r\n                        freezeState.verticalPosition = PLAIN_SCROLL_VERTICAL_POSITION.top\r\n                    } else if (state.contentHeight - state.hostHeight - freezeState.wrapperScrollTop < props.bottomThreshold!) {\r\n                        /*进入bottom*/\r\n                        emit.onVerticalScrollBottom(e)\r\n                        freezeState.verticalPosition = PLAIN_SCROLL_VERTICAL_POSITION.bottom\r\n                    }\r\n\r\n                } else if (freezeState.verticalPosition === PLAIN_SCROLL_VERTICAL_POSITION.bottom) {\r\n                    if (state.contentHeight - state.hostHeight - freezeState.wrapperScrollTop > props.bottomThreshold!) {\r\n                        /*进入center*/\r\n                        emit.onVerticalScrollCenter(e)\r\n                        freezeState.verticalPosition = PLAIN_SCROLL_VERTICAL_POSITION.center\r\n                    }\r\n                }\r\n\r\n                if (props.disableListTransition) {\r\n                    methods.disableListTransition()\r\n                }\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------lifecycle-------------------------------------------*/\r\n\r\n        onMounted(() => {\r\n            window.addEventListener('resize', handler.windowResize)\r\n            if (!!popper) {\r\n                popper.event.on.onOpen(handler.popperOpen)\r\n                popper.event.on.onShow(handler.popperShow)\r\n            }\r\n        })\r\n\r\n        onBeforeUnmount(() => {\r\n            window.removeEventListener('resize', handler.windowResize)\r\n            if (!!popper) {\r\n                popper.event.off.onOpen(handler.popperOpen)\r\n                popper.event.off.onShow(handler.popperShow)\r\n            }\r\n        })\r\n\r\n        watch(() => props.refreshState, methods.refresh)\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n                on, off,\r\n                targetScrollbarSize,\r\n                refs,\r\n                slots,\r\n                handler,\r\n                methods,\r\n                state,\r\n                freezeState,\r\n            },\r\n            render: () => (\r\n                <div ref=\"host\"\r\n                     class={classes.value}\r\n                     v-resize={handler.hostResize}\r\n                     style={hostStyles.value as any}>\r\n                    <div ref=\"wrapper\"\r\n                         class=\"pl-scroll-wrapper\"\r\n                         style={wrapperStyles.value as any}\r\n                         onScroll={handler.wrapperScroll}\r\n                         {...{onMousewheel: handler.wrapperMousewheel}}>\r\n                        <div ref=\"content\"\r\n                             class=\"pl-scroll-content\"\r\n                             style={contentStyles.value as any}\r\n                             v-resize={handler.contentResize}>\r\n                            {slots.default()}\r\n                        </div>\r\n                        {slots.content()}\r\n                    </div>\r\n\r\n                    {\r\n                        !props.hideScrollbar && props.scrollY && (\r\n                            <div class=\"pl-vertical-scrollbar-wrapper\">\r\n                                {<VerticalScrollbar tooltip={props.verticalScrollbarTooltip}/>}\r\n                            </div>\r\n                        )\r\n                    }\r\n                    {\r\n                        !props.hideScrollbar && props.scrollX && (\r\n                            <div class=\"pl-horizontal-scrollbar-wrapper\">\r\n                                {<HorizontalScrollbar tooltip={props.horizontalScrollbarTooltip}/>}\r\n                            </div>\r\n                        )\r\n                    }\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport type PlainScroll = typeof Scroll.use.class\r\n\r\nexport default Scroll","import scroll from './scroll'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(scroll)","import {createApp} from 'vue'\r\nimport {ComponentPlugin} from \"../shims\";\r\nimport {installPlugin} from \"./installPlugin\";\r\n\r\nexport function newInstance<Component>(component: Component, config: {\r\n    el?: HTMLElement,\r\n    parentNode?: HTMLElement,\r\n    plugins?: ComponentPlugin[],\r\n} = {}) {\r\n    let {el, parentNode} = config\r\n    if (!el) {\r\n        el = document.createElement('div')\r\n        if (!!parentNode) {\r\n            parentNode.appendChild(el)\r\n        } else {\r\n            document.body.appendChild(el)\r\n        }\r\n    }\r\n    const app = createApp(component)\r\n    if (!!config.plugins) {\r\n        config.plugins.forEach(plugin => installPlugin(app, plugin))\r\n    }\r\n    const ins = app.mount(el) as Component extends { use: { class: infer C } } ? C : any\r\n    return {\r\n        app,\r\n        ins,\r\n        el,\r\n    }\r\n}","import {Directive, reactive, App} from 'vue';\r\nimport {designComponent} from \"../../../use/designComponent\";\r\nimport {newInstance} from \"../../../utils/newInstance\";\r\nimport LoadingMaskPlugin from '../../loading-mask'\r\nimport LoadingPlugin from '../../loading'\r\n\r\ntype LoadingMaskBinding = boolean | {\r\n    modelValue?: boolean,\r\n    message?: boolean,\r\n    loadingType?: 'alpha' | 'beta' | 'gamma' | 'delta',\r\n    background?: string,\r\n    unlock?: boolean,\r\n}\r\n\r\nconst Mask = designComponent({\r\n    setup() {\r\n        const state = reactive({\r\n            option: null as null | LoadingMaskBinding & { modelValue?: boolean }\r\n        })\r\n        return {\r\n            refer: {\r\n                update: (option: LoadingMaskBinding) => {\r\n                    state.option = typeof option === \"object\" ?\r\n                        {\r\n                            ...option,\r\n                            modelValue: option.modelValue === undefined ? true : option.modelValue\r\n                        }\r\n                        : {modelValue: option}\r\n                }\r\n            },\r\n            render: () => (\r\n                !!state.option ? <pl-loading-mask {...state.option} inDirective/> : null\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nclass LoadingMask {\r\n\r\n    mask?: {\r\n        app: App,\r\n        ins: typeof Mask.use.class,\r\n        el: HTMLElement\r\n    }\r\n\r\n    constructor(private el: HTMLElement) {}\r\n\r\n    update(binding: LoadingMaskBinding) {\r\n        const flag = typeof binding === \"object\" ? true : binding\r\n        flag ? this.show(binding) : this.hide()\r\n    }\r\n\r\n    show(binding: LoadingMaskBinding) {\r\n        if (!this.mask) {\r\n            this.mask = newInstance(Mask, {\r\n                parentNode: this.el,\r\n                plugins: [\r\n                    LoadingPlugin,\r\n                    LoadingMaskPlugin\r\n                ]\r\n            })\r\n        }\r\n        this.mask.ins.update(binding)\r\n    }\r\n\r\n    hide() {\r\n        if (!!this.mask) {\r\n            this.mask.ins.update(false)\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        if (!!this.mask) {\r\n            this.mask.app.unmount(this.mask.el)\r\n        }\r\n    }\r\n}\r\n\r\nconst directive = (() => {\r\n    let map = new WeakMap<HTMLElement, LoadingMask>()\r\n    return {\r\n        active: (el: HTMLElement, binding: { value: LoadingMaskBinding }) => {\r\n            // console.log('active', binding.value);\r\n            const flag = typeof binding.value === \"object\" ? true : binding.value\r\n            let loadingMask = map.get(el)\r\n            if (flag) {\r\n                /*第一次显示的时候才创建实例*/\r\n                if (!loadingMask) {\r\n                    loadingMask = new LoadingMask(el)\r\n                    map.set(el, loadingMask)\r\n                }\r\n                loadingMask.update(binding.value)\r\n            } else {\r\n                if (!!loadingMask) {\r\n                    loadingMask.update(binding.value)\r\n                }\r\n            }\r\n        },\r\n        inactive: (el: HTMLElement) => {\r\n            // console.log('inactive');\r\n            const loadingMask = map.get(el)\r\n            if (!!loadingMask) {\r\n                loadingMask.destroy()\r\n            }\r\n        }\r\n    }\r\n})()\r\n\r\nexport const LoadingMaskDirective: Directive = {\r\n    mounted: directive.active,\r\n    updated: directive.active,\r\n    beforeUnmount: directive.inactive,\r\n}","import Service from './loading-bar-service'\r\nimport {createDefaultManager} from \"../../root/createDefaultManager\";\r\nimport {registryRootService} from \"../../root/registryRootService\";\r\nimport {RequireFormat} from \"../../../shims\";\r\n\r\nexport interface LoadingBarOption {\r\n    color?: string,\r\n    doneColor?: string,\r\n    failColor?: string,\r\n    height?: number,\r\n    percent?: number,\r\n    autoStart?: boolean,\r\n    autoProcess?: boolean,\r\n}\r\n\r\nexport type LoadingBarFormatOption = RequireFormat<LoadingBarOption,\r\n    \"color\" | \"doneColor\" | \"failColor\" | \"height\" | \"percent\" | \"autoStart\" | \"autoProcess\">\r\n\r\nexport interface LoadingBarHandler {\r\n    init: (option: LoadingBarOption) => void,\r\n    update: (option: LoadingBarOption) => void,\r\n    start: () => void,\r\n    done: () => void,\r\n    fail: () => void,\r\n}\r\n\r\nexport enum LoadingBarStatus {\r\n    wait = 'wait',\r\n    process = 'process',\r\n    done = 'done',\r\n    fail = 'fail',\r\n}\r\n\r\nfunction formatOption(option: LoadingBarOption): LoadingBarFormatOption {\r\n    return Object.assign(option, {\r\n        color: option.color || 'primary',\r\n        doneColor: option.doneColor || 'primary',\r\n        failColor: option.failColor || 'error',\r\n        percent: option.percent || 0,\r\n        height: option.height || 4,\r\n        autoStart: option.autoStart == null ? true : option.autoStart,\r\n        autoProcess: option.autoProcess == null ? true : option.autoProcess,\r\n    }) as LoadingBarFormatOption\r\n}\r\n\r\nexport const getLoadingBarService = registryRootService(\r\n    'loading-bar',\r\n    createDefaultManager('pl-loading-bar-manager', Service),\r\n    getManager => {\r\n        return (option?: LoadingBarOption): LoadingBarFormatOption & LoadingBarHandler => {\r\n            const fo = formatOption(option || {})\r\n            getManager().then(manager => manager.service(fo))\r\n            return fo as any\r\n        }\r\n    }\r\n)","import {LoadingMaskServiceFormatOption} from \"./index\";\r\nimport {reactive, ref} from 'vue';\r\nimport {createDefaultService} from \"../../root/createDefaultService\";\r\n\r\nexport default createDefaultService({\r\n    name: 'loading-mask-service',\r\n    setup: (option: LoadingMaskServiceFormatOption) => {\r\n        const isShow = ref(false)\r\n\r\n        const state = reactive({\r\n            option,\r\n            key: 0,\r\n        })\r\n\r\n        const hide = () => isShow.value = false\r\n\r\n        const service = (option: LoadingMaskServiceFormatOption) => {\r\n            option.close = hide\r\n            state.option = option\r\n            state.key++\r\n            isShow.value = true\r\n            return hide\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                isShow,\r\n                isOpen: isShow,\r\n                service,\r\n            },\r\n            render: () => {\r\n                return (\r\n                    <pl-loading-mask\r\n                        key={state.key}\r\n                        v-model={isShow.value}\r\n                        message={state.option.message}\r\n                        loadingType={state.option.loadingType}\r\n                        background={state.option.background}\r\n                        unlock={state.option.unlock}\r\n                        fixedPosition\r\n                    />\r\n                )\r\n            }\r\n        }\r\n    }\r\n})","import Service from './loading-mask-service'\r\nimport {registryRootService} from \"../../root/registryRootService\";\r\nimport {createDefaultManager} from \"../../root/createDefaultManager\";\r\n\r\nexport interface LoadingMaskServiceOption {\r\n    message?: string,\r\n    loadingType?: string,\r\n    background?: string,\r\n    unlock?: boolean,\r\n}\r\n\r\nexport interface LoadingMaskServiceFormatOption extends LoadingMaskServiceOption {\r\n    close: () => void\r\n}\r\n\r\nexport const getLoadingMaskService = registryRootService(\r\n    'loading',\r\n    createDefaultManager('pl-loading-mask-manager', Service),\r\n    (getManager) => {\r\n        return (option: LoadingMaskServiceOption): LoadingMaskServiceFormatOption => {\r\n            option = option || {};\r\n            getManager().then(manager => manager.service(option as LoadingMaskServiceFormatOption));\r\n            return option as LoadingMaskServiceFormatOption\r\n        }\r\n    }\r\n)","import {createDefaultService} from \"../../root/createDefaultService\";\r\nimport {computed, reactive, ref} from 'vue';\r\nimport {LoadingBarFormatOption, LoadingBarStatus} from \"./index\";\r\nimport {StyleProperties} from \"../../../shims\";\r\nimport {nextIndex} from \"../../../utils/nextIndex\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\n\r\nexport default createDefaultService({\r\n    name: 'pl-loading-bar-service',\r\n    setup(option: LoadingBarFormatOption) {\r\n\r\n        const isShow = ref(false)\r\n\r\n        const state = reactive({\r\n            status: LoadingBarStatus.wait,\r\n            option: option as LoadingBarFormatOption | null,\r\n            zIndex: 0,\r\n            interval: null as null | number,\r\n            autoLoadingStep: 5,\r\n            startDelayer: null as null | number,\r\n        })\r\n\r\n        const color = computed(() => {\r\n            switch (state.status) {\r\n                case LoadingBarStatus.wait:\r\n                    return null\r\n                case LoadingBarStatus.process:\r\n                    return state.option!.color\r\n                case LoadingBarStatus.done:\r\n                    return state.option!.doneColor\r\n                case LoadingBarStatus.fail:\r\n                    return state.option!.failColor\r\n            }\r\n        })\r\n\r\n        const status = ['primary', 'success', 'warn', 'error', 'info']\r\n\r\n        const classes = computed(() => [\r\n            'pl-loading-bar-service',\r\n            {\r\n                [`pl-loading-bar-service-status-${color.value}`]: !!color.value && status.indexOf(color.value) > -1\r\n            }\r\n        ])\r\n\r\n        const styles = computed(() => {\r\n            if (!state.option) return {} as StyleProperties\r\n            return {\r\n                height: `${state.option.height}px`,\r\n                width: `${state.option!.percent}%`,\r\n                backgroundColor: (!!color.value && status.indexOf(color.value) === -1) ? color.value : '',\r\n                opacity: state.status === LoadingBarStatus.wait ? '0' : '1',\r\n                zIndex: String(state.zIndex),\r\n            } as StyleProperties\r\n        })\r\n\r\n        const methods = {\r\n            /**\r\n             * 开始自动播放进度\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            startAutoLoading: () => {\r\n                state.autoLoadingStep = 10\r\n                state.interval = setInterval(() => {\r\n                    if (!!state.option) {\r\n                        if (state.option.percent == null) {\r\n                            state.option.percent = 0\r\n                        }\r\n                        state.option.percent += state.autoLoadingStep\r\n                        state.autoLoadingStep -= 0.5\r\n                        if (state.option.percent + 20 > 100 || state.autoLoadingStep < 0) {\r\n                            methods.stopAutoLoading()\r\n                        }\r\n                    } else {\r\n                        methods.stopAutoLoading()\r\n                    }\r\n                }, 250)\r\n            },\r\n            /**\r\n             * 停止自动播放进度\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            stopAutoLoading: () => {\r\n                if (!!state.interval) {\r\n                    clearInterval(state.interval)\r\n                    state.interval = null\r\n                }\r\n            },\r\n            /**\r\n             * 初始化option\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            init: (option: LoadingBarFormatOption) => {\r\n                state.option = option\r\n                Object.assign(option, methods)\r\n                return methods\r\n            },\r\n            /**\r\n             * 更新option\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            update: (option: LoadingBarFormatOption) => {\r\n                if (!!state.option) {\r\n                    Object.assign(state.option, option)\r\n                }\r\n                methods.stopAutoLoading()\r\n            },\r\n            /**\r\n             * 开始loading\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            start: async () => {\r\n                state.startDelayer = setTimeout(async () => {\r\n                    if (!state.option) {\r\n                        return\r\n                    }\r\n\r\n                    const percent = state.option.percent\r\n                    isShow.value = true\r\n                    state.option.percent = 0\r\n\r\n                    state.status = LoadingBarStatus.process\r\n                    state.zIndex = nextIndex()\r\n\r\n                    await delay(23)\r\n                    state.option.percent = percent\r\n\r\n                    if (state.option!.autoProcess) {\r\n                        methods.startAutoLoading()\r\n                    }\r\n                }, 100)\r\n            },\r\n            /**\r\n             * 加载完成\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            done: async () => {\r\n                state.status = LoadingBarStatus.done\r\n                await methods.complete()\r\n            },\r\n            /**\r\n             * 加载失败\r\n             * @author  韦胜健\r\n             * @date    2020/9/25 21:16\r\n             */\r\n            fail: async () => {\r\n                state.status = LoadingBarStatus.fail\r\n                await methods.complete()\r\n            },\r\n            complete: async () => {\r\n                if (!state.option) {\r\n                    return\r\n                }\r\n                if (state.startDelayer != null) {\r\n                    clearTimeout(state.startDelayer)\r\n                    state.startDelayer = null\r\n                }\r\n                methods.stopAutoLoading()\r\n                state.option!.percent = 100\r\n                await delay(300)\r\n                state.status = LoadingBarStatus.wait\r\n                await delay(300)\r\n                isShow.value = false\r\n                state.option = null\r\n            },\r\n        };\r\n\r\n\r\n        const service = (option: LoadingBarFormatOption) => {\r\n            methods.init(option)\r\n            if (!!option.autoStart) {\r\n                methods.start()\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                isShow,\r\n                isOpen: isShow,\r\n                service,\r\n            },\r\n            render: () => isShow.value && (\r\n                <div class={classes.value} style={styles.value as any}/>\r\n            )\r\n        }\r\n    },\r\n})","import Loading from '../loading'\r\nimport LoadingMask from '../loading-mask'\r\nimport {App} from 'vue';\r\nimport {installPlugin} from \"../../utils/installPlugin\";\r\nimport {LoadingMaskDirective} from \"./mask/loading-mask-directive\";\r\nimport {getLoadingMaskService} from \"./mask\";\r\nimport {getLoadingBarService} from \"./bar\";\r\nimport './loading-service.scss'\r\n\r\nexport default {\r\n    install(app: App) {\r\n        installPlugin(app, Loading)\r\n        installPlugin(app, LoadingMask)\r\n        app.directive('loading', LoadingMaskDirective)\r\n        app.mixin({\r\n            beforeCreate() {\r\n                Object.defineProperty(this, '$loading', {\r\n                    get() {\r\n                        return {\r\n                            mask: getLoadingMaskService(this),\r\n                            bar: getLoadingBarService(this),\r\n                        }\r\n                    },\r\n                })\r\n            },\r\n        })\r\n    },\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive, computed} from 'vue';\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {HTMLInputEvent} from \"../../shims\";\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport './number.scss'\r\n\r\nconst NAN = 'NAN'\r\n\r\nexport default designComponent({\r\n    name: 'pl-number',\r\n    directives: {\r\n        ClickWave,\r\n    },\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n\r\n        modelValue: {type: [String, Number]},                       // 双向绑定值\r\n        min: {type: [String, Number]},                              // 最小值\r\n        max: {type: [String, Number]},                              // 最大值\r\n        step: {type: [String, Number], default: 1},                 // 计数器步长\r\n        stepStrictly: {type: Boolean},                              // 是否只能输入 step 的倍数\r\n        precision: {type: [Number, String]},                        // 数值精度\r\n        hideButton: {type: Boolean},                                // 隐藏操作按钮\r\n\r\n        /*---------------------------------------input-------------------------------------------*/\r\n        inputProps: {type: Object},                                 // pl-input属性配置对象\r\n    },\r\n    emits: {\r\n        onFocus: (e: Event) => true,\r\n        onBlur: (e: Event) => true,\r\n        onUpdateModelValue: (val: string | number | undefined) => true,\r\n        onEnter: (e: KeyboardEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoEmit: false})\r\n        useStyle({status: undefined})\r\n        const {editComputed} = useEdit()\r\n        const state = reactive({\r\n            isFocus: false,                                         // 当前是否获取焦点\r\n            interval: null as null | number,                        // 进步器长摁定时器\r\n        })\r\n\r\n        const {propsState} = useProps(props, {\r\n            min: useProps.NUMBER,\r\n            max: useProps.NUMBER,\r\n            step: useProps.NUMBER,\r\n            precision: useProps.NUMBER,\r\n        }) as {\r\n            propsState: {\r\n                min: number | null,\r\n                max: number | null,\r\n                step: number,\r\n                precision: number | null,\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            getValue: (val: any): undefined | number | 'NAN' => {\r\n                if (val == null) return undefined\r\n                val = String(val).trim()\r\n                if (val === '') return undefined\r\n                val = Number(val)\r\n                if (isNaN(val)) {\r\n                    return NAN\r\n                } else {\r\n                    return val\r\n                }\r\n            },\r\n            getEffectiveValue: (): number | undefined => {\r\n                let value = formatModelValue.value\r\n                if (value === NAN) {\r\n                    value = formatValue.value\r\n                    if (value === NAN) {\r\n                        if (propsState.min != null) return propsState.min\r\n                        else if (propsState.max != null) return propsState.max\r\n                        else if (props.stepStrictly) return propsState.step\r\n                        else return 0\r\n                    }\r\n                }\r\n                return value\r\n            },\r\n            checkValue: (value: number | undefined): number | undefined => {\r\n                if (value != null) {\r\n                    // min\r\n                    if (propsState.min != null && value < propsState.min) {\r\n                        value = propsState.min\r\n                    }\r\n                    // max\r\n                    if (propsState.max != null && value! > propsState.max) {\r\n                        value = propsState.max\r\n                    }\r\n                    // stepStrictly\r\n                    if (props.stepStrictly && value! % propsState.step! !== 0) {\r\n                        // console.log('props.value', props.modelValue)\r\n                        value = props.modelValue == undefined ? undefined : Number(props.modelValue)\r\n                    }\r\n                    // precision\r\n                    if (propsState.precision != null) {\r\n                        value = Number(value!.toFixed(propsState.precision))\r\n                    }\r\n                }\r\n                return value\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const classes = computed(() => ([\r\n            `pl-number`,\r\n            {\r\n                'pl-number-hide-button': props.hideButton,\r\n                'pl-number-disabled': editComputed.value.disabled,\r\n            }\r\n        ]))\r\n        const formatModelValue = computed(() => utils.getValue(model.value))\r\n        const formatValue = computed(() => utils.getValue(props.modelValue))\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            add: () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                let value = utils.getEffectiveValue()\r\n                if (value == null) {\r\n                    value = 0\r\n                }\r\n                value += propsState.step\r\n                value = utils.checkValue(value)\r\n                model.value = value\r\n                emit.onUpdateModelValue(model.value)\r\n            },\r\n            minus: () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                let value = utils.getEffectiveValue()\r\n                if (value == null) {\r\n                    value = 0\r\n                }\r\n                value -= propsState.step\r\n                value = utils.checkValue(value)\r\n                model.value = value\r\n                emit.onUpdateModelValue(model.value)\r\n            },\r\n            clearInterval: () => {              // 清除定时器\r\n                if (state.interval != null) {\r\n                    clearInterval(state.interval)\r\n                }\r\n                window.removeEventListener('mouseup', methods.clearInterval)\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            focus: (e: Event) => {\r\n                state.isFocus = true\r\n                emit.onFocus(e)\r\n            },\r\n            blur: (e: Event) => {\r\n                model.value = utils.checkValue(utils.getEffectiveValue())\r\n                emit.onUpdateModelValue(model.value)\r\n                state.isFocus = false\r\n                emit.onBlur(e)\r\n            },\r\n            input: (e: HTMLInputEvent) => {\r\n                model.value = e.target.value\r\n            },\r\n            enter: (e: KeyboardEvent) => {\r\n                model.value = utils.checkValue(utils.getEffectiveValue())\r\n                emit.onUpdateModelValue(model.value)\r\n                emit.onEnter(e)\r\n            },\r\n            intervalAdd: () => {\r\n                methods.add()\r\n                state.interval = setInterval(methods.add, 100)\r\n                window.addEventListener('mouseup', methods.clearInterval)\r\n            },\r\n            intervalMinus: () => {\r\n                methods.minus()\r\n                state.interval = setInterval(() => methods.minus(), 100)\r\n                window.addEventListener('mouseup', methods.clearInterval)\r\n            },\r\n            clearHandler: () => {\r\n                model.value = undefined\r\n                emit.onUpdateModelValue(model.value)\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n                const key = getKey(e)\r\n                switch (key) {\r\n                    case KEY.up:\r\n                        e.preventDefault()\r\n                        e.stopPropagation()\r\n                        methods.add()\r\n                        break\r\n                    case KEY.down:\r\n                        e.preventDefault()\r\n                        e.stopPropagation()\r\n                        methods.minus()\r\n                        break\r\n                    case KEY.enter:\r\n                        handler.enter(e)\r\n                        break\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                ...methods,\r\n            },\r\n            render: () => (\r\n                <pl-input class={classes.value}\r\n                          isFocus={state.isFocus}\r\n                          inputInnerTabindex={null}\r\n                          {...(props.inputProps || {})}\r\n                >\r\n                    {!props.hideButton && (\r\n                        <div class=\"pl-number-prepend-button plain-click-node\" onMousedown={handler.intervalMinus} v-click-wave>\r\n                            <pl-icon icon=\"el-icon-minus\"/>\r\n                        </div>\r\n                    )}\r\n                    <input type=\"text\"\r\n                           value={model.value}\r\n                           disabled={editComputed.value.disabled!}\r\n                           readonly={editComputed.value.readonly!}\r\n                           onFocus={handler.focus}\r\n                           onBlur={handler.blur}\r\n                           onInput={handler.input as any}\r\n                           onKeydown={handler.keydown}/>\r\n                    {!props.hideButton && (\r\n                        <div class=\"pl-number-append-button plain-click-node\" onMousedown={handler.intervalAdd} v-click-wave>\r\n                            <pl-icon icon=\"el-icon-plus\"/>\r\n                        </div>\r\n                    )}\r\n                </pl-input>\r\n            )\r\n        }\r\n    },\r\n})","import Input from '../input'\r\nimport Number from './number'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Number, {\r\n    plugins: [\r\n        Input,\r\n    ]\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {ClickWave} from \"../click-wave/click-wave-directive\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive, computed} from 'vue';\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport './toggle.scss'\r\n\r\nexport default designComponent({\r\n    name: 'pl-toggle',\r\n    directives: {ClickWave},\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {},                                                              // 双向绑定值\r\n        trueValue: {default: true},                                             // 选中时绑定的值\r\n        falseValue: {default: false},                                           // 未选中时绑定的值\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onMousedown: (e: MouseEvent) => true,\r\n        onMouseup: (e: MouseEvent) => true,\r\n        onClick: (e: MouseEvent) => true,\r\n        onFocus: (e: Event) => true,\r\n        onBlur: (e: Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const state = reactive({\r\n            isActive: false,\r\n        })\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const isChecked = computed(() => model.value === props.trueValue)\r\n\r\n        const classes = computed(() => ([\r\n            `pl-toggle`,\r\n            `plain-click-node`,\r\n            `pl-toggle-status-${styleComputed.value.status}`,\r\n            `pl-toggle-size-${styleComputed.value.size}`,\r\n            {\r\n                'pl-toggle-on': isChecked.value,\r\n                'pl-toggle-active': state.isActive,\r\n                'pl-toggle-disabled': editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                state.isActive = true\r\n                window.addEventListener('mouseup', handler.mouseup)\r\n                emit.onMousedown(e)\r\n            },\r\n            mouseup: (e: MouseEvent) => {\r\n                state.isActive = false\r\n                window.removeEventListener('mouseup', handler.mouseup)\r\n                emit.onMouseup(e)\r\n            },\r\n            click: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                model.value = isChecked.value ? props.falseValue : props.trueValue\r\n                emit.onClick(e)\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n                const key = getKey(e)\r\n                if (key === KEY.space || key === KEY.enter) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    handler.click(e as any)\r\n                }\r\n            },\r\n            focus: emit.onFocus,\r\n            blur: emit.onBlur,\r\n        }\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}\r\n                     tabindex={0}\r\n                     onMousedown={handler.mousedown}\r\n                     onClick={handler.click}\r\n                     onKeydown={handler.keydown}\r\n                     onFocus={handler.focus}\r\n                     onBlur={handler.blur}\r\n                     v-click-wave={'large'}\r\n                >\r\n                    <div class=\"pl-toggle-inner\"/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import Toggle from './toggle'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Toggle)","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useMounted} from \"../../use/useMounted\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive, computed} from 'vue';\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {removeUnit} from \"plain-utils/string/removeUnit\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport './slider.scss'\r\n\r\nexport default designComponent({\r\n    name: 'pl-slider',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: Number, default: 0},                          //非范围选择时，双向绑定值\r\n        start: {type: Number, default: 0},                          //范围选择时，起始绑定值\r\n        end: {type: Number, default: 0},                            //范围选择时，末尾绑定值\r\n        total: {type: Number, default: 100},                        //总数，value,start以及end不应该超过total\r\n        alignEnd: {type: Boolean},                                  //是否末尾对其\r\n        full: {type: Boolean},                                      //是否占满父元素大小\r\n        length: {type: [Number, String], default: '156px'},         //滑动条长度\r\n        size: {type: [Number, String], default: '6px'},             //滑动条宽度\r\n        vertical: {type: Boolean},                                  //是否纵向\r\n        step: {type: Number, default: 1},                           //滑条分块的个数，默认是不分块\r\n        min: {type: Number},                                        //最小值\r\n        max: {type: Number},                                        //最大值\r\n\r\n        showSteps: {type: Boolean, default: true},                  //是否显示步骤点\r\n        tooltip: {type: Boolean, default: true},                    //是否tooltip显示值\r\n        tooltipFormatter: Function,                                 //tooltip显示格式化函数\r\n        range: {type: Boolean},                                     //是否为范围选择\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number) => true,\r\n        onUpdateStart: (val: number) => true,\r\n        onUpdateEnd: (val: number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const start = useModel(() => props.start, emit.onUpdateStart)\r\n        const end = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const isMounted = useMounted()\r\n\r\n        const state = reactive({\r\n            dragStart: null as null | boolean,\r\n            touching: false,\r\n            tempStart: null as null | number,\r\n            tempEnd: null as null | number,\r\n            startX: null as null | number,\r\n            startY: null as null | number,\r\n            totalLength: null as null | number,\r\n            position: {\r\n                'vertical-start': 'bottom',\r\n                'vertical-end': 'top',\r\n                'horizontal-start': 'right',\r\n                'horizontal-end': 'left',\r\n            },\r\n        })\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            transferValueToLength(value: number) {\r\n                return totalLength.value * value / props.total\r\n            },\r\n            transferLengthToValue(length: number) {\r\n                return props.total * length / totalLength.value\r\n            },\r\n            setValue(val: number) {\r\n                model.value = val\r\n            },\r\n            setStart(val: number) {\r\n                start.value = val\r\n            },\r\n            setEnd(val: number) {\r\n                end.value = val\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const styles = computed(() => ({\r\n            [props.vertical ? 'height' : 'width']: !!props.full ? '100%' : unit(props.length),\r\n            [props.vertical ? 'width' : 'height']: unit(props.size),\r\n        }))\r\n\r\n        const classes = computed(() => ([\r\n            'pl-slider',\r\n            {\r\n                'pl-slider-full': !!props.full,\r\n                'pl-slider-touching': state.touching,\r\n                'pl-slider-range': props.range,\r\n                'pl-slider-place-end': start.value === end.value && start.value === props.total\r\n            },\r\n            `pl-slider-${!!props.vertical ? 'vertical' : 'horizontal'}`,\r\n            `pl-slider-align-${!!props.alignEnd ? 'end' : 'start'}`,\r\n            `pl-slider-status-${!!editComputed.value.disabled ? 'info' : (styleComputed.value.status)}`,\r\n        ]))\r\n\r\n        const totalLength = computed(() => {\r\n            if (!isMounted.value) return 0\r\n            if (state.totalLength == null) state.totalLength = refs.el![!!props.vertical ? 'offsetHeight' : 'offsetWidth']\r\n            return state.totalLength\r\n        })\r\n\r\n        const startPosition = computed(() => {\r\n            return !!props.range ? utils.transferValueToLength(start.value) : props.alignEnd ? (totalLength.value - utils.transferValueToLength(model.value)) : 0\r\n        })\r\n\r\n        const endPosition = computed(() => {\r\n            return !!props.range ? totalLength.value - utils.transferValueToLength(end.value) : props.alignEnd ? 0 : (totalLength.value - utils.transferValueToLength(model.value))\r\n        })\r\n\r\n        const progressStyles = computed(() => {\r\n            const ret = {} as any\r\n            ret[props.vertical ? 'top' : 'left'] = `${startPosition.value}px`\r\n            ret[props.vertical ? 'bottom' : 'right'] = `${endPosition.value}px`\r\n            return ret\r\n        })\r\n\r\n        const startTooltip = computed(() => {\r\n            let ret = !!props.range ? start.value : model.value\r\n            return !!props.tooltipFormatter ? props.tooltipFormatter(ret) : ret\r\n        })\r\n\r\n        const endTooltip = computed(() => {\r\n            let ret = !!props.range ? end.value : model.value\r\n            return !!props.tooltipFormatter ? props.tooltipFormatter(ret) : ret\r\n        })\r\n\r\n        const steps = computed(() => {\r\n            const ret: number[] = []\r\n            let i = 0\r\n            while (i < props.step - 1) {\r\n                ret.push(i)\r\n                i++\r\n            }\r\n            return ret\r\n        })\r\n\r\n        const stepItemStyles = computed(() => {\r\n            return {\r\n                ['height']: unit(removeUnit(props.size) as any / 2),\r\n                ['width']: unit(removeUnit(props.size) as any / 2),\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            dragstart: (e: MouseEvent, dragStart: boolean) => {\r\n                if ((!!props.alignEnd !== dragStart && !props.range) || !editComputed.value.editable) return\r\n                document.addEventListener('mousemove', handler.mousemove)\r\n                document.addEventListener('mouseup', handler.mouseup)\r\n                state.dragStart = dragStart\r\n                state.touching = true\r\n                state.startX = e.clientX\r\n                state.startY = e.clientY\r\n                state.tempStart = startPosition.value\r\n                state.tempEnd = endPosition.value\r\n                disabledUserSelect()\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                if (!state.touching) return\r\n                const durX = e.clientX - state.startX!\r\n                const durY = e.clientY - state.startY!\r\n                let temp = !!state.dragStart ? state.tempStart : state.tempEnd\r\n                let dur = (!!props.vertical ? durY : durX) * (!!state.dragStart ? 1 : -1)\r\n                let ret = Math.min(Math.max(temp! + dur, 0), totalLength.value)\r\n\r\n                if (props.step > 1) {\r\n                    const stepLength = totalLength.value / props.step\r\n                    const divisor = Number((ret / stepLength).toFixed(0)) + 1\r\n                    if (ret > stepLength * divisor) ret = stepLength * divisor\r\n                    else ret = stepLength * (divisor - 1)\r\n                }\r\n\r\n                if (!!state.dragStart) {\r\n                    start.value = utils.transferLengthToValue(ret)\r\n                } else {\r\n                    end.value = utils.transferLengthToValue(ret)\r\n                }\r\n\r\n                if (!props.range) {\r\n                    ret = Number(utils.transferLengthToValue(totalLength.value - ret).toFixed(2))\r\n                    props.max != null && ret > props.max && (ret = props.max)\r\n                    props.min != null && ret < props.min && (ret = props.min)\r\n                    utils.setValue(ret)\r\n                } else {\r\n                    ret = Number(utils.transferLengthToValue(state.dragStart ? ret : totalLength.value - ret).toFixed(2))\r\n                    props.max != null && ret > props.max && (ret = props.max)\r\n                    props.min != null && ret < props.min && (ret = props.min)\r\n                    if (!!state.dragStart) {\r\n                        if (ret > end.value) ret = end.value\r\n                    } else {\r\n                        if (ret < start.value) ret = start.value\r\n                    }\r\n                    state.dragStart ? utils.setStart(ret) : utils.setEnd(ret)\r\n                }\r\n            },\r\n            mouseup: (e: MouseEvent) => {\r\n                if (!state.touching) return\r\n                state.touching = false\r\n                document.removeEventListener('mousemove', handler.mousemove)\r\n                document.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value} ref={'el'}>\r\n                    {\r\n                        props.showSteps && props.step > 1 && (\r\n                            <div class=\"pl-slider-step\">\r\n                                {\r\n                                    steps.value.map((item) => (\r\n                                        <span class=\"pl-slider-step-item-wrapper\" key={item}>\r\n                                        <div class=\"pl-slider-step-item\" style={stepItemStyles.value as any}/>\r\n                                    </span>\r\n                                    ))\r\n                                }\r\n                            </div>\r\n                        )\r\n                    }\r\n                    <div class=\"pl-slider-progress\" style={progressStyles.value}>\r\n                <span class=\"pl-slider-dot-wrapper pl-slider-dot-wrapper-start\" onMousedown={(e: MouseEvent) => handler.dragstart(e, true)}><span class=\"pl-slider-dot\"><span class=\"pl-slider-dot-inner\">\r\n                    {!!props.tooltip && <span class=\"pl-slider-dot-tooltip\">{startTooltip.value}</span>}\r\n                </span></span></span>\r\n                        <span class=\"pl-slider-dot-wrapper pl-slider-dot-wrapper-end\" onMousedown={e => handler.dragstart(e, false)}><span class=\"pl-slider-dot\"><span class=\"pl-slider-dot-inner\">\r\n                    {!!props.tooltip && <span class=\"pl-slider-dot-tooltip\">{endTooltip.value}</span>}\r\n                </span></span></span>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import Slider from './slider'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Slider)","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {computed} from 'vue';\r\nimport './tag.scss'\r\n\r\nexport default designComponent({\r\n    name: 'pl-tag',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n        mode: {type: String, default: 'stroke'},\r\n        label: {type: String},\r\n        close: {type: Boolean},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n        onClose: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {slots} = useSlots()\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n        const classes = computed(() => ([\r\n            `pl-tag`,\r\n            `pl-tag-mode-${props.mode}`,\r\n            `pl-tag-status-${styleComputed.value.status}`,\r\n            `pl-tag-shape-${styleComputed.value.shape}`,\r\n            `pl-tag-size-${styleComputed.value.size}`,\r\n            {\r\n                'pl-tag-disabled': !!editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n        const handler = {\r\n            click: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                emit.onClick(e)\r\n            },\r\n            clickClose: (e: MouseEvent) => {\r\n                e.stopPropagation()\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                emit.onClose(e)\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} onClick={handler.click}>\r\n                    {slots.default(props.label)}\r\n                    {!!props.close && <pl-icon icon=\"el-icon-close\" class=\"pl-tag-close\" onClick={handler.clickClose}/>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import Tag from './tag'\r\nimport Icon from '../icon'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Tag, {plugins: [Icon]})","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport Input from '../input'\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {computed, nextTick, onBeforeUnmount, reactive} from 'vue';\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {getKey, KEY} from \"../keyboard\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport './tag-input.scss'\r\n\r\nexport default designComponent({\r\n    name: 'pl-tag-input',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: Array},                                              // 数组，双向绑定值\r\n        close: {type: Boolean, default: true},                                  // 是否可删除\r\n        beforeAdd: Function,                                                    // 添加前校验\r\n        beforeRemove: Function,                                                 // 删除前校验\r\n        formatValue: Function,                                                  // 格式化输入值，返回一个值，或者对象\r\n        noInput: Function,                                                      // 是否显示输入框\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any[] | undefined) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {item: String, index: Number}\r\n        })\r\n\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n        })\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n\r\n        const state = reactive({\r\n            isEditing: false,\r\n            inputValue: null as string | null,\r\n        })\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle()\r\n\r\n        const classes = computed(() => ([\r\n            'pl-tag-input',\r\n            `pl-tag-input-status-${styleComputed.value.status}`,\r\n            {\r\n                'pl-tag-input-disabled': editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n\r\n        onBeforeUnmount(() => {\r\n            window.removeEventListener('click', handler.clickWindow, true)\r\n        })\r\n\r\n        const handler = {\r\n            clickWindow: (e: MouseEvent) => {\r\n                if (!refs.input!.refs.input.contains(e.target as Node)) {\r\n                    state.isEditing = false\r\n                    window.removeEventListener('click', handler.clickWindow, true)\r\n                }\r\n            },\r\n            clickEditButton: async () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                state.isEditing = true\r\n                await nextTick()\r\n                refs.input!.methods.focus()\r\n\r\n                // 点击其他元素的时候关闭输入状态\r\n                await delay(0)\r\n                window.addEventListener('click', handler.clickWindow, true)\r\n            },\r\n            inputEnter: async () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n\r\n                let inputValue = state.inputValue\r\n\r\n                if (inputValue != '0' && !inputValue) {\r\n                    return\r\n                }\r\n\r\n                if (!!props.beforeAdd) {\r\n                    await props.beforeAdd(inputValue)\r\n                }\r\n                if (!!props.formatValue) {\r\n                    inputValue = await props.formatValue(inputValue)\r\n                }\r\n\r\n                let value = [...(model.value || [])]\r\n                value.push(inputValue)\r\n                model.value = value\r\n                state.inputValue = null\r\n            },\r\n            tagClose: async (item: any, index: number) => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                if (!!props.beforeRemove) {\r\n                    await props.beforeRemove(item, index)\r\n                }\r\n                model.value!.splice(index, 1)\r\n                model.value = [...model.value!]\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n                if (getKey(e) === KEY.enter) {\r\n                    handler.inputEnter()\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}>\r\n                    {\r\n                        (model.value || []).map((item: any, index) => (\r\n                            scopedSlots.default({item, index}, (\r\n                                <pl-tag key={index} label={item} close={editComputed.value.editable && props.close} onClose={() => handler.tagClose(item, index)}/>\r\n                            ))\r\n                        ))\r\n                    }\r\n                    {!props.noInput && (\r\n                        <pl-input v-model={state.inputValue}\r\n                                  ref=\"input\"\r\n                                  key={state.isEditing ? 1 : 2}\r\n                                  onKeydown={handler.keydown}\r\n                                  v-slots={!state.isEditing ? {\r\n                                      default: () => (\r\n                                          <div class=\"pl-tag-input-not-edit\"\r\n                                               onClick={handler.clickEditButton}>\r\n                                              <pl-icon icon=\"el-icon-plus\"/>\r\n                                              <span>添加</span>\r\n                                          </div>\r\n                                      )\r\n                                  } : null}\r\n                        />\r\n                    )}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import TagInput from './tag-input'\r\nimport Tag from '../tag'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(TagInput, {\r\n    plugins: [\r\n        Tag\r\n    ]\r\n})","import './rate.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive, computed} from 'vue';\r\nimport {DEFAULT_STATUS} from \"../../utils/constant\";\r\nimport {useMounted} from \"../../use/useMounted\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-rate',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: Number, default: 0},                         //vModel双向绑定值\r\n        total: {type: Number, default: 5},                              //总分\r\n        count: {type: Number, default: 5},                              //显示图标的个数\r\n        mode: {type: String, default: 'normal'},                        //模式，normal，all整个图标为单位，half：半个图标为单位\r\n        status: {type: String,},                                        //标准颜色\r\n        activeIcon: {type: String},                                     //激活的时候的图标\r\n        inactiveIcon: {type: String},                                   //未激活的时候的图标\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const state = reactive({\r\n            totalWidth: null as null | number,\r\n            elLeft: null as null | number,\r\n        })\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle({status: DEFAULT_STATUS})\r\n\r\n        const mounted = useMounted()\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const classes = computed(() => ([\r\n            `pl-rate`,\r\n            `pl-rate-status-${styleComputed.value.status}`,\r\n            `pl-rate-size-${styleComputed.value.size}`,\r\n            {\r\n                'pl-rate-disabled': editComputed.value.disabled,\r\n            },\r\n        ]))\r\n\r\n        const data = computed(() => {\r\n            let i = 0\r\n            let ret: number[] = []\r\n            while (i < props.count) {\r\n                ret.push(i)\r\n                i++\r\n            }\r\n            return ret\r\n        })\r\n\r\n        const activeStyles = computed(() => ({\r\n            width: (model.value / props.total) * 100 + '%'\r\n        }))\r\n\r\n        const totalWidth = computed(() => {\r\n            if (!mounted.value) return 0\r\n            if (!state.totalWidth) state.totalWidth = refs.el.offsetWidth\r\n            return state.totalWidth\r\n        })\r\n\r\n        const elLeft = computed(() => {\r\n            if (!state.elLeft) state.elLeft = refs.el.getBoundingClientRect().left\r\n            return state.elLeft\r\n        })\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n\r\n        const methods = {\r\n            reset: (e: MouseEvent) => {\r\n                let dur = e.clientX - (elLeft.value || 0)\r\n                let start = 0\r\n                let end = totalWidth.value\r\n                let step = end / props.count\r\n                switch (props.mode) {\r\n                    case 'all':\r\n                        for (; start < end; start += step) {\r\n                            if (start < dur && dur < start + step) {\r\n                                dur = start + step\r\n                                break\r\n                            }\r\n                        }\r\n                        break\r\n                    case 'half':\r\n                        for (; start < end; start += step) {\r\n                            let half = (start + start + step) / 2\r\n                            if (start < dur && dur < half) {\r\n                                dur = half\r\n                                break\r\n                            }\r\n                            if (half < dur && dur < start + step) {\r\n                                dur = start + step\r\n                                break\r\n                            }\r\n                        }\r\n                        break\r\n                }\r\n\r\n                model.value = Number((Math.max(0, Math.min((dur) / totalWidth.value, 1)) * props.total).toFixed(2))\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                if (!editComputed.value.editable) return\r\n                window.document.addEventListener('mousemove', handler.mousemove)\r\n                window.document.addEventListener('mouseup', handler.mouseup)\r\n                disabledUserSelect()\r\n                methods.reset(e)\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                methods.reset(e)\r\n            },\r\n            mouseup: (e: MouseEvent) => {\r\n                window.document.removeEventListener('mousemove', handler.mousemove)\r\n                window.document.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} onMousedown={handler.mousedown} ref=\"el\">\r\n                    <div class=\"pl-rate-active\" style={activeStyles.value}>\r\n                        {data.value.map(i => <pl-icon icon={props.activeIcon || 'el-icon-star-on'} key={i}/>)}\r\n                    </div>\r\n                    <div class=\"pl-rate-inactive\">\r\n                        {data.value.map(i => <pl-icon icon={props.inactiveIcon || 'el-icon-star-off'} key={i}/>)}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import Rate from './rate'\r\nimport Icon from '../icon'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Rate, {plugins: [Icon]})","import Scroll from '../scroll'\r\nimport {computed, reactive, nextTick, watch, onMounted, onUpdated} from 'vue'\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\n\r\ninterface DataNode {\r\n    top: number\r\n    bottom: number\r\n    height: number\r\n\r\n    data: any\r\n    index: number\r\n}\r\n\r\nexport function useVirtualList(\r\n    {\r\n        props,\r\n        refs,\r\n        emit,\r\n        transform,\r\n    }: {\r\n        props: {\r\n            data: any[],\r\n            size: number,\r\n            disabled?: boolean,\r\n            dynamicSize?: boolean,\r\n        },\r\n        refs: {\r\n            scroll: typeof Scroll.use.class | null,\r\n            content: HTMLDivElement,\r\n        },\r\n        emit: {\r\n            onScroll: (e: Event) => void\r\n        },\r\n        transform?: boolean,\r\n    }\r\n) {\r\n\r\n    /*非响应式属性*/\r\n    const freezeState = {\r\n        scrollTop: 0,                               // 实时的scrollTop值\r\n        current: {                                  // 当前的页面信息\r\n            pageIndex: 0,\r\n            start: 0,\r\n            end: 0,\r\n        },\r\n    }\r\n    /*响应式属性*/\r\n    const state = reactive({\r\n        nodes: [] as DataNode[],                    // 格式化的data数组数据\r\n        scrollTop: 0,                               // 当前滚动scrollTop（非实时的）\r\n        pageSize: 0,                                // 页大小\r\n    })\r\n\r\n    /**\r\n     * 计算得到的在虚拟列表当前要渲染的数组数据\r\n     * @author  韦胜健\r\n     * @date    2020/11/15 9:28\r\n     */\r\n    const offsetData = computed((): { list: { item: any, index: number }[], startPageIndex: number, start: number } => {\r\n        const {pageSize, scrollTop} = state\r\n        const data = props.data || []\r\n        if (!pageSize) {\r\n            return {list: [], startPageIndex: 0, start: 0}\r\n        }\r\n        if (props.disabled) {\r\n            return {\r\n                list: data.map((item, index) => ({item, index})),\r\n                start: 0,\r\n                startPageIndex: 0,\r\n            }\r\n        }\r\n        const {start, end, pageIndex} = utils.getPageIndex(scrollTop, pageSize)\r\n        return {\r\n            list: data.map((item, index) => ({item, index})).slice(start, end),\r\n            startPageIndex: pageIndex,\r\n            start,\r\n        }\r\n    })\r\n\r\n    /*---------------------------------------style-------------------------------------------*/\r\n\r\n    /**\r\n     * 跟节点Scroll的class\r\n     * @author  韦胜健\r\n     * @date    2020/12/16 10:48\r\n     */\r\n    const classes = useClass(() => [\r\n        'pl-virtual-list',\r\n        {\r\n            'pl-virtual-list-disabled': props.disabled,\r\n        }\r\n    ])\r\n\r\n    /**\r\n     * 占位节点strut的样式\r\n     * @author  韦胜健\r\n     * @date    2020/12/16 10:48\r\n     */\r\n    const strutStyles = useStyles(style => {\r\n        if (!state.pageSize) {\r\n            return\r\n        }\r\n        if (props.disabled) {\r\n            return;\r\n        }\r\n        if (!props.dynamicSize) {\r\n            style.height = `${(props.data || []).length * props.size}px`\r\n        } else {\r\n            style.height = `${state.nodes[state.nodes.length - 1].bottom}px`\r\n        }\r\n    })\r\n\r\n    /**\r\n     * 内容（位移）节点的样式\r\n     * @author  韦胜健\r\n     * @date    2020/12/16 10:48\r\n     */\r\n    const contentStyles = useStyles(style => {\r\n\r\n        if (!state.pageSize) {\r\n            return\r\n        }\r\n        if (props.disabled) {\r\n            return;\r\n        }\r\n\r\n        const {start} = offsetData.value\r\n\r\n        let top = 0\r\n        if (!props.dynamicSize) {\r\n            top = start * props.size\r\n        } else {\r\n            top = state.nodes[start].top\r\n        }\r\n\r\n        if (transform !== false) {\r\n            /*transform定位*/\r\n            style.transform = `translateY(${top}px)`\r\n        } else {\r\n            /*top定位*/\r\n            style.top = `${top}px`\r\n        }\r\n    })\r\n\r\n    /*---------------------------------------utils-------------------------------------------*/\r\n\r\n    const utils = {\r\n        /**\r\n         * 根据top值，对比DataNodes中节点的top以及bottom得到在data nodes中的位置索引\r\n         * @author  韦胜健\r\n         * @date    2020/11/15 9:29\r\n         */\r\n        getIndex: (top: number) => {\r\n            if (!props.dynamicSize) {\r\n                // console.log('not dynamic》》》getIndex', top / props.size)\r\n                return Math.floor(top / props.size)\r\n            } else {\r\n                const {nodes} = state\r\n                let start = 0;\r\n                let end = nodes.length - 1\r\n                let temp = 0;\r\n                while (start <= end) {\r\n                    let middle = Math.floor((start + end) / 2)\r\n                    let middleBottom = nodes[middle].bottom\r\n                    if (middleBottom === top) {\r\n                        return middle + 1\r\n                    } else if (middleBottom < top) {\r\n                        start = middle + 1\r\n                    } else if (middleBottom > top) {\r\n                        if (!temp || temp > middle) {\r\n                            temp = middle\r\n                        }\r\n                        end = middle - 1\r\n                    }\r\n                }\r\n                // console.log('is dynamic》》》getIndex', temp)\r\n                return temp\r\n            }\r\n        },\r\n        /**\r\n         * 根据scrollTop以及pageSize获取当前的pageIndex\r\n         * @author  韦胜健\r\n         * @date    2020/12/14 22:44\r\n         */\r\n        getPageIndex: (scrollTop: number, pageSize: number) => {\r\n            const data = props.data || []\r\n            /*当前scrollTop对应的数据中数据的索引*/\r\n            let scrollIndex = utils.getIndex(scrollTop)\r\n            let pageIndex = Math.floor(scrollIndex / pageSize)\r\n            let start = pageIndex === 0 ? 0 : (pageIndex - 1) * pageSize\r\n            let end = start + pageSize * 3\r\n            /*console.log({\r\n                scrollIndex,\r\n                pageIndex,\r\n                start,\r\n                end,\r\n            })*/\r\n            const exceed = end - data.length\r\n            if (exceed > 0) {\r\n                end = data.length\r\n                start -= exceed\r\n                if (start < 0) {\r\n                    start = 0\r\n                }\r\n            }\r\n            pageIndex = Math.floor(start / pageSize)\r\n            return {\r\n                data,\r\n                start,\r\n                end,\r\n                pageIndex,\r\n            }\r\n        },\r\n        /**\r\n         * 格式化props.data为 DataNode数组\r\n         * @author  韦胜健\r\n         * @date    2020/11/15 9:29\r\n         */\r\n        resetData: (data: any[]) => {\r\n            // console.log('resetData')\r\n            state.nodes = data.map((item, index) => ({\r\n                data: item,\r\n                index,\r\n                top: props.size * index,\r\n                height: props.size,\r\n                bottom: props.size * (index + 1),\r\n            }))\r\n        }\r\n    }\r\n\r\n    /*---------------------------------------handler-------------------------------------------*/\r\n\r\n    const handler = {\r\n        onScroll: (e: Event) => {\r\n            emit.onScroll(e)\r\n            if (props.disabled) {\r\n                return\r\n            }\r\n            freezeState.scrollTop = (e.target as HTMLDivElement).scrollTop\r\n            const current = utils.getPageIndex((e.target as HTMLDivElement).scrollTop, state.pageSize)\r\n            if (freezeState.current.pageIndex != current.pageIndex || freezeState.current.start != current.start) {\r\n                state.scrollTop = (e.target as HTMLDivElement).scrollTop\r\n                freezeState.current = current\r\n            }\r\n        }\r\n    }\r\n\r\n    watch(() => props.data, (data: any[]) => {\r\n        if (props.disabled) {\r\n            return\r\n        }\r\n        if (!props.dynamicSize) {\r\n            return;\r\n        }\r\n        !!refs.scroll && refs.scroll.methods.scrollTop(0, 0);\r\n        /*如果是动态高度，则刷state.nodes*/\r\n        utils.resetData(data)\r\n    })\r\n\r\n    onMounted(() => {\r\n        const hostHeight = refs.scroll!.refs.host.offsetHeight\r\n        state.pageSize = Math.ceil(hostHeight / props.size)\r\n        if (props.dynamicSize && !props.disabled) {\r\n            utils.resetData(props.data)\r\n        }\r\n    })\r\n\r\n    onUpdated(async () => {\r\n        if (props.disabled) {\r\n            return\r\n        }\r\n        if (!props.dynamicSize) {\r\n            return;\r\n        }\r\n        await nextTick()\r\n        // console.log('dynamic scan height')\r\n        const elNodes = (Array.from(refs.content.childNodes || []) as HTMLElement[]).filter(node => node.nodeType !== 3)\r\n        for (let i = 0; i < elNodes.length; i++) {\r\n            const el = elNodes[i];\r\n            const {offsetHeight: height} = el\r\n            let vid = el.getAttribute('vid') as null | number | string\r\n            if (vid == null) {\r\n                throw new Error('Each item of the virtual-list must have an attribute named \"vid\", please set :vid=\"index\"')\r\n            }\r\n            vid = Number(vid)\r\n            const prevNode = state.nodes[vid]\r\n            const prevHeight = prevNode.height\r\n            let deltaHeight = prevHeight - height\r\n            if (deltaHeight !== 0) {\r\n                prevNode.height = height\r\n                prevNode.bottom = prevNode.bottom - deltaHeight\r\n                for (let j = vid + 1; j < state.nodes!.length; j++) {\r\n                    state.nodes![j].top = state.nodes![j - 1].bottom\r\n                    state.nodes![j].bottom = state.nodes![j].bottom - deltaHeight\r\n                }\r\n            }\r\n        }\r\n    })\r\n\r\n    return {\r\n        virtual: {\r\n            offsetData,\r\n            classes,\r\n            strutStyles,\r\n            contentStyles,\r\n            handler,\r\n        }\r\n    }\r\n}","import './virtual-list.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Scroll from '../scroll'\r\nimport {useVirtualList} from \"./useVirtualList\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-virtual-list',\r\n    props: {\r\n        data: {type: Array, require: true, default: []},            // 要渲染的长数据\r\n        size: {type: Number, require: true, default: 40},           // 每一行高度\r\n        dynamicSize: {type: Boolean},                               // 标识列表中的每一行高度不是固定的，但是还是需要提供 size 属性，而且size属性不能与每一行的高度差距太多；\r\n        disabled: {type: Boolean},                                  // 禁用虚拟滚动\r\n    },\r\n    emits: {\r\n        onScroll: (e: Event) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {item: Object, index: Number, virtualIndex: Number},\r\n            content: {data: Array},\r\n        })\r\n\r\n        const {refs} = useRefs({\r\n            scroll: Scroll,\r\n            content: HTMLDivElement,\r\n        })\r\n\r\n        const {virtual} = useVirtualList({\r\n            refs,\r\n            props,\r\n            emit,\r\n        })\r\n\r\n        return {\r\n            refer: {\r\n                refs,\r\n            },\r\n            render: () => {\r\n                const {list} = virtual.offsetData.value\r\n                return (\r\n                    <Scroll onScroll={virtual.handler.onScroll} ref=\"scroll\" class={virtual.classes.value} disableListTransition>\r\n                        <div class=\"pl-virtual-list-strut\" style={virtual.strutStyles.value}>\r\n                            <div class=\"pl-virtual-list-content\" style={virtual.contentStyles.value} ref=\"content\">\r\n                                {scopedSlots.content({data: list}, list.map((node, virtualIndex) =>\r\n                                    scopedSlots.default({item: node.item, index: node.index, virtualIndex})\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </Scroll>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import Scroll from '../scroll'\r\nimport VirtualList from './virtual-list'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(VirtualList, {\r\n    plugins: [\r\n        Scroll\r\n    ]\r\n})","export const PROGRESS_DEFAULT_PROPS = {\r\n    modelValue: {type: Number, default: 100},                           // 进度百分比，双向绑定值\r\n    outerColor: {type: String, default: '#f2f2f2'},                     // 外层未激活颜色\r\n    innerColor: {type: String, default: '#12b4a5'},                     // 内层已经激活颜色\r\n    speed: {type: Number, default: 3},                                  // 动画速度\r\n    status: {type: String, default: 'normal'},                          // 状态\r\n    successColor: {type: String, default: '#42E67F'},                   // 成功状态颜色\r\n    errorColor: {type: String, default: '#FF6235'},                     // 失败状态颜色\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {PROGRESS_DEFAULT_PROPS} from \"./progress.utils\";\r\nimport {computed} from 'vue';\r\n\r\nexport const ProgressBar = designComponent({\r\n    name: 'pl-progress-bar',\r\n    props: {\r\n        ...PROGRESS_DEFAULT_PROPS,\r\n\r\n        width: {type: String, default: '300px'},\r\n        height: {type: String, default: '6px'},\r\n        inlineText: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n        const iconColor = computed(() => {\r\n            switch (props.status) {\r\n                case 'success':\r\n                    return props.successColor\r\n                case 'error':\r\n                    return props.errorColor\r\n                default:\r\n                    return null\r\n            }\r\n        })\r\n\r\n        const outerStyles = computed(() => ({\r\n            height: !!props.inlineText ? '16px' : props.height,\r\n            width: props.width,\r\n            backgroundColor: props.outerColor,\r\n            borderRadius: props.width,\r\n        }))\r\n\r\n        const innerStyles = computed(() => ({\r\n            width: `${props.modelValue}%`,\r\n            backgroundColor: iconColor.value || props.innerColor,\r\n            borderRadius: props.width,\r\n        }))\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-progress-bar\">\r\n                    <div class=\"pl-progress-bar-outer\" style={outerStyles.value}>\r\n                        <div class=\"pl-progress-bar-inner\" style={innerStyles.value}>\r\n                            {props.inlineText && props.modelValue > 20 && (\r\n                                <div>\r\n                                    <div class=\"pl-progress-bar-content\">\r\n                                        {props.status === 'success' && <pl-icon icon=\"el-icon-check-bold\" class=\"pl-progress-bar-icon-success\" style={{color: 'white'}}/>}\r\n                                        {props.status === 'error' && <pl-icon icon=\"el-icon-close-bold\" class=\"pl-progress-bar-icon-error\" style={{color: 'white'}}/>}\r\n                                        {props.status !== 'success' && props.status !== 'error' && <span>{props.modelValue}%</span>}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        {props.inlineText && props.modelValue < 20 && (\r\n                            <div>\r\n                                <div class=\"pl-progress-bar-content\">\r\n                                    {props.status === 'success' && <pl-icon icon=\"el-icon-check-bold\" class=\"pl-progress-bar-icon-success\" style={{color: props.successColor}}/>}\r\n                                    {props.status === 'error' && <pl-icon icon=\"el-icon-close-bold\" class=\"pl-progress-bar-icon-error\" style={{color: props.errorColor}}/>}\r\n                                    {props.status !== 'success' && props.status !== 'error' && <span>{props.modelValue}%</span>}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    {\r\n                        !props.inlineText && (\r\n                            <div class=\"pl-progress-bar-content\">\r\n                                {props.status === 'success' && <pl-icon icon=\"el-icon-success\" class=\"pl-progress-bar-icon-success\" style={{color: props.successColor}}/>}\r\n                                {props.status === 'error' && <pl-icon icon=\"el-icon-error\" class=\"pl-progress-bar-icon-error\" style={{color: props.errorColor}}/>}\r\n                                {props.status !== 'success' && props.status !== 'error' && <span>{props.modelValue}%</span>}\r\n                            </div>\r\n                        )\r\n                    }\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","export function createAnimate(\r\n    {\r\n        initValue,\r\n        time,\r\n        action,\r\n    }: {\r\n        initValue: () => number,\r\n        time: number,\r\n        action: (val: number) => void,\r\n    }) {\r\n\r\n    let cancel = null as null | number\r\n\r\n    return {\r\n        start: (percent: number, done?: () => void) => {\r\n            if (cancel != null) {\r\n                cancelAnimationFrame(cancel)\r\n            }\r\n            let startTime = Date.now()\r\n\r\n            let n = initValue()\r\n            let k = (percent - n) / time\r\n\r\n            const run = () => {\r\n                let nowTime = Date.now()\r\n                let deltaTime = nowTime - startTime\r\n\r\n                if (deltaTime > time) {\r\n                    cancel = null\r\n                    action(percent)\r\n                    !!done && done()\r\n                    return\r\n                }\r\n                action(Number((deltaTime * k + n).toFixed(2)))\r\n                cancel = requestAnimationFrame(run)\r\n            }\r\n            run()\r\n        },\r\n        stop: () => {\r\n            if (cancel != null) {\r\n                cancelAnimationFrame(cancel)\r\n            }\r\n        }\r\n    }\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {PROGRESS_DEFAULT_PROPS} from \"./progress.utils\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {computed, reactive, watch} from 'vue';\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport loading from \"../loading/loading\";\r\nimport {createAnimate} from \"../../utils/createAnimate\";\r\n\r\n/*\r\n\r\nSVG path 指令\r\n\r\nM x,y 在这里x和y是绝对坐标，分别代表水平坐标和垂直坐标\r\nm dx,dy 在这里dx和dy是相对于当前点的距离，分别是向右和向下的距离。\r\nA 绘制圆弧\r\n\r\nSVG提供了一个范围广泛stroke 属性\r\n\r\n- stroke: 定义一条线，文本或元素轮廓颜色\r\n- stroke-width: 定义了一条线，文本或元素轮廓厚度\r\n- stroke-linecap: 不同类型的开放路径的终结(开头和结尾是方形还是带圆角的)\r\n- stroke-dasharray: 虚线\r\n- stroke-dashoffset: dash模式到路径开始的距离,使用了一个 <百分比> 值， 那么这个值就代表了当前viewport的一个百分比，值可以取为负值\r\n\r\nSVG Path标签 A 参数\r\n\r\nA rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n\r\n- rx：x轴半径\r\n- ry：y轴半径\r\n- x-axis-rotation：指椭圆的X轴与水平方向顺时针方向夹角，可以想像成一个水平的椭圆绕中心点顺时针旋转的角度（一般都是0，不知道有什么用，如果希望旋转一定的夹角的话，可以用transform rotate实现）\r\n- large-arc-flag：1表示大角度弧线，0为小角度弧线（如果数值大于50%，则这个应该是1，否则是0）。\r\n- sweep-flag：1为顺时针方向，0为逆时针方向。\r\n- x：结束点x坐标\r\n- y：结束点y坐标\r\n\r\n*/\r\n\r\nexport const ProgressCircle = designComponent({\r\n    name: 'pl-progress-circle',\r\n    props: {\r\n        ...PROGRESS_DEFAULT_PROPS,\r\n\r\n        size: {type: Number, default: 100},                                                     // 大小尺寸\r\n        lineSize: {type: Number, default: 6},                                                   // 线条尺寸\r\n        startAngle: {type: Number, default: 0},                                                 // 起始角度\r\n\r\n        antiClockwise: {type: Boolean},                                                         // 逆时针\r\n        loading: {type: Boolean},                                                               // 加载动画\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: number) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {slots} = useSlots()\r\n\r\n        const model = useModel(() => 0, event.emit.onUpdateModelValue, {autoWatch: false})\r\n\r\n        const animate = createAnimate({\r\n            time: props.loading ? 1500 : 900,\r\n            initValue: () => model.value != null ? model.value : (props.loading ? loading.min : 0),\r\n            action: val => model.value = val,\r\n        })\r\n\r\n        const loading = (() => {\r\n            return reactive({\r\n                isLoading: false,\r\n                max: 75,\r\n                min: 15,\r\n                start: () => {\r\n                    const run = () => {\r\n                        if (model.value == null) {\r\n                            model.value = loading.min\r\n                        }\r\n                        animate.start(model.value <= loading.min ? loading.max : loading.min, run)\r\n                    }\r\n                    animate.start(loading.max, run)\r\n                    loading.isLoading = true\r\n                },\r\n                end: () => {\r\n                    animate.stop()\r\n                    loading.isLoading = false\r\n                },\r\n            })\r\n        })();\r\n\r\n        const styles = useStyles(style => {\r\n            style.width = unit(props.size)\r\n            style.height = unit(props.size)\r\n        })\r\n\r\n        const percent = computed(() => model.value == null ? 0 : model.value / 100)\r\n\r\n        const radius = computed(() => 50 - props.lineSize / 2)\r\n\r\n        const pathD = computed(() => {\r\n            let d = [`M 50 ${props.lineSize / 2}`] as (string | number)[]\r\n            const r = radius.value\r\n            const p = percent.value /*小于1的百分比数字*/\r\n\r\n            const degrees = Math.PI * 2 * p\r\n\r\n            d.push(`A ${r} ${r} 0`)\r\n            d.push(p > 0.5 ? 1 : 0)\r\n            d.push(props.antiClockwise ? 0 : 1)\r\n            d.push(`${50 + r * Math.sin(degrees) * (props.antiClockwise ? -1 : 1)} ${50 - r * Math.cos(degrees)}`)\r\n\r\n            return d.join(' ')\r\n        })\r\n\r\n\r\n        const pathStroke = computed(() => {\r\n            switch (props.status) {\r\n                case 'success':\r\n                    return props.successColor\r\n                case 'error':\r\n                    return props.errorColor\r\n                default:\r\n                    return props.innerColor\r\n            }\r\n        })\r\n\r\n        const circleStroke = computed(() => {\r\n            if (percent.value === 1) {\r\n                return pathStroke.value\r\n            }\r\n            return props.outerColor\r\n        })\r\n\r\n        const pathStyles = useStyles(style => {\r\n            style.transform = `rotate(${props.startAngle}deg)`\r\n        })\r\n\r\n        watch(() => props.loading, val => val ? loading.start() : loading.end(), {immediate: true})\r\n\r\n        watch(() => props.modelValue, val => !props.loading && animate.start(val), {immediate: true})\r\n\r\n        return {\r\n            refer: {\r\n                animate,\r\n            },\r\n            render: () => (\r\n                <div class={`pl-progress-circle ${loading.isLoading ? 'pl-progress-circle-loading' : ''}`} style={styles.value}>\r\n                    <svg viewBox=\"0 0 100 100\">\r\n\r\n                        <circle\r\n                            cx=\"50\"\r\n                            cy=\"50\"\r\n                            r={radius.value}\r\n                            stroke={circleStroke.value}\r\n                            stroke-width={props.lineSize}\r\n                            fill=\"none\"/>\r\n\r\n                        {percent.value !== 1 && <path\r\n                            d={pathD.value}\r\n                            stroke={pathStroke.value}\r\n                            stroke-width={props.lineSize}\r\n                            fill=\"none\"\r\n                            stroke-linecap=\"round\"\r\n                            style={pathStyles.value}\r\n                        />}\r\n\r\n                    </svg>\r\n\r\n                    <div class=\"pl-progress-circle-label\">\r\n                        {props.loading ? slots.default() : <>\r\n                            {props.status === 'normal' && slots.default(`${model.value}%`)}\r\n                            {props.status === 'success' && <pl-icon icon=\"el-icon-check-bold\" class=\"pl-progress-bar-icon-success\" style={{color: props.successColor}}/>}\r\n                            {props.status === 'error' && <pl-icon icon=\"el-icon-close-bold\" class=\"pl-progress-bar-icon-error\" style={{color: props.errorColor}}/>}\r\n                        </>}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {PROGRESS_DEFAULT_PROPS} from \"./progress.utils\";\r\nimport {computed, watch} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {createAnimate} from \"../../utils/createAnimate\";\r\nimport {useModel} from \"../../use/useModel\";\r\n\r\nexport const ProgressMini = designComponent({\r\n    name: 'pl-progress-mini',\r\n    props: {\r\n        size: {default: 28},\r\n        ...PROGRESS_DEFAULT_PROPS,\r\n        innerColor: {type: String, default: 'rgba(0,0,0,0.25)'},\r\n        round: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n\r\n        const model = useModel(() => 0, () => undefined, {autoWatch: false})\r\n\r\n        const animate = createAnimate({\r\n            time: 300,\r\n            initValue: () => model.value || 0,\r\n            action: val => model.value = val,\r\n        })\r\n\r\n        const styles = useStyles(style => {\r\n            style.height = unit(props.size)\r\n            style.width = unit(props.size)\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-progress-mini',\r\n            {\r\n                [`pl-progress-mini-status-${props.status}`]: !!props.status,\r\n                [`pl-progress-mini-round`]: props.round,\r\n            },\r\n        ])\r\n\r\n        const percent = computed(() => 1 - (model.value == null ? 0 : model.value / 100))\r\n\r\n        const radius = computed(() => 50 - 2 / 2)\r\n\r\n        const pathD = computed(() => {\r\n            let d = [`M 50 1`] as (string | number)[]\r\n            const r = radius.value\r\n            const p = percent.value /*小于1的百分比数字*/\r\n\r\n            const degrees = Math.PI * 2 * p\r\n\r\n            d.push(`A ${r} ${r} 0`)\r\n            d.push(p > 0.5 ? 1 : 0)\r\n            d.push(0)\r\n            d.push(`${50 - r * Math.sin(degrees)} ${50 - r * Math.cos(degrees)}`)\r\n\r\n            d.push(`L 50 50 L 50 1`)\r\n\r\n            return d.join(' ')\r\n        })\r\n\r\n\r\n        const pathStroke = computed(() => {\r\n            switch (props.status) {\r\n                case 'success':\r\n                    return props.successColor\r\n                case 'error':\r\n                    return props.errorColor\r\n                default:\r\n                    return props.innerColor\r\n            }\r\n        })\r\n\r\n        watch(() => props.modelValue, val => animate.start(val), {immediate: true})\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    <svg viewBox=\"0 0 100 100\">\r\n                        {model.value == 0 ? (\r\n                            <circle cx=\"50\" cy=\"50\" r={radius.value} fill={pathStroke.value}/>\r\n                        ) : (\r\n                            <path\r\n                                d={pathD.value}\r\n                                stroke=\"none\"\r\n                                fill={pathStroke.value}\r\n                            />\r\n                        )}\r\n                    </svg>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {ProgressBar} from './progress-bar'\r\nimport {ProgressCircle} from './progress-circle'\r\nimport {ProgressMini} from './progress-mini'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport './progress.scss'\r\n\r\nexport default createComponentPlugin(ProgressBar, {\r\n    exposeComponents: {\r\n        ProgressCircle,\r\n        ProgressMini,\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {computed, nextTick, ref, watch} from 'vue';\r\nimport './pagination.scss'\r\nimport {useNumber} from \"../../use/useNumber\";\r\n\r\nconst SizesWidth = {\r\n    large: 120,\r\n    normal: 105,\r\n    mini: 90,\r\n}\r\n\r\nexport default designComponent({\r\n    name: 'pl-pagination',\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n\r\n        pageSize: {type: [Number, String], required: true},                                     // 页大小\r\n        total: {type: [Number, String]},                                                        // 总共条目数\r\n        totalPage: {type: [Number, String]},                                                    // 总页数，与 total/pageSize 作用类似，用来确定总页数；\r\n        pagerCount: {type: [Number, String], default: 7},                                       // 页码按钮数量，当总页数超过时会折叠\r\n        currentPage: {type: [Number, String]},                                                  // 当前页\r\n\r\n        layout: {type: String, default: 'sizes,jumper,prev,pager,next,loading,blank,total,slot'},// 组件布局\r\n        pageSizes: {type: Array, default: [10, 20, 50, 100]},                                   // 页大小下拉选项数组\r\n        prevText: {type: String},                                                               // 上一页按钮替换文本\r\n        nextText: {type: String},                                                               // 下一页按钮替换文本\r\n\r\n        jumperNumberWidth: {type: Number},                                                      // 跳转页的数字输入框宽度\r\n    },\r\n    emits: {\r\n        onJump: (val: number) => true,\r\n        onPrev: () => true,\r\n        onNext: () => true,\r\n        onCurrentChange: (val: number) => true,\r\n        onSizeChange: (val: number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {editComputed} = useEdit()\r\n        const {styleComputed} = useStyle()\r\n        const {slots} = useSlots([], true)\r\n\r\n        const jumperValue = ref(null as number | null)\r\n        watch(() => props.currentPage, (val) => jumperValue.value = val == null ? 1 : Number(val), {immediate: true})\r\n\r\n        const classes = computed(() => [\r\n            'pl-pagination',\r\n            `pl-pagination-size-${styleComputed.value.size}`,\r\n            `pl-pagination-shape-${styleComputed.value.shape}`,\r\n            {\r\n                'pl-pagination-disabled': editComputed.value.disabled,\r\n            },\r\n        ])\r\n\r\n        const {numberState} = useNumber(props, [\r\n            'pageSize',\r\n            'total',\r\n            'totalPage',\r\n            'pagerCount',\r\n            'currentPage',\r\n        ])\r\n\r\n        const jumperNumberWidth = computed(() => {\r\n            if (!!props.jumperNumberWidth) {\r\n                return props.jumperNumberWidth\r\n            } else {\r\n                return {\r\n                    large: 78,\r\n                    normal: 64,\r\n                    mini: 56,\r\n                }[styleComputed.value.size]\r\n            }\r\n        })\r\n\r\n        const totalPageData = computed(() => {\r\n            if (numberState.totalPage != null) {\r\n                return numberState.totalPage\r\n            } else if (numberState.pageSize != null && numberState.total != null) {\r\n                return Math.ceil(numberState.total / numberState.pageSize)\r\n            } else {\r\n                return 0\r\n            }\r\n        })\r\n\r\n        const pageInfo = computed(() => {\r\n            let currentPage = numberState.currentPage\r\n            let pagerCount = numberState.pagerCount\r\n            let totalPage = Number(totalPageData.value)\r\n            const midPagerCount = (pagerCount - 1) / 2                      // 从0开始计算中间索引\r\n\r\n            let showPrevMore = false\r\n            let showNextMore = false\r\n\r\n            if (totalPage > pagerCount) {\r\n                if (currentPage! > pagerCount - midPagerCount) {\r\n                    showPrevMore = true\r\n                }\r\n                if (currentPage! < totalPage - midPagerCount) {\r\n                    showNextMore = true\r\n                }\r\n            }\r\n\r\n            return {\r\n                currentPage,                // 当前页\r\n                pagerCount,                 // 页码按钮数量，包括左折叠左边的一个按钮以及右折叠右边的一个按钮\r\n                totalPage,                  // 总页数\r\n                midPagerCount,              // 中间页码按钮位置索引\r\n                showPrevMore,               // 是否显示左折叠\r\n                showNextMore,               // 是否显示右折叠\r\n            }\r\n        })\r\n\r\n        const pagers = computed(() => {\r\n            const {\r\n                currentPage,\r\n                pagerCount,\r\n                totalPage,\r\n                showPrevMore,\r\n                showNextMore\r\n            } = pageInfo.value\r\n\r\n            const array: number[] = []\r\n\r\n            if (showPrevMore && !showNextMore) {\r\n                const startPage = totalPage - (pagerCount - 2);\r\n                for (let i = startPage; i < totalPage; i++) {\r\n                    array.push(i);\r\n                }\r\n            } else if (!showPrevMore && showNextMore) {\r\n                for (let i = 2; i < pagerCount; i++) {\r\n                    array.push(i);\r\n                }\r\n            } else if (showPrevMore && showNextMore) {\r\n                const offset = Math.floor(pagerCount / 2) - 1;\r\n                for (let i = currentPage! - offset; i <= currentPage! + offset; i++) {\r\n                    array.push(i);\r\n                }\r\n            } else {\r\n                for (let i = 2; i < totalPage; i++) {\r\n                    array.push(i);\r\n                }\r\n            }\r\n\r\n            return array\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 获取页码按钮的 class\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 12:07\r\n             */\r\n            getPagerButtonClass(page: string | number) {\r\n                return [\r\n                    'pl-pagination-pager-button',\r\n                    {\r\n                        'pl-pagination-pager-button-active': page === pageInfo.value.currentPage\r\n                    },\r\n                ]\r\n            },\r\n            /**\r\n             * 跳转到指定页\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 14:02\r\n             */\r\n            changeCurrent(val: number) {\r\n                if (!editComputed.value.editable) return;\r\n                emit.onCurrentChange(val)\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            /**\r\n             * 跳转到上一页\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 14:08\r\n             */\r\n            onPrev() {\r\n                if (!editComputed.value.editable) return;\r\n                if (pageInfo.value.currentPage === 1) {\r\n                    return\r\n                }\r\n                utils.changeCurrent(pageInfo.value.currentPage! - 1)\r\n                emit.onPrev()\r\n            },\r\n            /**\r\n             * 跳转到下一页\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 14:09\r\n             */\r\n            onNext() {\r\n                if (!editComputed.value.editable) return;\r\n                if (pageInfo.value.totalPage != null && pageInfo.value.currentPage == pageInfo.value.totalPage) {\r\n                    return\r\n                }\r\n                utils.changeCurrent(pageInfo.value.currentPage! + 1)\r\n                emit.onNext()\r\n            },\r\n            /**\r\n             * 跳转到指定页\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 14:29\r\n             */\r\n            async onJump() {\r\n                if (!editComputed.value.editable) return;\r\n                await nextTick()\r\n                let val = jumperValue.value\r\n                if (!val && val !== 0) {\r\n                    val = 1\r\n                    await nextTick()\r\n                    jumperValue.value = val\r\n                }\r\n                if (val > pageInfo.value.totalPage) {\r\n                    val = pageInfo.value.totalPage\r\n                    await nextTick()\r\n                    jumperValue.value = val\r\n                }\r\n                emit.onJump(val)\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                const sizes = (\r\n                    <pl-select\r\n                        class=\"pl-pagination-sizes\"\r\n                        modelValue={numberState.pageSize}\r\n\r\n                        loading={false}\r\n                        readonly={editComputed.value.readonly || editComputed.value.loading}\r\n                        filterable={false}\r\n                        inputProps={{width: SizesWidth[styleComputed.value.size], clearIcon: false}}\r\n                        onChange={emit.onSizeChange}>\r\n                        {(props.pageSizes || []).map(item => (\r\n                            <pl-select-option label={`${item} 条/页`} val={item} key={item}/>\r\n                        ))}\r\n                    </pl-select>\r\n                )\r\n\r\n                const jumper = (\r\n                    <div class=\"pl-pagination-jumper\">\r\n                        <span>前往</span>\r\n                        <pl-number inputProps={{width: jumperNumberWidth.value}}\r\n                                   readonly={editComputed.value.readonly || editComputed.value.loading}\r\n                                   hideButton\r\n                                   loading={false}\r\n                                   v-model={jumperValue.value}\r\n                                   min={0}\r\n                                   onEnter={handler.onJump}/>\r\n                        <span>页</span>\r\n                    </div>\r\n                )\r\n\r\n                const prev = (\r\n                    <div class=\"pl-pagination-prev pl-pagination-pager-button\" onClick={handler.onPrev}>\r\n                        {!!props.prevText ? props.prevText : <pl-icon icon=\"el-icon-arrow-left\"/>}\r\n                    </div>\r\n                )\r\n                const next = (\r\n                    <div class=\"pl-pagination-next pl-pagination-pager-button\" onClick={handler.onNext}>\r\n                        {!!props.nextText ? props.nextText : <pl-icon icon=\"el-icon-arrow-right\"/>}\r\n                    </div>\r\n                )\r\n\r\n                const pager = (\r\n                    <ul class=\"pl-pagination-pager\">\r\n                        {pageInfo.value.totalPage > 0 && <li key=\"first\" class={utils.getPagerButtonClass(1)} onClick={() => utils.changeCurrent(1)}>1</li>}\r\n                        {pageInfo.value.showPrevMore && <li key=\"prev-more\" class={utils.getPagerButtonClass('prev')}>\r\n                            <pl-icon icon=\"el-icon-more\"/>\r\n                        </li>}\r\n                        {pagers.value.map((page, index) => <li class={utils.getPagerButtonClass(page)} key={index} onClick={() => utils.changeCurrent(page)}>{page}</li>)}\r\n                        {pageInfo.value.showNextMore && <li key=\"prev-more\" class={utils.getPagerButtonClass('next')}>\r\n                            <pl-icon icon=\"el-icon-more\"/>\r\n                        </li>}\r\n                        {pageInfo.value.totalPage > 1 && <li key=\"last\" class={utils.getPagerButtonClass(pageInfo.value.totalPage)} onClick={() => utils.changeCurrent(pageInfo.value.totalPage)}>{pageInfo.value.totalPage}</li>}\r\n                    </ul>\r\n                )\r\n\r\n                const blank = (<div class=\"pl-pagination-blank\"></div>)\r\n                const total = props.total == null ? null : (<div class=\"pl-pagination-total\"><span>总共 {props.total} 条记录</span></div>)\r\n                const slot = !slots.default.isExist() ? null : (<div class=\"pl-pagination-slot\">{slots.default()}</div>)\r\n                const loading = !editComputed.value.loading ? null : (\r\n                    <div class=\"pl-pagination-loading\">\r\n                        <pl-loading type=\"beta\"/>\r\n                    </div>\r\n                )\r\n\r\n                let parts = {sizes, jumper, prev, pager, next, loading, blank, total, slot,}\r\n\r\n                let layout = props.layout.replace(/\\s+/g, '').split(',').reduce((ret: any[], item) => {\r\n                    let part = (parts as any)[item]\r\n                    if (!!part) {\r\n                        ret.push(part)\r\n                    }\r\n                    return ret\r\n                }, [])\r\n\r\n                return (\r\n                    <div class={classes.value}>\r\n                        {layout}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {Ref} from 'vue';\r\n\r\n/*节点状态类型*/\r\nexport enum StepStatus {\r\n    wait = 'wait',\r\n    finish = 'finish',\r\n    process = 'process',\r\n    error = 'error',\r\n}\r\n\r\nexport const StepUtils = {\r\n    getCurrentIndex: (current: any, items: any[]) => {\r\n        if (typeof current === \"number\") {\r\n            return current\r\n        } else {\r\n            for (let i = 0; i < items.length; i++) {\r\n                const item = items[i];\r\n                if (item.val === current) return i\r\n            }\r\n        }\r\n    },\r\n    getStepStatus: (\r\n        group: { currentStatus: StepStatus, currentIndex: Ref<number> },\r\n        child: { status: StepStatus, index: Ref<number> }\r\n    ): StepStatus | null => {\r\n\r\n        const {currentStatus, currentIndex} = group\r\n        const {status, index} = child\r\n\r\n        if (!!status) return status as StepStatus\r\n        if (currentIndex.value > index.value) {\r\n            return StepStatus.finish\r\n        } else if (currentIndex.value === index.value) {\r\n            if (!!currentStatus) {\r\n                return currentStatus as StepStatus\r\n            } else {\r\n                return StepStatus.process\r\n            }\r\n        } else if (currentIndex.value < index.value) {\r\n            return StepStatus.wait\r\n        } else {\r\n            return null\r\n        }\r\n    }\r\n}","import Icon from '../icon'\r\nimport Loading from '../loading'\r\nimport Button from '../button'\r\nimport Number from '../number'\r\n\r\nimport Pagination from './pagination'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Pagination, {\r\n    plugins: [\r\n        Icon,\r\n        Loading,\r\n        Button,\r\n        Number,\r\n    ]\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {computed} from 'vue';\r\nimport './badge.scss'\r\n\r\nexport default designComponent({\r\n    name: 'pl-badge',\r\n    props: {\r\n        data: {},                                       //显示的数据\r\n        bottom: {type: Boolean},                        //标记纵向是否在底部\r\n        start: {type: Boolean},                         //标记横向是否在右边\r\n        status: {type: String, default: 'error'},       //标记背景色\r\n        dot: {type: Boolean,},                          //标记是否只是一个小圆点\r\n        max: {type: Number,},                           //标记显示文本最大值\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots(['badge'])\r\n        const contentClass = computed(() => [\r\n            'pl-badge-content',\r\n            {\r\n                'pl-badge-content-dot': !!props.dot,\r\n            },\r\n            `pl-badge-content-${!!props.bottom ? 'bottom' : 'top'}`,\r\n            `pl-badge-content-${!!props.start ? 'start' : 'end'}`,\r\n            `pl-badge-content-status-${props.status}`,\r\n        ])\r\n        const showValue = computed(() => {\r\n            if (props.data == null) return null\r\n            if (props.max != null && (Number(props.data)) > props.max) return props.max + '+'\r\n            return props.data\r\n        })\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-badge\">\r\n                    {slots.default()}\r\n                    <div class={contentClass.value}>\r\n                        {slots.badge(props.data != null ? <span>{showValue.value}</span> : null)}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import Badge from './badge'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Badge)","import {designComponent} from \"../../../use/designComponent\";\r\nimport {useSlots} from \"../../../use/useSlots\";\r\nimport {computed, getCurrentInstance, Ref} from 'vue';\r\nimport {StepStatus, StepUtils} from \"../step.utils\";\r\nimport {StepCollector} from \"./step-group\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\n\r\nexport const Step = designComponent({\r\n    name: 'pl-step',\r\n    props: {\r\n        icon: {type: String},\r\n        status: {type: String},\r\n        title: {type: String},\r\n        content: {type: String},\r\n        val: {type: String},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement\r\n        })\r\n        const {slots} = useSlots(['title', 'content'])\r\n        const stepGroup = StepCollector.child({sort: () => refs.el})\r\n        const ctx = getCurrentInstance()!\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const index = computed(() => stepGroup.items.indexOf(ctx.proxy))\r\n\r\n        const icon = computed(() => {\r\n            if (!!props.icon) return props.icon\r\n            return null\r\n        })\r\n\r\n        const isLast = computed(() => {\r\n            return index.value === stepGroup.items.length - 1\r\n        })\r\n\r\n        const currentStatus: Ref<StepStatus | null> = computed(() => {\r\n            return StepUtils.getStepStatus({\r\n                currentIndex: stepGroup.currentIndex as any,\r\n                currentStatus: stepGroup.props.currentStatus as any\r\n            }, {\r\n                status: props.status as any,\r\n                index\r\n            })\r\n        })\r\n\r\n\r\n        const classes = computed(() => [\r\n            'pl-step',\r\n            `pl-step-status-${currentStatus.value}`,\r\n            {\r\n                'pl-step-has-icon': !!icon.value,\r\n                'pl-step-last': isLast.value,\r\n            }\r\n        ])\r\n\r\n        return {\r\n            refer: {},\r\n            render: () => (\r\n                <div class={classes.value} onClick={emit.onClick} ref=\"el\">\r\n                    <div class=\"pl-step-head\">\r\n                        {!stepGroup.props.vertical && (stepGroup.isTitleAlignBottom.value || isLast.value) && <span class=\"pl-step-divider pl-step-divider-prev\"/>}\r\n                        <span class=\"pl-step-icon\">\r\n                        {\r\n                            !!icon.value ?\r\n                                (currentStatus.value !== 'process' ? <pl-icon icon={icon.value}/> : <pl-loading type=\"delta\"/>)\r\n                                :\r\n                                (\r\n                                    !!stepGroup.props.dotIcon ?\r\n                                        (<span class=\"pl-step-dot\"/>)\r\n                                        :\r\n                                        (\r\n                                            <span class=\"pl-step-number\">\r\n                                                {currentStatus.value === StepStatus.finish ?\r\n                                                    <pl-icon icon=\"el-icon-check\"/>\r\n                                                    :\r\n                                                    (currentStatus.value === StepStatus.error ?\r\n                                                            <pl-icon icon=\"el-icon-close\"/>\r\n                                                            :\r\n                                                            <span>{index.value + 1}</span>\r\n                                                    )\r\n                                                }\r\n                                            </span>\r\n                                        )\r\n                                )\r\n                        }\r\n                    </span>\r\n                        {!stepGroup.isTitleAlignBottom.value && (\r\n                            <span class=\"pl-step-title\">\r\n                            {slots.title(props.title)}\r\n                        </span>\r\n                        )}\r\n                        {(stepGroup.isTitleAlignBottom.value || !isLast.value) && <span class=\"pl-step-divider pl-step-divider-next\"/>}\r\n                    </div>\r\n                    <div class=\"pl-step-body\">\r\n                        {!stepGroup.isTitleAlignBottom.value ?\r\n                            <span class=\"pl-step-icon\"/>\r\n                            :\r\n                            <span class=\"pl-step-title\">\r\n                            {slots.title(props.title)}\r\n                        </span>\r\n                        }\r\n                        <span class=\"pl-step-content\">\r\n                        {slots.content(props.content)}\r\n                    </span>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {useSlots} from \"../../../use/useSlots\";\r\nimport {computed} from 'vue';\r\nimport {StepUtils} from \"../step.utils\";\r\nimport {useCollect} from \"../../../use/useCollect\";\r\nimport {Step} from \"./step\";\r\nimport './step.scss'\r\n\r\nexport const StepGroup = designComponent({\r\n    name: 'pl-step-group',\r\n    props: {\r\n        current: {type: [String, Number]},                              // 双向绑定，指定当前步骤条的步骤，在step组件中，可以通过 status 属性覆盖状态\r\n        currentStatus: {type: String},                                  // 当前激活节点的状态\r\n        type: {type: String, default: 'normal'},                        // 步骤条类型，normal、navigation\r\n        vertical: {type: Boolean},                                      // 步骤条是否为纵向\r\n        titleAlignBottom: {type: Boolean},                              // 默认情况下，标题会放在图标右侧，设置该属性可以改为放在图标下面\r\n        mini: {type: Boolean, default: true},                           // 迷你步骤条\r\n        dotIcon: {type: Boolean},                                       // 图标是否采用小圆点替代\r\n    },\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots()\r\n\r\n        const items = StepCollector.parent() as any[]\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const isTitleAlignBottom = computed(() => {\r\n            return props.titleAlignBottom || props.vertical\r\n        })\r\n        const classes = computed(() => [\r\n            'pl-step-group',\r\n            `pl-step-group-${props.vertical ? 'vertical' : 'horizontal'}`,\r\n            {\r\n                'pl-step-group-title-align-bottom': isTitleAlignBottom.value,\r\n                'pl-step-group-mini': props.mini,\r\n                'pl-step-group-dot-icon': props.dotIcon,\r\n            },\r\n        ])\r\n        const currentIndex = computed(() => StepUtils.getCurrentIndex(props.current, items)) as { value: number }\r\n\r\n        return {\r\n            refer: {\r\n                items,\r\n                currentIndex,\r\n                props,\r\n                isTitleAlignBottom,\r\n            },\r\n            render: () => (\r\n                <div class={classes.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const StepCollector = useCollect(() => ({\r\n    parent: StepGroup,\r\n    child: Step,\r\n}))","import {designComponent} from \"../../../use/designComponent\";\r\nimport {getCurrentInstance, computed, Ref} from 'vue';\r\nimport {useSlots} from \"../../../use/useSlots\";\r\nimport {StepStatus, StepUtils} from \"../step.utils\";\r\nimport {ArrowStepCollector} from \"./arrow-step-group\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\n\r\nexport const ArrowStep = designComponent({\r\n    name: 'pl-arrow-step',\r\n    props: {\r\n        status: {type: String},\r\n        title: {type: String},\r\n        val: {type: String},\r\n        hideIndex: {type: Boolean},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const ctx = getCurrentInstance()!\r\n        const {slots} = useSlots(['title'])\r\n        const {refs} = useRefs({el: HTMLDivElement})\r\n        const stepGroup = ArrowStepCollector.child({sort: () => refs.el})\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const index = computed(() => {\r\n            return stepGroup.items.indexOf(ctx.proxy)\r\n        }) as { value: number }\r\n\r\n        const isLast = computed(() => {\r\n            return index.value === stepGroup.items.length - 1\r\n        })\r\n\r\n        const isFirst = computed(() => {\r\n            return index.value === 0\r\n        })\r\n\r\n        const currentStatus: Ref<StepStatus | null> = computed(() => {\r\n            return StepUtils.getStepStatus({\r\n                currentIndex: stepGroup.currentIndex as any,\r\n                currentStatus: stepGroup.props.currentStatus as any\r\n            }, {\r\n                status: props.status as any,\r\n                index: index as any\r\n            })\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-arrow-step',\r\n            `pl-arrow-step-status-${currentStatus.value}`,\r\n        ])\r\n\r\n        return {\r\n            refer: {},\r\n            render: () => (\r\n                index.value != null ? (\r\n                    <div class={classes.value} onClick={emit.onClick} ref=\"el\">\r\n                        <div class=\"pl-arrow-step-content\">\r\n                            {!props.hideIndex && <span class=\"pl-arrow-step-sequence\">{index.value + 1}. &nbsp;</span>}\r\n                            <span>{slots.default(props.title)}</span>\r\n                        </div>\r\n                        {!isLast.value ? <pl-triangle direction=\"right\" size={null}/> : null}\r\n                        {!isFirst.value ? [\r\n                            <pl-triangle direction=\"bottom\" half=\"start\" size={null}/>,\r\n                            <pl-triangle direction=\"top\" half=\"start\" size={null}/>\r\n                        ] : null}\r\n                    </div>\r\n                ) : <div/>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {useSlots} from \"../../../use/useSlots\";\r\nimport {computed} from 'vue';\r\nimport {StepUtils} from \"../step.utils\";\r\nimport {useCollect} from \"../../../use/useCollect\";\r\nimport {ArrowStep} from \"./arrow-step\";\r\nimport './arrow-step.scss'\r\n\r\nexport const ArrowStepGroup = designComponent({\r\n    name: 'pl-arrow-step-group',\r\n    props: {\r\n        current: {},\r\n        currentStatus: {type: String},\r\n    },\r\n    setup({props}) {\r\n        const {slots} = useSlots()\r\n        const items = ArrowStepCollector.parent() as any[]\r\n        const currentIndex = computed(() => StepUtils.getCurrentIndex(props.current, items)) as { value: number }\r\n        return {\r\n            refer: {\r\n                props,\r\n                currentIndex,\r\n                items,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-arrow-step-group\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const ArrowStepCollector = useCollect(() => ({\r\n    parent: ArrowStepGroup,\r\n    child: ArrowStep,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {computed, onMounted} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport './triangle.scss'\r\n\r\nconst DirectionMap = {\r\n    top: 'bottom',\r\n    bottom: 'top',\r\n    left: 'right',\r\n    right: 'left',\r\n}\r\n\r\nfunction uppercaseFirstLetter(name: string): string {\r\n    if (!name) return name\r\n    return name.charAt(0).toUpperCase() + name.slice(1)\r\n}\r\n\r\nexport default designComponent({\r\n    name: 'pl-triangle',\r\n    props: {\r\n        direction: {type: String, default: 'top'},\r\n        half: {type: String},\r\n        size: {type: [Number, String], default: 20},\r\n    },\r\n    setup({props}) {\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        const {propsState} = useProps(props, {\r\n            size: useProps.NUMBER,\r\n        })\r\n\r\n        const classes = computed(() => [\r\n            'pl-triangle',\r\n            `pl-triangle-direction-${props.direction}`,\r\n            {\r\n                [`pl-triangle-half-${props.half}`]: !!props.half\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            if (!props.half) {\r\n                return style\r\n            }\r\n            if (props.direction === 'top' || props.direction === 'bottom') {\r\n                style.width = unit(propsState.size)\r\n            } else {\r\n                style.height = unit(propsState.size)\r\n            }\r\n            return style\r\n        })\r\n\r\n        const targetStyles = useStyles((style: any) => {\r\n\r\n            style.border = `solid transparent ${unit(propsState.size)}`\r\n            style[`border${uppercaseFirstLetter(props.direction)}Width`] = '0'\r\n            style[`border${uppercaseFirstLetter((DirectionMap as any)[props.direction])}Color`] = 'currentColor'\r\n\r\n            if (!!props.half) {\r\n                if (props.direction === 'top' || props.direction === 'bottom') {\r\n                    props.half === 'end' && (style.right = unit(propsState.size))\r\n                } else {\r\n                    props.half === 'end' && (style.bottom = unit(propsState.size))\r\n                }\r\n            }\r\n\r\n            return style\r\n        })\r\n\r\n        if (propsState.size == null) {\r\n            onMounted(() => {\r\n                propsState.size = (refs.el!.parentNode as HTMLDivElement).offsetHeight / 2\r\n            })\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                propsState.size == null ? <span ref=\"el\" style=\"display:none\"/> : (\r\n                    <div class={classes.value} style={styles.value} ref=\"el\">\r\n                        <div class=\"pl-triangle-target\" style={targetStyles.value}/>\r\n                    </div>\r\n                )\r\n            )\r\n        }\r\n    },\r\n})","import Triangle from './triangle'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Triangle)","import {StepGroup} from \"./step/step-group\";\r\nimport {Step} from \"./step/step\";\r\nimport {ArrowStepGroup} from \"./arrow-step/arrow-step-group\";\r\nimport {ArrowStep} from \"./arrow-step/arrow-step\";\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport Triangle from '../triangle'\r\n\r\nexport default createComponentPlugin(Step, {\r\n    exposeComponents: {\r\n        StepGroup,\r\n        ArrowStepGroup,\r\n        ArrowStep,\r\n    },\r\n    plugins: [Triangle]\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {reactive} from 'vue';\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-dropdown',\r\n    props: {\r\n        modelValue: {type: Boolean},\r\n        disabledHideOnClickOption: {type: Boolean},                     // 禁用点击 dropdown-option 之后关闭 dropdown\r\n    },\r\n    provideRefer: true,\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots([\r\n            'popper'\r\n        ])\r\n        const {scopedSlots} = useScopedSlots({\r\n            reference: {open: Boolean}\r\n        })\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n\r\n        const state = reactive({})\r\n\r\n        const handler = {\r\n            clickDropdownOption: (e: MouseEvent) => {\r\n                if (!props.disabledHideOnClickOption) {\r\n                    model.value = false\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                state,\r\n                handler,\r\n            },\r\n            render: () => (\r\n                <pl-popper\r\n                    trigger=\"click\"\r\n                    v-model={model.value}\r\n                    noContentPadding\r\n                    transition=\"pl-transition-popper-drop\"\r\n                    v-slots={{popper: slots.popper}}>\r\n                    {scopedSlots.reference(\r\n                        {open: model.value},\r\n                        slots.default()\r\n                    )}\r\n                </pl-popper>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport Dropdown from './dropdown'\r\n\r\nexport default designComponent({\r\n    name: 'pl-dropdown-menu',\r\n    props: {},\r\n    emits: {\r\n        onClickOption: (e: MouseEvent, val: any) => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit}}) {\r\n\r\n        const dropdown = Dropdown.use.inject()\r\n        const {slots} = useSlots()\r\n\r\n        const handler = {\r\n            clickOption: (e: MouseEvent, val: any) => {\r\n                emit.onClickOption(e, val)\r\n                dropdown.handler.clickDropdownOption(e)\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                handler,\r\n            },\r\n            render: slots.default\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-dropdown-group',\r\n    props: {\r\n        title: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots(['title'], true)\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={[\r\n                    'pl-dropdown-group',\r\n                    {'pl-dropdown-no-title': !slots.title.isExist() && !props.title}\r\n                ]}>\r\n                    {slots.title.isExist() || props.title && (\r\n                        <div class=\"pl-dropdown-group-title\">\r\n                            <pl-icon icon=\"el-icon-list\"/>\r\n                            <span>{slots.title(props.title)}</span>\r\n                        </div>\r\n                    )}\r\n                    <div class=\"pl-dropdown-group-content\">\r\n                        {slots.default()}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport Menu from './dropdown-menu'\r\nimport {useClass} from \"../../use/useClasses\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-dropdown-option',\r\n    props: {\r\n        label: {type: [String]},\r\n        val: {},\r\n        icon: {type: String},\r\n        disabled: {type: Boolean},\r\n        align: {type: String, default: 'left'},\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n        const menu = Menu.use.inject()\r\n\r\n        const onClick = (e: MouseEvent) => {\r\n            if (props.disabled) {\r\n                return\r\n            }\r\n            emit.onClick(e)\r\n            menu.handler.clickOption(e, props.val)\r\n        }\r\n\r\n        const classes = useClass(() => [\r\n            'pl-dropdown-option',\r\n            `pl-dropdown-option-align-${props.align}`,\r\n            {\r\n                'pl-dropdown-option-disabled': props.disabled\r\n            }\r\n        ])\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} onClick={onClick}>\r\n                    {!!props.icon && <pl-icon icon={props.icon} class=\"pl-dropdown-option-icon\"/>}\r\n                    {slots.default(props.label)}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import Dropdown from './dropdown'\r\nimport DropdownMenu from './dropdown-menu'\r\nimport DropdownGroup from './dropdown-group'\r\nimport DropdownOption from './dropdown-option'\r\nimport './dropdow.scss'\r\n\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Dropdown, {\r\n    exposeComponents: {\r\n        DropdownMenu,\r\n        DropdownGroup,\r\n        DropdownOption,\r\n    }\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport './tooltip.scss'\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {onUpdated, reactive, onMounted} from 'vue';\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-tooltip',\r\n    props: {\r\n        modelValue: {type: Boolean},                        // 双向绑定控制是否显示\r\n        tooltip: {type: String},                            // tooltip提示文本，可以通过 tooltip插槽替换\r\n        showWidth: {type: Number},                          // 设置宽度，当内容宽度超过这个宽度时，才会显示tooltip\r\n        theme: {type: String, default: 'dark'},             // 主题，dark以及light\r\n\r\n        placement: {type: String, default: 'top-start'},    // 位置\r\n        popperClass: {type: Object},                        // 传递给 pl-popper 的popperClass 属性\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const state = reactive({\r\n            scrollWidth: 0,\r\n            offsetWidth: 0,\r\n        })\r\n        const {refs} = useRefs({\r\n            reference: HTMLSpanElement\r\n        })\r\n        const {slots} = useSlots(['tooltip'])\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n\r\n        const popperClasses = useClass(() => [\r\n            'pl-tooltip',\r\n            `pl-tooltip-theme-${props.theme}`,\r\n            props.popperClass,\r\n        ])\r\n\r\n        const refresh = debounce(() => {\r\n            if (!refs.reference) return\r\n            const {scrollWidth, offsetWidth} = refs.reference\r\n            if (state.scrollWidth != scrollWidth) state.scrollWidth = scrollWidth\r\n            if (state.offsetWidth != offsetWidth) state.offsetWidth = offsetWidth\r\n            // console.log({...state})\r\n        }, 100)\r\n\r\n        if (props.showWidth) {\r\n            onUpdated(refresh)\r\n            onMounted(refresh)\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <pl-popper\r\n                    disabled={!!props.showWidth ? state.offsetWidth === state.scrollWidth : false}\r\n                    popperClass={popperClasses.value}\r\n                    placement={props.placement}\r\n                    v-model={model.value}\r\n                    v-slots={{\r\n                        default: () => {\r\n                            refresh()\r\n                            return !!props.showWidth ? (\r\n                                <span class=\"pl-tooltip-reference\"\r\n                                      ref=\"reference\"\r\n                                      style={{width: unit(props.showWidth)!}}>\r\n                                {slots.default(props.tooltip)}\r\n                            </span>\r\n                            ) : slots.default(props.tooltip)\r\n                        },\r\n                        popper: () => slots.tooltip(props.tooltip)\r\n                    }}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import {Directive, nextTick} from 'vue';\r\nimport {PlainTooltip} from 'plain-popper';\r\nimport {PlainTooltipConfig} from 'plain-popper/src/PlainTooltipUtils';\r\nimport {deepEqual} from \"plain-utils/object/deepEqual\";\r\n\r\ntype TooltipBinding = string | PlainTooltipConfig\r\n\r\nclass Tooltip {\r\n\r\n    static DEFAULT_OPTION = {\r\n        placement: 'top',\r\n        theme: 'dark',\r\n        animate: 'fade',\r\n        trigger: 'hover',\r\n    }\r\n\r\n    tooltip: PlainTooltip | null = null\r\n    oldOption: any = null\r\n\r\n    constructor(el: HTMLElement, option: PlainTooltipConfig | string) {\r\n        this.updateOption(el, option)\r\n    }\r\n\r\n    async updateOption(el: HTMLElement, option: PlainTooltipConfig | string) {\r\n        if (deepEqual(this.oldOption, option)) {\r\n            return\r\n        }\r\n        this.oldOption = option\r\n        await nextTick()\r\n        if (!!this.tooltip) {\r\n            this.tooltip.destroy()\r\n            this.tooltip = null\r\n        }\r\n        if (!!option) {\r\n            let config: PlainTooltipConfig = (typeof option === \"string\" ? {content: option} : option) as any\r\n            config = Object.assign({reference: el} as Partial<PlainTooltipConfig>, Tooltip.DEFAULT_OPTION, config)\r\n            this.tooltip = new PlainTooltip(config)\r\n        }\r\n    }\r\n\r\n    unbind() {\r\n        if (!!this.tooltip) {\r\n            this.tooltip.destroy()\r\n        }\r\n    }\r\n}\r\n\r\nexport const TooltipDirective = (() => {\r\n    const map = new WeakMap()\r\n    const directive: Directive = {\r\n        mounted(el: HTMLElement, binding: { value: TooltipBinding }) {\r\n            if (!!binding.value) {\r\n                let service = new Tooltip(el, binding.value)\r\n                map.set(el, service)\r\n                service.updateOption(el, binding.value)\r\n            }\r\n        },\r\n        updated(el: HTMLElement, binding: { value: TooltipBinding }) {\r\n            if (!!binding.value) {\r\n                let service = map.get(el) as Tooltip | null\r\n                if (!service) {\r\n                    service = new Tooltip(el, binding.value)\r\n                    map.set(el, service)\r\n                }\r\n                service.updateOption(el, binding.value)\r\n            } else {\r\n                let service = map.get(el) as Tooltip | null\r\n                if (!!service) {\r\n                    service.unbind()\r\n                    service = null\r\n                    map.set(el, service)\r\n                }\r\n            }\r\n        },\r\n        unmounted(el: HTMLElement) {\r\n            const service = map.get(el) as Tooltip\r\n            if (!!service) {\r\n                service.unbind()\r\n            }\r\n        },\r\n    }\r\n    return directive\r\n})()","import Tooltip from './tooltip'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {App} from 'vue';\r\nimport {TooltipDirective} from \"./tooltip-directive\";\r\n\r\nexport default createComponentPlugin(Tooltip, {\r\n    plugins: [\r\n        {\r\n            install(app: App) {\r\n                app.directive('tooltip', TooltipDirective)\r\n            },\r\n        }\r\n    ]\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useModel} from \"../../use/useModel\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-collapse-group',\r\n    props: {\r\n        modelValue: {type: [String, Array]},\r\n        limit: {type: Number, default: 1},\r\n        disabled: {type: Boolean},\r\n    },\r\n    provideRefer: true,\r\n    emits: {\r\n        onUpdateModelValue: (val: string | string[] | undefined) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {slots} = useSlots()\r\n        const model = useModel(() => props.modelValue as string | string[] | undefined, emit.onUpdateModelValue)\r\n\r\n        const utils = {\r\n            isOpen: (val: string) => {\r\n                if (!model.value) {\r\n                    return\r\n                }\r\n                if (typeof model.value === \"string\") {\r\n                    return model.value == val\r\n                } else {\r\n                    return (model.value as string[]).indexOf(val) > -1\r\n                }\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            clickCollapseTitle: (val: string) => {\r\n                if (props.limit === 1) {\r\n                    model.value = val == model.value ? undefined : val\r\n                } else {\r\n                    const value = (model.value as string[] | undefined) || []\r\n                    const index = value.indexOf(val)\r\n                    if (index > -1) {\r\n                        value.splice(index, 1)\r\n                    } else {\r\n                        value.push(val)\r\n                    }\r\n                    model.value = [...value]\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                utils,\r\n                handler,\r\n                props,\r\n                model,\r\n            },\r\n            render: () => (\r\n                <div class=\"pl-collapse-group\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport Group from './collapse-group'\r\nimport {computed} from 'vue';\r\nimport {createCounter} from \"../../utils/createCounter\";\r\nimport './collapse.scss'\r\n\r\nconst valCounter = createCounter('collapse')\r\n\r\nexport default designComponent({\r\n    name: 'pl-collapse',\r\n    props: {\r\n        modelValue: {type: Boolean, default: true},\r\n        title: {type: String},\r\n        detail: {type: String},\r\n        noArrow: {type: Boolean},\r\n        disabled: {type: Boolean, default: null},\r\n        val: {type: String},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: boolean) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const group = Group.use.inject(null)\r\n\r\n        const selfVal = computed(() => props.val || valCounter())\r\n\r\n        const isOpen = computed(() => {\r\n            if (!!group) {\r\n                return group.utils.isOpen(selfVal.value)\r\n            } else {\r\n                return model.value\r\n            }\r\n        })\r\n\r\n        const {slots} = useSlots([\r\n            'title',\r\n        ], true)\r\n\r\n        const classes = useClass(() => [\r\n            'pl-collapse',\r\n            {\r\n                'pl-collapse-has-arrow': !props.noArrow,\r\n                'pl-collapse-is-open': isOpen.value,\r\n            }\r\n        ])\r\n\r\n        const isDisabled = computed(() => {\r\n            if (props.disabled != null) {\r\n                return props.disabled\r\n            }\r\n            if (!!group) {\r\n                return group.props.disabled\r\n            }\r\n            return false\r\n        })\r\n\r\n        const handler = {\r\n            onClickTitle: () => {\r\n                if (isDisabled.value) {\r\n                    return\r\n                }\r\n                if (!!group) {\r\n                    group.handler.clickCollapseTitle(selfVal.value)\r\n                } else {\r\n                    model.value = !model.value\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value}>\r\n                    {(!!props.title || slots.title.isExist()) && <div class=\"pl-collapse-title\" onClick={handler.onClickTitle}>\r\n                        {slots.title(props.title)}\r\n\r\n                        {!props.noArrow && !isDisabled.value && <div class=\"pl-collapse-arrow\">\r\n                            <pl-icon icon=\"el-icon-arrow-right\"/>\r\n                        </div>}\r\n                    </div>}\r\n                    <pl-collapse-transition>\r\n                        {isOpen.value && (!!props.detail || slots.default.isExist()) && <div class=\"pl-collapse-detail\">\r\n                            {slots.default(props.detail)}\r\n                        </div>}\r\n                    </pl-collapse-transition>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {Transition} from 'vue'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {addClass} from \"plain-utils/dom/addClass\";\r\nimport {removeClass} from \"plain-utils/dom/removeClass\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-collapse-transition',\r\n    emits: {\r\n        onAfterLeave: () => true,\r\n    },\r\n    setup({event: {emit}}) {\r\n\r\n        const {slots} = useSlots()\r\n\r\n        const handler = {\r\n            beforeEnter(el: HTMLElement) {\r\n                addClass(el, 'pl-collapse-transition');\r\n                if (!el.dataset) (el as any).dataset = {};\r\n\r\n                el.dataset.oldPaddingTop = el.style.paddingTop;\r\n                el.dataset.oldPaddingBottom = el.style.paddingBottom;\r\n\r\n                el.style.height = '0';\r\n                el.style.paddingTop = '0';\r\n                el.style.paddingBottom = '0';\r\n            },\r\n            enter(el: HTMLElement) {\r\n                el.dataset.oldOverflow = el.style.overflow;\r\n                if (el.scrollHeight !== 0) {\r\n                    el.style.height = el.scrollHeight + 'px';\r\n                    el.style.paddingTop = el.dataset.oldPaddingTop as string;\r\n                    el.style.paddingBottom = el.dataset.oldPaddingBottom as string;\r\n                } else {\r\n                    el.style.height = '';\r\n                    el.style.paddingTop = el.dataset.oldPaddingTop as string;\r\n                    el.style.paddingBottom = el.dataset.oldPaddingBottom as string;\r\n                }\r\n\r\n                el.style.overflow = 'hidden';\r\n            },\r\n            afterEnter(el: HTMLElement) {\r\n                removeClass(el, 'pl-collapse-transition');\r\n                el.style.height = '';\r\n                el.style.overflow = el.dataset.oldOverflow as string;\r\n            },\r\n            beforeLeave(el: HTMLElement) {\r\n                if (!el.dataset) (el as any).dataset = {};\r\n                el.dataset.oldPaddingTop = el.style.paddingTop;\r\n                el.dataset.oldPaddingBottom = el.style.paddingBottom;\r\n                el.dataset.oldOverflow = el.style.overflow;\r\n                el.style.height = el.scrollHeight + 'px';\r\n                el.style.overflow = 'hidden';\r\n            },\r\n            leave(el: HTMLElement) {\r\n                if (el.scrollHeight != 0) {\r\n                    addClass(el, 'pl-collapse-transition');\r\n                    el.style.transitionProperty = 'height'\r\n                    el.style.height = \"0\";\r\n                    el.style.paddingTop = '0';\r\n                    el.style.paddingBottom = '0';\r\n                }\r\n            },\r\n            afterLeave(el: HTMLElement) {\r\n                removeClass(el, 'pl-collapse-transition');\r\n                el.style.height = '';\r\n                el.style.overflow = el.dataset.oldOverflow as string;\r\n                el.style.paddingTop = el.dataset.oldPaddingTop as string;\r\n                el.style.paddingBottom = el.dataset.oldPaddingBottom as string;\r\n                emit.onAfterLeave()\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <Transition\r\n                    {...{\r\n                        onBeforeEnter: handler.beforeEnter,\r\n                        onEnter: handler.enter,\r\n                        onAfterEnter: handler.afterEnter,\r\n                        onBeforeLeave: handler.beforeLeave,\r\n                        onLeave: handler.leave,\r\n                        onAfterLeave: handler.afterLeave,\r\n                    } as any}>\r\n                    {slots.default()}\r\n                </Transition>\r\n            )\r\n        }\r\n    },\r\n})","import Collapse from './collapse'\r\nimport CollapseGroup from './collapse-group'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport CollapseTransition from './collapse-transition'\r\n\r\nexport default createComponentPlugin(Collapse, {\r\n    exposeComponents: {\r\n        CollapseTransition,\r\n        CollapseGroup,\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, StyleStatus, useStyle} from \"../../use/useStyle\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {STATUS} from \"../../utils/constant\";\r\nimport {computed, reactive} from 'vue';\r\nimport './alert.scss'\r\n\r\nexport default designComponent({\r\n    name: 'pl-alert',\r\n    props: {\r\n        ...StyleProps,\r\n\r\n        label: {type: String},                                      // 提示文本\r\n        desc: {type: String},                                       // 描述文本\r\n        align: {type: String, default: 'left'},                     // 文本对其方式\r\n        theme: {type: String, default: 'lite'},                     // 主题，lite轻色，deep深色\r\n        noClose: {type: Boolean},                                   // 禁用关闭\r\n        icon: {type: String, default: undefined},                   // 显示的图标\r\n    },\r\n    setup({props}) {\r\n\r\n        const state = reactive({\r\n            isClosed: false,\r\n        })\r\n\r\n        const {slots} = useSlots([\r\n            'desc',\r\n            'close',\r\n        ], true)\r\n\r\n        const {styleComputed} = useStyle({status: StyleStatus.info})\r\n\r\n        const icon = computed(() => {\r\n            if (props.icon === null) {\r\n                return null\r\n            }\r\n            return props.icon || STATUS[styleComputed.value.status!].icon\r\n        })\r\n        const classes = computed(() => [\r\n            'pl-alert',\r\n            `pl-alert-status-${styleComputed.value.status}`,\r\n            `pl-alert-shape-${styleComputed.value.shape}`,\r\n            `pl-alert-theme-${props.theme}`,\r\n            `pl-alert-align-${props.align}`,\r\n            {\r\n                'pl-alert-has-icon': !!icon.value,\r\n                'pl-alert-has-desc': !!props.desc || slots.desc.isExist(),\r\n                'pl-alert-has-close': !props.noClose,\r\n            }\r\n        ])\r\n\r\n        const handler = {\r\n            onClickClosed: () => {\r\n                state.isClosed = true\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <pl-collapse-transition>\r\n                    {!state.isClosed && <div class=\"pl-alert-wrapper\">\r\n                        <div class={classes.value}>\r\n                            {!!icon.value && <div class=\"pl-alert-icon\">\r\n                                <pl-icon icon={icon.value}/>\r\n                            </div>}\r\n                            {!props.noClose && <div class=\"pl-alert-close\" onClick={handler.onClickClosed}>\r\n                                {slots.close(<pl-icon icon=\"el-icon-close\"/>)}\r\n                            </div>}\r\n                            {(!!props.label || slots.default.isExist()) && (\r\n                                <div class=\"pl-alert-label\">\r\n                                    {slots.default(props.label)}\r\n                                </div>\r\n                            )}\r\n                            {(!!props.desc || slots.desc.isExist()) && (\r\n                                <div class=\"pl-alert-desc\">\r\n                                    {slots.desc(props.desc)}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>}\r\n                </pl-collapse-transition>\r\n            )\r\n        }\r\n\r\n    },\r\n})","import Collapse from '../collapse'\r\nimport Icon from '../icon'\r\nimport Alert from './alert'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Alert, {\r\n    plugins: [\r\n        Collapse,\r\n        Icon,\r\n    ]\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport './card.scss'\r\nimport {useClass} from \"../../use/useClasses\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-card',\r\n    props: {\r\n        width: {type: [String, Number], default: '300'},        // 卡片宽度\r\n        noPadding: {type: Boolean},                             // 去掉标题以及内容的内边距\r\n        mini: {type: Boolean},                                  // 小型卡片\r\n        title: {type: String},                                  // 卡片标题\r\n        desc: {type: String},                                   // 卡片标题描述\r\n        shadow: {type: String},                                 // 阴影, normal,hover\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {slots} = useSlots([\r\n            'title',                                // 卡片标题\r\n            'desc',                                 // 标题下方的描述\r\n            // 'default',                              // 卡片内容\r\n            'operator',                             // 卡片标题右侧的操作按钮\r\n            'poster',                               // 卡片海报（标题上方）\r\n            'foot',                                 // 卡片底部操作栏\r\n        ], true)\r\n\r\n        const classes = useClass(() => [\r\n            'pl-card',\r\n            {\r\n                'pl-card-mini': props.mini,\r\n                'pl-card-no-padding': props.noPadding,\r\n                [`pl-card-shadow-${props.shadow}`]: !!props.shadow,\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {\r\n            !!props.width && (style.width = unit(props.width))\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value}>\r\n                    {slots.poster.isExist() && <div class=\"pl-card-poster\">\r\n                        {slots.poster()}\r\n                    </div>}\r\n                    {(slots.title.isExist() || slots.desc.isExist() || slots.operator.isExist() || props.title || props.desc) && (\r\n                        <div class=\"pl-card-head\">\r\n                            <div class=\"pl-card-head-content\">\r\n                                {(slots.title.isExist() || props.title) && <div class=\"pl-card-title\">\r\n                                    {slots.title(props.title)}\r\n                                </div>}\r\n                                {(slots.desc.isExist() || props.desc) && <div class=\"pl-card-desc\">\r\n                                    {slots.desc(props.desc)}\r\n                                </div>}\r\n                            </div>\r\n                            {slots.operator.isExist() && <div class=\"pl-card-head-operator\">\r\n                                {slots.operator()}\r\n                            </div>}\r\n                        </div>\r\n                    )}\r\n                    {slots.default.isExist() && <div class=\"pl-card-content\">\r\n                        {slots.default()}\r\n                    </div>}\r\n                    {slots.foot.isExist() && <div class=\"pl-card-foot\">\r\n                        {slots.foot()}\r\n                    </div>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import Card from './card'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Card)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {CarouselCollector} from \"./carousel\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {computed} from 'vue';\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {createCounter} from \"../../utils/createCounter\";\r\n\r\nconst counter = createCounter('carousel')\r\n\r\nexport default designComponent({\r\n    name: 'pl-carousel-item',\r\n    props: {\r\n        val: {type: [String, Number]},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n        const carousel = CarouselCollector.child({sort: () => refs.el})\r\n        const {slots} = useSlots()\r\n        const itemVal = computed(() => props.val == null ? counter() : props.val)\r\n        const style = useStyles(() => carousel.utils.getItemStyles(itemVal.value) as any)\r\n\r\n        return {\r\n            refer: {\r\n                itemVal,\r\n            },\r\n            render: () => (\r\n                <div class={[\r\n                    'pl-carousel-item',\r\n                    {\r\n                        'pl-carousel-item-animating': carousel.utils.isAnimating(itemVal.value),\r\n                    }\r\n                ]}\r\n                     ref=\"el\"\r\n                     style={style.value}>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {computed, onMounted, reactive, watch} from 'vue'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport './carousel.scss'\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport Item from './carousel-item'\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {throttle} from \"plain-utils/utils/throttle\";\r\n\r\nexport const Carousel = designComponent({\r\n    name: 'pl-carousel',\r\n    props: {\r\n        modelValue: {type: [String, Number]},                       // 双向绑定值\r\n        height: {type: [Number, String], default: 225},             // 轮播高度\r\n        autoplay: {type: Number, default: 3000},                    // 自定播放时间，为0则取消自动播放\r\n        disabledOperator: {type: Boolean},                          // 禁用前后按钮\r\n        disabledIndicator: {type: Boolean},                         // 禁用指示器\r\n        indicatorTrigger: {type: String, default: 'click'},         // 指示器激活触发器：click。hover\r\n        vertical: {type: Boolean},                                  // 轮播方向为纵向\r\n        card: {type: Boolean},                                      // 卡片形式的切换\r\n        cardScale: {type: Number, default: 0.64},                   // 卡片形式轮播的时候，缩小比例\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | number | undefined | null) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        /*子元素*/\r\n        const items = CarouselCollector.parent()\r\n        const {scopedSlots} = useScopedSlots({\r\n            indicator: {val: String, index: Number, active: Boolean}\r\n        })\r\n        const {slots} = useSlots([\r\n            'cover',\r\n        ], true)\r\n        const {propsState} = useProps(props, {\r\n            height: useProps.NUMBER,\r\n        })\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement\r\n        })\r\n        const state = reactive({\r\n            width: 0,                                                   // 容器宽度\r\n            height: 0,                                                  // 容器高度\r\n            autoplayTimer: null as null | number,                       // 自动播放定时器\r\n            prevActiveIndex: null as null | number,                     // 上一个激活的index，当元素个数为3时，需要通过这个属性优化动画\r\n        })\r\n\r\n        /*双向绑定值*/\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        /*子元素val数组*/\r\n        const vals = computed(() => items.map(item => String(item.itemVal.value)!))\r\n        /*当前激活的元素的val值*/\r\n        const activeVal = computed(() => {\r\n            if (vals.value.length === 0) {\r\n                return null\r\n            }\r\n            if (model.value != null) {\r\n                return String(model.value)\r\n            } else {\r\n                return vals.value[0]\r\n            }\r\n        })\r\n        /*当前激活的元素的val的在 数组中的索引*/\r\n        const activeIndex = computed(() => {\r\n            if (!activeVal.value) {\r\n                return 0\r\n            }\r\n            return vals.value.indexOf(activeVal.value)\r\n        })\r\n\r\n        /*实际渲染的，排序过的val数组*/\r\n        const sortVals = computed(() => {\r\n            const valArray = vals.value\r\n            let prev = valArray.slice(0, activeIndex.value)\r\n            let next = valArray.slice(activeIndex.value + 1)\r\n\r\n            if (Math.abs(prev.length - next.length) > 1) {\r\n                if (prev.length > next.length) {\r\n                    while (prev.length - next.length > 1) {\r\n                        next.push(prev.shift()!)\r\n                    }\r\n                } else {\r\n                    while (next.length - prev.length > 1) {\r\n                        prev.unshift(next.pop()!)\r\n                    }\r\n                }\r\n            }\r\n            return [...prev, activeVal.value, ...next]\r\n        })\r\n\r\n        const classes = useClass(() => [\r\n            'pl-carousel',\r\n            {\r\n                'pl-carousel-vertical': props.vertical,\r\n                'pl-carousel-card': props.card,\r\n            }\r\n        ])\r\n        const styles = useStyles(style => {\r\n            style.height = unit(propsState.height)\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 子元素的左偏移位置\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:19\r\n             */\r\n            getItemStyles: (val: any) => {\r\n                if (!state.width) {\r\n                    return null\r\n                }\r\n                /*当前val在sortVals中的索引*/\r\n                const sortIndex = sortVals.value.indexOf(String(val))\r\n                /*激活val在sortVals中的索引*/\r\n                const activeSortIndex = sortVals.value.indexOf(String(activeVal.value))\r\n\r\n                /*当前val与激活val在sortVal的间距*/\r\n                let duration = sortIndex - activeSortIndex\r\n\r\n                const style = {\r\n                    zIndex: sortVals.value.length - Math.abs(duration),\r\n                } as any\r\n\r\n                if (!props.vertical) {\r\n                    if (!props.card) {\r\n                        /*非卡片形式的轮播*/\r\n                        style.transform = `translateX(${duration * state.width}px)`\r\n                    } else {\r\n                        style.width = `${props.cardScale * 100}%`\r\n                        style.height = `${props.cardScale * 100}%`\r\n\r\n                        /*卡片轮播*/\r\n                        let left = duration * state.width * (props.cardScale) + (state.width * (1 - props.cardScale) / 2)\r\n                        left += (sortIndex > activeSortIndex ? -1 : 1) * Math.abs(sortIndex - activeSortIndex) * state.width * 0.125\r\n                        style.transform = `translateX(${left}px) translateY(${state.height * ((1 - props.cardScale) / 2)}px) scale(${sortIndex === activeSortIndex ? '1' : '0.83'})`\r\n                    }\r\n                } else {\r\n                    /*纵向非卡片形式的轮播*/\r\n                    style.transform = `translateY(${duration * state.height}px)`\r\n                }\r\n\r\n                return style\r\n            },\r\n            /**\r\n             * 重置自动播放定时器\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:19\r\n             */\r\n            resetAutoplayTimer: (autoplay: number | null) => {\r\n                /*无论怎么样都要清理掉定时器*/\r\n                if (!!state.autoplayTimer) {\r\n                    clearInterval(state.autoplayTimer)\r\n                    state.autoplayTimer = null\r\n                }\r\n                /*如果autoplay有值，重新设定一个自动播放定时器*/\r\n                if (!!autoplay) {\r\n                    state.autoplayTimer = setInterval(methods.next, autoplay)\r\n                }\r\n            },\r\n            /**\r\n             * 子元素是否需要动画（当元素为3时，只有prevActiveIndex以及activeIndex的元素需要动画，另一个需要立刻移动到对应的位置）\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:20\r\n             */\r\n            isAnimating: (val: any) => {\r\n                if (vals.value.length !== 3 && !props.card) {\r\n                    return true\r\n                }\r\n                let index = vals.value.indexOf(val)\r\n                return index === state.prevActiveIndex || index === activeIndex.value\r\n            },\r\n        }\r\n\r\n        const methods = {\r\n            /**\r\n             * 显示上一个元素\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:21\r\n             */\r\n            prev: () => {\r\n                state.prevActiveIndex = activeIndex.value\r\n                model.value = sortVals.value[sortVals.value.indexOf(activeVal.value) - 1]!\r\n            },\r\n            /**\r\n             * 显示下一个元素\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:21\r\n             */\r\n            next: () => {\r\n                state.prevActiveIndex = activeIndex.value\r\n                model.value = sortVals.value[sortVals.value.indexOf(activeVal.value) + 1]!\r\n            },\r\n            /**\r\n             * 显示特定元素\r\n             * @author  韦胜健\r\n             * @date    2020/11/22 23:21\r\n             */\r\n            show: (val: any) => {\r\n                state.prevActiveIndex = activeIndex.value\r\n                model.value = val\r\n\r\n                utils.resetAutoplayTimer(props.autoplay)\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            onPrev: throttle(() => {\r\n                utils.resetAutoplayTimer(props.autoplay)\r\n                methods.prev()\r\n            }, 800, {trailing: true, leading: true}),\r\n            onNext: throttle(() => {\r\n                utils.resetAutoplayTimer(props.autoplay)\r\n                methods.next()\r\n            }, 800, {trailing: true, leading: true}),\r\n            onIndicator: (index: number) => {\r\n                methods.show(vals.value[index])\r\n            },\r\n        }\r\n\r\n        onMounted(() => {\r\n            state.width = refs.el.offsetWidth\r\n            state.height = refs.el.offsetHeight\r\n        })\r\n\r\n        watch(() => props.autoplay, utils.resetAutoplayTimer, {immediate: true})\r\n\r\n        return {\r\n            refer: {\r\n                utils,\r\n                methods,\r\n            },\r\n            render: () => (\r\n                <div class={classes.value} style={styles.value} ref=\"el\">\r\n                    {slots.default()}\r\n                    {slots.cover.isExist() && <div class=\"pl-carousel-cover\">\r\n                        {slots.cover()}\r\n                    </div>}\r\n\r\n                    {!props.disabledOperator && <div class=\"pl-carousel-operator\">\r\n                        <div class=\"pl-carousel-operator-btn pl-carousel-operator-prev\" onClick={handler.onPrev}>\r\n                            <pl-icon icon=\"el-icon-arrow-left\"/>\r\n                        </div>\r\n                        <div class=\"pl-carousel-operator-btn pl-carousel-operator-next\" onClick={handler.onNext}>\r\n                            <pl-icon icon=\"el-icon-arrow-right\"/>\r\n                        </div>\r\n                    </div>}\r\n\r\n                    {!props.disabledIndicator && <div class=\"pl-carousel-indicator\">\r\n                        {items.map((item, index) => (\r\n                            scopedSlots.indicator({val: String(item.itemVal.value), index, active: index === activeIndex.value}, (\r\n                                <div\r\n                                    {...{\r\n                                        [props.indicatorTrigger === 'hover' ? 'onMouseenter' : 'onClick']: () => handler.onIndicator(index)\r\n                                    }}\r\n                                    class={[\r\n                                        'pl-carousel-indicator-item',\r\n                                        {\r\n                                            'pl-carousel-indicator-item-active': index === activeIndex.value,\r\n                                        }\r\n                                    ]} key={index}/>\r\n                            ))\r\n                        ))}\r\n                    </div>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const CarouselCollector = useCollect(() => ({\r\n    parent: Carousel,\r\n    child: Item,\r\n}))","import {Carousel} from './carousel'\r\nimport CarouselItem from './carousel-item'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\n\r\nexport default createComponentPlugin(Carousel, {exposeComponents: {CarouselItem}})","import {reactive, computed, onBeforeUnmount, ComponentPublicInstance, getCurrentInstance} from 'vue';\r\nimport {useEdit} from \"../../../use/useEdit\";\r\nimport {PopperAgent, SpecificPopperServiceOption} from \"./utils\";\r\n\r\nexport type EditPopperAgent = ReturnType<typeof useEditPopperAgent>\r\n\r\nexport function useEditPopperAgent(\r\n    {\r\n        event: {emit},\r\n        serviceGetter,\r\n        option,\r\n    }: {\r\n        event: { emit: { onBlur: (e: Event) => void, onFocus: (e: Event) => void } },\r\n        serviceGetter: (ins: ComponentPublicInstance) => ((o: SpecificPopperServiceOption) => PopperAgent),\r\n        option: SpecificPopperServiceOption,\r\n    }) {\r\n\r\n    const ctx = getCurrentInstance()!\r\n    const {editComputed} = useEdit()\r\n\r\n    const state = reactive({\r\n        agent: null as null | PopperAgent,\r\n        focusCounter: 0,\r\n    })\r\n\r\n    const isShow = computed(() => !!state.agent && state.agent.isShow)\r\n    const isOpen = computed(() => !!state.agent && state.agent.isOpen)\r\n\r\n    const methods = {\r\n        show: async () => {\r\n            if (!editComputed.value.editable) return\r\n            if (isShow.value) return;\r\n            if (!state.agent) {\r\n                state.agent = await serviceGetter(ctx.proxy!)(option)\r\n            }\r\n            await state.agent.show()\r\n        },\r\n        hide: async () => {\r\n            if (!isShow.value) return\r\n            await state.agent!.hide()\r\n        },\r\n        toggle: async () => {\r\n            isShow.value ? methods.hide() : methods.show()\r\n        }\r\n    }\r\n\r\n    const inputHandler = {\r\n        onClickInput: async () => await methods.toggle(),\r\n        onBlur: async (e: Event) => {\r\n            state.focusCounter--\r\n            if (state.focusCounter === 0) {\r\n                emit.onBlur(e)\r\n                await methods.hide()\r\n            }\r\n        },\r\n        onFocus: (e: Event) => {\r\n            if (state.focusCounter === 0) {\r\n                emit.onFocus(e)\r\n            }\r\n            state.focusCounter = 1\r\n        },\r\n        onEsc: async () => {\r\n            await methods.hide()\r\n        },\r\n        onEnter: async (e: KeyboardEvent) => {\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n            await methods.show()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 当前组件示例销毁的时候，解除与service的绑定关系\r\n     * @author  韦胜健\r\n     * @date    2020/11/27 10:12\r\n     */\r\n    onBeforeUnmount(() => {\r\n        if (!!state.agent) {\r\n            state.agent.destroy()\r\n        }\r\n    })\r\n\r\n    return {\r\n        methods,\r\n        inputHandler,\r\n        state,\r\n        isShow,\r\n        isOpen,\r\n        editComputed,\r\n    }\r\n\r\n}","import {createAgentGetter} from \"../../popper/edit/createAgentGetter\";\r\nimport {App} from 'vue';\r\n\r\nexport const ColorPickerServiceGetter = createAgentGetter({\r\n    name: 'color-picker',\r\n    render(attrs: any) {\r\n        return <pl-color-panel{...attrs}/>\r\n    },\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n    },\r\n    defaultRenderAttrs: {\r\n        onChange() {this.hide()},\r\n    },\r\n})\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            beforeCreate(): void {\r\n                Object.defineProperty(this, '$colorPicker', {\r\n                    get() {\r\n                        const service = ColorPickerServiceGetter(this)\r\n                        return service\r\n                    },\r\n                })\r\n            }\r\n        })\r\n    },\r\n}","/*---------------------------------------rgb to hex-------------------------------------------*/\r\n\r\nconst INT_HEX_MAP = {10: 'A', 11: 'B', 12: 'C', 13: 'D', 14: 'E', 15: 'F'} as any;\r\n\r\nconst hexOne = function (value: number) {\r\n    value = Math.min(Math.round(value), 255);\r\n    const high = Math.floor(value / 16);\r\n    const low = value % 16;\r\n    return '' + (INT_HEX_MAP[high] || high) + (INT_HEX_MAP[low] || low);\r\n};\r\n\r\n/**\r\n * rgb -> hex\r\n * @author  韦胜健\r\n * @date    2020/4/4 8:58\r\n */\r\nexport const rgb2hex = function (r: number, g: number, b: number): string {\r\n    if (isNaN(r) || isNaN(g) || isNaN(b)) return '';\r\n    return '#' + hexOne(r) + hexOne(g) + hexOne(b);\r\n};\r\n\r\n/*---------------------------------------rgb to hsv-------------------------------------------*/\r\n\r\n/*是否为0.**形式的字符串*/\r\nconst isOnePointZero = function (n: string | number): boolean {\r\n    return typeof n === 'string' && n.indexOf('.') !== -1 && parseFloat(n) === 1;\r\n};\r\n\r\n/*是否为百分比字符串*/\r\nconst isPercentage = function (n: any): boolean {\r\n    return typeof n === 'string' && n.indexOf('%') !== -1;\r\n};\r\n\r\n/*将[0,n]转换为[0,1]*/\r\nconst bound01 = function (value: string | number, max: number): number {\r\n    if (isOnePointZero(value)) value = '100%';\r\n    const processPercent = isPercentage(value);\r\n    value = Math.min(max, Math.max(0, parseFloat(value as string)));\r\n    // Automatically convert percentage into number\r\n    if (processPercent) {\r\n        value = parseInt(String(value * max), 10) / 100;\r\n    }\r\n    // Handle floating point rounding errors\r\n    if ((Math.abs(value - max) < 0.000001)) {\r\n        return 1;\r\n    }\r\n    // Convert into [0, 1] range if it isn't already\r\n    return (value % max) / parseFloat(max as any as string);\r\n};\r\n\r\n/**\r\n * rgb -> hsv\r\n * @author  韦胜健\r\n * @date    2020/4/4 9:09\r\n */\r\nexport const rgb2hsv = function (r: number, g: number, b: number): { h: number, s: number, v: number } {\r\n    r = bound01(r, 255);\r\n    g = bound01(g, 255);\r\n    b = bound01(b, 255);\r\n\r\n    const max = Math.max(r, g, b);\r\n    const min = Math.min(r, g, b);\r\n    let h = 0, s = 0;\r\n    let v = max;\r\n\r\n    const d = max - min;\r\n    s = max === 0 ? 0 : d / max;\r\n\r\n    if (max === min) {\r\n        h = 0; // achromatic\r\n    } else {\r\n        switch (max) {\r\n            case r:\r\n                h = (g - b) / d + (g < b ? 6 : 0);\r\n                break;\r\n            case g:\r\n                h = (b - r) / d + 2;\r\n                break;\r\n            case b:\r\n                h = (r - g) / d + 4;\r\n                break;\r\n        }\r\n        h /= 6;\r\n    }\r\n    const ret = {h: h * 360, s: s * 100, v: v * 100} as any\r\n    Object.keys(ret).forEach(key => ret[key] = ret[key].toFixed(0) - 0)\r\n    return ret;\r\n};\r\n\r\n/*---------------------------------------hsv -> rgb-------------------------------------------*/\r\n/*\r\n *  hsv颜色值转rgb颜色值\r\n *  @author              martsforever\r\n *  @datetime           2019/2/16 22:43\r\n *  @param hue          色调，用角度度量，取值范围为0°～360°，从红色开始按逆时针方向计算，红色为0°，绿色为120°,蓝色为240°。它们的补色是：黄色为60°，青色为180°,品红为300°；\r\n *  @param saturation   饱和度，一种颜色，可以看成是某种光谱色与白色混合的结果。其中光谱色所占的比例愈大，颜色接近光谱色的程度就愈高，颜色的饱和度也就愈高。饱和度高，颜色则深而艳。光谱色的白光成分为0，饱和度达到最高。通常取值范围为0%～100%，值越大，颜色越饱和。\r\n *  @param value        明度，明度表示颜色明亮的程度，对于光源色，明度值与发光体的光亮度有关；对于物体色，此值和物体的透射比或反射比有关。通常取值范围为0%（黑）到100%（白）。\r\n */\r\nexport const hsv2rgb = function (hue: number, saturation: number, value: number): { r: number, g: number, b: number } {\r\n    hue = bound01(hue, 360) * 6;\r\n    saturation = bound01(saturation, 100);\r\n    value = bound01(value, 100);\r\n\r\n    const i = Math.floor(hue);\r\n    const f = hue - i;\r\n    const p = value * (1 - saturation);\r\n    const q = value * (1 - f * saturation);\r\n    const t = value * (1 - (1 - f) * saturation);\r\n    const mod = i % 6;\r\n    const r = [value, q, p, p, t, value][mod];\r\n    const g = [t, value, value, q, p, p][mod];\r\n    const b = [p, p, t, value, value, q][mod];\r\n\r\n    return {\r\n        r: Math.round(r * 255),\r\n        g: Math.round(g * 255),\r\n        b: Math.round(b * 255)\r\n    };\r\n};\r\n\r\n/*---------------------------------------other-------------------------------------------*/\r\n\r\nconst HEX_INT_MAP = {A: 10, B: 11, C: 12, D: 13, E: 14, F: 15} as any;\r\n\r\nexport const parseHexChannel = function (hex: string) {\r\n    if (hex.length === 2) {\r\n        return (HEX_INT_MAP[hex[0].toUpperCase()] || +hex[0]) * 16 + (HEX_INT_MAP[hex[1].toUpperCase()] || +hex[1]);\r\n    }\r\n\r\n    return HEX_INT_MAP[hex[1].toUpperCase()] || +hex[1];\r\n};\r\n\r\n/**\r\n * 判断是否为一个有效的颜色值\r\n * @author  韦胜健\r\n * @date    2020/4/7 11:32\r\n */\r\nexport function isEffectiveColorString(color: string): boolean {\r\n    if (!color) return true\r\n    if (color.indexOf('#') === 0 && /^#[0-9a-fA-F]{6}$/.test(color)) {\r\n        return true\r\n    } else if (color.indexOf('rgb') === 0 && /^rgb(\\(\\d{1,3}(,\\d{1,3}){2}|a\\(\\d{1,3}(,\\d{1,3}){2},(1\\.?0*|0\\.\\d+))\\)$/.test(color)) {\r\n        return true\r\n    }\r\n    return false\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Input from '../input'\r\nimport {reactive, watch, PropType} from 'vue';\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {ColorPickerServiceGetter} from \"./service/color-picker.service\";\r\nimport {isEffectiveColorString} from \"./utils/ColorUtils\";\r\nimport './color-picker.scss'\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {$$notice} from \"../notice-service\";\r\nimport ColorButton from './color-button'\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\n\r\nenum ColorPickerType {\r\n    input = 'input',\r\n    button = 'button',\r\n}\r\n\r\nexport const ColorPicker = designComponent({\r\n    name: 'pl-color-picker',\r\n    props: {\r\n        ...EditProps,\r\n        ...StyleProps,\r\n\r\n        modelValue: {type: String},                             // 当前颜色值\r\n        enableAlpha: {type: Boolean, default: true},            // 是否启用透明度\r\n        format: {type: String, default: 'hex'},                 // 颜色格式\r\n        type: {type: String as PropType<ColorPickerType>, default: ColorPickerType.input}\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | undefined) => true,\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        useStyle()\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n            button: ColorButton,\r\n        })\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {color: String, onClick: Function as PropType<() => void>},\r\n        }, true)\r\n\r\n        const model = useModel(() => props.modelValue, event.emit.onUpdateModelValue, {autoWatch: false})\r\n        const state = reactive({\r\n            val: model.value,\r\n            inputValue: props.modelValue,\r\n        })\r\n\r\n        const agentState = useEditPopperAgent({\r\n            event,\r\n            serviceGetter: ColorPickerServiceGetter,\r\n            option: {\r\n                reference: () => refs.input as any || refs.button || scopedSlotsOnClick.el,\r\n                renderAttrs: () => ({\r\n                    modelValue: state.val,\r\n                    enableAlpha: props.enableAlpha,\r\n                    format: props.format,\r\n\r\n                    onChange(val) {\r\n                        state.inputValue = val\r\n                        methods.emitValue(val)\r\n                    },\r\n                }),\r\n                popperAttrs: () => ({\r\n                    onMousedownPopper: async () => {\r\n                        agentState.state.focusCounter++\r\n                    },\r\n                    onClickPopper: () => {\r\n                        !!refs.input && refs.input.methods.focus()\r\n                    },\r\n                }),\r\n            },\r\n        })\r\n        const scopedSlotsOnClick = (() => {\r\n            const variable = {\r\n                el: null as null | HTMLDivElement,\r\n                onClick: (e: MouseEvent) => {\r\n                    variable.el = e.target as HTMLDivElement\r\n                    agentState.inputHandler.onClickInput()\r\n                }\r\n            }\r\n            return variable\r\n        })();\r\n\r\n        const methods = {\r\n            emitValue(val: any) {\r\n                model.value = val\r\n            },\r\n        }\r\n\r\n        const suffixIcon = () => (\r\n            <ColorButton\r\n                ref=\"button\"\r\n                color={state.val}\r\n                onClick={agentState.inputHandler.onClickInput}/>\r\n        )\r\n\r\n        const inputHandler = {\r\n            onChange: (val: string) => {\r\n                state.inputValue = val\r\n                if (isEffectiveColorString(val)) {\r\n                    methods.emitValue(val)\r\n                }\r\n            },\r\n            /*---------------------------------------override-------------------------------------------*/\r\n\r\n            onEnter: (e: KeyboardEvent) => {\r\n                if (!!state.inputValue && state.inputValue !== state.val) {\r\n                    $$notice.warn('请输入有效的颜色值')\r\n                    state.inputValue = state.val\r\n                }\r\n                agentState.inputHandler.onEnter(e)\r\n            },\r\n            onBlur: (e: Event) => {\r\n                agentState.state.focusCounter--\r\n                if (agentState.state.focusCounter === 0) {\r\n                    event.emit.onBlur(e)\r\n                    agentState.methods.hide()\r\n                    state.val = model.value\r\n                    state.inputValue = model.value\r\n                }\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            model.value = val\r\n            state.val = val\r\n            state.inputValue = val\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                return scopedSlots.default({\r\n                    color: state.val!,\r\n                    onClick: scopedSlotsOnClick.onClick,\r\n                }, (\r\n                    props.type === ColorPickerType.input ? (\r\n                        <pl-input ref=\"input\"\r\n                                  class=\"pl-color-picker\"\r\n                                  modelValue={state.inputValue}\r\n                                  suffixIcon={suffixIcon}\r\n                                  isFocus={agentState.state.focusCounter > 0}\r\n                                  {...{\r\n                                      ...agentState.inputHandler,\r\n                                      ...inputHandler,\r\n                                  }}/>\r\n                    ) : suffixIcon()\r\n                ))\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\n\r\nconst opacityBg = require('./sub/opacity.png')\r\n\r\nexport default designComponent({\r\n    name: 'pl-color-button',\r\n    props: {\r\n        color: {type: String}\r\n    },\r\n    emits: {\r\n        onClick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-button\" onClick={emit.onClick}>\r\n                    <div class=\"pl-color-button-background\" style={{backgroundImage: `url(${opacityBg})`}}>\r\n                        <div class=\"pl-color-button-color\" style={{backgroundColor: props.color}}/>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {hsv2rgb, parseHexChannel, rgb2hex, rgb2hsv} from \"./ColorUtils\";\r\n\r\nexport enum ColorFormat {\r\n    hex = 'hex',\r\n    rgb = 'rgb'\r\n}\r\n\r\nexport class Color {\r\n\r\n    red = 0                                             // 红\r\n    green = 0                                           // 绿\r\n    blue = 0                                            // 蓝\r\n\r\n    hue = 0                                             // 色相\r\n    saturation = 0                                      // 饱和度\r\n    val = 0                                             // 明亮度\r\n\r\n    alpha = 0                                           // 透明度\r\n    hex = ''                                            // 十六进制值\r\n    enableAlpha = false                                 // 是否启用透明度\r\n    format: ColorFormat = ColorFormat.hex               // 格式\r\n\r\n    _value?: string;                                    // 当前值，hex或者rgb字符串\r\n\r\n    /*当前rgb颜色值，如果启用透明度，则为rgba*/\r\n    get rgbColor(): string | undefined {\r\n        if (!this.red && !this.green && !this.blue) {\r\n            return undefined\r\n        }\r\n        return `rgb${this.enableAlpha ? 'a' : ''}(${this.red},${this.green},${this.blue}${this.enableAlpha ? ',' + (this.alpha / 100).toFixed(2) : ''})`\r\n    }\r\n\r\n    /*当前颜色，可能是rgb，也可能是hex*/\r\n    get currentColor(): string | undefined {\r\n        /*如果是带透明度的，强制使用rgb格式*/\r\n        return this.enableAlpha || this.format === 'rgb' ? this.rgbColor : this.hex\r\n    }\r\n\r\n    /*当前颜色值*/\r\n    get color(): string | undefined {\r\n        if (this._value == null) return undefined\r\n        return this.currentColor\r\n    }\r\n\r\n    constructor(value: string, enableAlpha: boolean, format: ColorFormat) {\r\n        if (format != null) {\r\n            this.format = format\r\n        }\r\n        if (enableAlpha != null) {\r\n            this.enableAlpha = enableAlpha\r\n        }\r\n\r\n        this.updateByString(value, true, enableAlpha)\r\n    }\r\n\r\n    /**\r\n     * 根据值更新color信息\r\n     * @author  韦胜健\r\n     * @date    2020/4/4 21:57\r\n     */\r\n    public setValue(value: string): void {\r\n        this.updateByString(value, false)\r\n    }\r\n\r\n    /**\r\n     * 根据新值更新当前color信息\r\n     * @author  韦胜健\r\n     * @date    2020/4/4 12:10\r\n     */\r\n    public updateByString(value: string, needInitializedEnableAlpha = false, enableAlpha?: boolean): void {\r\n        this._value = value\r\n        if (value == null) {\r\n            this.hue = 0\r\n            this.saturation = 0\r\n            this.val = 100\r\n            this.alpha = 100\r\n            return\r\n        }\r\n        /*如果输入值是rgb格式*/\r\n        if (value.indexOf('rgb') !== -1) {\r\n            const parts = value.replace(/rgba|rgb|\\(|\\)/gm, '').split(/\\s|,/g).filter((val) => val !== '').map((val, index) => index > 2 ? parseFloat(val) : parseInt(val, 10));\r\n            if (parts.length === 4) {\r\n                this.alpha = Math.floor(parseFloat(`${parts[3]}`) * 100);\r\n                needInitializedEnableAlpha && (enableAlpha == null) && (this.enableAlpha = true)\r\n            } else if (parts.length === 3) {\r\n                this.alpha = 100;\r\n                needInitializedEnableAlpha && (enableAlpha == null) && (this.enableAlpha = false)\r\n            }\r\n            if (parts.length >= 3) {\r\n                this.setRgb(parts[0], parts[1], parts[2])\r\n            }\r\n            return\r\n        }\r\n\r\n        /*如果是16进制格式*/\r\n        if (value.indexOf('#') !== -1) {\r\n            const hex = value.replace('#', '').trim();\r\n            if (hex.length === 8) {\r\n                this.alpha = Math.floor(parseHexChannel(hex.substring(6)) / 255 * 100);\r\n                needInitializedEnableAlpha && (enableAlpha == null) && (this.enableAlpha = true)\r\n            } else if (hex.length === 3 || hex.length === 6) {\r\n                this.alpha = 100;\r\n                needInitializedEnableAlpha && (enableAlpha == null) && (this.enableAlpha = false)\r\n            }\r\n            this.setHex(value)\r\n        }\r\n    }\r\n\r\n    /*\r\n   *  通过rgb设置当前颜色\r\n   *  @author     martsforever\r\n   *  @datetime   2019/2/17 19:49\r\n   */\r\n    setRgb(r: number, g: number, b: number): void {\r\n        this.red = r\r\n        this.green = g\r\n        this.blue = b\r\n\r\n        /*设置hsv*/\r\n        const {h, s, v} = rgb2hsv(r, g, b)\r\n        this.hue = h\r\n        this.saturation = s\r\n        this.val = v\r\n\r\n        /*设置hex*/\r\n        this.hex = rgb2hex(r, g, b)\r\n\r\n        this._value = this.currentColor\r\n    }\r\n\r\n    /*\r\n     *  根据当前rgb更新颜色\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:51\r\n     */\r\n    updateByRgb(): void {\r\n        this.setRgb(this.red, this.green, this.blue)\r\n    }\r\n\r\n    /*\r\n     *  通过十六进制色改变当前颜色\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:13\r\n     */\r\n    setHex(hex: string): void {\r\n        this.hex = hex\r\n\r\n        /*设置rgb*/\r\n        hex = hex.replace('#', '').trim();\r\n        if (hex.length === 3) {\r\n            this.red = parseHexChannel(hex[0] + hex[0]);\r\n            this.green = parseHexChannel(hex[1] + hex[1]);\r\n            this.blue = parseHexChannel(hex[2] + hex[2]);\r\n        } else if (hex.length === 6 || hex.length === 8) {\r\n            this.red = parseHexChannel(hex.substring(0, 2));\r\n            this.green = parseHexChannel(hex.substring(2, 4));\r\n            this.blue = parseHexChannel(hex.substring(4, 6));\r\n        }\r\n        if (hex.length === 8) {\r\n            this.alpha = Math.floor(parseHexChannel(hex.substring(6)) / 255 * 100);\r\n        } else if (hex.length === 3 || hex.length === 6) {\r\n            this.alpha = 100;\r\n        }\r\n\r\n        /*设置hsv*/\r\n        const {h, s, v} = rgb2hsv(this.red, this.green, this.blue)\r\n        this.hue = h\r\n        this.saturation = s\r\n        this.val = v\r\n\r\n        this._value = this.currentColor\r\n    }\r\n\r\n    /*\r\n     *  根据当前hex更新rgb以及hsv\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:23\r\n     */\r\n    updateByHex() {\r\n        this.setHex(this.hex)\r\n    }\r\n\r\n    /*\r\n     *  通过设置Hsv改变当前颜色\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:14\r\n     */\r\n    setHsv(hue: number, saturation: number, val: number) {\r\n        this.hue = hue\r\n        this.saturation = saturation\r\n        this.val = val\r\n\r\n        /*设置rgb*/\r\n        const {r, g, b} = hsv2rgb(hue, saturation, val)\r\n        this.red = r\r\n        this.green = g\r\n        this.blue = b\r\n\r\n        /*设置hex*/\r\n        this.hex = rgb2hex(r, g, b)\r\n\r\n        this._value = this.currentColor\r\n    }\r\n\r\n    /*\r\n     *  根据hsv更新当前rgbyijihex\r\n     *  @author     martsforever\r\n     *  @datetime   2019/2/17 19:23\r\n     */\r\n    updateByHsv() {\r\n        this.setHsv(this.hue, this.saturation, this.val)\r\n    }\r\n\r\n    updateByAlpha() {\r\n        this._value = this.currentColor\r\n    }\r\n}","import {designComponent} from \"../../../use/designComponent\";\r\nimport {EditProps} from \"../../../use/useEdit\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport {useProps} from \"../../../use/useProps\";\r\nimport {computed, nextTick, reactive, watch} from 'vue';\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport './color-alpha-slider.scss'\r\n\r\nconst bg = require('./opacity.png')\r\n\r\nexport const ColorAlphaSlider = designComponent({\r\n    name: 'pl-color-alpha-slider',\r\n    props: {\r\n        ...EditProps,\r\n\r\n        color: {type: String},                                      // 当前颜色\r\n        modelValue: {type: Number, default: 0},                     // 透明度\r\n        size: {type: [String, Number]},                             // 大小\r\n        thumbSize: {type: [String, Number], default: 10},           // 指示器宽度\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        const {propsState} = useProps(props, {\r\n            size: useProps.NUMBER,\r\n            thumbSize: useProps.NUMBER,\r\n        })\r\n\r\n        const state = reactive({\r\n            top: 0,\r\n            tempTop: 0,\r\n            startY: null as null | number,\r\n        })\r\n\r\n        const styles = computed(() => ({\r\n            height: unit(propsState.size),\r\n            backgroundImage: `url(${bg})`,\r\n        }))\r\n\r\n        const shadowStyles = computed(() => ({\r\n            background: `linear-gradient(to top, ${props.color}, rgba(255,255,255,0))`,\r\n        }))\r\n\r\n        const thumbStyles = computed(() => ({\r\n            top: `${state.top}px`,\r\n            width: unit(propsState.thumbSize)\r\n        }))\r\n\r\n        const height = computed(() => (propsState.size as number) - (propsState.thumbSize as number))\r\n\r\n        const methods = {\r\n            setTop: (top: number) => {\r\n                state.top = Math.max(0, Math.min(height.value, top))\r\n            },\r\n            emitValue: () => {\r\n                emit.onUpdateModelValue(Number((state.top / height.value * 100).toFixed(0)))\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                document.body.addEventListener('mousemove', handler.mousemove)\r\n                document.body.addEventListener('mouseup', handler.mouseup)\r\n                if (e.target === refs.el) {\r\n                    methods.setTop(e.offsetY - (propsState.thumbSize as number) / 2)\r\n                    methods.emitValue()\r\n                }\r\n                disabledUserSelect()\r\n                state.startY = e.clientY\r\n                state.tempTop = state.top\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                const durY = e.clientY - state.startY!\r\n                methods.setTop(state.tempTop + durY)\r\n                methods.emitValue()\r\n            },\r\n            mouseup: (e: MouseEvent) => {\r\n                document.body.removeEventListener('mousemove', handler.mousemove)\r\n                document.body.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            nextTick().then(() => methods.setTop(val / 100 * height.value))\r\n        }, {immediate: true})\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-alpha-slider\" style={styles.value as any} onMousedown={handler.mousedown} ref=\"el\">\r\n                    <div class=\"pl-color-alpha-shadow\" style={shadowStyles.value}/>\r\n                    <span class=\"pl-color-alpha-thumb\" style={thumbStyles.value as any}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import './color-hue-slider.scss'\r\nimport {designComponent} from \"../../../use/designComponent\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport {useProps} from \"../../../use/useProps\";\r\nimport {computed, nextTick, reactive, watch} from 'vue';\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\n\r\nexport const ColorHueSlider = designComponent({\r\n    name: 'pl-color-hue-slider',\r\n    props: {\r\n        modelValue: {type: Number, default: 0},                          // 当前色相\r\n        size: {type: [String, Number]},                             // 宽度\r\n        thumbSize: {type: [String, Number], default: 10},           // 指示器宽度\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n        const {propsState} = useProps(props, {\r\n            size: useProps.NUMBER,\r\n            thumbSize: useProps.NUMBER,\r\n        })\r\n\r\n        const state = reactive({\r\n            left: 0,                                                // 指示器左偏移位置\r\n            tempLeft: 0,                                            // 拖拽的时候，指示器的缓存左偏移位置\r\n            startX: null as null | number,                          // 拖拽的时候起始位置\r\n        })\r\n\r\n        const styles = computed(() => ({\r\n            width: unit(propsState.size)\r\n        }))\r\n\r\n        const thumbStyles = computed(() => ({\r\n            left: `${state.left}px`,\r\n            width: unit(propsState.thumbSize)\r\n        }))\r\n\r\n        const width = computed(() => (propsState.size as number) - (propsState.thumbSize as number))\r\n\r\n        const methods = {\r\n            setLeft: (left: number) => {\r\n                state.left = Math.max(0, Math.min(width.value, left))\r\n            },\r\n            emitValue: () => {\r\n                emit.onUpdateModelValue(Number((state.left / width.value * 360).toFixed(0)))\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                document.body.addEventListener('mousemove', handler.mousemove)\r\n                document.body.addEventListener('mouseup', handler.mouseup)\r\n                if (e.target === refs.el) {\r\n                    methods.setLeft(e.offsetX - (propsState.thumbSize as number) / 2)\r\n                    methods.emitValue()\r\n                }\r\n                disabledUserSelect()\r\n                state.startX = e.clientX\r\n                state.tempLeft = state.left\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                const durX = e.clientX - state.startX!\r\n                methods.setLeft(state.tempLeft + durX)\r\n                methods.emitValue()\r\n            },\r\n            mouseup: () => {\r\n                document.body.removeEventListener('mousemove', handler.mousemove)\r\n                document.body.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            nextTick().then(() => methods.setLeft(val / 360 * width.value))\r\n        }, {immediate: true})\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-hue-slider\" onMousedown={handler.mousedown} style={styles.value as any} ref=\"el\">\r\n                    <div class=\"pl-color-hue-slider-thumb\" style={thumbStyles.value as any}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import './color-sv-panel.scss'\r\nimport {designComponent} from \"../../../use/designComponent\";\r\nimport {useProps} from \"../../../use/useProps\";\r\nimport {computed, nextTick, reactive, watch} from 'vue';\r\nimport {hsv2rgb} from \"../utils/ColorUtils\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\n\r\nexport const ColorSvPanel = designComponent({\r\n    name: 'pl-color-sv-panel',\r\n    props: {\r\n        hue: {type: Number, default: 360},                      // 色相\r\n        saturation: {type: Number},                             // 饱和度\r\n        modelValue: {type: Number},                             // 亮度\r\n\r\n        height: {type: [String, Number], default: 180},         // 面板高度\r\n        width: {type: [String, Number], default: 240},          // 面板宽度\r\n    },\r\n    emits: {\r\n        onChange: (val: any) => true,\r\n        onDblclick: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {propsState} = useProps(props, {\r\n            height: useProps.NUMBER,\r\n            width: useProps.NUMBER,\r\n        })\r\n\r\n        const state = reactive({\r\n            val: props.modelValue == null ? null : 100 - Number(props.modelValue),\r\n            saturation: props.saturation,\r\n\r\n            startX: 0,\r\n            startY: 0,\r\n            tempSaturation: 0,\r\n            tempValue: 0,\r\n        })\r\n\r\n        const styles = computed(() => {\r\n            const color = hsv2rgb(props.hue, 100, 100)\r\n            return {\r\n                width: unit(propsState.width),\r\n                height: unit(propsState.height),\r\n                backgroundColor: `rgb(${color.r},${color.g},${color.b})`,\r\n            }\r\n        })\r\n\r\n        const thumbStyles = computed(() => {\r\n            let {val, saturation} = state\r\n            val = val == null ? 50 : val\r\n            saturation = saturation == null ? 50 : saturation\r\n\r\n            return {\r\n                transform: `translate3d(${saturation * (propsState.width as number) / 100}px,${val * (propsState.height as number) / 100}px,0)`,\r\n            }\r\n        })\r\n\r\n        const methods = {\r\n            updatePosition: (x: number, y: number, isMouseDown = true): void => {\r\n                const durX = Number((x / (propsState.width as number) * 100).toFixed(0));\r\n                const durY = Number((y / (propsState.height as number) * 100).toFixed(0));\r\n\r\n                state.saturation = (isMouseDown ? 0 : state.tempSaturation) + durX\r\n                state.val = (isMouseDown ? 0 : state.tempValue) + durY\r\n                state.saturation = Math.max(0, Math.min(100, state.saturation))\r\n                state.val = Math.max(0, Math.min(100, state.val))\r\n\r\n                emit.onChange({hue: props.hue, saturation: state.saturation, value: 100 - state.val})\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            mousedown: (e: MouseEvent) => {\r\n                document.body.addEventListener('mousemove', handler.mousemove)\r\n                document.body.addEventListener('mouseup', handler.mouseup)\r\n                disabledUserSelect()\r\n                methods.updatePosition(e.offsetX, e.offsetY)\r\n                state.startX = e.clientX\r\n                state.startY = e.clientY\r\n                state.tempSaturation = state.saturation as number\r\n                state.tempValue = state.val as number\r\n            },\r\n            mousemove: (e: MouseEvent) => {\r\n                methods.updatePosition(e.clientX - state.startX, e.clientY - state.startY, false)\r\n            },\r\n            mouseup: () => {\r\n                document.body.removeEventListener('mousemove', handler.mousemove)\r\n                document.body.removeEventListener('mouseup', handler.mouseup)\r\n                enableUserSelect()\r\n            },\r\n            dblclick: async (e: MouseEvent) => {\r\n                nextTick().then(() => emit.onDblclick(e))\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            if (val == null) {\r\n                state.val = null\r\n                return\r\n            }\r\n            if (state.val !== 100 - val) state.val = 100 - val\r\n        })\r\n        watch(() => props.saturation, (val) => {\r\n            if (val == null) {\r\n                state.saturation = undefined\r\n                return\r\n            }\r\n            if (state.saturation !== val) state.saturation = val\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-sv-panel\" style={styles.value as any} onMousedown={handler.mousedown} onDblclick={handler.dblclick}>\r\n                    <span class=\"pl-color-sv-thumb\" style={thumbStyles.value}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import './color-panel.scss'\r\nimport {designComponent} from \"../../use/designComponent\";\r\nimport {Color, ColorFormat} from \"./utils/Color\";\r\nimport {nextTick, reactive, watch} from 'vue';\r\nimport {isEffectiveColorString} from \"./utils/ColorUtils\";\r\nimport Input from '../input'\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {$$notice} from \"../notice-service\";\r\n\r\nfunction getDefaultColor(format: ColorFormat, enableAlpha: boolean) {\r\n    if (format === ColorFormat.hex) {\r\n        return '#12b4a5'\r\n    } else {\r\n        if (enableAlpha) {\r\n            return 'rgba(18,180,165,0.5)'\r\n        } else {\r\n            return 'rgb(18,180,165)'\r\n        }\r\n    }\r\n}\r\n\r\nexport const ColorPanel = designComponent({\r\n    name: 'pl-color-panel',\r\n    props: {\r\n        modelValue: {type: String},                      // 当前颜色值\r\n        enableAlpha: {type: Boolean},               // 是否启用透明度\r\n        format: {type: String},                     // 格式类型：hex、rgb\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any) => true,\r\n        onBblclickSvPanel: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n        })\r\n\r\n        const defaultColor = () => getDefaultColor(props.format as ColorFormat, props.enableAlpha as boolean)\r\n\r\n        const state = reactive({\r\n            val: props.modelValue,\r\n            color: new Color(\r\n                props.modelValue || defaultColor(),\r\n                props.enableAlpha as boolean,\r\n                props.format as ColorFormat\r\n            ),\r\n        })\r\n\r\n        const methods = {\r\n            reset: () => {\r\n                state.val = props.modelValue\r\n                state.color.setValue(props.modelValue || defaultColor())\r\n            },\r\n        }\r\n        const handler = {\r\n            svChange: ({value, saturation}: { value: number, saturation: number }) => {\r\n                state.color.val = value\r\n                state.color.saturation = saturation\r\n                state.color.updateByHsv()\r\n                state.val = state.color.color\r\n            },\r\n            hueChange: (hue: number) => {\r\n                state.color.hue = hue\r\n                state.color.updateByHsv()\r\n                state.val = state.color.color\r\n            },\r\n            alphaChange: (alpha: number) => {\r\n                state.color.alpha = alpha\r\n                state.color.updateByAlpha()\r\n                state.val = state.color.color\r\n            },\r\n            confirm: () => {\r\n                emit.onUpdateModelValue(state.val)\r\n            },\r\n            dblclickSvPanel: (e: MouseEvent) => {\r\n                handler.confirm()\r\n                emit.onBblclickSvPanel(e)\r\n            },\r\n            inputChange: (val: string) => {\r\n                if (!val) {\r\n                    state.color.setValue(val)\r\n                    state.val = state.color.color\r\n                    return\r\n                }\r\n                let formatVal = val.replace(/\\s/g, '')\r\n                if (!isEffectiveColorString(formatVal)) {\r\n                    return;\r\n                } else {\r\n                    state.color.setValue(formatVal)\r\n                    if (val !== formatVal) {\r\n                        refs.input!.model.value = formatVal\r\n                    }\r\n                    state.val = state.color.color\r\n                }\r\n            },\r\n            inputBlur: () => {\r\n                if (!!refs.input!.model.value && refs.input!.model.value !== state.color.color) {\r\n                    $$notice.warn('请输入正确的颜色值！')\r\n                    refs.input!.model.value = state.color.color\r\n                }\r\n            },\r\n            inputEnter: async () => {\r\n                await nextTick()\r\n                if (!!refs.input!.model.value && refs.input!.model.value !== state.color.color) {\r\n                    $$notice('请输入正确的颜色值！')\r\n                    refs.input!.model.value = state.color.color\r\n                } else {\r\n                    handler.confirm()\r\n                }\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------watch-------------------------------------------*/\r\n\r\n        watch(() => props.modelValue, (val) => {\r\n            state.color.setValue(val || defaultColor())\r\n            state.val = state.color.color\r\n        })\r\n\r\n        watch(() => props.enableAlpha, (val) => {\r\n            state.color.enableAlpha = val as boolean\r\n            state.color.updateByAlpha()\r\n        })\r\n\r\n        watch(() => props.format, (val) => {\r\n            state.color.format = val as ColorFormat || ColorFormat.hex\r\n            state.color.format === ColorFormat.hex ? state.color.updateByHex() : state.color.updateByRgb()\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-color-panel\">\r\n                    <div>\r\n                        <pl-color-sv-panel height=\"180\"\r\n                                           width=\"240\"\r\n                                           hue={state.color.hue}\r\n                                           modelValue={state.color.val}\r\n                                           saturation={state.color.saturation}\r\n                                           onChange={handler.svChange} onDblclick={handler.dblclickSvPanel}/>\r\n\r\n                        {state.color.enableAlpha && (\r\n                            <pl-color-alpha-slider\r\n                                size=\"180\"\r\n                                color={state.color.hex}\r\n                                modelValue={state.color.alpha}\r\n                                onChange={handler.alphaChange}/>\r\n                        )}\r\n                    </div>\r\n\r\n\r\n                    <pl-color-hue-slider size=\"240\"\r\n                                         modelValue={state.color.hue}\r\n                                         onInput={(val: number) => state.color.hue = val}\r\n                                         onChange={handler.hueChange}/>\r\n                    <div class=\"pl-color-panel-input-group\">\r\n                        <pl-input ref=\"input\"\r\n                                  size=\"mini\"\r\n                                  modelValue={state.val}\r\n                                  width={props.enableAlpha ? 204 : 186}\r\n                                  onChange={handler.inputChange}\r\n                                  onBlur={handler.inputBlur}\r\n                                  onEnter={handler.inputEnter}/>\r\n                        <pl-button-group size=\"mini\">\r\n                            <pl-button icon=\"el-icon-close-bold\" onClick={methods.reset}/>\r\n                            <pl-button icon=\"el-icon-check-bold\" onClick={handler.confirm}/>\r\n                        </pl-button-group>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {ColorPicker} from \"./color-picker\";\r\nimport {ColorAlphaSlider} from \"./sub/color-alpha-slider\";\r\nimport {ColorHueSlider} from \"./sub/color-hue-slider\";\r\nimport {ColorSvPanel} from \"./sub/color-sv-panel\";\r\nimport {ColorPanel} from \"./color-panel\";\r\nimport ColorButton from './color-button'\r\nimport ColorPickerService from './service/color-picker.service'\r\n\r\nexport default createComponentPlugin(ColorPicker, {\r\n    exposeComponents: {\r\n        ColorAlphaSlider,\r\n        ColorHueSlider,\r\n        ColorSvPanel,\r\n        ColorPanel,\r\n        ColorButton,\r\n    },\r\n    plugins: [ColorPickerService],\r\n    expose: {\r\n        ColorPickerService,\r\n    }\r\n})","import {CascadeConfig, CascadeMark} from \"./CascadMark\";\r\nimport {reactive} from 'vue';\r\n\r\nexport class CascadeNode {\r\n\r\n    state: {\r\n        data: Record<string, any>\r\n    }\r\n\r\n    constructor(\r\n        public key: string,\r\n        data: Record<string, any>,\r\n        public level: number,\r\n        public config: () => CascadeConfig,\r\n        public parentRef: () => (CascadeNode | null),\r\n        public markRef: () => CascadeMark,\r\n        public ctxState: () => {\r\n            expandKeys: string[],\r\n            filterText: string | undefined,\r\n        }\r\n    ) {\r\n        this.state = reactive({\r\n            data\r\n        })\r\n    }\r\n\r\n    selfGetter = () => this;\r\n\r\n    /*---------------------------------------prop-------------------------------------------*/\r\n\r\n    get data() {return this.state.data}\r\n\r\n    set data(val) {this.state.data = val}\r\n\r\n    /*节点显示文本*/\r\n    get label(): string {return this.data[this.config().labelField]}\r\n\r\n    /*节点子数据*/\r\n    get childrenData(): object[] | undefined {\r\n        const data = this.data[this.config().childrenField]\r\n        return typeof data === \"function\" ? data() : data\r\n    }\r\n\r\n    /*子节点*/\r\n    get children(): CascadeNode[] | undefined {\r\n        if (!this.childrenData) return undefined\r\n        return this.childrenData.map(child => this.markRef().node.get(\r\n            child,\r\n            this.level + 1,\r\n            this.selfGetter,\r\n        ))\r\n    }\r\n\r\n    /*是否为叶子节点（无子节点）*/\r\n    get isLeaf(): boolean {\r\n        const {isLeaf} = this.config()\r\n        if (!!isLeaf) {\r\n            return isLeaf(this)\r\n        } else {\r\n            return !this.children || this.children.length === 0\r\n        }\r\n    }\r\n\r\n    /*当前节点展开时包含的keys*/\r\n    get expandKeys(): string[] {\r\n        let expandKeys = [this.key]\r\n        let parent = this.parentRef()\r\n        while (!!parent && !!parent.key) {\r\n            expandKeys.unshift(parent.key)\r\n            parent = parent.parentRef()\r\n        }\r\n        return expandKeys\r\n    }\r\n\r\n    /*当前节点是否已经展开*/\r\n    get isExpand() {\r\n        let expandKeys = this.ctxState().expandKeys\r\n        let selfExpandKeys = this.expandKeys\r\n        return expandKeys.toString() === selfExpandKeys.toString()\r\n    }\r\n\r\n    /*当前是否处于加载状态*/\r\n    get isLoading(): boolean {\r\n        return this.markRef().loading.get(this.key)\r\n    }\r\n\r\n    get isLoaded(): boolean {\r\n        return this.markRef().loaded.get(this.key)\r\n    }\r\n\r\n    /*当前节点是否禁用*/\r\n    get nodeDisabled(): boolean {\r\n        const nodeDisabled = this.config().nodeDisabled\r\n        return !!nodeDisabled && nodeDisabled(this)\r\n    }\r\n\r\n    /*当有过滤文本时，显示的文本*/\r\n    get filterData(): CascadeNode[] {\r\n        let filterData: CascadeNode[] = [this]\r\n        let parent = this.parentRef()\r\n        while (!!parent && !!parent.key) {\r\n            filterData.unshift(parent)\r\n            parent = parent.parentRef()\r\n        }\r\n        return filterData\r\n    }\r\n\r\n    /*是否通过筛选，当子节点通过筛选时，当前节点也算通过筛选*/\r\n    get isPassFilter(): boolean {\r\n        const {filterText} = this.ctxState()\r\n        if (!filterText) return false\r\n\r\n        const {filterMethod} = this.config()\r\n        let filterData = this.filterData\r\n        if (!!filterMethod) {\r\n            return filterMethod(filterData, filterText)\r\n        }\r\n        return filterData.some(item => item.label.indexOf(filterText!) > -1)\r\n    }\r\n\r\n    /*---------------------------------------action-------------------------------------------*/\r\n\r\n    /*设置子节点数据*/\r\n    setChildren(children: object[]) {\r\n        // set(this.data, this.config().childrenField, children)\r\n        this.data[this.config().childrenField] = children\r\n    }\r\n\r\n    loading(val: boolean) {\r\n        this.markRef().loading.set(this.key, val)\r\n    }\r\n\r\n    loaded(val: boolean) {\r\n        this.markRef().loaded.set(this.key, val)\r\n    }\r\n}","/**\r\n * 创建一个用来管理key的对象\r\n * @author  韦胜健\r\n * @date    2020/11/27 11:38\r\n */\r\nexport function createKeyHandler(prefix: string) {\r\n    const map = new WeakMap<any, string>()\r\n    let count = 1\r\n    return (obj: any, keyField?: string | null): string => {\r\n        if (!!keyField) {\r\n            return obj[keyField]\r\n        }\r\n        let key = map.get(obj)\r\n        if (!key) {\r\n            key = `${prefix}_${count++}`\r\n            map.set(obj, key)\r\n        }\r\n        return String(key)\r\n    }\r\n}","import {reactive, UnwrapRef} from 'vue'\r\n\r\n/**\r\n * 给mark对象使用，用来创建管理flag的对象\r\n * @author  韦胜健\r\n * @date    2020/11/27 11:38\r\n */\r\nexport function createFlagManager<T = boolean>() {\r\n    return {\r\n        state: reactive({\r\n            map: {} as { [k: string]: T }\r\n        }),\r\n        get(key: string) {\r\n            return this.state.map[key]\r\n        },\r\n        set(key: string, val: UnwrapRef<T>) {\r\n            /*if (this.state.map.hasOwnProperty(key)) {\r\n                this.state.map[key] = val\r\n            } else {\r\n                set(this.state.map, key, val)\r\n            }*/\r\n            this.state.map[key] = val\r\n        },\r\n        getActiveKeys(): string[] {\r\n            const keys: string[] = []\r\n            for (let key in this.state.map) {\r\n                if (!!this.state.map[key]) {\r\n                    keys.push(key)\r\n                }\r\n            }\r\n            return keys\r\n        }\r\n    }\r\n}","import {CascadeNode} from \"./CascadeNode\";\r\nimport {reactive} from \"vue\";\r\nimport {createKeyHandler} from \"../../../utils/createKeyHandler\";\r\nimport {createFlagManager} from \"../../../utils/createFlagManager\";\r\n\r\nconst generator = createKeyHandler('cascade_node')\r\n\r\nexport interface CascadeConfig {\r\n    nodeDisabled?: (node: CascadeNode) => boolean,\r\n    isLeaf?: (node: CascadeNode) => boolean,\r\n    lazy?: boolean,\r\n    getChildren?: (node: CascadeNode, cb: (...args: any[]) => void) => void,\r\n    filterMethod?: (filterData: CascadeNode[], filterText: string) => boolean\r\n\r\n    labelField: string,\r\n    keyField: string,\r\n    childrenField: string,\r\n}\r\n\r\nexport class CascadeMark {\r\n\r\n    constructor(public config: () => CascadeConfig, public ctxState: () => {\r\n        expandKeys: string[],\r\n        filterText: string | undefined,\r\n    }) {}\r\n\r\n    selfGetter = () => this;\r\n\r\n    node = {\r\n        state: reactive({\r\n            map: {} as { [k: string]: CascadeNode }\r\n        }),\r\n        get: (\r\n            data: any,\r\n            level: number,\r\n            parentRef: () => (CascadeNode | null),\r\n        ): CascadeNode => {\r\n            const key = generator(data, this.config().keyField)\r\n            let node: CascadeNode = this.node.state.map[key]\r\n            if (!!node) {\r\n                if (node.data != data) {\r\n                    node.data = data\r\n                }\r\n                node.level = level\r\n                node.parentRef = parentRef\r\n            } else {\r\n                node = new CascadeNode(\r\n                    key,\r\n                    data,\r\n                    level,\r\n                    this.config,\r\n                    parentRef,\r\n                    this.selfGetter,\r\n                    this.ctxState,\r\n                )\r\n                this.node.state.map[key] = node\r\n            }\r\n            return node\r\n        },\r\n        getList: (list: any[] | undefined, level: number, parentRef: () => (CascadeNode | null)): CascadeNode[] => {\r\n            if (!list) return []\r\n            return list.map(item => this.node.get(item, level, parentRef))\r\n        }\r\n    }\r\n\r\n    loading = createFlagManager()\r\n    loaded = createFlagManager()\r\n\r\n}","import {designComponent} from \"../../../use/designComponent\";\r\nimport {CascadeNode} from \"../utils/CascadeNode\";\r\nimport {VNodeChild} from \"../../../shims\";\r\nimport {useScopedSlots} from \"../../../use/useScopedSlots\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {CascadeMark} from \"../utils/CascadMark\";\r\nimport {computed, PropType, reactive, ref} from 'vue';\r\nimport {debounce} from \"plain-utils/utils/debounce\";\r\nimport './cascade-panel.scss'\r\n\r\nexport const CascadePanelProps = {\r\n    modelValue: {type: Array},                                          // 数组，双向绑定值\r\n    data: {type: Array},                                                // 选择的数据\r\n    trigger: {type: String, default: 'click'},                           // 展开触发类型：click，hover\r\n    hoverDebounce: {type: Number, default: 150},                        // 触发器为hover的时候，防抖时间间隔\r\n    emptyText: {type: String, default: '暂无数据'},                      // 没有子节点时展示的文本\r\n    nodeDisabled: {type: Function as PropType<(node: CascadeNode) => boolean>},// 是否禁用判断函数\r\n    renderContent: {type: Function as PropType<(data: { node: CascadeNode, index: number }) => VNodeChild>},// 渲染内容的渲染函数\r\n    selectBranch: {type: Boolean},                                      // 点击分支的时候也能够触发 change 事件\r\n    /*---------------------------------------separator-------------------------------------------*/\r\n    isLeaf: {type: Function as PropType<(node: CascadeNode) => boolean>},// 函数，用来判断是否为叶子节点，默认根据节点是否存在子节点来判断是否为叶子节点，懒加载模式下，改属性为必需属性\r\n    lazy: {type: Boolean},                                              // 数据是否为懒加载\r\n    getChildren: {type: Function as PropType<(node: CascadeNode | null, cb: (...args: any[]) => void) => any>},// 懒加载数据函数\r\n    /*---------------------------------------separator-------------------------------------------*/\r\n    labelField: {type: String, required: true},                         // 记录显示文本的字段名\r\n    keyField: {type: String, required: true},                           // 记录值的字段名\r\n    childrenField: {type: String, required: true},                      // 记录的子节点数据的字段名\r\n    /*---------------------------------------separator-------------------------------------------*/\r\n    filterText: {type: String},                                         // 筛选文本\r\n    filterMethod: {type: Function as PropType<(nodes: CascadeNode[], filterText: string) => boolean>},// 自定义筛选函数/\r\n}\r\n\r\nexport default designComponent({\r\n    name: 'pl-cascade-panel',\r\n    props: CascadePanelProps,\r\n    emits: {\r\n        onUpdateModelValue: (val: any, expandNodes?: CascadeNode[]) => true,\r\n        onClickItem: (data: { node: CascadeNode, index: number }) => true,\r\n        onGetChildren: (...args: any[]) => true,\r\n        onUpdateData: (val: any) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {node: CascadeNode, index: Number}\r\n        })\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoEmit: false})\r\n        const data = useModel(() => props.data, emit.onUpdateData)\r\n        const expandKeys = ref([] as string[])\r\n        const state = reactive({\r\n            loading: false,\r\n            expandKeys,\r\n            cascadeMark: new CascadeMark(\r\n                () => ({\r\n                    nodeDisabled: props.nodeDisabled,\r\n                    isLeaf: props.isLeaf,\r\n                    lazy: props.lazy,\r\n                    getChildren: props.getChildren,\r\n                    filterMethod: props.filterMethod,\r\n\r\n                    labelField: props.labelField!,\r\n                    keyField: props.keyField!,\r\n                    childrenField: props.childrenField!,\r\n                }),\r\n                () => ({\r\n                    expandKeys: expandKeys.value,\r\n                    filterText: props.filterText,\r\n                })\r\n            )\r\n        })\r\n\r\n        const formatData = computed(() => state.cascadeMark.node.getList(data.value, 1, () => null))\r\n        const cascadeData = computed(() => {\r\n            const data = formatData.value || []\r\n            if (data.length === 0) return []\r\n            let expandKeys: string[] = []\r\n            if (!!state.expandKeys && state.expandKeys.length > 0) {\r\n                expandKeys = state.expandKeys\r\n            } else if (!!model.value && model.value.length > 0 && !props.lazy) {\r\n                expandKeys = model.value as string[]\r\n            }\r\n\r\n            let children = data as CascadeNode[]\r\n            let cascadeData: CascadeNode[][] = []\r\n\r\n            cascadeData.push(children)\r\n\r\n            expandKeys.forEach((key: string) => {\r\n                for (let i = 0; i < children.length; i++) {\r\n                    const child = children[i];\r\n                    if (child.key === key && !child.isLeaf) {\r\n                        children = child.children || []\r\n                        cascadeData.push(children)\r\n                        break\r\n                    }\r\n                }\r\n            })\r\n            return cascadeData\r\n        })\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            /**\r\n             * 检查props是否合法\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 18:48\r\n             */\r\n            checkProps() {\r\n                if (!props.data) return true\r\n                if (!props.keyField) {\r\n                    console.error('pl-cascade 的 keyField属性不能为空，每一条记录必须要有一个key标识')\r\n                    return false\r\n                }\r\n                if (!props.childrenField) {\r\n                    console.error('pl-cascade 的 childrenKey不能为空')\r\n                    return false\r\n                }\r\n                return true\r\n            },\r\n            iterateAll: (nodes: CascadeNode[], fn: Function, iterateChildren?: Function) => {\r\n                if (!nodes) return\r\n                nodes.forEach(node => {\r\n                    fn(node)\r\n                    if (!!node.children && (!iterateChildren || iterateChildren(node))) {\r\n                        utils.iterateAll(node.children, fn, iterateChildren)\r\n                    }\r\n                })\r\n            },\r\n            getChildrenAsync(node: CascadeNode | null): Promise<CascadeNode[]> {\r\n                return new Promise((resolve) => {\r\n                    if (!node) {\r\n                        state.loading = true\r\n                    } else {\r\n                        node.loading(true)\r\n                    }\r\n                    props.getChildren!(node, (...results: any[]) => {\r\n                        if (!node) {\r\n                            state.loading = false\r\n                        } else {\r\n                            node.loading(false)\r\n                            node.loaded(true)\r\n                        }\r\n                        emit.onGetChildren(...results)\r\n                        resolve(...results)\r\n                    })\r\n                })\r\n            },\r\n            async initLazy() {\r\n                if (!props.lazy) {\r\n                    return\r\n                }\r\n                data.value = await utils.getChildrenAsync(null)\r\n            },\r\n        }\r\n\r\n        const filterData = computed(() => {\r\n            let filterData: CascadeNode[][] = []\r\n            utils.iterateAll((formatData.value || []) as CascadeNode[], (node: CascadeNode) => {\r\n                if (node.isPassFilter && (node.isLeaf || props.selectBranch)) {\r\n                    filterData.push(node.filterData)\r\n                }\r\n            })\r\n            return filterData\r\n        })\r\n\r\n        const expandNodes = computed(() => {\r\n            if (!state.expandKeys) return []\r\n            let result: CascadeNode[] = []\r\n            let nodes = formatData.value || []\r\n\r\n            state.expandKeys.forEach((key: string) => {\r\n                for (let i = 0; i < nodes.length; i++) {\r\n                    const child = nodes[i];\r\n                    if (child.key === key) {\r\n                        result.push(child)\r\n                        if (!child.children || child.children.length === 0) {\r\n                            break\r\n                        } else {\r\n                            nodes = child.children\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            return result\r\n        })\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            mouseenterItem: debounce((node: CascadeNode) => {\r\n                if (props.trigger === 'hover') {\r\n                    methods.expand(node)\r\n                }\r\n            }, props.hoverDebounce),\r\n            clickItem: async (node: CascadeNode, index: number) => {\r\n                if (props.trigger === 'click') {\r\n                    await methods.expand(node)\r\n                }\r\n\r\n                if (node.nodeDisabled) return\r\n                if (node.isLeaf || props.selectBranch) {\r\n                    model.value = state.expandKeys\r\n                    emit.onUpdateModelValue(model.value as string[], expandNodes.value as CascadeNode[])\r\n                }\r\n                emit.onClickItem({node, index})\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            expand: async (node: CascadeNode) => {\r\n                if (!node.isExpand) {\r\n                    state.expandKeys = node.expandKeys\r\n\r\n                    if (\r\n                        props.lazy &&                                               // 懒加载模式\r\n                        !node.isLoaded &&                                           // 未曾加载过子节点数据\r\n                        !node.isLeaf                                                // 节点不是叶子节点\r\n                    ) {\r\n                        const children = await utils.getChildrenAsync(node)\r\n                        node.setChildren(children || [])\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        utils.initLazy()\r\n\r\n        return {\r\n            refer: {\r\n                ...methods,\r\n            },\r\n            render: () => {\r\n                const empty = (\r\n                    <pl-item class=\"pl-cascade-item pl-cascade-empty\" key=\"empty\" block>\r\n                        <pl-icon icon=\"el-icon-nodata\"/>\r\n                        {props.emptyText}\r\n                    </pl-item>\r\n                )\r\n\r\n                const filterList = (\r\n                    <pl-item class=\"pl-cascade-list pl-cascade-filter-list\" key={0}>\r\n                        <pl-scroll>\r\n                            <pl-list>\r\n                                {(!filterData.value || filterData.value.length === 0) && empty}\r\n                                {filterData.value.map((nodes) => (\r\n                                    <pl-item block\r\n                                             class={[\r\n                                                 'pl-cascade-item',\r\n                                                 {\r\n                                                     'pl-cascade-item-active': !!model.value && model.value.toString() === nodes.map(node => node.key).toString(),\r\n                                                     'pl-cascade-item-disabled': nodes.some(node => node.nodeDisabled),\r\n                                                 }\r\n                                             ]}\r\n                                             key={nodes.map(node => node.key).join(' ')}\r\n                                             {...{\r\n                                                 onClick: () => {\r\n                                                     handler.clickItem(nodes[nodes.length - 1], -1)\r\n                                                 },\r\n                                             }}>\r\n                                        <div class=\"pl-cascade-content\">\r\n                                            {nodes.map(node => node.label).join(' / ')}\r\n                                        </div>\r\n                                    </pl-item>\r\n                                ))}\r\n                            </pl-list>\r\n                        </pl-scroll>\r\n                    </pl-item>\r\n                )\r\n\r\n                const cascadeList = cascadeData.value.map((list, listIndex) => (\r\n                    <pl-item class=\"pl-cascade-list\" key={listIndex} v-loading={listIndex > 0 && state.cascadeMark.loading.get(state.expandKeys[listIndex - 1])}>\r\n                        <pl-scroll>\r\n                            <pl-list>\r\n                                {list.map((node, nodeIndex) => (\r\n                                    <pl-item block\r\n                                             class={[\r\n                                                 'pl-cascade-item',\r\n                                                 {\r\n                                                     'pl-cascade-item-expand': node.key === state.expandKeys[listIndex],\r\n                                                     'pl-cascade-item-active': !!model.value && model.value[listIndex] === node.key,\r\n                                                     'pl-cascade-item-disabled': node.nodeDisabled,\r\n                                                 }\r\n                                             ]}\r\n                                             key={node.key}\r\n\r\n                                             {...{\r\n                                                 onClick: () => handler.clickItem(node, nodeIndex),\r\n                                                 ...(props.trigger === 'hover' ? {\r\n                                                     onMouseenter: () => handler.mouseenterItem(node),\r\n                                                 } : {})\r\n                                             }}>\r\n                                        <div class=\"pl-cascade-content\">\r\n                                            {scopedSlots.default({node, index: nodeIndex}, (\r\n                                                !!props.renderContent ? props.renderContent({node, index: nodeIndex}) : node.label\r\n                                            ))}\r\n                                            {!node.isLeaf && (\r\n                                                <div class=\"pl-cascade-arrow\">\r\n                                                    {node.isLoading ? <pl-loading type=\"gamma\" status=\"primary\"/> : <pl-icon icon=\"el-icon-arrow-right\"/>}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    </pl-item>\r\n                                ))}\r\n                                {list.length === 0 && (\r\n                                    <pl-item class=\"pl-cascade-item pl-cascade-empty\" key=\"empty\" block>\r\n                                        <pl-icon icon=\"el-icon-nodata\"/>\r\n                                        {props.emptyText}\r\n                                    </pl-item>\r\n                                )}\r\n                            </pl-list>\r\n                        </pl-scroll>\r\n                    </pl-item>\r\n                ))\r\n\r\n                const isEmpty = !!props.filterText ? (filterData.value.length === 0) : (cascadeData.value.length === 0)\r\n\r\n                return (\r\n                    <div class=\"pl-cascade-panel\" v-loading={state.loading}>\r\n                        {!!props.filterText ? filterList : (\r\n                            <pl-list>\r\n                                {isEmpty ? (\r\n                                    <div class=\"pl-cascade-list\" key=\"empty\">\r\n                                        {empty}\r\n                                    </div>\r\n                                ) : cascadeList}\r\n                            </pl-list>\r\n                        )}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","/**\r\n * 拖拽放置的类型\r\n * @author  韦胜健\r\n * @date    2020/4/1 17:15\r\n */\r\nexport enum TreeDropType {\r\n    prev = 'prev',\r\n    inner = 'inner',\r\n    next = 'next',\r\n    null = 'null',\r\n}\r\n\r\nexport const enum TreeNodeCheckStatus {\r\n    check = 'check',\r\n    uncheck = 'uncheck',\r\n    minus = 'minus',\r\n}","import {createAgentGetter} from \"../../popper/edit/createAgentGetter\";\r\nimport './cascade-service.scss'\r\nimport {App} from 'vue';\r\nimport {delay} from 'plain-utils/utils/delay';\r\n\r\nexport const CascadeServiceGetter = createAgentGetter({\r\n    name: 'cascade',\r\n    render(attrs) {\r\n        return <pl-cascade-panel {...attrs}/>\r\n    },\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n    },\r\n    defaultRenderAttrs: {\r\n        async onChange() {\r\n            let renderAttrs: any = this.state.option.serviceOption.renderAttrs\r\n            if (typeof renderAttrs === \"function\") renderAttrs = renderAttrs()\r\n            if (!renderAttrs.selectBranch) {\r\n                // 因为change之后，会引发 cascade panels 重新渲染没有宽度以及高度，导致过度动画失效，这里再change之后延迟再关闭\r\n                await delay(120)\r\n                this.hide()\r\n            }\r\n        },\r\n    },\r\n})\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            beforeCreate(): void {\r\n                Object.defineProperty(this, '$cascade', {\r\n                    get() {\r\n                        const service = CascadeServiceGetter(this)\r\n                        return service\r\n                    },\r\n                })\r\n            }\r\n        })\r\n    },\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {CascadePanelProps} from \"./panel/cascade-panel\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Input from '../input'\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {CascadeNode} from \"./utils/CascadeNode\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {computed, PropType, reactive, watch} from 'vue';\r\nimport {CascadeMark} from \"./utils/CascadMark\";\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {CascadeServiceGetter} from \"./service/cascade-service\";\r\nimport {ie} from \"plain-utils/utils/ie\";\r\nimport './cascade.scss'\r\n\r\nexport default designComponent({\r\n    name: 'pl-cascade',\r\n    props: {\r\n        ...CascadePanelProps,\r\n\r\n        showLast: {type: Boolean},                                          // 只显示最后一级节点文本\r\n        separator: {type: String, default: ' / '},                          // 显示值分隔符\r\n        filterable: {type: Boolean, default: true},                         // 是否可筛选\r\n        showFormat: {type: Function as PropType<(value: any[]) => string>}, // 显示值格式化函数\r\n\r\n        inputAttrs: {type: Object},                                         // 输入框属性值\r\n\r\n        ...StyleProps,\r\n        ...EditProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: any, expandNodes?: CascadeNode[]) => true,\r\n        onClickItem: (data: { node: CascadeNode, index: number }) => true,\r\n        onGetChildren: (...args: any[]) => true,\r\n        onUpdateData: (val: any) => true,\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        useStyle()\r\n        const {refs} = useRefs({\r\n            input: Input,\r\n        })\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {node: CascadeNode, index: Number}\r\n        }, true)\r\n\r\n        /*之所以不自动派发事件，是因为派发事件的时候需要多传一个nodes值*/\r\n        const model = useModel(() => props.modelValue, event.emit.onUpdateModelValue, {autoEmit: false})\r\n        const data = useModel(() => props.data, event.emit.onUpdateData)\r\n\r\n        const state = reactive({\r\n            inputValue: null as null | string,\r\n            cacheData: {} as { [key: string]: object[] },\r\n            expandKeys: [] as string[],\r\n        })\r\n\r\n        const cascadeMark = computed(() => new CascadeMark(\r\n            () => ({\r\n                nodeDisabled: props.nodeDisabled,\r\n                isLeaf: props.isLeaf,\r\n                lazy: props.lazy,\r\n                getChildren: props.getChildren,\r\n                filterMethod: props.filterMethod,\r\n\r\n                labelField: props.labelField!,\r\n                keyField: props.keyField!,\r\n                childrenField: props.childrenField!,\r\n            }),\r\n            () => ({\r\n                expandKeys: state.expandKeys,\r\n                filterText: '',\r\n            })\r\n        ))\r\n\r\n        const agentState = useEditPopperAgent({\r\n            event,\r\n            serviceGetter: CascadeServiceGetter,\r\n            option: {\r\n                reference: () => refs.input as any,\r\n                renderAttrs: () => ({\r\n                    ...props,\r\n                    modelValue: model.value,\r\n                    filterText: state.inputValue,\r\n                    getChildren: utils.getChildren,\r\n                    renderContent: utils.renderContent,\r\n\r\n                    onChange: handler.onServiceChange,\r\n                    onClickItem: event.emit.onClickItem,\r\n                    onGetChildren: event.emit.onGetChildren,\r\n                    onUpdateData: event.emit.onUpdateData,\r\n                }),\r\n                popperAttrs: {\r\n                    onMousedownPopper: () => agentState.state.focusCounter++,\r\n                    onClickPopper: () => refs.input!.methods.focus(),\r\n                    onHide: () => state.inputValue = null,\r\n                },\r\n            },\r\n        })\r\n\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            getChildren: (node: CascadeNode | null, resolve: Function) => {\r\n                let key = !!node ? node.key : 'root'\r\n                if (state.cacheData[key]) {\r\n                    resolve(state.cacheData[key])\r\n                } else {\r\n                    props.getChildren!(node, (data) => {\r\n                        state.cacheData[key] = data\r\n                        resolve(data)\r\n                    })\r\n                }\r\n            },\r\n            /**\r\n             * 检查props是否合法\r\n             * @author  韦胜健\r\n             * @date    2020/3/30 18:48\r\n             */\r\n            checkProps() {\r\n                if (!props.data) return true\r\n                if (!props.keyField) {\r\n                    console.error('pl-cascade 的 keyField属性不能为空，每一条记录必须要有一个key标识')\r\n                    return false\r\n                }\r\n                if (!props.childrenField) {\r\n                    console.error('pl-cascade 的 childrenKey不能为空')\r\n                    return false\r\n                }\r\n                return true\r\n            },\r\n            renderContent: (scopedSlots.default.isExist() || !!props.renderContent) ? ({node, index}: { node: CascadeNode, index: number }) => {\r\n                if (scopedSlots.default.isExist()) return scopedSlots.default({node, index})\r\n                if (!!props.renderContent) return props.renderContent({node, index})\r\n            } : null\r\n        }\r\n\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const classes = computed(() => ([\r\n            'pl-cascade',\r\n            {\r\n                'pl-cascade-open': agentState.isShow.value,\r\n            }\r\n        ]))\r\n\r\n        const formatData = computed(() => cascadeMark.value.node.getList(data.value, 1, () => null))\r\n\r\n        const showValue = computed(() => {\r\n            if (!model.value) return null\r\n            if (!!props.showFormat) return props.showFormat(model.value)\r\n\r\n            let result: string[] = []\r\n            let list = formatData.value || []\r\n            for (let i = 0; i < model.value.length; i++) {\r\n                const sourceKey = model.value[i];\r\n                let flag = false\r\n                for (let j = 0; j < list.length; j++) {\r\n                    const target = list[j];\r\n                    if (sourceKey === target.key) {\r\n                        result.push(target.label)\r\n                        list = target.children || []\r\n                        flag = true\r\n                        break\r\n                    }\r\n                }\r\n                if (!flag) {\r\n                    result = [...result, ...(model.value.slice(i)) as string[]]\r\n                    break\r\n                }\r\n            }\r\n            if (props.showLast && result.length > 0) {\r\n                return result[result.length - 1]\r\n            }\r\n            return result.join(' / ')\r\n        })\r\n\r\n\r\n        const handler = {\r\n            clear: () => {\r\n                model.value = undefined\r\n                event.emit.onUpdateModelValue(model.value)\r\n\r\n                state.inputValue = null\r\n                refs.input!.methods.focus()\r\n            },\r\n            onServiceChange: (val: any, nodes: CascadeNode[]) => {\r\n                model.value = val\r\n                event.emit.onUpdateModelValue(val, nodes)\r\n            },\r\n            onInputChange: (val: string) => {\r\n                state.inputValue = val\r\n                if (!agentState.isShow.value && !ie) {\r\n                    agentState.methods.show()\r\n                }\r\n            },\r\n        }\r\n\r\n        watch(() => props.modelValue, () => {state.inputValue = null})\r\n\r\n        return {\r\n            render: () => (\r\n                <pl-input\r\n                    ref=\"input\"\r\n                    class={classes.value}\r\n                    clearIcon\r\n                    suffixIcon=\"el-icon-d-arrow-right\"\r\n                    modelValue={(agentState.isShow.value && props.filterable) ? state.inputValue : showValue.value}\r\n                    placeValue={showValue.value}\r\n                    placeholder={((agentState.isShow.value && props.filterable) ? showValue.value : (!!props.inputAttrs ? props.inputAttrs!.placeholder : null)) || ''}\r\n                    clearHandler={handler.clear}\r\n                    inputReadonly={!props.filterable}\r\n                    isFocus={agentState.state.focusCounter > 0}\r\n\r\n                    onChange={handler.onInputChange}\r\n                    {...agentState.inputHandler}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import cascade from './cascade'\r\nimport panel from './panel/cascade-panel'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport CascadeService from './service/cascade-service'\r\n\r\nconst CascadePanel = createComponentPlugin(panel)\r\n\r\nexport default createComponentPlugin(cascade, {\r\n    exposeComponents: {\r\n        CascadePanel,\r\n    },\r\n    plugins: [\r\n        CascadeService\r\n    ],\r\n    expose: {\r\n        CascadeService,\r\n    },\r\n})","import {SimpleObject} from \"../../../shims\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {TreeNodeCheckStatus} from \"../utils/tree-constant\";\r\nimport {computed, onBeforeUnmount, reactive, watchEffect} from 'vue';\r\nimport {throttle} from \"plain-utils/utils/throttle\";\r\n\r\n/**\r\n * 根据childrenField遍历data树形数据\r\n * @author  韦胜健\r\n * @date    2020/12/2 12:22\r\n */\r\nfunction iteratorTreeData({data, childrenField}: { data?: SimpleObject[], childrenField: string }) {\r\n    if (!!data) {\r\n        data.forEach(item => {\r\n            if (!!item[childrenField]) {\r\n                iteratorTreeData({data: item[childrenField], childrenField})\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport function useTreeNode<Node extends {\r\n    key: string,\r\n    data: SimpleObject,\r\n    level: number,\r\n    parentRef: () => Node | null,\r\n    selfRef: () => Node,\r\n\r\n    index: number,\r\n\r\n    readonly childrenData?: SimpleObject[]\r\n    readonly label?: string,\r\n    children?: Node[],\r\n    readonly checkStatus: TreeNodeCheckStatus,\r\n\r\n    expand: boolean,\r\n    check: boolean,\r\n    loading: boolean,\r\n    loaded: boolean,\r\n\r\n    readonly isCheckable: boolean,\r\n    readonly isLeaf: boolean,\r\n    readonly isVisible: boolean,\r\n}>(\r\n    {\r\n        props,\r\n        event,\r\n        keyManager,\r\n        getTreeNodeByDataAdjust,\r\n    }: {\r\n        props: {\r\n            data?: SimpleObject[],\r\n            labelField?: string,\r\n            keyField?: string,\r\n            childrenField?: string,\r\n            filterNodeMethod?: (node: Node) => boolean,\r\n            isLeaf?: (node: Node) => boolean,\r\n            isCheckable?: (node: Node) => boolean,\r\n            getChildren?: (node: Node, cb: (data: SimpleObject[]) => void) => void,\r\n            lazy?: boolean,\r\n            showCheckbox?: boolean,\r\n            checkStrictly?: boolean,\r\n        },\r\n        event: {\r\n            emit: { onUpdateData: (data?: SimpleObject[]) => void }\r\n        },\r\n        keyManager: (obj: any, keyField: string | undefined | null) => string,\r\n        getTreeNodeByDataAdjust?: (node: Node) => void,\r\n    }\r\n) {\r\n\r\n    /*内部data变量*/\r\n    const dataModel = useModel(() => props.data, event.emit.onUpdateData)\r\n\r\n\r\n    /**\r\n     * 因为滚动的时候会频繁获取checkStatus，而这个属性又是计算量比较大的属性，这里作为计算属性统一计算\r\n     * @author  韦胜健\r\n     * @date    2020/12/2 14:07\r\n     */\r\n    const checkStatus = computed(() => {\r\n        const map = {} as Record<string, TreeNodeCheckStatus>\r\n        if (!props.showCheckbox || !state.root) {\r\n            return map\r\n        }\r\n        utils.iterate({\r\n            nodes: state.root.children,\r\n            iterateChildrenFirst: true,\r\n            handler: node => {\r\n                if (props.checkStrictly || node.isLeaf) {\r\n                    map[node.key] = node.check ? TreeNodeCheckStatus.check : TreeNodeCheckStatus.uncheck\r\n                } else {\r\n                    if (node.check) {\r\n                        map[node.key] = TreeNodeCheckStatus.check\r\n                    } else {\r\n                        if (!!node.children && node.children.every(child => map[child.key] === TreeNodeCheckStatus.uncheck)) {\r\n                            map[node.key] = TreeNodeCheckStatus.uncheck\r\n                        } else {\r\n                            map[node.key] = TreeNodeCheckStatus.minus\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return map\r\n    })\r\n\r\n    const utils = {\r\n        /*根据data获取Node*/\r\n        getTreeNodeByData: (() => {\r\n            const map = new WeakMap<object, Node>()\r\n            const get = ({data, level, parentRef, adjust}: { data: any, level: number, parentRef: () => Node, adjust?: (node: Node) => void }): Node => {\r\n                let node: Node | undefined = map.get(data)\r\n                if (!node) {\r\n                    node = {\r\n                        index: 0,\r\n                        key: keyManager(data, props.keyField),\r\n                        data,\r\n                        level,\r\n                        parentRef,\r\n                        selfRef() {return this},\r\n                        empty: false,\r\n                        children: [],\r\n\r\n                        get label() {return !!props.labelField && !!data ? data[props.labelField] : null},\r\n                        get childrenData() {return data[props.childrenField!]},\r\n\r\n                        expand: false,\r\n                        check: false,\r\n                        loading: false,\r\n                        loaded: !props.lazy,\r\n                        /* todo 这里并不会立即执行，当渲染VNodeChild的时候这里才会执行，所以不存在checkStatus.value不存在的问题*/\r\n                        get checkStatus() {return checkStatus.value[this.key]},\r\n                        // get checkStatus() {return TreeNodeCheckStatus.uncheck},\r\n\r\n                        get isCheckable() {return !props.isCheckable || props.isCheckable(this as any)},\r\n                        get isLeaf() {return !!props.isLeaf ? props.isLeaf(this as any) : !this.childrenData},\r\n                        get isVisible() {\r\n                            return !props.filterNodeMethod ? true : (props.filterNodeMethod(this as any) || (!!this.children && this.children.some((child: Node) => child.isVisible)))\r\n                        },\r\n                    } as any\r\n                    if (!!adjust) adjust(node!)\r\n                    map.set(data, node!)\r\n                } else {\r\n                    Object.assign(node, {\r\n                        key: keyManager(data, props.keyField),\r\n                        data,\r\n                        level,\r\n                        parentRef,\r\n                    })\r\n                }\r\n                return node!\r\n            }\r\n            return get\r\n        })(),\r\n        /**\r\n         * 重置state中的data数据\r\n         * 为什么不直接把root以及nodeMap做成计算属性。\r\n         * 因为在计算root以及nodeMap的时候，会获取 label，key以及children，如果这些字段被修改了，可能会导致\r\n         * 这个计算属性频繁执行。这里只检查子节点数据，当子节点数据变化的时候才重新执行root以及nodeMap\r\n         * @author  韦胜健\r\n         * @date    2020/12/17 16:17\r\n         */\r\n        resetData: () => {\r\n            const nodeMap = {} as Record<string, Node>;\r\n            const iterator = ({data, level, parentRef}: { data: any, level: number, parentRef: () => Node }): Node => {\r\n                const node = utils.getTreeNodeByData({data, level, parentRef, adjust: getTreeNodeByDataAdjust})\r\n                nodeMap[node.key] = node\r\n                const childrenData = !props.childrenField ? null : (data[props.childrenField!] as SimpleObject[])\r\n                if (!!childrenData) {\r\n                    node.children = childrenData.map(child => iterator({data: child, level: level + 1, parentRef: () => state.nodeMap[node.key]}))\r\n                }\r\n                return node\r\n            }\r\n            const root = iterator({\r\n                data: {\r\n                    [props.keyField || 'id']: '@@$$root',\r\n                    [props.childrenField || 'children']: dataModel.value\r\n                },\r\n                level: 0,\r\n                parentRef: null as any,\r\n            })\r\n\r\n            return {\r\n                nodeMap,\r\n                root\r\n            }\r\n        },\r\n        /*遍历所有节点数据*/\r\n        iterate: ({nodes, handler, iterateChildren, iterateChildrenFirst,}: { nodes: Node[] | undefined, handler: (node: Node) => void, iterateChildren?: (node: Node) => boolean, iterateChildrenFirst?: boolean, }) => {\r\n            if (!nodes) return\r\n            nodes.forEach(Node => {\r\n                !iterateChildrenFirst && handler(Node);\r\n                if (!!Node.children && (!iterateChildren || iterateChildren(Node))) {\r\n                    utils.iterate({nodes: Node.children, handler, iterateChildren, iterateChildrenFirst,})\r\n                }\r\n                iterateChildrenFirst && handler(Node);\r\n            })\r\n        },\r\n    }\r\n\r\n    const state = reactive((() => {\r\n        const {root, nodeMap} = utils.resetData()\r\n        return {\r\n            /*虚拟跟节点*/\r\n            root,\r\n            /*节点映射node*/\r\n            nodeMap\r\n        }\r\n    })()) as { root: Node, nodeMap: Record<string, Node> };\r\n\r\n    const dataEffectTrigger = throttle(() => {\r\n        const {root, nodeMap} = utils.resetData()\r\n        state.root = root\r\n        state.nodeMap = nodeMap\r\n    }, 100)\r\n\r\n    const stopWatchEffect = watchEffect(\r\n        () => {\r\n            iteratorTreeData({data: dataModel.value || [], childrenField: props.childrenField!})\r\n            dataEffectTrigger()\r\n        },\r\n    )\r\n    onBeforeUnmount(stopWatchEffect)\r\n    const methods = {\r\n        getReactiveChildrenData(node: Node) {\r\n            let childrenData = node.childrenData\r\n            if (!childrenData) {\r\n                childrenData = []\r\n                node.data[props.childrenField!] = childrenData\r\n            }\r\n            return childrenData\r\n        },\r\n        removeSelf: (node: Node) => {\r\n            const parentChildrenData = node.parentRef()!.childrenData!\r\n            parentChildrenData.splice(parentChildrenData.indexOf(node.data), 1)\r\n        },\r\n        previousSibling: (self: Node, target: Node) => {\r\n            let parentChildrenData = methods.getReactiveChildrenData(self.parentRef()!)\r\n            target.parentRef = self.parentRef\r\n            target.level = self.level\r\n            parentChildrenData.splice(parentChildrenData.indexOf(self.data), 0, target.data)\r\n        },\r\n        nextSibling: (self: Node, target: Node) => {\r\n            let parentChildrenData = methods.getReactiveChildrenData(self.parentRef()!)\r\n            target.parentRef = self.parentRef\r\n            target.level = self.level\r\n            parentChildrenData.splice(parentChildrenData.indexOf(self.data) + 1, 0, target.data)\r\n        },\r\n        unshiftChild: (self: Node, target: Node) => {\r\n            let childrenData = methods.getReactiveChildrenData(self)\r\n            target.parentRef = () => self\r\n            target.level = self.level + 1\r\n            childrenData.unshift(target.data)\r\n        },\r\n    }\r\n\r\n    return {\r\n        dataModel,\r\n        state,\r\n        utils,\r\n        methods,\r\n    }\r\n}","import {computed, nextTick, PropType} from 'vue';\r\nimport {SimpleObject} from \"../../../shims\";\r\nimport {useTreeNode} from \"./useTreeNode\";\r\nimport {TreeNodeCheckStatus} from \"../utils/tree-constant\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\n\r\nfunction use<Node extends {\r\n    key: string,\r\n    data: SimpleObject,\r\n    level: number,\r\n    parentRef: () => Node | null,\r\n    selfRef: () => Node,\r\n\r\n    index: number,\r\n\r\n    readonly childrenData?: SimpleObject[]\r\n    readonly label?: string,\r\n    children?: Node[],\r\n    readonly checkStatus: TreeNodeCheckStatus,\r\n\r\n    expand: boolean,\r\n    check: boolean,\r\n    loading: boolean,\r\n    loaded: boolean,\r\n\r\n    readonly isCheckable: boolean,\r\n    readonly isLeaf: boolean,\r\n    readonly isVisible: boolean,\r\n}>(\r\n    {\r\n        props,\r\n        emit,\r\n        keyManager,\r\n        getTreeNodeByDataAdjust,\r\n    }: {\r\n        props: {\r\n            /*useTreeNode*/\r\n            data?: SimpleObject[],\r\n            labelField?: string,\r\n            keyField?: string,\r\n            childrenField?: string,\r\n            filterNodeMethod?: (node: Node) => boolean,\r\n            isLeaf?: (node: Node) => boolean,\r\n            isCheckable?: (node: Node) => boolean,\r\n            getChildren?: (node: Node, cb: (data: SimpleObject[]) => void) => void,\r\n            lazy?: boolean,\r\n            showCheckbox?: boolean,\r\n            checkStrictly?: boolean,\r\n\r\n            /*useTree*/\r\n            according?: boolean,\r\n            autoExpandParent?: boolean,\r\n            expandOnClickNode?: boolean,\r\n            checkOnClickNode?: boolean,\r\n            defaultExpandAll?: boolean,\r\n            currentKey?: string,\r\n        },\r\n        emit: {\r\n            onExpand: (node: Node) => void,\r\n            onExpandChange: (keys: string[]) => void,\r\n            onCollapse: (node: Node) => void,\r\n            onCheck: (node: Node) => void,\r\n            onUncheck: (node: Node) => void,\r\n            onCheckChange: (keys: string[]) => void,\r\n            onClickNode: (node: Node) => void,\r\n            onUpdateData: (data?: SimpleObject[]) => void,\r\n            onUpdateCurrentKey: (key?: string) => void,\r\n        },\r\n        keyManager: (obj: any, keyField: string | undefined | null) => string,\r\n        getTreeNodeByDataAdjust?: (node: Node) => void,\r\n    }\r\n) {\r\n\r\n    const {dataModel, state, utils: treeNodeUtils, methods: treeNodeMethods} = useTreeNode<Node>({props, event: {emit}, keyManager, getTreeNodeByDataAdjust})\r\n    const current = useModel(() => props.currentKey, emit.onUpdateCurrentKey)\r\n\r\n    const utils = {\r\n        ...treeNodeUtils,\r\n        /*遍历key或者node*/\r\n        handleKeyOrNode: async (keyOrNode: string | Node | (string | Node)[], handler: (node: Node) => void | Promise<void>): Promise<void> => {\r\n            if (!keyOrNode) {\r\n                return\r\n            }\r\n            if (!Array.isArray(keyOrNode)) {\r\n                const node = baseMethods.getNode(keyOrNode)\r\n                if (!!node) {await handler(node)}\r\n            } else {\r\n                await Promise.all(keyOrNode.map(k => utils.handleKeyOrNode(k, handler)))\r\n            }\r\n        },\r\n        /*获取子节点数据异步方法*/\r\n        getChildrenAsync: (node: Node): Promise<SimpleObject[]> => {\r\n            return new Promise((resolve) => {\r\n                if (!props.getChildren) {\r\n                    console.error('getChildren is required when using lazy mode!')\r\n                    return\r\n                }\r\n                if (node.level === 0) {\r\n                    !!state.root && (state.root.loading = true);\r\n                } else {\r\n                    node.loading = true\r\n                }\r\n                props.getChildren(node, (results) => {\r\n                    if (node.level === 0) {\r\n                        !!state.root && (state.root.loading = false)\r\n                    } else {\r\n                        node.loading = false\r\n                        node.loaded = true\r\n                    }\r\n                    resolve(results)\r\n                })\r\n            })\r\n        },\r\n        /*获取Node所有的父节点*/\r\n        getParents: (keyOrNode: Node | string): Node[] => {\r\n            let node = baseMethods.getNode(keyOrNode)\r\n            if (!node) {return []}\r\n            let parents = [] as Node[]\r\n            let parent = node.parentRef()\r\n            /*root 是没有 parentRef的*/\r\n            while (!!parent && !!parent.parentRef) {\r\n                parents.push(parent)\r\n                parent = parent.parentRef()\r\n            }\r\n            return parents\r\n        },\r\n        /*初始化逻辑*/\r\n        init: () => {\r\n            props.lazy && utils.getChildrenAsync(state.root!).then(val => {dataModel.value = val});\r\n            props.defaultExpandAll && nextTick().then(() => expandMethods.expandAll());\r\n        },\r\n    }\r\n\r\n    /*展开的节点*/\r\n    const expandNodes = computed(() => {\r\n        if (!state.root) {return []}\r\n        let nodes: Node[] = []\r\n        utils.iterate({nodes: state.root.children, handler: (node) => node.expand && nodes.push(node),})\r\n        return nodes\r\n    })\r\n    /*选中的节点*/\r\n    const checkNodes = computed(() => {\r\n        if (!state.root) {return []}\r\n        let nodes: Node[] = []\r\n        utils.iterate({nodes: state.root.children, handler: (node) => node.check && nodes.push(node)})\r\n        return nodes\r\n    })\r\n    /*展开的keys*/\r\n    const expandKeys = computed(() => expandNodes.value.map(i => i.key))\r\n    /*选中的keys*/\r\n    const checkKeys = computed(() => checkNodes.value.map(i => i.key))\r\n\r\n    const baseMethods = {\r\n        /*设置子节点数据*/\r\n        setChildrenData: (node: Node, children: any[]) => !!props.childrenField && (node.data[props.childrenField] = children),\r\n        /*通过keyOrNode获取node*/\r\n        getNode: (keyOrNode: string | Node): Node | undefined => typeof keyOrNode === \"object\" ? keyOrNode : state.nodeMap[keyOrNode],\r\n        /*设置当前选中行*/\r\n        setCurrent: (keyOrNode: string | Node) => current.value = typeof keyOrNode === \"object\" ? keyOrNode.key : keyOrNode,\r\n        /*获取当前选中行*/\r\n        getCurrent: (): Node | undefined => current.value == null ? undefined : baseMethods.getNode(current.value),\r\n    }\r\n    const expandMethods = {\r\n        /*展开节点*/\r\n        expand: async (keyOrNode: string | Node | (string | Node)[]) => {\r\n            await utils.handleKeyOrNode(keyOrNode,\r\n                async (node) => {\r\n                    const parent = node.parentRef()\r\n                    if (!node.expand) {\r\n                        if (\r\n                            props.lazy &&                           // 懒加载模式\r\n                            !node.loaded &&                         // 未曾加载过子节点数据\r\n                            !node.isLeaf                            // 节点不是叶子节点\r\n                        ) {\r\n                            const childrenData = await utils.getChildrenAsync(node)\r\n                            baseMethods.setChildrenData(node, childrenData || [])\r\n                            await nextTick()\r\n                        }\r\n\r\n                        if (props.according) {\r\n                            // 手风琴模式，展开某一个节点的时候，关闭兄弟节点\r\n                            if (!!parent && !!parent.children) {\r\n                                parent.children.forEach((child) => child.key !== node.key && expandMethods.collapse(child))\r\n                            }\r\n                        }\r\n                        node.expand = true\r\n                        await nextTick()\r\n\r\n                        emit.onExpand(node)\r\n                        emit.onExpandChange(expandKeys.value)\r\n                    }\r\n                    if (!!props.autoExpandParent && !!parent && parent.level !== 0) {\r\n                        await expandMethods.expand(parent)\r\n                    }\r\n                })\r\n        },\r\n        /*收起节点*/\r\n        collapse: async (keyOrNode: string | Node | (string | Node)[]) => {\r\n            await utils.handleKeyOrNode(keyOrNode,\r\n                async (node) => {\r\n                    await utils.iterate({\r\n                        nodes: [node, ...(node.children || [])],\r\n                        handler: (node) => {\r\n                            if (node.expand) {\r\n                                node.expand = false\r\n                                emit.onCollapse(node)\r\n                            }\r\n                        }\r\n                    })\r\n                    await nextTick()\r\n                    emit.onExpandChange(expandKeys.value)\r\n                })\r\n        },\r\n        /*展开或者收起节点*/\r\n        toggleExpand: (keyOrNode: string | Node) => {\r\n            const node = baseMethods.getNode(keyOrNode)\r\n            if (!node) {return}\r\n            node.expand ? expandMethods.collapse(keyOrNode) : expandMethods.expand(keyOrNode)\r\n        },\r\n        /*展开所有节点*/\r\n        expandAll: () => utils.iterate({nodes: state.root!.children, handler: node => node.expand = true}),\r\n        /*收起所有节点*/\r\n        collapseAll: () => expandNodes.value.forEach(node => node.expand = false),\r\n    }\r\n\r\n    const checkMethods = {\r\n        /*选中节点*/\r\n        check: async (keyOrNode: string | Node | (string | Node)[]) => {\r\n            await utils.handleKeyOrNode(keyOrNode, async (node) => {\r\n                if (node.check || !node.isCheckable) {return}\r\n                node.check = true\r\n                // 父子关联模式下，改变子节点以及父节点状态\r\n                if (!props.checkStrictly) {\r\n                    // 选中所有子节点\r\n                    utils.iterate({nodes: node.children, handler: (child) => child.check = true,})\r\n                    // 更新父节点状态，如果父节点所有的子节点都处于选中状态，则更新父节点为选中状态\r\n                    let parent = node.parentRef()\r\n                    while (!!parent && !!parent.key) {\r\n                        if (!!parent.parentRef && parent.children!.every(child => child.check)) {\r\n                            parent.check = true\r\n                            parent = !!parent.parentRef ? parent.parentRef() : null\r\n                        } else {\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n                await nextTick()\r\n                emit.onCheck(node)\r\n                emit.onCheckChange(checkKeys.value)\r\n            })\r\n        },\r\n        /*取消选中节点*/\r\n        uncheck: async (keyOrNode: string | Node | (string | Node)[]) => {\r\n            await utils.handleKeyOrNode(keyOrNode, async node => {\r\n                if (!node.check || !node.isCheckable) {return}\r\n                node.check = false\r\n                // 父子关联模式下，改变子节点以及父节点状态\r\n                if (!props.checkStrictly) {\r\n                    // 取消选中所有子节点\r\n                    utils.iterate({nodes: node.children, handler: (child) => child.check = false,})\r\n                    // 更新父节点状态，如果父节点所有的子节点都处于非选中状态，则更新父节点为非选中状态\r\n                    let parent = node.parentRef()\r\n                    while (!!parent && !!parent.key) {\r\n                        if (parent.check) {\r\n                            parent.check = false\r\n                            parent = parent.parentRef()\r\n                        } else {\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n\r\n                await nextTick()\r\n                emit.onUncheck(node)\r\n                emit.onCheckChange(checkKeys.value)\r\n            })\r\n        },\r\n        /*选中或者取消选中节点*/\r\n        toggleCheck: (keyOrNode: string | Node) => {\r\n            const node = baseMethods.getNode(keyOrNode)\r\n            if (!node) return\r\n            node.check ? checkMethods.uncheck(keyOrNode) : checkMethods.check(keyOrNode)\r\n        },\r\n        /*选中所有节点*/\r\n        checkAll: () => utils.iterate({nodes: state.root!.children, handler: node => node.isCheckable && (node.check = true)}),\r\n        /*取消选中所有节点*/\r\n        uncheckAll: () => checkNodes.value.forEach(node => node.check = false),\r\n        /*获取所有选中的节点*/\r\n        getCheckedData: () => checkNodes.value,\r\n        /*刷新所有节点的选中状态*/\r\n        refreshCheckStatus: async (keyOrNode: string | Node) => {\r\n            if (!props.showCheckbox) return\r\n            if (props.checkStrictly) return;\r\n            await delay(0)\r\n            const node = baseMethods.getNode(keyOrNode)\r\n            if (!node) {return }\r\n            const nodes = [] as Node[]\r\n            utils.iterate({\r\n                nodes: node.children,\r\n                handler: node => {nodes.unshift(node)},\r\n                iterateChildrenFirst: true,\r\n            })\r\n            nodes.unshift(node)\r\n            nodes.unshift(...utils.getParents(node).reverse())\r\n            nodes.reverse().forEach(node => {\r\n                /*刷新选中状态的前提是有子节点数据*/\r\n                if (node.isLeaf || !node.children || node.children.length === 0) return\r\n                let hasCheck = false, hasUncheck = false;\r\n                /*console.log({\r\n                    node: node.label,\r\n                    children: node.children.map(child => child.label)\r\n                })*/\r\n                node.children.forEach(child => child.check ? hasCheck = true : hasUncheck = true)\r\n                if (node.check && hasUncheck) {\r\n                    // 自身选中而子节点有非选中,取消当前节点的选中状态\r\n                    node.check = false\r\n                }\r\n                if (!node.check && hasCheck && !hasUncheck) {\r\n                    // 自身非选中而子节点全部选中，选中当前节点\r\n                    node.check = true\r\n                }\r\n            })\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        /*点击展开图标*/\r\n        onClickExpandIcon: async (e: MouseEvent, node: Node) => {\r\n            e.stopPropagation()\r\n            await expandMethods.toggleExpand(node)\r\n        },\r\n        /*点击复选框*/\r\n        onClickCheckbox: async (e: MouseEvent, node: Node) => {\r\n            e.stopPropagation()\r\n            await checkMethods.toggleCheck(node)\r\n        },\r\n        /*点击行*/\r\n        onClickCell: async (e: MouseEvent, node: Node) => {\r\n            emit.onClickNode(node)\r\n            baseMethods.setCurrent(node)\r\n            props.expandOnClickNode && (await expandMethods.toggleExpand(node));\r\n            props.checkOnClickNode && (await checkMethods.toggleCheck(node));\r\n        },\r\n    }\r\n\r\n    utils.init()\r\n\r\n    return {\r\n        dataModel,\r\n        state,\r\n        current,\r\n        utils,\r\n        handler,\r\n        methods: {\r\n            ...baseMethods,\r\n            expandMethods,\r\n            checkMethods,\r\n            treeNodeMethods,\r\n        },\r\n    }\r\n}\r\n\r\nexport const useTree = Object.assign(use, {\r\n    createProps: <Node>() => {\r\n        return {\r\n            /*useTreeNode*/\r\n            data: {type: Array as PropType<SimpleObject[]>},            // 树形结构数据\r\n            keyField: {type: String},                                   // 每一个树节点用来标识的唯一树形\r\n            labelField: {type: String},                                 // 树节点展示文本对应字段\r\n            childrenField: {type: String},                              // 树节点对应子节点数据对应字段\r\n\r\n            filterNodeMethod: {type: Function as PropType<(node: Node) => boolean>},// 对树节点进行筛选的方法，返回true表示可以显示，返回false表示隐藏\r\n            isLeaf: {type: Function as PropType<(node: Node) => boolean>},// 判断树节点是否为叶子节点的函数，仅在lazy模式有效\r\n            isCheckable: {type: Function as PropType<(node: Node) => boolean>},     // 当即将选中树节点时，判断是否可以选中该树节点\r\n            getChildren: {type: Function as PropType<(node: Node, cb: (data: SimpleObject[]) => void) => void>},// 加载子节点数据的函数，仅当 lazy 为true时有效\r\n            lazy: {type: Boolean},                                      // 是否懒加载子节点数据\r\n            showCheckbox: {type: Boolean},                              // 是否展示勾选框\r\n            checkStrictly: {type: Boolean},                             // 在显示复选框的情况下，是否严格遵循父子互不关联的做法，默认为false\r\n\r\n            /*useTree*/\r\n            according: {type: Boolean},                                 // 是否每次只展开一个同级的树节点\r\n            autoExpandParent: {type: Boolean, default: true},           // 是否展开节点的时候，自动展开父节点\r\n            expandOnClickNode: {type: Boolean, default: true},          // 是否点击树节点的时候展开子节点\r\n            checkOnClickNode: {type: Boolean},                          // 是否点击树节点的时候选中节点\r\n            defaultExpandAll: {type: Boolean},                          // 是否默认展开所有节点\r\n            currentKey: {type: String},                                 // 当前选中节点的key\r\n        }\r\n    },\r\n    createEvent: <Node>() => {\r\n        return {\r\n            onClickNode: (node: Node) => true,                          // 点击节点事件\r\n            onUpdateCurrentKey: (current?: string) => true,                // 当前高亮节点key变化绑定事件\r\n            onUpdateData: (data?: SimpleObject[]) => true,              // 数据变化事件（拖拽排序、数据懒加载）\r\n\r\n            onExpandChange: (expandKeys: string[]) => true,             // 展开节点变化事件\r\n            onExpand: (node: Node) => true,                             // 展开事件\r\n            onCollapse: (node: Node) => true,                           // 关闭节点事件\r\n\r\n            onCheckChange: (checkKeys: string[]) => true,               // 选中节点变化事件\r\n            onCheck: (node: Node) => true,                              // 选中节点事件\r\n            onUncheck: (node: Node) => true,                            // 取消选中节点事件\r\n        }\r\n    }\r\n})\r\n\r\n","import {TreeNode, TreePropsType} from \"./type\";\r\nimport {PropType} from 'vue';\r\nimport {useTree} from \"../core/useTree\";\r\nimport nodeIcon = TreePropsType.nodeIcon;\r\nimport renderContent = TreePropsType.renderContent;\r\nimport allDrag = TreePropsType.allowDrag;\r\nimport allDrop = TreePropsType.allowDrop;\r\n\r\nexport const TreeProps = {\r\n    ...useTree.createProps<TreeNode>(),\r\n    /*基础属性*/\r\n    loading: {type: Boolean},                                   // 当前是否处于loading状态\r\n    nodeIcon: {type: Function as PropType<nodeIcon>},           // 节点图标\r\n    nodeHeight: {type: Number, default: 40},                    // 节点高度\r\n    height: {type: String, default: '100%'},                    // 容器高度\r\n    /*普通属性*/\r\n    renderContent: {type: Function as PropType<renderContent>}, // 树节点内容渲染函数\r\n    /*展开相关属性*/\r\n    emptyText: {type: String, default: '暂无数据'},              // 没有子节点的时候展示的文本\r\n    intent: {type: Number, default: 22},                        // 相邻级节点水平缩进距离，默认16，单位px\r\n    /*拖拽属性*/\r\n    draggable: {type: Boolean},                                 // 是否可拖拽\r\n    allowDrag: {type: Function as PropType<allDrag>},           // 判断节点是否可以拖拽\r\n    allowDrop: {type: Function as PropType<allDrop>},           // 判断目标节点能够被放置\r\n\r\n    folderCollapseIcon: {type: String, default: 'el-icon-folder-s'},//节点收起时展示的图标\r\n    folderExpandIcon: {type: String, default: 'el-icon-folder-opened'},//节点展开时显示的图标\r\n    leafIcon: {type: String, default: 'el-icon-document'},      // 叶子节点显示的图标\r\n\r\n    virtual: {type: Boolean},                                   // 是否开启虚拟滚动\r\n}","import {TreeNode} from \"./type\";\r\n\r\nconst basePadding = 8\r\n\r\nexport const TreeUtils = {\r\n    getPaddingLeft: (level: number, intent: number) => {\r\n        return basePadding + (level - 1) * intent\r\n    },\r\n    /**\r\n     * 计算treeNode的样式\r\n     * @author  韦胜健\r\n     * @date    2020/11/28 9:25\r\n     */\r\n    getTreeNodeStyles: (level: number, intent: number, nodeHeight: number) => {\r\n        const basePadding = 8\r\n        return {\r\n            paddingLeft: `${TreeUtils.getPaddingLeft(level, intent)}px`,\r\n            paddingRight: `${basePadding}px`,\r\n            height: `${nodeHeight}px`,\r\n        }\r\n    },\r\n    /**\r\n     * 计算tree node的class\r\n     * @author  韦胜健\r\n     * @date    2020/11/28 10:35\r\n     */\r\n    getTreeNodeClasses: (node: TreeNode, current?: string) => {\r\n        return [\r\n            'pl-tree-node',\r\n            {\r\n                'pl-tree-node-current': node.key === current,\r\n                'pl-tree-node-not-checkable': !node.isCheckable,\r\n            }\r\n        ]\r\n    },\r\n}","import Scroll from '../packages/scroll/scroll'\r\nimport {addClass} from \"plain-utils/dom/addClass\";\r\nimport {nextIndex} from \"../utils/nextIndex\";\r\nimport {StyleProperties} from \"../shims\";\r\n\r\nfunction createIndicator(hostEl: HTMLElement, vertical: boolean) {\r\n\r\n    const indicatorSize = 15\r\n\r\n    const {top, height, left, width} = hostEl.getBoundingClientRect()\r\n\r\n    const indicator = {\r\n        start: document.createElement('div'),\r\n        end: document.createElement('div'),\r\n    }\r\n\r\n    addClass(indicator.start, `pl-auto-scroll-indicator-start pl-auto-scroll-indicator-${vertical ? 'vertical' : 'horizontal'}`)\r\n    addClass(indicator.end, `pl-auto-scroll-indicator-end pl-auto-scroll-indicator-${vertical ? 'vertical' : 'horizontal'}`)\r\n\r\n    const publicStyles = {\r\n        position: 'fixed',\r\n        left: `${left}px`,\r\n        top: `${top}px`,\r\n\r\n        width: `${vertical ? width : indicatorSize}px`,\r\n        height: `${vertical ? indicatorSize : height}px`,\r\n        zIndex: `${nextIndex()}`,\r\n    } as StyleProperties\r\n\r\n    Object.assign(indicator.start.style, publicStyles)\r\n\r\n    if (vertical) {\r\n        let bottomIndicatorTop = top + height - indicatorSize\r\n        bottomIndicatorTop = Math.min(bottomIndicatorTop, document.body.offsetHeight - indicatorSize)\r\n\r\n        Object.assign(indicator.end.style, {\r\n            ...publicStyles,\r\n            top: `${bottomIndicatorTop}px`,\r\n        } as StyleProperties)\r\n    } else {\r\n        let rightIndicatorLeft = left + width - indicatorSize\r\n        rightIndicatorLeft = Math.min(rightIndicatorLeft, document.body.offsetWidth - indicatorSize)\r\n        Object.assign(indicator.end.style, {\r\n            ...publicStyles,\r\n            left: `${rightIndicatorLeft}px`,\r\n        } as StyleProperties)\r\n    }\r\n\r\n    document.body.appendChild(indicator.start)\r\n    document.body.appendChild(indicator.end)\r\n\r\n    return indicator\r\n}\r\n\r\nexport function useAutoScroll(config: {\r\n    getScroll: () => typeof Scroll.use.class,\r\n    vertical: boolean,\r\n}) {\r\n\r\n    let {getScroll, vertical} = config\r\n\r\n    const state = {\r\n        indicator: null as null | ReturnType<typeof createIndicator>\r\n    }\r\n\r\n    const methods = {\r\n        showHover() {\r\n\r\n            const scroll = getScroll()\r\n            state.indicator = createIndicator(scroll.refs.host, vertical)\r\n\r\n            const handler = {\r\n                enterStart: () => {\r\n                    vertical ? scroll.methods.autoScrollTop() : scroll.methods.autoScrollLeft()\r\n                },\r\n                enterEnd: () => {\r\n                    vertical ? scroll.methods.autoScrollBottom() : scroll.methods.autoScrollRight()\r\n                },\r\n                leave: () => {\r\n                    scroll.methods.stopAutoScroll()\r\n                }\r\n            }\r\n\r\n            state.indicator.start.addEventListener('mouseenter', handler.enterStart)\r\n            state.indicator.end.addEventListener('mouseenter', handler.enterEnd)\r\n\r\n            state.indicator.start.addEventListener('mouseleave', handler.leave)\r\n            state.indicator.end.addEventListener('mouseleave', handler.leave)\r\n        },\r\n        hideHover() {\r\n            if (!!state.indicator) {\r\n                state.indicator.start.parentNode!.removeChild(state.indicator.start)\r\n                state.indicator.end.parentNode!.removeChild(state.indicator.end)\r\n            }\r\n        },\r\n    }\r\n\r\n    return methods\r\n\r\n}","/**\r\n * 获取拖拽的rowEl对象\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:55\r\n */\r\nimport {hasClass} from \"plain-utils/dom/hasClass\";\r\n\r\nexport function getRowEl(e: MouseEvent, rowClass: string): HTMLElement {\r\n    let rowEl = e.target as HTMLElement\r\n    while (!!rowEl && !hasClass(rowEl, rowClass)) {\r\n        rowEl = rowEl.parentNode as HTMLElement\r\n    }\r\n    if (!rowEl) {\r\n        console.log({e, rowClass})\r\n        throw new Error(`can't find item element!`)\r\n    }\r\n    return rowEl\r\n}","/**\r\n * 获取可以滚动的父组件\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:50\r\n */\r\nexport function getScrollParent(el: HTMLElement): HTMLElement {\r\n    while (!!el && el.scrollHeight <= el.offsetHeight) {\r\n        el = el.parentNode as HTMLElement\r\n    }\r\n    return el\r\n}","import {TreeDropType} from \"../utils/tree-constant\";\r\nimport {useAutoScroll} from \"../../../use/useAutoScroll\";\r\nimport Scroll from \"../../scroll/scroll\";\r\nimport {StyleProperties} from \"../../../shims\";\r\nimport {getRowEl} from \"../../../utils/getRowEl\";\r\nimport {getScrollParent} from \"../../../utils/getScrollParent\";\r\n\r\nconst indicatorSize = 3;\r\n\r\nexport function useTreeDraggier<T extends {\r\n    key: string,\r\n    index: number,\r\n    isLeaf: boolean,\r\n    level: number,\r\n    parentRef: () => T | null,\r\n    children?: T[],\r\n    check?: boolean,\r\n    empty: boolean,\r\n}>(\r\n    {\r\n        rowClass,\r\n        dragClass,\r\n        flatList,\r\n        getScroll,\r\n        props,\r\n        methods,\r\n    }: {\r\n        rowClass: string,                                   // 行 class 标识\r\n        dragClass: string,                                  // 拖拽的节点class标识\r\n        flatList: { value: T[] },                           // 拍平的数据\r\n        getScroll: () => typeof Scroll.use.class,           // 获取 Scroll 组件实例引\r\n        props: {\r\n            intent: number,                                 // 层级偏移距离\r\n            allowDrag?: (node: T) => boolean | undefined,   // 判断元素是否可以拖拽\r\n            allowDrop?: (start: T, move: T, dropType: TreeDropType) => boolean | undefined,// 判断元素是否可以放置\r\n        },\r\n        methods: {\r\n            expand: (node: T) => void,                      // 展开某个元素\r\n            refreshCheckStatus: () => void,                 // 刷新所有元素的选中状态\r\n            removeSelf: (node: T) => void,\r\n            previousSibling: (self: T, target: T) => void,\r\n            nextSibling: (self: T, target: T) => void,\r\n            unshiftChild: (self: T, target: T) => void,\r\n        },\r\n    }\r\n) {\r\n\r\n    const state = {\r\n\r\n        startNode: null as null | T,                    // 拖拽开始的时候节点\r\n        moveNode: null as null | T,                     // 拖拽移动过程中的节点\r\n\r\n        startScrollTop: 0,                              // 开始拖拽的时候，滚动容器的scrollTop\r\n        moveScrollTop: 0,                               // 拖拽移动过程中，滚动容器的scrollTop\r\n\r\n        startClientY: 0,                                // 开始拖拽的时候，鼠标的clientY值\r\n        moveClientY: 0,                                 // 拖拽过程中，鼠标的clientY值\r\n\r\n        rowHeight: 0,                                   // 行高（不可变，每行高度都必须一样）\r\n        scrollParent: null as null | HTMLElement,       // 滚动容器节点\r\n        rowEl: null as null | HTMLElement,              // 拖拽开始的时候，节点的行dom对象\r\n        scrollParentRect: {                             // 滚动容器的位置属性\r\n            top: 0,\r\n            left: 0,\r\n            width: 0,\r\n            height: 0,\r\n        },\r\n        indicator: null as null | HTMLElement,          // 指示器dom对象\r\n        dragNodeBaseLeft: 0,                            // dragNode(dragClass标识的拖拽元素)的left属性\r\n\r\n        dropType: TreeDropType.inner,                   // 当前拖拽移动过程中的放置类型\r\n        droppable: false,                               // 当前拖拽过程中，是否可放置\r\n    }\r\n\r\n    const autoScroll = useAutoScroll({vertical: true, getScroll,})\r\n\r\n    const utils = {\r\n        /**\r\n         * 获取目标节点所有父节点\r\n         * @author  韦胜健\r\n         * @date    2020/8/25 16:33\r\n         */\r\n        getParents: (node: T | null) => {\r\n            const parents = [] as T[]\r\n            while (!!node && node.level > 0) {\r\n                parents.push(node)\r\n                node = node.parentRef()\r\n            }\r\n            return parents\r\n        },\r\n        allowRowDraggable: (node: T) => {\r\n            return !props.allowDrag || props.allowDrag(node) !== false\r\n        },\r\n        allowRowDroppable: (startNode: T, moveNode: T, dropType: TreeDropType) => {\r\n            return !props.allowDrop || props.allowDrop(startNode, moveNode, dropType) !== false\r\n        },\r\n        getIndicatorStyles(moveNode: T, droppable: boolean, dropType: TreeDropType) {\r\n\r\n            const styles: StyleProperties = {}\r\n\r\n            let top = moveNode.index * state.rowHeight + state.scrollParentRect.top - (state.moveScrollTop)\r\n            let paddingLeft = (moveNode.level - state.startNode!.level) * props.intent\r\n\r\n            styles.top = `${dropType === TreeDropType.next ? top + state.rowHeight - indicatorSize : top}px`\r\n            styles.left = `${state.dragNodeBaseLeft + paddingLeft}px`\r\n            styles.width = `${state.scrollParentRect.width - (state.dragNodeBaseLeft - state.scrollParentRect.left) - paddingLeft}px`\r\n            styles.height = `${dropType === TreeDropType.inner ? state.rowHeight : indicatorSize}px`\r\n            styles.backgroundColor = droppable ? '#12b4a5' : '#F38585'\r\n            styles.opacity = dropType === TreeDropType.inner ? '0.15' : ''\r\n\r\n            return styles\r\n        },\r\n        refresh() {\r\n            const top = state.startClientY - state.scrollParentRect.top + (state.moveScrollTop) + (state.moveClientY - state.startClientY)\r\n            let targetIndex = top / state.rowHeight\r\n            const external = targetIndex % 1\r\n            targetIndex = Math.floor(targetIndex)\r\n            let dropType: TreeDropType = external < 0.3 ? TreeDropType.prev : external > 0.7 ? TreeDropType.next : TreeDropType.inner\r\n            const moveNode = flatList.value[targetIndex]\r\n            if (!moveNode) {\r\n                return\r\n            }\r\n\r\n            let droppable = true\r\n\r\n            state.moveNode = moveNode\r\n            if (state.moveNode.empty) {\r\n                droppable = false\r\n            } else {\r\n                const parents = utils.getParents(state.moveNode)\r\n                if (parents.map(n => n.key).indexOf(state.startNode!.key) > -1) {\r\n                    droppable = false\r\n                }\r\n                if (!utils.allowRowDroppable(state.startNode!, moveNode, dropType)) {\r\n                    droppable = false\r\n                }\r\n            }\r\n\r\n            state.dropType = dropType\r\n            state.droppable = droppable\r\n\r\n            Object.assign(state.indicator!.style, utils.getIndicatorStyles(moveNode, droppable, dropType))\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: DragEvent) => {\r\n            state.startClientY = state.moveClientY = e.clientY\r\n\r\n            state.rowEl = getRowEl(e, rowClass)\r\n            state.rowHeight = state.rowEl.offsetHeight\r\n            const vid = Number(state.rowEl.getAttribute('vid'))\r\n            state.moveNode = state.startNode = flatList.value[vid]\r\n\r\n            if (!utils.allowRowDraggable(state.startNode)) {\r\n                return\r\n            }\r\n\r\n            const dragNode = state.rowEl.querySelector(`.${dragClass}`)!\r\n            state.dragNodeBaseLeft = Math.ceil(dragNode.getBoundingClientRect()!.left)\r\n\r\n            state.scrollParent = getScrollParent(state.rowEl)\r\n            state.startScrollTop = state.moveScrollTop = state.scrollParent.scrollTop\r\n            const {top, left, height, width} = (state.scrollParent.parentNode as HTMLElement).getBoundingClientRect()\r\n            state.scrollParentRect = {top, left, height, width}\r\n\r\n            state.indicator = document.createElement('div')\r\n            state.indicator.style.position = 'fixed'\r\n            state.indicator.style.pointerEvents = 'none'\r\n            state.indicator.style.height = `${indicatorSize}px`\r\n            state.indicator.style.width = `${state.scrollParentRect.width}px`\r\n            state.indicator.style.left = `${state.scrollParentRect.left}px`\r\n            state.indicator.style.backgroundColor = '#12b4a5'\r\n            document.body.appendChild(state.indicator)\r\n\r\n            state.scrollParent.addEventListener('scroll', handler.scroll)\r\n            document.addEventListener('mousemove', handler.mousemove)\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n\r\n            utils.refresh()\r\n            autoScroll.showHover()\r\n        },\r\n        scroll() {\r\n            state.moveScrollTop = state.scrollParent!.scrollTop\r\n            utils.refresh()\r\n        },\r\n        /**\r\n         * 在dragover中判断clientX以及clientY，如果这两个值没有变化，就不往下执行，节省性能\r\n         * @author  韦胜健\r\n         * @date    2020/8/25 22:22\r\n         */\r\n        mousemove: (e: MouseEvent) => {\r\n            const {top, height} = state.scrollParentRect\r\n            if (e.clientY < top || e.clientY > top + height) {\r\n                return;\r\n            }\r\n            state.moveClientY = e.clientY\r\n            utils.refresh()\r\n        },\r\n        mouseup: () => {\r\n\r\n            autoScroll.hideHover()\r\n\r\n            const {startNode, moveNode, dropType, droppable} = state\r\n\r\n            state.scrollParent!.removeEventListener('scroll', handler.scroll)\r\n            document.removeEventListener('mousemove', handler.mousemove)\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n\r\n            state.indicator!.parentNode!.removeChild(state.indicator!)\r\n            state.startClientY = state.moveClientY = 0\r\n            state.rowEl = null\r\n            state.rowHeight = 0\r\n            state.moveNode = null\r\n            state.dragNodeBaseLeft = 0\r\n            state.scrollParent = null\r\n            state.startScrollTop = 0\r\n            state.scrollParentRect = {top: 0, left: 0, height: 0, width: 0}\r\n\r\n            if (!droppable) {\r\n                return\r\n            }\r\n\r\n            methods.removeSelf(startNode!)\r\n\r\n            switch (dropType) {\r\n                case TreeDropType.prev:\r\n                    methods.previousSibling(moveNode!, startNode!)\r\n                    break\r\n                case TreeDropType.inner:\r\n                    methods.unshiftChild(moveNode!, startNode!)\r\n                    methods.expand(moveNode!)\r\n                    break\r\n                case TreeDropType.next:\r\n                    methods.nextSibling(moveNode!, startNode!)\r\n                    break\r\n            }\r\n            methods.refreshCheckStatus()\r\n        }\r\n    }\r\n\r\n    return {\r\n        handler,\r\n        utils,\r\n    }\r\n\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {computed, PropType} from 'vue';\r\nimport './tree.scss'\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {TreeProps} from \"./utils/props\";\r\nimport {TreeUtils} from \"./utils/tree.utils\";\r\nimport {TreeNode} from \"./utils/type\";\r\nimport VirtualList from '../virutal-list/virtual-list'\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useTreeDraggier} from './core/useTreeDraggier';\r\nimport Scroll from '../scroll/scroll'\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {useTree} from \"./core/useTree\";\r\nimport {createKeyHandler} from \"../../utils/createKeyHandler\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-tree',\r\n    props: {\r\n        ...TreeProps,\r\n    },\r\n    emits: useTree.createEvent<TreeNode>(),\r\n    setup({props, event}) {\r\n\r\n        const {emit} = event\r\n        const {refs} = useRefs({list: VirtualList, scroll: Scroll,})\r\n        const {scopedSlots} = useScopedSlots({default: {node: Object as PropType<TreeNode>, index: Number},})\r\n        const {state, methods, current, handler, utils} = useTree<TreeNode>({props, emit, keyManager: createKeyHandler('tree'),})\r\n\r\n        /*tree node content公共的样式*/\r\n        const contentStyles = useStyles(style => {style.height = `${props.nodeHeight}px`})\r\n        /**\r\n         * 拍-平的树形数据（不拍平无法实现虚拟滚动）\r\n         * @author  韦胜健\r\n         * @date    2020/12/2 12:16\r\n         */\r\n        const flatList = computed(() => {\r\n            let result: (TreeNode)[] = []\r\n            if (!state.root) {\r\n                return []\r\n            }\r\n            utils.iterate({\r\n                nodes: state.root.children,\r\n                iterateChildren: (treeNode) => treeNode.expand,\r\n                handler: (treeNode) => {\r\n                    result.push(treeNode)\r\n                    // console.log(treeNode.label, {'!treeNode.isLeaf': !treeNode.isLeaf, 'treeNode.loaded': treeNode.loaded, 'treeNode.isVisible': treeNode.isVisible, 'treeNode.expand': treeNode.expand, 'treeNode.children': treeNode.children,})\r\n                    if (\r\n                        !treeNode.isLeaf &&\r\n                        treeNode.loaded &&\r\n                        treeNode.isVisible &&\r\n                        treeNode.expand &&\r\n                        treeNode.children!.length === 0\r\n                    ) {\r\n                        result.push({\r\n                            key: `@@empty_${treeNode.key}`,\r\n                            parentRef: () => treeNode,\r\n                            empty: true,\r\n                            level: treeNode.level + 1,\r\n                        } as TreeNode)\r\n                    }\r\n                },\r\n            },)\r\n            result = result.filter((treeNode) => treeNode.empty ? true : !!treeNode.isVisible)\r\n            result.forEach((node, index) => node.index = index)\r\n            return result\r\n        })\r\n\r\n        const exposeMethods = {\r\n            ...methods,\r\n            ...methods.expandMethods,\r\n            ...methods.checkMethods,\r\n            ...methods.treeNodeMethods,\r\n        }\r\n\r\n        /*---------------------------------------draggier-------------------------------------------*/\r\n\r\n        const draggier = useTreeDraggier<TreeNode>({\r\n            rowClass: 'pl-tree-node',\r\n            dragClass: 'pl-tree-node-draggier',\r\n            flatList,\r\n            getScroll: () => props.virtual ? refs.list!.refs.scroll! : refs.scroll!,\r\n            props,\r\n            methods: {\r\n                ...exposeMethods,\r\n                refreshCheckStatus: async () => {\r\n                    await delay(120)\r\n                    flatList.value.forEach(methods.checkMethods.refreshCheckStatus)\r\n                },\r\n            },\r\n        })\r\n\r\n        const render = {\r\n            node: (node: TreeNode, index: number) => {\r\n                if (node.empty) {\r\n                    return render.empty(node)\r\n                }\r\n                return (\r\n                    <pl-item\r\n                        key={node.key}\r\n                        class={TreeUtils.getTreeNodeClasses(node, current.value)}\r\n                        style={TreeUtils.getTreeNodeStyles(node.level, props.intent, props.nodeHeight)}\r\n                        vid={index}>\r\n\r\n                        <div class=\"pl-tree-node-operator\">\r\n                            {!!props.showCheckbox && <pl-checkbox\r\n                                checkStatus={node.checkStatus}\r\n                                disabled={!node.isCheckable}\r\n                                onClick={(e: MouseEvent) => handler.onClickCheckbox(e, node)}\r\n                            />}\r\n                            <div class=\"pl-tree-node-expander\">\r\n                                {node.loading ?\r\n                                    <pl-loading type=\"gamma\"/> :\r\n                                    <pl-icon icon={node.isLeaf ? props.leafIcon : node.expand ? props.folderExpandIcon : props.folderCollapseIcon}\r\n                                             onClick={(e: MouseEvent) => handler.onClickExpandIcon(e, node)}/>\r\n                                }\r\n                            </div>\r\n                            {!!props.draggable && <pl-icon icon=\"el-icon-list\" class=\"pl-tree-node-draggier\" onMousedown={draggier.handler.mousedown}/>}\r\n                            {!!props.nodeIcon && <pl-icon icon={props.nodeIcon(node)}/>}\r\n                        </div>\r\n                        <div class=\"pl-tree-node-content\"\r\n                             style={contentStyles.value}\r\n                             onClick={(e: MouseEvent) => handler.onClickCell(e, node)}>\r\n                            {scopedSlots.default({node, index}, !!props.renderContent ? props.renderContent({node, index}) : node.label)}\r\n                        </div>\r\n                    </pl-item>\r\n                )\r\n            },\r\n            empty: (emptyNode: TreeNode) => {\r\n                const parent = emptyNode.parentRef()!\r\n                return (\r\n                    <pl-item\r\n                        key={`${parent.key}_empty`}\r\n                        class=\"pl-tree-node pl-tree-empty-node\"\r\n                        style={TreeUtils.getTreeNodeStyles(parent.level + 1, props.intent, props.nodeHeight)}>\r\n                        <div class=\"pl-tree-node-operator\">\r\n                            <div class=\"pl-tree-node-expander\">\r\n                                <pl-icon icon=\"el-icon-close-bold\"/>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"pl-tree-node-content\" style={contentStyles.value}>\r\n                            <span>{props.emptyText}</span>\r\n                        </div>\r\n                    </pl-item>\r\n                )\r\n            },\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                ...exposeMethods,\r\n            },\r\n            render: () => {\r\n                return (\r\n                    <div class=\"pl-tree\" style={{height: props.height}} v-loading={props.loading || (!!state.root && state.root.loading)}>\r\n                        {flatList.value.length === 0 ? (\r\n                            <div class=\"pl-tree-placeholder\" key=\"placeholder\">\r\n                                <pl-icon icon=\"el-icon-folder-opened\"/>\r\n                                <span>{props.emptyText}</span>\r\n                            </div>\r\n                        ) : (\r\n                            props.virtual ?\r\n                                (<pl-virtual-list\r\n                                    ref=\"list\"\r\n                                    data={flatList.value}\r\n                                    size={props.nodeHeight}\r\n                                    v-slots={{\r\n                                        // default: ({item, index}: { item: TreeNode, index: number }) => render.node(item, index),\r\n                                        content: ({data}: { data: { item: TreeNode, index: number }[] }) => (\r\n                                            <pl-list direction=\"top\" class=\"pl-tree-node-list\">\r\n                                                {data.map(({item, index}) => render.node(item, index))}\r\n                                            </pl-list>\r\n                                        )\r\n                                    }}\r\n                                />) : (\r\n                                    <pl-scroll ref=\"scroll\">\r\n                                        <pl-list direction=\"top\" class=\"pl-tree-node-list\">\r\n                                            {flatList.value.map((node, index) => render.node(node, index))}\r\n                                        </pl-list>\r\n                                    </pl-scroll>\r\n                                )\r\n                        )}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import tree from './tree'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(tree)","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport Option, {SelectOption} from './select-option'\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {computed, PropType, ref} from 'vue';\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Scroll from '../scroll'\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {useProps} from \"../../use/useProps\";\r\nimport {$$notice} from \"../notice-service\";\r\n\r\nconst Panel = designComponent({\r\n    name: 'pl-select-panel',\r\n    props: {\r\n        modelValue: {type: [String, Number, Array]},                     // 双向绑定值\r\n\r\n        multiple: {type: Boolean},                                      // 是否多选\r\n        multipleMaxLimit: {type: [Number, String]},                     // 多选最多选择个数\r\n        multipleMinLimit: {type: [Number, String]},                     // 多选最少选择个数\r\n\r\n        noMatchText: {type: String, default: '暂无匹配数据'},             // 筛选无数据时展示的文本\r\n        noDataText: {type: String, default: '暂无数据'},                 // 无数据时显示的文本\r\n        filterMethod: {type: Function as PropType<(option: { val: string | number, label: string | number, disabled?: boolean }) => boolean>},// 筛选过滤函数\r\n        content: {type: [Object, Function]},                            // 内容虚拟dom或者渲染函数\r\n        height: {type: Number},                                         // 面板高度，超过会显示自定义滚动条\r\n\r\n        showDebug: {type: Boolean},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number | string | string[]) => true,\r\n        onClick: (option: SelectOption) => true,\r\n    },\r\n    provideRefer: true,\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {propsState} = useProps(props, {\r\n            multipleMaxLimit: useProps.NUMBER,\r\n            multipleMinLimit: useProps.NUMBER,\r\n        })\r\n\r\n        /*插槽*/\r\n        const {slots} = useSlots()\r\n        /*组件引用*/\r\n        const {refs} = useRefs({scroll: Scroll})\r\n        /*收集的 select-option 子组件*/\r\n        const items = SelectPanelCollector.parent()\r\n        /*筛选的出有效的 select-option 子组件*/\r\n        const options = computed(() => items.filter(i => !i.props.group))\r\n        /*当前显示的select-option*/\r\n        const showOptions = computed(() => options.value.filter(o => utils.isShow(o.props)))\r\n        /*当前高亮的option.props.val*/\r\n        const current = ref(null as null | SelectOption)\r\n        /*双向绑定值*/\r\n        const model = useModel(() => props.modelValue as number | string | string[], emit.onUpdateModelValue)\r\n\r\n        const classes = computed(() => [\r\n            'pl-select-panel',\r\n            {\r\n                'pl-select-panel-multiple': props.multiple,\r\n            }\r\n        ])\r\n\r\n        const styles = useStyles(style => {!!props.height && (style.height = unit(props.height))})\r\n\r\n        const utils = {\r\n            /**\r\n             * 用于option判断当前是否已经被选中\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:23\r\n             */\r\n            isSelected: (optionProps: { label: string | number, val: string | number, disabled?: boolean }) => {\r\n                if (!model.value) return false\r\n                if (!props.multiple) {\r\n                    return (model.value as string) == optionProps.val\r\n                } else {\r\n                    return (model.value as string[]).indexOf(optionProps.val! as string) > -1\r\n                }\r\n            },\r\n            isShow: (optionProps: { label: string | number, val: string | number, disabled?: boolean }) => {\r\n                return !props.filterMethod || props.filterMethod(optionProps)\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            /**\r\n             * 处理点击option的动作\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:24\r\n             */\r\n            clickOption: (option: SelectOption) => {\r\n\r\n                if (option.props.disabled) return\r\n\r\n                emit.onClick(option)\r\n\r\n                if (!props.multiple) {\r\n                    model.value = option.props.val\r\n                } else {\r\n                    const newValue: any[] = [...((model.value as string[]) || [])]\r\n                    const index = newValue.indexOf(option.props.val!)\r\n                    if (index > -1) {\r\n                        if (!!propsState.multipleMinLimit && newValue.length <= propsState.multipleMinLimit) {\r\n                            return $$notice.warn(`最少选择 ${propsState.multipleMinLimit} 个选项`)\r\n                        }\r\n                        newValue.splice(index, 1)\r\n                    } else {\r\n                        if (!!propsState.multipleMaxLimit && newValue.length >= propsState.multipleMaxLimit) {\r\n                            return $$notice.warn(`最多选择 ${propsState.multipleMaxLimit} 个选项`)\r\n                        }\r\n                        newValue.push(option.props.val!)\r\n                    }\r\n                    model.value = [...newValue]\r\n                }\r\n            },\r\n        }\r\n\r\n        const methods = {\r\n            /**\r\n             * 高亮上一个元素\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:18\r\n             */\r\n            highlightPrev: () => {\r\n                if (showOptions.value.length === 0) {\r\n                    return\r\n                }\r\n                if (!current.value) {\r\n                    current.value = showOptions.value[showOptions.value.length - 1]\r\n\r\n                    // 滚动到高亮的选项\r\n                    if (!!refs.scroll) {\r\n                        const el = (current.value as any).$el\r\n                        refs.scroll.methods.scrollTop(el.offsetTop, 200)\r\n                    }\r\n                } else {\r\n                    let index = showOptions.value.indexOf(current.value)\r\n                    if (index === 0) {\r\n                        index = showOptions.value.length - 1\r\n                        current.value = showOptions.value[index]\r\n\r\n                        // 滚动到高亮的选项\r\n                        if (!!refs.scroll) {\r\n                            const el = (current.value as any).$el\r\n                            refs.scroll.methods.scrollTop(el.offsetTop, 200)\r\n                        }\r\n                    } else {\r\n                        index--\r\n                        current.value = showOptions.value[index]\r\n\r\n                        // 滚动到高亮的选项\r\n                        if (!!refs.scroll) {\r\n                            const el = (current.value as any).$el\r\n                            const {wrapperScrollTop} = refs.scroll.freezeState\r\n                            if (wrapperScrollTop > el.offsetTop) {\r\n                                refs.scroll.methods.scrollTop(el.offsetTop, 200)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * 高亮下一个元素\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:18\r\n             */\r\n            highlightNext: () => {\r\n                if (showOptions.value.length === 0) {\r\n                    return\r\n                }\r\n                if (!current.value) {\r\n                    current.value = showOptions.value[0]\r\n                } else {\r\n                    let index = showOptions.value.indexOf(current.value)\r\n                    if (index === showOptions.value.length - 1) {\r\n                        index = 0\r\n                        current.value = showOptions.value[index]\r\n\r\n                        // 滚动到高亮的选项\r\n                        if (!!refs.scroll) {\r\n                            refs.scroll.methods.scrollTop(0, 200)\r\n                        }\r\n                    } else {\r\n                        index++\r\n                        current.value = showOptions.value[index]\r\n\r\n                        // 滚动到高亮的选项\r\n                        if (!!refs.scroll) {\r\n                            const el = (current.value as any).$el\r\n                            const {state: {hostHeight}, freezeState: {wrapperScrollTop}} = refs.scroll\r\n                            const scrollTop = el.offsetTop + el.offsetHeight - hostHeight\r\n                            if (scrollTop > 0 && scrollTop > wrapperScrollTop) {\r\n                                refs.scroll.methods.scrollTop(scrollTop, 200)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n            },\r\n            /**\r\n             * 选中当前高亮的元素\r\n             * @author  韦胜健\r\n             * @date    2020/6/8 9:18\r\n             */\r\n            selectHighlight: () => {\r\n                if (showOptions.value.length === 0) {\r\n                    return\r\n                }\r\n                if (!current.value) {\r\n                    methods.highlightNext()\r\n                }\r\n                if (!!current.value) {\r\n                    handler.clickOption(current.value)\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                props,\r\n                handler,\r\n                methods,\r\n                utils,\r\n                current,\r\n            },\r\n            render: () => {\r\n\r\n                const inner = [\r\n                    (options.value.length === 0 || showOptions.value.length === 0) ? (\r\n                        <div class=\"pl-select-panel-empty-text\">\r\n                            <pl-icon icon=\"el-icon-nodata\"/>\r\n                            {options.value.length === 0 ? props.noDataText : props.noMatchText}\r\n                        </div>\r\n                    ) : null,\r\n                    slots.default(),\r\n                    !!props.content ? ((typeof props.content === \"function\" ? props.content() : props.content)) : null,\r\n                    !!props.showDebug ? (\r\n                        <div class=\"pl-select-panel-debug\">\r\n                            {options.value.map(option => <div>{option.props.label}__{option.props.val}__{option.props.disabled}</div>)}\r\n                        </div>\r\n                    ) : null,\r\n                ].filter(Boolean)\r\n\r\n                const content: any = !!props.height ? (\r\n                    <pl-scroll fitHostWidth ref=\"scroll\">\r\n                        {inner}\r\n                    </pl-scroll>\r\n                ) : inner\r\n\r\n                return (\r\n                    <div class={classes.value} style={styles.value}>\r\n                        {content}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport default Panel\r\n\r\nexport const SelectPanelCollector = useCollect(() => ({\r\n    parent: Panel,\r\n    child: Option,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport Option, {SelectOption} from './select-option'\r\nimport {computed} from 'vue';\r\nimport Panel from './select-panel'\r\n\r\nconst Group = designComponent({\r\n    name: 'pl-select-group',\r\n    props: {\r\n        label: {type: String},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots(['label'], true)\r\n        const options = (SelectGroupCollector as any).parent() as SelectOption[]\r\n        const panel = Panel.use.inject(null)\r\n        const isShow = computed(() => !panel || options.filter((option) => !option.props.group).filter(o => panel.utils.isShow(o.props)).length > 0)\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <>\r\n                        {isShow.value && (slots.label.isExist() || !!props.label) && (\r\n                            <pl-select-option class=\"pl-select-group\" group label=\"\" val=\"\">\r\n                                <pl-icon icon=\"el-icon-list\"/>\r\n                                {slots.label(props.label)}\r\n                            </pl-select-option>\r\n                        )}\r\n                        {slots.default()}\r\n                    </>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport default Group\r\n\r\nexport const SelectGroupCollector = useCollect(() => ({\r\n    parent: Group,\r\n    child: Option,\r\n}))","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {SelectPanelCollector} from \"./select-panel\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {computed} from 'vue';\r\nimport {SelectGroupCollector} from \"./select-group\";\r\nimport {SelectCollector} from \"./select\";\r\n\r\nconst Option = designComponent({\r\n    name: 'pl-select-option',\r\n    props: {\r\n        label: {type: [String, Number], required: true},\r\n        val: {type: [String, Number], required: true},\r\n        icon: {type: String},\r\n        disabled: {type: Boolean},\r\n\r\n        group: {type: Boolean},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {slots} = useSlots()\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        SelectCollector.child({injectDefaultValue: null, sort: () => refs.el})\r\n        const group = SelectGroupCollector.child({injectDefaultValue: null})\r\n        const panel = SelectPanelCollector.child({injectDefaultValue: null, sort: () => refs.el})\r\n        const isShow = computed(() => (props.group || !panel || panel.utils.isShow(props)))\r\n        const isSelected = computed(() => !!panel && panel.utils.isSelected(props))\r\n\r\n        const refer = {\r\n            props,\r\n            refs,\r\n        }\r\n\r\n        const classes = useClass(() => [\r\n            'pl-select-option',\r\n            {\r\n                'pl-select-option-disabled': props.disabled,\r\n                'pl-select-option-show': isShow.value,\r\n                'pl-select-option-selected': isSelected.value,\r\n                'pl-select-option-highlight': !!panel && !!panel.current.value && panel.current.value.props === props,\r\n                'pl-select-option-group-child': !!group && !props.group,\r\n            }\r\n        ])\r\n\r\n        const handler = {\r\n            click: () => {\r\n                if (props.group) return\r\n                !!panel && panel.handler.clickOption(refer)\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer,\r\n            render: () => {\r\n                return (\r\n                    <div\r\n                        {...{\r\n                            ref: \"el\",\r\n                            label: props.label,\r\n                            val: props.val,\r\n                            icon: props.icon,\r\n                            class: classes.value,\r\n                            onClick: handler.click,\r\n                        }}>\r\n                        {!!panel && isShow.value && <>\r\n                            {!!panel.props.multiple && !props.group ? <pl-checkbox customReadonly modelValue={isSelected.value} class=\"pl-select-option-checkbox\"/> : null}\r\n                            {!!props.icon && <pl-icon icon={props.icon} class=\"pl-select-option-icon\"/>}\r\n                            {slots.default(props.label)}\r\n                        </>}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport default Option\r\nexport type SelectOption = typeof Option.use.class","import {createAgentGetter} from \"../popper/edit/createAgentGetter\";\r\nimport {App} from 'vue';\r\n\r\nexport const SelectServiceGetter = createAgentGetter({\r\n    name: 'select',\r\n    render: (attrs) => {\r\n        return <pl-select-panel {...attrs}/>\r\n    },\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n        sizeEqual: true,\r\n        arrow: false,\r\n    },\r\n    defaultRenderAttrs: {\r\n        async onChange() {\r\n            let renderAttrs: any = this.state.option.serviceOption.renderAttrs\r\n            if (typeof renderAttrs === \"function\") renderAttrs = renderAttrs()\r\n            /*非多选的情况下，默认点击关闭下拉框*/\r\n            if (!renderAttrs.multiple) {\r\n                this.hide()\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\nexport default {\r\n    install(app: App) {\r\n        app.mixin({\r\n            beforeCreate(): void {\r\n                Object.defineProperty(this, '$select', {\r\n                    get() {\r\n                        const service = SelectServiceGetter(this)\r\n                        return service\r\n                    },\r\n                })\r\n            }\r\n        })\r\n    },\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport './select.scss'\r\nimport {StyleProps, useStyle} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Input from '../input'\r\nimport Option, {SelectOption} from \"./select-option\";\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {SelectServiceGetter} from \"./select-service\";\r\nimport {computed, ref} from 'vue';\r\nimport {useCollect} from \"../../use/useCollect\";\r\nimport {ie} from \"plain-utils/utils/ie\";\r\nimport {handleKeyboard} from \"../keyboard\";\r\nimport Panel from './select-panel'\r\nimport {useModel} from \"../../use/useModel\";\r\n\r\nconst Props = {\r\n    ...EditProps,\r\n    ...StyleProps,\r\n\r\n    modelValue: {type: [String, Number, Array]},\r\n    filterable: {type: Boolean, default: true},                     // 是否可以输入筛选\r\n    inputProps: {type: Object},                                     // input组件绑定属性对象\r\n\r\n    multiple: {type: Boolean},                                      // 是否多选\r\n    multipleMaxLimit: {type: Number},                               // 多选最多选择个数\r\n    multipleMinLimit: {type: Number},                               // 多选最少选择个数\r\n    collapseTags: {type: Boolean, default: true},                   // 多选模式下，超过三个选项，其他的将省略显示\r\n\r\n    noMatchText: {type: String, default: '暂无匹配数据'},            // 筛选无数据时展示的文本\r\n    noDataText: {type: String, default: '暂无数据'},                // 无数据时显示的文本\r\n    filterMethod: Function,                                         // 筛选过滤函数\r\n}\r\n\r\nconst Select = designComponent({\r\n    name: 'pl-select',\r\n    props: {\r\n        ...Props,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: number | string | string[]) => true,\r\n        onClick: (option: SelectOption) => true,\r\n\r\n        onSpace: (e: KeyboardEvent) => true,\r\n        onEnter: (e: KeyboardEvent) => true,\r\n        onUp: (e: KeyboardEvent) => true,\r\n        onDown: (e: KeyboardEvent) => true,\r\n        onEsc: (e: KeyboardEvent) => true,\r\n\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        useStyle()\r\n        const {slots} = useSlots()\r\n        const {refs} = useRefs({input: Input,})\r\n\r\n        /*对 pl-select-panel 的引用*/\r\n        let panel = null as typeof Panel.use.class | null\r\n\r\n        /*---------------------------------------state-------------------------------------------*/\r\n\r\n        const model = useModel(() => props.modelValue as number | string | string[] | undefined, event.emit.onUpdateModelValue)\r\n        const filterText = ref(null as string | null)\r\n        const agentState = useEditPopperAgent({\r\n            event,\r\n            serviceGetter: SelectServiceGetter,\r\n            option: {\r\n                reference: () => refs.input as any,\r\n                renderAttrs: () => ({\r\n                    ref: r => panel = r,\r\n                    ...(Object.keys(Props).reduce((ret: any, key) => {\r\n                        ret[key] = (props as any)[key]\r\n                        return ret\r\n                    }, {})),\r\n                    modelValue: model.value,\r\n                    height: popperHeight.value,\r\n                    content: slots.default,\r\n                    filterMethod: utils.filterMethod,\r\n                    onChange: handler.onServiceChange,\r\n                    onClick: event.emit.onClick,\r\n                }),\r\n                popperAttrs: ({\r\n                    onMousedownPopper: () => agentState.state.focusCounter++,\r\n                    onClickPopper: () => refs.input!.methods.focus(),\r\n                    onHide: () => filterText.value = null,\r\n                }),\r\n            },\r\n        })\r\n\r\n        /*---------------------------------------utils-------------------------------------------*/\r\n\r\n        const utils = {\r\n            filterMethod: (option: { label?: string, val: string, disabled: boolean }) => {\r\n                if (!!props.filterMethod) return props.filterMethod(filterText.value, option)\r\n                return !!filterText.value && !!filterText.value.trim() ? (!!option.label && option.label.indexOf(filterText.value) > -1) : true\r\n            }\r\n        }\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        /**\r\n         * 收集的option实例\r\n         * @author  韦胜健\r\n         * @date    2020/6/8 11:16\r\n         */\r\n        const items = SelectCollector.parent()\r\n        /**\r\n         * 有效的 pl-select-option\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 10:06\r\n         */\r\n        const formatData = computed(() => items.filter(i => !i.props.group))\r\n        /**\r\n         * popper应该的高度\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 10:06\r\n         */\r\n        const popperHeight = computed(() => formatData.value.length > 6 ? 256 : null)\r\n        /**\r\n         * 显示值\r\n         * @author  韦胜健\r\n         * @date    2020/6/8 11:16\r\n         */\r\n        const displayValue = computed(() => {\r\n            if (!props.multiple) {\r\n                for (let i = 0; i < formatData.value.length; i++) {\r\n                    const item = formatData.value[i];\r\n                    if (item.props.val === model.value) {\r\n                        return item.props.label\r\n                    }\r\n                }\r\n                return model.value\r\n            } else {\r\n                let strings: string[] = []\r\n                if (!!model.value && Array.isArray(model.value)) {\r\n                    for (let i = 0; i < formatData.value.length; i++) {\r\n                        const item = formatData.value[i];\r\n                        if (model.value.indexOf(item.props.val! as string) > -1) {\r\n                            strings.push(item.props.label! as string)\r\n                        }\r\n                    }\r\n                }\r\n                return strings.join('').trim()\r\n            }\r\n        })\r\n\r\n        /**\r\n         * 给input组件传递的属性\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 11:21\r\n         */\r\n        const inputProps = computed(() => Object.assign({}, props.inputProps || {}))\r\n\r\n        /**\r\n         * 当前显示的空值占位符\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 11:21\r\n         */\r\n        const placeholderValue = computed(() => (agentState.isShow.value ? displayValue.value || inputProps.value.placeholder : inputProps.value.placeholder) || '')\r\n\r\n        /**\r\n         * 给input组件绑定的目标对象\r\n         * @author  韦胜健\r\n         * @date    2020/12/4 11:21\r\n         */\r\n        const inputBinding = computed(() => {\r\n            /*onEnter不要了，只要剩余的时间监听器*/\r\n            const {onEnter, ...inputHandler} = agentState.inputHandler\r\n\r\n            return {\r\n                ref: 'input',\r\n                class: [\r\n                    'pl-select',\r\n                    {\r\n                        'pl-input-tags': !!props.multiple,\r\n                        'pl-select-input-show': agentState.isShow.value,\r\n                    }\r\n                ],\r\n\r\n                modelValue: (props.filterable && agentState.isShow.value) ? filterText.value : displayValue.value,\r\n                placeValue: displayValue.value,\r\n                inputReadonly: !props.filterable,\r\n                placeholder: placeholderValue.value,\r\n                suffixIcon: 'el-icon-arrow-down',\r\n                clearIcon: true,\r\n                isFocus: agentState.state.focusCounter > 0,\r\n                clearHandler: handler.onInputClear,\r\n\r\n                ...inputHandler,\r\n                onChange: handler.onInputChange,\r\n                onKeydown: handler.onInputKeydown,\r\n\r\n                ...inputProps.value,\r\n            }\r\n        })\r\n\r\n        const multipleTags = computed(() => {\r\n            if (!model.value) {\r\n                return []\r\n            }\r\n            if (!Array.isArray(model.value)) {\r\n                console.error('The value of multiple select should be array')\r\n                return []\r\n            }\r\n            if (!formatData.value || formatData.value.length === 0) return []\r\n            return formatData.value.filter(option => (model.value as any[]).indexOf(option.props.val!) > -1)\r\n        })\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            onInputKeydown: handleKeyboard({\r\n                space: (e) => {\r\n                    if (props.multiple && agentState.isShow.value) {\r\n                        e.stopPropagation()\r\n                        e.preventDefault()\r\n                        panel!.methods.selectHighlight()\r\n                    }\r\n                    event.emit.onSpace(e)\r\n                },\r\n                enter: (e) => {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                    if (agentState.isShow.value) {\r\n                        panel!.methods.selectHighlight()\r\n                    } else {\r\n                        agentState.methods.show()\r\n                    }\r\n                },\r\n                up: (e) => {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                    if (!!agentState.isShow.value) {\r\n                        panel!.methods.highlightPrev()\r\n                    }\r\n                },\r\n                down: (e) => {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                    if (!!agentState.isShow.value) {\r\n                        panel!.methods.highlightNext()\r\n                    }\r\n                },\r\n                esc: (e) => {\r\n                    e.stopPropagation()\r\n                    e.preventDefault()\r\n                    if (!!agentState.isShow.value) {\r\n                        agentState.methods.hide()\r\n                    }\r\n                },\r\n            }),\r\n            onServiceChange: (val: any) => model.value = val,\r\n            onInputClear: () => model.value = undefined,\r\n            onInputChange: (val: string | null) => {\r\n                filterText.value = val\r\n                if (!agentState.isShow.value && ie) {\r\n                    agentState.methods.show()\r\n                }\r\n            },\r\n            onClickItemCloseIcon: (item: SelectOption, index: number) => {\r\n                index = (model.value as any[]).indexOf(item.props.val!)\r\n                if (index > -1) {\r\n                    const value = [...(model.value as any[])]\r\n                    value.splice(index, 1)\r\n                    model.value = [...value]\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <pl-input {...inputBinding.value} v-slots={{\r\n                    hidden: slots.default,\r\n                    default: !props.multiple ? null : () => (\r\n                        <pl-input-inner-tags\r\n                            data={multipleTags.value}\r\n                            collapseTags={props.collapseTags}\r\n                            v-slots={{\r\n                                default: ({item, index}: { item: SelectOption, index: number }) => [\r\n                                    <span>{item.props.label}</span>,\r\n                                    <pl-icon icon=\"el-icon-close\" onClick={() => handler.onClickItemCloseIcon(item, index)}/>\r\n                                ]\r\n                            }}\r\n                        />\r\n                    )\r\n                }}/>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport default Select\r\n\r\nexport const SelectCollector = useCollect(() => ({\r\n    parent: Select,\r\n    child: Option,\r\n}))","import select from './select'\r\nimport SelectOption from './select-option'\r\nimport SelectGroup from './select-group'\r\nimport SelectPanel from './select-panel'\r\nimport SelectService from './select-service'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport Dropdown from '../dropdown'\r\n\r\nexport default createComponentPlugin(select, {\r\n    exposeComponents: {\r\n        SelectOption,\r\n        SelectGroup,\r\n        SelectPanel,\r\n    },\r\n    plugins: [\r\n        Dropdown,\r\n        SelectService,\r\n    ],\r\n    expose: {\r\n        SelectService\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {useNumber} from \"../../use/useNumber\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from 'plain-utils/string/unit';\r\nimport {computed} from 'vue';\r\nimport {HTMLInputEvent} from \"../../shims\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-date-time-input',\r\n    props: {\r\n        ...EditProps,\r\n        width: {type: [String, Number], default: 138},\r\n        modelValue: {type: String},\r\n        displayFormat: {type: String},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: string) => true,\r\n        onFocus: (e: Event) => true,\r\n        onBlur: (e: Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {refs} = useRefs({\r\n            input: HTMLInputElement,\r\n        })\r\n\r\n        const {editComputed} = useEdit()\r\n\r\n        const {numberState} = useNumber(props, ['width'])\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue, {autoEmit: false})\r\n\r\n        const styles = useStyles(style => {style.width = unit(numberState.width)})\r\n\r\n        const regexp = computed(() => new RegExp('^' + props.displayFormat!.replace(/[a-zA-Z]/g, '\\\\d') + '$'))\r\n\r\n        const methods = {\r\n            focus: () => {\r\n                refs.input.focus()\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            input: (e: HTMLInputEvent) => {\r\n                model.value = e.target.value\r\n                if (!model.value || regexp.value.test(model.value)) {\r\n                    emit.onUpdateModelValue(model.value)\r\n                }\r\n            },\r\n            blur: (e: Event) => {\r\n                model.value = props.modelValue\r\n                emit.onBlur(e)\r\n            },\r\n            focus: (e: Event) => {\r\n                emit.onFocus(e)\r\n            },\r\n        }\r\n\r\n\r\n        return {\r\n            refer: {\r\n                refs,\r\n                methods,\r\n            },\r\n            render: () => (\r\n                <input type=\"text\"\r\n                       ref=\"input\"\r\n                       class=\"pl-date-time-inner-input pl-input-custom-inner-input\"\r\n                       style={styles.value}\r\n                       value={model.value}\r\n                       onInput={handler.input as any}\r\n                       onBlur={handler.blur}\r\n                       onFocus={handler.focus}\r\n                       disabled={editComputed.value.disabled as any}\r\n                       readonly={editComputed.value.readonly as any}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import {ModelType} from \"../../shims\";\r\nimport {useStyle} from \"../../use/useStyle\";\r\nimport {useEdit} from \"../../use/useEdit\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport DateTimeInput from './date-time-input'\r\nimport Input from '../input'\r\nimport {computed} from 'vue';\r\nimport {EditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {handleKeyboard} from \"../keyboard\";\r\n\r\nexport function useDateTime(\r\n    {\r\n        value,\r\n        start,\r\n        end,\r\n        props,\r\n        agentState,\r\n        emit,\r\n    }: {\r\n        value: ModelType,\r\n        start: ModelType,\r\n        end: ModelType,\r\n        props: {\r\n            range?: boolean,\r\n        },\r\n        agentState: EditPopperAgent,\r\n        emit: {\r\n            onBlur: Function\r\n        },\r\n    }\r\n) {\r\n\r\n    useStyle()\r\n\r\n    const {refs} = useRefs({\r\n        valueInput: DateTimeInput,\r\n        startInput: DateTimeInput,\r\n        endInput: DateTimeInput,\r\n        plInput: Input,\r\n    })\r\n\r\n    const inputValue = computed(() => {\r\n        return !props.range ? value.value : ((start.value || '') + (end.value || ''))\r\n    })\r\n\r\n    const handler = {\r\n        clearHandler: () => {\r\n            if (!props.range) {\r\n                value.value = null\r\n            } else {\r\n                start.value = null\r\n                end.value = null\r\n            }\r\n        },\r\n        clickInput() {\r\n            if (!props.range) {\r\n                agentState.methods.toggle()\r\n            } else {\r\n                agentState.methods.show()\r\n            }\r\n        },\r\n        customInputFocus(e: Event) {\r\n            agentState.inputHandler.onFocus(e)\r\n        },\r\n        async customInputBlur(e: Event) {\r\n            if (!props.range) {\r\n                agentState.inputHandler.onBlur(e)\r\n            } else {\r\n                await delay(0)\r\n                if ([\r\n                    refs.startInput!.refs.input,\r\n                    refs.endInput!.refs.input,\r\n                ].indexOf(document.activeElement as any) === -1) {\r\n                    agentState.state.focusCounter--\r\n                    if (agentState.state.focusCounter === 0) {\r\n                        emit.onBlur()\r\n                        agentState.methods.hide()\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        keydown: handleKeyboard({\r\n            enter: agentState.inputHandler.onEnter,\r\n            esc: agentState.inputHandler.onEsc,\r\n        })\r\n    }\r\n\r\n    return {\r\n        refs,\r\n        inputValue,\r\n        handler,\r\n    }\r\n\r\n}","import input from './date-time-input'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {useDateTime} from \"./useDateTime\";\r\n\r\nexport default createComponentPlugin(input, {\r\n    expose: {\r\n        useDateTime,\r\n    }\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {TimePublicProps} from \"./time-panel.utils\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {PlainDate} from \"../../../utils/PlainDate\";\r\nimport {computed} from 'vue';\r\nimport './time-range-panel.scss'\r\n\r\nexport enum TimeRangePanelType {\r\n    start = 'start',\r\n    end = 'end',\r\n}\r\n\r\nexport default designComponent({\r\n    name: 'pl-time-range-panel',\r\n    props: {\r\n        start: {type: String},\r\n        end: {type: String},\r\n        ...TimePublicProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | undefined, type: TimeRangePanelType) => true,\r\n        onUpdateStart: (val?: string) => true,\r\n        onUpdateEnd: (val?: string) => true,\r\n        onMousedownStartPanel: (e: MouseEvent) => true,\r\n        onMousedownEndPanel: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const start = useModel(() => props.start, emit.onUpdateStart)\r\n        const end = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const formatData = computed(() => {\r\n            const {displayFormat, valueFormat} = props\r\n            return {\r\n                start: new PlainDate(start.value, displayFormat, valueFormat),\r\n                end: new PlainDate(end.value, displayFormat, valueFormat),\r\n                max: new PlainDate(props.max, displayFormat, valueFormat),\r\n                min: new PlainDate(props.min, displayFormat, valueFormat)\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            onStartChange: (value?: string) => {\r\n                start.value = value\r\n                emit.onUpdateModelValue(value, TimeRangePanelType.start)\r\n\r\n                const {end: endPd, start: startPd} = formatData.value\r\n\r\n                if (endPd.isNull || startPd.Hms! > endPd.Hms) {\r\n                    end.value = start.value\r\n                    emit.onUpdateModelValue(end.value, TimeRangePanelType.end)\r\n                }\r\n            },\r\n            onEndChange: (value?: string) => {\r\n                end.value = value\r\n                emit.onUpdateModelValue(value, TimeRangePanelType.end)\r\n                const {end: endPd, start: startPd} = formatData.value\r\n\r\n                if (startPd.isNull || endPd.Hms! < startPd.Hms) {\r\n                    start.value = end.value\r\n                    emit.onUpdateModelValue(start.value, TimeRangePanelType.start)\r\n                }\r\n            },\r\n        }\r\n\r\n        const binding = computed(() => {\r\n            const publicProps = Object.keys(TimePublicProps).reduce((ret: any, key) => {\r\n                ret[key] = (props as any)[key]\r\n                return ret\r\n            }, {})\r\n            const {max, min} = props\r\n            const publicBinding = {\r\n                ...publicProps,\r\n                max,\r\n                min,\r\n                disableChangeOnScroll: true,\r\n            }\r\n            return {\r\n                start: {\r\n                    ...publicBinding,\r\n                    modelValue: start.value,\r\n                    onChange: handler.onStartChange,\r\n                    onMousedown: emit.onMousedownStartPanel,\r\n                },\r\n                end: {\r\n                    ...publicBinding,\r\n                    modelValue: end.value,\r\n                    onChange: handler.onEndChange,\r\n                    onMousedown: emit.onMousedownEndPanel,\r\n                },\r\n            }\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-time-range-panel\">\r\n                    <pl-time-base-panel {...binding.value.start}/>\r\n                    <pl-time-base-panel {...binding.value.end}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","export const TimePublicProps = {\r\n    displayFormat: {type: String, default: 'HH:mm:ss'},\r\n    valueFormat: {type: String, default: 'HH:mm:ss'},\r\n    max: {type: String},\r\n    min: {type: String},\r\n    layout: {type: Array, default: () => (['h', 'm', 's'])},\r\n    custom: Function,\r\n    checkDisabled: Function,\r\n}","import {designComponent} from \"../../../use/designComponent\";\r\nimport {TimePublicProps} from \"./time-panel.utils\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {nextTick, computed} from 'vue';\r\nimport {TimeRangePanelType} from \"./time-range-panel\";\r\n\r\nexport const TimePanelProps = {\r\n    modelValue: {type: String},\r\n    start: {type: String},\r\n    end: {type: String},\r\n    range: {type: Boolean},\r\n    ...TimePublicProps,\r\n}\r\n\r\nexport default designComponent({\r\n    name: 'pl-time-panel',\r\n    props: {\r\n        ...TimePanelProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | undefined, type: TimeRangePanelType) => true,\r\n        onUpdateStart: (val?: string) => true,\r\n        onUpdateEnd: (val?: string) => true,\r\n\r\n        onMousedownBasePanel: (e: MouseEvent) => true,\r\n        onMousedownStartPanel: (e: MouseEvent) => true,\r\n        onMousedownEndPanel: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue as any)\r\n        const start = useModel(() => props.start, emit.onUpdateStart)\r\n        const end = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const handler = {\r\n            onBaseChange: async (val?: string) => {\r\n                await nextTick()\r\n                model.value = val\r\n            },\r\n            onRangeChange: async (val: string | undefined, type: TimeRangePanelType) => {\r\n                await nextTick()\r\n                if (type === TimeRangePanelType.start) {\r\n                    start.value = val\r\n                } else if (type === TimeRangePanelType.end) {\r\n                    end.value = val\r\n                }\r\n                emit.onUpdateModelValue(val, type)\r\n            },\r\n        }\r\n\r\n        const binding = computed(() => {\r\n\r\n            const publicProps = Object.keys(TimePublicProps).reduce((ret: any, key) => {\r\n                ret[key] = (props as any)[key]\r\n                return ret\r\n            }, {})\r\n\r\n            return {\r\n                base: {\r\n                    ...publicProps,\r\n                    modelValue: model.value,\r\n                    onChange: handler.onBaseChange,\r\n                    onMousedown: emit.onMousedownBasePanel,\r\n                },\r\n                range: {\r\n                    ...publicProps,\r\n                    start: start.value,\r\n                    end: end.value,\r\n                    onChange: handler.onRangeChange,\r\n                    onMousedownStartPanel: emit.onMousedownStartPanel,\r\n                    onMousedownEndPanel: emit.onMousedownEndPanel,\r\n                },\r\n            }\r\n        })\r\n\r\n        return {\r\n            render: () => (\r\n                !props.range ?\r\n                    <pl-time-base-panel class=\"pl-time-panel\" {...binding.value.base} key=\"base\"/> :\r\n                    <pl-time-range-panel class=\"pl-time-panel\" {...binding.value.range} key=\"range\"/>\r\n            )\r\n        }\r\n\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {StyleProps} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {TimePanelProps} from \"./panel/time-panel\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {computed} from 'vue';\r\nimport {PlainDate} from \"../../utils/PlainDate\";\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {TimeServiceGetter} from \"./servce/time-service\";\r\nimport {TimeRangePanelType} from \"./panel/time-range-panel\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {useDateTime} from \"../date-time-input/useDateTime\";\r\nimport './time.scss'\r\n\r\nexport default designComponent({\r\n    name: 'pl-time',\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n        ...TimePanelProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: string) => true,\r\n        onUpdateStart: (val?: string) => true,\r\n        onUpdateEnd: (val?: string) => true,\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue, emit.onUpdateModelValue)\r\n        const startModel = useModel(() => props.start, emit.onUpdateStart)\r\n        const endModel = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const formatData = computed(() => ({\r\n            value: new PlainDate(model.value, props.displayFormat, props.valueFormat),\r\n            start: new PlainDate(startModel.value, props.displayFormat, props.valueFormat),\r\n            end: new PlainDate(endModel.value, props.displayFormat, props.valueFormat),\r\n        }))\r\n\r\n        const serviceHandler = {\r\n            onChange: (val: string | undefined, type?: TimeRangePanelType) => {\r\n                // console.log('service change', {val, type})\r\n                if (!props.range) {\r\n                    model.value = val\r\n                } else {\r\n                    if (type === TimeRangePanelType.start) {\r\n                        startModel.value = val\r\n                    } else {\r\n                        endModel.value = val\r\n                    }\r\n                }\r\n            },\r\n            onMousedownBasePanel: async () => {\r\n                agentState.state.focusCounter++\r\n                await delay(0)\r\n                refs.valueInput!.methods.focus()\r\n            },\r\n            onMousedownStartPanel: async () => {\r\n                agentState.state.focusCounter++\r\n                await delay(0)\r\n                refs.startInput!.methods.focus()\r\n            },\r\n            onMousedownEndPanel: async () => {\r\n                agentState.state.focusCounter++\r\n                await delay(0)\r\n                refs.endInput!.methods.focus()\r\n            }\r\n        }\r\n\r\n        const agentState = useEditPopperAgent({\r\n            event: {emit},\r\n            serviceGetter: TimeServiceGetter,\r\n            option: {\r\n                reference: () => refs.plInput as any,\r\n                renderAttrs: () => ({\r\n                    ...(Object.keys(TimePanelProps).reduce((ret: any, key) => {\r\n                        ret[key] = (props as any)[key]\r\n                        return ret\r\n                    }, {})),\r\n                    modelValue: model.value,\r\n                    start: startModel.value,\r\n                    end: endModel.value,\r\n                    ...serviceHandler,\r\n                })\r\n            },\r\n        })\r\n\r\n        const {\r\n            refs,\r\n            handler,\r\n            inputValue,\r\n        } = useDateTime({\r\n            value: model,\r\n            start: startModel,\r\n            end: endModel,\r\n            props,\r\n            agentState,\r\n            emit,\r\n        })\r\n\r\n        const customHandler = {\r\n            change: (val: string, type: 'start' | 'end' | 'value') => {\r\n                const {value: valuePd, start: startPd, end: endPd} = formatData.value\r\n\r\n                switch (type) {\r\n                    case \"value\":\r\n                        if (!val) {\r\n                            valuePd.setValue(undefined)\r\n                            model.value = undefined\r\n                            return;\r\n                        }\r\n                        if (valuePd.format(valuePd.parseDisplayString(val)) != val) {\r\n                            return;\r\n                        }\r\n\r\n                        valuePd.setDisplayValue(val)\r\n                        model.value = valuePd.valueString!\r\n\r\n                        break\r\n                    case \"start\":\r\n                        if (!val) {\r\n                            return;\r\n                        }\r\n                        if (startPd.format(startPd.parseDisplayString(val)) != val) {\r\n                            return;\r\n                        }\r\n\r\n                        startPd.setDisplayValue(val)\r\n                        startModel.value = startPd.valueString as string\r\n\r\n                        if (endPd.isNull || startPd.Hms! > endPd.Hms) {\r\n                            endModel.value = startModel.value\r\n                        }\r\n\r\n                        break\r\n\r\n                    case \"end\":\r\n                        if (!val) {\r\n                            return;\r\n                        }\r\n                        if (endPd.format(endPd.parseDisplayString(val)) != val) {\r\n                            return;\r\n                        }\r\n\r\n                        endPd.setDisplayValue(val)\r\n                        endModel.value = endPd.valueString as string\r\n\r\n                        if (startPd.isNull || endPd.Hms! < startPd.Hms) {\r\n                            startModel.value = endModel.value\r\n                        }\r\n\r\n                        break\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <pl-input\r\n                    ref=\"plInput\"\r\n                    class=\"pl-time pl-input-custom\"\r\n                    modelValue={inputValue.value}\r\n                    suffixIcon=\"el-icon-time\"\r\n                    clearIcon\r\n                    isFocus={agentState.state.focusCounter > 0}\r\n                    width={null}\r\n                    inputInnerTabindex={null}\r\n                    clearHandler={handler.clearHandler}\r\n                    onClickInput={handler.clickInput}\r\n                    onKeydown={handler.keydown}>\r\n                    <div{...{class: 'pl-input-custom-inner', range: String(props.range)}}>\r\n                        {!props.range ? (\r\n                            <pl-date-time-input\r\n                                ref=\"valueInput\"\r\n                                modelValue={formatData.value.value.displayString}\r\n                                displayFormat={props.displayFormat}\r\n                                onChange={(val: string) => customHandler.change(val, 'value')}\r\n                                onFocus={handler.customInputFocus}\r\n                                onBlur={handler.customInputBlur}/>\r\n                        ) : (\r\n                            <>\r\n                                <pl-date-time-input\r\n                                    ref=\"startInput\"\r\n                                    width=\"100\"\r\n                                    modelValue={formatData.value.start.displayString}\r\n                                    displayFormat={props.displayFormat}\r\n                                    onChange={(val: string) => customHandler.change(val, 'start')}\r\n                                    onFocus={handler.customInputFocus}\r\n                                    onBlur={handler.customInputBlur}/>\r\n                                <span>~</span>\r\n                                <pl-date-time-input\r\n                                    ref=\"endInput\"\r\n                                    width=\"100\"\r\n                                    modelValue={formatData.value.end.displayString}\r\n                                    displayFormat={props.displayFormat}\r\n                                    onChange={(val: string) => customHandler.change(val, 'end')}\r\n                                    onFocus={handler.customInputFocus}\r\n                                    onBlur={handler.customInputBlur}/>\r\n                            </>)\r\n                        }\r\n                    </div>\r\n                </pl-input>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {EditProps, useEdit} from \"../../../use/useEdit\";\r\nimport {useRefs} from \"../../../use/useRefs\";\r\nimport Scroll from '../../scroll'\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {computed, nextTick, onMounted, PropType} from 'vue';\r\nimport {zeroize} from \"plain-utils/string/zeroize\";\r\nimport {findOne} from \"plain-utils/object/findOne\";\r\nimport './time-base-column.scss'\r\nimport {useRefList} from \"../../../use/useRefList\";\r\n\r\nconst size = 24;\r\n\r\nexport default designComponent({\r\n    name: 'pl-time-base-column',\r\n    props: {\r\n        ...EditProps,\r\n\r\n        layout: {type: String, default: 'h'},   // 模式，h：时，m：分，s：秒\r\n        modelValue: {required: true},// 当前值\r\n        max: {type: Number},                    // 最大值\r\n        min: {type: Number},                    // 最小值\r\n        custom: {type: Function as PropType<(layout: string) => number[]>},// 自定义选项函数\r\n        checkDisabled: Function,                // 用来判断选项是否禁用的函数\r\n        disableChangeOnScroll: {type: Boolean}, // 是否禁用在滚动的时候触发更新值动作\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: number) => true,\r\n        onClickItem: (i: number) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {editComputed} = useEdit()\r\n\r\n        const {refs} = useRefs({scroll: Scroll,})\r\n        const liList = useRefList<HTMLLIElement>()\r\n\r\n        const model = useModel(() => props.modelValue as any, event.emit.onUpdateModelValue, {onChange: () => nextTick().then(methods.resetPosition)})\r\n\r\n        const options = computed(() => {\r\n            if (!!props.custom) {\r\n                return props.custom(props.layout).map(item => zeroize(item, 2))\r\n            }\r\n            let count = props.layout === 'h' ? 24 : 60\r\n            let options: string[] = []\r\n            for (let i = 0; i < count; i++) {\r\n                options.push(zeroize(i, 2))\r\n            }\r\n            return options\r\n        })\r\n\r\n        const methods = {\r\n            resetPosition: () => {\r\n                let value = model.value || 0\r\n                let start = 0\r\n                let find = findOne(options.value, item => Number(item) == value, true) as { item: string, index: number }\r\n                if (!!find.item) {\r\n                    start = find.index\r\n                    refs.scroll!.methods.scroll({y: liList[start].offsetTop}, {noEmitScroll: true})\r\n                }\r\n            },\r\n        }\r\n\r\n        const utils = {\r\n            checkDisabled: (item: string | number) => {\r\n                item = Number(item)\r\n                if (editComputed.value.disabled) return true\r\n                if (!!props.checkDisabled && props.checkDisabled(item, props.layout)) return true\r\n\r\n                if (props.max != null && props.max < item) return true\r\n                if (props.min != null && props.min > item) return true\r\n                return false\r\n            }\r\n        }\r\n\r\n        const handler = {\r\n            clickItem: (item: string | number) => {\r\n                item = Number(item)\r\n                if (utils.checkDisabled(item)) {\r\n                    return\r\n                }\r\n                model.value = item\r\n                event.emit.onClickItem(item)\r\n                methods.resetPosition()\r\n            },\r\n            onScroll: (e: any) => {\r\n                if (props.disableChangeOnScroll) {\r\n                    return\r\n                }\r\n                let index = Math.max(0, Math.min(options.value.length - 1, Math.floor(e.target.scrollTop / size)))\r\n                const val = options.value[index] == null ? null : Number(options.value[index])\r\n                if (val != null && val !== model.value && !utils.checkDisabled(val)) {\r\n                    model.value = val\r\n                }\r\n            }\r\n        }\r\n\r\n        onMounted(methods.resetPosition)\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-time-base-column\">\r\n                    <pl-scroll ref=\"scroll\" onScroll={handler.onScroll}>\r\n                        <ul class=\"pl-time-base-column-list\">\r\n                            {[1, 2, 3].map((item, index) => (\r\n                                <li\r\n                                    ref={val => liList[index] = val as any}\r\n                                    class=\"pl-time-base-column-item\"\r\n                                    key={-item}/>)\r\n                            )}\r\n\r\n                            {options.value.map((item, index) => (\r\n                                <li{...{\r\n                                    class: [\r\n                                        'pl-time-base-column-item',\r\n                                        'pl-time-base-column-option-item',\r\n                                        {\r\n                                            'pl-time-base-column-item-current': model.value != null && model.value == Number(item),\r\n                                            'pl-time-base-column-item-disabled': utils.checkDisabled(item),\r\n                                        }\r\n                                    ],\r\n                                    key: item,\r\n                                    onClick: () => handler.clickItem(item),\r\n                                    ref: val => liList[index + 3] = val as any\r\n                                }}>\r\n                                    {item}\r\n                                </li>\r\n                            ))}\r\n\r\n                            {[1, 2, 3].map(item => (<li class=\"pl-time-base-column-item\" key={-item - 3}/>))}\r\n                        </ul>\r\n                    </pl-scroll>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {TimePublicProps} from './time-panel.utils';\r\nimport {computed} from 'vue';\r\nimport {PlainDate} from \"../../../utils/PlainDate\";\r\nimport './time-base-panel.scss'\r\n\r\nexport enum TimePanelLayout {\r\n    h = 'hour',\r\n    m = 'minute',\r\n    s = 'second',\r\n}\r\n\r\nexport default designComponent({\r\n    name: 'pl-time-base-panel',\r\n    props: {\r\n        modelValue: {type: String},\r\n        disableChangeOnScroll: {type: Boolean},// 是否禁用在滚动的时候触发更新值动作\r\n        ...TimePublicProps,\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val: string | null) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const formatData = computed(() => {\r\n            return {\r\n                value: new PlainDate(props.modelValue, props.displayFormat, props.valueFormat),\r\n                max: new PlainDate(props.max, props.displayFormat, props.valueFormat),\r\n                min: new PlainDate(props.min, props.displayFormat, props.valueFormat),\r\n            }\r\n        })\r\n\r\n        const maxmin = computed(() => {\r\n\r\n            const max = {\r\n                hour: null as null | number,\r\n                minute: null as null | number,\r\n                second: null as null | number,\r\n            }\r\n            const min = {\r\n                hour: null as null | number,\r\n                minute: null as null | number,\r\n                second: null as null | number,\r\n            }\r\n\r\n            const {max: maxpd, min: minpd, value: vpd} = formatData.value\r\n\r\n            if (!!maxpd.hour) {\r\n                max.hour = maxpd.hour\r\n                if (vpd.hour == null) {\r\n                    // 有最大值，但是没有选择【时】的情况下，分以及秒不能选择任意选项\r\n                    max.minute = -Infinity\r\n                    max.second = -Infinity\r\n                } else {\r\n                    if (vpd.hour < max.hour) {\r\n                        // 有最大值，但是【时】没有达到最大值，此时分以及秒可以任意选择\r\n                        max.minute = null\r\n                        max.second = null\r\n                    } else {\r\n                        max.minute = maxpd.minute\r\n                        if (vpd.minute == null) {\r\n                            max.second = -Infinity\r\n                        } else {\r\n                            if (vpd.minute < max.minute!) {\r\n                                max.second = null\r\n                            } else {\r\n                                max.second = maxpd.second\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!!minpd.hour) {\r\n                min.hour = minpd.hour\r\n                if (vpd.hour == null) {\r\n                    // 有最小值，但是没有选择【时】的情况下，分以及秒不能选择任意选项\r\n                    min.minute = Infinity\r\n                    min.second = Infinity\r\n                } else {\r\n                    if (vpd.hour > min.hour) {\r\n                        // 有最小值，但是【时】没有达到最小值，此时分以及秒可以任意选择\r\n                        min.minute = null\r\n                        min.second = null\r\n                    } else {\r\n                        min.minute = minpd.minute\r\n                        if (vpd.minute == null) {\r\n                            min.second = Infinity\r\n                        } else {\r\n                            if (vpd.minute > min.minute!) {\r\n                                min.second = null\r\n                            } else {\r\n                                min.second = minpd.second\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return {\r\n                max, min,\r\n            }\r\n        })\r\n\r\n        const checkDisabled = computed(() => !props.checkDisabled ? null : (num: number, layout: TimePanelLayout) => props.checkDisabled!(num, layout, formatData.value.value))\r\n\r\n        const custom = computed(() => !props.custom ? null : (layout: TimePanelLayout) => props.custom!(layout, formatData.value.value))\r\n\r\n        const handler = {\r\n            columnChange: (value: number, type: string) => {\r\n                // console.log('columnChange', {value, type})\r\n\r\n                const {value: vpd, max: maxpd, min: minpd} = formatData.value\r\n\r\n                switch (type) {\r\n                    case 'h':\r\n                        vpd.setHour(value)\r\n                        break\r\n                    case 'm':\r\n                        vpd.setMinute(value)\r\n                        break\r\n                    case 's':\r\n                        vpd.setSecond(value)\r\n                        break\r\n                }\r\n\r\n                if (!maxpd.isNull && vpd.Hms! > maxpd.Hms) {\r\n                    vpd.setValue(maxpd.valueString!)\r\n                }\r\n\r\n                if (!minpd.isNull && vpd.Hms! < minpd.Hms) {\r\n                    vpd.setValue(minpd.valueString!)\r\n                }\r\n\r\n                event.emit.onUpdateModelValue(vpd.valueString)\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <div class=\"pl-time-base-panel\">\r\n                        {props.layout.map((layout: any) => (\r\n                            <pl-time-base-column\r\n                                {...{\r\n                                    key: layout,\r\n                                    layout,\r\n                                    modelValue: (formatData as any).value.value[(TimePanelLayout as any)[layout]],\r\n                                    max: (maxmin as any).value.max[(TimePanelLayout as any)[layout]],\r\n                                    min: (maxmin as any).value.min[(TimePanelLayout as any)[layout]],\r\n                                    checkDisabled: checkDisabled.value,\r\n                                    custom: custom.value,\r\n                                    onChange: (val: number) => handler.columnChange(val, layout),\r\n                                    disableChangeOnScroll: props.disableChangeOnScroll,\r\n                                }}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {DatePublicPropsType, DateView, SlideTransitionDirection} from \"./date.utils\";\r\nimport {computed, inject, provide, reactive} from 'vue';\r\nimport {PlainDate, PlainDateType} from \"../../utils/PlainDate\";\r\nimport {useModel, UseModelConfig} from \"../../use/useModel\";\r\n\r\n/**\r\n * 日期子组件注入父组件提供的值的时候的唯一标识\r\n * @author  韦胜健\r\n * @date    2020/12/7 20:43\r\n */\r\nexport const DATE_PANEL_PROVIDER = '@@DATE_PANEL_PROVIDER'\r\n\r\n/**\r\n * 获取默认的格式化字符串\r\n * @author  韦胜健\r\n * @date    2020/12/7 20:42\r\n */\r\nexport function getFormatString(formatString: string | undefined, datetime: boolean | undefined) {\r\n    if (!!formatString) return formatString\r\n    return datetime ? 'YYYY-MM-DD HH:mm:ss' : 'YYYY-MM-DD'\r\n}\r\n\r\nexport enum UseDateJudgementView {\r\n    'Y' = 'Y',\r\n    'YM' = 'YM',\r\n    'YMD' = 'YMD',\r\n}\r\n\r\ntype UseDateJudgement = {\r\n    active?: (ipd: PlainDateType, view: UseDateJudgementView) => boolean,\r\n    disabled?: (ipd: PlainDateType, view: UseDateJudgementView) => boolean,\r\n    hoverStart?: (ipd: PlainDateType, view: UseDateJudgementView) => boolean,\r\n    hover?: (ipd: PlainDateType, view: UseDateJudgementView) => boolean,\r\n    hoverEnd?: (ipd: PlainDateType, view: UseDateJudgementView) => boolean,\r\n}\r\n\r\ntype UseDateTopState = {\r\n    max?: PlainDateType,\r\n    min?: PlainDateType,\r\n    vpd?: PlainDateType,\r\n    hoverRange: [PlainDateType, PlainDateType] | null | undefined,\r\n    valueRange: [PlainDateType, PlainDateType],\r\n    range?: boolean,\r\n}\r\n\r\nexport type UseDateType = {\r\n    /*当前组件的直接父组件*/\r\n    parent: UseDateType | null,\r\n    /*当前组件接收的props属性对象*/\r\n    props: DatePublicPropsType,\r\n    /*当前组件自己的judgement(提供给后代使用的judgement)*/\r\n    judgementForChild?: UseDateJudgement,\r\n    /*当前组件的显示值格式化字符串*/\r\n    displayFormat: string,\r\n    /*当前组件的值格式化字符串*/\r\n    valueFormat: string,\r\n\r\n    /*---------------------------------------state-------------------------------------------*/\r\n\r\n    today: PlainDateType,\r\n    tempPd: PlainDateType,\r\n\r\n    model: { value?: string },\r\n    startModel: { value?: string },\r\n    endModel: { value?: string },\r\n    viewModel: { value: DateView },\r\n\r\n    state: {\r\n        hoverRange: [PlainDateType, PlainDateType] | null,\r\n        valueRange: [PlainDateType, PlainDateType],\r\n        selectDate: PlainDateType,\r\n        slide: SlideTransitionDirection,\r\n        topState: UseDateTopState,\r\n    },\r\n\r\n    setSelectDate: (pd: PlainDateType) => void,\r\n    getStatus: (ipd: PlainDateType) => {\r\n        now: boolean,\r\n        disabled: boolean,\r\n        active: boolean,\r\n        hoverStart: boolean,\r\n        hoverEnd: boolean,\r\n        hover: boolean,\r\n        range: boolean,\r\n        clickable: boolean,\r\n    },\r\n    jdView: UseDateJudgementView,\r\n}\r\n\r\nexport function useDate(\r\n    {\r\n        props,\r\n        judgementForChild,\r\n        emit,\r\n        useModelConfig,\r\n        jdView,\r\n    }: {\r\n        props: DatePublicPropsType,\r\n        judgementForChild?: UseDateJudgement,\r\n        emit: {\r\n            onUpdateModelValue: (val?: string) => void,\r\n            onUpdateStart: (val?: string) => void,\r\n            onUpdateEnd: (val?: string) => void,\r\n            onUpdateView: (val: DateView) => void,\r\n        },\r\n        useModelConfig?: {\r\n            model?: UseModelConfig,\r\n            start?: UseModelConfig,\r\n            end?: UseModelConfig,\r\n        },\r\n        jdView: UseDateJudgementView,\r\n    }\r\n): UseDateType {\r\n\r\n    /**\r\n     * 邻近父组件\r\n     * @author  韦胜健\r\n     * @date    2020/12/7 20:48\r\n     */\r\n    const parent = inject<UseDateType | null>(DATE_PANEL_PROVIDER, null)\r\n\r\n    /*---------------------------------------state-------------------------------------------*/\r\n\r\n    const displayFormat = getFormatString(props.displayFormat, props.datetime)\r\n    const valueFormat = getFormatString(props.valueFormat, props.datetime)\r\n\r\n    const topState = computed((): UseDateTopState => {\r\n        if (!!parent) {\r\n            return parent.state.topState\r\n        }\r\n        return {\r\n            max: !props.max ? undefined : new PlainDate(props.max, displayFormat, valueFormat),\r\n            min: !props.min ? undefined : new PlainDate(props.min, displayFormat, valueFormat),\r\n            vpd: !model.value && model.value != '0' ? undefined : new PlainDate(model.value, displayFormat, valueFormat),\r\n            hoverRange: state.hoverRange,\r\n            valueRange: state.valueRange,\r\n            range: props.range,\r\n        }\r\n    })\r\n\r\n    const today = !!parent ? parent.today : PlainDate.today(displayFormat, valueFormat)\r\n    const vpd = new PlainDate(props.modelValue, displayFormat, valueFormat)\r\n    const startPd = !!parent || !props.range ? today : new PlainDate(props.start, displayFormat, valueFormat)\r\n    const endPd = !!parent || !props.range ? today : new PlainDate(props.end, displayFormat, valueFormat)\r\n    const tempPd = vpd.copy()\r\n\r\n    const hoverRange: [PlainDateType, PlainDateType] | null = null\r\n    const valueRange: [PlainDateType, PlainDateType] = [startPd, endPd]\r\n\r\n    useModelConfig = useModelConfig || {}\r\n    const model = useModel(() => props.modelValue, emit.onUpdateModelValue, useModelConfig.model)\r\n    const startModel = !!parent || !props.range ? model : useModel(() => props.start, emit.onUpdateStart, useModelConfig.start)\r\n    const endModel = !!parent || !props.range ? model : useModel(() => props.end, emit.onUpdateEnd, useModelConfig.end)\r\n    const viewModel = useModel(() => props.view as DateView, emit.onUpdateView)\r\n\r\n    let selectDate = props.selectDate as (PlainDateType | undefined)\r\n    if (!selectDate) {\r\n        if (!props.range) {\r\n            selectDate = !vpd.isNull ? vpd : today.copy()\r\n        } else {\r\n            selectDate = !startPd.isNull ? startPd : today.copy()\r\n        }\r\n    }\r\n\r\n    /*响应式属性*/\r\n    const state = reactive({\r\n        selectDate,\r\n        hoverRange,\r\n        valueRange,\r\n        slide: SlideTransitionDirection.next,\r\n        topState,\r\n    })\r\n\r\n    const utils = {\r\n        active: (ipd: PlainDateType) => {\r\n            if (!!parent && !!parent.judgementForChild && !!parent.judgementForChild.active) {\r\n                return parent.judgementForChild.active(ipd, jdView)\r\n            }\r\n            const {range, vpd, valueRange: [startPd, endPd]} = topState.value;\r\n            return !!(\r\n                (range ? [startPd, endPd] : [vpd])\r\n                    .filter(i => !!i && !i.isNull)\r\n                    .find(i => i![jdView] == ipd[jdView])\r\n            )\r\n        },\r\n        disabled: (ipd: PlainDateType) => {\r\n            if (!!parent && !!parent.judgementForChild && !!parent.judgementForChild.disabled) {\r\n                return parent.judgementForChild.disabled(ipd, jdView)\r\n            }\r\n            const {max, min} = topState.value\r\n            const val = ipd[jdView]!\r\n            if (!!max && max[jdView]! < val) return true\r\n            if (!!min && min[jdView]! > val) return true\r\n            return false\r\n        },\r\n        hoverStart: (ipd: PlainDateType) => {\r\n            if (!!parent && !!parent.judgementForChild && !!parent.judgementForChild.hoverStart) {\r\n                return parent.judgementForChild.hoverStart(ipd, jdView)\r\n            }\r\n            if (!topState.value.range) {\r\n                return false\r\n            }\r\n            const {hoverRange, valueRange} = topState.value\r\n            const val = ipd[jdView]!\r\n            return !!hoverRange ? (hoverRange[0][jdView] == val) : valueRange[0][jdView] == val\r\n        },\r\n        hover: (ipd: PlainDateType) => {\r\n            if (!!parent && !!parent.judgementForChild && !!parent.judgementForChild.hover) {\r\n                return parent.judgementForChild.hover(ipd, jdView)\r\n            }\r\n            if (!topState.value.range) {\r\n                return false\r\n            }\r\n            const {hoverRange, valueRange} = topState.value\r\n            const val = ipd[jdView]!\r\n            return !!hoverRange ?\r\n                (hoverRange[0][jdView]! < val && hoverRange[1][jdView]! > val) :\r\n                ((!valueRange[0].isNull && !valueRange[1].isNull) &&\r\n                    valueRange[0][jdView]! < val &&\r\n                    valueRange[1][jdView]! > val)\r\n        },\r\n        hoverEnd: (ipd: PlainDateType) => {\r\n            if (!!parent && !!parent.judgementForChild && !!parent.judgementForChild.hoverEnd) {\r\n                return parent.judgementForChild.hoverEnd(ipd, jdView)\r\n            }\r\n            if (!topState.value.range) {\r\n                return false\r\n            }\r\n            const {hoverRange, valueRange} = topState.value\r\n            const val = ipd[jdView]!\r\n            return !!hoverRange ? (hoverRange[1][jdView] == val) : valueRange[1][jdView] == val\r\n        },\r\n    }\r\n\r\n    /*---------------------------------------provide-------------------------------------------*/\r\n\r\n    const provideData: UseDateType = {\r\n        props,\r\n        parent,\r\n        judgementForChild,\r\n        displayFormat,\r\n        valueFormat,\r\n\r\n        today,\r\n        tempPd,\r\n\r\n        model,\r\n        startModel,\r\n        endModel,\r\n        viewModel,\r\n\r\n        state,\r\n\r\n        setSelectDate: (pd) => state.selectDate = pd.isNull ? today.copy() : pd.copy(),\r\n        getStatus: (ipd) => {\r\n            const disabled = utils.disabled(ipd)\r\n            return {\r\n                now: today[jdView] === ipd[jdView],\r\n                active: utils.active(ipd),\r\n                disabled,\r\n                hoverStart: utils.hoverStart(ipd),\r\n                hover: utils.hover(ipd),\r\n                hoverEnd: utils.hoverEnd(ipd),\r\n                range: !!state.topState.range,\r\n                clickable: (!!parent && parent.jdView !== jdView) || !disabled\r\n            }\r\n        },\r\n        jdView,\r\n    }\r\n\r\n    /*只有最顶层日期组件才有资格控制子组件*/\r\n    if (!parent) {\r\n        provide(DATE_PANEL_PROVIDER, provideData)\r\n    }\r\n\r\n    return provideData\r\n\r\n}","import time from './time'\r\nimport TimeBaseColumn from './panel/time-base-column'\r\nimport TimeBasePanel from './panel/time-base-panel'\r\nimport TimeRangePanel from './panel/time-range-panel'\r\nimport TimePanel from './panel/time-panel'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport {TimeServiceGetter} from \"./servce/time-service\";\r\nimport DateTimeInput from '../date-time-input'\r\n\r\nexport default createComponentPlugin(time, {\r\n    exposeComponents: {\r\n        TimeBaseColumn,\r\n        TimeBasePanel,\r\n        TimeRangePanel,\r\n        TimePanel,\r\n    },\r\n    plugins: [\r\n        DateTimeInput,\r\n    ],\r\n    expose: {\r\n        TimeServiceGetter\r\n    },\r\n})","import {computed, Transition} from 'vue'\r\nimport {designComponent} from \"../../../use/designComponent\";\r\nimport {DateEmitRangeType, DatePanelItemWrapper, DatePanelWrapper, DatePublicEmits, DatePublicProps, Dbpid, DefaultDateFormatString, SlideTransitionDirection} from \"../date.utils\";\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-date-base-panel-year',\r\n    props: {\r\n        ...DatePublicProps,\r\n        displayFormat: {type: String, default: DefaultDateFormatString.year},\r\n        valueFormat: {type: String, default: DefaultDateFormatString.year},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {\r\n            state,\r\n            today,\r\n            tempPd,\r\n            setSelectDate,\r\n            model,\r\n            startModel,\r\n            endModel,\r\n            getStatus,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            useModelConfig: {\r\n                model: {\r\n                    onChange: (val) => {\r\n                        state.slide = val == null ? SlideTransitionDirection.next : val > data.value.selectYear + 19 ? SlideTransitionDirection.next : SlideTransitionDirection.prev\r\n                        state.selectDate.setYear(val || today.year)\r\n                        setSelectDate(state.selectDate)\r\n                    }\r\n                },\r\n                start: {\r\n                    onChange: (val) => {\r\n                        tempPd.setValue(val)\r\n                        const startPd = tempPd.copy()\r\n                        tempPd.setValue(endModel.value)\r\n                        const endPd = tempPd.copy()\r\n\r\n                        state.valueRange = [startPd, endPd]\r\n                        state.hoverRange = null\r\n\r\n                        state.slide = val == null ? SlideTransitionDirection.next : val > data.value.selectYear + 19 ? SlideTransitionDirection.next : SlideTransitionDirection.prev\r\n                        state.selectDate.setYear(val || today.year)\r\n                        setSelectDate(state.selectDate)\r\n                    }\r\n                },\r\n                end: {\r\n                    onChange: (val) => {\r\n                        tempPd.setValue(startModel.value)\r\n                        const startPd = tempPd.copy()\r\n                        tempPd.setValue(val)\r\n                        const endPd = tempPd.copy()\r\n\r\n                        state.valueRange = [startPd, endPd]\r\n                        state.hoverRange = null\r\n                    }\r\n                }\r\n            },\r\n            jdView: UseDateJudgementView.Y,\r\n        })\r\n\r\n        const data = computed(() => {\r\n            const {selectDate} = state\r\n            let selectYear = selectDate.year!\r\n            selectYear = selectYear - selectYear % 20\r\n\r\n            let list: Dbpid[] = []\r\n\r\n            for (let i = selectYear; i < selectYear + 20; i++) {\r\n                tempPd.setYear(i)\r\n                const ipd = tempPd.copy()\r\n                let item: Dbpid = {\r\n                    label: i,\r\n                    ipd,\r\n                    ...getStatus(ipd),\r\n                }\r\n                list.push(item)\r\n            }\r\n\r\n            return {\r\n                list,\r\n                /*年份面板标题，展示列表中年份的范围*/\r\n                title: `${selectYear}-${selectYear + 19}`,\r\n                /*当前选择的年份*/\r\n                selectYear,\r\n            }\r\n        })\r\n\r\n        const methods = {\r\n            /**\r\n             * 切换上一个年份列表\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:17\r\n             */\r\n            prevYearList() {\r\n                state.slide = SlideTransitionDirection.prev\r\n                state.selectDate.setYear(data.value.selectYear - 20)\r\n                setSelectDate(state.selectDate)\r\n            },\r\n            /**\r\n             *\r\n             * @author  切换下一个年份列表\r\n             * @date    2020/4/15 11:18\r\n             */\r\n            nextYearList() {\r\n                state.slide = SlideTransitionDirection.next\r\n                state.selectDate.setYear(data.value.selectYear + 20)\r\n                setSelectDate(state.selectDate)\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            onClickItem: ({ipd}: Dbpid) => {\r\n                if (!props.range) {\r\n                    model.value = ipd.isNull ? undefined : String(ipd!.year)\r\n                } else {\r\n                    if (!state.hoverRange) {\r\n                        state.hoverRange = [ipd, ipd]\r\n                        state.valueRange = [ipd, ipd]\r\n                    } else {\r\n\r\n                        const [startPd, endPd] = state.hoverRange\r\n\r\n                        startModel.value = startPd.isNull ? undefined : String(startPd.year)\r\n                        endModel.value = endPd.isNull ? undefined : String(endPd.year)\r\n\r\n                        state.hoverRange = null\r\n                        state.valueRange = [startPd, endPd]\r\n\r\n                        emit.onUpdateModelValue(startModel.value, DateEmitRangeType.start)\r\n                        emit.onUpdateModelValue(endModel.value, DateEmitRangeType.end)\r\n                    }\r\n                }\r\n            },\r\n            onMouseenterItem({ipd}: Dbpid) {\r\n                if (!!state.hoverRange) {\r\n                    let mid = state.valueRange[0]\r\n                    state.hoverRange = mid.year! > ipd.year! ? [ipd, mid] : [mid, ipd]\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                const Wrapper = DatePanelWrapper({\r\n                    left: <pl-button icon=\"el-icon-d-arrow-left\" mode=\"text\" size=\"mini\" onClick={methods.prevYearList}/>,\r\n                    center: <span class=\"pl-date-base-panel-header-static-label\">{data.value.title}</span>,\r\n                    right: <pl-button icon=\"el-icon-d-arrow-right\" mode=\"text\" size=\"mini\" onClick={methods.nextYearList}/>,\r\n                    content: (<Transition name={`pl-transition-slide-${state.slide}`}>\r\n                        <ul{...{\r\n                            class: 'pl-date-base-panel-year-list',\r\n                            key: data.value.selectYear,\r\n                            direction: \"vertical\"\r\n                        }}>\r\n                            {data.value.list.map(item => DatePanelItemWrapper({\r\n                                item,\r\n                                Node: (<li key={item.label} class=\"pl-date-base-panel-year-item\"/>),\r\n                                onClick: handler.onClickItem,\r\n                                onMouseenter: handler.onMouseenterItem,\r\n                            }))}\r\n                        </ul>\r\n                    </Transition>)\r\n\r\n                })\r\n                return <Wrapper {...{class: 'pl-date-base-panel-year', direction: props.direction,}}/>\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateEmitRangeType, DatePublicEmits, DatePublicProps, DefaultDateFormatString} from \"../date.utils\";\r\nimport {useModel} from \"../../../use/useModel\";\r\nimport {computed, resolveComponent} from 'vue';\r\n\r\nexport const enum DatePanelType {\r\n    year = 'year',\r\n    month = 'month',\r\n    date = 'date',\r\n    datetime = 'datetime',\r\n    week = 'week',\r\n    dates = 'dates',\r\n}\r\n\r\nexport default designComponent({\r\n    name: 'pl-date-panel',\r\n    props: {\r\n        ...DatePublicProps,\r\n        modelValue: {},\r\n        panel: {type: String, default: DatePanelType.date},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue as any, emit.onUpdateModelValue)\r\n        const startModel = useModel(() => props.start, emit.onUpdateStart)\r\n        const endModel = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const handler = {\r\n            onChange: (val: string | undefined, type?: DateEmitRangeType) => {\r\n                if (!props.range) {\r\n                    model.value = val\r\n                } else {\r\n                    if (type === DateEmitRangeType.start) {\r\n                        startModel.value = val\r\n                    } else {\r\n                        endModel.value = val\r\n                    }\r\n                    emit.onUpdateModelValue(val, type)\r\n                }\r\n            }\r\n        }\r\n\r\n        const binding = computed(() => {\r\n            const {range, max, min, displayFormat, valueFormat, firstWeekDay, defaultTime,} = props\r\n            const panel = props.panel as DatePanelType\r\n            const value = model.value\r\n            const start = startModel.value\r\n            const end = endModel.value\r\n            const publicProps = {range, modelValue: value, start, end, max, min, firstWeekDay, defaultTime,}\r\n            const date = range ? 'pl-date-panel-date-range' : 'pl-date-base-panel-date'\r\n\r\n            return {\r\n                name: {\r\n                    year: 'pl-date-base-panel-year',\r\n                    month: 'pl-date-base-panel-month',\r\n                    date: date,\r\n                    datetime: date,\r\n                    week: 'pl-date-panel-week',\r\n                    dates: 'pl-date-panel-dates',\r\n                }[panel] as any,\r\n                attrs: {\r\n                    ...publicProps,\r\n                    onChange: handler.onChange,\r\n                    displayFormat: displayFormat || DefaultDateFormatString[panel],\r\n                    valueFormat: valueFormat || DefaultDateFormatString[panel],\r\n                    datetime: panel === DatePanelType.datetime,\r\n                },\r\n            }\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                const {name, attrs} = binding.value\r\n                const Component = resolveComponent(name) as any\r\n                return <Component {...attrs}/>\r\n            }\r\n        }\r\n    },\r\n})","import {createAgentGetter} from \"../../popper/edit/createAgentGetter\";\r\nimport {DatePanelType} from \"../panel/date-panel\";\r\n\r\nexport const DateServiceGetter = createAgentGetter({\r\n    name: 'date',\r\n    render: (attrs) => <pl-date-panel {...attrs}/>,\r\n    defaultPopperAttrs: {\r\n        transition: 'pl-transition-popper-drop',\r\n    },\r\n    defaultRenderAttrs: {\r\n        async onChange() {\r\n            let renderAttrs: any = this.state.option.serviceOption.renderAttrs\r\n            if (typeof renderAttrs === \"function\") renderAttrs = renderAttrs()\r\n            if (!(\r\n                renderAttrs.panel === DatePanelType.datetime ||\r\n                renderAttrs.panel === DatePanelType.dates ||\r\n                renderAttrs.range\r\n            )) {\r\n                this.hide()\r\n            }\r\n        },\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport './date.scss'\r\nimport {StyleProps} from \"../../use/useStyle\";\r\nimport {EditProps} from \"../../use/useEdit\";\r\nimport {DateEmitRangeType, DatePublicEmits, DatePublicProps, DefaultDateFormatString, WeekUtils} from \"./date.utils\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {useEditPopperAgent} from \"../popper/edit/useEditPopperAgent\";\r\nimport {DateServiceGetter} from \"./service/date-service\";\r\nimport {useDateTime} from \"../date-time-input/useDateTime\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\nimport {computed, PropType} from 'vue';\r\nimport {DatePanelType} from \"./panel/date-panel\";\r\nimport {PlainDate, PlainDateType} from \"../../utils/PlainDate\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-date',\r\n    props: {\r\n        ...StyleProps,\r\n        ...EditProps,\r\n        ...DatePublicProps,\r\n        modelValue: {},\r\n        panel: {type: String, default: 'date'},\r\n        collapseTags: {type: Boolean, default: true},\r\n        customWeekString: {type: Function as PropType<(data: { week: number, year: number }) => string>},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        onBlur: (e: Event) => true,\r\n        onFocus: (e: Event) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const model = useModel(() => props.modelValue as any, emit.onUpdateModelValue)\r\n        const startModel = useModel(() => props.start, emit.onUpdateStart)\r\n        const endModel = useModel(() => props.end, emit.onUpdateEnd)\r\n\r\n        const serviceHandler = {\r\n            onChange: (val: string | undefined, type: DateEmitRangeType) => {\r\n                if (!props.range) {\r\n                    model.value = val\r\n                } else {\r\n                    if (type === 'start') {\r\n                        startModel.value = val\r\n                    } else {\r\n                        endModel.value = val\r\n                        if (props.panel !== DatePanelType.datetime) {\r\n                            agentState.methods.hide()\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            onMousedown: async (e: MouseEvent, type: DateEmitRangeType) => {\r\n                agentState.state.focusCounter++\r\n                await delay(0)\r\n                if (props.panel === 'dates') {\r\n                    refs.plInput!.methods.focus()\r\n                } else if (!props.range) {\r\n                    refs.valueInput!.methods.focus()\r\n                } else {\r\n                    if (type === 'start') {\r\n                        refs.startInput!.methods.focus()\r\n                    } else {\r\n                        refs.endInput!.methods.focus()\r\n                    }\r\n                }\r\n            },\r\n        }\r\n\r\n        const agentState = useEditPopperAgent({\r\n            event: {emit},\r\n            serviceGetter: DateServiceGetter,\r\n            option: {\r\n                reference: () => refs.plInput as any,\r\n                renderAttrs: () => ({\r\n                    ...(Object.keys(DatePublicProps).reduce((ret: any, key) => {\r\n                        ret[key] = (props as any)[key]\r\n                        return ret\r\n                    }, {})),\r\n                    panel: props.panel,\r\n                    modelValue: model.value,\r\n                    start: startModel.value,\r\n                    end: endModel.value,\r\n                    ...serviceHandler,\r\n                })\r\n            },\r\n        })\r\n\r\n        const {\r\n            refs,\r\n            handler,\r\n            inputValue,\r\n        } = useDateTime({\r\n            value: model,\r\n            start: startModel,\r\n            end: endModel,\r\n            props,\r\n            agentState,\r\n            emit,\r\n        })\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n\r\n        const displayFormat = computed(() => props.displayFormat || DefaultDateFormatString[props.panel as DatePanelType])\r\n        const valueFormat = computed(() => props.valueFormat || DefaultDateFormatString[props.panel as DatePanelType])\r\n\r\n        const formatData = computed(() => {\r\n\r\n            if (props.panel === 'dates') {\r\n                let value = (model.value || []) as string[]\r\n                const valuePds = value.map(item => new PlainDate(item, displayFormat.value, valueFormat.value))\r\n                const datesString = valuePds.map(item => item.displayString)\r\n                return {\r\n                    value: valuePds,\r\n                    datesString,\r\n                }\r\n            }\r\n\r\n            const value = new PlainDate(model.value, displayFormat.value, valueFormat.value)\r\n            const start = new PlainDate(startModel.value, displayFormat.value, valueFormat.value)\r\n            const end = new PlainDate(endModel.value, displayFormat.value, valueFormat.value)\r\n\r\n            return {\r\n                value, start, end\r\n            }\r\n        })\r\n\r\n        const inputAttrs = computed(() => {\r\n            const {panel} = props\r\n            const isDates = panel === 'dates'\r\n            return {\r\n                class: [\r\n                    'pl-date',\r\n                    {\r\n                        'pl-input-custom': !isDates,\r\n                        'pl-input-tags': isDates,\r\n                    },\r\n                ],\r\n                modelValue: Array.isArray(inputValue.value) ? inputValue.value.join('') : inputValue.value,\r\n                suffixIcon: 'el-icon-date',\r\n                clearIcon: true,\r\n                isFocus: agentState.state.focusCounter > 0,\r\n                width: isDates ? undefined : null,\r\n                inputInnerTabindex: isDates ? 0 : null,\r\n                clearHandler: handler.clearHandler,\r\n\r\n                ...agentState.inputHandler,\r\n                onClickInput: handler.clickInput,\r\n            }\r\n        })\r\n\r\n        const displayString = computed(() => {\r\n\r\n            if (props.panel !== DatePanelType.week) {\r\n                return {\r\n                    value: (formatData.value.value as PlainDateType).displayString,\r\n                    start: formatData.value.start!.displayString,\r\n                    end: formatData.value.end!.displayString,\r\n                }\r\n            } else {\r\n\r\n                if (!props.range) {\r\n                    const value = WeekUtils.getWeekNumber((formatData.value.value as PlainDateType).valueString!, {valueFormat: valueFormat.value, firstWeekDay: props.firstWeekDay})\r\n                    return {\r\n                        value: !value.year ? '' : !!props.customWeekString ? props.customWeekString(value as any) : `${value.year}年 第${value.week}周`\r\n                    }\r\n                } else {\r\n                    const start = WeekUtils.getWeekNumber((formatData.value.start!).valueString!, {valueFormat: valueFormat.value, firstWeekDay: props.firstWeekDay})\r\n                    const end = WeekUtils.getWeekNumber((formatData.value.end!).valueString!, {valueFormat: valueFormat.value, firstWeekDay: props.firstWeekDay})\r\n                    return {\r\n                        start: !start.year ? '' : !!props.customWeekString ? props.customWeekString(start as any) : `${start.year}年 第${start.week}周`,\r\n                        end: !end.year ? '' : !!props.customWeekString ? props.customWeekString(end as any) : `${end.year}年 第${end.week}周`,\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        /*---------------------------------------custom handler-------------------------------------------*/\r\n\r\n        const customHandler = {\r\n            onInputChange(val: string | undefined, type: 'value' | 'start' | 'end') {\r\n                if (props.panel === 'dates') {\r\n                    model.value = val\r\n                }\r\n                const {value, start, end} = formatData.value as { value: PlainDateType, start: PlainDateType, end: PlainDateType }\r\n                switch (type) {\r\n                    case 'value':\r\n\r\n                        if (!val) {\r\n                            value.setValue(undefined)\r\n                            model.value = undefined\r\n                            return;\r\n                        }\r\n                        if (value.format(value.parseDisplayString(val)) != val) {\r\n                            return;\r\n                        }\r\n\r\n                        value.setDisplayValue(val)\r\n                        model.value = value.valueString!\r\n\r\n                        break\r\n                    case 'start':\r\n\r\n                        if (!val) {\r\n                            return;\r\n                        }\r\n                        if (start.format(start.parseDisplayString(val)) != val) {\r\n                            return;\r\n                        }\r\n\r\n                        start.setDisplayValue(val)\r\n                        startModel.value = start.valueString!\r\n\r\n                        if (end.isNull || (!!props.datetime ? start.YMDHms! > end.YMDHms! : start.YMD! > end.YMD!)) {\r\n                            endModel.value = start.valueString!\r\n                        }\r\n\r\n                        break\r\n                    case 'end':\r\n\r\n                        if (!val) {\r\n                            return;\r\n                        }\r\n                        if (end.format(end.parseDisplayString(val)) != val) {\r\n                            return;\r\n                        }\r\n\r\n                        end.setDisplayValue(val)\r\n                        endModel.value = end.valueString!\r\n\r\n                        if (start.isNull || (!!props.datetime ? start.YMDHms! > end.YMDHms! : start.YMD! > end.YMD!)) {\r\n                            startModel.value = end.valueString!\r\n                        }\r\n\r\n                        break\r\n                }\r\n            },\r\n            onClickItemCloseIcon(item: string, index: number, e: MouseEvent) {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n\r\n                if (!agentState.editComputed.value.editable) {\r\n                    return\r\n                }\r\n                const value = model.value as any as string[]\r\n                value.splice(index, 1)\r\n                model.value = [...value] as any\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <pl-input ref=\"plInput\"{...inputAttrs.value}>\r\n                        <div {...{class: 'pl-input-custom-inner', range: props.range}}>\r\n\r\n\r\n                            {props.panel === DatePanelType.dates && (<pl-input-inner-tags\r\n                                data={formatData.value.datesString}\r\n                                collapseTags={props.collapseTags}\r\n                                v-slots={{\r\n                                    default: ({item, index}: { item: string, index: number }) => (<>\r\n                                        <span>{item}</span>\r\n                                        <pl-icon icon=\"el-icon-close\" onClick={(e: MouseEvent) => customHandler.onClickItemCloseIcon(item, index, e)}/>\r\n                                    </>)\r\n                                }}\r\n                            />)}\r\n\r\n                            {props.panel !== DatePanelType.dates && (\r\n                                !props.range ? (<pl-date-time-input\r\n                                        modelValue={displayString.value.value}\r\n                                        ref=\"valueInput\"\r\n                                        onChange={(val: string) => customHandler.onInputChange(val, 'value')}\r\n                                        displayFormat={displayFormat.value}\r\n                                        onFocus={handler.customInputFocus}\r\n                                        onBlur={handler.customInputBlur}\r\n                                    />) :\r\n                                    <>\r\n                                        <pl-date-time-input\r\n                                            width=\"100\"\r\n                                            modelValue={displayString.value.start}\r\n                                            ref=\"startInput\"\r\n                                            displayFormat={displayFormat.value}\r\n                                            onChange={(val: string) => customHandler.onInputChange(val, 'start')}\r\n                                            onFocus={handler.customInputFocus}\r\n                                            onBlur={handler.customInputBlur}\r\n                                        />\r\n                                        <span>~</span>\r\n                                        <pl-date-time-input\r\n                                            width=\"100\"\r\n                                            modelValue={displayString.value.end}\r\n                                            ref=\"endInput\"\r\n                                            onChange={(val: string) => customHandler.onInputChange(val, 'end')}\r\n                                            displayFormat={displayFormat.value}\r\n                                            onFocus={handler.customInputFocus}\r\n                                            onBlur={handler.customInputBlur}\r\n                                        />\r\n                                    </>\r\n                            )}\r\n\r\n                        </div>\r\n                    </pl-input>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateEmitRangeType, DatePanelItemWrapper, DatePanelWrapper, DatePublicEmits, DatePublicProps, DateView, Dbpid, DefaultDateFormatString, SlideTransitionDirection} from '../date.utils';\r\nimport {computed, Transition} from 'vue';\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-date-base-panel-month',\r\n    props: {\r\n        ...DatePublicProps,\r\n\r\n        displayFormat: {type: String, default: DefaultDateFormatString.month},\r\n        valueFormat: {type: String, default: DefaultDateFormatString.month},\r\n        view: {type: String, default: DateView.month},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const months = computed(() => ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月',])\r\n\r\n        const {\r\n            state,\r\n            setSelectDate,\r\n            today,\r\n            tempPd,\r\n            model,\r\n            startModel,\r\n            endModel,\r\n            viewModel,\r\n            getStatus,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            useModelConfig: {\r\n                model: {\r\n                    onChange: val => {\r\n                        // 这个val 是按照displayFormat和valueFormat格式的字符串，不能直接 setSelectYear 赋值\r\n                        if (!val) {\r\n                            methods.setSelectYear(today.year!)\r\n                        } else {\r\n                            tempPd.setValue(val)\r\n                            methods.setSelectYear(tempPd.year!)\r\n                        }\r\n                    }\r\n                },\r\n                start: {\r\n                    onChange: val => {\r\n                        tempPd.setValue(val)\r\n                        const startPd = tempPd.copy()\r\n                        tempPd.setValue(endModel.value)\r\n                        const endPd = tempPd.copy()\r\n                        state.valueRange = [startPd, endPd]\r\n                        state.hoverRange = null\r\n                        methods.setSelectYear(startPd.year || today.year!)\r\n                    }\r\n                },\r\n                end: {\r\n                    onChange: val => {\r\n                        tempPd.setValue(startModel.value)\r\n                        const startPd = tempPd.copy()\r\n                        tempPd.setValue(val)\r\n                        const endPd = tempPd.copy()\r\n\r\n                        state.valueRange = [startPd, endPd]\r\n                        state.hoverRange = null\r\n                    }\r\n                },\r\n            },\r\n            jdView: UseDateJudgementView.YM,\r\n        })\r\n\r\n        const methods = {\r\n            /**\r\n             * 设置当前选择的年份\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:12\r\n             */\r\n            setSelectYear(target: number) {\r\n                if (!target) {\r\n                    target = today.year!\r\n                }\r\n                state.slide = state.selectDate.year! > target ? SlideTransitionDirection.prev : SlideTransitionDirection.next\r\n                state.selectDate.setYear(target)\r\n                setSelectDate(state.selectDate)\r\n            },\r\n            /**\r\n             * 切换到上一年\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:12\r\n             */\r\n            prevYear() {\r\n                state.slide = SlideTransitionDirection.prev\r\n                state.selectDate.setYear(state.selectDate.year! - 1)\r\n                setSelectDate(state.selectDate)\r\n            },\r\n            /**\r\n             * 切换到下一年\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:12\r\n             */\r\n            nextYear() {\r\n                state.slide = SlideTransitionDirection.next\r\n                state.selectDate.setYear(state.selectDate.year! + 1)\r\n                setSelectDate(state.selectDate)\r\n            },\r\n        }\r\n\r\n        const monthList = computed(() => {\r\n            const {selectDate} = state\r\n            let list: Dbpid[] = [];\r\n            [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11].forEach(i => {\r\n                tempPd.setYear(selectDate.year!)\r\n                tempPd.setMonthDate(i, 1)\r\n                const ipd = tempPd.copy()\r\n                const item = {\r\n                    label: months.value[i],\r\n                    ipd,\r\n                    ...getStatus(ipd),\r\n                }\r\n                list.push(item)\r\n            })\r\n            return list\r\n        })\r\n\r\n        const handler = {\r\n            /**\r\n             * 处理点击月份元素的动作\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:13\r\n             */\r\n            onClickItem({ipd}: Dbpid) {\r\n\r\n                const temp = state.selectDate.copy()\r\n                temp.setMonthDate(ipd.month!, 1)\r\n\r\n                if (!props.range) {\r\n                    model.value = temp.valueString!\r\n                } else {\r\n\r\n                    if (!state.hoverRange) {\r\n\r\n                        temp.setMonthDate(ipd.month!, 1)\r\n                        state.hoverRange = [temp, temp]\r\n                        state.valueRange = [temp, temp]\r\n\r\n                    } else {\r\n                        const [startPd, endPd] = state.hoverRange\r\n\r\n                        startModel.value = startPd.valueString!\r\n                        endModel.value = endPd.valueString!\r\n\r\n                        state.hoverRange = null\r\n                        state.valueRange = [startPd, endPd]\r\n\r\n                        emit.onUpdateModelValue(startModel.value, DateEmitRangeType.start)\r\n                        emit.onUpdateModelValue(endModel.value, DateEmitRangeType.end)\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * 处理鼠标进入月份元素的动作\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:13\r\n             */\r\n            onMouseEnterItem({ipd}: Dbpid) {\r\n                if (!!state.hoverRange) {\r\n                    let midPd = state.valueRange[0]\r\n                    const temp = state.selectDate.copy()\r\n                    temp.setMonthDate(ipd.month!, 1)\r\n                    state.hoverRange = midPd.YM! > temp.YM! ? [temp, midPd] : [midPd, temp]\r\n                }\r\n            },\r\n            /**\r\n             * 处理年份面板选择年份变化动作\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 11:14\r\n             */\r\n            onSelectYearChange(val: number) {\r\n                viewModel.value = DateView.month\r\n                state.selectDate.setYear(val)\r\n                setSelectDate(state.selectDate)\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => {\r\n\r\n                const Month = DatePanelWrapper({\r\n                    left: <pl-button icon=\"el-icon-d-arrow-left\" mode=\"text\" size=\"mini\" onClick={methods.prevYear}/>,\r\n                    center: <span onClick={() => viewModel.value = DateView.year}>{state.selectDate.year}</span>,\r\n                    right: <pl-button icon=\"el-icon-d-arrow-right\" mode=\"text\" size=\"mini\" onClick={methods.nextYear}/>,\r\n                    content: (\r\n                        <Transition name={`pl-transition-slide-${state.slide}`}>\r\n                            <ul {...{\r\n                                class: 'pl-date-base-panel-month-list',\r\n                                key: state.selectDate.year!,\r\n                                direction: 'vertical'\r\n                            }}>\r\n                                {monthList.value.map(item => (DatePanelItemWrapper({\r\n                                    item,\r\n                                    onClick: handler.onClickItem,\r\n                                    onMouseenter: handler.onMouseEnterItem,\r\n                                    Node: <li class=\"pl-date-base-panel-month-item\" key={item.month}/>,\r\n                                })))}\r\n                            </ul>\r\n                        </Transition>\r\n                    )\r\n                }) as any\r\n\r\n                const Wrapper = (\r\n                    <div {...{\r\n                        class: 'pl-date-base-panel pl-date-base-panel-month-wrapper',\r\n                        direction: props.direction,\r\n                    }}>\r\n                        <Transition name={`pl-transition-slide-${viewModel.value === DateView.year ? 'prev' : 'next'}`}>\r\n                            {viewModel.value === DateView.month ? <Month {...{class: 'pl-date-base-panel-month', direction: 'horizontal'}}/> : (\r\n                                <pl-date-base-panel-year\r\n                                    modelValue={String(state.selectDate.year)}\r\n                                    onChange={handler.onSelectYearChange}\r\n                                    direction=\"horizontal\"/>\r\n                            )}\r\n                        </Transition>\r\n                    </div>\r\n                ) as any\r\n\r\n                return <Wrapper/>\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DatePanelItemWrapper, DatePanelWrapper, DatePublicEmits, DatePublicProps, DateView, DateViewSeq, Dbpid, SlideTransitionDirection} from \"../date.utils\";\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\nimport {PlainDate, PlainDateType} from \"../../../utils/PlainDate\";\r\nimport {computed, Transition, watch} from 'vue';\r\nimport {zeroize} from \"plain-utils/string/zeroize\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-date-base-panel-date',\r\n    props: {\r\n        ...DatePublicProps,\r\n        view: {type: String, default: DateView.date},\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        onUpdateModelValue: (val?: string, ipd?: PlainDateType) => true,\r\n        onClickItem: (ipd: PlainDateType) => true,\r\n        onSelectTime: (val: string) => true,\r\n        onMouseenterItem: (item: Dbpid) => true,\r\n        onSelectDateChange: (ipd: PlainDateType) => true,\r\n        onMouseleaveDateList: (e: MouseEvent) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {\r\n            state,\r\n            today,\r\n            tempPd,\r\n            model,\r\n            viewModel,\r\n            getStatus,\r\n            setSelectDate,\r\n            displayFormat,\r\n            valueFormat,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            useModelConfig: {\r\n                model: {\r\n                    autoEmit: false,\r\n                    onChange: (val) => !props.selectDate && utils.setSelectDate(val, false)\r\n                },\r\n            },\r\n            jdView: UseDateJudgementView.YMD,\r\n        })\r\n\r\n        const utils = {\r\n            /**\r\n             * 设置当前面板的年月\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 10:57\r\n             */\r\n            setSelectDate: (val: string | PlainDateType | undefined, autoEmit = true) => {\r\n                if (!val || typeof val == \"string\") {\r\n                    tempPd.setValue(val)\r\n                    setSelectDate(tempPd)\r\n                } else {\r\n                    setSelectDate(val)\r\n                }\r\n                if (autoEmit) {\r\n                    emit.onSelectDateChange(state.selectDate)\r\n                }\r\n            },\r\n            /**\r\n             * 派发值变化事件，先校验值是否大于最大值，小于最小值，是则取最大值（最小值）\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 10:58\r\n             */\r\n            emitValue(valueString: string) {\r\n                const {max, min} = state.topState\r\n                let vpd = new PlainDate(valueString, displayFormat, valueFormat)\r\n                if (!!max && !max.isNull && (!!props.datetime ? (vpd.YMDHms! > max.YMDHms) : (vpd.YMD! > max.YMD))) {\r\n                    vpd = max\r\n                } else if (!!min && !min.isNull && (!!props.datetime ? (vpd.YMDHms! < min.YMDHms) : (vpd.YMD! < min.YMD))) {\r\n                    vpd = min\r\n                }\r\n                model.value = vpd.valueString!\r\n                emit.onUpdateModelValue(model.value, vpd)\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------computer-------------------------------------------*/\r\n\r\n        const weekList = computed(() => {\r\n            const weeks = ['日', '一', '二', '三', '四', '五', '六']\r\n            return weeks.slice(props.firstWeekDay).concat(weeks.slice(0, props.firstWeekDay))\r\n        })\r\n\r\n        const dateList = computed(() => {\r\n            const {selectDate} = state\r\n            tempPd.setYear(selectDate.year!)\r\n            tempPd.setMonthDate(selectDate.month!, 1)\r\n            const currentMonthFirstDate = tempPd.copy()\r\n            let weekDayDuration = currentMonthFirstDate.day! - props.firstWeekDay\r\n            let offsetDay = weekDayDuration === 0 ? 7 : weekDayDuration > 0 ? weekDayDuration : 7 + weekDayDuration\r\n            let firstDateTime = new Date(currentMonthFirstDate.time! - (offsetDay) * 24 * 60 * 60 * 1000).getTime()\r\n            let list: Dbpid[] = []\r\n            for (let i = 0; i < 42; i++) {\r\n                const ipd = tempPd.copy()\r\n                ipd.setTime(firstDateTime)\r\n                let item = {\r\n                    ipd,\r\n                    label: ipd.date!,\r\n                    ...getStatus(ipd),\r\n                    isSelectMonth: ipd.YM === selectDate.YM,\r\n                }\r\n\r\n                list.push(item)\r\n                firstDateTime += 24 * 60 * 60 * 1000\r\n            }\r\n            return list\r\n        })\r\n\r\n        const defaultTimePd = computed(() => {\r\n            const pd = new PlainDate(props.defaultTime, 'HH:mm:ss', 'HH:mm:ss')\r\n            if (pd.isNull) {\r\n                const now = new Date()\r\n                pd.setHms(now.getHours(), now.getMinutes(), now.getSeconds())\r\n            }\r\n            return pd\r\n        })\r\n\r\n        /*---------------------------------------attrs-------------------------------------------*/\r\n\r\n        const monthAttrs = computed(() => ({\r\n            modelValue: state.selectDate.valueString,\r\n            displayFormat,\r\n            valueFormat,\r\n            view: viewModel.value,\r\n            onChange: handler.onSelectMonthChange,\r\n        }))\r\n\r\n        const timeAttrs = computed(() => {\r\n\r\n            tempPd.setValue(model.value)\r\n            const vpd = tempPd.copy()\r\n            const timePd = defaultTimePd.value.copy()\r\n\r\n            /*此时tempPd存有model.value的时间，如果不为空，则设置时间得model.value的时间*/\r\n            if (!tempPd.isNull) {\r\n                timePd.setHms(tempPd)\r\n            }\r\n\r\n            const attrs = {\r\n                modelValue: timePd.valueString,\r\n                displayFormat: 'HH:mm:ss',\r\n                valueFormat: 'HH:mm:ss',\r\n                max: undefined as undefined | string | null,\r\n                min: undefined as undefined | string | null,\r\n                onChange: handler.onSelectTime,\r\n            }\r\n\r\n            const {max, min} = state.topState\r\n\r\n            if (!!vpd && !vpd.isNull) {\r\n                /*限制最大最小值*/\r\n                if (!!max && !max.isNull) {\r\n                    if (max.YMD <= vpd.YMD) {\r\n                        let tempDefaultTime = timePd.copy()\r\n                        tempDefaultTime.setHms(max)\r\n                        attrs.max = tempDefaultTime.valueString\r\n                    }\r\n                }\r\n\r\n                if (!!min && !min.isNull) {\r\n                    if (min.YMD >= vpd.YMD) {\r\n                        let tempDefaultTime = timePd.copy()\r\n                        tempDefaultTime.setHms(min)\r\n                        attrs.min = tempDefaultTime.valueString\r\n                    }\r\n                }\r\n            }\r\n\r\n            return attrs\r\n\r\n        })\r\n\r\n        const showTimePd = computed(() => {\r\n            const value = new PlainDate(model.value, displayFormat, valueFormat)\r\n            return value.isNull ? state.selectDate : value\r\n        })\r\n\r\n        /*---------------------------------------methods-------------------------------------------*/\r\n\r\n        const methods = {\r\n            /**\r\n             * 面板切换到上一年\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 10:56\r\n             */\r\n            prevYear() {\r\n                state.selectDate.setYear(state.selectDate.year! - 1)\r\n                utils.setSelectDate(state.selectDate.copy())\r\n            },\r\n            /**\r\n             * 面板切换到下一年\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 10:56\r\n             */\r\n            nextYear() {\r\n                state.selectDate.setYear(state.selectDate.year! + 1)\r\n                utils.setSelectDate(state.selectDate.copy())\r\n            },\r\n            /**\r\n             * 面板切换到上一个月份\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 10:56\r\n             */\r\n            prevMonth() {\r\n                state.selectDate.setMonthDate(state.selectDate.month! - 1, 1)\r\n                utils.setSelectDate(state.selectDate.copy())\r\n            },\r\n            /**\r\n             * 面板切换到下一个月份\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 10:56\r\n             */\r\n            nextMonth() {\r\n                state.selectDate.setMonthDate(state.selectDate.month! + 1, 1)\r\n                utils.setSelectDate(state.selectDate.copy())\r\n            },\r\n            /**\r\n             * 切换视图，确定动画方向\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 10:57\r\n             */\r\n            changeView(view: DateView) {\r\n                if (view === viewModel.value) return\r\n                const oldSeq = DateViewSeq[viewModel.value]\r\n                const newSeq = DateViewSeq[view]\r\n                state.slide = newSeq > oldSeq ? SlideTransitionDirection.next : SlideTransitionDirection.prev\r\n                viewModel.value = view\r\n            },\r\n        }\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            /**\r\n             * 点击日期元素处理动作\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 10:58\r\n             */\r\n            onClickItem({ipd}: Dbpid) {\r\n                const defaultTime = defaultTimePd.value\r\n                const vpd = new PlainDate(model.value, displayFormat, valueFormat)\r\n                ipd = ipd.copy()\r\n                if (!vpd.isNull) {\r\n                    ipd!.setHms(vpd)\r\n                } else {\r\n                    ipd!.setHms(defaultTime)\r\n                }\r\n\r\n                emit.onClickItem(ipd)\r\n                utils.emitValue(ipd.valueString!)\r\n            },\r\n            /**\r\n             * 处理选择时间处理动作\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 10:58\r\n             */\r\n            onSelectTime(val: string) {\r\n                const {selectDate} = state\r\n                const vpd = new PlainDate(model.value, displayFormat, valueFormat)\r\n                const defaultTime = defaultTimePd.value\r\n\r\n                const tempPd = defaultTime.copy()\r\n                tempPd.setValue(val)\r\n\r\n                if (vpd.isNull) {\r\n                    vpd.setYear(selectDate.year!)\r\n                    vpd.setMonthDate(selectDate.month!, selectDate.date!)\r\n                }\r\n\r\n                vpd.setHms(tempPd)\r\n\r\n                utils.emitValue(vpd.valueString!)\r\n                emit.onSelectTime(val)\r\n            },\r\n            /**\r\n             * 月份选择面板的值发生变化之后，改变视图\r\n             * @author  韦胜健\r\n             * @date    2020/4/15 10:59\r\n             */\r\n            onSelectMonthChange(val: string) {\r\n                state.selectDate.setValue(val)\r\n                utils.setSelectDate(state.selectDate.copy())\r\n                methods.changeView(DateView.date)\r\n            },\r\n        }\r\n\r\n        watch(() => props.selectDate, (val) => state.selectDate = val || today.copy())\r\n\r\n        const render = {\r\n            date: () => {\r\n                const Wrapper: any = DatePanelWrapper({\r\n                    left: (<>\r\n                        <pl-button icon=\"el-icon-d-arrow-left\" mode=\"text\" size=\"mini\" onClick={methods.prevYear}/>\r\n                        <pl-button icon=\"el-icon-arrow-left\" mode=\"text\" size=\"mini\" onClick={methods.prevMonth}/>\r\n                    </>),\r\n                    center: (<>\r\n                        <span onClick={() => methods.changeView(DateView.year)}>{state.selectDate.year}</span>\r\n                        -\r\n                        <span onClick={() => methods.changeView(DateView.month)}>{zeroize(state.selectDate.month! + 1)}</span>\r\n                        {!!props.datetime && (<span class=\"pl-date-base-panel-date-time-label\" onClick={() => methods.changeView(DateView.time)}>\r\n                        {timeAttrs.value.modelValue}\r\n                    </span>)}\r\n                    </>),\r\n                    right: (<>\r\n                        <pl-button icon=\"el-icon-arrow-right\" mode=\"text\" size=\"mini\" onClick={methods.nextMonth}/>\r\n                        <pl-button icon=\"el-icon-d-arrow-right\" mode=\"text\" size=\"mini\" onClick={methods.nextYear}/>\r\n                    </>),\r\n                    content: (<>\r\n                        <ul class=\"pl-date-base-panel-date-week-list\">\r\n                            {weekList.value.map(item => (\r\n                                <li class=\"pl-date-base-panel-item pl-date-base-panel-date-week-item\" key={item}>\r\n                                    <div><span>{item}</span></div>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                        <pl-list class=\"pl-date-base-panel-date-list\" tag=\"ul\" onMouseleave={emit.onMouseleaveDateList}>\r\n                            {dateList.value.map((item, index) => (\r\n                                DatePanelItemWrapper({\r\n                                    item,\r\n                                    onClick: handler.onClickItem,\r\n                                    onMouseenter: emit.onMouseenterItem,\r\n                                    Node: <pl-item\r\n                                        {...{\r\n                                            tag: 'li',\r\n                                            class: ['pl-date-base-panel-date-item', {'pl-date-base-panel-date-item-other-month': !item.isSelectMonth,}],\r\n                                            key: item.isSelectMonth ? item.ipd!.date : `_${index}`,\r\n                                        }}\r\n                                    />,\r\n                                })\r\n                            ))}\r\n                        </pl-list>\r\n                    </>),\r\n                })\r\n                return <Wrapper {...{class: 'pl-date-base-panel-date', direction: 'horizontal', key: 'date'}}/>\r\n            },\r\n            month: () => {\r\n                return <pl-date-base-panel-month {...monthAttrs.value} direction=\"horizontal\" key={viewModel.value}/>\r\n            },\r\n            time: () => {\r\n                const Wrapper: any = DatePanelWrapper({\r\n                    center: (<><span onClick={() => methods.changeView(DateView.date)}>\r\n                                {showTimePd.value.year}-{zeroize(showTimePd.value.month! + 1)}-{zeroize(showTimePd.value.date!)}\r\n                            </span></>),\r\n                    content: <pl-time-panel {...timeAttrs.value}/>,\r\n                })\r\n                return <Wrapper {...{class: 'pl-date-base-panel-time', direction: 'horizontal', key: 'time'}}/>\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-date-base-panel-date-wrapper pl-date-base-panel\">\r\n                    <Transition name={`pl-transition-slide-${state.slide}`}>\r\n                        {render[viewModel.value === DateView.year ? DateView.month : viewModel.value]()}\r\n                    </Transition>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateEmitRangeType, DatePublicEmits, DatePublicProps, DateView, Dbpid} from \"../date.utils\";\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\nimport {computed, nextTick} from 'vue';\r\nimport {PlainDate, PlainDateType} from \"../../../utils/PlainDate\";\r\n\r\nconst DefaultTime = {\r\n    start: '00:00:00',\r\n    end: '23:59:59'\r\n}\r\n\r\nexport default designComponent({\r\n    name: 'pl-date-panel-date-range',\r\n    props: {\r\n        ...DatePublicProps,\r\n\r\n        range: {type: Boolean, default: true},\r\n        view: {type: String, default: DateView.date}\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n        mousedown: (e: MouseEvent, type: DateEmitRangeType) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {\r\n            today,\r\n            tempPd,\r\n            state,\r\n            startModel,\r\n            endModel,\r\n            displayFormat,\r\n            valueFormat,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            useModelConfig: {\r\n                model: {\r\n                    autoEmit: false,\r\n                },\r\n                start: {\r\n                    autoEmit: false,\r\n                    onChange: val => {\r\n                        tempPd.setValue(val)\r\n                        const startPd = tempPd.copy()\r\n                        tempPd.setValue(endModel.value)\r\n                        const endPd = tempPd.copy()\r\n                        state.valueRange = [startPd, endPd]\r\n                        state.hoverRange = null\r\n                        state.selectDate = startPd.isNull ? today.copy() : startPd.copy()\r\n                    },\r\n                },\r\n                end: {\r\n                    autoEmit: false,\r\n                    onChange: val => {\r\n                        tempPd.setValue(startModel.value)\r\n                        const startPd = tempPd.copy()\r\n                        tempPd.setValue(val)\r\n                        const endPd = tempPd.copy()\r\n                        state.valueRange = [startPd, endPd]\r\n                        state.hoverRange = null\r\n                    }\r\n                }\r\n            },\r\n            jdView: UseDateJudgementView.YMD,\r\n        })\r\n\r\n        const formatData = computed(() => {\r\n\r\n            const start = startModel.value\r\n            const end = endModel.value\r\n\r\n            const pdStart = new PlainDate(start, displayFormat, valueFormat)\r\n            const pdEnd = new PlainDate(end, displayFormat, valueFormat)\r\n\r\n            const pdStartTime = new PlainDate(props.defaultStartTime || DefaultTime.start, 'HH:mm:ss', 'HH:mm:ss');\r\n            const pdEndTime = new PlainDate(props.defaultEndTime || DefaultTime.end, 'HH:mm:ss', 'HH:mm:ss');\r\n\r\n            !pdStart.isNull && pdStartTime.setHms(pdStart);\r\n            !pdEnd.isNull && pdEndTime.setHms(pdEnd);\r\n\r\n            return {\r\n                pdStart,\r\n                pdEnd,\r\n                pdStartTime,\r\n                pdEndTime,\r\n            }\r\n        })\r\n\r\n        const binding = computed(() => {\r\n\r\n            const selectDate = state.selectDate.copy()\r\n            const publicProps = Object.keys(DatePublicProps).reduce((ret, key) => {\r\n                (ret as any)[key] = (props as any)[key]\r\n                return ret\r\n            }, {})\r\n            Object.assign(publicProps, {\r\n                displayFormat: displayFormat,\r\n                valueFormat: valueFormat,\r\n                range: true\r\n            })\r\n            const start = {\r\n                ...publicProps,\r\n                selectDate: selectDate,\r\n                modelValue: startModel.value,\r\n                defaultTime: props.defaultStartTime || DefaultTime.start,\r\n\r\n                onSelectDateChange: (val: PlainDateType) => state.selectDate = val.copy(),\r\n                onMouseenterItem: handler.onMouseenterItem,\r\n                onClickItem: handler.onClickItem,\r\n                onSelectTime: (val: string) => handler.onSelectTime(val, DateEmitRangeType.start),\r\n                onMousedown: (e: MouseEvent) => emit.mousedown(e, DateEmitRangeType.start),\r\n            }\r\n\r\n            const endSelectDate = selectDate.copy()\r\n            endSelectDate.setMonthDate(endSelectDate.month! + 1, 1)\r\n            const end = {\r\n                ...publicProps,\r\n                selectDate: endSelectDate,\r\n                modelValue: endModel.value,\r\n                defaultTime: props.defaultEndTime || DefaultTime.end,\r\n\r\n                onSelectDateChange: (val: PlainDateType) => {\r\n                    val.setMonthDate(val.month! - 1, 1)\r\n                    state.selectDate = val.copy()\r\n                },\r\n                onMouseenterItem: handler.onMouseenterItem,\r\n                onClickItem: handler.onClickItem,\r\n                onSelectTime: (val: string) => handler.onSelectTime(val, DateEmitRangeType.end),\r\n                onMousedown: (e: MouseEvent) => emit.mousedown(e, DateEmitRangeType.end),\r\n            }\r\n\r\n            return {\r\n                start,\r\n                end\r\n            }\r\n        })\r\n\r\n        const utils = {\r\n            emitValue(startPd: PlainDateType, endPd: PlainDateType) {\r\n\r\n                const {max, min} = state.topState\r\n\r\n                if (!!max && !max.isNull && (props.datetime ? max.YMDHms < startPd.YMDHms! : max.YMD < startPd.YMD!)) {\r\n                    startPd = max\r\n                } else if (!!min && !min.isNull && (props.datetime ? min.YMDHms > startPd.YMDHms! : min.YMD > startPd.YMD!)) {\r\n                    startPd = min\r\n                }\r\n\r\n                if (!!max && !max.isNull && (props.datetime ? max.YMDHms < endPd.YMDHms! : max.YMD < endPd.YMD!)) {\r\n                    endPd = max\r\n                } else if (!!min && !min.isNull && (props.datetime ? min.YMDHms > endPd.YMDHms! : min.YMD > endPd.YMD!)) {\r\n                    endPd = min\r\n                }\r\n\r\n                startModel.value = startPd.valueString!\r\n                endModel.value = endPd.valueString!\r\n\r\n                state.hoverRange = null\r\n                state.valueRange = [startPd, endPd]\r\n\r\n                emit.onUpdateStart(startModel.value)\r\n                emit.onUpdateModelValue(startModel.value, DateEmitRangeType.start)\r\n                emit.onUpdateEnd(endModel.value)\r\n                emit.onUpdateModelValue(endModel.value, DateEmitRangeType.end)\r\n            },\r\n        }\r\n\r\n        const handler = {\r\n            async onClickItem(ipd: PlainDateType) {\r\n                const {pdStartTime, pdEndTime} = formatData.value\r\n                const {hoverRange} = state\r\n\r\n                if (!hoverRange) {\r\n                    ipd = ipd.copy()\r\n                    state.hoverRange = [ipd, ipd]\r\n                    state.valueRange = [ipd, ipd]\r\n                } else {\r\n                    let [startPd, endPd] = hoverRange\r\n                    startPd = startPd.copy()\r\n                    endPd = endPd.copy()\r\n\r\n                    startPd.setHms(pdStartTime)\r\n                    endPd.setHms(pdEndTime)\r\n\r\n                    if ((props.datetime ? startPd.YMDHms! > endPd.YMDHms! : startPd.YMD! > endPd.YMD!)) {\r\n                        endPd = startPd\r\n                    }\r\n\r\n                    utils.emitValue(startPd, endPd)\r\n                }\r\n            },\r\n            onMouseenterItem({ipd}: Dbpid) {\r\n                if (!!state.hoverRange) {\r\n                    let midPd = state.valueRange[0]\r\n                    ipd = ipd!.copy()\r\n                    state.hoverRange = midPd.YMD! > ipd.YMD! ? [ipd, midPd] : [midPd, ipd]\r\n                }\r\n            },\r\n            async onSelectTime(val: string, type: DateEmitRangeType) {\r\n                await nextTick()\r\n\r\n                let {selectDate} = state\r\n                let {pdStart, pdEnd, pdStartTime, pdEndTime} = formatData.value\r\n\r\n                if (type === DateEmitRangeType.start) {\r\n                    if (pdStart.isNull) {\r\n                        pdStart.setYMD(selectDate)\r\n                    }\r\n                    pdStartTime.setValue(val)\r\n                    pdStart.setHms(pdStartTime)\r\n                    if (pdEnd.isNull) {\r\n                        pdEnd = pdStart.copy()\r\n                    } else {\r\n                        if ((props.datetime ? pdStart.YMDHms! > pdEnd.YMDHms! : pdStart.YMD! > pdEnd.YMD!)) {\r\n                            pdEnd = pdStart.copy()\r\n                        }\r\n                    }\r\n                } else if (type === DateEmitRangeType.end) {\r\n                    if (pdEnd.isNull) {\r\n                        pdEnd.setYMD(selectDate)\r\n                    }\r\n                    pdEndTime.setValue(val)\r\n                    pdEnd.setHms(pdEndTime)\r\n                    if (pdStart.isNull) {\r\n                        pdStart = pdEnd.copy()\r\n                    } else {\r\n                        if ((props.datetime ? pdStart.YMDHms! > pdEnd.YMDHms! : pdStart.YMD! > pdEnd.YMD!)) {\r\n                            pdStart = pdEnd.copy()\r\n                        }\r\n                    }\r\n                }\r\n\r\n                utils.emitValue(pdStart, pdEnd)\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"pl-date-base-panel pl-date-panel-date-range\">\r\n                    <pl-date-base-panel-date {...binding.value.start}/>\r\n                    <pl-date-base-panel-date {...binding.value.end}/>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DatePublicProps} from \"../date.utils\";\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\nimport {computed} from 'vue';\r\nimport {PlainDate, PlainDateType} from \"../../../utils/PlainDate\";\r\nimport {findOne} from \"plain-utils/object/findOne\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-date-panel-dates',\r\n    props: {\r\n        ...DatePublicProps,\r\n        modelValue: {type: Array},\r\n    },\r\n    emits: {\r\n        onUpdateModelValue: (val?: string[]) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {\r\n            model,\r\n            displayFormat,\r\n            valueFormat,\r\n        } = useDate({\r\n            props: props as any,\r\n            emit: emit as any,\r\n            jdView: UseDateJudgementView.YMD,\r\n            judgementForChild: {\r\n                active: (ipd, view) => {\r\n                    const {value} = formatData.value\r\n                    return value.length > 0 && !!value.find(vpd => vpd[view] === ipd[view])\r\n                },\r\n            },\r\n        })\r\n\r\n        const valueModel = model as { value?: string[] }\r\n        const formatData = computed(() => {\r\n            let value = model.value as string[] | undefined\r\n            value = value || []\r\n            return {\r\n                value: value.map(item => new PlainDate(item, displayFormat, valueFormat)),\r\n            }\r\n        })\r\n\r\n        const handler = {\r\n            onClickItem(ipd: PlainDateType) {\r\n                const {value} = formatData.value\r\n                const ret = findOne(value, item => item.YMD === ipd.YMD, true) as { item: PlainDateType, index: number } | { item: null }\r\n                if (!!ret.item) {\r\n                    value.splice(ret.index, 1)\r\n                } else {\r\n                    value.push(ipd)\r\n                }\r\n                valueModel.value = value.map(item => item.valueString!)\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => (<pl-date-base-panel-date onClickItem={handler.onClickItem}/>)\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../use/designComponent\";\r\nimport {DateEmitRangeType, DatePublicEmits, DatePublicProps, Dbpid} from \"../date.utils\";\r\nimport {useDate, UseDateJudgementView} from \"../useDate\";\r\nimport {computed, ref} from 'vue';\r\nimport {PlainDate, PlainDateType} from \"../../../utils/PlainDate\";\r\n\r\nexport default designComponent({\r\n    name: 'pl-date-panel-week',\r\n    props: {\r\n        ...DatePublicProps,\r\n    },\r\n    emits: {\r\n        ...DatePublicEmits,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const hoverPd = ref(null as null | PlainDateType)\r\n\r\n        const {\r\n            today,\r\n            state,\r\n            model,\r\n            startModel,\r\n            endModel,\r\n            displayFormat,\r\n            valueFormat,\r\n        } = useDate({\r\n            props,\r\n            emit,\r\n            jdView: UseDateJudgementView.YMD,\r\n            judgementForChild: {\r\n                disabled: (ipd, view) => {\r\n                    const {max, min} = state.topState\r\n                    if ((!max || max.isNull) && (!min || min.isNull)) {\r\n                        return false\r\n                    }\r\n                    if (!!max && !max.isNull) {\r\n                        if (ipd[view]! > max[view]!) {\r\n                            return true\r\n                        }\r\n                    }\r\n                    if (!!min && !min.isNull) {\r\n                        if (ipd[view]! < min[view]!) {\r\n                            return true\r\n                        }\r\n                    }\r\n                    return false\r\n                },\r\n                active: (ipd, view) => {\r\n                    const {value, start, end} = WeekGetData.value\r\n                    switch (view) {\r\n                        case UseDateJudgementView.Y:\r\n                            if (!props.range) {\r\n                                return !value.pd.isNull && (value.pd.year == ipd.year)\r\n                            } else {\r\n                                return (!start.pd.isNull && start.pd.year == ipd.year) || (!end.pd.isNull && end.pd.year == ipd.year)\r\n                            }\r\n                        case UseDateJudgementView.YM:\r\n                            if (!props.range) {\r\n                                return !value.pd.isNull && (value.pd.YM === ipd.YM)\r\n                            } else {\r\n                                return (!start.pd.isNull && start.pd.YM === ipd.YM) || (!end.pd.isNull && end.pd.YM === ipd.YM)\r\n                            }\r\n                        case UseDateJudgementView.YMD:\r\n                            if (!props.range) {\r\n                                if (!value.pd.isNull) {\r\n                                    const {start: startPd, end: endPd} = value.range!\r\n\r\n                                    return !startPd.isNull && ((ipd.YMD === startPd.YMD) || (ipd.YMD === endPd.YMD))\r\n                                }\r\n                            } else {\r\n                                if (!start.pd.isNull) {\r\n                                    const {start: startPd, end: endPd} = start.range!\r\n                                    if (startPd.YMD === ipd.YMD || endPd.YMD === ipd.YMD) {\r\n                                        return true\r\n                                    }\r\n                                }\r\n                                if (!end.pd.isNull) {\r\n                                    const {start: startPd, end: endPd} = end.range!\r\n                                    if (startPd.YMD === ipd.YMD || endPd.YMD === ipd.YMD) {\r\n                                        return true\r\n                                    }\r\n                                }\r\n                            }\r\n                    }\r\n                    return false\r\n                },\r\n                hoverStart: (ipd, view) => {\r\n                    const {start} = WeekGetData.value\r\n                    switch (view) {\r\n                        case UseDateJudgementView.Y:\r\n                            return !!state.hoverRange ? false : (!start.pd.isNull && start.pd.Y == ipd.Y)\r\n                        case UseDateJudgementView.YM:\r\n                            return !!state.hoverRange ? false : (!start.pd.isNull && start.pd.YM === ipd.YM)\r\n                    }\r\n                    return false\r\n                },\r\n                hoverEnd: (ipd, view) => {\r\n                    const {end} = WeekGetData.value\r\n                    switch (view) {\r\n                        case UseDateJudgementView.Y:\r\n                            return !!state.hoverRange ? false : (!end.pd.isNull && end.pd.Y == ipd.Y)\r\n                        case UseDateJudgementView.YM:\r\n                            return !!state.hoverRange ? false : (!end.pd.isNull && end.pd.YM === ipd.YM)\r\n                    }\r\n                    return false\r\n                },\r\n                hover: (ipd, view) => {\r\n                    const {value, start, end, hoverStart, hoverEnd, hoverRange} = WeekGetData.value\r\n                    switch (view) {\r\n                        case UseDateJudgementView.Y:\r\n                            if (!props.range) {\r\n                                return false\r\n                            } else {\r\n                                return !!state.hoverRange ? false : (!start.pd.isNull && start.pd.year <= ipd.year!) && (!end.pd.isNull && end.pd.year >= ipd.year!)\r\n                            }\r\n                        case UseDateJudgementView.YM:\r\n                            if (!props.range) {\r\n                                return false\r\n                            } else {\r\n                                return !!state.hoverRange ? false : (!start.pd.isNull && start.pd.YM <= ipd.YM!) && (!end.pd.isNull && end.pd.YM >= ipd.YM!)\r\n                            }\r\n                        case UseDateJudgementView.YMD:\r\n                            if (!!hoverPd.value) {\r\n                                if (utils.isHover(hoverPd.value!, ipd)) {\r\n                                    return true\r\n                                }\r\n                            }\r\n\r\n                            if (!props.range) {\r\n                                if (!value.pd.isNull) {\r\n                                    const {start: startPd, end: endPd} = value.range!\r\n                                    return startPd.YMD! <= ipd.YMD! && endPd.YMD! >= ipd.YMD!\r\n                                }\r\n                            } else {\r\n                                if (!!hoverRange) {\r\n                                    let startPd = hoverStart.range!.start\r\n                                    let endPd = hoverEnd.range!.end\r\n                                    return startPd.YMD! <= ipd.YMD! && endPd.YMD! >= ipd.YMD!\r\n                                } else {\r\n                                    if (!!start.range && !!end.range) {\r\n                                        let startPd = start.range.start\r\n                                        let endPd = end.range.end\r\n                                        return startPd.YMD! <= ipd.YMD! && endPd.YMD! >= ipd.YMD!\r\n                                    }\r\n                                }\r\n                            }\r\n                    }\r\n                    return false\r\n                },\r\n            },\r\n            useModelConfig: {\r\n                model: {\r\n                    onChange: (val) => {\r\n                        const vpd = new PlainDate(val, displayFormat, valueFormat)\r\n                        state.selectDate = vpd.isNull ? today.copy() : vpd.copy()\r\n                    }\r\n                },\r\n                start: {\r\n                    onChange: val => {\r\n                        const startPd = new PlainDate(val, displayFormat, valueFormat)\r\n                        const endPd = new PlainDate(endModel.value, displayFormat, valueFormat)\r\n                        state.valueRange = [startPd, endPd]\r\n                        state.hoverRange = null\r\n\r\n                        state.selectDate = startPd.isNull ? today.copy() : startPd.copy()\r\n                    }\r\n                },\r\n                end: {\r\n                    onChange: val => {\r\n                        state.valueRange = [\r\n                            new PlainDate(startModel.value, displayFormat, valueFormat),\r\n                            new PlainDate(val, displayFormat, valueFormat)\r\n                        ]\r\n                        state.hoverRange = null\r\n                    },\r\n                },\r\n            },\r\n        })\r\n\r\n        const WeekGetData = computed(() => {\r\n            let {vpd} = state.topState\r\n            const [start, end] = state.valueRange\r\n            const {hoverRange} = state\r\n            const [hoverStart, hoverEnd] = (hoverRange || []) as [null | PlainDateType, null | PlainDateType]\r\n            if (!vpd) {\r\n                vpd = new PlainDate(model.value, displayFormat, valueFormat)\r\n            }\r\n            return {\r\n                value: {\r\n                    pd: vpd,\r\n                    range: vpd.isNull ? null : utils.getWeekPdByPlainDate(vpd),\r\n                },\r\n                start: {\r\n                    pd: start,\r\n                    range: start.isNull ? null : utils.getWeekPdByPlainDate(start),\r\n                },\r\n                end: {\r\n                    pd: end,\r\n                    range: end.isNull ? null : utils.getWeekPdByPlainDate(end),\r\n                },\r\n                hoverStart: {\r\n                    pd: hoverStart,\r\n                    range: !!hoverRange ? utils.getWeekPdByPlainDate(hoverStart!) : null,\r\n                },\r\n                hoverEnd: {\r\n                    pd: hoverEnd,\r\n                    range: !!hoverRange ? utils.getWeekPdByPlainDate(hoverEnd!) : null\r\n                },\r\n                hoverRange,\r\n            }\r\n        })\r\n\r\n        const utils = {\r\n            getWeekPdByPlainDate(pd: PlainDateType): { start: PlainDateType, end: PlainDateType } {\r\n                let day = pd.day!\r\n                let firstWeekDay = props.firstWeekDay\r\n\r\n                const weekDayDuration = day - firstWeekDay\r\n                let offsetDay = weekDayDuration === 0 ? 0 : weekDayDuration > 0 ? weekDayDuration : 7 + weekDayDuration\r\n\r\n                let startPd = pd.copy()\r\n                startPd.setMonthDate(startPd.month!, startPd.date! - offsetDay)\r\n                let endPd = startPd.copy()\r\n                endPd.setMonthDate(endPd.month!, endPd.date! + 6)\r\n                return {\r\n                    start: startPd, end: endPd\r\n                }\r\n            },\r\n            /**\r\n             * ipd是否处于weekPd所在的周范围之内\r\n             * @author  韦胜健\r\n             * @date    2020/4/16 16:07\r\n             */\r\n            isHover(weekPd: PlainDateType, ipd: PlainDateType) {\r\n                const {start, end} = this.getWeekPdByPlainDate(weekPd)\r\n                return ipd.YMD! >= start.YMD! && ipd.YMD! <= end.YMD!\r\n            },\r\n        }\r\n\r\n        const dateAttrs = computed(() => ({\r\n            class: 'pl-date-panel-week',\r\n            range: true,\r\n            displayFormat: displayFormat,\r\n            valueFormat: valueFormat,\r\n            modelValue: startModel.value,\r\n            selectDate: state.selectDate,\r\n            firstWeekDay: props.firstWeekDay,\r\n            onMouseleaveDateList: () => hoverPd.value = null,\r\n            onMouseenterItem: handler.onMouseenterItem,\r\n            onClickItem: handler.onClickItem,\r\n            onSelectDateChange: (val: PlainDateType) => state.selectDate = val\r\n        }))\r\n\r\n        /*---------------------------------------handler-------------------------------------------*/\r\n\r\n        const handler = {\r\n            onClickItem(ipd: PlainDateType) {\r\n                const {start} = utils.getWeekPdByPlainDate(ipd)\r\n\r\n                if (!props.range) {\r\n                    model.value = start.valueString!\r\n                } else {\r\n                    if (!state.hoverRange) {\r\n                        const {start: itemStart} = utils.getWeekPdByPlainDate(ipd)\r\n\r\n                        state.hoverRange = [itemStart, itemStart]\r\n                        state.valueRange = [itemStart, itemStart]\r\n                    } else {\r\n                        const [startPd, endPd] = state.hoverRange!\r\n\r\n                        startModel.value = startPd.valueString!\r\n                        endModel.value = endPd.valueString!\r\n\r\n                        state.hoverRange = null\r\n                        state.valueRange = [startPd, endPd]\r\n\r\n                        emit.onUpdateModelValue(startModel.value, DateEmitRangeType.start)\r\n                        emit.onUpdateModelValue(endModel.value, DateEmitRangeType.end)\r\n                    }\r\n                }\r\n            },\r\n            onMouseenterItem({ipd}: Dbpid) {\r\n                const {start: itemStartPd} = utils.getWeekPdByPlainDate(ipd!)\r\n                hoverPd.value = itemStartPd\r\n\r\n                if (!!state.hoverRange) {\r\n                    const start = WeekGetData.value.start.range!.start\r\n                    state.hoverRange = start.YMD! > itemStartPd.YMD! ? [itemStartPd, start] : [start, itemStartPd]\r\n                }\r\n            },\r\n        }\r\n\r\n        return {\r\n            render: () => <pl-date-base-panel-date {...dateAttrs.value}/>\r\n        }\r\n    },\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport DateTimeInput from '../date-time-input'\r\nimport DateBasePanelYear from './panel/date-base-panel-year'\r\nimport Date from './date'\r\nimport DateBasePanelMonth from './panel/date-base-panel-month'\r\nimport DateBasePanelDate from './panel/date-base-panel-date'\r\nimport DatePanelDateRange from './panel/date-panel-date-range'\r\nimport DatePanelDates from './panel/date-panel-dates'\r\nimport DatePanelWeek from './panel/date-panel.week'\r\nimport DatePanel from './panel/date-panel'\r\n\r\nexport default createComponentPlugin(Date, {\r\n    exposeComponents: {\r\n        DateBasePanelYear,\r\n        DateBasePanelMonth,\r\n        DateBasePanelDate,\r\n        DatePanelDateRange,\r\n        DatePanelDates,\r\n        DatePanelWeek,\r\n        DatePanel,\r\n    },\r\n    plugins: [\r\n        DateTimeInput\r\n    ],\r\n})","import form from './form'\r\nimport item from './form-item'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nconst FormItem = createComponentPlugin(item)\r\n\r\nexport default createComponentPlugin(form, {\r\n    exposeComponents: {FormItem}\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {useSlots} from \"../../../../use/useSlots\";\r\nimport {ComponentPublicInstance, getCurrentInstance, inject, onBeforeUnmount, onMounted, provide, ref} from 'vue';\r\nimport {TablePlc} from \"./plc.type\";\r\n\r\nexport const TablePlcCollector = (() => {\r\n    const ProvideString = '@@TablePlcCollector'\r\n    const useParent = () => {\r\n        const children = ref([] as TablePlc[])\r\n        const refer = {\r\n            children: children.value,\r\n            add: (proxy: ComponentPublicInstance) => {\r\n                const el = proxy.$el as HTMLElement\r\n                const index = Array.from(el.parentElement!.childNodes)\r\n                    .filter((item: any) => item.nodeName !== '#comment' && item.nodeName !== '#text' && (!item.style || item.style.display !== 'none'))\r\n                    .indexOf(el)\r\n                children.value.splice(index, 0, proxy as any)\r\n            },\r\n            remove: (proxy: ComponentPublicInstance) => {\r\n                const index = children.value.indexOf(proxy as any)\r\n                if (index > -1) {\r\n                    children.value.splice(index, 1)\r\n                }\r\n            },\r\n        }\r\n        provide(ProvideString, refer)\r\n        return refer\r\n    }\r\n    const useChild = () => {\r\n        const {add, remove} = inject(ProvideString) as ReturnType<typeof useParent>\r\n        const ctx = getCurrentInstance()!\r\n        onMounted(() => add(ctx.proxy!))\r\n        onBeforeUnmount(() => remove(ctx.proxy!))\r\n        return ctx\r\n    }\r\n    return {\r\n        useParent,\r\n        useChild,\r\n    }\r\n})();\r\n\r\nexport default designComponent({\r\n    name: 'plc-collector',\r\n    setup() {\r\n        const {slots} = useSlots()\r\n        const {children} = TablePlcCollector.useParent()\r\n        return {\r\n            refer: {\r\n                children\r\n            },\r\n            render: () => (\r\n                <div class=\"plc-collector\">\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {Plc} from \"./plc.type\";\r\n\r\nexport function renderColgroup(flatPlcList: Plc[]) {\r\n    return (\r\n        <colgroup>\r\n            {flatPlcList.map((plc) => <col width={plc.props.width || ''}/>)}\r\n        </colgroup>\r\n    )\r\n}","/**\r\n * 处理表头拖拽调整宽度的功能\r\n * @author  韦胜健\r\n * @date    2020/8/18 16:17\r\n */\r\nimport {TablePlc} from \"../../plc/core/plc.type\";\r\nimport Table from \"../../table\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\n\r\nexport function useHeadCellResize(table: typeof Table.use.class, plc: TablePlc) {\r\n\r\n    const state = {\r\n        indicatorEl: null as null | HTMLElement,\r\n        startX: null as null | number,\r\n        endX: null as null | number,\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n\r\n            const tableEl = table.refs.el\r\n\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n\r\n            window.addEventListener('mousemove', handler.mousemove)\r\n            window.addEventListener('mouseup', handler.mouseup)\r\n            disabledUserSelect()\r\n            state.startX = e.clientX\r\n\r\n            state.indicatorEl = document.createElement('div')\r\n\r\n            const cell = e.currentTarget as HTMLElement\r\n\r\n            const {left, width} = cell.getBoundingClientRect()\r\n            const {top, height} = tableEl.getBoundingClientRect()\r\n\r\n            Object.assign(state.indicatorEl.style, {\r\n                display: 'inline-block',\r\n                zIndex: 9999,\r\n                position: 'fixed',\r\n\r\n                width: `${width}px`,\r\n                backgroundColor: '#ddd',\r\n                height: `${height}px`,\r\n                top: `${top}px`,\r\n                left: `${left}px`,\r\n            })\r\n\r\n            document.body.appendChild(state.indicatorEl)\r\n        },\r\n        mousemove: (e: MouseEvent) => {\r\n            state.indicatorEl!.style.left = `${e.clientX}px`\r\n        },\r\n        mouseup: (e: MouseEvent) => {\r\n            window.removeEventListener('mousemove', handler.mousemove)\r\n            window.removeEventListener('mouseup', handler.mouseup)\r\n            enableUserSelect()\r\n            document.body.removeChild(state.indicatorEl!)\r\n            state.endX = e.clientX\r\n            let durWidth = state.endX - state.startX!\r\n            plc.setDurWidth(durWidth)\r\n        }\r\n    }\r\n\r\n    return {\r\n        resizeHandler: handler,\r\n    }\r\n}","import {Plc, TablePlc, TableRenderScope} from \"./plc.type\";\r\nimport {TableNode} from \"../../core/useTableNode\";\r\nimport {VNodeChild} from \"../../../../shims\";\r\n\r\nexport function renderHeadCell(plc: TablePlc) {\r\n    // 如果存在 head作用域插槽，渲染head作用域插槽\r\n    if (plc.scopedSlots.head.isExist()) {\r\n        return plc.scopedSlots.head({plc: plc as any})\r\n    }\r\n    // 如果存在 props.head 渲染函数，则渲染 props.head\r\n    if (!plc.group && !!plc.props.head) {\r\n        return plc.props.head({plc})\r\n    }\r\n    return plc.props.title\r\n}\r\n\r\nexport function renderBodyCell(\r\n    {\r\n        node,\r\n        plc,\r\n    }: {\r\n        node: TableNode,\r\n        plc: Plc,\r\n    }\r\n) {\r\n    const editable = getEditable(plc, node)\r\n    const body = getBodyCell({node, plc, editable})\r\n    return {\r\n        editable,\r\n        body,\r\n    }\r\n}\r\n\r\n/**\r\n * 判断当前是否可编辑\r\n * 1. 如果当前行非编辑状态，则不可编辑\r\n * 2. 如果列没有edit作用域插槽以及渲染函数，则不可编辑\r\n * 3. 如果列的editable属性为函数，则计算这个函数的值来定性是否可编辑\r\n *\r\n * 这个【是否可编辑】值用来设置 body-cell 的样式，以便body-cell清楚地知道当前是否处于可编辑状态，并且设置padding\r\n *\r\n * @author  韦胜健\r\n * @date    2020/7/21 21:16\r\n */\r\nfunction getEditable(plc: Plc, node: TableNode) {\r\n    // 行非编辑状态下，定性为不可编辑\r\n    if (!node.edit) {\r\n        return false\r\n    }\r\n    // 如果没有edit渲染函数以及作用域插槽，那么直接定性为不可编辑\r\n    if (!plc.props.edit && !plc.scopedSlots.edit.isExist()) {\r\n        return false\r\n    }\r\n    return typeof plc.props.editable === \"function\" ? plc.props.editable(node) : (plc.props.editable !== false)\r\n}\r\n\r\nfunction getBodyCell(\r\n    {\r\n        node,\r\n        plc,\r\n        editable,\r\n    }: {\r\n        node: TableNode,\r\n        plc: Plc,\r\n        editable: boolean,\r\n    }\r\n): VNodeChild {\r\n    let renderScope: TableRenderScope\r\n    if (node.isSummary) {\r\n        // 合计行中的row一直是原始的row对象\r\n        renderScope = {node, plc, row: node.data}\r\n        // 合计行，使用作用域插槽 summary渲染，没有则使用渲染函数summary渲染，么有则使用 default作用域插槽渲染，没有\r\n        // 则使用渲染函数default渲染，没有则直接渲染field对应的值\r\n        if (plc.scopedSlots.summary.isExist()) {\r\n            return plc.scopedSlots.summary(renderScope)\r\n        }\r\n        if (!!plc.props.summary) {\r\n            return plc.props.summary(renderScope)\r\n        }\r\n        if (plc.scopedSlots.default.isExist()) {\r\n            return plc.scopedSlots.default(renderScope)\r\n        }\r\n        if (!!plc.props.default) {\r\n            return plc.props.default(renderScope)\r\n        }\r\n        return !!plc.props.field ? renderScope.row[plc.props.field] : null\r\n    } else {\r\n        // 如果当前行处于可编辑状态，则渲染的行数据对象为 rowData.editRow，否则为 rowData.data\r\n        let row = node.edit ? node.editRow : node.data\r\n        renderScope = {node, plc, row}\r\n\r\n        if (editable) {\r\n            // 当前一定存在 plc.scopedSlots.edit 或者 plc.props.edit，否则 editable不可能为true\r\n            if (plc.scopedSlots.edit.isExist()) {\r\n                return plc.scopedSlots.edit(renderScope)\r\n            }\r\n            if (!!plc.props.edit) {\r\n                return plc.props.edit(renderScope)\r\n            }\r\n        } else {\r\n            // 当前单元格不可编辑，如果当前行处于编辑状态，则渲染的行数据为 tableNode.editRow，否则为 tableNode.data\r\n            // 使用作用域插槽default渲染，没有则使用渲染函数default渲染，没有则直接显示field对应的值\r\n            if (plc.scopedSlots.default.isExist()) {\r\n                return plc.scopedSlots.default(renderScope)\r\n            }\r\n            if (!!plc.props.default) {\r\n                return plc.props.default(renderScope)\r\n            }\r\n            return !!plc.props.field ? renderScope.row[plc.props.field] : null\r\n        }\r\n    }\r\n}","import {Plc, TablePlc} from \"../../plc/core/plc.type\";\r\nimport Table from \"../../table\";\r\nimport {useAutoScroll} from \"../../../../use/useAutoScroll\";\r\nimport {StyleProperties} from \"../../../../shims\";\r\nimport {addClass} from \"plain-utils/dom/addClass\";\r\nimport {nextIndex} from \"../../../../utils/nextIndex\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport {PlainScroll} from \"../../../scroll/scroll\";\r\n\r\ninterface DragData {\r\n    left: number\r\n    width: number\r\n    plc: TablePlc\r\n    droppable: boolean\r\n}\r\n\r\nenum HoverPart {\r\n    left = 'left',\r\n    right = 'right',\r\n}\r\n\r\n/**\r\n * 获取可以滚动的父组件\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:50\r\n */\r\nexport function getHorizontalScrollParent(el: HTMLElement): HTMLElement {\r\n    while (!!el && el.scrollWidth <= el.offsetWidth) {\r\n        el = el.parentElement!\r\n    }\r\n    return el\r\n}\r\n\r\n/**\r\n * 递归遍历plc数组数据\r\n * @author  韦胜健\r\n * @date    2020/9/6 11:24\r\n */\r\nfunction iteratePlc(plcList: TablePlc[], handler: (plc: TablePlc) => 'stop' | void): void {\r\n\r\n    for (let i = 0; i < plcList.length; i++) {\r\n        const item = plcList[i]\r\n        const flag = handler(item)\r\n        if (flag === 'stop') {\r\n            return\r\n        } else {\r\n            if (item.group) {\r\n                iteratePlc(item.children, handler)\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 或者plc对象的兄弟节点\r\n * @author  韦胜健\r\n * @date    2020/9/6 11:24\r\n */\r\nfunction getBroPlcList(plcList: TablePlc[], plc: TablePlc): TablePlc[] {\r\n\r\n    let broPlcList: TablePlc[] = []\r\n\r\n    if (plcList.indexOf(plc) > -1) {\r\n        broPlcList = plcList\r\n    } else {\r\n        iteratePlc(plcList, itarPlc => {\r\n            if (itarPlc.group) {\r\n                if (itarPlc.children.indexOf(plc) > -1) {\r\n                    broPlcList = itarPlc.children\r\n                    return 'stop'\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    if (broPlcList.length === 0) {\r\n        /*内部错误，找不到兄弟节点*/\r\n        throw new Error('Internal error! sibling node not found.')\r\n    }\r\n\r\n    return broPlcList\r\n}\r\n\r\n/**\r\n * 获取plc的宽度\r\n * @author  韦胜健\r\n * @date    2020/9/6 12:09\r\n */\r\nfunction getPlcWidth(plc: TablePlc) {\r\n    if (!plc.group) {\r\n        return Number(plc.props.width)\r\n    } else {\r\n        return plc.children.reduce((ret: number, item: TablePlc) => {\r\n            ret += getPlcWidth(item)\r\n            return ret\r\n        }, 0)\r\n    }\r\n}\r\n\r\n/**\r\n * 获取plc的高度，如果是plc，则高度为currentTarget的高度，如果是plcGroup，则高度等于所有后代层数乘以currentTarget的高度\r\n * @author  韦胜健\r\n * @date    2020/9/6 11:29\r\n */\r\nfunction getIndicatorHeight(\r\n    plc: TablePlc,\r\n    table: typeof Table.use.class,\r\n) {\r\n    if (plc.group) {\r\n        return (table.plcData.value!.maxLevel - plc.level!) * table.numberState.headRowHeight\r\n    } else {\r\n        return plc.rowspan! * table.numberState.headRowHeight\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 获取plcList中最底层的plc\r\n * @author  韦胜健\r\n * @date    2020/9/6 20:27\r\n */\r\nfunction getLowestPlcList(plcList: TablePlc[]): Plc[] {\r\n\r\n    return plcList.reduce((ret: Plc[], plc: TablePlc) => {\r\n        if (plc.group) {\r\n            ret.push(...getLowestPlcList(plc.children))\r\n        } else {\r\n            ret.push(plc)\r\n        }\r\n        return ret\r\n    }, [] as Plc[])\r\n\r\n}\r\n\r\n/**\r\n * 获取拖拽所需要的数据\r\n * @author  韦胜健\r\n * @date    2020/9/6 20:41\r\n */\r\nfunction getDragData(table: typeof Table.use.class, plc: TablePlc): {\r\n    broData: DragData[],\r\n    broList: TablePlc[]\r\n} {\r\n\r\n    const plcList = table.plcData.value!.plcList\r\n    const broList = getBroPlcList(plcList, plc)\r\n\r\n    const broLowestList = getLowestPlcList(broList)\r\n    const allLowestList = getLowestPlcList(plcList) as TablePlc[]\r\n\r\n    allLowestList.splice(allLowestList.indexOf(broLowestList[0]), broLowestList.length, ...broList)\r\n\r\n    const broData: DragData[] = []\r\n    let left = 0\r\n\r\n    allLowestList.forEach(plc => {\r\n        const item = {\r\n            left,\r\n            width: getPlcWidth(plc),\r\n            plc,\r\n            droppable: broList.indexOf(plc) > -1\r\n        }\r\n        left += item.width\r\n        broData.push(item)\r\n    })\r\n\r\n    // broData.forEach(bro => console.log(bro.plc.props.title, bro.left, bro.droppable))\r\n\r\n    return {\r\n        broList,\r\n        broData,\r\n    }\r\n\r\n}\r\n\r\nexport function useColDraggier(config: () => {\r\n    plc: TablePlc,\r\n    table: typeof Table.use.class,\r\n    scrollRefer: () => PlainScroll,\r\n}) {\r\n    const {plc, table, scrollRefer} = config()\r\n    const isDraggable = !!table.props.colDraggable && plc.props.colDraggable !== false\r\n    if (!isDraggable) {return {tdAttrs: {}}}\r\n    const autoScroller = useAutoScroll({\r\n        vertical: false,\r\n        getScroll: scrollRefer\r\n    })\r\n    const indicatorSize = 3\r\n    const state = {\r\n        startClientX: 0,\r\n        moveClientX: 0,\r\n\r\n        startScrollLeft: 0,\r\n        moveScrollLeft: 0,\r\n\r\n        scrollParent: null as null | HTMLElement,\r\n        currentRect: {\r\n            top: 0,\r\n            left: 0,\r\n            height: 0,\r\n            width: 0,\r\n        },\r\n        scrollRect: {\r\n            top: 0,\r\n            left: 0,\r\n            height: 0,\r\n            width: 0,\r\n        },\r\n        indicator: null as null | HTMLElement,\r\n        dragData: null as null | DragData[],\r\n        broList: null as null | TablePlc[],\r\n        refreshData: null as null | {\r\n            index: number,\r\n            dragData: DragData,\r\n            hover: HoverPart,\r\n        }\r\n    }\r\n\r\n    const utils = {\r\n        getDragData: (left: number): { index: number, dragData: DragData, hover: HoverPart } => {\r\n            for (let i = 0; i < state.dragData!.length; i++) {\r\n                const dd = state.dragData![i];\r\n                if (left >= dd.left && left <= dd.left + dd.width) {\r\n                    return {\r\n                        index: i,\r\n                        dragData: dd,\r\n                        hover: left - dd.left > dd.width / 2 ? HoverPart.right : HoverPart.left\r\n                    }\r\n                }\r\n            }\r\n            throw new Error(`Can not get dragData by left:${left}`)\r\n        },\r\n        refresh() {\r\n            const left = (state.moveClientX - state.scrollRect.left) + (state.moveScrollLeft)\r\n            state.refreshData = utils.getDragData(left)\r\n            const {dragData, hover} = state.refreshData\r\n\r\n            let indicatorLeft = (hover === HoverPart.left ? dragData.left : dragData.left + dragData.width - indicatorSize) + state.scrollRect.left - state.moveScrollLeft\r\n            indicatorLeft = Math.min(Math.max(state.scrollRect.left, indicatorLeft), state.scrollRect.left + state.scrollRect.width - indicatorSize)\r\n\r\n            Object.assign(state.indicator!.style, {\r\n                left: `${indicatorLeft}px`,\r\n            } as StyleProperties)\r\n\r\n            state.indicator!.setAttribute('droppable', dragData.droppable ? 'true' : 'false')\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n\r\n            const {broList, broData} = getDragData(table, plc)\r\n            state.dragData = broData\r\n            state.broList = broList\r\n\r\n            const currentTarget = e.currentTarget as HTMLElement\r\n            state.currentRect = currentTarget.getBoundingClientRect()!\r\n            const indicatorHeight = getIndicatorHeight(plc, table)\r\n\r\n            state.startClientX = state.moveClientX = e.clientX\r\n            state.scrollParent = getHorizontalScrollParent(currentTarget)\r\n            state.scrollRect = state.scrollParent.parentElement!.getBoundingClientRect()\r\n            state.startScrollLeft = state.moveScrollLeft = state.scrollParent.scrollLeft\r\n\r\n            state.indicator = document.createElement('div')\r\n            addClass(state.indicator, 'plt-col-draggier-indicator')\r\n            Object.assign(state.indicator.style, {\r\n                top: `${state.currentRect.top}px`,\r\n                left: `${state.currentRect.left}px`,\r\n                height: `${indicatorHeight}px`,\r\n                width: `${indicatorSize}px`,\r\n                position: 'fixed',\r\n                zIndex: `${nextIndex() + 100}`,  // 加100是为了不被 autoScroller 遮住；\r\n                pointerEvents: 'none',                  // indicator只是一个指示的作用，这里设置none为了不挡住autoScroller的鼠标事件\r\n            } as StyleProperties)\r\n            document.body.appendChild(state.indicator)\r\n\r\n            disabledUserSelect()\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n            state.scrollParent!.addEventListener('mousemove', handler.mousemove)\r\n            state.scrollParent!.addEventListener('scroll', handler.scroll)\r\n\r\n            utils.refresh()\r\n            autoScroller.showHover()\r\n        },\r\n        mousemove: (e: MouseEvent) => {\r\n            state.moveClientX = e.clientX\r\n            utils.refresh()\r\n        },\r\n        scroll: () => {\r\n            state.moveScrollLeft = state.scrollParent!.scrollLeft\r\n            utils.refresh()\r\n        },\r\n        mouseup: () => {\r\n\r\n            (() => {\r\n                if (!state.refreshData) {\r\n                    return\r\n                }\r\n                const {dragData, hover} = state.refreshData\r\n\r\n                if (!dragData.droppable) {\r\n                    return;\r\n                }\r\n\r\n                const startPlc = plc\r\n                const endPlc = dragData.plc\r\n                const broList = state.broList!\r\n\r\n                const startIndex = broList.indexOf(startPlc)\r\n                let endIndex = broList.indexOf(endPlc)\r\n                if (startIndex === endIndex) {\r\n                    return;\r\n                }\r\n\r\n                if (startPlc.props.fixed != endPlc.props.fixed) {\r\n                    startPlc.state.fixed = endPlc.props.fixed\r\n                }\r\n\r\n                broList.splice(startIndex, 1)\r\n                endIndex = broList.indexOf(endPlc)\r\n                endIndex = hover === HoverPart.right ? endIndex + 1 : endIndex\r\n                broList.splice(endIndex, 0, startPlc)\r\n\r\n                broList.forEach((plc, index) => plc.state.order = index)\r\n            })();\r\n\r\n            enableUserSelect()\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n            state.scrollParent!.removeEventListener('mousemove', handler.mousemove)\r\n            state.scrollParent!.removeEventListener('scroll', handler.scroll)\r\n            if (!!state.indicator) {\r\n                state.indicator.parentNode!.removeChild(state.indicator)\r\n                state.indicator = null\r\n            }\r\n            autoScroller.hideHover()\r\n        }\r\n    }\r\n\r\n    return {\r\n        tdAttrs: {onMousedown: handler.mousedown,}\r\n    }\r\n}","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {PropType} from 'vue';\r\nimport {TablePlc} from \"../../plc/core/plc.type\";\r\nimport {useHeadCellResize} from \"./useHeadCellResize\";\r\nimport {renderHeadCell} from \"../../plc/core/render\";\r\nimport {useColDraggier} from \"./useColDraggier\";\r\nimport {PlainScroll} from \"../../../scroll/scroll\";\r\n\r\nexport const PltHeadCell = designComponent({\r\n    name: 'plt-head-cell',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n        tablePlc: {type: Object as PropType<TablePlc>, required: true},\r\n        scroll: {type: Function as PropType<() => PlainScroll>, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {resizeHandler} = useHeadCellResize(props.table, props.tablePlc)\r\n        const {tdAttrs} = useColDraggier(() => ({\r\n            table: props.table,\r\n            plc: props.tablePlc,\r\n            scrollRefer: props.scroll,\r\n        }))\r\n\r\n        return {\r\n            render: () => {\r\n                const content = renderHeadCell(props.tablePlc)\r\n                return (\r\n                    <td\r\n                        class={[\r\n                            props.tablePlc.classes.head,\r\n                            props.tablePlc.props.headCls,\r\n                            !!props.table.props.headCellClassFunc ? props.table.props.headCellClassFunc(props.tablePlc) : null\r\n                        ]}\r\n                        style={{\r\n                            ...props.tablePlc.styles.head as any,\r\n                            ...(!!props.table.props.headCellStyleFunc ? props.table.props.headCellStyleFunc(props.tablePlc) : {})\r\n                        }}\r\n                        rowspan={props.tablePlc.rowspan}\r\n                        colspan={props.tablePlc.colspan}\r\n                        {...tdAttrs}\r\n                    >\r\n                        {content}\r\n                        <span class=\"plt-head-cell-indicator\" onMousedown={resizeHandler.mousedown}/>\r\n                    </td>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {StyleProps} from \"../../../use/useStyle\";\r\nimport {SimpleObject, StyleProperties} from \"../../../shims\";\r\nimport {PropType} from 'vue';\r\nimport {Plc, TablePlc} from \"../plc/core/plc.type\";\r\nimport {TableNode} from \"./useTableNode\";\r\nimport {MultipleClass} from \"../../../use/useClasses\";\r\nimport {FormAssociateFields, FormComponentRules} from \"../../form/form.validate\";\r\nimport {useTree} from \"../../tree/core/useTree\";\r\n\r\nexport type TablePropsConfig = (plcList: TablePlc[]) => Record<string, any>\r\n\r\nexport type TablePropsRowClassFunc = (node: TableNode) => MultipleClass\r\nexport type TablePropsCellClassFunc = (node: TableNode, plc: Plc) => MultipleClass\r\nexport type TablePropsCellStyleFunc = (node: TableNode, plc: Plc) => StyleProperties\r\nexport type TablePropsHeadCellClassFunc = (plc: TablePlc) => MultipleClass\r\nexport type TablePropsHeadCellStyleFunc = (plc: TablePlc) => StyleProperties\r\n\r\nexport type TablePropsSpanMethod = (socpe: { node: TableNode, plc: Plc }) => { rowspan: number, colspan: number }\r\n\r\nexport enum TablePlcAlign {\r\n    left = 'left',\r\n    center = 'center',\r\n    right = 'right',\r\n}\r\n\r\nexport enum TablePlcFixedType {\r\n    left = 'left',\r\n    center = 'center',\r\n    right = 'right',\r\n}\r\n\r\nexport const enum TableHoverPart {\r\n    body = 'body',\r\n    head = 'head'\r\n}\r\n\r\nexport const TableProps = {\r\n\r\n    /*---------------------------------------basic-------------------------------------------*/\r\n\r\n    ...StyleProps,\r\n\r\n    loading: {type: Boolean, default: null},                    // 是否开启表格的加载状态\r\n    virtual: {type: Boolean, default: false},                   // 虚拟滚动\r\n    summaryData: {type: Array as PropType<SimpleObject[]>},     // 表尾合计行数据\r\n    config: {type: Function as PropType<TablePropsConfig>},     // 配置列信息函数\r\n    rules: {type: Object as PropType<FormComponentRules>},      // 校验规则\r\n    associateFields: {type: Object as PropType<FormAssociateFields>},   // 校验关联字段，一个对象，key为字段名，value为字段字符串或者字符串数组。当key变化时，会自动校验value中所列的字段\r\n    colDraggable: {type: Boolean},                              // 列是否可以拖拽排序\r\n    spanMethod: {type: Function as PropType<TablePropsSpanMethod>},// 合并表体单元格的方法\r\n\r\n    /*---------------------------------------style-------------------------------------------*/\r\n\r\n    border: {type: Boolean},                                    // 是否带纵向边框\r\n    stripe: {type: Boolean},                                    // 是否为斑马纹table\r\n    hideHeader: {type: Boolean},                                // 是否隐藏表头\r\n    disabledStickyCompatible: {type: Boolean},                  // 是否禁用在ie下的sticky兼容\r\n    headRowHeight: {type: [String, Number], default: 45},       // 表头行高\r\n    bodyRowHeight: {type: [String, Number], default: 40},       // 表体行高\r\n    showRows: {type: Number, default: 10},                      // 表格显示的行数，当表体的行数超过这个值时，将会出现表体内部滚动，这个属性实际上就是用来设值表格高度\r\n\r\n    rowClassFunc: {type: Function as PropType<TablePropsRowClassFunc>},// 行 className 的计算函数\r\n    cellClassFunc: {type: Function as PropType<TablePropsCellClassFunc>},// 单元格 className 的计算函数\r\n    cellStyleFunc: {type: Function as PropType<TablePropsCellStyleFunc>},// 单元格 style 内联样式的计算函数\r\n    headCellClassFunc: {type: Function as PropType<TablePropsHeadCellClassFunc>},// 表头单元格的 className 的计算函数\r\n    headCellStyleFunc: {type: Function as PropType<TablePropsHeadCellStyleFunc>},// 表头单元格 style 内联样式计算函数\r\n\r\n    /*---------------------------------------tree-------------------------------------------*/\r\n    ...useTree.createProps<TableNode>(),\r\n    childrenField: {type: String, default: 'children'},         // 树节点对应子节点数据对应字段\r\n}","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport Scroll from '../../../scroll'\r\nimport {renderColgroup} from \"../../plc/core/renderColgroup\";\r\nimport {PltHeadCell} from \"./head-cell\";\r\nimport {useStyles} from \"../../../../use/useStyles\";\r\nimport {TableHoverPart} from \"../table.utils\";\r\nimport {useRefs} from \"../../../../use/useRefs\";\r\n\r\nexport const PltHead = designComponent({\r\n    name: 'plt-head',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            scroll: Scroll,\r\n        })\r\n        /*Scroll的父节点需要固定高度*/\r\n        const styles = useStyles(style => {\r\n            style.height = `${props.table.plcData.value!.headPlcListArray.length * (props.table.numberState.headRowHeight + 1)}px`\r\n        })\r\n        /*当总的列宽度大于表格宽度时，设置宽度*/\r\n        const tableStyles = useStyles(style => {\r\n            const {targetTableWidth} = props.table.plcData.value!\r\n            if (!!targetTableWidth) {\r\n                style.width = `${targetTableWidth}px`\r\n            }\r\n        })\r\n        /*表头表体联动滚动*/\r\n        const bindScroll = props.table.bindScroll(\r\n            TableHoverPart.head,\r\n            (scrollLeft, part) => part !== TableHoverPart.head && refs.scroll!.methods.scroll({x: scrollLeft}, {noEmitScroll: true})\r\n        )\r\n        /*表头支持鼠标滚动横向滚动*/\r\n        const onMousewheel = (e: WheelEvent) => {\r\n            const {deltaX, deltaY} = e\r\n            if (Math.abs(deltaY) > Math.abs(deltaX)) {\r\n                e.preventDefault()\r\n                e.stopPropagation()\r\n                refs.scroll!.refs.wrapper.scrollLeft = refs.scroll!.refs.wrapper.scrollLeft + deltaY / 3\r\n            }\r\n        }\r\n        const scrollRef = () => refs.scroll!\r\n\r\n        return {\r\n            render: () => (\r\n                <div class=\"plt-head\" style={styles.value} onMouseenter={bindScroll.onMouseenter}>\r\n                    <Scroll hideScrollbar scrollX refreshState={props.table.plcData.value!.targetTableWidth} onScroll={bindScroll.onScroll} ref=\"scroll\">\r\n                        <table {...{\r\n                            cellspacing: 0,\r\n                            cellpadding: 0,\r\n                            border: 0,\r\n                            style: tableStyles.value,\r\n                            onMousewheel: onMousewheel,\r\n                            key: props.table.plcData.value!.plcKeyString,\r\n                        }}>\r\n                            {renderColgroup(props.table.plcData.value!.flatPlcList)}\r\n                            {props.table.plcData.value!.headPlcListArray.map((array, arrayIndex) => (\r\n                                <tr style={`height:${props.table.numberState.headRowHeight}px`} key={arrayIndex}>\r\n                                    {array.map((plc) => <PltHeadCell table={props.table} tablePlc={plc} scroll={scrollRef}/>)}\r\n                                </tr>\r\n                            ))}\r\n                        </table>\r\n                    </Scroll>\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {ComputedRef, PropType} from 'vue';\r\nimport {Plc} from \"../../plc/core/plc.type\";\r\nimport {TableNode} from \"../useTableNode\";\r\nimport {renderBodyCell} from \"../../plc/core/render\";\r\nimport {useEdit} from \"../../../../use/useEdit\";\r\nimport {StyleStatus, useStyle} from \"../../../../use/useStyle\";\r\nimport {FormAssociateFields, FormValidate, FormValidateTrigger} from \"../../../form/form.validate\";\r\nimport {useClass} from \"../../../../use/useClasses\";\r\nimport {useStyles} from \"../../../../use/useStyles\";\r\n\r\nfunction useCellFormItemValidate(props: { plc: Plc, node: TableNode }, validate: ComputedRef<FormValidate>, associateFields?: FormAssociateFields) {\r\n    const handler = {\r\n        onEditChange: async () => {\r\n            let {plc: {props: {field}}, node: {edit, data, editRow, validateResultMap}} = props\r\n            if (!validateResultMap) {props.node.validateResultMap = validateResultMap = {}}\r\n            if (!field) {return}\r\n            await validate.value.methods.validateField({\r\n                field,\r\n                formData: edit ? editRow : data,\r\n                trigger: FormValidateTrigger.change,\r\n                formValidateResultMap: validateResultMap,\r\n                associateFields,\r\n            })\r\n        },\r\n        onEditBlur: async () => {\r\n            let {plc: {props: {field}}, node: {edit, data, editRow, validateResultMap}} = props\r\n            if (!validateResultMap) {props.node.validateResultMap = validateResultMap = {}}\r\n            if (!field) {return}\r\n            await validate.value.methods.validateField({\r\n                field,\r\n                formData: edit ? editRow : data,\r\n                trigger: FormValidateTrigger.blur,\r\n                formValidateResultMap: validateResultMap,\r\n                associateFields,\r\n            })\r\n        },\r\n    }\r\n    useEdit({\r\n        adjust: ret => {\r\n            ret.disabled = null\r\n            ret.readonly = null\r\n            ret.loading = null\r\n            ret.onChange = handler.onEditChange\r\n            ret.onBlur = handler.onEditBlur\r\n        }\r\n    })\r\n    useStyle({\r\n        adjust: (ret) => {\r\n            const {node: {validateResultMap}, plc: {props: {field}}} = props\r\n            const {status} = ret\r\n            ret.status = status || ((!!field && validateResultMap && !!validateResultMap[field]) ? StyleStatus.error : undefined)\r\n            return ret\r\n        }\r\n    })\r\n}\r\n\r\nexport const PltCell = designComponent({\r\n    name: 'plt-cell',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n        node: {type: Object as PropType<TableNode>, required: true},\r\n        plc: {type: Object as PropType<Plc>, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        useCellFormItemValidate(props, props.table.formValidate, props.table.props.associateFields)\r\n\r\n        return {\r\n            render: () => {\r\n                const {node, plc} = props\r\n                const {body, editable} = renderBodyCell({node, plc})\r\n                const span = !!props.table.props.spanMethod ? props.table.props.spanMethod({node, plc}) : {rowspan: 1, colspan: 1}\r\n\r\n                if (span.rowspan === 0 || span.colspan === 0) {\r\n                    /*rowspan为0时，不会正确合并单元格，如果要合并单元格得不渲染这个td*/\r\n                    return null\r\n                }\r\n                const classes = useClass(() => {\r\n                    const ret = [\r\n                        props.plc.classes.body,\r\n                        props.plc.props.bodyCls,\r\n                        {'plt-cell-editing': editable,}\r\n                    ] as any[]\r\n                    if (!!props.table.props.cellClassFunc) {\r\n                        ret.push(props.table.props.cellClassFunc(node, plc))\r\n                    }\r\n                    return ret\r\n                })\r\n                const styles = useStyles(style => {\r\n                    Object.assign(style, plc.styles.body)\r\n                    if (!!props.table.props.cellStyleFunc) {\r\n                        Object.assign(style, props.table.props.cellStyleFunc(node, plc))\r\n                    }\r\n                })\r\n\r\n                return (\r\n                    <td{...span} class={classes.value} style={styles.value}>\r\n                        {body}\r\n                    </td>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","/**\r\n * 在遍历plc的时候，操作类型，remove意思是遍历完这一次之删除这个plc或者plc组\r\n * @author  韦胜健\r\n * @date    2020/8/14 17:26\r\n */\r\nimport {Plc, PlcGroup, TablePlc} from \"../../core/plc.type\";\r\n\r\nexport const enum IteratePlcHandleType {\r\n    remove = 'remove',                      // 移除当前节点\r\n    nothing = 'nothing'                     // 什么事也不做\r\n}\r\n\r\nexport function iteratePlcList(\r\n    {\r\n        plcList,\r\n        onPlc,\r\n        onGroup,\r\n    }: {\r\n        plcList: TablePlc[],\r\n        onPlc: (plc: Plc) => IteratePlcHandleType,\r\n        onGroup: (group: PlcGroup) => IteratePlcHandleType,\r\n    }\r\n) {\r\n\r\n    for (let i = 0; i < plcList.length; i++) {\r\n        const plc = plcList[i];\r\n        if (!plc.group) {\r\n            const handleType = onPlc(plc)\r\n            if (handleType === IteratePlcHandleType.remove) {\r\n                plcList.splice(i, 1)\r\n                i--\r\n            }\r\n        } else {\r\n            const handleType = onGroup(plc)\r\n            if (handleType === IteratePlcHandleType.remove) {\r\n                plcList.splice(i, 1)\r\n                i--\r\n            } else {\r\n                iteratePlcList({plcList: plc.children, onPlc, onGroup,})\r\n                // 当这个分组没有列的时候（可能都隐藏了），自动删除这个分组\r\n                if (plc.children.length === 0) {\r\n                    plcList.splice(i, 1)\r\n                    i--\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {PropType} from 'vue';\r\nimport {PltCell} from \"./cell\";\r\nimport {TableNode} from \"../useTableNode\";\r\nimport {useClass} from \"../../../../use/useClasses\";\r\n\r\nexport const PltRow = designComponent({\r\n    name: 'plt-row',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n        node: {type: Object as PropType<TableNode>, required: true},\r\n        vid: {type: [String, Number]},\r\n    },\r\n    setup({props}) {\r\n\r\n        const handler = {\r\n            onClick: (e: MouseEvent) => props.table.handler.onClickRow(e, props.node),\r\n            onDblclick: (e: MouseEvent) => props.table.handler.onDblclickRow(e, props.node),\r\n            vid: props.vid,\r\n        }\r\n\r\n        const classes = useClass(() => {\r\n            const ret = [\r\n                'plt-row',\r\n                {\r\n                    'plt-row-current': props.table.current.value == props.node.key\r\n                }\r\n            ] as any[]\r\n            if (!!props.table.props.rowClassFunc) {\r\n                ret.push(props.table.props.rowClassFunc(props.node))\r\n            }\r\n            return ret\r\n        })\r\n\r\n        return {\r\n            render: () => {\r\n                const content = [\r\n                    (\r\n                        <tr class={classes.value} style={`height:${props.table.numberState.bodyRowHeight}px`} {...handler}>\r\n                            {props.table.plcData.value!.flatPlcList.map(plc => <PltCell table={props.table} node={props.node} plc={plc}/>)}\r\n                        </tr>\r\n                    ),\r\n                ]\r\n                if (props.table.plcData.value!.plcListHasRenderAfterRow) {\r\n                    content.push(...props.table.plcData.value!.plcListHasRenderAfterRow.map(plc => plc.props.renderAfterRow!({\r\n                        node: props.node,\r\n                        plc,\r\n                        row: props.node.data,\r\n                    }) as Element))\r\n                }\r\n\r\n                return content.filter(Boolean)\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport Scroll from '../scroll'\r\nimport {PropType} from 'vue';\r\nimport {SimpleObject} from \"../../shims\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\nimport {useVirtualList} from \"../virutal-list/useVirtualList\";\r\nimport {useStyles} from \"../../use/useStyles\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\n\r\n// const scrollbarSize = 12;\r\n\r\nexport const VirtualTable = designComponent({\r\n    name: 'pl-virtual-table',\r\n    props: {\r\n        data: {type: Array as PropType<SimpleObject[]>, require: true, default: []},// 要渲染的长数据\r\n        size: {type: Number, require: true, default: 40},           // 每一行高度\r\n        dynamicSize: {type: Boolean},                               // 标识列表中的每一行高度不是固定的，但是还是需要提供 size 属性，而且size属性不能与每一行的高度差距太多；\r\n        disabled: {type: Boolean},                                  // 禁用虚拟滚动\r\n\r\n        summaryData: {type: Array as PropType<SimpleObject[]>},     // 合计行数据\r\n        width: {type: Number},                                      // 宽度\r\n        height: {type: Number},                                     // 高度\r\n    },\r\n    emits: {\r\n        onScroll: (e: Event) => true\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {slots} = useSlots(['colgroup'])\r\n        const {scopedSlots} = useScopedSlots({default: {item: Object, index: Number}})\r\n        const {refs} = useRefs({\r\n            scroll: Scroll,\r\n            content: HTMLDivElement,\r\n            summary: HTMLDivElement,\r\n        })\r\n\r\n        const {virtual} = useVirtualList({props, refs, emit, transform: false})\r\n\r\n        /*---------------------------------------computed-------------------------------------------*/\r\n        const styles = useStyles(style => {\r\n            style.height = unit(props.height)\r\n        })\r\n        const tableStyles = useStyles((style) => {\r\n            !!props.width && (style.width = unit(props.width))\r\n        })\r\n\r\n        const summaryTableStyles = useStyles((styles) => {\r\n            Object.assign(styles, tableStyles.value)\r\n            styles.height = `${!props.summaryData ? 0 : props.summaryData.length * props.size}px`\r\n            styles.bottom = `0px`\r\n        })\r\n\r\n        const strutStyles = useStyles(style => {\r\n            Object.assign(style, virtual.strutStyles.value)\r\n            !!props.width && (style.width = unit(props.width));\r\n            style.paddingBottom = `${(props.summaryData || []).length * props.size + 8}px`\r\n        })\r\n\r\n        const handler = {\r\n            onScroll: (e: any) => {\r\n                virtual.handler.onScroll(e)\r\n                !!refs.summary && (refs.summary.scrollLeft = e.target.scrollLeft)\r\n            }\r\n        }\r\n\r\n        return {\r\n            refer: {\r\n                refs\r\n            },\r\n            render: () => {\r\n                const {list} = virtual.offsetData.value\r\n                return (\r\n                    <div style={styles.value} class=\"pl-virtual-table\">\r\n                        <Scroll\r\n                            refreshState={props.width}\r\n                            ref=\"scroll\"\r\n                            disableListTransition\r\n                            onScroll={handler.onScroll}\r\n                            scrollX\r\n                            class={virtual.classes.value}\r\n                            horizontalScrollbarTooltip={'推荐【表头使用鼠标滚轮】，或者【表体Alt键+鼠标滚轮】横向滚动'}\r\n                            v-slots={{\r\n                                default: () => (<div class=\"pl-virtual-list-strut\" style={strutStyles.value}>\r\n                                    <div class=\"pl-virtual-list-content\" ref=\"content\" style={virtual.contentStyles.value}>\r\n                                        <table {...{cellpadding: 0, cellspacing: 0, border: 0, style: tableStyles.value}}>\r\n                                            {slots.colgroup()}\r\n                                            {list.map((node) => scopedSlots.default(node))}\r\n                                        </table>\r\n                                    </div>\r\n                                </div>),\r\n                                content: () => (\r\n                                    !props.summaryData || props.summaryData.length === 0 ? null :\r\n                                        <div class=\"pl-virtual-table-summary-table-wrapper\" ref=\"summary\">\r\n                                            <table {...{cellpadding: 0, cellspacing: 0, border: 0, style: summaryTableStyles.value}}\r\n                                                   class=\"pl-virtual-table-summary-table\">\r\n                                                {slots.colgroup()}\r\n                                                {!props.summaryData ? null : props.summaryData.map((item, index) => scopedSlots.default({item, index}))}\r\n                                            </table>\r\n                                        </div>\r\n                                ),\r\n                            }}/>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlainTable} from \"../../table\";\r\nimport {PltRow} from \"./row\";\r\nimport {VirtualTable} from \"../../virtual-table\";\r\nimport {renderColgroup} from \"../../plc/core/renderColgroup\";\r\nimport {useRefs} from \"../../../../use/useRefs\";\r\nimport {TableHoverPart} from \"../table.utils\";\r\nimport {TableNode} from \"../useTableNode\";\r\nimport {PlainScroll} from \"../../../scroll/scroll\";\r\n\r\nexport const PltBody = designComponent({\r\n    name: 'plt-head',\r\n    props: {\r\n        table: {type: PlainTable, required: true},\r\n    },\r\n    setup({props}) {\r\n\r\n        const {refs} = useRefs({\r\n            virtual: VirtualTable,\r\n        })\r\n        /*表头表体联动滚动*/\r\n        const bindScroll = props.table.bindScroll(\r\n            TableHoverPart.body,\r\n            (scrollLeft, part) => part !== TableHoverPart.body && refs.virtual!.refs.scroll!.methods.scroll({x: scrollLeft}, {noEmitScroll: true})\r\n        );\r\n\r\n        const handler = {\r\n            /*表体支持alt+鼠标滚动联动滚动*/\r\n            onMousewheel: (e: MouseWheelEvent) => {\r\n                const {deltaX, deltaY} = e\r\n                if (e.altKey && Math.abs(deltaY) > Math.abs(deltaX)) {\r\n                    e.preventDefault()\r\n                    e.stopPropagation()\r\n                    refs.virtual!.refs.scroll!.refs.wrapper.scrollLeft = refs.virtual!.refs.scroll!.refs.wrapper.scrollLeft + deltaY / 3\r\n                }\r\n            },\r\n            onVnodeMounted: () => {\r\n                props.table.event.emit.onVirtualMounted({scroll: refs.virtual!.refs.scroll as PlainScroll})\r\n            }\r\n        }\r\n\r\n        return {\r\n            render: () => (\r\n                <VirtualTable\r\n                    class=\"plt-body\"\r\n                    ref=\"virtual\"\r\n                    key={props.table.plcData.value!.plcKeyString}\r\n                    width={props.table.plcData.value!.targetTableWidth!}\r\n                    size={props.table.numberState.bodyRowHeight}\r\n                    data={props.table.flatNodes.value}\r\n                    summaryData={props.table.summaryNodes.value || undefined}\r\n                    height={props.table.props.showRows * props.table.numberState.bodyRowHeight + 12}\r\n                    disabled={props.table.disabledVirtual.value}\r\n                    {...bindScroll}\r\n                    {...handler}\r\n                    v-slots={{\r\n                        default: ({item, index}: { item: TableNode, index: number }) => (\r\n                            <PltRow\r\n                                {...{vid: index}}\r\n                                key={index}\r\n                                table={props.table}\r\n                                node={item}\r\n                            />\r\n                        ),\r\n                        colgroup: () => renderColgroup(props.table.plcData.value!.flatPlcList)\r\n                    }}\r\n                />\r\n            )\r\n        }\r\n    },\r\n})","import {StyleProperties, VNodeChild} from \"../../../../shims\";\r\nimport {TablePlc, TableRenderScope} from \"./plc.type\";\r\nimport {TablePlcAlign, TablePlcFixedType} from \"../../core/table.utils\";\r\nimport {PropType} from 'vue';\r\nimport {TableNode} from \"../../core/useTableNode\";\r\nimport {MultipleClass} from \"../../../../use/useClasses\";\r\nimport {FormRule} from \"../../../form/form.validate\";\r\n\r\nexport type PlcRenderFunction = (scope: TableRenderScope) => VNodeChild\r\nexport type PlcPropsHead = (scope: { plc: TablePlc }) => VNodeChild\r\nexport type PlcPropsDefault = PlcRenderFunction\r\nexport type PlcPropsSummary = PlcRenderFunction\r\nexport type PlcPropsEdit = PlcRenderFunction\r\nexport type PlcPropsRenderAfterRow = PlcRenderFunction\r\nexport type PlcPropsEditable = boolean | ((node: TableNode) => boolean)\r\n\r\nexport const PlcGroupProps = {\r\n    title: {type: String},                                                  // 列标题\r\n    align: {type: String as PropType<TablePlcAlign>},                       // 非编辑状态下文本对其方式\r\n    noPadding: {type: Boolean},                                             // 是否不兼容表格的虚拟滚动功能\r\n    colDraggable: {type: Boolean, default: null},                           // 列是否可以拖拽排序\r\n\r\n    hide: {type: Boolean},                                                  // 是否隐藏\r\n    order: {type: [String, Number]},                                        // 列排序\r\n    fixed: {type: String as PropType<TablePlcFixedType>, default: TablePlcFixedType.center},// 冻结列位置：left、right、undefined\r\n    autoFixedLeft: {type: Boolean},                                         // 当出现左固定列的时候，是否自动设置为左固定列\r\n    autoFixedRight: {type: Boolean},                                        // 当出现右固定列的时候，是否自动设置为右固定列\r\n\r\n    headCls: {},                                                            // 给表头添加的class\r\n    bodyCls: {},                                                            // 给表体添加的class\r\n}\r\n\r\nexport const PlcProps = {\r\n    ...PlcGroupProps,\r\n    field: {type: String},                                                  // 列绑定字段\r\n    width: {type: [String, Number], default: 120},                          // 列宽度\r\n    fit: {type: Boolean},                                                   // 列宽自适应(只有一个列能够自适应)\r\n    notFitVirtual: {type: Boolean},                                         // 是否不兼容表格的虚拟滚动功能\r\n\r\n    // 渲染函数\r\n    head: {type: Function as PropType<PlcPropsHead>},                       // 列标题渲染函数\r\n    default: {type: Function as PropType<PlcPropsDefault>},                 // 列内容默认渲染函数\r\n    summary: {type: Function as PropType<PlcPropsSummary>},                 // 列内容在合计行上的渲染函数\r\n    edit: {type: Function as PropType<PlcPropsEdit>},                       // 列内容在编辑状态下的渲染函数\r\n    renderAfterRow: {type: Function as PropType<PlcPropsRenderAfterRow>},   // 行之后需要额外渲染的内容\r\n\r\n    // 编辑相关\r\n    required: {type: Boolean},                                              // 是否必填\r\n    rules: {type: [Object, Array] as PropType<FormRule | FormRule[]>},      // 校验规则\r\n    editable: {type: [Boolean, Function] as PropType<PlcPropsEditable>, default: true},// 是否可编辑\r\n    addEditPadding: {type: Boolean},                                        // 处于编辑状态的时候，是否添加内编辑，只有当行状态为编辑状态，并且列有edit渲染函数或者作用域插槽时，才符合“处于编辑状态”的条件\r\n}\r\n\r\nexport type PlcPublicAttrsType = {\r\n    level: number,                      // 分组表头层级\r\n    rowspan: number,                    // 表头td的rowspan\r\n    colspan: number,                    // 表头td的colspan\r\n    isLastFixedLeft: boolean,           // 是否为最后一个左固定列\r\n    isFirstFixedRight: boolean,         // 是否为第一个右固定列\r\n    fixedPosition: {                    // 固定列的sticky位置\r\n        left: number,\r\n        right: number,\r\n    },\r\n    // 列style公共内联样式\r\n    styles: {\r\n        head: StyleProperties,\r\n        body: StyleProperties,\r\n    },\r\n    // 列公共class样式\r\n    classes: {\r\n        head: MultipleClass,\r\n        body: MultipleClass,\r\n    },\r\n}\r\n\r\n/**\r\n * Plc以及PlcGroup公共的一些属性\r\n * @author  韦胜健\r\n * @date    2020/12/18 14:41\r\n */\r\nexport const PlcPublicAttrs: PlcPublicAttrsType = {\r\n    level: 0,\r\n    rowspan: 1,\r\n    colspan: 1,\r\n    isLastFixedLeft: false,\r\n    isFirstFixedRight: false,\r\n    fixedPosition: {\r\n        left: 0,\r\n        right: 0,\r\n    },\r\n    styles: {\r\n        head: {},\r\n        body: {},\r\n    },\r\n    classes: {\r\n        head: [],\r\n        body: [],\r\n    },\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\nimport {PlcPublicAttrs} from \"../../core/plc.utils\";\r\n\r\n/**\r\n * 浅复制一份plc数据，复制plc最外层对象以及plc.props数据，props数据是需要动态计算修改的。\r\n * state不能复制，因为需要其响应式属性。\r\n * @author  韦胜健\r\n * @date    2020/12/18 10:06\r\n */\r\nexport function copyPlcList(plcList: TablePlc[]) {\r\n    return plcList.map(plc => {\r\n        const refer = plc.refer()\r\n        const newPlc: TablePlc = {\r\n            ...refer,\r\n            ...deepcopy(PlcPublicAttrs),\r\n        }\r\n        newPlc.props = {...newPlc.props}\r\n        if (newPlc.group) {\r\n            newPlc.children = copyPlcList(newPlc.children)\r\n        }\r\n        return newPlc\r\n    })\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\nimport {TablePlcFixedType, TablePropsConfig} from \"../../../core/table.utils\";\r\nimport {IteratePlcHandleType, iteratePlcList} from \"../utils/iteratePlcList\";\r\n\r\n/**\r\n * 处理Plc以及PlcGroup公共的，逻辑\r\n * @author  韦胜健\r\n * @date    2020/12/18 11:18\r\n */\r\nfunction handleTablePlc(plc: TablePlc, configData: { [k: string]: any } | null) {\r\n    const props = plc.props as any\r\n    const state = plc.state as any\r\n    // 如果有config，将config中的属性覆盖props\r\n    const configPlc = !configData ? null : configData[`${!plc.group ? plc.props.field : 'group'}_${plc.props.title}`]\r\n    if (!!configPlc) {\r\n        Object.keys(configPlc).forEach(key => {\r\n            if (configPlc[key] != null) props[key] = configPlc[key]\r\n        })\r\n    }\r\n    // 如果有state，将state中的属性覆盖props\r\n    Object.keys(plc.state).forEach(key => {\r\n        if (state[key] != null) props[key] = state[key]\r\n    })\r\n}\r\n\r\n/**\r\n * 处理plc的数据，以state、config、props为顺序，优先级依次递减，\r\n * 得到一个最终的plc.props 对象\r\n * @author  韦胜健\r\n * @date    2020/12/18 11:08\r\n */\r\nexport function processStateConfigAndProps(\r\n    {\r\n        plcList,\r\n        config,\r\n    }: {\r\n        plcList: TablePlc[],\r\n        config?: TablePropsConfig,\r\n    }\r\n) {\r\n    const configData = !config ? null : config(plcList)\r\n\r\n    const configState = {\r\n        notFitVirtual: [] as TablePlc[],                        // 不能使用虚拟滚动的列\r\n        fixedLeft: [] as TablePlc[],                            // 左固定的列\r\n        fixedRight: [] as TablePlc[],                           // 右固定的列\r\n        autoFixedLeft: [] as TablePlc[],                        // 需要自动左固定的列\r\n        autoFixedRight: [] as TablePlc[],                       // 需要自动右固定的列\r\n    }\r\n\r\n    /**\r\n     * - 根基plc的config，计算plc的属性。\r\n     * - 计算出需要自动左固定的plc，自动右固定的plc，左固定的plc，右固定的plc；以及计算出不兼容虚拟滚动的plc；\r\n     * - 如果group设置了自动左右固定或者左右固定，那么他的子组件plc或者group也要改成和父group一致的值；\r\n     * - 将隐藏的plc从group的子节点数据中移除\r\n     * @author  韦胜健\r\n     * @date    2020/8/12 10:24\r\n     */\r\n    iteratePlcList({\r\n        plcList,\r\n        onPlc: plc => {\r\n            handleTablePlc(plc, configData)\r\n            // 如果是隐藏的列，则删除这一列\r\n            if (plc.props.hide) {\r\n                return IteratePlcHandleType.remove\r\n            }\r\n            if (plc.props.notFitVirtual) configState.notFitVirtual.push(plc)\r\n            if (plc.props.autoFixedLeft) configState.autoFixedLeft.push(plc)\r\n            if (plc.props.autoFixedRight) configState.autoFixedRight.push(plc)\r\n            if (plc.props.fixed === TablePlcFixedType.left) configState.fixedLeft.push(plc)\r\n            if (plc.props.fixed === TablePlcFixedType.right) configState.fixedRight.push(plc)\r\n            return IteratePlcHandleType.nothing\r\n        },\r\n        onGroup: group => {\r\n            handleTablePlc(group, configData)\r\n            if (group.props.hide) {\r\n                return IteratePlcHandleType.remove\r\n            }\r\n            // 表头分组，子节点的固定方式，以及左固定、右固定随父节点控制\r\n            group.children.forEach(plc => {\r\n                plc.props.fixed = group.props.fixed\r\n                plc.props.autoFixedLeft = group.props.autoFixedLeft\r\n                plc.props.autoFixedRight = group.props.autoFixedRight\r\n            })\r\n            return IteratePlcHandleType.nothing\r\n        },\r\n    })\r\n\r\n    /**\r\n     * 在最终排序的时候，要求fixed是正确的，而跟autoFixedLeft，autoFixedRight的值无关\r\n     * @author  韦胜健\r\n     * @date    2020/12/18 11:26\r\n     */\r\n\r\n    /*如果存在左固定列，则设置autoFixedLeft为左固定*/\r\n    if (configState.fixedLeft.length > 0) {configState.autoFixedLeft.forEach(plc => plc.props.fixed = TablePlcFixedType.left)}\r\n\r\n    /*如果存在右固定列，则设置autoFixedRight为右固定*/\r\n    if (configState.fixedRight.length > 0) {configState.autoFixedRight.forEach(plc => plc.props.fixed = TablePlcFixedType.right)}\r\n\r\n    return configState\r\n}","import {Plc, TablePlc} from \"../../core/plc.type\";\r\nimport {IteratePlcHandleType, iteratePlcList} from \"../utils/iteratePlcList\";\r\nimport {insertSort} from \"plain-utils/object/insertSort\";\r\nimport {TablePlcFixedType} from \"../../../core/table.utils\";\r\n\r\n/**\r\n * 获取plc的排序索引\r\n * @author  韦胜健\r\n * @date    2020/12/18 14:23\r\n */\r\nfunction getPlcOrder(item: TablePlc): number {\r\n    let order = item.props.order || 0\r\n    if (item.props.fixed === TablePlcFixedType.left) {\r\n        order -= 9999\r\n    } else if (item.props.fixed === TablePlcFixedType.right) {\r\n        order += 9999\r\n    }\r\n    return Number(order)\r\n}\r\n\r\n/**\r\n * 对plc进行排序\r\n * @author  韦胜健\r\n * @date    2020/8/15 19:18\r\n */\r\nexport function processPlcSort(\r\n    {\r\n        plcList,\r\n        tableWidth,\r\n    }: {\r\n        plcList: TablePlc[],\r\n        tableWidth: number,\r\n    }\r\n) {\r\n    insertSort(plcList, (a, b) => getPlcOrder(a) > getPlcOrder(b))\r\n    /*计算 flatPlcList 自己 targetTableWidth*/\r\n    const flatPlcList = [] as Plc[]\r\n    iteratePlcList({\r\n        plcList,\r\n        onPlc: plc => {\r\n            flatPlcList.push(plc)\r\n            return IteratePlcHandleType.nothing\r\n        },\r\n        onGroup: group => {\r\n            group.children = insertSort(group.children, (a, b) => getPlcOrder(a) > getPlcOrder(b))\r\n            return IteratePlcHandleType.nothing\r\n        }\r\n    })\r\n\r\n    /*计算表格需要固定的宽度*/\r\n    const {targetTableWidth, plcKeyString} = (() => {\r\n        let totalPlcWidth = 0;                                          // 总的plc宽度\r\n        let fitPlc = null as null | Plc                                 // 需要自适应宽度的plc\r\n        const plcKeyString = [] as string[]\r\n        flatPlcList.forEach(plc => {\r\n            totalPlcWidth += plc.props.width\r\n            if (plc.props.fit) {\r\n                fitPlc = plc\r\n            } else if ((!fitPlc || !fitPlc.props.fit) && plc.props.fixed === TablePlcFixedType.center) {\r\n                fitPlc = plc\r\n            }\r\n            plcKeyString.push(plc.props.field || 'empty')\r\n        })\r\n        /**\r\n         * 目标table宽度，当总宽度小于tableWidth时，table不设置width宽度。因为table设置了min-width为100%，此时fit的列会自适应宽度。\r\n         * 当总宽度大于tableWidth时，table需要设置width宽度，否则会导致列被压缩\r\n         * @author  韦胜健\r\n         * @date    2020/12/18 15:28\r\n         */\r\n        let targetTableWidth = totalPlcWidth > tableWidth ? totalPlcWidth : null\r\n        if (!targetTableWidth && !!fitPlc) {\r\n            fitPlc.props.width = 0\r\n        }\r\n        return {targetTableWidth, plcKeyString: plcKeyString.join('_')}\r\n    })();\r\n\r\n    return {\r\n        targetTableWidth,\r\n        flatPlcList,\r\n        plcKeyString,\r\n    }\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\nimport {TablePlcFixedType} from \"../../../core/table.utils\";\r\n\r\n/**\r\n * 计算渲染表头所需要的二维数组以及层数\r\n * @author  韦胜健\r\n * @date    2020/12/18 14:38\r\n */\r\nexport function processHeadPlcList({plcList}: { plcList: TablePlc[] }) {\r\n    // 最大表头层数\r\n    let maxLevel = 1\r\n    // 计算最大层数\r\n    const calculateLevel = (list: TablePlc[] | null, level: number) => {\r\n        if (!!list && list.length > 0) {\r\n            if (level > maxLevel) maxLevel = level\r\n            list.forEach((item) => {\r\n                item.level = level - 1\r\n                if (item.group) {\r\n                    calculateLevel((item).children, level + 1)\r\n                }\r\n            })\r\n        }\r\n    }\r\n    calculateLevel(plcList, 1)\r\n\r\n    // 计算多级表头每个单元格所占行数以及列数\r\n    const calculateSpan = (item: TablePlc) => {\r\n        if (item.group) {\r\n            const group = item\r\n            group.children.forEach(calculateSpan)\r\n            group.rowspan = 1\r\n            group.colspan = 0\r\n            group.children.forEach(i => group.colspan += i.colspan)\r\n        } else {\r\n            const plc = item\r\n            plc.rowspan = maxLevel - plc.level\r\n            plc.colspan = 1\r\n        }\r\n    }\r\n    plcList.forEach(plc => calculateSpan(plc))\r\n\r\n    // 计算结果\r\n    const headPlcListArray: TablePlc[][] = []\r\n\r\n    for (let j = 0; j < maxLevel; j++) headPlcListArray.push([])\r\n    // 收集多级表头渲染数据\r\n    const calculateHeadColumns = (list: TablePlc[]) => {\r\n        if (!!list && list.length > 0) {\r\n            list.forEach((item) => {\r\n                headPlcListArray[item.level!].push(item)\r\n                if (item.group) {\r\n                    calculateHeadColumns((item).children)\r\n                }\r\n            })\r\n        }\r\n    }\r\n    calculateHeadColumns(plcList)\r\n    setFixedFlag(headPlcListArray[0])\r\n\r\n    return {\r\n        headPlcListArray,\r\n        maxLevel,\r\n    }\r\n}\r\n\r\n/**\r\n * 对plc设置标记，是否为最后一个左固定列，是否为第一个右固定列\r\n * @author  韦胜健\r\n * @date    2020/8/15 23:06\r\n */\r\nfunction setFixedFlag(plcList: TablePlc[]) {\r\n    let lastFixedLeft: TablePlc | undefined;\r\n    let firstFixedRight: TablePlc | undefined;\r\n\r\n    plcList.forEach(plc => {\r\n        if (plc.props.fixed === TablePlcFixedType.left) {\r\n            lastFixedLeft = plc\r\n        }\r\n        if (!firstFixedRight && plc.props.fixed === TablePlcFixedType.right) {\r\n            firstFixedRight = plc\r\n        }\r\n    })\r\n\r\n    /**\r\n     * 递归设置，每一层的lastFixedLeft\r\n     * @author  韦胜健\r\n     * @date    2020/12/18 14:46\r\n     */\r\n    function setLastFixedLeft(plc: TablePlc) {\r\n        plc.isLastFixedLeft = true\r\n        if (plc.group) {\r\n            setLastFixedLeft(plc.children[plc.children.length - 1])\r\n        }\r\n    }\r\n\r\n    !!lastFixedLeft && setLastFixedLeft(lastFixedLeft);\r\n\r\n    /**\r\n     * 递归设置每一层的firstFixedRight\r\n     * @author  韦胜健\r\n     * @date    2020/12/18 14:46\r\n     */\r\n    function setFirstFixedRight(plc: TablePlc) {\r\n        plc.isFirstFixedRight = true\r\n        if (plc.group) {\r\n            setFirstFixedRight(plc.children[0])\r\n        }\r\n    }\r\n\r\n    !!firstFixedRight && setFirstFixedRight(firstFixedRight)\r\n}","import {Plc, TablePlc} from \"../../core/plc.type\";\r\nimport {TablePlcFixedType} from \"../../../core/table.utils\";\r\nimport {StyleProperties} from \"../../../../../shims\";\r\n\r\n/**\r\n * 处理plc的fixed定位\r\n * @author  韦胜健\r\n * @date    2020/12/19 16:50\r\n */\r\nexport function processPlcFixed(flatPlcList: Plc[]) {\r\n    const collect = (() => {\r\n        const left = [] as Plc[]\r\n        const right = [] as Plc[]\r\n        flatPlcList.forEach(plc => {\r\n            switch (plc.props.fixed) {\r\n                case TablePlcFixedType.left:\r\n                    left.push(plc)\r\n                    break\r\n                case TablePlcFixedType.right:\r\n                    right.push(plc)\r\n                    break\r\n            }\r\n        })\r\n        return {\r\n            left,\r\n            right,\r\n        }\r\n    })();\r\n    const width = {\r\n        left: 0,\r\n        right: 0,\r\n    };\r\n    Object.keys(collect).forEach((item) => {\r\n        const key = item as 'left' | 'right'\r\n        let list = collect[key]!\r\n        if (key === 'right') {list = list.reverse()}\r\n\r\n        for (let i = 0; i < list.length; i++) {\r\n            const element = list[i];\r\n            width[key] += element.props.width\r\n            if (i === 0) {\r\n                element.fixedPosition[key] = 0\r\n            } else {\r\n                const {props: {width: prevWidth}, fixedPosition: {[key]: prevValue}} = list[i - 1]!\r\n                element.fixedPosition[key] = Number(prevWidth) + prevValue\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\n/**\r\n * 获取plcFixed样式\r\n * @author  韦胜健\r\n * @date    2020/12/19 16:55\r\n */\r\nexport function getPlcFixedStyle(plc: TablePlc) {\r\n    const {props: {fixed}} = plc\r\n    const styles = {} as StyleProperties\r\n    if (fixed === TablePlcFixedType.center) {\r\n        return styles\r\n    }\r\n    styles.position = 'sticky'\r\n    styles.zIndex = 3\r\n\r\n    if (!plc.group) {\r\n        styles[fixed] = plc.fixedPosition[fixed] + 'px'\r\n    } else {\r\n        let count = 10\r\n        const isFixedLeft = fixed === TablePlcFixedType.left\r\n        while (!!plc && plc.group && count > 0) {\r\n            plc = plc.children[isFixedLeft ? 0 : plc.children.length - 1]\r\n            count--\r\n        }\r\n        if (count === 0 && !!plc) {\r\n            throw new Error('解析异常')\r\n        }\r\n        if (!!plc) {\r\n            styles[fixed] = plc.fixedPosition[fixed] + 'px'\r\n        }\r\n    }\r\n    return styles\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\n\r\nexport function getPltCellClass(plc: TablePlc) {\r\n    return {\r\n        // 'pl-cell-group': plc.group,\r\n        [`plt-cell-align-${plc.props.align}`]: !!plc.props.align,\r\n    }\r\n}","import {TablePlc} from \"../../core/plc.type\";\r\nimport {getPlcFixedStyle} from \"./processPlcFixed\";\r\nimport {getPltCellClass} from \"./getPltCellClass\";\r\n\r\nexport function processPlcClassAndStyle(\r\n    {\r\n        headPlcListArray,\r\n    }: {\r\n        headPlcListArray: TablePlc[][],\r\n    }\r\n) {\r\n    headPlcListArray.forEach((list) => {\r\n        list.forEach((plc) => {\r\n            /*---------------------------------------head-------------------------------------------*/\r\n            plc.styles.head = getPlcFixedStyle(plc)\r\n            plc.classes.head = [\r\n                'plt-cell',\r\n                'plt-head-cell',\r\n                {\r\n                    ...getPltCellClass(plc),\r\n                    'plt-cell-last-fixed-left': plc.isLastFixedLeft,\r\n                    'plt-cell-first-fixed-right': plc.isFirstFixedRight,\r\n                    'plt-cell-no-padding': plc.props.noPadding,\r\n                }\r\n            ]\r\n            /*---------------------------------------body-------------------------------------------*/\r\n            if (!plc.group) {\r\n                plc.styles.body = getPlcFixedStyle(plc)\r\n                plc.classes.body = [\r\n                    'plt-cell',\r\n                    'plt-body-cell',\r\n                    {\r\n                        ...getPltCellClass(plc),\r\n                        'plt-cell-add-edit-padding': plc.props.addEditPadding,\r\n                        'plt-cell-last-fixed-left': plc.isLastFixedLeft,\r\n                        'plt-cell-first-fixed-right': plc.isFirstFixedRight,\r\n                        'plt-cell-no-padding': plc.props.noPadding,\r\n                    },\r\n                ]\r\n            }\r\n        })\r\n    })\r\n}","import {Plc, TablePlc} from \"../core/plc.type\";\r\nimport {copyPlcList} from \"./process/copyPlcList\";\r\nimport {processStateConfigAndProps} from \"./process/processStateConfigAndProps\";\r\nimport {ExtractPropTypes} from 'vue';\r\nimport {TableProps} from \"../../core/table.utils\";\r\nimport {processPlcSort} from \"./process/processPlcSort\";\r\nimport {processHeadPlcList} from \"./process/processHeadPlcList\";\r\nimport {processPlcFixed} from \"./process/processPlcFixed\";\r\nimport {processPlcClassAndStyle} from \"./process/processPlcClassAndStyle\";\r\n\r\nexport function formatPlcList(\r\n    {\r\n        plcList,\r\n        props,\r\n        tableWidth,\r\n    }: {\r\n        plcList: TablePlc[],\r\n        props: ExtractPropTypes<typeof TableProps>,\r\n        tableWidth: number,\r\n    }\r\n) {\r\n    /*复制一份plc数据*/\r\n    plcList = copyPlcList(plcList)\r\n    /*处理state、config以及props*/\r\n    const {notFitVirtual} = processStateConfigAndProps({plcList, config: props.config})\r\n    /*对plc进行排序*/\r\n    const {flatPlcList, targetTableWidth, plcKeyString} = processPlcSort({plcList, tableWidth})\r\n    /*计算表头渲染需要的数据*/\r\n    const {headPlcListArray, maxLevel} = processHeadPlcList({plcList})\r\n    /*计算固定列所需要的left，right值*/\r\n    processPlcFixed(flatPlcList)\r\n    /*计算plc的class以及style*/\r\n    processPlcClassAndStyle({headPlcListArray})\r\n\r\n    /*需要在行之后渲染其他内容的plcList*/\r\n    let plcListHasRenderAfterRow = flatPlcList.filter(plc => plc.props.renderAfterRow) as (Plc[] | null)\r\n    if (!!plcListHasRenderAfterRow && plcListHasRenderAfterRow.length === 0) {plcListHasRenderAfterRow = null}\r\n\r\n    return {\r\n        plcList,                                                // 列数组数据，树形结构的数据\r\n        flatPlcList,                                            // 展开之后最底层的列数组\r\n        targetTableWidth,                                       // 表格设置的样式宽度\r\n        tableWidth,                                             // 表格容器宽度\r\n        notFitVirtual,                                          // 不兼容虚拟列表的列数组\r\n        headPlcListArray,                                       // 表头渲染的二维数组\r\n        plcKeyString,                                           // 当列排序或者其他属性变化之后，需要刷新body，否则会出现部分节点没有更新的问题\r\n        maxLevel,                                               // 表头层级\r\n        plcListHasRenderAfterRow,                               // 列需要在行之后多渲染的数据\r\n    }\r\n}","import {computed, ExtractPropTypes, onMounted, reactive} from 'vue';\r\nimport {useRefs} from \"../../../../use/useRefs\";\r\nimport {TableProps} from \"../../core/table.utils\";\r\nimport {useNumber} from \"../../../../use/useNumber\";\r\nimport PlcCollector from \"../core/plc-collector\";\r\nimport {formatPlcList} from \"./formatPlcList\";\r\n\r\nexport function usePlcList(\r\n    {\r\n        props,\r\n    }: {\r\n        props: ExtractPropTypes<typeof TableProps>\r\n    }\r\n) {\r\n\r\n    const {refs} = useRefs({\r\n        collector: PlcCollector,\r\n        el: HTMLDivElement,\r\n    })\r\n\r\n    /*---------------------------------------state-------------------------------------------*/\r\n\r\n    const state = reactive({\r\n        /*表格宽度*/\r\n        tableWidth: null as null | number,\r\n    })\r\n    const {numberState} = useNumber(props, ['bodyRowHeight', 'headRowHeight'])\r\n\r\n    /*---------------------------------------computed-------------------------------------------*/\r\n\r\n    const plcData = computed(() => {\r\n        if (!state.tableWidth) {\r\n            return null\r\n        }\r\n        const {children} = refs.collector!\r\n        return formatPlcList({\r\n            plcList: children,\r\n            props,\r\n            tableWidth: state.tableWidth,\r\n        })\r\n    })\r\n\r\n    onMounted(() => {\r\n        state.tableWidth = refs.el.offsetWidth\r\n    })\r\n\r\n    return {\r\n        numberState,\r\n        plcData,\r\n    }\r\n}","import {TableHoverPart} from \"./table.utils\";\r\nimport {ref} from 'vue';\r\n\r\n/**\r\n * 绑定表头表体联动滚动\r\n * @author  韦胜健\r\n * @date    2020/12/18 16:27\r\n */\r\nexport function useBindScroll(\r\n    event: {\r\n        emit: {\r\n            onScrollLeft: (scrollLeft: number, part: TableHoverPart) => void,\r\n        },\r\n        on: {\r\n            onScrollLeft: (cb: (scrollLeft: number, part: TableHoverPart) => void) => void,\r\n        },\r\n    }\r\n) {\r\n    const hoverPart = ref(null as null | TableHoverPart)\r\n    return {\r\n        bindScroll: (part: TableHoverPart, updateLeft: (left: number, part: TableHoverPart) => void) => {\r\n            event.on.onScrollLeft((left, part) => updateLeft(left, part))\r\n            return {\r\n                onMouseenter: () => hoverPart.value = part,\r\n                onScroll: (e: Event) => hoverPart.value === part && event.emit.onScrollLeft((e as any).target.scrollLeft, part)\r\n            }\r\n        }\r\n    }\r\n}","import {SimpleObject} from \"../../../shims\";\r\nimport {TreeNodeCheckStatus} from \"../../tree/utils/tree-constant\";\r\nimport {FormValidate, FormValidateResultMap, FormValidateReturn} from \"../../form/form.validate\";\r\nimport {computed, ExtractPropTypes} from 'vue';\r\nimport {TableProps} from \"./table.utils\";\r\nimport {createKeyHandler} from \"../../../utils/createKeyHandler\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\nimport {useTree} from \"../../tree/core/useTree\";\r\n\r\nexport function useTableNode(\r\n    {\r\n        props,\r\n        emit,\r\n        getValidate,\r\n    }: {\r\n        props: ExtractPropTypes<typeof TableProps>,\r\n        getValidate: () => FormValidate,\r\n        emit: {\r\n            onExpand: (node: TableNode) => void,\r\n            onExpandChange: (keys: string[]) => void,\r\n            onCollapse: (node: TableNode) => void,\r\n            onCheck: (node: TableNode) => void,\r\n            onUncheck: (node: TableNode) => void,\r\n            onCheckChange: (keys: string[]) => void,\r\n            onClickNode: (node: TableNode) => void,\r\n            onUpdateData: (data?: SimpleObject[]) => void,\r\n            onUpdateCurrentKey: (key?: string) => void,\r\n        },\r\n    }\r\n) {\r\n    const {state, dataModel, utils, methods, current, handler} = useTree<TableNode>({\r\n        props,\r\n        keyManager: createKeyHandler('table'),\r\n        emit,\r\n        getTreeNodeByDataAdjust: node => {\r\n            node.isSummary = false\r\n            node.edit = false\r\n            node.editRow = node.data\r\n            node.validateResultMap = null\r\n            node.openEdit = function () {this.edit = true}\r\n            node.closeEdit = function () {this.edit = false}\r\n            node.enableEdit = function () {\r\n                if (this.edit) return\r\n                this.editRow = deepcopy(this.data)\r\n                this.openEdit()\r\n                this.validate()\r\n            }\r\n            node.cancelEdit = function () {this.edit && this.closeEdit()}\r\n            node.validate = async function () {\r\n                const {methods: {validate}} = getValidate()\r\n                const {validateMessage, validateResult, validateResultMap} = await validate(this.editRow)\r\n                this.validateResultMap = validateResultMap || null\r\n                return !validateMessage ? null : {\r\n                    validateMessage,\r\n                    validateResult,\r\n                    validateResultMap,\r\n                    node: this,\r\n                }\r\n            }\r\n            node.saveEdit = async function (newRow) {\r\n                if (!this.edit) return\r\n                let {data, editRow} = this\r\n                newRow = newRow || this.editRow\r\n                Object.keys({...data, ...editRow, ...newRow}).forEach(k => this.data[k] = newRow[k])\r\n            }\r\n        }\r\n    })\r\n    /*拍平的数组*/\r\n    const flatNodes = computed(() => {\r\n        let list: TableNode[] = []\r\n        if (!state.root) {\r\n            return []\r\n        }\r\n        utils.iterate({\r\n            nodes: state.root.children,\r\n            iterateChildren: (treeNode) => treeNode.expand,\r\n            handler: (treeNode) => list.push(treeNode),\r\n        },)\r\n        list = list.filter((treeNode) => !!treeNode.isVisible)\r\n        list.forEach((node, index) => node.index = index)\r\n        return list\r\n    })\r\n    const summaryNodes = computed(() => !props.summaryData ? null : props.summaryData.map((data) => utils.getTreeNodeByData({data, level: 1, parentRef: null as any, adjust: node => node.isSummary = true})))\r\n    return {state, dataModel, flatNodes, summaryNodes, methods, current, handler, utils}\r\n}\r\n\r\nexport type TableNode = {\r\n\r\n    key: string,                                        // 节点唯一标识\r\n    data: SimpleObject,                                 // 节点数据\r\n    level: number,                                      // 节点层级\r\n    parentRef: () => TableNode | null,                  // 父节点引用\r\n    selfRef: () => TableNode,                           // 自身引用\r\n    index: number,                                      // 节点索引\r\n    children?: TableNode[],                             // 子节点数组\r\n\r\n    expand: boolean,                                    // 节点是否已经展开\r\n    check: boolean,                                     // 节点是够已经选中\r\n    loading: boolean,                                   // 节点是否处于加载状态\r\n    loaded: boolean,                                    // 节点是否已经加载完毕\r\n\r\n    readonly childrenData?: SimpleObject[]              // 子节点数据数组\r\n    readonly checkStatus: TreeNodeCheckStatus,          // 节点选中状态\r\n    readonly isCheckable: boolean,                      // 节点是否可以选择\r\n    readonly isLeaf: boolean,                           // 节点是否为叶子节点\r\n    readonly isVisible: boolean,                        // 节点是否可见\r\n\r\n    /*---------------------------------------edit-------------------------------------------*/\r\n\r\n    isSummary: boolean,                                 // 当前是否为合计行数据\r\n    edit: boolean,                                      // 当前是否处于可编辑状态\r\n    editRow: SimpleObject,                              // 编辑行对象\r\n    validateResultMap: FormValidateResultMap | null,    // 当前行的校验结果\r\n\r\n    openEdit: () => void,                               // 开启编辑状态（不做任何处理）\r\n    closeEdit: () => void,                              // 关闭编辑状态（不做任何处理）\r\n    enableEdit: () => void,                             // 开启编辑状态（先判断当前是否可编辑，深度赋值一份data赋值给editRow，并且立即执行校验）\r\n    cancelEdit: () => void,                             // 取消编辑状态\r\n    validate: () => Promise<(FormValidateReturn & { node: TableNode }) | null>, // 校验数据\r\n    saveEdit: (newRow: SimpleObject) => Promise<void>,  // 保存编辑，将editRow以及newRow（请求得到的新对象）覆盖data\r\n\r\n}","import {PlainScroll} from \"../../scroll/scroll\";\r\n\r\nexport function useTableGetScroll(onVirtualMounted: (cb: (data: { scroll: PlainScroll }) => void) => void, onChange?: (scroll: PlainScroll) => void) {\r\n    let val: PlainScroll\r\n    onVirtualMounted(({scroll}) => {\r\n        val = scroll;\r\n        !!onChange && onChange(scroll)\r\n    })\r\n    return {\r\n        getScroll: () => val!\r\n    }\r\n}","import {PlainScroll} from \"../../scroll/scroll\";\r\nimport {computed, reactive} from 'vue';\r\nimport {useTableGetScroll} from \"./useTableGetScroll\";\r\n\r\nexport function useFixedShadow(event: {\r\n    on: {\r\n        onVirtualMounted: (cb: (data: { scroll: PlainScroll }) => void) => void,\r\n    }\r\n}) {\r\n    const state = reactive({\r\n        showFixedLeft: false,\r\n        showFixedRight: false,\r\n    })\r\n    const freeState = {\r\n        scroll: null as null | PlainScroll,\r\n        onScroll: () => {\r\n            const {freezeState: {wrapperScrollLeft}, state: {hostWidth, contentWidth}} = freeState.scroll!\r\n            state.showFixedLeft = contentWidth > hostWidth && wrapperScrollLeft > 0\r\n            state.showFixedRight = contentWidth > hostWidth && Math.abs(wrapperScrollLeft + hostWidth - contentWidth) > 5\r\n        }\r\n    }\r\n    useTableGetScroll(event.on.onVirtualMounted, (scroll) => {\r\n        if (!!freeState.scroll) {freeState.scroll.off.onScroll(freeState.onScroll)}\r\n        freeState.scroll = scroll\r\n        scroll.on.onScroll(freeState.onScroll)\r\n        freeState.onScroll()\r\n    })\r\n    const classes = computed(() => [\r\n        {\r\n            'plt-table-hide-fixed-left': !state.showFixedLeft,\r\n            'plt-table-hide-fixed-right': !state.showFixedRight,\r\n        }\r\n    ])\r\n    return {\r\n        fixedShadowClass: classes,\r\n    }\r\n}","import {designComponent} from \"../../use/designComponent\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport PlcCollector from './plc/core/plc-collector'\r\nimport {PltHead} from \"./core/head/head\";\r\nimport {PltBody} from \"./core/body/body\";\r\nimport './table.scss'\r\nimport {TableHoverPart, TableProps} from './core/table.utils';\r\nimport {usePlcList} from \"./plc/format/usePlcList\";\r\nimport {computed, ComputedRef, inject, onMounted, PropType} from 'vue';\r\nimport {useBindScroll} from \"./core/useBindScroll\";\r\nimport {TableNode, useTableNode} from \"./core/useTableNode\";\r\nimport {useRefs} from \"../../use/useRefs\";\r\nimport {PlainScroll} from \"../scroll/scroll\";\r\nimport {useFixedShadow} from \"./core/useFixedShadow\";\r\nimport {StyleShape, StyleSize, useStyle} from \"../../use/useStyle\";\r\nimport {formatFormRules, FormValidate} from \"../form/form.validate\";\r\nimport {useTree} from \"../tree/core/useTree\";\r\nimport {hasClass} from \"plain-utils/dom/hasClass\";\r\n\r\nconst Table = designComponent({\r\n    name: 'pl-table',\r\n    props: {\r\n        ...TableProps,\r\n    },\r\n    provideRefer: true,\r\n    emits: {\r\n        ...useTree.createEvent<TableNode>(),\r\n        onScrollLeft: (scrollLeft: number, part: TableHoverPart) => true,\r\n        onVirtualMounted: (data: { scroll: PlainScroll }) => true,\r\n\r\n        onClickRow: (node: TableNode, e: MouseEvent) => true,\r\n        onDblclickRow: (node: TableNode, e: MouseEvent) => true,\r\n        onClickCell: (node: TableNode, e: MouseEvent) => true,\r\n        onDblclickCell: (node: TableNode, e: MouseEvent) => true,\r\n    },\r\n    setup({props, event}) {\r\n\r\n        const {refs} = useRefs({\r\n            el: HTMLDivElement,\r\n        })\r\n\r\n        const {styleComputed} = useStyle({\r\n            adjust: config => {\r\n                config.shape = props.shape || StyleShape.square\r\n                config.size = props.size || StyleSize.normal\r\n                config.status = props.status\r\n            }\r\n        })\r\n        const {emit} = event\r\n        const {slots} = useSlots()\r\n        const {numberState, plcData} = usePlcList({props})\r\n        const {bindScroll} = useBindScroll(event)\r\n        const {state, flatNodes, summaryNodes, dataModel, methods, current, handler, utils} = useTableNode({props, emit, getValidate: () => formValidate.value})\r\n        const {fixedShadowClass} = useFixedShadow(event)\r\n        const formValidate = computed(() => formatFormRules(\r\n            props.rules,\r\n            !plcData.value ? undefined : plcData.value.flatPlcList.map(plc => ({\r\n                label: plc.props.title,\r\n                field: plc.props.field,\r\n                required: plc.props.required,\r\n                rules: plc.props.rules,\r\n            })))) as ComputedRef<FormValidate>\r\n\r\n        /*是否可以启用虚拟滚动*/\r\n        const disabledVirtual = computed(() => props.virtual == false || (!!plcData.value && plcData.value.notFitVirtual.length > 0))\r\n\r\n        const classes = computed(() => [\r\n            'pl-table',\r\n            `pl-table-size-${styleComputed.value.size}`,\r\n            `pl-table-shape-${styleComputed.value.shape}`,\r\n            {\r\n                'pl-table-border': props.border,\r\n                'pl-table-stripe': props.stripe,\r\n            },\r\n            ...fixedShadowClass.value,\r\n        ])\r\n\r\n        const exposeHandler = {\r\n            ...handler,\r\n            onClickRow: (e: MouseEvent, node: TableNode) => {\r\n                methods.setCurrent(node.key);\r\n                emit.onClickRow(node, e);\r\n                hasClass(e.target as HTMLElement, 'plt-cell') && emit.onClickCell(node, e);\r\n            },\r\n            onDblclickRow: (e: MouseEvent, node: TableNode) => {\r\n                emit.onDblclickRow(node, e)\r\n                hasClass(e.target as HTMLElement, 'plt-cell') && emit.onDblclickCell(node, e);\r\n            }\r\n        }\r\n\r\n        const refer = {\r\n            refs,\r\n            props,\r\n            numberState,\r\n            plcData,\r\n            bindScroll,\r\n            event,\r\n            dataModel,\r\n            state, flatNodes, summaryNodes,\r\n            disabledVirtual,\r\n            handler: exposeHandler,\r\n            ...methods,\r\n            formValidate,\r\n            current,\r\n            utils,\r\n        }\r\n\r\n        onMounted(() => {\r\n            // console.log(refer.nodeState)\r\n        })\r\n\r\n        return {\r\n            refer,\r\n            render: () => (\r\n                <div class={classes.value} ref=\"el\" v-loading={props.loading || state.root.loading}>\r\n                    <PlcCollector ref=\"collector\">{slots.default()}</PlcCollector>\r\n                    {!!plcData.value && <>\r\n                        {!props.hideHeader && <PltHead table={refer}/>}\r\n                        <PltBody table={refer}/>\r\n                    </>}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})\r\n\r\nexport const PlainTable = Object as PropType<typeof Table.use.class>\r\n\r\nexport function injectPlainTable() {return inject('@@pl-table') as typeof Table.use.class}\r\n\r\nexport default Table","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlcProps, PlcPublicAttrs} from \"./plc.utils\";\r\nimport {TablePlcCollector} from './plc-collector';\r\nimport {Plc, TablePlc} from \"./plc.type\";\r\nimport {useNumber} from \"../../../../use/useNumber\";\r\nimport {computed, ExtractPropTypes, PropType, reactive} from 'vue';\r\nimport {useScopedSlots} from \"../../../../use/useScopedSlots\";\r\nimport {TableNode} from \"../../core/useTableNode\";\r\n\r\nexport function usePlc(props: ExtractPropTypes<typeof PlcProps>) {\r\n\r\n    const {scopedSlots} = useScopedSlots({\r\n        head: {plc: Object as PropType<TablePlc>},\r\n        default: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>},\r\n        edit: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>},\r\n        summary: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>},\r\n    }, true)\r\n    /*collector收集列信息*/\r\n    TablePlcCollector.useChild()\r\n    /*格式化props*/\r\n    const {numberState} = useNumber(props, ['order', 'width'])\r\n    /*目标props*/\r\n    const formatProps = computed(() => ({\r\n        ...props,\r\n        ...numberState,\r\n    }) as Omit<typeof props, 'order' | 'width'> & typeof numberState)\r\n    /*props的一个副本，不过如果有值的情况下，优先级比props中的值高（比config值也高）*/\r\n    const propsState = reactive(Object.keys(PlcProps).reduce((ret: any, key: string) => {\r\n        ret[key] = null\r\n        return ret\r\n    }, {}) as { [k in keyof typeof formatProps.value]: typeof formatProps.value[k] | null })\r\n\r\n    const plc: Plc = reactive({\r\n        /*PlcPublicAttrs 在 copyPlc中会深度复制一遍，这里适配类型即可*/\r\n        ...PlcPublicAttrs,\r\n        group: false,\r\n        props: formatProps,\r\n        state: propsState,\r\n        refer: () => plc,\r\n        setDurWidth: (durWidth: number) => propsState.width = Number((formatProps.value.width)) + durWidth,\r\n        scopedSlots,\r\n    })\r\n\r\n    return {\r\n        refer: plc,\r\n        render: () => (<i {...{title: props.title, field: props.field}}/>)\r\n    }\r\n}\r\n\r\nexport default designComponent({\r\n    name: 'plc',\r\n    props: {\r\n        ...PlcProps,\r\n    },\r\n    setup({props}) {\r\n        return usePlc(props)\r\n    },\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlcGroupProps, PlcPublicAttrs} from \"./plc.utils\";\r\nimport {TablePlcCollector} from './plc-collector';\r\nimport {useSlots} from \"../../../../use/useSlots\";\r\nimport {PlcGroup} from \"./plc.type\";\r\nimport {useNumber} from \"../../../../use/useNumber\";\r\nimport {computed, PropType, reactive} from 'vue';\r\nimport {useScopedSlots} from \"../../../../use/useScopedSlots\";\r\n\r\nexport default designComponent({\r\n    name: 'plc-group',\r\n    props: {\r\n        ...PlcGroupProps,\r\n    },\r\n    setup({props}) {\r\n        /*插槽*/\r\n        const {slots} = useSlots()\r\n        const {scopedSlots} = useScopedSlots({\r\n            head: {plc: Object as PropType<PlcGroup>},\r\n        }, true)\r\n        /*collector收集列信息*/\r\n        TablePlcCollector.useChild()\r\n        /*子列信息*/\r\n        const {children} = TablePlcCollector.useParent()\r\n        /*格式化props*/\r\n        const {numberState} = useNumber(props, ['order'])\r\n        /*目标props*/\r\n        const formatProps = computed(() => ({\r\n            ...props,\r\n            ...numberState,\r\n        }) as Omit<typeof props, 'order'> & typeof numberState)\r\n        /*props的一个副本，不过如果有值的情况下，优先级比props中的值高（比config值也高）*/\r\n        const propsState = reactive(Object.keys(PlcGroupProps).reduce((ret: any, key: string) => {\r\n            ret[key] = null\r\n            return ret\r\n        }, {}) as { [k in keyof typeof formatProps.value]: typeof formatProps.value[k] | null })\r\n\r\n        /*核心暴露对象*/\r\n        const group: PlcGroup = reactive({\r\n            /*PlcPublicAttrs 在 copyPlc中会深度复制一遍，这里适配类型即可*/\r\n            ...PlcPublicAttrs,\r\n            group: true,\r\n            children,\r\n            props: formatProps,\r\n            state: propsState,\r\n            refer: () => group,\r\n            setDurWidth: (durWidth: number) => {\r\n                const itemDurWidth = Math.floor(durWidth / (children.length))\r\n                children.forEach(item => item.setDurWidth(itemDurWidth))\r\n            },\r\n            scopedSlots,\r\n        })\r\n\r\n        return {\r\n            refer: group,\r\n            render: () => (\r\n                <div>\r\n                    {slots.default()}\r\n                </div>\r\n            )\r\n        }\r\n    },\r\n})","import {designComponent} from \"../../../../use/designComponent\";\r\nimport {PlcProps} from \"./plc.utils\";\r\nimport {usePlc} from \"./plc\";\r\nimport {deepcopy} from \"plain-utils/object/deepcopy\";\r\nimport {ComponentInternalInstance, ComponentPropsOptions, ExtractPropTypes} from 'vue';\r\nimport {VNodeChild} from \"../../../../shims\";\r\nimport {Plc} from \"./plc.type\";\r\nimport {TableNode} from \"../../core/useTableNode\";\r\n\r\nexport function designPlc<_,\r\n    ExternalProps extends Readonly<ComponentPropsOptions> = {},\r\n    TargetProps = ExtractPropTypes<typeof PlcProps & ExternalProps>,\r\n    ExternalRefer = {},\r\n    >(\r\n    {\r\n        name,\r\n        standardProps,\r\n        externalProps,\r\n        setup,\r\n    }: {\r\n        name: string,\r\n        standardProps?: Partial<{ [k in keyof typeof PlcProps]: any }>,\r\n        externalProps?: ExternalProps,\r\n        setup?: (props: TargetProps, ctx: ComponentInternalInstance) => ExternalRefer,\r\n    },\r\n    render?: {\r\n        head?: (scope: { plc: Plc, props: TargetProps, refer: ExternalRefer }) => VNodeChild,\r\n        default?: (scope: { node: TableNode, plc: Plc, row: any, props: TargetProps, refer: ExternalRefer }) => VNodeChild,\r\n        summary?: (scope: { node: TableNode, plc: Plc, row: any, props: TargetProps, refer: ExternalRefer }) => VNodeChild,\r\n        edit?: (scope: { node: TableNode, plc: Plc, row: any, props: TargetProps, refer: ExternalRefer }) => VNodeChild,\r\n    },\r\n) {\r\n    const OptionProps = deepcopy(PlcProps)\r\n\r\n    Object.entries(OptionProps).map(([key, value]) => {\r\n        if (!!standardProps && !!(standardProps as any)[key]) {\r\n            Object.assign(value, (standardProps as any)[key])\r\n        }\r\n        if (!!(render as any)[key]) {\r\n            (value as any).default = function (scope: any) {\r\n                return (render as any)[key]({\r\n                    ...scope,\r\n                    refer: !scope.plc.externalRefer ? null : scope.plc.externalRefer(),\r\n                    props: scope.plc.props\r\n                })\r\n            }\r\n        }\r\n    })\r\n\r\n    return designComponent({\r\n        name,\r\n        props: {\r\n            ...OptionProps,\r\n            ...(externalProps || {}),\r\n        },\r\n        setup({props, ctx}) {\r\n            const {render, refer} = usePlc(props)\r\n            if (!!setup) {\r\n                const externalRefer = setup(props as any, ctx!)\r\n                Object.assign(refer, {externalRefer: () => externalRefer})\r\n            }\r\n            return {\r\n                refer,\r\n                render,\r\n            }\r\n        },\r\n    })\r\n}","import {designPlc} from \"../core/designPlc\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-index',\r\n    standardProps: {\r\n        autoFixedLeft: {default: true},\r\n        order: {default: -9999},\r\n        width: {default: 45},\r\n        align: {default: 'center'},\r\n        noPadding: {default: true},\r\n    },\r\n    externalProps: {\r\n        summaryText: {type: String, default: '合计'},\r\n    },\r\n}, {\r\n    head: () => '#',\r\n    default: ({node}) => node.index + 1,\r\n    summary: ({props}) => <span class=\"plc-index-summary-text\">{props.summaryText}</span>,\r\n})","import {designPlc} from \"../core/designPlc\";\r\nimport {reactive, computed, ComputedRef, PropType, onBeforeUnmount} from 'vue';\r\nimport {injectPlainTable} from \"../../table\";\r\nimport {TableNode} from \"../../core/useTableNode\";\r\nimport {SimpleObject, VNodeChild} from \"../../../../shims\";\r\nimport {Plc, TableRenderScope} from \"../core/plc.type\";\r\nimport {useScopedSlots} from \"../../../../use/useScopedSlots\";\r\n\r\ninterface ExpandRefer {\r\n    isExpand: (node: TableNode) => boolean,\r\n    totalSpan: ComputedRef<number>,\r\n    state: { expandKeys: Record<string, boolean> },\r\n    toggle: (node: TableNode) => void,\r\n    scopedSlots: {\r\n        expand: ((scope: TableRenderScope, vnode: VNodeChild) => VNodeChild)\r\n    },\r\n    width: () => number,\r\n    methods: {\r\n        expandAll: () => void,\r\n        collapseAll: () => void,\r\n    },\r\n}\r\n\r\nexport default designPlc(\r\n    {\r\n        name: 'plc-expand',\r\n        standardProps: {\r\n            autoFixedLeft: {default: true},\r\n            order: {default: -9997},\r\n            width: {default: 60},\r\n            align: {default: 'center'},\r\n            notFitVirtual: {default: true},\r\n            noPadding: {default: true},\r\n            renderAfterRow: {\r\n                default: ({plc, node, row}: { plc: Plc & { externalRefer: () => ExpandRefer }, node: TableNode, row: SimpleObject }) => {\r\n                    const refer = plc.externalRefer()\r\n                    if (!refer.isExpand(node)) {return null}\r\n                    return (\r\n                        <tr class=\"plt-row plt-expand-row\">\r\n                            <td class=\"plt-cell\" rowspan={1} colspan={refer.totalSpan.value}>\r\n                                <div class=\"plt-expand-body\" style={`width:${refer.width() - 20}px`}>\r\n                                    {refer.scopedSlots.expand({node, plc, row})}\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    )\r\n                }\r\n            },\r\n        },\r\n        externalProps: {\r\n            toggleOnClickRow: {type: Boolean},                      // 是否在点击行的时候触发点击动作\r\n            summaryExpand: {type: Boolean},                         // 合计行是否可以展开\r\n        },\r\n        setup: (props) => {\r\n            const table = injectPlainTable()\r\n            const {scopedSlots} = useScopedSlots({\r\n                expand: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>, row: Object as PropType<SimpleObject>},\r\n            })\r\n            const state = reactive({\r\n                expandKeys: {} as Record<string, boolean>,\r\n            })\r\n            const totalSpan = computed(() => !table.plcData.value ? 1 : table.plcData.value.flatPlcList.length)\r\n            const isExpand = (node: TableNode) => state.expandKeys[node.key]\r\n            const toggle = (node: TableNode) => isExpand(node) ? close(node) : expand(node)\r\n            const expand = (node: TableNode) => state.expandKeys[node.key] = true\r\n            const close = (node: TableNode) => state.expandKeys[node.key] = false\r\n            if (props.toggleOnClickRow) {\r\n                table.event.on.onClickCell(toggle)\r\n                onBeforeUnmount(() => table.event.off.onClickRow(toggle))\r\n            }\r\n            const methods = {\r\n                expandAll: () => {\r\n                    state.expandKeys = {}\r\n                    Object.values(table.state.nodeMap).forEach(node => expand(node))\r\n                },\r\n                collapseAll: () => {\r\n                    state.expandKeys = {}\r\n                },\r\n            }\r\n            const refer: ExpandRefer = {\r\n                state,\r\n                totalSpan,\r\n                isExpand,\r\n                toggle,\r\n                scopedSlots,\r\n                width: () => table.plcData.value!.tableWidth,\r\n                methods,\r\n            }\r\n            return refer\r\n        }\r\n    },\r\n    {\r\n        head: ({refer}) => (\r\n            <pl-dropdown\r\n                placement=\"bottom-center\"\r\n                v-slots={{\r\n                    default: () => <pl-button icon=\"el-icon-menu\" mode=\"text\"/>,\r\n                    popper: () => <pl-dropdown-menu>\r\n                        <pl-dropdown-option label=\"全部展开\" onClick={refer.methods.expandAll} icon=\"el-icon-zoom-full\"/>\r\n                        <pl-dropdown-option label=\"全部收起\" onClick={refer.methods.collapseAll} icon=\"el-icon-zoom-scale\"/>\r\n                    </pl-dropdown-menu>\r\n                }}\r\n            />\r\n        ),\r\n        default: ({refer, node, props}) => {\r\n            return (!node.isSummary || props.summaryExpand) && (<pl-button{...{\r\n                icon: 'el-icon-arrow-down',\r\n                mode: 'text',\r\n                class: [\r\n                    'plc-expand-icon',\r\n                    {'plc-expand-icon-active': refer.isExpand(node)},\r\n                ],\r\n                onClick: (e: MouseEvent) => refer.toggle(node)\r\n            }}/>)\r\n        }\r\n    },\r\n)","import {designPlc} from \"../core/designPlc\";\r\nimport {computed, onBeforeUnmount, PropType, reactive} from 'vue';\r\nimport {TableNode} from \"../../core/useTableNode\";\r\nimport {injectPlainTable} from \"../../table\";\r\nimport {CheckboxStatus} from \"../../../../utils/constant\";\r\nimport {toArray} from \"../../../../utils/toArray\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-check',\r\n    standardProps: {\r\n        autoFixedLeft: {default: true},\r\n        order: {default: -9998},\r\n        width: {default: 40},\r\n        align: {default: 'center'},\r\n        noPadding: {default: true},\r\n    },\r\n    externalProps: {\r\n        toggleOnClickRow: {type: Boolean},                      // 是否在点击行的时候触发点击动作\r\n        isCheckable: Function as PropType<(node: TableNode) => boolean>,// 是否可选\r\n    },\r\n    setup(props, ctx) {\r\n        const table = injectPlainTable()\r\n        const proxy = ctx.proxy!\r\n        const state = reactive({\r\n            selected: [] as TableNode[],\r\n        })\r\n        const selectedKeys = computed(() => {\r\n            return state.selected.map(item => item.key)\r\n        })\r\n        const status = computed(() => {\r\n            if (state.selected.length === 0) return CheckboxStatus.uncheck\r\n            if (table.flatNodes.value.every((item) => selectedKeys.value.indexOf(item.key) > -1)) {\r\n                return CheckboxStatus.check\r\n            } else {\r\n                return CheckboxStatus.minus\r\n            }\r\n        })\r\n        const isCheckable = (node: TableNode) => !props.isCheckable || (props.isCheckable(node) !== false)\r\n        const isCheck = (node: TableNode) => selectedKeys.value.indexOf(node.key) > -1\r\n        const toggle = (node: TableNode) => {\r\n            const index = selectedKeys.value.indexOf(node.key)\r\n            index > -1 ? state.selected.splice(index, 1) : state.selected.push(node)\r\n        }\r\n        const handler = {\r\n            onClickCheckbox: (node: TableNode) => isCheckable(node) && toggle(node),\r\n        }\r\n        const methods = {\r\n            getSelected: () => state.selected,\r\n            clearAll: () => state.selected = [],\r\n            checkAll: () => {\r\n                const availableSelectItems = table.flatNodes.value\r\n                    .filter(isCheckable)\r\n                    .map((item: TableNode) => item)\r\n                if (state.selected.length === availableSelectItems.length) {\r\n                    state.selected = []\r\n                } else {\r\n                    state.selected = availableSelectItems\r\n                }\r\n            },\r\n            reverse: () => {\r\n                state.selected = table.flatNodes.value\r\n                    .filter(node => isCheckable(node) && selectedKeys.value.indexOf(node.key) === -1)\r\n            },\r\n            addSelected: (key: string | string[]) => {\r\n                const keys = toArray(key)\r\n                const nodes = keys.map(k => table.state.nodeMap[k]).filter(Boolean)\r\n                state.selected = [...state.selected, ...nodes]\r\n            },\r\n            removeSelected: (key: string | string[]) => {\r\n                const keys = toArray(key)\r\n                state.selected = state.selected.filter(node => keys.indexOf(node.key) === -1)\r\n            },\r\n        }\r\n        if (props.toggleOnClickRow) {\r\n            table.event.on.onClickCell(handler.onClickCheckbox)\r\n            onBeforeUnmount(() => table.event.off.onClickRow(handler.onClickCheckbox))\r\n        }\r\n        Object.assign(proxy, methods)\r\n        return {\r\n            state,\r\n            selectedKeys,\r\n            status,\r\n            handler,\r\n            isCheck,\r\n            isCheckable,\r\n            methods,\r\n        }\r\n    },\r\n}, {\r\n    summary: () => null,\r\n    default: ({refer, node}) => <pl-checkbox\r\n        customReadonly\r\n        modelValue={refer.isCheck(node)}\r\n        onClick={() => refer.handler.onClickCheckbox(node)}\r\n        disabled={!refer.isCheckable(node)}\r\n    />,\r\n    head: ({refer}) => (\r\n        <pl-dropdown\r\n            placement=\"bottom-center\"\r\n            v-slots={{\r\n                default: () => <pl-checkbox checkStatus={refer.status.value}/>,\r\n                popper: () => <pl-dropdown-menu>\r\n                    <pl-dropdown-option label=\"全部选中\" icon=\"el-icon-check-bold\" onClick={refer.methods.checkAll}/>\r\n                    <pl-dropdown-option label=\"全部取消\" icon=\"el-icon-close-bold\" onClick={refer.methods.clearAll}/>\r\n                    <pl-dropdown-option label=\"全部反选\" icon=\"el-icon-refresh\" onClick={refer.methods.reverse}/>\r\n                </pl-dropdown-menu>\r\n            }}\r\n        />\r\n    )\r\n})","/**\r\n * 获取拖拽的rowEl对象\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:55\r\n */\r\nimport {hasClass} from \"plain-utils/dom/hasClass\";\r\n\r\nexport function getRowEl(e: MouseEvent, rowClass: string): HTMLElement {\r\n    let rowEl = e.target as HTMLElement\r\n    while (!!rowEl && !hasClass(rowEl, rowClass)) {\r\n        rowEl = rowEl.parentNode as HTMLElement\r\n    }\r\n    if (!rowEl) {\r\n        throw new Error(`can't find item element!`)\r\n    }\r\n    return rowEl\r\n}\r\n\r\n/**\r\n * 获取可以滚动的父组件\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:50\r\n */\r\nexport function getScrollParent(el: HTMLElement): HTMLElement {\r\n    while (!!el && el.scrollHeight <= el.offsetHeight) {\r\n        el = el.parentNode as HTMLElement\r\n    }\r\n    return el\r\n}\r\n\r\n/**\r\n * 获取行el对象的所有兄弟节点\r\n * @author  韦胜健\r\n * @date    2020/8/19 23:57\r\n */\r\nexport function getRowElList(el: HTMLElement, rowClass: string): HTMLElement[] {\r\n    return Array.from(el.parentNode!.querySelectorAll(`.${rowClass}`))\r\n}","/**\r\n * 拖拽排序实现（非虚拟滚动）\r\n * @author  韦胜健\r\n * @date    2020/8/21 10:07\r\n */\r\nimport {UseListDraggierType} from \"./index\";\r\nimport {getRowEl, getRowElList, getScrollParent} from \"./utils\";\r\nimport {disabledUserSelect} from \"plain-utils/dom/disabledUserSelect\";\r\nimport {nextTick} from 'vue';\r\nimport {enableUserSelect} from \"plain-utils/dom/enableUserSelect\";\r\nimport {useAutoScroll} from \"../../../../../../use/useAutoScroll\";\r\n\r\nexport const useListDraggierNotVirtual: UseListDraggierType = ({rowClass, onChange, getScroll}) => {\r\n\r\n    const autoScroll = useAutoScroll({vertical: true, getScroll,})\r\n\r\n    const state = {\r\n        startIndex: 0,                              // 拖拽的dragEl在数组中的索引\r\n        endIndex: 0,                                // 拖拽结束的时候，dragEl应该所在的索引位置\r\n        startClientY: 0,                            // 拖拽dragEl起始的时候，e.clientY，与mousemove的时候的e.clientY做差值，以便得到dragEl的偏移距离\r\n        moveClientY: 0,                             // 拖拽move的时候，e.clientY\r\n        dragEl: null as null | HTMLElement,         // 拖拽的时候的dragEl的dom对象\r\n        dragHeight: 0,                              // 拖拽的时候的dragEl高度，当在下方移动时，下方需要移动的rowEl都应该往上偏移 dragHeight距离，在上方移动时，上方需要移动的rowEl需要往下偏移 dragHeight距离\r\n        dragOffsetTop: 0,                           // dragEl拖拽开始的时候，距离滚动顶部距离\r\n        scrollParent: null as null | HTMLElement,   // 可以滚动的父元素\r\n        dragStartScrollTop: 0,                      // 拖拽开始的时候，scrollParent 的scrollTop位置\r\n        dragScrollTop: 0,                           // scrollParent 的 scroll偏移距离\r\n        rowList: [] as HTMLElement[],               // dragEl的兄弟节点，包含dragEl\r\n    }\r\n    const utils = {\r\n        /**\r\n         * 根据startIndex以及endIndex，设置这个index范围内的row的dom对象进行上下平移；\r\n         * 如果startIndex大于endIndex，则范围内的row对象，除了startIndex，其他的应该向上平移；\r\n         * 反之，如果startIndex小于endIndex，则范围内的row对象，除了startIndex，其他的应该向下平移；\r\n         *\r\n         * @author  韦胜健\r\n         * @date    2020/8/19 21:09\r\n         */\r\n        refresh() {\r\n            const {dragHeight, startIndex, endIndex} = state\r\n            // 是否为向下移动\r\n            const movedown = startIndex < endIndex\r\n            const [start, end] = movedown ? [startIndex, endIndex] : [endIndex, startIndex]\r\n\r\n            state.rowList.forEach((el, index) => {\r\n                if (index < start || index > end) {\r\n                    el.style.transform = ``\r\n                    return;\r\n                }\r\n                if (el === state.dragEl) {\r\n                    return\r\n                }\r\n                el.style.transform = `translateY(${movedown ? '-' : ''}${dragHeight}px)`\r\n            })\r\n        },\r\n        /**\r\n         * 刷新dragEl的位置，同时刷新兄弟节点的位置\r\n         * @author  韦胜健\r\n         * @date    2020/8/20 23:29\r\n         */\r\n        refreshDragElPosition() {\r\n            state.dragEl!.style.transform = `translateY(${state.moveClientY - state.startClientY + state.dragScrollTop}px)`\r\n            const top = (state.moveClientY - state.startClientY) + state.dragScrollTop + state.dragOffsetTop\r\n            state.endIndex = Math.ceil(Math.max(0, top / state.dragHeight - 0.5))\r\n\r\n            utils.refresh()\r\n        },\r\n    }\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n            disabledUserSelect()\r\n\r\n            state.startClientY = e.clientY\r\n            state.dragEl = getRowEl(e, rowClass)\r\n            state.dragHeight = state.dragEl.offsetHeight\r\n            state.dragOffsetTop = state.dragEl.offsetTop\r\n            state.rowList = getRowElList(state.dragEl!, rowClass)\r\n            state.startIndex = state.rowList.indexOf(state.dragEl)\r\n            state.scrollParent = getScrollParent(state.dragEl)\r\n            state.dragStartScrollTop = state.scrollParent!.scrollTop\r\n\r\n            state.scrollParent!.addEventListener('scroll', handler.parentScroll)\r\n            document.addEventListener('mousemove', handler.mousemove)\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n\r\n            state.rowList.forEach((rowEl: any) => {\r\n                // 如果是当前拖拽的el，则不监听事件，不做任何处理\r\n                if (rowEl === state.dragEl) {\r\n                    return\r\n                }\r\n                // 兄弟节点自动进行上下平移\r\n                rowEl.style.transition = `transform 300ms cubic-bezier(0.23, 1, 0.32, 1)`\r\n            })\r\n\r\n            autoScroll.showHover()\r\n        },\r\n        mousemove: (e: MouseEvent) => {\r\n            state.moveClientY = e.clientY\r\n            utils.refreshDragElPosition()\r\n        },\r\n        mouseup: async () => {\r\n\r\n            autoScroll.hideHover()\r\n\r\n            await nextTick()\r\n            enableUserSelect()\r\n\r\n            state.dragEl!.style.transform = ''\r\n            document.removeEventListener('mousemove', handler.mousemove)\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n            state.scrollParent!.removeEventListener('scroll', handler.parentScroll)\r\n\r\n            state.rowList.forEach((rowEl: any) => {\r\n                if (rowEl === state.dragEl) {\r\n                    return\r\n                }\r\n                rowEl.style.transition = ''\r\n                rowEl.style.transform = ''\r\n            })\r\n\r\n            state.startClientY = 0\r\n            state.moveClientY = 0\r\n            state.dragEl = null\r\n            state.dragHeight = 0\r\n            state.dragOffsetTop = 0\r\n            state.scrollParent = null\r\n            state.dragStartScrollTop = 0\r\n            state.dragScrollTop = 0\r\n            state.rowList = []\r\n            await onChange(state.startIndex, state.endIndex)\r\n            state.startIndex = 0\r\n            state.endIndex = 0\r\n        },\r\n        parentScroll: () => {\r\n            state.dragScrollTop = state.scrollParent!.scrollTop - state.dragStartScrollTop\r\n            utils.refreshDragElPosition()\r\n        }\r\n    }\r\n\r\n    return {\r\n        handler,\r\n    }\r\n}","/**\r\n * 拖拽排序组合函数，适用于虚拟滚动版本的\r\n * @author  韦胜健\r\n * @date    2020/8/21 10:27\r\n */\r\nimport {UseListDraggierType} from \"./index\";\r\nimport {getRowEl, getScrollParent} from \"./utils\";\r\nimport {useAutoScroll} from \"../../../../../../use/useAutoScroll\";\r\n\r\nexport const useListDraggierWithVirtual: UseListDraggierType = (\r\n    {\r\n        rowClass,\r\n        onChange,\r\n        getScroll,\r\n    }) => {\r\n\r\n    const dragElHeight = 3\r\n\r\n    const state = {\r\n        startDragIndex: 0,                                              // 开始拖拽的时候，的行索引\r\n        endDragIndex: 0,                                                // 拖拽结束的时候，应该移动到的索引位置\r\n\r\n        startDragOffsetTop: 0,                                          // 开始拖拽的时候，dragEl距离top值（距离可以滚动的父组件的顶部距离）\r\n        startDragHeight: 0,                                             // 拖拽开始的时候，dragEl的高度，虚拟滚动情况下，认为所有row的高度都是一致的，所以这个相当于行高\r\n\r\n        startClientY: 0,                                                // 拖拽开始的时候鼠标位置\r\n        moveClientY: 0,                                                 // 拖拽移动的时候鼠标的位置\r\n\r\n        scrollParent: null as null | HTMLElement,                       // 可以滚动的父元素\r\n        startScrollTopOfScrollParent: 0,                                // 拖拽开始的时候，滚动父元素的滚动距离 \r\n        scrollTopOfScrollParent: 0,                              // 拖拽开始的时候，滚动父元素的滚动差值\r\n        scrollParentBoundingRect: {\r\n            top: 0,                                                     // 滚动父元素在页面上的top值\r\n            left: 0,                                                    // 滚动父元素在页面上的left值\r\n            width: 0,                                                   // 滚动父元素在页面上的显示宽度\r\n            height: 0,                                                  // 滚动父元素在页面上的显示高度\r\n        },\r\n\r\n        dragEl: null as null | HTMLElement,                             // 拖拽的时候，显示的标志元素\r\n    }\r\n\r\n    const autoScroll = useAutoScroll({getScroll, vertical: true,})\r\n\r\n    const utils = {\r\n        refresh() {\r\n            /*拖拽元素在scrollParent中的top值*/\r\n            const top = state.startDragOffsetTop + (state.moveClientY - state.startClientY) + (state.scrollTopOfScrollParent - state.startScrollTopOfScrollParent) + state.startDragHeight / 2\r\n\r\n            /*如果top处于目标index的上方，则index为目标index，在下方则为index+1*/\r\n            let endDragIndex = top / state.startDragHeight\r\n            const external = endDragIndex % 1\r\n            if (external > 0.5) {\r\n                endDragIndex = Math.ceil(endDragIndex)\r\n            } else {\r\n                endDragIndex = Math.floor(endDragIndex)\r\n            }\r\n\r\n            /*刷新指示器的位置*/\r\n            state.dragEl!.style.transform = `translateY(${(endDragIndex) * state.startDragHeight - dragElHeight - state.scrollTopOfScrollParent + state.scrollParentBoundingRect.top}px)`\r\n\r\n            if (endDragIndex === state.startDragIndex || endDragIndex === state.startDragIndex + 1) {\r\n                state.endDragIndex = state.startDragIndex\r\n            } else if (endDragIndex > state.startDragIndex) {\r\n                state.endDragIndex = endDragIndex - 1\r\n            } else {\r\n                state.endDragIndex = endDragIndex\r\n            }\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: MouseEvent) => {\r\n            const dragEl = getRowEl(e, rowClass)\r\n            // 每一行dom对象应该加上一个vid属性，表示这一行为第几个行，否则虚拟滚动情况下，无法知道是哪一行\r\n            const vid = Number(dragEl.getAttribute('vid'))\r\n\r\n            // 虚拟滚动下，每一行的行高一致\r\n            const {offsetHeight} = dragEl\r\n\r\n            state.startDragIndex = vid\r\n            state.startDragHeight = offsetHeight\r\n            state.startDragOffsetTop = state.startDragIndex * offsetHeight\r\n            state.startClientY = e.clientY\r\n            state.moveClientY = e.clientY\r\n\r\n            // 初始化scrollParent\r\n            const scrollParent = getScrollParent(dragEl)\r\n            state.scrollParent = scrollParent\r\n            state.startScrollTopOfScrollParent = scrollParent!.scrollTop\r\n            state.scrollTopOfScrollParent = scrollParent!.scrollTop\r\n            const {top, left, height, width} = state.scrollParent!.parentElement!.getBoundingClientRect()\r\n            state.scrollParentBoundingRect = {top, left, height, width}\r\n\r\n            // 初始化监听事件\r\n            scrollParent!.addEventListener('scroll', handler.scroll)\r\n            document.addEventListener('mousemove', handler.mousemove)\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n\r\n            //\r\n            state.dragEl = document.createElement('div')\r\n            document.body.appendChild(state.dragEl)\r\n            state.dragEl.style.position = 'fixed'\r\n            state.dragEl.style.left = `${state.scrollParentBoundingRect.left}px`\r\n            state.dragEl.style.height = `${dragElHeight}px`\r\n            state.dragEl.style.width = `0`\r\n            state.dragEl.style.top = '0'\r\n            state.dragEl.style.backgroundColor = '#12b4a5'\r\n            utils.refresh()\r\n\r\n            setTimeout(() => {\r\n                state.dragEl!.style.width = `${state.scrollParentBoundingRect.width}px`\r\n                autoScroll.showHover()\r\n            }, 23)\r\n        },\r\n        scroll: () => {\r\n            state.scrollTopOfScrollParent = state.scrollParent!.scrollTop\r\n            utils.refresh()\r\n        },\r\n        mousemove: (e: MouseEvent) => {\r\n            if (e.clientY < state.scrollParentBoundingRect.top) {\r\n                return\r\n            }\r\n            if (e.clientY > state.scrollParentBoundingRect.top + state.scrollParentBoundingRect.height - 10) {\r\n                return\r\n            }\r\n            state.moveClientY = e.clientY\r\n            utils.refresh()\r\n        },\r\n        mouseup: (e: MouseEvent) => {\r\n\r\n            autoScroll.hideHover()\r\n\r\n            document.removeEventListener('mousemove', handler.mousemove)\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n            state.scrollParent!.removeEventListener('scroll', handler.scroll)\r\n\r\n            const {startDragIndex, endDragIndex} = state\r\n\r\n            onChange(startDragIndex, endDragIndex)\r\n\r\n            state.startDragIndex = 0\r\n            state.endDragIndex = 0\r\n            state.startDragOffsetTop = 0\r\n            state.startDragHeight = 0\r\n            state.startClientY = 0\r\n            state.moveClientY = 0\r\n            state.scrollParent = null\r\n            state.startScrollTopOfScrollParent = 0\r\n            state.scrollTopOfScrollParent = 0\r\n            state.scrollParentBoundingRect = {\r\n                top: 0,\r\n                left: 0,\r\n                width: 0,\r\n                height: 0,\r\n            }\r\n            state.dragEl!.parentNode!.removeChild(state.dragEl!)\r\n            state.dragEl = null\r\n\r\n        }\r\n    }\r\n\r\n    return {\r\n        handler\r\n    }\r\n\r\n}","/**\r\n * 拖拽排序实现函数的类型\r\n * @author  韦胜健\r\n * @date    2020/8/21 10:07\r\n */\r\nimport {useListDraggierNotVirtual} from \"./use-list-draggier\";\r\nimport {useListDraggierWithVirtual} from \"./use-list-draggier.virtual\";\r\nimport {PlainScroll} from \"../../../../../scroll/scroll\";\r\n\r\nexport interface UseListDraggierType {\r\n    (option: {\r\n        rowClass: string,                                                               // 行的class，要确保只有行所在的dom对象有这个class，其子节点是没有这个class的\r\n        onChange: (start: number, end: number) => void | Promise<void>,                 // 拖拽导致排序变化动作\r\n        virtual?: boolean,                                                              // 是否为虚拟滚动\r\n        getScroll: () => PlainScroll,\r\n    }): {\r\n        handler: {\r\n            mousedown: (e: MouseEvent) => void,\r\n        }\r\n    }\r\n}\r\n\r\nexport const useListDraggier: UseListDraggierType = (option) => {\r\n    if (option.virtual) {\r\n        return useListDraggierWithVirtual(option)\r\n    } else {\r\n        return useListDraggierNotVirtual(option)\r\n    }\r\n}","import {designPlc} from \"../../core/designPlc\";\r\nimport {injectPlainTable} from \"../../../table\";\r\nimport {computed} from 'vue';\r\nimport {useListDraggier} from \"./core\";\r\nimport {ie} from \"plain-utils/utils/ie\";\r\nimport {useTableGetScroll} from \"../../../core/useTableGetScroll\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-draggier',\r\n    standardProps: {\r\n        autoFixedLeft: {default: true},\r\n        order: {default: -9998},\r\n        width: {default: 40},\r\n        align: {default: 'center'},\r\n        noPadding: {type: Boolean, default: true},\r\n    },\r\n    setup: (props) => {\r\n        const {disabledVirtual, dataModel, event} = injectPlainTable()\r\n        const {getScroll} = useTableGetScroll(event.on.onVirtualMounted)\r\n        const handler = computed(() => useListDraggier({\r\n            virtual: !disabledVirtual.value && !ie,\r\n            // virtual: true,\r\n            rowClass: 'plt-row',\r\n            getScroll,\r\n            onChange: async (start, end) => {\r\n                dataModel.value!.splice(end, 0, dataModel.value!.splice(start, 1)[0])\r\n            },\r\n        }))\r\n        return {\r\n            onMousedown: handler.value.handler.mousedown,\r\n            onClick: (e: MouseEvent) => {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n            },\r\n        }\r\n    }\r\n}, {\r\n    default: ({refer}) => <pl-button\r\n        icon=\"el-icon-list\"\r\n        mode=\"text\"\r\n        class=\"plc-draggier-handler\"\r\n        {...refer}\r\n    />\r\n})","import {TableNode} from \"../../../core/useTableNode\";\r\nimport {TreeDropType} from \"../../../../tree/utils/tree-constant\";\r\nimport {useAutoScroll} from \"../../../../../use/useAutoScroll\";\r\nimport {PlainScroll} from \"../../../../scroll/scroll\";\r\nimport {StyleProperties} from \"../../../../../shims\";\r\nimport {getRowEl, getScrollParent} from '../draggier/core/utils';\r\n\r\nconst indicatorSize = 3;\r\n\r\nexport function usePlcTreeDraggier(\r\n    {\r\n        rowClass,\r\n        dragClass,\r\n        flatDataList,\r\n        levelPadding,\r\n        props,\r\n        methods,\r\n        getScroll,\r\n        getParents,\r\n    }: {\r\n        rowClass: string,                                                           // 行class\r\n        dragClass?: string,                                                         // 拖拽元素的class\r\n        flatDataList: { value: TableNode[] },                                       // 拍平的数据\r\n        levelPadding: number,\r\n        props: {\r\n            rowDraggable?: boolean,\r\n            allowRowDraggable?: (node: TableNode) => boolean,\r\n            allowRowDroppable?: (start: TableNode, move: TableNode, type: TreeDropType) => boolean,\r\n        },\r\n        methods: {\r\n            expand: (node: TableNode) => void,                      // 展开某个元素\r\n            refreshCheckStatus: () => void,                 // 刷新所有元素的选中状态\r\n            removeSelf: (node: TableNode) => void,\r\n            previousSibling: (self: TableNode, target: TableNode) => void,\r\n            nextSibling: (self: TableNode, target: TableNode) => void,\r\n            unshiftChild: (self: TableNode, target: TableNode) => void,\r\n        },\r\n        getScroll: () => PlainScroll,\r\n        getParents: (node: TableNode) => TableNode[]\r\n    }\r\n) {\r\n\r\n    const state = {\r\n\r\n        startNode: null as null | TableNode,\r\n        moveNode: null as null | TableNode,\r\n\r\n        startScrollTop: 0,\r\n        moveScrollTop: 0,\r\n\r\n        startClientY: 0,\r\n        moveClientY: 0,\r\n\r\n        rowHeight: 0,\r\n        scrollParent: null as null | HTMLElement,\r\n        rowEl: null as null | HTMLElement,\r\n        scrollParentRect: {\r\n            top: 0,\r\n            left: 0,\r\n            width: 0,\r\n            height: 0,\r\n        },\r\n        indicator: null as null | HTMLElement,\r\n        dragNodeBaseLeft: 0,\r\n\r\n        dropType: TreeDropType.inner,\r\n        droppable: false,\r\n    }\r\n\r\n    const autoScroll = useAutoScroll({vertical: true, getScroll,})\r\n\r\n    const utils = {\r\n        allowDrag: (node: TableNode) => {\r\n            return !props.allowRowDraggable || props.allowRowDraggable(node) !== false\r\n        },\r\n        allowDrop: (startNode: TableNode, moveNode: TableNode, dropType: TreeDropType) => {\r\n            return !props.allowRowDroppable || props.allowRowDroppable(startNode, moveNode, dropType) !== false\r\n        },\r\n        getIndicatorStyles(moveNode: TableNode, droppable: boolean, dropType: TreeDropType) {\r\n\r\n            const styles: StyleProperties = {}\r\n\r\n            let top = moveNode.index * state.rowHeight + state.scrollParentRect.top - (state.moveScrollTop)\r\n            let paddingLeft = (moveNode.level - state.startNode!.level) * levelPadding\r\n\r\n            styles.top = `${dropType === TreeDropType.next ? top + state.rowHeight - indicatorSize : top}px`\r\n            styles.left = `${state.dragNodeBaseLeft + paddingLeft}px`\r\n            styles.width = `${state.scrollParentRect.width - (state.dragNodeBaseLeft - state.scrollParentRect.left) - paddingLeft}px`\r\n            styles.height = `${dropType === TreeDropType.inner ? state.rowHeight : indicatorSize}px`\r\n            styles.backgroundColor = droppable ? '#12b4a5' : '#F38585'\r\n            styles.opacity = dropType === TreeDropType.inner ? '0.15' : ''\r\n\r\n            return styles\r\n        },\r\n        refresh() {\r\n            const top = state.startClientY - state.scrollParentRect.top + (state.moveScrollTop) + (state.moveClientY - state.startClientY)\r\n            let targetIndex = top / state.rowHeight\r\n            const external = targetIndex % 1\r\n            targetIndex = Math.floor(targetIndex)\r\n            let dropType: TreeDropType = external < 0.3 ? TreeDropType.prev : external > 0.7 ? TreeDropType.next : TreeDropType.inner\r\n            const moveNode = flatDataList.value[targetIndex]\r\n            if (!moveNode) {\r\n                return\r\n            }\r\n\r\n            let droppable = true\r\n\r\n            state.moveNode = moveNode\r\n            const parents = getParents(state.moveNode)\r\n            parents.push(state.moveNode)\r\n            if (parents.indexOf(state.startNode!) > -1) {\r\n                droppable = false\r\n            }\r\n            if (!utils.allowDrop(state.startNode!, moveNode, dropType)) {\r\n                droppable = false\r\n            }\r\n\r\n            state.dropType = dropType\r\n            state.droppable = droppable\r\n\r\n            Object.assign(state.indicator!.style, utils.getIndicatorStyles(moveNode, droppable, dropType))\r\n        },\r\n    }\r\n\r\n    const handler = {\r\n        mousedown: (e: DragEvent) => {\r\n            state.startClientY = state.moveClientY = e.clientY\r\n\r\n            state.rowEl = getRowEl(e, rowClass)\r\n            state.rowHeight = state.rowEl.offsetHeight\r\n            const vid = Number(state.rowEl.getAttribute('vid'))\r\n            state.moveNode = state.startNode = flatDataList.value[vid]\r\n\r\n            if (!utils.allowDrag(state.startNode)) {\r\n                return\r\n            }\r\n\r\n            const dragNode = state.rowEl.querySelector(`.${dragClass}`)!\r\n            state.dragNodeBaseLeft = Math.ceil(dragNode.getBoundingClientRect()!.left)\r\n\r\n            state.scrollParent = getScrollParent(state.rowEl)\r\n            state.startScrollTop = state.moveScrollTop = state.scrollParent.scrollTop\r\n            const {top, left, height, width} = (state.scrollParent.parentNode as HTMLElement).getBoundingClientRect()\r\n            state.scrollParentRect = {top, left, height, width}\r\n\r\n            state.indicator = document.createElement('div')\r\n            state.indicator.style.position = 'fixed'\r\n            state.indicator.style.pointerEvents = 'none'\r\n            state.indicator.style.height = `${indicatorSize}px`\r\n            state.indicator.style.width = `${state.scrollParentRect.width}px`\r\n            state.indicator.style.left = `${state.scrollParentRect.left}px`\r\n            state.indicator.style.backgroundColor = '#12b4a5'\r\n            document.body.appendChild(state.indicator)\r\n\r\n            state.scrollParent.addEventListener('scroll', handler.scroll)\r\n            document.addEventListener('mousemove', handler.mousemove)\r\n            document.addEventListener('mouseup', handler.mouseup)\r\n\r\n            utils.refresh()\r\n            autoScroll.showHover()\r\n        },\r\n        scroll() {\r\n            state.moveScrollTop = state.scrollParent!.scrollTop\r\n            utils.refresh()\r\n        },\r\n        /**\r\n         * 在dragover中判断clientX以及clientY，如果这两个值没有变化，就不往下执行，节省性能\r\n         * @author  韦胜健\r\n         * @date    2020/8/25 22:22\r\n         */\r\n        mousemove: (e: MouseEvent) => {\r\n            const {top, height} = state.scrollParentRect\r\n            if (e.clientY < top || e.clientY > top + height) {\r\n                return;\r\n            }\r\n            state.moveClientY = e.clientY\r\n            utils.refresh()\r\n        },\r\n        mouseup: () => {\r\n\r\n            autoScroll.hideHover()\r\n\r\n            const {startNode, moveNode, dropType, droppable} = state\r\n\r\n            state.scrollParent!.removeEventListener('scroll', handler.scroll)\r\n            document.removeEventListener('mousemove', handler.mousemove)\r\n            document.removeEventListener('mouseup', handler.mouseup)\r\n\r\n            state.indicator!.parentNode!.removeChild(state.indicator!)\r\n            state.startClientY = state.moveClientY = 0\r\n            state.rowEl = null\r\n            state.rowHeight = 0\r\n            state.moveNode = null\r\n            state.dragNodeBaseLeft = 0\r\n            state.scrollParent = null\r\n            state.startScrollTop = 0\r\n            state.scrollParentRect = {top: 0, left: 0, height: 0, width: 0}\r\n\r\n            if (!droppable) {\r\n                return\r\n            }\r\n\r\n            methods.removeSelf(startNode!)\r\n\r\n            switch (dropType) {\r\n                case TreeDropType.prev:\r\n                    methods.previousSibling(moveNode!, startNode!)\r\n                    break\r\n                case TreeDropType.inner:\r\n                    methods.unshiftChild(moveNode!, startNode!)\r\n                    methods.expand(moveNode!)\r\n                    break\r\n                case TreeDropType.next:\r\n                    methods.nextSibling(moveNode!, startNode!)\r\n                    break\r\n            }\r\n            methods.refreshCheckStatus()\r\n        }\r\n    }\r\n\r\n    return {\r\n        utils,\r\n        handler: {onMousedown: handler.mousedown}\r\n    }\r\n}","import {designPlc} from \"../../core/designPlc\";\r\nimport {computed, onBeforeUnmount, onMounted, PropType, watch} from 'vue';\r\nimport {TableNode} from \"../../../core/useTableNode\";\r\nimport {TreeDropType} from \"../../../../tree/utils/tree-constant\";\r\nimport {useScopedSlots} from \"../../../../../use/useScopedSlots\";\r\nimport {Plc} from \"../../core/plc.type\";\r\nimport {SimpleFunction, SimpleObject} from \"../../../../../shims\";\r\nimport {injectPlainTable} from \"../../../table\";\r\nimport {unit} from \"plain-utils/string/unit\";\r\nimport {useTableGetScroll} from \"../../../core/useTableGetScroll\";\r\nimport {usePlcTreeDraggier} from \"./plc-tree.draggier\";\r\nimport {delay} from \"plain-utils/utils/delay\";\r\n\r\n/*只显示展开收起按钮的时候的基本宽度，不算content宽度*/\r\nconst size = 30\r\n\r\nexport default designPlc({\r\n    name: 'plc-tree',\r\n    standardProps: {\r\n        autoFixedLeft: {default: true},\r\n        order: {default: -9996},\r\n        width: {default: size},\r\n        noPadding: {default: true},\r\n        bodyCls: {default: 'plc-tree-node'},\r\n    },\r\n    externalProps: {\r\n        contentWidth: {type: Number, default: 100},                         // 显示的内容宽度\r\n        rowDraggable: {type: Boolean},                                      // 行是否可以拖拽排序\r\n        allowRowDraggable: {type: Function as PropType<(node: TableNode) => boolean>},// 行是否可以被拖拽放置到其他位置\r\n        allowRowDroppable: {type: Function as PropType<(startNode: TableNode, moveNode: TableNode, dropType: TreeDropType) => boolean>},// 行是否可以被放置（放到子节点中，放到前面，放到后面）\r\n\r\n        folderCollapseIcon: {type: String, default: 'el-icon-folder-s'},\r\n        folderExpandIcon: {type: String, default: 'el-icon-folder-opened'},\r\n        leafIcon: {type: String, default: 'el-icon-document'},\r\n    },\r\n    setup(props, ctx) {\r\n\r\n        const plc = ctx.proxy as any as Plc;\r\n        const table = injectPlainTable()\r\n        const {getScroll} = useTableGetScroll(table.event.on.onVirtualMounted)\r\n\r\n        const {scopedSlots} = useScopedSlots({content: {node: Object as PropType<TableNode>, plc: Object as PropType<Plc>, row: Object as PropType<SimpleObject>},}, true)\r\n\r\n        const maxShowLevel = computed(() => {\r\n            let ret = 0\r\n            table.flatNodes.value.forEach(node => node.level > ret ? (ret = node.level) : null)\r\n            return ret\r\n        })\r\n        /**\r\n         * 动态列宽，当展开收起的时候，自动更新列宽\r\n         * @author  韦胜健\r\n         * @date    2020/8/24 9:35\r\n         */\r\n        const width = computed(() => {\r\n            // 展开按钮的基本宽度\r\n            let expand = size\r\n            // 内容宽度，如果有content插槽，则加上props.contentWidth\r\n            let content = scopedSlots.content.isExist() ? props.contentWidth : 0\r\n            // 如果显示复选框，则宽度再加上size\r\n            let check = table.props.showCheckbox ? size : 0\r\n            // 如果显示拖拽排序按钮，则宽度再加上size\r\n            let draggable = props.rowDraggable ? size : 0\r\n\r\n            // 每一层都增加一个左边距 (expand + check) * level，所以每一层都加上这个宽度\r\n            const level = maxShowLevel.value\r\n            // 最后最大层的宽度\r\n            return expand * (level - 1) + (content + expand + check + draggable)\r\n        })\r\n\r\n        const methods = {\r\n            ...table.expandMethods,\r\n            ...table.checkMethods,\r\n            ...table.treeNodeMethods,\r\n        }\r\n\r\n        const handler = {\r\n            ...table.handler,\r\n        }\r\n\r\n        const draggier = usePlcTreeDraggier({\r\n            rowClass: 'plt-row',\r\n            dragClass: 'plc-tree-node-drag-btn',\r\n            levelPadding: size,\r\n            flatDataList: table.flatNodes,\r\n            props,\r\n            getScroll,\r\n            getParents: table.utils.getParents,\r\n            methods: {\r\n                ...methods,\r\n                refreshCheckStatus: async () => {\r\n                    await delay(120)\r\n                    table.flatNodes.value.forEach(methods.refreshCheckStatus)\r\n                },\r\n            },\r\n        })\r\n\r\n        const utils = {\r\n            getExpanderAttrs: (node: TableNode) => {\r\n                return {\r\n                    style: {marginLeft: unit((node.level - 1) * size)} as any,\r\n                }\r\n            },\r\n        }\r\n\r\n        onMounted(() => {\r\n            watch(() => maxShowLevel.value, () => {\r\n                plc.state.width = width.value\r\n            }, {immediate: true})\r\n        })\r\n\r\n        Object.assign(ctx.proxy, methods)\r\n\r\n        let unmountListener = [] as SimpleFunction[]\r\n        if (table.props.expandOnClickNode) {\r\n            const listener = (node: TableNode) => methods.toggleExpand(node)\r\n            table.event.on.onClickCell(listener)\r\n            unmountListener.push(listener)\r\n        }\r\n        if (table.props.checkOnClickNode) {\r\n            const listener = (node: TableNode) => methods.toggleCheck(node)\r\n            table.event.on.onClickCell(listener)\r\n            unmountListener.push(listener)\r\n        }\r\n        if (unmountListener.length > 0) {\r\n            onBeforeUnmount(() => unmountListener.forEach(listener => table.event.off.onClickCell(listener)))\r\n        }\r\n\r\n        return {\r\n            tableProps: table.props,\r\n            props,\r\n            scopedSlots,\r\n            handler,\r\n            utils,\r\n            draggier,\r\n            methods,\r\n        }\r\n    },\r\n}, {\r\n    summary: () => null,\r\n    head: ({refer, plc}) => (<>\r\n        <pl-dropdown\r\n            placement=\"bottom\"\r\n            v-slots={{\r\n                default: () => <pl-button icon=\"el-icon-menu\" mode=\"text\"/>,\r\n                popper: () => <pl-dropdown-menu>\r\n                    <pl-dropdown-option label=\"全部展开\" icon=\"el-icon-zoom-full\" onClick={refer.methods.expandAll}/>\r\n                    <pl-dropdown-option label=\"全部收起\" icon=\"el-icon-zoom-scale\" onClick={refer.methods.collapseAll}/>\r\n                    {refer.tableProps.showCheckbox && <>\r\n                        <pl-dropdown-option label=\"全部选中\" icon=\"el-icon-check\" onClick={refer.methods.checkAll}/>\r\n                        <pl-dropdown-option label=\"取消选中\" icon=\"el-icon-close\" onClick={refer.methods.uncheckAll}/>\r\n                    </>}\r\n                </pl-dropdown-menu>\r\n            }}\r\n        />\r\n        <div class=\"plc-tree-node-content\">{plc.props.title}</div>\r\n    </>),\r\n    default: ({refer, node, plc, row}) => {\r\n        return (\r\n            <>\r\n                <div class=\"plc-tree-node-expander\" {...refer.utils.getExpanderAttrs(node)}>\r\n                    <pl-button\r\n                        loading={node.loading}\r\n                        mode=\"text\"\r\n                        size=\"normal\"\r\n                        icon={node.isLeaf ? refer.props.leafIcon : node.expand ? refer.props.folderExpandIcon : refer.props.folderCollapseIcon}\r\n                        onClick={(e: MouseEvent) => !node.isLeaf && refer.handler.onClickExpandIcon(e, node)}/>\r\n                </div>\r\n                {refer.tableProps.showCheckbox && (\r\n                    <div class=\"plc-tree-node-check\">\r\n                        <pl-checkbox\r\n                            key={node.key}\r\n                            size={'normal'}\r\n                            modelValue={node.check}\r\n                            customReadonlny\r\n                            checkStatus={node.checkStatus}\r\n                            disabled={!node.isCheckable}\r\n                            onClick={(e: MouseEvent) => refer.handler.onClickCheckbox(e, node)}\r\n                        />\r\n                    </div>\r\n                )}\r\n                {refer.props.rowDraggable && (\r\n                    <pl-button mode=\"text\"\r\n                               icon=\"el-icon-list\"\r\n                               class=\"plc-tree-node-drag-btn\"\r\n                               disabled={!refer.draggier.utils.allowDrag(node)}\r\n                               onMousedown={refer.draggier.handler.onMousedown}/>\r\n                )}\r\n                {refer.scopedSlots.content.isExist() && (\r\n                    <div class=\"plc-tree-node-content\" style={`width:${unit(refer.props.contentWidth)}`}>\r\n                        {refer.scopedSlots.content({node, row, plc}, !plc.props.field ? null : row[plc.props.field])}\r\n                    </div>\r\n                )}\r\n            </>\r\n        )\r\n    }\r\n})","import {designComponent} from \"../../use/designComponent\";\r\nimport {$$file, FileServiceDefaultAccept, FileServiceSingleFile, FileServiceValidator} from \"../file-service/file-service\";\r\nimport {computed, PropType} from 'vue';\r\nimport {EditProps, useEdit} from \"../../use/useEdit\";\r\nimport {useModel} from \"../../use/useModel\";\r\nimport {toArray} from \"../../utils/toArray\";\r\nimport './upload.scss'\r\nimport {useClass} from \"../../use/useClasses\";\r\nimport {createCounter} from \"../../utils/createCounter\";\r\nimport {VNodeChild} from \"../../shims\";\r\nimport {$$dialog} from \"../dialog-service\";\r\nimport {$$message} from \"../message\";\r\nimport {defer} from \"../../utils/defer\";\r\nimport {useSlots} from \"../../use/useSlots\";\r\nimport {useScopedSlots} from \"../../use/useScopedSlots\";\r\n\r\nconst nextFileId = createCounter('upload')\r\n\r\nexport enum UploadStatus {\r\n    ready = 'ready',                        // 刚添加，还未上传\r\n    success = 'success',                    // 已上传完毕\r\n    error = 'error',                        // 上传失败\r\n    uploading = 'uploading',                // 正在上传\r\n    remove = 'remove',                      // 已删除\r\n    empty = 'empty',                        // 无文件\r\n}\r\n\r\ntype UploadFile = {\r\n    status?: UploadStatus,\r\n    id: string,\r\n    name: string,\r\n    response?: any,\r\n    file?: FileServiceSingleFile,\r\n    percent?: number,\r\n}\r\n\r\ntype BeforeRemove = (file: UploadFile) => boolean\r\ntype BeforeUpload = (file: UploadFile) => void | Promise<void>\r\ntype HandleRemove = (file: UploadFile) => Promise<void>\r\ntype HandleUpload = (files: UploadFile | UploadFile[]) => Promise<void>\r\ntype HandlePreview = (file: UploadFile) => void\r\n\r\ntype UploadData = Record<string, string> | (() => Record<string, string>)\r\ntype UploadModelValue = UploadFile | UploadFile[]\r\n\r\nexport default designComponent({\r\n    name: 'pl-upload',\r\n    props: {\r\n        ...EditProps,\r\n        modelValue: {type: Array as PropType<UploadModelValue>},        // 双向绑定值，文件对象\r\n        /*chooseFile*/\r\n        accept: {type: String},                                         // FileServiceChooseFileConfig.accept, 接收上传的文件类型\r\n        multiple: {type: Boolean, default: true},                       // FileServiceChooseFileConfig.multiple, 是否上传多个文件\r\n        validator: {type: Function as PropType<FileServiceValidator>},  // FileServiceChooseFileConfig.validator, 选择文件的校验函数\r\n        max: {type: Number},                                            // 最多上传文件个数\r\n        /*upload*/\r\n        action: {type: String, required: true},                         // 文件上传地址\r\n        data: {type: [Object, Function] as PropType<UploadData>},       // 上传时的额外参数，或者获取额外参数的函数\r\n        headers: {type: Object as PropType<Record<string, string>>,},   // 上传时的请求头\r\n        withCredentials: {type: Boolean},                               // 带cookie凭证信息\r\n        filename: {type: String, required: true},                       // 文件上传的的时候接收的文件名\r\n        /*other*/\r\n        draggable: {type: Boolean},                                     // 支持拖拽上传\r\n        // request: {type: Function as PropType<CustomRequest>},           // 自定义上传行为\r\n        // method: {type: String, default: 'post'},                        // 上传时的method方法\r\n        autoUpload: {type: Boolean, default: true},                     // 获取到文件之后，自动上传文件\r\n        removeConfirm: {type: Boolean, default: true},                  // 删除前的确认提示\r\n\r\n        beforeUpload: {type: Function as PropType<BeforeUpload>},       // 上传前校验文件\r\n        beforeRemove: {type: Function as PropType<BeforeRemove>},       // 删除前校验\r\n        handleRemove: {type: Function as PropType<HandleRemove>},       // 执行删除逻辑\r\n        handleUpload: {type: Function as PropType<HandleUpload>},       // 自定义上传逻辑\r\n        handlePreview: {type: Function as PropType<HandlePreview>},     // 处理预览文件逻辑\r\n    },\r\n    emits: {\r\n        updateModelValue: (val?: UploadModelValue) => true,\r\n    },\r\n    setup({props, event: {emit}}) {\r\n\r\n        const {editComputed} = useEdit()\r\n        const {slots} = useSlots(['button'])\r\n        const {scopedSlots} = useScopedSlots({\r\n            default: {item: Object as PropType<UploadFile>, index: Number}\r\n        })\r\n\r\n        const singleModel = useModel(() => props.modelValue as undefined | UploadFile, emit.updateModelValue)\r\n        const multipleModel = useModel(() => props.modelValue as undefined | UploadFile[], emit.updateModelValue)\r\n\r\n        const renderIcon = {\r\n            [UploadStatus.success]: <pl-icon icon=\"el-icon-check-bold\"/>,\r\n            [UploadStatus.ready]: <pl-icon icon=\"el-icon-upload1\"/>,\r\n            [UploadStatus.error]: <pl-icon icon=\"el-icon-close-bold\"/>,\r\n            [UploadStatus.uploading]: <pl-loading type='beta' status=\"primary\"/>,\r\n            [UploadStatus.remove]: null,\r\n\r\n            [UploadStatus.empty]: <pl-icon icon=\"el-icon-upload1\"/>,\r\n        }\r\n        const singleEmptyFile: UploadFile = {\r\n            name: '未上传',\r\n            status: UploadStatus.empty,\r\n            id: 'nothing'\r\n        }\r\n\r\n        const classes = useClass(() => [\r\n            'pl-upload',\r\n            `pl-upload-${props.multiple ? 'multiple' : 'single'}`,\r\n            {\r\n                'pl-upload-remove': !!props.handleRemove,\r\n                'pl-upload-disabled': editComputed.value.disabled,\r\n                'pl-upload-preview': !!props.handlePreview,\r\n            }\r\n        ])\r\n\r\n        const utils = {\r\n            getItemClass: (item: UploadFile) => [\r\n                'pl-upload-item',\r\n                {\r\n                    [`pl-upload-item-status-${item.status}`]: !!item.status\r\n                }\r\n            ],\r\n        }\r\n\r\n        const handler = {\r\n            onSelectFile: async (files: File | File[]) => {\r\n\r\n                const selectFiles = toArray(files).filter(file => {\r\n                    const f = file as FileServiceSingleFile\r\n                    f.calcSize = Number((file.size / (1024 * 1024)).toFixed(2))\r\n                    /*validator*/\r\n                    if (props.validator != null) {\r\n                        const flag = props.validator(f)\r\n                        if (flag === false) {\r\n                            return false\r\n                        }\r\n                    }\r\n                    /*max*/\r\n                    if (props.max != null) {\r\n                        if (f.calcSize > props.max) {\r\n                            $$message.error(`[${file.name}]大小为${f.calcSize}MB，超过最大限制${props.max}MB`, {time: 5000})\r\n                            return false\r\n                        }\r\n                    }\r\n                    return true\r\n                }) as FileServiceSingleFile[]\r\n\r\n                if (!props.multiple) {\r\n                    const file = selectFiles[0]!\r\n                    singleModel.value = {\r\n                        id: nextFileId(),\r\n                        name: file.name,\r\n                        file,\r\n                        status: UploadStatus.ready,\r\n                    }\r\n                } else {\r\n                    const addFiles = toArray(selectFiles).map(f => ({\r\n                        id: nextFileId(),\r\n                        status: UploadStatus.ready,\r\n                        name: f.name,\r\n                        file: f,\r\n                    } as UploadFile))\r\n                    multipleModel.value = [...addFiles, ...multipleModel.value || []]\r\n                }\r\n                if (props.autoUpload) {\r\n                    await methods.upload()\r\n                }\r\n            },\r\n        }\r\n\r\n        const dropHandler = {\r\n            onDragover: (e: DragEvent) => {\r\n                e.preventDefault()\r\n            },\r\n            onDragLeave: (e: DragEvent) => {\r\n                e.preventDefault()\r\n            },\r\n            onDrop: async (e: DragEvent) => {\r\n                e.preventDefault()\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n\r\n                const accept = !props.accept ? undefined : FileServiceDefaultAccept[props.accept] || props.accept\r\n                let files: File[] = Array.from(e.dataTransfer!.files)\r\n                if (!!accept) {\r\n                    files = Array.from(e.dataTransfer!.files).filter(file => {\r\n                        const {type, name} = file;\r\n                        const extension = name.indexOf('.') > -1\r\n                            ? `.${name.split('.').pop()}`\r\n                            : '';\r\n                        const baseType = type.replace(/\\/.*$/, '');\r\n                        return accept.split(',')\r\n                            .map(type => type.trim())\r\n                            .filter(type => type)\r\n                            .some(acceptedType => {\r\n                                if (/\\..+$/.test(acceptedType)) {\r\n                                    return extension === acceptedType;\r\n                                }\r\n                                if (/\\/\\*$/.test(acceptedType)) {\r\n                                    return baseType === acceptedType.replace(/\\/\\*$/, '');\r\n                                }\r\n                                if (/^[^/]+\\/[^/]+$/.test(acceptedType)) {\r\n                                    return type === acceptedType;\r\n                                }\r\n                                return false;\r\n                            });\r\n                    })\r\n                }\r\n                if (files.length > 0) {\r\n                    await handler.onSelectFile(files)\r\n                }\r\n            },\r\n        }\r\n\r\n        const methods = {\r\n            chooseFile: async () => {\r\n                if (!editComputed.value.editable) {\r\n                    return\r\n                }\r\n                const files = await $$file.chooseFile({\r\n                    multiple: props.multiple,\r\n                    accept: props.accept,\r\n                    /*validator以及max不在这里校验，因为 drop file的时候不走这里，在onSelectFile中统一处理*/\r\n                    // validator: props.validator,\r\n                    // max: props.max,\r\n                })\r\n                await handler.onSelectFile(files)\r\n            },\r\n            removeFile: async (file: UploadFile) => {\r\n\r\n                // 状态不存在或者状态为success表示需要用户处理删除文件在后端的逻辑，否则其他状态直接前端删除\r\n                if (!file.status || file.status === UploadStatus.success) {\r\n                    if (props.removeConfirm) {\r\n                        await $$dialog.confirm(`确认要删除文件：${file.name} 吗？`)\r\n                    }\r\n                    if (!!props.beforeRemove) {await props.beforeRemove(file)}\r\n                    await props.handleRemove!(file)\r\n                }\r\n\r\n                // 前端删除\r\n                if (!props.multiple) {\r\n                    singleModel.value = undefined\r\n                } else {\r\n                    const index = multipleModel.value!.indexOf(file)\r\n                    if (index > -1) {\r\n                        multipleModel.value!.splice(index, 1)\r\n                    }\r\n                }\r\n            },\r\n            upload: () => {\r\n                let files = props.multiple ? multipleModel.value : (singleModel.value ? [singleModel.value] : undefined)\r\n                if (!files) return\r\n                /*上传 准备就绪或者上传失败的文件*/\r\n                files = files.filter(f => f.status === UploadStatus.ready || f.status === UploadStatus.error)\r\n                if (files.length === 0) return\r\n                return methods.uploadFile(props.multiple ? files : files[0])\r\n            },\r\n            uploadFile: async (uploadFiles: UploadFile | UploadFile[]) => {\r\n\r\n                toArray(uploadFiles).forEach(file => {\r\n                    file.percent = 0\r\n                    file.status = UploadStatus.uploading\r\n                })\r\n\r\n                if (!!props.beforeUpload) {\r\n                    await Promise.all(toArray(uploadFiles).map(file => props.beforeUpload!(file)))\r\n                }\r\n\r\n                const handler = {\r\n                    onSuccess: () => {\r\n                        toArray(uploadFiles).forEach(file => {\r\n                            file.status = UploadStatus.success\r\n                            file.percent = undefined\r\n                        })\r\n                        dfd.resolve()\r\n                    },\r\n                    onError: () => {\r\n                        toArray(uploadFiles).forEach(file => file.status = UploadStatus.error)\r\n                        dfd.reject()\r\n                    },\r\n                }\r\n\r\n                const dfd = defer()\r\n                if (!!props.handleUpload) {\r\n                    const promise = props.handleUpload(uploadFiles)\r\n                    if (!promise) {\r\n                        console.error('pl-upload: handleUpload must return promise object!')\r\n                    } else {\r\n                        promise.then(handler.onSuccess, handler.onError)\r\n                    }\r\n                } else {\r\n                    $$file.upload({\r\n                        action: props.action,\r\n                        data: typeof props.data === \"function\" ? props.data() : props.data,\r\n                        headers: props.headers,\r\n                        withCredentials: props.withCredentials,\r\n                        file: Array.isArray(uploadFiles) ? uploadFiles.map(f => f.file!) : uploadFiles.file!,\r\n                        filename: props.filename,\r\n                        ...handler,\r\n                        onProgress: (percent) => {\r\n                            toArray(uploadFiles).forEach(file => file.percent = percent)\r\n                        },\r\n                    })\r\n                }\r\n                return dfd.promise\r\n            },\r\n        }\r\n\r\n        const renderItem = (file: UploadFile, index: number, custom?: () => VNodeChild) => (\r\n            <div class={utils.getItemClass(file)} key={file.id}>\r\n                <div class=\"pl-upload-item-inner\">\r\n                    {!!custom ? custom() : <>\r\n                        {file.status ? renderIcon[file.status] : <pl-icon icon=\"el-icon-document\"/>}\r\n                        {file.status === UploadStatus.ready ? '(待上传) ' : ''}\r\n                        <div class=\"pl-upload-item-content\" onClick={() => !!props.handlePreview && props.handlePreview(file)}>\r\n                            {scopedSlots.default({item: file, index}, file.name)}\r\n                        </div>\r\n                    </>}\r\n                    {(\r\n                        !!props.handleRemove\r\n                        && file.status !== UploadStatus.empty\r\n                        && file.status !== UploadStatus.uploading\r\n                        && editComputed.value.editable\r\n                    ) && (\r\n                        <div class=\"pl-upload-item-remove\" onClick={() => methods.removeFile(file)}>\r\n                            <pl-icon icon=\"el-icon-delete-solid\"/>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {file.percent != null && (\r\n                    <div class=\"pl-upload-item-progress\">\r\n                        <div class=\"pl-upload-item-progress-inner\" style={{width: `${file.percent}%`}}/>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        )\r\n\r\n        const singleRender = computed(() => <>\r\n            <pl-button-group>\r\n                <pl-button label=\"选择文件\" icon=\"el-icon-upload\" onClick={methods.chooseFile}/>\r\n                {!props.autoUpload && <pl-button label=\"上传\" icon=\"el-icon-connection\" onClick={methods.upload}/>}\r\n                {slots.button()}\r\n            </pl-button-group>\r\n            {renderItem(singleModel.value || singleEmptyFile, 0)}\r\n        </>)\r\n        const multipleRender = computed(() => <>\r\n            <div class=\"pl-upload-button\">\r\n                {!props.draggable ? (\r\n                    <pl-button-group>\r\n                        <pl-button label=\"选择文件\" icon=\"el-icon-upload\" onClick={methods.chooseFile}/>\r\n                        {!props.autoUpload && <pl-button label=\"上传\" icon=\"el-icon-connection\" onClick={methods.upload}/>}\r\n                        {slots.button()}\r\n                    </pl-button-group>\r\n                ) : (\r\n                    <div class=\"pl-upload-drop-area\" onClick={methods.chooseFile} {...dropHandler}>\r\n                        <pl-icon icon=\"el-icon-upload\"/>\r\n                        <div>\r\n                            <span>将文件拖拽至此处，或者</span>\r\n                            <pl-button mode=\"text\" class=\"pl-upload-drop-upload-button\" onClick={methods.chooseFile}>\r\n                                <span>点击上传</span>\r\n                                <pl-icon icon=\"el-icon-upload1\"/>\r\n                            </pl-button>\r\n                            {slots.button()}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <div class=\"pl-upload-list\">\r\n                {!!multipleModel.value && multipleModel.value\r\n                    .filter(item => item.status !== UploadStatus.remove)\r\n                    .map((file, index) => renderItem(file, index))}\r\n            </div>\r\n        </>)\r\n\r\n        return {\r\n            render: () => {\r\n                return (\r\n                    <div class={classes.value}>\r\n                        {props.multiple ? multipleRender.value : singleRender.value}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    },\r\n})","import {App} from 'vue'\r\nimport PlcIndex from './plc-index'\r\nimport PlcExpand from './plc-expand'\r\nimport PlcCheck from './plc-check'\r\nimport PlcDraggier from './draggier/plc-draggier'\r\nimport PlcTree from './tree/plc-tree'\r\n\r\nconst components = [\r\n    PlcIndex,\r\n    PlcExpand,\r\n    PlcCheck,\r\n    PlcDraggier,\r\n    PlcTree,\r\n]\r\n\r\nexport const PlcStandard = {\r\n    install: (app: App) => {\r\n        components.forEach(c => app.component(c.name, c))\r\n    }\r\n}\r\n\r\nexport {\r\n    PlcIndex,\r\n    PlcExpand,\r\n    PlcCheck,\r\n    PlcDraggier,\r\n    PlcTree,\r\n}\r\n","import {designPlc} from \"../core/designPlc\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-input',\r\n}, {\r\n    edit: ({row, plc}) => !plc.props.field ? null : <pl-input v-model={row[plc.props.field]}/>\r\n},)","import {designPlc} from \"../core/designPlc\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-number',\r\n}, {\r\n    edit: ({row, plc}) => !plc.props.field ? null : <pl-number v-model={row[plc.props.field]}/>\r\n},)","import {designPlc} from \"../core/designPlc\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-date',\r\n}, {\r\n    edit: ({row, plc}) => !plc.props.field ? null : <pl-date v-model={row[plc.props.field]}/>\r\n},)","import {designPlc} from \"../core/designPlc\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-color-picker',\r\n}, {\r\n    default: ({row, plc}) => {\r\n        return !!plc.props.field && <>\r\n            <pl-color-button color={row[plc.props.field]} style=\"margin-right:6px;\"/>\r\n            {row[plc.props.field]}\r\n        </>\r\n    },\r\n    edit: ({row, plc}) => !plc.props.field ? null : <pl-color-picker v-model={row[plc.props.field]}/>\r\n},)","import {designPlc} from \"../core/designPlc\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-toggle',\r\n    standardProps: {\r\n        addEditPadding: {default: true},\r\n    },\r\n}, {\r\n    summary: () => null,\r\n    default: ({row, plc}) => !plc.props.field ? null : <pl-toggle disabled v-model={row[plc.props.field]} trueValue=\"Y\" falseValue=\"N\"/>,\r\n    edit: ({row, plc}) => !plc.props.field ? null : <pl-toggle v-model={row[plc.props.field]} trueValue=\"Y\" falseValue=\"N\"/>,\r\n})","import {designPlc} from \"../core/designPlc\";\r\n\r\nexport default designPlc({\r\n    name: 'plc-rate',\r\n    standardProps: {\r\n        addEditPadding: {default: true},\r\n    },\r\n}, {\r\n    default: ({row, plc}) => !plc.props.field ? null : <pl-rate disabled v-model={row[plc.props.field]}/>,\r\n    edit: ({row, plc}) => !plc.props.field ? null : <pl-rate v-model={row[plc.props.field]}/>,\r\n})","import {App} from 'vue'\r\nimport PlcInput from './plc-input'\r\nimport PlcNumber from './plc-number'\r\nimport PlcDate from './plc-date'\r\nimport PlcColorPicker from './plc-color-picker'\r\nimport PlcToggle from './plc-toggle'\r\nimport PlcRate from './plc-rate'\r\n\r\nconst components = [\r\n    PlcInput,\r\n    PlcNumber,\r\n    PlcDate,\r\n    PlcColorPicker,\r\n    PlcToggle,\r\n    PlcRate,\r\n]\r\n\r\nexport const PlcEdit = {\r\n    install: (app: App) => {\r\n        components.forEach(c => app.component(c.name, c))\r\n    }\r\n}\r\n\r\nexport {\r\n    PlcInput,\r\n    PlcNumber,\r\n    PlcDate,\r\n    PlcColorPicker,\r\n    PlcToggle,\r\n    PlcRate,\r\n}\r\n","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport table from './table'\r\nimport {VirtualTable} from \"./virtual-table\";\r\n\r\nimport Plc from './plc/core/plc'\r\nimport PlcGroup from './plc/core/plc-group'\r\nimport {PlcStandard} from \"./plc/standard\";\r\nimport {PlcEdit} from \"./plc/edit\";\r\n\r\nexport default createComponentPlugin(table, {\r\n    exposeComponents: {\r\n        VirtualTable,\r\n        Plc,\r\n        PlcGroup,\r\n    },\r\n    plugins: [\r\n        PlcStandard,\r\n        PlcEdit,\r\n    ]\r\n})","import {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\nimport upload from './upload'\r\n\r\nexport default createComponentPlugin(upload)","import Nav from './nav'\r\nimport {createComponentPlugin} from \"../../utils/createComponentPlugin\";\r\n\r\nexport default createComponentPlugin(Nav, {})","import {App} from 'vue'\r\nimport {$$file} from \"./file-service\";\r\n\r\nexport default {\r\n    install: (app: App) => {\r\n        app.config.globalProperties.$$file = $$file\r\n    }\r\n}","import {App} from \"vue\"\r\nimport {ComponentPlugin} from \"./shims\";\r\nimport {installPlugin} from \"./utils/installPlugin\";\r\n\r\nimport Root from './packages/root'\r\nimport Button from \"./packages/button\";\r\nimport ButtonGroup from './packages/button-group'\r\nimport Input from \"./packages/input\";\r\nimport Icon from './packages/icon';\r\nimport Loading from './packages/loading'\r\nimport LoadingMask from './packages/loading-mask'\r\nimport Checkbox from './packages/checkbox'\r\nimport CheckboxGroup from './packages/checkbox-group'\r\nimport MessageService from './packages/message'\r\nimport List from './packages/list'\r\nimport Item from './packages/item'\r\nimport Grid from './packages/grid'\r\nimport Radio from './packages/radio'\r\nimport RadioGroup from './packages/radio-group'\r\nimport Dialog from './packages/dialog'\r\nimport DialogService from './packages/dialog-service'\r\nimport Scroll from './packages/scroll'\r\nimport NoticeService from './packages/notice-service'\r\nimport LoadingService from './packages/loading-service'\r\nimport Number from './packages/number'\r\nimport Toggle from './packages/toggle'\r\nimport Slider from './packages/slider'\r\nimport Tag from './packages/tag'\r\nimport TagInput from './packages/tag-input'\r\nimport Rate from './packages/rate'\r\nimport VirtualList from './packages/virutal-list'\r\nimport Progress from './packages/progress'\r\nimport Pagination from './packages/pagination'\r\nimport Badge from './packages/badge'\r\nimport Step from './packages/step'\r\nimport Popper from './packages/popper'\r\nimport Dropdown from './packages/dropdown'\r\nimport Tooltip from './packages/tooltip'\r\nimport Alert from './packages/alert'\r\nimport Collapse from './packages/collapse'\r\nimport Card from './packages/card'\r\nimport Carousel from './packages/carousel'\r\nimport ColorPicker from './packages/color-picker'\r\nimport Cascade from './packages/cascade'\r\nimport Tree from './packages/tree'\r\nimport Select from './packages/select'\r\nimport DateTimeInput from './packages/date-time-input'\r\nimport Time from './packages/time'\r\nimport Date from './packages/date'\r\nimport Form from './packages/form'\r\nimport Table from './packages/table'\r\nimport Upload from './packages/upload'\r\nimport Nav from './packages/nav'\r\nimport FileService from './packages/file-service'\r\n\r\nfunction install(app: App) {\r\n    installPlugin(app, plugins)\r\n}\r\n\r\nconst plugins: ComponentPlugin[] = [\r\n    Root,\r\n\r\n    Button, ButtonGroup, Icon, Loading, LoadingMask,\r\n    List, Item, Grid, Dialog, Scroll, VirtualList, Progress, Pagination, Badge,\r\n    Step, Popper, Dropdown, Tooltip, Alert, Collapse, Card, Carousel, Table,\r\n    Nav,\r\n\r\n    Input, Checkbox, CheckboxGroup, Radio, RadioGroup, Number, Toggle, Slider,\r\n    Tag, TagInput, Rate, ColorPicker, Cascade, Tree, Select, Time, DateTimeInput, Date,\r\n    Form, Upload,\r\n\r\n    MessageService, DialogService, NoticeService, LoadingService, FileService,\r\n]\r\n\r\nexport {\r\n    install,\r\n\r\n    Root,\r\n\r\n    Button, ButtonGroup, Icon, Loading, LoadingMask,\r\n    List, Item, Grid, Dialog, Scroll, VirtualList, Progress, Pagination, Badge,\r\n    Step, Popper, Dropdown, Tooltip, Alert, Collapse, Card, Carousel, Table,\r\n    Nav,\r\n\r\n    Input, Checkbox, CheckboxGroup, Radio, RadioGroup, Number, Toggle, Slider,\r\n    Tag, TagInput, Rate, ColorPicker, Cascade, Tree, Select, Time, DateTimeInput, Date,\r\n    Form, Upload,\r\n\r\n    MessageService, DialogService, NoticeService, LoadingService, FileService,\r\n}\r\n\r\nexport default {\r\n    install,\r\n}"],"sourceRoot":""}