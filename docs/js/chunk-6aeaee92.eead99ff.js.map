{"version":3,"sources":["webpack:///./story/pages/table/table-row-draggable.vue","webpack:///./story/pages/table/table-row-draggable.vue?c271"],"names":["class","label","logSelected","virtualFlag","disabled","editNodes","length","saveEdit","cancelEdit","data","virtual","onDblClickRow","ref","toggleOnClickRow","key","field","title","required","name","methods","tableNode","e","console","log","edit","enableEdit","this","push","Promise","all","map","node","validate","validates","filter","Boolean","validateMessage","index","$message","error","forEach","closeEdit","selected","$refs","check","getSelected","item","join","render"],"mappings":"q8XACSA,MAAM,iB,iBAGiC,6B,iBAOC,Q,iBACE,Q,8hBAX/C,eA+BM,MA/BN,EA+BM,CA9BF,eAaU,Q,wBAZN,iBAEe,CAFf,eAEe,GAFDC,MAAM,SAAO,C,wBACvB,iBAAqE,CAArE,eAAqE,GAAzD,QAAO,EAAAC,aAAW,C,wBAAE,iBAAyB,C,oCAE7D,eAEe,GAFDD,MAAM,YAAU,C,wBAC1B,iBAAkC,CAAlC,eAAkC,G,WAAd,EAAAE,Y,qDAAA,EAAAA,YAAW,K,iCAEnC,eAKe,Q,wBAJX,iBAGkB,CAHlB,eAGkB,GAHAC,SAA0B,IAAhB,EAAAC,UAAUC,Q,yBAClC,iBAA6C,CAA7C,eAA6C,GAAjC,QAAO,EAAAC,UAAQ,C,wBAAE,iBAAI,C,0BACjC,eAA+C,GAAnC,QAAO,EAAAC,YAAU,C,wBAAE,iBAAI,C,uEAI/C,eAeW,GAdFC,KAAM,EAAAA,KACNC,QAAS,EAAAP,YACT,eAAe,EAAAQ,e,yBACpB,iBAAY,CAAZ,eAAY,GACZ,eAAyC,GAA9BC,IAAI,QAAQC,iBAAA,I,UACvB,eAAsC,GAAvBC,IAAK,EAAAX,YAAW,MAC/B,eAA4B,GAAvBY,MAAM,KAAKC,MAAM,OACtB,eAAiC,GAA5BD,MAAM,OAAOC,MAAM,UACxB,eAA8C,GAAnCD,MAAM,OAAOC,MAAM,MAAMC,SAAA,KACpC,eAAsC,GAA1BF,MAAM,OAAOC,MAAM,QAC/B,eAA4C,GAAlCD,MAAM,OAAOC,MAAM,KAAKC,SAAA,KAClC,eAA4C,GAA1BF,MAAM,QAAQC,MAAM,OACtC,eAAmC,GAAzBD,MAAM,OAAOC,MAAM,OAC7B,eAAqC,GAAzBD,MAAM,OAAOC,MAAM,W,wLASxB,GACXE,KAAM,gBACNT,KAFW,WAGP,MAAO,CACHA,KAAA,EACAJ,UAAW,GACXF,aAAa,IAGrBgB,QAAS,CACLR,cADK,SACSS,EAAWC,GACrBC,QAAQC,IAAI,YAAaH,GAKpBA,EAAUI,OACXJ,EAAUK,aACVC,KAAKrB,UAAUsB,KAAKP,KAGtBb,SAZD,WAYY,oLACYqB,QAAQC,IAAI,EAAKxB,UAAUyB,KAAI,SAAAC,GAAG,OAAKA,EAAKC,eADxD,UACPC,EADO,OACsEC,OAAOC,WACtFF,EAAU3B,OAAS,GAFV,uBAGTgB,QAAQC,IAAIU,GAHH,EAIgCA,EAAU,GAA5CG,EAJE,EAIFA,gBAAwBC,EAJtB,EAIeN,KAAOM,MAC/B,EAAKC,SAASC,MAAd,WAAwBF,EAAQ,EAAhC,oBAA6CD,IALpC,0BASb,EAAK/B,UAAUmC,SAAQ,SAAApB,GAAQ,OAAKA,EAAUb,cAC9C,EAAKF,UAAUmC,SAAQ,SAAApB,GAAQ,OAAKA,EAAUqB,eAC9C,EAAKpC,UAAY,GAXJ,+CAajBG,WAzBK,WA0BDkB,KAAKrB,UAAUmC,SAAQ,SAAApB,GACnBA,EAAUZ,gBAEdkB,KAAKrB,UAAY,IAGfH,YAhCD,WAgCe,8JACVwC,EAAW,EAAKC,MAAMC,MAAMC,cAClCvB,QAAQC,IAAImB,GACZ,EAAKJ,SAASI,EAASZ,KAAI,SAAAgB,GAAG,OAAKA,EAAKrC,KAAKS,QAAM6B,KAAK,MAHxC,gDC7EhC,EAAOC,OAASA,EAED","file":"js/chunk-6aeaee92.eead99ff.js","sourcesContent":["<template>\r\n    <div class=\"table-columns\">\r\n        <pl-form>\r\n            <pl-form-item label=\"获取选中行\">\r\n                <pl-button @click=\"logSelected\">$refs.check.getSelected()</pl-button>\r\n            </pl-form-item>\r\n            <pl-form-item label=\"是否开启虚拟滚动\">\r\n                <pl-toggle v-model=\"virtualFlag\"/>\r\n            </pl-form-item>\r\n            <pl-form-item>\r\n                <pl-button-group :disabled=\"editNodes.length === 0\">\r\n                    <pl-button @click=\"saveEdit\">保存编辑</pl-button>\r\n                    <pl-button @click=\"cancelEdit\">取消编辑</pl-button>\r\n                </pl-button-group>\r\n            </pl-form-item>\r\n        </pl-form>\r\n        <pl-table\r\n                :data=\"data\"\r\n                :virtual=\"virtualFlag\"\r\n                @dblclick-cell=\"onDblClickRow\">\r\n            <plc-index/>\r\n            <plc-check ref=\"check\" toggleOnClickRow/>\r\n            <plc-draggier :key=\"virtualFlag?1:2\"/>\r\n            <plc field=\"id\" title=\"编号\"/>\r\n            <plc field=\"name\" title=\"普通文本列\"/>\r\n            <plc-input field=\"name\" title=\"文本框\" required/>\r\n            <plc-number field=\"size\" title=\"数字框\"/>\r\n            <plc-date field=\"date\" title=\"日期\" required/>\r\n            <plc-color-picker field=\"color\" title=\"颜色\"/>\r\n            <plc-rate field=\"star\" title=\"评分\"/>\r\n            <plc-toggle field=\"flag\" title=\"开关\"/>\r\n        </pl-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import data from \"../data/data-1.json\";\r\n\r\n\r\n    export default {\r\n        name: \"table-columns\",\r\n        data() {\r\n            return {\r\n                data,\r\n                editNodes: [],\r\n                virtualFlag: false,\r\n            }\r\n        },\r\n        methods: {\r\n            onDblClickRow(tableNode, e) {\r\n                console.log('tableNode', tableNode)\r\n                /*if (!this.$plain.utils.hasClass(e.target, 'plt-body-cell')) {\r\n                    return\r\n                }*/\r\n\r\n                if (!tableNode.edit) {\r\n                    tableNode.enableEdit()\r\n                    this.editNodes.push(tableNode)\r\n                }\r\n            },\r\n            async saveEdit() {\r\n                const validates = (await Promise.all(this.editNodes.map(node => node.validate()))).filter(Boolean)\r\n                if (validates.length > 0) {\r\n                    console.log(validates)\r\n                    const {validateMessage, node: {index}} = validates[0]\r\n                    this.$message.error(`第${index + 1}条记录校验不通过，${validateMessage}`)\r\n                    return\r\n                }\r\n                // todo 网络保存逻辑\r\n                this.editNodes.forEach(tableNode => tableNode.saveEdit())\r\n                this.editNodes.forEach(tableNode => tableNode.closeEdit())\r\n                this.editNodes = []\r\n            },\r\n            cancelEdit() {\r\n                this.editNodes.forEach(tableNode => {\r\n                    tableNode.cancelEdit()\r\n                })\r\n                this.editNodes = []\r\n            },\r\n\r\n            async logSelected() {\r\n                const selected = this.$refs.check.getSelected()\r\n                console.log(selected)\r\n                this.$message(selected.map(item => item.data.name).join(','))\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n</style>","import { render } from \"./table-row-draggable.vue?vue&type=template&id=67cc1a78\"\nimport script from \"./table-row-draggable.vue?vue&type=script&lang=js\"\nexport * from \"./table-row-draggable.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}